{"test_class": {"identifier": "InfluxDbTcpSenderTest", "superclass": "", "interfaces": "", "fields": [], "file": "metrics-influxdb/src/test/java/com/izettle/metrics/influxdb/InfluxDbTcpSenderTest.java"}, "test_case": {"identifier": "shouldThrowUnknownHostException", "parameters": "()", "modifiers": "@Test(expected = UnknownHostException.class) public", "return": "void", "body": "@Test(expected = UnknownHostException.class)\n    public void shouldThrowUnknownHostException() throws Exception {\n        InfluxDbTcpSender influxDbTcpSender = new InfluxDbTcpSender(\n            \"testtestasdfg\",\n            10080,\n            1000,\n            \"test\",\n            \"\"\n        );\n        influxDbTcpSender.writeData(new byte[0]);\n    }", "signature": "void shouldThrowUnknownHostException()", "full_signature": "@Test(expected = UnknownHostException.class) public void shouldThrowUnknownHostException()", "class_method_signature": "InfluxDbTcpSenderTest.shouldThrowUnknownHostException()", "testcase": true, "constructor": false, "invocations": ["writeData"]}, "focal_class": {"identifier": "InfluxDbTcpSender", "superclass": "extends InfluxDbBaseSender", "interfaces": "", "fields": [{"original_string": "private static final int NUM_OF_RETRIES = 2;", "modifier": "private static final", "type": "int", "declarator": "NUM_OF_RETRIES = 2", "var_name": "NUM_OF_RETRIES"}, {"original_string": "private static final TimeUnit TCP_TIME_PRECISION = TimeUnit.NANOSECONDS;", "modifier": "private static final", "type": "TimeUnit", "declarator": "TCP_TIME_PRECISION = TimeUnit.NANOSECONDS", "var_name": "TCP_TIME_PRECISION"}, {"original_string": "private final String hostname;", "modifier": "private final", "type": "String", "declarator": "hostname", "var_name": "hostname"}, {"original_string": "private final int port;", "modifier": "private final", "type": "int", "declarator": "port", "var_name": "port"}, {"original_string": "private final int socketTimeout;", "modifier": "private final", "type": "int", "declarator": "socketTimeout", "var_name": "socketTimeout"}, {"original_string": "private Socket tcpSocket;", "modifier": "private", "type": "Socket", "declarator": "tcpSocket", "var_name": "tcpSocket"}], "methods": [{"identifier": "InfluxDbTcpSender", "parameters": "(\n        final String hostname,\n        final int port,\n        final int socketTimeout,\n        final String database,\n        final String measurementPrefix)", "modifiers": "public", "return": "", "signature": " InfluxDbTcpSender(\n        final String hostname,\n        final int port,\n        final int socketTimeout,\n        final String database,\n        final String measurementPrefix)", "full_signature": "public  InfluxDbTcpSender(\n        final String hostname,\n        final int port,\n        final int socketTimeout,\n        final String database,\n        final String measurementPrefix)", "class_method_signature": "InfluxDbTcpSender.InfluxDbTcpSender(\n        final String hostname,\n        final int port,\n        final int socketTimeout,\n        final String database,\n        final String measurementPrefix)", "testcase": false, "constructor": true}, {"identifier": "writeData", "parameters": "(byte[] line)", "modifiers": "@Override protected", "return": "int", "signature": "int writeData(byte[] line)", "full_signature": "@Override protected int writeData(byte[] line)", "class_method_signature": "InfluxDbTcpSender.writeData(byte[] line)", "testcase": false, "constructor": false}, {"identifier": "retryConnect", "parameters": "(boolean force)", "modifiers": "private", "return": "void", "signature": "void retryConnect(boolean force)", "full_signature": "private void retryConnect(boolean force)", "class_method_signature": "InfluxDbTcpSender.retryConnect(boolean force)", "testcase": false, "constructor": false}], "file": "metrics-influxdb/src/main/java/com/izettle/metrics/influxdb/InfluxDbTcpSender.java"}, "focal_method": {"identifier": "writeData", "parameters": "(byte[] line)", "modifiers": "@Override protected", "return": "int", "body": "@Override\n    protected int writeData(byte[] line) throws Exception {\n        retryConnect(false);\n\n        for (int i = 1; i <= NUM_OF_RETRIES; i++) {\n            try {\n                OutputStream outputStream = tcpSocket.getOutputStream();\n                outputStream.write(line);\n                outputStream.flush();\n\n                return 0;\n            } catch (IOException e) {\n                // In case of exception, force reconnect\n                retryConnect(true);\n            }\n        }\n\n        return 0;\n    }", "signature": "int writeData(byte[] line)", "full_signature": "@Override protected int writeData(byte[] line)", "class_method_signature": "InfluxDbTcpSender.writeData(byte[] line)", "testcase": false, "constructor": false, "invocations": ["retryConnect", "getOutputStream", "write", "flush", "retryConnect"]}, "repository": {"repo_id": 43748389, "url": "https://github.com/iZettle/dropwizard-metrics-influxdb", "language": "Java", "is_fork": false, "fork_count": 33, "stargazer_count": 82, "size": 272, "license": "licensed"}}