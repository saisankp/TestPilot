{"test_class": {"identifier": "QueueListenerImplTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "@Autowired\n\tprivate QueueListener queueListener;", "modifier": "@Autowired\n\tprivate", "type": "QueueListener", "declarator": "queueListener", "var_name": "queueListener"}, {"original_string": "@Autowired\n\tprivate EventBus eventBus;", "modifier": "@Autowired\n\tprivate", "type": "EventBus", "declarator": "eventBus", "var_name": "eventBus"}, {"original_string": "@Autowired\n\tprivate ExecutionMessageConverter executionMessageConverter;", "modifier": "@Autowired\n\tprivate", "type": "ExecutionMessageConverter", "declarator": "executionMessageConverter", "var_name": "executionMessageConverter"}, {"original_string": "@Autowired\n\tprivate ScoreEventFactory scoreEventFactory;", "modifier": "@Autowired\n\tprivate", "type": "ScoreEventFactory", "declarator": "scoreEventFactory", "var_name": "scoreEventFactory"}, {"original_string": "@Autowired\n\tprivate ExecutionStateService executionStateService;", "modifier": "@Autowired\n\tprivate", "type": "ExecutionStateService", "declarator": "executionStateService", "var_name": "executionStateService"}, {"original_string": "@Autowired\n\tprivate SplitJoinService splitJoinService;", "modifier": "@Autowired\n\tprivate", "type": "SplitJoinService", "declarator": "splitJoinService", "var_name": "splitJoinService"}], "file": "engine/queue/score-queue-impl/src/test/java/io/cloudslang/engine/queue/services/QueueListenerImplTest.java"}, "test_case": {"identifier": "testOnFailedBranchExecution", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n\tpublic void testOnFailedBranchExecution() {\n\t\tList<ExecutionMessage> messages = new ArrayList<>();\n\t\tExecution execution1 = createBranchExecution();\n\t\tExecution execution2 = createBranchExecution();\n\t\tmessages.add(createExecutionMessage(execution1));\n\t\tmessages.add(createExecutionMessage(execution2));\n\n\t\tqueueListener.onFailed(messages);\n\n\t\tverify(splitJoinService, times(1)).endBranch((List<Execution>) argThat(hasItem(execution1)));\n\t\tverify(splitJoinService, times(1)).endBranch((List<Execution>) argThat(hasItem(execution2)));\n\t}", "signature": "void testOnFailedBranchExecution()", "full_signature": "@Test public void testOnFailedBranchExecution()", "class_method_signature": "QueueListenerImplTest.testOnFailedBranchExecution()", "testcase": true, "constructor": false, "invocations": ["createBranchExecution", "createBranchExecution", "add", "createExecutionMessage", "add", "createExecutionMessage", "onFailed", "endBranch", "verify", "times", "argThat", "hasItem", "endBranch", "verify", "times", "argThat", "hasItem"]}, "focal_class": {"identifier": "QueueListenerImpl", "superclass": "", "interfaces": "implements QueueListener", "fields": [{"original_string": "private static Logger logger = Logger.getLogger(QueueListenerImpl.class);", "modifier": "private static", "type": "Logger", "declarator": "logger = Logger.getLogger(QueueListenerImpl.class)", "var_name": "logger"}, {"original_string": "private static final String FLOW_TERMINATION_TYPE = \"FLOW_TERMINATION_TYPE\";", "modifier": "private static final", "type": "String", "declarator": "FLOW_TERMINATION_TYPE = \"FLOW_TERMINATION_TYPE\"", "var_name": "FLOW_TERMINATION_TYPE"}, {"original_string": "private static final String STEP_TYPE = \"STEP_TYPE\";", "modifier": "private static final", "type": "String", "declarator": "STEP_TYPE = \"STEP_TYPE\"", "var_name": "STEP_TYPE"}, {"original_string": "private static final String MULTI_INSTANCE = \"MULTI_INSTANCE\";", "modifier": "private static final", "type": "String", "declarator": "MULTI_INSTANCE = \"MULTI_INSTANCE\"", "var_name": "MULTI_INSTANCE"}, {"original_string": "@Autowired\n    private ExecutionStateService executionStateService;", "modifier": "@Autowired\n    private", "type": "ExecutionStateService", "declarator": "executionStateService", "var_name": "executionStateService"}, {"original_string": "@Autowired\n    private ExecutionMessageConverter executionMessageConverter;", "modifier": "@Autowired\n    private", "type": "ExecutionMessageConverter", "declarator": "executionMessageConverter", "var_name": "executionMessageConverter"}, {"original_string": "@Autowired\n    private EventBus eventBus;", "modifier": "@Autowired\n    private", "type": "EventBus", "declarator": "eventBus", "var_name": "eventBus"}, {"original_string": "@Autowired\n    private SplitJoinService splitJoinService;", "modifier": "@Autowired\n    private", "type": "SplitJoinService", "declarator": "splitJoinService", "var_name": "splitJoinService"}, {"original_string": "@Autowired\n    private ScoreEventFactory scoreEventFactory;", "modifier": "@Autowired\n    private", "type": "ScoreEventFactory", "declarator": "scoreEventFactory", "var_name": "scoreEventFactory"}, {"original_string": "@Autowired\n    private PauseResumeService pauseResumeService;", "modifier": "@Autowired\n    private", "type": "PauseResumeService", "declarator": "pauseResumeService", "var_name": "pauseResumeService"}], "methods": [{"identifier": "prePersist", "parameters": "(List<ExecutionMessage> messages)", "modifiers": "@Override public", "return": "void", "signature": "void prePersist(List<ExecutionMessage> messages)", "full_signature": "@Override public void prePersist(List<ExecutionMessage> messages)", "class_method_signature": "QueueListenerImpl.prePersist(List<ExecutionMessage> messages)", "testcase": false, "constructor": false}, {"identifier": "onEnqueue", "parameters": "(List<ExecutionMessage> messages, int queueSize)", "modifiers": "@Override public", "return": "void", "signature": "void onEnqueue(List<ExecutionMessage> messages, int queueSize)", "full_signature": "@Override public void onEnqueue(List<ExecutionMessage> messages, int queueSize)", "class_method_signature": "QueueListenerImpl.onEnqueue(List<ExecutionMessage> messages, int queueSize)", "testcase": false, "constructor": false}, {"identifier": "onPoll", "parameters": "(List<ExecutionMessage> messages, int queueSize)", "modifiers": "@Override public", "return": "void", "signature": "void onPoll(List<ExecutionMessage> messages, int queueSize)", "full_signature": "@Override public void onPoll(List<ExecutionMessage> messages, int queueSize)", "class_method_signature": "QueueListenerImpl.onPoll(List<ExecutionMessage> messages, int queueSize)", "testcase": false, "constructor": false}, {"identifier": "onTerminated", "parameters": "(List<ExecutionMessage> messages)", "modifiers": "@Override public", "return": "void", "signature": "void onTerminated(List<ExecutionMessage> messages)", "full_signature": "@Override public void onTerminated(List<ExecutionMessage> messages)", "class_method_signature": "QueueListenerImpl.onTerminated(List<ExecutionMessage> messages)", "testcase": false, "constructor": false}, {"identifier": "handleTerminatedMessages", "parameters": "(List<ExecutionMessage> messages)", "modifiers": "private", "return": "ScoreEvent[]", "signature": "ScoreEvent[] handleTerminatedMessages(List<ExecutionMessage> messages)", "full_signature": "private ScoreEvent[] handleTerminatedMessages(List<ExecutionMessage> messages)", "class_method_signature": "QueueListenerImpl.handleTerminatedMessages(List<ExecutionMessage> messages)", "testcase": false, "constructor": false}, {"identifier": "isBranch", "parameters": "(Execution execution)", "modifiers": "private", "return": "boolean", "signature": "boolean isBranch(Execution execution)", "full_signature": "private boolean isBranch(Execution execution)", "class_method_signature": "QueueListenerImpl.isBranch(Execution execution)", "testcase": false, "constructor": false}, {"identifier": "extractExecution", "parameters": "(ExecutionMessage executionMessage)", "modifiers": "private", "return": "Execution", "signature": "Execution extractExecution(ExecutionMessage executionMessage)", "full_signature": "private Execution extractExecution(ExecutionMessage executionMessage)", "class_method_signature": "QueueListenerImpl.extractExecution(ExecutionMessage executionMessage)", "testcase": false, "constructor": false}, {"identifier": "onFailed", "parameters": "(List<ExecutionMessage> messages)", "modifiers": "@Override public", "return": "void", "signature": "void onFailed(List<ExecutionMessage> messages)", "full_signature": "@Override public void onFailed(List<ExecutionMessage> messages)", "class_method_signature": "QueueListenerImpl.onFailed(List<ExecutionMessage> messages)", "testcase": false, "constructor": false}, {"identifier": "onPersistMessage", "parameters": "(List<ExecutionMessage> messages)", "modifiers": "@Override public", "return": "void", "signature": "void onPersistMessage(List<ExecutionMessage> messages)", "full_signature": "@Override public void onPersistMessage(List<ExecutionMessage> messages)", "class_method_signature": "QueueListenerImpl.onPersistMessage(List<ExecutionMessage> messages)", "testcase": false, "constructor": false}, {"identifier": "pauseExecution", "parameters": "(Execution execution, PauseReason pauseReason)", "modifiers": "private", "return": "Long", "signature": "Long pauseExecution(Execution execution, PauseReason pauseReason)", "full_signature": "private Long pauseExecution(Execution execution, PauseReason pauseReason)", "class_method_signature": "QueueListenerImpl.pauseExecution(Execution execution, PauseReason pauseReason)", "testcase": false, "constructor": false}, {"identifier": "createFailureEvents", "parameters": "(List<ExecutionMessage> messages)", "modifiers": "private", "return": "ScoreEvent[]", "signature": "ScoreEvent[] createFailureEvents(List<ExecutionMessage> messages)", "full_signature": "private ScoreEvent[] createFailureEvents(List<ExecutionMessage> messages)", "class_method_signature": "QueueListenerImpl.createFailureEvents(List<ExecutionMessage> messages)", "testcase": false, "constructor": false}, {"identifier": "deleteExecutionStateObjects", "parameters": "(List<ExecutionMessage> messages)", "modifiers": "private", "return": "void", "signature": "void deleteExecutionStateObjects(List<ExecutionMessage> messages)", "full_signature": "private void deleteExecutionStateObjects(List<ExecutionMessage> messages)", "class_method_signature": "QueueListenerImpl.deleteExecutionStateObjects(List<ExecutionMessage> messages)", "testcase": false, "constructor": false}, {"identifier": "failedBecauseNoWorker", "parameters": "(Execution execution)", "modifiers": "private", "return": "boolean", "signature": "boolean failedBecauseNoWorker(Execution execution)", "full_signature": "private boolean failedBecauseNoWorker(Execution execution)", "class_method_signature": "QueueListenerImpl.failedBecauseNoWorker(Execution execution)", "testcase": false, "constructor": false}, {"identifier": "failedBecausePreconditionNotFulfilled", "parameters": "(Execution execution)", "modifiers": "private", "return": "boolean", "signature": "boolean failedBecausePreconditionNotFulfilled(Execution execution)", "full_signature": "private boolean failedBecausePreconditionNotFulfilled(Execution execution)", "class_method_signature": "QueueListenerImpl.failedBecausePreconditionNotFulfilled(Execution execution)", "testcase": false, "constructor": false}], "file": "engine/queue/score-queue-impl/src/main/java/io/cloudslang/engine/queue/services/QueueListenerImpl.java"}, "focal_method": {"identifier": "onFailed", "parameters": "(List<ExecutionMessage> messages)", "modifiers": "@Override public", "return": "void", "body": "@Override\n    public void onFailed(List<ExecutionMessage> messages) {\n        deleteExecutionStateObjects(messages);\n        ScoreEvent[] events = createFailureEvents(messages);\n        if (events.length > 0) {\n            try {\n                eventBus.dispatch(events);\n            } catch (InterruptedException e) {\n                logger.error(\"Thread is interrupted. Ignoring... \", e);\n            }\n        }\n    }", "signature": "void onFailed(List<ExecutionMessage> messages)", "full_signature": "@Override public void onFailed(List<ExecutionMessage> messages)", "class_method_signature": "QueueListenerImpl.onFailed(List<ExecutionMessage> messages)", "testcase": false, "constructor": false, "invocations": ["deleteExecutionStateObjects", "createFailureEvents", "dispatch", "error"]}, "repository": {"repo_id": 28394156, "url": "https://github.com/CloudSlang/score", "stars": 76, "created": "12/23/2014 11:19:26 AM +00:00", "updates": "2020-01-27T14:36:32+00:00", "fork": "False", "license": "licensed"}}