{"test_class": {"identifier": "TestStandardFlowRetrievalService", "superclass": "", "interfaces": "", "fields": [{"original_string": "private C2NiFiRegistryClient clientFactory;", "modifier": "private", "type": "C2NiFiRegistryClient", "declarator": "clientFactory", "var_name": "clientFactory"}, {"original_string": "private NiFiRegistryClient client;", "modifier": "private", "type": "NiFiRegistryClient", "declarator": "client", "var_name": "client"}, {"original_string": "private FlowSnapshotClient flowSnapshotClient;", "modifier": "private", "type": "FlowSnapshotClient", "declarator": "flowSnapshotClient", "var_name": "flowSnapshotClient"}, {"original_string": "private FlowRetrievalService flowRetrievalService;", "modifier": "private", "type": "FlowRetrievalService", "declarator": "flowRetrievalService", "var_name": "flowRetrievalService"}], "file": "efm/efm-c2-protocol/efm-c2-protocol-framework/src/test/java/com/cloudera/cem/efm/service/flow/retrieval/TestStandardFlowRetrievalService.java"}, "test_case": {"identifier": "testRetrieveVersionsListWhenVersionsExist", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testRetrieveVersionsListWhenVersionsExist() throws IOException, FlowRetrievalException, NiFiRegistryException {\n        final FlowUri flowUri = new FlowUri(\"http://localhost:18080\", UUID.randomUUID().toString(), UUID.randomUUID().toString());\n\n        final VersionedFlowSnapshot flowSnapshot1 = FlowTestUtils.createSnapshot(flowUri.getBucketId(), flowUri.getFlowId(), 1);\n        final VersionedFlowSnapshot flowSnapshot2 = FlowTestUtils.createSnapshot(flowUri.getBucketId(), flowUri.getFlowId(), 2);\n\n        when(flowSnapshotClient.getSnapshotMetadata(flowUri.getBucketId(), flowUri.getFlowId()))\n                .thenReturn(Arrays.asList(\n                        flowSnapshot1.getSnapshotMetadata(),\n                        flowSnapshot2.getSnapshotMetadata()));\n\n        final List<VersionedFlowSnapshotMetadata> returnedVersions = flowRetrievalService.getVersions(flowUri);\n        assertNotNull(returnedVersions);\n        assertEquals(2, returnedVersions.size());\n    }", "signature": "void testRetrieveVersionsListWhenVersionsExist()", "full_signature": "@Test public void testRetrieveVersionsListWhenVersionsExist()", "class_method_signature": "TestStandardFlowRetrievalService.testRetrieveVersionsListWhenVersionsExist()", "testcase": true, "constructor": false, "invocations": ["toString", "randomUUID", "toString", "randomUUID", "createSnapshot", "getBucketId", "getFlowId", "createSnapshot", "getBucketId", "getFlowId", "thenReturn", "when", "getSnapshotMetadata", "getBucketId", "getFlowId", "asList", "getSnapshotMetadata", "getSnapshotMetadata", "getVersions", "assertNotNull", "assertEquals", "size"]}, "focal_class": {"identifier": "StandardFlowRetrievalService", "superclass": "", "interfaces": "implements FlowRetrievalService", "fields": [{"original_string": "private static final Logger LOGGER = LoggerFactory.getLogger(StandardFlowRetrievalService.class);", "modifier": "private static final", "type": "Logger", "declarator": "LOGGER = LoggerFactory.getLogger(StandardFlowRetrievalService.class)", "var_name": "LOGGER"}, {"original_string": "private final C2NiFiRegistryClient clientFactory;", "modifier": "private final", "type": "C2NiFiRegistryClient", "declarator": "clientFactory", "var_name": "clientFactory"}], "methods": [{"identifier": "StandardFlowRetrievalService", "parameters": "(final C2NiFiRegistryClient clientFactory)", "modifiers": "@Autowired public", "return": "", "signature": " StandardFlowRetrievalService(final C2NiFiRegistryClient clientFactory)", "full_signature": "@Autowired public  StandardFlowRetrievalService(final C2NiFiRegistryClient clientFactory)", "class_method_signature": "StandardFlowRetrievalService.StandardFlowRetrievalService(final C2NiFiRegistryClient clientFactory)", "testcase": false, "constructor": true}, {"identifier": "getVersions", "parameters": "(final FlowUri flowUri)", "modifiers": "@Override public", "return": "List<VersionedFlowSnapshotMetadata>", "signature": "List<VersionedFlowSnapshotMetadata> getVersions(final FlowUri flowUri)", "full_signature": "@Override public List<VersionedFlowSnapshotMetadata> getVersions(final FlowUri flowUri)", "class_method_signature": "StandardFlowRetrievalService.getVersions(final FlowUri flowUri)", "testcase": false, "constructor": false}, {"identifier": "getFlow", "parameters": "(final FlowUri flowUri, final int version)", "modifiers": "@Override public", "return": "VersionedFlowSnapshot", "signature": "VersionedFlowSnapshot getFlow(final FlowUri flowUri, final int version)", "full_signature": "@Override public VersionedFlowSnapshot getFlow(final FlowUri flowUri, final int version)", "class_method_signature": "StandardFlowRetrievalService.getFlow(final FlowUri flowUri, final int version)", "testcase": false, "constructor": false}, {"identifier": "getLatestFlow", "parameters": "(final FlowUri flowUri)", "modifiers": "@Override public", "return": "VersionedFlowSnapshot", "signature": "VersionedFlowSnapshot getLatestFlow(final FlowUri flowUri)", "full_signature": "@Override public VersionedFlowSnapshot getLatestFlow(final FlowUri flowUri)", "class_method_signature": "StandardFlowRetrievalService.getLatestFlow(final FlowUri flowUri)", "testcase": false, "constructor": false}], "file": "efm/efm-c2-protocol/efm-c2-protocol-framework/src/main/java/com/cloudera/cem/efm/service/flow/retrieval/StandardFlowRetrievalService.java"}, "focal_method": {"identifier": "getVersions", "parameters": "(final FlowUri flowUri)", "modifiers": "@Override public", "return": "List<VersionedFlowSnapshotMetadata>", "body": "@Override\n    public List<VersionedFlowSnapshotMetadata> getVersions(final FlowUri flowUri)\n            throws IOException, FlowRetrievalException {\n        if (flowUri == null) {\n            throw new IllegalArgumentException(\"FlowUri cannot be null\");\n        }\n\n        if (LOGGER.isTraceEnabled()) {\n            LOGGER.trace(\"Getting flow versions for {}\", new Object[] {flowUri});\n        }\n\n        final NiFiRegistryClient client = clientFactory.getClient();\n        try {\n            return client.getFlowSnapshotClient().getSnapshotMetadata(flowUri.getBucketId(), flowUri.getFlowId());\n        } catch (IOException ioe) {\n            throw ioe;\n        } catch (NiFiRegistryException nre) {\n            throw new FlowRetrievalException(\"Error retrieving flow versions for \" + flowUri + \": \" + nre.getMessage(), nre);\n        }\n    }", "signature": "List<VersionedFlowSnapshotMetadata> getVersions(final FlowUri flowUri)", "full_signature": "@Override public List<VersionedFlowSnapshotMetadata> getVersions(final FlowUri flowUri)", "class_method_signature": "StandardFlowRetrievalService.getVersions(final FlowUri flowUri)", "testcase": false, "constructor": false, "invocations": ["isTraceEnabled", "trace", "getClient", "getSnapshotMetadata", "getFlowSnapshotClient", "getBucketId", "getFlowId", "getMessage"]}, "repository": {"repo_id": 181071001, "url": "https://github.com/hortonworks/efm", "language": "Java", "is_fork": false, "fork_count": 5, "stargazer_count": 7, "size": 2003, "license": "licensed"}}