{"test_class": {"identifier": "FastInfosetCompressorProcessorTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final String ACCEPT_VALUE_XML = \"application/xml\";", "modifier": "private static final", "type": "String", "declarator": "ACCEPT_VALUE_XML = \"application/xml\"", "var_name": "ACCEPT_VALUE_XML"}, {"original_string": "private static final String RESPONSE_BODY = \"RESPONSE_BODY\";", "modifier": "private static final", "type": "String", "declarator": "RESPONSE_BODY = \"RESPONSE_BODY\"", "var_name": "RESPONSE_BODY"}, {"original_string": "private static final String ACCEPT_HEADER_KEY = \"Accept\";", "modifier": "private static final", "type": "String", "declarator": "ACCEPT_HEADER_KEY = \"Accept\"", "var_name": "ACCEPT_HEADER_KEY"}, {"original_string": "private static final String ACCEPT_VALUE_FASTINFOSET = \"application/fastinfoset\";", "modifier": "private static final", "type": "String", "declarator": "ACCEPT_VALUE_FASTINFOSET = \"application/fastinfoset\"", "var_name": "ACCEPT_VALUE_FASTINFOSET"}, {"original_string": "@Mock\n    private FastInfosetCompressionService fastInfosetCompressor;", "modifier": "@Mock\n    private", "type": "FastInfosetCompressionService", "declarator": "fastInfosetCompressor", "var_name": "fastInfosetCompressor"}, {"original_string": "@Mock\n    private HttpServletRequest req;", "modifier": "@Mock\n    private", "type": "HttpServletRequest", "declarator": "req", "var_name": "req"}, {"original_string": "@Mock\n    private HttpServletResponse resp;", "modifier": "@Mock\n    private", "type": "HttpServletResponse", "declarator": "resp", "var_name": "resp"}, {"original_string": "@Mock\n    private ByteArrayOutputStream outputStream;", "modifier": "@Mock\n    private", "type": "ByteArrayOutputStream", "declarator": "outputStream", "var_name": "outputStream"}, {"original_string": "@InjectMocks\n    private FastInfosetCompressorProcessor underTest;", "modifier": "@InjectMocks\n    private", "type": "FastInfosetCompressorProcessor", "declarator": "underTest", "var_name": "underTest"}], "file": "wilma-application/modules/wilma-webapp/src/test/java/com/epam/wilma/webapp/stub/response/processor/fis/FastInfosetCompressorProcessorTest.java"}, "test_case": {"identifier": "testProcessShouldCompressResponseBodyAndSetContentTypeWhenContentTypeIsFastinfoset", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testProcessShouldCompressResponseBodyAndSetContentTypeWhenContentTypeIsFastinfoset() {\n        //GIVEN\n        given(resp.getContentType()).willReturn(ACCEPT_VALUE_FASTINFOSET);\n        given(req.getHeader(ACCEPT_HEADER_KEY)).willReturn(ACCEPT_VALUE_FASTINFOSET);\n        given(fastInfosetCompressor.compress(any(ByteArrayInputStream.class))).willReturn(outputStream);\n        given(outputStream.toByteArray()).willReturn(RESPONSE_BODY.getBytes());\n        //WHEN\n        byte[] actual = underTest.process(req, resp, RESPONSE_BODY.getBytes());\n        //THEN\n        verify(resp).setContentType(ACCEPT_VALUE_FASTINFOSET);\n        assertEquals(actual, RESPONSE_BODY.getBytes());\n    }", "signature": "void testProcessShouldCompressResponseBodyAndSetContentTypeWhenContentTypeIsFastinfoset()", "full_signature": "@Test public void testProcessShouldCompressResponseBodyAndSetContentTypeWhenContentTypeIsFastinfoset()", "class_method_signature": "FastInfosetCompressorProcessorTest.testProcessShouldCompressResponseBodyAndSetContentTypeWhenContentTypeIsFastinfoset()", "testcase": true, "constructor": false, "invocations": ["willReturn", "given", "getContentType", "willReturn", "given", "getHeader", "willReturn", "given", "compress", "any", "willReturn", "given", "toByteArray", "getBytes", "process", "getBytes", "setContentType", "verify", "assertEquals", "getBytes"]}, "focal_class": {"identifier": "FastInfosetCompressorProcessor", "superclass": "", "interfaces": "implements ResponseProcessor", "fields": [{"original_string": "private static final String FASTINFOSET = \"fastinfoset\";", "modifier": "private static final", "type": "String", "declarator": "FASTINFOSET = \"fastinfoset\"", "var_name": "FASTINFOSET"}, {"original_string": "private static final String XML = \"xml\";", "modifier": "private static final", "type": "String", "declarator": "XML = \"xml\"", "var_name": "XML"}, {"original_string": "private static final String ACCEPT_VALUE_FASTINFOSET = \"application/fastinfoset\";", "modifier": "private static final", "type": "String", "declarator": "ACCEPT_VALUE_FASTINFOSET = \"application/fastinfoset\"", "var_name": "ACCEPT_VALUE_FASTINFOSET"}, {"original_string": "private static final String ACCEPT_HEADER_KEY = \"Accept\";", "modifier": "private static final", "type": "String", "declarator": "ACCEPT_HEADER_KEY = \"Accept\"", "var_name": "ACCEPT_HEADER_KEY"}, {"original_string": "private static final String HEADER_KEY_SUPPRESS_ENCODING = \"Wilma-Suppress-Encoding\";", "modifier": "private static final", "type": "String", "declarator": "HEADER_KEY_SUPPRESS_ENCODING = \"Wilma-Suppress-Encoding\"", "var_name": "HEADER_KEY_SUPPRESS_ENCODING"}, {"original_string": "@Autowired\n    private FastInfosetCompressionService fastInfosetCompressor;", "modifier": "@Autowired\n    private", "type": "FastInfosetCompressionService", "declarator": "fastInfosetCompressor", "var_name": "fastInfosetCompressor"}], "methods": [{"identifier": "process", "parameters": "(final HttpServletRequest req, final HttpServletResponse resp, final byte[] responseBody)", "modifiers": "@Override public", "return": "byte[]", "signature": "byte[] process(final HttpServletRequest req, final HttpServletResponse resp, final byte[] responseBody)", "full_signature": "@Override public byte[] process(final HttpServletRequest req, final HttpServletResponse resp, final byte[] responseBody)", "class_method_signature": "FastInfosetCompressorProcessor.process(final HttpServletRequest req, final HttpServletResponse resp, final byte[] responseBody)", "testcase": false, "constructor": false}, {"identifier": "isFastInfoSetCompressionNeeded", "parameters": "(final HttpServletRequest req, final HttpServletResponse resp)", "modifiers": "private", "return": "boolean", "signature": "boolean isFastInfoSetCompressionNeeded(final HttpServletRequest req, final HttpServletResponse resp)", "full_signature": "private boolean isFastInfoSetCompressionNeeded(final HttpServletRequest req, final HttpServletResponse resp)", "class_method_signature": "FastInfosetCompressorProcessor.isFastInfoSetCompressionNeeded(final HttpServletRequest req, final HttpServletResponse resp)", "testcase": false, "constructor": false}, {"identifier": "compressResponseXmlToFastInfoset", "parameters": "(final InputStream inputStream)", "modifiers": "private", "return": "byte[]", "signature": "byte[] compressResponseXmlToFastInfoset(final InputStream inputStream)", "full_signature": "private byte[] compressResponseXmlToFastInfoset(final InputStream inputStream)", "class_method_signature": "FastInfosetCompressorProcessor.compressResponseXmlToFastInfoset(final InputStream inputStream)", "testcase": false, "constructor": false}], "file": "wilma-application/modules/wilma-webapp/src/main/java/com/epam/wilma/webapp/stub/response/processor/fis/FastInfosetCompressorProcessor.java"}, "focal_method": {"identifier": "process", "parameters": "(final HttpServletRequest req, final HttpServletResponse resp, final byte[] responseBody)", "modifiers": "@Override public", "return": "byte[]", "body": "@Override\n    public byte[] process(final HttpServletRequest req, final HttpServletResponse resp, final byte[] responseBody) {\n        ByteArrayInputStream inputStream = new ByteArrayInputStream(responseBody);\n        byte[] result = responseBody;\n        if (isFastInfoSetCompressionNeeded(req, resp)) {\n            resp.setContentType(ACCEPT_VALUE_FASTINFOSET);\n            result = compressResponseXmlToFastInfoset(inputStream);\n        }\n\n        return result;\n    }", "signature": "byte[] process(final HttpServletRequest req, final HttpServletResponse resp, final byte[] responseBody)", "full_signature": "@Override public byte[] process(final HttpServletRequest req, final HttpServletResponse resp, final byte[] responseBody)", "class_method_signature": "FastInfosetCompressorProcessor.process(final HttpServletRequest req, final HttpServletResponse resp, final byte[] responseBody)", "testcase": false, "constructor": false, "invocations": ["isFastInfoSetCompressionNeeded", "setContentType", "compressResponseXmlToFastInfoset"]}, "repository": {"repo_id": 29603649, "url": "https://github.com/epam/Wilma", "language": "Java", "is_fork": false, "fork_count": 8, "stargazer_count": 35, "size": 5732, "license": "licensed"}}