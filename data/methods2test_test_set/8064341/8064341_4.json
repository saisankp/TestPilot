{"test_class": {"identifier": "DelimitedStreamReaderTest", "superclass": "", "interfaces": "", "fields": [], "file": "hbc-core/src/test/java/com/twitter/hbc/common/DelimitedStreamReaderTest.java"}, "test_case": {"identifier": "testReadlineMultipleHugeBuffer", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n  public void testReadlineMultipleHugeBuffer() throws Exception {\n    String myMessage = \"{msg1}\\r\\n\";\n    String myMessage2 = \"{this is my message}\\r\\n\";\n    byte[] bytes = (myMessage + myMessage2).getBytes(Charsets.UTF_8);\n\n    InputStream stream = new ByteArrayInputStream(bytes);\n    DelimitedStreamReader r = new DelimitedStreamReader(stream, Charsets.UTF_8, myMessage.length() * 10 );\n\n    String msg1 = r.readLine();\n    String msg2 = r.readLine();\n\n    assertEquals(msg1, myMessage.trim());\n    assertEquals(msg2, myMessage2.trim());\n  }", "signature": "void testReadlineMultipleHugeBuffer()", "full_signature": "@Test public void testReadlineMultipleHugeBuffer()", "class_method_signature": "DelimitedStreamReaderTest.testReadlineMultipleHugeBuffer()", "testcase": true, "constructor": false, "invocations": ["getBytes", "length", "readLine", "readLine", "assertEquals", "trim", "assertEquals", "trim"]}, "focal_class": {"identifier": "DelimitedStreamReader", "superclass": "", "interfaces": "", "fields": [{"original_string": "private final InputStream inputStream;", "modifier": "private final", "type": "InputStream", "declarator": "inputStream", "var_name": "inputStream"}, {"original_string": "private final byte[] buffer;", "modifier": "private final", "type": "byte[]", "declarator": "buffer", "var_name": "buffer"}, {"original_string": "private byte[] strBuffer;", "modifier": "private", "type": "byte[]", "declarator": "strBuffer", "var_name": "strBuffer"}, {"original_string": "private int strBufferIndex;", "modifier": "private", "type": "int", "declarator": "strBufferIndex", "var_name": "strBufferIndex"}, {"original_string": "private final Charset charset;", "modifier": "private final", "type": "Charset", "declarator": "charset", "var_name": "charset"}, {"original_string": "private int offset;", "modifier": "private", "type": "int", "declarator": "offset", "var_name": "offset"}, {"original_string": "private int end;", "modifier": "private", "type": "int", "declarator": "end", "var_name": "end"}, {"original_string": "private static final int DEFAULT_READ_COUNT = 64;", "modifier": "private static final", "type": "int", "declarator": "DEFAULT_READ_COUNT = 64", "var_name": "DEFAULT_READ_COUNT"}, {"original_string": "private static final int MAX_ALLOWABLE_BUFFER_SIZE = 500000;", "modifier": "private static final", "type": "int", "declarator": "MAX_ALLOWABLE_BUFFER_SIZE = 500000", "var_name": "MAX_ALLOWABLE_BUFFER_SIZE"}, {"original_string": "private static final byte CR = 13;", "modifier": "private static final", "type": "byte", "declarator": "CR = 13", "var_name": "CR"}, {"original_string": "private static final byte LF = 10;", "modifier": "private static final", "type": "byte", "declarator": "LF = 10", "var_name": "LF"}], "methods": [{"identifier": "DelimitedStreamReader", "parameters": "(InputStream stream, Charset charset, int bufferSize)", "modifiers": "public", "return": "", "signature": " DelimitedStreamReader(InputStream stream, Charset charset, int bufferSize)", "full_signature": "public  DelimitedStreamReader(InputStream stream, Charset charset, int bufferSize)", "class_method_signature": "DelimitedStreamReader.DelimitedStreamReader(InputStream stream, Charset charset, int bufferSize)", "testcase": false, "constructor": true}, {"identifier": "readLine", "parameters": "()", "modifiers": "public", "return": "String", "signature": "String readLine()", "full_signature": "public String readLine()", "class_method_signature": "DelimitedStreamReader.readLine()", "testcase": false, "constructor": false}, {"identifier": "readLine", "parameters": "(boolean trim)", "modifiers": "private", "return": "String", "signature": "String readLine(boolean trim)", "full_signature": "private String readLine(boolean trim)", "class_method_signature": "DelimitedStreamReader.readLine(boolean trim)", "testcase": false, "constructor": false}, {"identifier": "copyToStrBuffer", "parameters": "(byte[] buffer, int offset, int length)", "modifiers": "private", "return": "void", "signature": "void copyToStrBuffer(byte[] buffer, int offset, int length)", "full_signature": "private void copyToStrBuffer(byte[] buffer, int offset, int length)", "class_method_signature": "DelimitedStreamReader.copyToStrBuffer(byte[] buffer, int offset, int length)", "testcase": false, "constructor": false}, {"identifier": "expandStrBuffer", "parameters": "(int minLength)", "modifiers": "private", "return": "void", "signature": "void expandStrBuffer(int minLength)", "full_signature": "private void expandStrBuffer(int minLength)", "class_method_signature": "DelimitedStreamReader.expandStrBuffer(int minLength)", "testcase": false, "constructor": false}, {"identifier": "read", "parameters": "(int numBytes)", "modifiers": "public", "return": "String", "signature": "String read(int numBytes)", "full_signature": "public String read(int numBytes)", "class_method_signature": "DelimitedStreamReader.read(int numBytes)", "testcase": false, "constructor": false}, {"identifier": "readAmountToStrBuffer", "parameters": "(int length)", "modifiers": "private", "return": "void", "signature": "void readAmountToStrBuffer(int length)", "full_signature": "private void readAmountToStrBuffer(int length)", "class_method_signature": "DelimitedStreamReader.readAmountToStrBuffer(int length)", "testcase": false, "constructor": false}, {"identifier": "readStreamToStrBuffer", "parameters": "(int length)", "modifiers": "private", "return": "int", "signature": "int readStreamToStrBuffer(int length)", "full_signature": "private int readStreamToStrBuffer(int length)", "class_method_signature": "DelimitedStreamReader.readStreamToStrBuffer(int length)", "testcase": false, "constructor": false}, {"identifier": "isReadBufferEmpty", "parameters": "()", "modifiers": "private", "return": "boolean", "signature": "boolean isReadBufferEmpty()", "full_signature": "private boolean isReadBufferEmpty()", "class_method_signature": "DelimitedStreamReader.isReadBufferEmpty()", "testcase": false, "constructor": false}], "file": "hbc-core/src/main/java/com/twitter/hbc/common/DelimitedStreamReader.java"}, "focal_method": {"identifier": "readLine", "parameters": "()", "modifiers": "public", "return": "String", "body": "public String readLine() throws IOException {\n    return readLine(true);\n  }", "signature": "String readLine()", "full_signature": "public String readLine()", "class_method_signature": "DelimitedStreamReader.readLine()", "testcase": false, "constructor": false, "invocations": ["readLine"]}, "repository": {"repo_id": 8064341, "url": "https://github.com/twitter/hbc", "language": "Java", "is_fork": false, "fork_count": 338, "stargazer_count": 868, "size": 352, "license": "licensed"}}