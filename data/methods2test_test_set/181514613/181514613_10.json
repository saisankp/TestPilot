{"test_class": {"identifier": "ServerWrapperTest", "superclass": "", "interfaces": "", "fields": [], "file": "frontend/app/src/test/java/com/eddex/jackle/jumpcutter/internet/ServerWrapperTest.java"}, "test_case": {"identifier": "downloadVideo_DownloadSuccessful_ReturnsTrue", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void downloadVideo_DownloadSuccessful_ReturnsTrue() {\n\n        final String DownloadId = \"download_id\";\n\n        MockInterceptor okHttpMockInterceptor = new MockInterceptor();\n        okHttpMockInterceptor.addRule()\n                .get()\n                .urlStarts(\"https://jumpcutter.letum.ch/download?download_id=\" + DownloadId)\n                .respond(\"I am video\");\n        OkHttpClient okHttpClient = new OkHttpClient.Builder()\n                .addInterceptor(okHttpMockInterceptor)\n                .build();\n\n        FileSystemWrapper fileSystemWrapperMock = Mockito.mock(FileSystemWrapper.class);\n\n        ServerWrapper server = new ServerWrapper(okHttpClient, fileSystemWrapperMock);\n        Boolean response = server.downloadVideo(DownloadId);\n\n        Assert.assertEquals(true, response);\n    }", "signature": "void downloadVideo_DownloadSuccessful_ReturnsTrue()", "full_signature": "@Test public void downloadVideo_DownloadSuccessful_ReturnsTrue()", "class_method_signature": "ServerWrapperTest.downloadVideo_DownloadSuccessful_ReturnsTrue()", "testcase": true, "constructor": false, "invocations": ["respond", "urlStarts", "get", "addRule", "build", "addInterceptor", "mock", "downloadVideo", "assertEquals"]}, "focal_class": {"identifier": "ServerWrapper", "superclass": "", "interfaces": "", "fields": [{"original_string": "public boolean HasError = false;", "modifier": "public", "type": "boolean", "declarator": "HasError = false", "var_name": "HasError"}, {"original_string": "private final OkHttpClient okHttpClient;", "modifier": "private final", "type": "OkHttpClient", "declarator": "okHttpClient", "var_name": "okHttpClient"}, {"original_string": "private final FileSystemWrapper filesystemWrapper;", "modifier": "private final", "type": "FileSystemWrapper", "declarator": "filesystemWrapper", "var_name": "filesystemWrapper"}, {"original_string": "private final String Scheme = \"https\";", "modifier": "private final", "type": "String", "declarator": "Scheme = \"https\"", "var_name": "Scheme"}, {"original_string": "private final String Host = \"jumpcutter.letum.ch\";", "modifier": "private final", "type": "String", "declarator": "Host = \"jumpcutter.letum.ch\"", "var_name": "Host"}], "methods": [{"identifier": "ServerWrapper", "parameters": "(OkHttpClient okHttpClient, FileSystemWrapper filesystemWrapper)", "modifiers": "@Inject public", "return": "", "signature": " ServerWrapper(OkHttpClient okHttpClient, FileSystemWrapper filesystemWrapper)", "full_signature": "@Inject public  ServerWrapper(OkHttpClient okHttpClient, FileSystemWrapper filesystemWrapper)", "class_method_signature": "ServerWrapper.ServerWrapper(OkHttpClient okHttpClient, FileSystemWrapper filesystemWrapper)", "testcase": false, "constructor": true}, {"identifier": "ping", "parameters": "()", "modifiers": "public", "return": "Boolean", "signature": "Boolean ping()", "full_signature": "public Boolean ping()", "class_method_signature": "ServerWrapper.ping()", "testcase": false, "constructor": false}, {"identifier": "uploadVideo", "parameters": "(File video)", "modifiers": "public", "return": "String", "signature": "String uploadVideo(File video)", "full_signature": "public String uploadVideo(File video)", "class_method_signature": "ServerWrapper.uploadVideo(File video)", "testcase": false, "constructor": false}, {"identifier": "downloadYouTubeVideo", "parameters": "(String youtubeUrl)", "modifiers": "public", "return": "String", "signature": "String downloadYouTubeVideo(String youtubeUrl)", "full_signature": "public String downloadYouTubeVideo(String youtubeUrl)", "class_method_signature": "ServerWrapper.downloadYouTubeVideo(String youtubeUrl)", "testcase": false, "constructor": false}, {"identifier": "processVideo", "parameters": "(String videoId, SettingsProvider settingsProvider)", "modifiers": "public", "return": "String", "signature": "String processVideo(String videoId, SettingsProvider settingsProvider)", "full_signature": "public String processVideo(String videoId, SettingsProvider settingsProvider)", "class_method_signature": "ServerWrapper.processVideo(String videoId, SettingsProvider settingsProvider)", "testcase": false, "constructor": false}, {"identifier": "downloadVideo", "parameters": "(String downloadId)", "modifiers": "public", "return": "boolean", "signature": "boolean downloadVideo(String downloadId)", "full_signature": "public boolean downloadVideo(String downloadId)", "class_method_signature": "ServerWrapper.downloadVideo(String downloadId)", "testcase": false, "constructor": false}, {"identifier": "getStringResponseFromServer", "parameters": "(Request request)", "modifiers": "private", "return": "String", "signature": "String getStringResponseFromServer(Request request)", "full_signature": "private String getStringResponseFromServer(Request request)", "class_method_signature": "ServerWrapper.getStringResponseFromServer(Request request)", "testcase": false, "constructor": false}], "file": "frontend/app/src/main/java/com/eddex/jackle/jumpcutter/internet/ServerWrapper.java"}, "focal_method": {"identifier": "downloadVideo", "parameters": "(String downloadId)", "modifiers": "public", "return": "boolean", "body": "public boolean downloadVideo(String downloadId) {\n\n        boolean successful = true;\n\n        HttpUrl url = new HttpUrl.Builder()\n                .scheme(this.Scheme)\n                .host(this.Host)\n                //.port(this.Port)\n                .addPathSegment(\"download\")\n                .addQueryParameter(\"download_id\", downloadId)\n                .build();\n\n        Request request = new Request.Builder()\n                .url(url)\n                .get()\n                .build();\n\n        try {\n            // get video\n            Response response = this.okHttpClient.newCall(request).execute();\n            byte[] video = response.body().bytes();\n            this.filesystemWrapper.saveDownloadedVideo(video);\n\n        } catch (IOException e) {\n            e.printStackTrace();\n            successful = false;\n        }\n        catch (IllegalStateException e) {\n            e.printStackTrace();\n            successful = false;\n        }\n        return successful;\n    }", "signature": "boolean downloadVideo(String downloadId)", "full_signature": "public boolean downloadVideo(String downloadId)", "class_method_signature": "ServerWrapper.downloadVideo(String downloadId)", "testcase": false, "constructor": false, "invocations": ["build", "addQueryParameter", "addPathSegment", "host", "scheme", "build", "get", "url", "execute", "newCall", "bytes", "body", "saveDownloadedVideo", "printStackTrace", "printStackTrace"]}, "repository": {"repo_id": 181514613, "url": "https://github.com/eddex/jumpcutter-android", "language": "Java", "is_fork": false, "fork_count": 2, "stargazer_count": 5, "size": 994, "license": "licensed"}}