{"test_class": {"identifier": "StubConfigurationTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final String HOST = \"host\";", "modifier": "private static final", "type": "String", "declarator": "HOST = \"host\"", "var_name": "HOST"}, {"original_string": "private static final Integer PORT = 1;", "modifier": "private static final", "type": "Integer", "declarator": "PORT = 1", "var_name": "PORT"}, {"original_string": "private static final String STUB_STATUS_URL = \"http://host:1/config/public/stubdescriptor\";", "modifier": "private static final", "type": "String", "declarator": "STUB_STATUS_URL = \"http://host:1/config/public/stubdescriptor\"", "var_name": "STUB_STATUS_URL"}, {"original_string": "private static final String DROP_STUB_URL1 = \"http://host:1/config/admin/stub/drop?groupname=testGroup1\";", "modifier": "private static final", "type": "String", "declarator": "DROP_STUB_URL1 = \"http://host:1/config/admin/stub/drop?groupname=testGroup1\"", "var_name": "DROP_STUB_URL1"}, {"original_string": "private static final String DROP_STUB_URL2 = \"http://host:1/config/admin/stub/drop?groupname=testGroup2\";", "modifier": "private static final", "type": "String", "declarator": "DROP_STUB_URL2 = \"http://host:1/config/admin/stub/drop?groupname=testGroup2\"", "var_name": "DROP_STUB_URL2"}, {"original_string": "private static final String SAVE_STUB_URL = \"http://host:1/config/admin/stub/save\";", "modifier": "private static final", "type": "String", "declarator": "SAVE_STUB_URL = \"http://host:1/config/admin/stub/save\"", "var_name": "SAVE_STUB_URL"}, {"original_string": "private static final String GROUP_NAME = \"testGroup1\";", "modifier": "private static final", "type": "String", "declarator": "GROUP_NAME = \"testGroup1\"", "var_name": "GROUP_NAME"}, {"original_string": "private static final String JSON_STRING = \"{\\\"JSON\\\": \\\"string\\\"}\";", "modifier": "private static final", "type": "String", "declarator": "JSON_STRING = \"{\\\"JSON\\\": \\\"string\\\"}\"", "var_name": "JSON_STRING"}, {"original_string": "private static final JSONObject EMPTY_JSON_OBJECT = new JSONObject();", "modifier": "private static final", "type": "JSONObject", "declarator": "EMPTY_JSON_OBJECT = new JSONObject()", "var_name": "EMPTY_JSON_OBJECT"}, {"original_string": "@Mock\n    private WilmaHttpClient client;", "modifier": "@Mock\n    private", "type": "WilmaHttpClient", "declarator": "client", "var_name": "client"}, {"original_string": "private StubConfiguration stubConfiguration;", "modifier": "private", "type": "StubConfiguration", "declarator": "stubConfiguration", "var_name": "stubConfiguration"}], "file": "wilma-service-api/src/test/java/com/epam/wilma/service/configuration/StubConfigurationTest.java"}, "test_case": {"identifier": "shouldReturnTrueForDropAllStubConfigIfTheGivenJSONIsCorrect", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void shouldReturnTrueForDropAllStubConfigIfTheGivenJSONIsCorrect() {\n        when(client.sendGetterRequest(STUB_STATUS_URL)).thenReturn(Optional.<String>of(validNotEmptyJson()));\n        when(client.sendSetterRequest(DROP_STUB_URL1)).thenReturn(true);\n        when(client.sendSetterRequest(DROP_STUB_URL2)).thenReturn(true);\n\n        ArgumentCaptor<String> url = ArgumentCaptor.forClass(String.class);\n\n        boolean result = stubConfiguration.dropAllStubConfig();\n\n        assertTrue(result);\n        verify(client, times(2)).sendSetterRequest(url.capture());\n        assertEquals(url.getAllValues().get(0), DROP_STUB_URL1);\n        assertEquals(url.getAllValues().get(1), DROP_STUB_URL2);\n    }", "signature": "void shouldReturnTrueForDropAllStubConfigIfTheGivenJSONIsCorrect()", "full_signature": "@Test public void shouldReturnTrueForDropAllStubConfigIfTheGivenJSONIsCorrect()", "class_method_signature": "StubConfigurationTest.shouldReturnTrueForDropAllStubConfigIfTheGivenJSONIsCorrect()", "testcase": true, "constructor": false, "invocations": ["thenReturn", "when", "sendGetterRequest", "of", "validNotEmptyJson", "thenReturn", "when", "sendSetterRequest", "thenReturn", "when", "sendSetterRequest", "forClass", "dropAllStubConfig", "assertTrue", "sendSetterRequest", "verify", "times", "capture", "assertEquals", "get", "getAllValues", "assertEquals", "get", "getAllValues"]}, "focal_class": {"identifier": "StubConfiguration", "superclass": "extends AbstractConfiguration", "interfaces": "", "fields": [{"original_string": "private static final Logger LOG = LoggerFactory.getLogger(StubConfiguration.class);", "modifier": "private static final", "type": "Logger", "declarator": "LOG = LoggerFactory.getLogger(StubConfiguration.class)", "var_name": "LOG"}, {"original_string": "private static final String STATUS_GETTER_URL_POSTFIX = \"config/public/stubdescriptor\";", "modifier": "private static final", "type": "String", "declarator": "STATUS_GETTER_URL_POSTFIX = \"config/public/stubdescriptor\"", "var_name": "STATUS_GETTER_URL_POSTFIX"}, {"original_string": "private static final String STUB_CONFIG_STATUS_CHANGE_SETTER_URL_POSTFIX = \"config/admin/stub/changestatus\";", "modifier": "private static final", "type": "String", "declarator": "STUB_CONFIG_STATUS_CHANGE_SETTER_URL_POSTFIX = \"config/admin/stub/changestatus\"", "var_name": "STUB_CONFIG_STATUS_CHANGE_SETTER_URL_POSTFIX"}, {"original_string": "private static final String STUB_CONFIG_ORDER_CHANGE_SETTER_URL_POSTFIX = \"config/admin/stub/changeorder\";", "modifier": "private static final", "type": "String", "declarator": "STUB_CONFIG_ORDER_CHANGE_SETTER_URL_POSTFIX = \"config/admin/stub/changeorder\"", "var_name": "STUB_CONFIG_ORDER_CHANGE_SETTER_URL_POSTFIX"}, {"original_string": "private static final String DROP_STUB_CONFIG_URL_POSTFIX = \"config/admin/stub/drop\";", "modifier": "private static final", "type": "String", "declarator": "DROP_STUB_CONFIG_URL_POSTFIX = \"config/admin/stub/drop\"", "var_name": "DROP_STUB_CONFIG_URL_POSTFIX"}, {"original_string": "private static final String SAVE_STUB_CONFIG_URL_POSTFIX = \"config/admin/stub/save\";", "modifier": "private static final", "type": "String", "declarator": "SAVE_STUB_CONFIG_URL_POSTFIX = \"config/admin/stub/save\"", "var_name": "SAVE_STUB_CONFIG_URL_POSTFIX"}, {"original_string": "private static final String GROUP_NAME = \"groupname\";", "modifier": "private static final", "type": "String", "declarator": "GROUP_NAME = \"groupname\"", "var_name": "GROUP_NAME"}, {"original_string": "private static final String DIRECTION = \"direction\";", "modifier": "private static final", "type": "String", "declarator": "DIRECTION = \"direction\"", "var_name": "DIRECTION"}, {"original_string": "private static final String NEXT_STATUS = \"nextstatus\";", "modifier": "private static final", "type": "String", "declarator": "NEXT_STATUS = \"nextstatus\"", "var_name": "NEXT_STATUS"}], "methods": [{"identifier": "StubConfiguration", "parameters": "(WilmaServiceConfig config)", "modifiers": "public", "return": "", "signature": " StubConfiguration(WilmaServiceConfig config)", "full_signature": "public  StubConfiguration(WilmaServiceConfig config)", "class_method_signature": "StubConfiguration.StubConfiguration(WilmaServiceConfig config)", "testcase": false, "constructor": true}, {"identifier": "StubConfiguration", "parameters": "(WilmaServiceConfig config, WilmaHttpClient client)", "modifiers": "public", "return": "", "signature": " StubConfiguration(WilmaServiceConfig config, WilmaHttpClient client)", "full_signature": "public  StubConfiguration(WilmaServiceConfig config, WilmaHttpClient client)", "class_method_signature": "StubConfiguration.StubConfiguration(WilmaServiceConfig config, WilmaHttpClient client)", "testcase": false, "constructor": true}, {"identifier": "getStubConfigInformation", "parameters": "()", "modifiers": "public", "return": "JSONObject", "signature": "JSONObject getStubConfigInformation()", "full_signature": "public JSONObject getStubConfigInformation()", "class_method_signature": "StubConfiguration.getStubConfigInformation()", "testcase": false, "constructor": false}, {"identifier": "setStubConfigStatus", "parameters": "(String groupName, StubConfigStatus status)", "modifiers": "public", "return": "boolean", "signature": "boolean setStubConfigStatus(String groupName, StubConfigStatus status)", "full_signature": "public boolean setStubConfigStatus(String groupName, StubConfigStatus status)", "class_method_signature": "StubConfiguration.setStubConfigStatus(String groupName, StubConfigStatus status)", "testcase": false, "constructor": false}, {"identifier": "setStubConfigOrder", "parameters": "(String groupName, StubConfigOrder order)", "modifiers": "public", "return": "boolean", "signature": "boolean setStubConfigOrder(String groupName, StubConfigOrder order)", "full_signature": "public boolean setStubConfigOrder(String groupName, StubConfigOrder order)", "class_method_signature": "StubConfiguration.setStubConfigOrder(String groupName, StubConfigOrder order)", "testcase": false, "constructor": false}, {"identifier": "dropStubConfig", "parameters": "(String groupName)", "modifiers": "public", "return": "boolean", "signature": "boolean dropStubConfig(String groupName)", "full_signature": "public boolean dropStubConfig(String groupName)", "class_method_signature": "StubConfiguration.dropStubConfig(String groupName)", "testcase": false, "constructor": false}, {"identifier": "dropAllStubConfig", "parameters": "()", "modifiers": "public", "return": "boolean", "signature": "boolean dropAllStubConfig()", "full_signature": "public boolean dropAllStubConfig()", "class_method_signature": "StubConfiguration.dropAllStubConfig()", "testcase": false, "constructor": false}, {"identifier": "persistActualStubConfig", "parameters": "()", "modifiers": "public", "return": "boolean", "signature": "boolean persistActualStubConfig()", "full_signature": "public boolean persistActualStubConfig()", "class_method_signature": "StubConfiguration.persistActualStubConfig()", "testcase": false, "constructor": false}], "file": "wilma-service-api/src/main/java/com/epam/wilma/service/configuration/StubConfiguration.java"}, "focal_method": {"identifier": "dropAllStubConfig", "parameters": "()", "modifiers": "public", "return": "boolean", "body": "public boolean dropAllStubConfig() {\n        LOG.debug(\"Call drop all stub configuration.\");\n        boolean droppedAllStubConfig = true;\n\n        JSONObject stubConfig = getStubConfigInformation();\n        if ((stubConfig != null) && (stubConfig.length() > 0)) {\n            try {\n                LOG.debug(\"Gets stub configs array from all stub configuration JSON.\");\n                JSONArray configs = stubConfig.getJSONArray(\"configs\");\n                for (int i = 0; i < configs.length(); i++) {\n                    LOG.debug(\"Get the stub group name.\");\n                    String groupName = configs.getJSONObject(i).getString(\"groupname\");\n\n                    droppedAllStubConfig &= dropStubConfig(groupName);\n                    LOG.info(\"Dropped stub configuration: {}\", groupName);\n                }\n            } catch (JSONException e) {\n                LOG.error(\"Error occurred while dropping sub configuration. \", e);\n                droppedAllStubConfig = false;\n            }\n        } else {\n            droppedAllStubConfig = false;\n        }\n\n        return droppedAllStubConfig;\n    }", "signature": "boolean dropAllStubConfig()", "full_signature": "public boolean dropAllStubConfig()", "class_method_signature": "StubConfiguration.dropAllStubConfig()", "testcase": false, "constructor": false, "invocations": ["debug", "getStubConfigInformation", "length", "debug", "getJSONArray", "length", "debug", "getString", "getJSONObject", "dropStubConfig", "info", "error"]}, "repository": {"repo_id": 29603649, "url": "https://github.com/epam/Wilma", "language": "Java", "is_fork": false, "fork_count": 8, "stargazer_count": 35, "size": 5732, "license": "licensed"}}