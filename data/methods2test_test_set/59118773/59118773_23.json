{"test_class": {"identifier": "ExcelFieldImportServiceTest", "superclass": "", "interfaces": "", "fields": [], "file": "persistence/src/test/java/org/devgateway/toolkit/persistence/excel/ExcelFieldImportServiceTest.java"}, "test_case": {"identifier": "getFieldType", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void getFieldType() throws Exception {\n        final ClassFields classFields = new ClassFieldsDefault(TestClass.class);\n        final Iterator<Field> fields = classFields.getFields();\n\n        final Field firstField = fields.next();      // get first element\n        Assert.assertEquals(\"Check basic field type\", FieldTypeImport.basic, ExcelFieldImportService.getFieldType(firstField));\n\n        final Field thirdField = fields.next();      // get second element\n        Assert.assertEquals(\"Check basic field type for Object\", FieldTypeImport.object, ExcelFieldImportService.getFieldType(thirdField));\n\n        final Field fourthField = fields.next();      // get third element\n        Assert.assertEquals(\"Check importByProp field type Object\", FieldTypeImport.objectImportByProp, ExcelFieldImportService.getFieldType(fourthField));\n    }", "signature": "void getFieldType()", "full_signature": "@Test public void getFieldType()", "class_method_signature": "ExcelFieldImportServiceTest.getFieldType()", "testcase": true, "constructor": false, "invocations": ["getFields", "next", "assertEquals", "getFieldType", "next", "assertEquals", "getFieldType", "next", "assertEquals", "getFieldType"]}, "focal_class": {"identifier": "ExcelFieldImportService", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final Logger logger = LoggerFactory.getLogger(ExcelFieldImportService.class);", "modifier": "private static final", "type": "Logger", "declarator": "logger = LoggerFactory.getLogger(ExcelFieldImportService.class)", "var_name": "logger"}, {"original_string": "private static Map<Field, FieldTypeImport> fieldsTypeCache;", "modifier": "private static", "type": "Map<Field, FieldTypeImport>", "declarator": "fieldsTypeCache", "var_name": "fieldsTypeCache"}, {"original_string": "private static Map<Class, List<Field>> fieldsCache;", "modifier": "private static", "type": "Map<Class, List<Field>>", "declarator": "fieldsCache", "var_name": "fieldsCache"}, {"original_string": "private static Map<String, BaseJpaRepository> repositoryCache;", "modifier": "private static", "type": "Map<String, BaseJpaRepository>", "declarator": "repositoryCache", "var_name": "repositoryCache"}, {"original_string": "private static Map<String, Object> repositoryValuesCache;", "modifier": "private static", "type": "Map<String, Object>", "declarator": "repositoryValuesCache", "var_name": "repositoryValuesCache"}, {"original_string": "private static Map<String, Method> repositoryMethodsCache;", "modifier": "private static", "type": "Map<String, Method>", "declarator": "repositoryMethodsCache", "var_name": "repositoryMethodsCache"}], "methods": [{"identifier": "ExcelFieldImportService", "parameters": "()", "modifiers": "private", "return": "", "signature": " ExcelFieldImportService()", "full_signature": "private  ExcelFieldImportService()", "class_method_signature": "ExcelFieldImportService.ExcelFieldImportService()", "testcase": false, "constructor": true}, {"identifier": "getFieldType", "parameters": "(final Field field)", "modifiers": "public static", "return": "FieldTypeImport", "signature": "FieldTypeImport getFieldType(final Field field)", "full_signature": "public static FieldTypeImport getFieldType(final Field field)", "class_method_signature": "ExcelFieldImportService.getFieldType(final Field field)", "testcase": false, "constructor": false}, {"identifier": "getFields", "parameters": "(final Class clazz)", "modifiers": "public static", "return": "Iterator<Field>", "signature": "Iterator<Field> getFields(final Class clazz)", "full_signature": "public static Iterator<Field> getFields(final Class clazz)", "class_method_signature": "ExcelFieldImportService.getFields(final Class clazz)", "testcase": false, "constructor": false}, {"identifier": "getFieldProp", "parameters": "(final Field field)", "modifiers": "public static", "return": "String", "signature": "String getFieldProp(final Field field)", "full_signature": "public static String getFieldProp(final Field field)", "class_method_signature": "ExcelFieldImportService.getFieldProp(final Field field)", "testcase": false, "constructor": false}, {"identifier": "getFieldBean", "parameters": "(final Field field)", "modifiers": "public static", "return": "Class", "signature": "Class getFieldBean(final Field field)", "full_signature": "public static Class getFieldBean(final Field field)", "class_method_signature": "ExcelFieldImportService.getFieldBean(final Field field)", "testcase": false, "constructor": false}, {"identifier": "getFieldClazz", "parameters": "(final Field field)", "modifiers": "public static", "return": "Class[]", "signature": "Class[] getFieldClazz(final Field field)", "full_signature": "public static Class[] getFieldClazz(final Field field)", "class_method_signature": "ExcelFieldImportService.getFieldClazz(final Field field)", "testcase": false, "constructor": false}, {"identifier": "getObjectFromRepository", "parameters": "(final ApplicationContext applicationContext, final Field parentField,\n                                                 final Field field, final Object cellValue, final ImportBean importBean)", "modifiers": "public static", "return": "Object", "signature": "Object getObjectFromRepository(final ApplicationContext applicationContext, final Field parentField,\n                                                 final Field field, final Object cellValue, final ImportBean importBean)", "full_signature": "public static Object getObjectFromRepository(final ApplicationContext applicationContext, final Field parentField,\n                                                 final Field field, final Object cellValue, final ImportBean importBean)", "class_method_signature": "ExcelFieldImportService.getObjectFromRepository(final ApplicationContext applicationContext, final Field parentField,\n                                                 final Field field, final Object cellValue, final ImportBean importBean)", "testcase": false, "constructor": false}, {"identifier": "findMethod", "parameters": "(final Class<? extends BaseJpaRepository> clazzRepository,\n                                     final String prop, final Class methodParamClass)", "modifiers": "private static", "return": "Method", "signature": "Method findMethod(final Class<? extends BaseJpaRepository> clazzRepository,\n                                     final String prop, final Class methodParamClass)", "full_signature": "private static Method findMethod(final Class<? extends BaseJpaRepository> clazzRepository,\n                                     final String prop, final Class methodParamClass)", "class_method_signature": "ExcelFieldImportService.findMethod(final Class<? extends BaseJpaRepository> clazzRepository,\n                                     final String prop, final Class methodParamClass)", "testcase": false, "constructor": false}], "file": "persistence/src/main/java/org/devgateway/toolkit/persistence/excel/ExcelFieldImportService.java"}, "focal_method": {"identifier": "getFieldType", "parameters": "(final Field field)", "modifiers": "public static", "return": "FieldTypeImport", "body": "public static FieldTypeImport getFieldType(final Field field) {\n        FieldTypeImport fieldType;\n\n        if (fieldsTypeCache.get(field) != null) {\n            fieldType = fieldsTypeCache.get(field);\n        } else {\n            fieldType = FieldTypeImport.basic;        // default field type\n            final Class fieldClass = ExcelFieldService.getFieldClass(field);\n\n            // first we check if we have a basic type\n            if (FieldType.BASICTYPES.contains(fieldClass) || fieldClass.isEnum()) {\n                fieldType = FieldTypeImport.basic;\n            } else {\n                final ExcelImport excelImport = field.getAnnotation(ExcelImport.class);\n                if (excelImport != null) {\n                    fieldType = FieldTypeImport.object;\n\n                    // check if we need to read and import the object from the database.\n                    if (!excelImport.importByProp().isEmpty()) {\n                        fieldType = FieldTypeImport.objectImportByProp;\n                    }\n                }\n            }\n\n            fieldsTypeCache.put(field, fieldType);\n        }\n\n        return fieldType;\n    }", "signature": "FieldTypeImport getFieldType(final Field field)", "full_signature": "public static FieldTypeImport getFieldType(final Field field)", "class_method_signature": "ExcelFieldImportService.getFieldType(final Field field)", "testcase": false, "constructor": false, "invocations": ["get", "get", "getFieldClass", "contains", "isEnum", "getAnnotation", "isEmpty", "importByProp", "put"]}, "repository": {"repo_id": 59118773, "url": "https://github.com/devgateway/oc-explorer", "language": "Java", "is_fork": false, "fork_count": 2, "stargazer_count": 5, "size": 9004, "license": "licensed"}}