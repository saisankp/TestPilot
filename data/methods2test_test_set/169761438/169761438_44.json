{"test_class": {"identifier": "DemandResponseControllerTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final Float INTERVAL_VALUE = 1.0F;", "modifier": "private static final", "type": "Float", "declarator": "INTERVAL_VALUE = 1.0F", "var_name": "INTERVAL_VALUE"}, {"original_string": "private static final Integer INTERVAL_DURATION = 1000;", "modifier": "private static final", "type": "Integer", "declarator": "INTERVAL_DURATION = 1000", "var_name": "INTERVAL_DURATION"}, {"original_string": "private static final String APPLICATION_JSON_HEADER_VALUE = \"application/json\";", "modifier": "private static final", "type": "String", "declarator": "APPLICATION_JSON_HEADER_VALUE = \"application/json\"", "var_name": "APPLICATION_JSON_HEADER_VALUE"}, {"original_string": "private static final String CONTENT_TYPE_HEADER_NAME = \"Content-Type\";", "modifier": "private static final", "type": "String", "declarator": "CONTENT_TYPE_HEADER_NAME = \"Content-Type\"", "var_name": "CONTENT_TYPE_HEADER_NAME"}, {"original_string": "private static final String DEMAND_RESPONSE_EVENT_URL = \"/DemandResponseEvent/\";", "modifier": "private static final", "type": "String", "declarator": "DEMAND_RESPONSE_EVENT_URL = \"/DemandResponseEvent/\"", "var_name": "DEMAND_RESPONSE_EVENT_URL"}, {"original_string": "private static final String DURATION = \"PT5S\";", "modifier": "private static final", "type": "String", "declarator": "DURATION = \"PT5S\"", "var_name": "DURATION"}, {"original_string": "private static final String NOTIFICATION_DURATION = \"P1D\";", "modifier": "private static final", "type": "String", "declarator": "NOTIFICATION_DURATION = \"P1D\"", "var_name": "NOTIFICATION_DURATION"}, {"original_string": "private static final String TOLERANCE_DURATION = \"PT5M\";", "modifier": "private static final", "type": "String", "declarator": "TOLERANCE_DURATION = \"PT5M\"", "var_name": "TOLERANCE_DURATION"}, {"original_string": "private static final Long MODIFICATION = -1L;", "modifier": "private static final", "type": "Long", "declarator": "MODIFICATION = -1L", "var_name": "MODIFICATION"}, {"original_string": "private static final Long START = 10L;", "modifier": "private static final", "type": "Long", "declarator": "START = 10L", "var_name": "START"}, {"original_string": "private static final String VEN1 = \"ven1\";", "modifier": "private static final", "type": "String", "declarator": "VEN1 = \"ven1\"", "var_name": "VEN1"}, {"original_string": "private static final String VEN2 = \"ven2\";", "modifier": "private static final", "type": "String", "declarator": "VEN2 = \"ven2\"", "var_name": "VEN2"}, {"original_string": "private static final String GROUP1 = \"group1\";", "modifier": "private static final", "type": "String", "declarator": "GROUP1 = \"group1\"", "var_name": "GROUP1"}, {"original_string": "private static final String UNKNOWN_MARKETCONTEXT_NAME = \"mouaiccool\";", "modifier": "private static final", "type": "String", "declarator": "UNKNOWN_MARKETCONTEXT_NAME = \"mouaiccool\"", "var_name": "UNKNOWN_MARKETCONTEXT_NAME"}, {"original_string": "private static final String MARKETCONTEXT_NAME = \"http://oadr.avob.com\";", "modifier": "private static final", "type": "String", "declarator": "MARKETCONTEXT_NAME = \"http://oadr.avob.com\"", "var_name": "MARKETCONTEXT_NAME"}, {"original_string": "private static final String GROUP_PARAM = \"group\";", "modifier": "private static final", "type": "String", "declarator": "GROUP_PARAM = \"group\"", "var_name": "GROUP_PARAM"}, {"original_string": "private static final String VEN_PARAM = \"ven\";", "modifier": "private static final", "type": "String", "declarator": "VEN_PARAM = \"ven\"", "var_name": "VEN_PARAM"}, {"original_string": "private static final String LEVEL_SIGNAL_TYPE = \"level\";", "modifier": "private static final", "type": "String", "declarator": "LEVEL_SIGNAL_TYPE = \"level\"", "var_name": "LEVEL_SIGNAL_TYPE"}, {"original_string": "private static final String SIMPLE_SIGNAL_NAME = \"SIMPLE\";", "modifier": "private static final", "type": "String", "declarator": "SIMPLE_SIGNAL_NAME = \"SIMPLE\"", "var_name": "SIMPLE_SIGNAL_NAME"}, {"original_string": "private static final String SIGNAL_UNIT_TYPE = \"NONE\";", "modifier": "private static final", "type": "String", "declarator": "SIGNAL_UNIT_TYPE = \"NONE\"", "var_name": "SIGNAL_UNIT_TYPE"}, {"original_string": "@Autowired\n\tprivate WebApplicationContext wac;", "modifier": "@Autowired\n\tprivate", "type": "WebApplicationContext", "declarator": "wac", "var_name": "wac"}, {"original_string": "@Autowired\n\tprivate Filter springSecurityFilterChain;", "modifier": "@Autowired\n\tprivate", "type": "Filter", "declarator": "springSecurityFilterChain", "var_name": "springSecurityFilterChain"}, {"original_string": "@Resource\n\tprivate DemandResponseEventService demandResponseEventService;", "modifier": "@Resource\n\tprivate", "type": "DemandResponseEventService", "declarator": "demandResponseEventService", "var_name": "demandResponseEventService"}, {"original_string": "@Resource\n\tprivate VenService venService;", "modifier": "@Resource\n\tprivate", "type": "VenService", "declarator": "venService", "var_name": "venService"}, {"original_string": "@Resource\n\tprivate VenGroupService venGroupService;", "modifier": "@Resource\n\tprivate", "type": "VenGroupService", "declarator": "venGroupService", "var_name": "venGroupService"}, {"original_string": "@Resource\n\tprivate VenMarketContextService venMarketContextService;", "modifier": "@Resource\n\tprivate", "type": "VenMarketContextService", "declarator": "venMarketContextService", "var_name": "venMarketContextService"}, {"original_string": "@Resource\n\tprivate DtoMapper dozerMapper;", "modifier": "@Resource\n\tprivate", "type": "DtoMapper", "declarator": "dozerMapper", "var_name": "dozerMapper"}, {"original_string": "private UserRequestPostProcessor adminSession = SecurityMockMvcRequestPostProcessors.user(\"admin\").roles(\"ADMIN\");", "modifier": "private", "type": "UserRequestPostProcessor", "declarator": "adminSession = SecurityMockMvcRequestPostProcessors.user(\"admin\").roles(\"ADMIN\")", "var_name": "adminSession"}, {"original_string": "private UserRequestPostProcessor venSession = SecurityMockMvcRequestPostProcessors.user(VEN1).roles(\"VEN\");", "modifier": "private", "type": "UserRequestPostProcessor", "declarator": "venSession = SecurityMockMvcRequestPostProcessors.user(VEN1).roles(\"VEN\")", "var_name": "venSession"}, {"original_string": "private UserRequestPostProcessor userSession = SecurityMockMvcRequestPostProcessors.user(VEN1).roles(\"USER\");", "modifier": "private", "type": "UserRequestPostProcessor", "declarator": "userSession = SecurityMockMvcRequestPostProcessors.user(VEN1).roles(\"USER\")", "var_name": "userSession"}, {"original_string": "private List<Ven> vens = new ArrayList<>();", "modifier": "private", "type": "List<Ven>", "declarator": "vens = new ArrayList<>()", "var_name": "vens"}, {"original_string": "private List<DemandResponseEvent> events = new ArrayList<>();", "modifier": "private", "type": "List<DemandResponseEvent>", "declarator": "events = new ArrayList<>()", "var_name": "events"}, {"original_string": "private DemandResponseEvent event1 = null;", "modifier": "private", "type": "DemandResponseEvent", "declarator": "event1 = null", "var_name": "event1"}, {"original_string": "private VenMarketContext marketContext = null;", "modifier": "private", "type": "VenMarketContext", "declarator": "marketContext = null", "var_name": "marketContext"}, {"original_string": "private VenGroup group = null;", "modifier": "private", "type": "VenGroup", "declarator": "group = null", "var_name": "group"}, {"original_string": "private MockMvc mockMvc;", "modifier": "private", "type": "MockMvc", "declarator": "mockMvc", "var_name": "mockMvc"}, {"original_string": "private ObjectMapper mapper = new ObjectMapper();", "modifier": "private", "type": "ObjectMapper", "declarator": "mapper = new ObjectMapper()", "var_name": "mapper"}], "file": "OpenADRServerVTNCommon/src/test/java/com/avob/openadr/server/common/vtn/controller/DemandResponseControllerTest.java"}, "test_case": {"identifier": "updateTest", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n\tpublic void updateTest() throws Exception {\n\t\tList<DemandResponseEventFilter> filters = DemandResponseEventFilter.builder().addVenId(VEN1).build();\n\t\tMvcResult andReturn = this.mockMvc\n\t\t\t\t.perform(MockMvcRequestBuilders.post(DEMAND_RESPONSE_EVENT_URL + \"search\")\n\t\t\t\t\t\t.content(mapper.writeValueAsString(filters))\n\t\t\t\t\t\t.header(CONTENT_TYPE_HEADER_NAME, APPLICATION_JSON_HEADER_VALUE).with(adminSession))\n\t\t\t\t.andExpect(MockMvcResultMatchers.status().is(HttpStatus.OK_200)).andReturn();\n\t\tList<DemandResponseEventReadDto> list = convertMvcResultToDemandResponseDtoList(andReturn);\n\t\tassertEquals(2, list.size());\n\n\t\tfilters = DemandResponseEventFilter.builder().addVenId(VEN2).build();\n\t\tandReturn = this.mockMvc\n\t\t\t\t.perform(MockMvcRequestBuilders.post(DEMAND_RESPONSE_EVENT_URL + \"search\")\n\t\t\t\t\t\t.content(mapper.writeValueAsString(filters))\n\t\t\t\t\t\t.header(CONTENT_TYPE_HEADER_NAME, APPLICATION_JSON_HEADER_VALUE).with(adminSession))\n\t\t\t\t.andExpect(MockMvcResultMatchers.status().is(HttpStatus.OK_200)).andReturn();\n\t\tlist = convertMvcResultToDemandResponseDtoList(andReturn);\n\t\tassertEquals(2, list.size());\n\n\t\t// check event exists\n\t\tandReturn = this.mockMvc\n\t\t\t\t.perform(MockMvcRequestBuilders.get(DEMAND_RESPONSE_EVENT_URL + event1.getId()).with(adminSession))\n\t\t\t\t.andExpect(MockMvcResultMatchers.status().is(HttpStatus.OK_200)).andReturn();\n\n\t\tDemandResponseEventReadDto dto = convertMvcResultToDemandResponseDto(andReturn);\n\t\tLong modificationNumber = dto.getDescriptor().getModificationNumber();\n\t\tassertNotNull(dto);\n\t\tassertNotNull(dto.getSignals());\n\t\tassertEquals(1, dto.getSignals().size());\n\t\tassertEquals(dto.getSignals().get(0).getCurrentValue(),\n\t\t\t\tDemandResponseEventSimpleValueEnum.SIMPLE_SIGNAL_PAYLOAD_HIGH.getValue());\n\t\tassertNotNull(dto.getSignals().get(0).getIntervals());\n\t\tassertEquals(1, dto.getSignals().get(0).getIntervals().size());\n\t\tassertEquals(INTERVAL_VALUE, dto.getSignals().get(0).getIntervals().get(0).getValue());\n\t\tassertEquals(INTERVAL_DURATION, dto.getSignals().get(0).getIntervals().get(0).getDuration());\n\n\t\tDemandResponseEventSignalDto signalModerate = new DemandResponseEventSignalDto();\n\t\tsignalModerate.setCurrentValue(DemandResponseEventSimpleValueEnum.SIMPLE_SIGNAL_PAYLOAD_MODERATE.getValue());\n\t\tsignalModerate.setSignalName(SIMPLE_SIGNAL_NAME);\n\t\tsignalModerate.setSignalType(LEVEL_SIGNAL_TYPE);\n\n\t\tList<DemandResponseEventTargetDto> targets = new ArrayList<>();\n\t\ttargets.add(new DemandResponseEventTargetDto(VEN_PARAM, VEN2));\n\t\t// invalid update: signals not set\n\t\tDemandResponseEventUpdateDto updateDto = new DemandResponseEventUpdateDto();\n\t\tupdateDto.setPublished(false);\n\t\tupdateDto.getSignals().clear();\n\t\tupdateDto.setTargets(targets);\n\n\t\tString contentStr = mapper.writeValueAsString(updateDto);\n\t\tthis.mockMvc.perform(MockMvcRequestBuilders.put(DEMAND_RESPONSE_EVENT_URL + event1.getId())\n\t\t\t\t.header(CONTENT_TYPE_HEADER_NAME, APPLICATION_JSON_HEADER_VALUE).content(contentStr).with(adminSession))\n\t\t\t\t.andExpect(MockMvcResultMatchers.status().is(HttpStatus.BAD_REQUEST_400));\n\n\t\t// invalid update: signals not set\n\t\tupdateDto = new DemandResponseEventUpdateDto();\n\t\tupdateDto.setPublished(false);\n\t\tupdateDto.getSignals().add(signalModerate);\n\t\tupdateDto.getTargets().clear();\n\n\t\tcontentStr = mapper.writeValueAsString(updateDto);\n\t\tthis.mockMvc.perform(MockMvcRequestBuilders.put(DEMAND_RESPONSE_EVENT_URL + event1.getId())\n\t\t\t\t.header(CONTENT_TYPE_HEADER_NAME, APPLICATION_JSON_HEADER_VALUE).content(contentStr).with(adminSession))\n\t\t\t\t.andExpect(MockMvcResultMatchers.status().is(HttpStatus.BAD_REQUEST_400));\n\n\t\t// invalid update: published null\n\t\tupdateDto = new DemandResponseEventUpdateDto();\n\t\tupdateDto.setPublished(null);\n\t\tupdateDto.getSignals().add(signalModerate);\n\t\tupdateDto.setTargets(targets);\n\n\t\tcontentStr = mapper.writeValueAsString(updateDto);\n\t\tthis.mockMvc.perform(MockMvcRequestBuilders.put(DEMAND_RESPONSE_EVENT_URL + event1.getId())\n\t\t\t\t.header(CONTENT_TYPE_HEADER_NAME, APPLICATION_JSON_HEADER_VALUE).content(contentStr).with(adminSession))\n\t\t\t\t.andExpect(MockMvcResultMatchers.status().is(HttpStatus.BAD_REQUEST_400));\n\n\t\t// update but don't publish\n\t\tupdateDto = new DemandResponseEventUpdateDto();\n\t\tupdateDto.setPublished(false);\n\t\tupdateDto.getSignals().add(signalModerate);\n\t\tupdateDto.setTargets(targets);\n\n\t\tcontentStr = mapper.writeValueAsString(updateDto);\n\t\tthis.mockMvc.perform(MockMvcRequestBuilders.put(DEMAND_RESPONSE_EVENT_URL + event1.getId())\n\t\t\t\t.header(CONTENT_TYPE_HEADER_NAME, APPLICATION_JSON_HEADER_VALUE).content(contentStr).with(adminSession))\n\t\t\t\t.andExpect(MockMvcResultMatchers.status().is(HttpStatus.OK_200));\n\n\t\tandReturn = this.mockMvc\n\t\t\t\t.perform(MockMvcRequestBuilders.get(DEMAND_RESPONSE_EVENT_URL + event1.getId()).with(adminSession))\n\t\t\t\t.andExpect(MockMvcResultMatchers.status().is(HttpStatus.OK_200)).andReturn();\n\n\t\tdto = convertMvcResultToDemandResponseDto(andReturn);\n\n\t\tassertNotNull(dto);\n\t\tassertNotNull(dto.getSignals());\n\t\tassertEquals(1, dto.getSignals().size());\n\t\tassertEquals(dto.getSignals().get(0).getCurrentValue(),\n\t\t\t\tDemandResponseEventSimpleValueEnum.SIMPLE_SIGNAL_PAYLOAD_MODERATE.getValue());\n\t\tassertEquals(modificationNumber, dto.getDescriptor().getModificationNumber());\n\t\tassertTrue(dto.getSignals().get(0).getIntervals().isEmpty());\n\n\t\tassertEquals(1, dto.getTargets().size());\n\t\tassertEquals(VEN2, dto.getTargets().get(0).getTargetId());\n\t\tassertEquals(VEN_PARAM, dto.getTargets().get(0).getTargetType());\n\n\t\tfilters = DemandResponseEventFilter.builder().addVenId(VEN1).build();\n\t\tandReturn = this.mockMvc\n\t\t\t\t.perform(MockMvcRequestBuilders.post(DEMAND_RESPONSE_EVENT_URL + \"search\")\n\t\t\t\t\t\t.content(mapper.writeValueAsString(filters))\n\t\t\t\t\t\t.header(CONTENT_TYPE_HEADER_NAME, APPLICATION_JSON_HEADER_VALUE).with(adminSession))\n\t\t\t\t.andExpect(MockMvcResultMatchers.status().is(HttpStatus.OK_200)).andReturn();\n\t\tlist = convertMvcResultToDemandResponseDtoList(andReturn);\n\t\tassertEquals(1, list.size());\n\n\t\tfilters = DemandResponseEventFilter.builder().addVenId(VEN2).build();\n\t\tandReturn = this.mockMvc\n\t\t\t\t.perform(MockMvcRequestBuilders.post(DEMAND_RESPONSE_EVENT_URL + \"search\")\n\t\t\t\t\t\t.content(mapper.writeValueAsString(filters))\n\t\t\t\t\t\t.header(CONTENT_TYPE_HEADER_NAME, APPLICATION_JSON_HEADER_VALUE).with(adminSession))\n\t\t\t\t.andExpect(MockMvcResultMatchers.status().is(HttpStatus.OK_200)).andReturn();\n\t\tlist = convertMvcResultToDemandResponseDtoList(andReturn);\n\t\tassertEquals(2, list.size());\n\n\t\t// update and publish\n\t\tDemandResponseEventSignalDto signalNormal = new DemandResponseEventSignalDto();\n\t\tsignalNormal.setCurrentValue(DemandResponseEventSimpleValueEnum.SIMPLE_SIGNAL_PAYLOAD_NORMAL.getValue());\n\t\tsignalNormal.setSignalName(SIMPLE_SIGNAL_NAME);\n\t\tsignalNormal.setSignalType(LEVEL_SIGNAL_TYPE);\n\t\tupdateDto = new DemandResponseEventUpdateDto();\n\t\tupdateDto.setPublished(true);\n\t\tupdateDto.getSignals().add(signalNormal);\n\t\ttargets = new ArrayList<>();\n\t\ttargets.add(new DemandResponseEventTargetDto(GROUP_PARAM, GROUP1));\n\t\tupdateDto.setTargets(targets);\n\n\t\tcontentStr = mapper.writeValueAsString(updateDto);\n\t\tthis.mockMvc.perform(MockMvcRequestBuilders.put(DEMAND_RESPONSE_EVENT_URL + event1.getId())\n\t\t\t\t.header(CONTENT_TYPE_HEADER_NAME, APPLICATION_JSON_HEADER_VALUE).content(contentStr).with(adminSession))\n\t\t\t\t.andExpect(MockMvcResultMatchers.status().is(HttpStatus.OK_200));\n\n\t\tandReturn = this.mockMvc\n\t\t\t\t.perform(MockMvcRequestBuilders.get(DEMAND_RESPONSE_EVENT_URL + event1.getId()).with(adminSession))\n\t\t\t\t.andExpect(MockMvcResultMatchers.status().is(HttpStatus.OK_200)).andReturn();\n\n\t\tdto = convertMvcResultToDemandResponseDto(andReturn);\n\n\t\tassertNotNull(dto);\n\t\tassertNotNull(dto.getSignals());\n\t\tassertEquals(1, dto.getSignals().size());\n\t\tassertEquals(dto.getSignals().get(0).getCurrentValue(),\n\t\t\t\tDemandResponseEventSimpleValueEnum.SIMPLE_SIGNAL_PAYLOAD_NORMAL.getValue());\n\t\tmodificationNumber++;\n\t\tassertEquals(modificationNumber, dto.getDescriptor().getModificationNumber());\n\n\t\tfilters = DemandResponseEventFilter.builder().addVenId(VEN1).build();\n\t\tandReturn = this.mockMvc\n\t\t\t\t.perform(MockMvcRequestBuilders.post(DEMAND_RESPONSE_EVENT_URL + \"search\")\n\t\t\t\t\t\t.content(mapper.writeValueAsString(filters))\n\t\t\t\t\t\t.header(CONTENT_TYPE_HEADER_NAME, APPLICATION_JSON_HEADER_VALUE).with(adminSession))\n\t\t\t\t.andExpect(MockMvcResultMatchers.status().is(HttpStatus.OK_200)).andReturn();\n\t\tlist = convertMvcResultToDemandResponseDtoList(andReturn);\n\t\tassertEquals(2, list.size());\n\n\t\tfilters = DemandResponseEventFilter.builder().addVenId(VEN2).build();\n\t\tandReturn = this.mockMvc\n\t\t\t\t.perform(MockMvcRequestBuilders.post(DEMAND_RESPONSE_EVENT_URL + \"search\")\n\t\t\t\t\t\t.content(mapper.writeValueAsString(filters))\n\t\t\t\t\t\t.header(CONTENT_TYPE_HEADER_NAME, APPLICATION_JSON_HEADER_VALUE).with(adminSession))\n\t\t\t\t.andExpect(MockMvcResultMatchers.status().is(HttpStatus.OK_200)).andReturn();\n\t\tlist = convertMvcResultToDemandResponseDtoList(andReturn);\n\t\tassertEquals(1, list.size());\n\n\t\t// update id not Long\n\t\tthis.mockMvc.perform(MockMvcRequestBuilders.put(DEMAND_RESPONSE_EVENT_URL + UNKNOWN_MARKETCONTEXT_NAME)\n\t\t\t\t.header(CONTENT_TYPE_HEADER_NAME, APPLICATION_JSON_HEADER_VALUE).content(contentStr).with(adminSession))\n\t\t\t\t.andExpect(MockMvcResultMatchers.status().is(HttpStatus.BAD_REQUEST_400));\n\n\t\t// update unknown\n\t\tthis.mockMvc.perform(MockMvcRequestBuilders.put(DEMAND_RESPONSE_EVENT_URL + \"999\")\n\t\t\t\t.header(CONTENT_TYPE_HEADER_NAME, APPLICATION_JSON_HEADER_VALUE).content(contentStr).with(adminSession))\n\t\t\t\t.andExpect(MockMvcResultMatchers.status().is(HttpStatus.NOT_FOUND_404));\n\n\t}", "signature": "void updateTest()", "full_signature": "@Test public void updateTest()", "class_method_signature": "DemandResponseControllerTest.updateTest()", "testcase": true, "constructor": false, "invocations": ["build", "addVenId", "builder", "andReturn", "andExpect", "perform", "with", "header", "content", "post", "writeValueAsString", "is", "status", "convertMvcResultToDemandResponseDtoList", "assertEquals", "size", "build", "addVenId", "builder", "andReturn", "andExpect", "perform", "with", "header", "content", "post", "writeValueAsString", "is", "status", "convertMvcResultToDemandResponseDtoList", "assertEquals", "size", "andReturn", "andExpect", "perform", "with", "get", "getId", "is", "status", "convertMvcResultToDemandResponseDto", "getModificationNumber", "getDescriptor", "assertNotNull", "assertNotNull", "getSignals", "assertEquals", "size", "getSignals", "assertEquals", "getCurrentValue", "get", "getSignals", "getValue", "assertNotNull", "getIntervals", "get", "getSignals", "assertEquals", "size", "getIntervals", "get", "getSignals", "assertEquals", "getValue", "get", "getIntervals", "get", "getSignals", "assertEquals", "getDuration", "get", "getIntervals", "get", "getSignals", "setCurrentValue", "getValue", "setSignalName", "setSignalType", "add", "setPublished", "clear", "getSignals", "setTargets", "writeValueAsString", "andExpect", "perform", "with", "content", "header", "put", "getId", "is", "status", "setPublished", "add", "getSignals", "clear", "getTargets", "writeValueAsString", "andExpect", "perform", "with", "content", "header", "put", "getId", "is", "status", "setPublished", "add", "getSignals", "setTargets", "writeValueAsString", "andExpect", "perform", "with", "content", "header", "put", "getId", "is", "status", "setPublished", "add", "getSignals", "setTargets", "writeValueAsString", "andExpect", "perform", "with", "content", "header", "put", "getId", "is", "status", "andReturn", "andExpect", "perform", "with", "get", "getId", "is", "status", "convertMvcResultToDemandResponseDto", "assertNotNull", "assertNotNull", "getSignals", "assertEquals", "size", "getSignals", "assertEquals", "getCurrentValue", "get", "getSignals", "getValue", "assertEquals", "getModificationNumber", "getDescriptor", "assertTrue", "isEmpty", "getIntervals", "get", "getSignals", "assertEquals", "size", "getTargets", "assertEquals", "getTargetId", "get", "getTargets", "assertEquals", "getTargetType", "get", "getTargets", "build", "addVenId", "builder", "andReturn", "andExpect", "perform", "with", "header", "content", "post", "writeValueAsString", "is", "status", "convertMvcResultToDemandResponseDtoList", "assertEquals", "size", "build", "addVenId", "builder", "andReturn", "andExpect", "perform", "with", "header", "content", "post", "writeValueAsString", "is", "status", "convertMvcResultToDemandResponseDtoList", "assertEquals", "size", "setCurrentValue", "getValue", "setSignalName", "setSignalType", "setPublished", "add", "getSignals", "add", "setTargets", "writeValueAsString", "andExpect", "perform", "with", "content", "header", "put", "getId", "is", "status", "andReturn", "andExpect", "perform", "with", "get", "getId", "is", "status", "convertMvcResultToDemandResponseDto", "assertNotNull", "assertNotNull", "getSignals", "assertEquals", "size", "getSignals", "assertEquals", "getCurrentValue", "get", "getSignals", "getValue", "assertEquals", "getModificationNumber", "getDescriptor", "build", "addVenId", "builder", "andReturn", "andExpect", "perform", "with", "header", "content", "post", "writeValueAsString", "is", "status", "convertMvcResultToDemandResponseDtoList", "assertEquals", "size", "build", "addVenId", "builder", "andReturn", "andExpect", "perform", "with", "header", "content", "post", "writeValueAsString", "is", "status", "convertMvcResultToDemandResponseDtoList", "assertEquals", "size", "andExpect", "perform", "with", "content", "header", "put", "is", "status", "andExpect", "perform", "with", "content", "header", "put", "is", "status"]}, "focal_class": {"identifier": "DemandResponseController", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final Logger LOGGER = LoggerFactory.getLogger(DemandResponseController.class);", "modifier": "private static final", "type": "Logger", "declarator": "LOGGER = LoggerFactory.getLogger(DemandResponseController.class)", "var_name": "LOGGER"}, {"original_string": "@Resource\n\tprivate DtoMapper dtoMapper;", "modifier": "@Resource\n\tprivate", "type": "DtoMapper", "declarator": "dtoMapper", "var_name": "dtoMapper"}, {"original_string": "@Autowired\n\tprivate DemandResponseEventService demandResponseEventService;", "modifier": "@Autowired\n\tprivate", "type": "DemandResponseEventService", "declarator": "demandResponseEventService", "var_name": "demandResponseEventService"}, {"original_string": "@Resource\n\tprivate DemandResponseEventCreateDtoValidator demandResponseEventCreateDtoValidator;", "modifier": "@Resource\n\tprivate", "type": "DemandResponseEventCreateDtoValidator", "declarator": "demandResponseEventCreateDtoValidator", "var_name": "demandResponseEventCreateDtoValidator"}, {"original_string": "@Resource\n\tprivate DemandResponseEventUpdateDtoValidator demandResponseEventUpdateDtoValidator;", "modifier": "@Resource\n\tprivate", "type": "DemandResponseEventUpdateDtoValidator", "declarator": "demandResponseEventUpdateDtoValidator", "var_name": "demandResponseEventUpdateDtoValidator"}], "methods": [{"identifier": "initBinderCreate", "parameters": "(WebDataBinder binder)", "modifiers": "@InitBinder(\"demandResponseEventCreateDto\") protected", "return": "void", "signature": "void initBinderCreate(WebDataBinder binder)", "full_signature": "@InitBinder(\"demandResponseEventCreateDto\") protected void initBinderCreate(WebDataBinder binder)", "class_method_signature": "DemandResponseController.initBinderCreate(WebDataBinder binder)", "testcase": false, "constructor": false}, {"identifier": "initBinderUpdate", "parameters": "(WebDataBinder binder)", "modifiers": "@InitBinder(\"demandResponseEventUpdateDto\") protected", "return": "void", "signature": "void initBinderUpdate(WebDataBinder binder)", "full_signature": "@InitBinder(\"demandResponseEventUpdateDto\") protected void initBinderUpdate(WebDataBinder binder)", "class_method_signature": "DemandResponseController.initBinderUpdate(WebDataBinder binder)", "testcase": false, "constructor": false}, {"identifier": "search", "parameters": "(@RequestBody List<DemandResponseEventFilter> filters,\n\t\t\t@RequestParam(value = \"start\", required = false) Long start,\n\t\t\t@RequestParam(value = \"end\", required = false) Long end,\n\t\t\t@RequestParam(value = \"page\", required = false) Integer page,\n\t\t\t@RequestParam(value = \"size\", required = false) Integer size, HttpServletResponse response)", "modifiers": "@RequestMapping(value = \"/search\", method = RequestMethod.POST) @ResponseBody public", "return": "List<DemandResponseEventReadDto>", "signature": "List<DemandResponseEventReadDto> search(@RequestBody List<DemandResponseEventFilter> filters,\n\t\t\t@RequestParam(value = \"start\", required = false) Long start,\n\t\t\t@RequestParam(value = \"end\", required = false) Long end,\n\t\t\t@RequestParam(value = \"page\", required = false) Integer page,\n\t\t\t@RequestParam(value = \"size\", required = false) Integer size, HttpServletResponse response)", "full_signature": "@RequestMapping(value = \"/search\", method = RequestMethod.POST) @ResponseBody public List<DemandResponseEventReadDto> search(@RequestBody List<DemandResponseEventFilter> filters,\n\t\t\t@RequestParam(value = \"start\", required = false) Long start,\n\t\t\t@RequestParam(value = \"end\", required = false) Long end,\n\t\t\t@RequestParam(value = \"page\", required = false) Integer page,\n\t\t\t@RequestParam(value = \"size\", required = false) Integer size, HttpServletResponse response)", "class_method_signature": "DemandResponseController.search(@RequestBody List<DemandResponseEventFilter> filters,\n\t\t\t@RequestParam(value = \"start\", required = false) Long start,\n\t\t\t@RequestParam(value = \"end\", required = false) Long end,\n\t\t\t@RequestParam(value = \"page\", required = false) Integer page,\n\t\t\t@RequestParam(value = \"size\", required = false) Integer size, HttpServletResponse response)", "testcase": false, "constructor": false}, {"identifier": "create", "parameters": "(@Valid @RequestBody DemandResponseEventCreateDto event,\n\t\t\tHttpServletResponse response, BindingResult result)", "modifiers": "@RequestMapping(value = \"/\", method = RequestMethod.POST) @ResponseBody public", "return": "DemandResponseEventReadDto", "signature": "DemandResponseEventReadDto create(@Valid @RequestBody DemandResponseEventCreateDto event,\n\t\t\tHttpServletResponse response, BindingResult result)", "full_signature": "@RequestMapping(value = \"/\", method = RequestMethod.POST) @ResponseBody public DemandResponseEventReadDto create(@Valid @RequestBody DemandResponseEventCreateDto event,\n\t\t\tHttpServletResponse response, BindingResult result)", "class_method_signature": "DemandResponseController.create(@Valid @RequestBody DemandResponseEventCreateDto event,\n\t\t\tHttpServletResponse response, BindingResult result)", "testcase": false, "constructor": false}, {"identifier": "update", "parameters": "(@PathVariable(value = \"id\") Long id,\n\t\t\t@Valid @RequestBody DemandResponseEventUpdateDto event, HttpServletResponse response,\n\t\t\tBindingResult result)", "modifiers": "@RequestMapping(value = \"/{id}\", method = RequestMethod.PUT) @ResponseBody public", "return": "DemandResponseEventReadDto", "signature": "DemandResponseEventReadDto update(@PathVariable(value = \"id\") Long id,\n\t\t\t@Valid @RequestBody DemandResponseEventUpdateDto event, HttpServletResponse response,\n\t\t\tBindingResult result)", "full_signature": "@RequestMapping(value = \"/{id}\", method = RequestMethod.PUT) @ResponseBody public DemandResponseEventReadDto update(@PathVariable(value = \"id\") Long id,\n\t\t\t@Valid @RequestBody DemandResponseEventUpdateDto event, HttpServletResponse response,\n\t\t\tBindingResult result)", "class_method_signature": "DemandResponseController.update(@PathVariable(value = \"id\") Long id,\n\t\t\t@Valid @RequestBody DemandResponseEventUpdateDto event, HttpServletResponse response,\n\t\t\tBindingResult result)", "testcase": false, "constructor": false}, {"identifier": "publish", "parameters": "(@PathVariable(value = \"id\") Long id, HttpServletResponse response)", "modifiers": "@RequestMapping(value = \"/{id}/publish\", method = RequestMethod.POST) @ResponseBody public", "return": "DemandResponseEventReadDto", "signature": "DemandResponseEventReadDto publish(@PathVariable(value = \"id\") Long id, HttpServletResponse response)", "full_signature": "@RequestMapping(value = \"/{id}/publish\", method = RequestMethod.POST) @ResponseBody public DemandResponseEventReadDto publish(@PathVariable(value = \"id\") Long id, HttpServletResponse response)", "class_method_signature": "DemandResponseController.publish(@PathVariable(value = \"id\") Long id, HttpServletResponse response)", "testcase": false, "constructor": false}, {"identifier": "active", "parameters": "(@PathVariable(value = \"id\") Long id, HttpServletResponse response)", "modifiers": "@RequestMapping(value = \"/{id}/active\", method = RequestMethod.POST) @ResponseBody public", "return": "DemandResponseEventReadDto", "signature": "DemandResponseEventReadDto active(@PathVariable(value = \"id\") Long id, HttpServletResponse response)", "full_signature": "@RequestMapping(value = \"/{id}/active\", method = RequestMethod.POST) @ResponseBody public DemandResponseEventReadDto active(@PathVariable(value = \"id\") Long id, HttpServletResponse response)", "class_method_signature": "DemandResponseController.active(@PathVariable(value = \"id\") Long id, HttpServletResponse response)", "testcase": false, "constructor": false}, {"identifier": "cancel", "parameters": "(@PathVariable(value = \"id\") Long id, HttpServletResponse response)", "modifiers": "@RequestMapping(value = \"/{id}/cancel\", method = RequestMethod.POST) @ResponseBody public", "return": "DemandResponseEventReadDto", "signature": "DemandResponseEventReadDto cancel(@PathVariable(value = \"id\") Long id, HttpServletResponse response)", "full_signature": "@RequestMapping(value = \"/{id}/cancel\", method = RequestMethod.POST) @ResponseBody public DemandResponseEventReadDto cancel(@PathVariable(value = \"id\") Long id, HttpServletResponse response)", "class_method_signature": "DemandResponseController.cancel(@PathVariable(value = \"id\") Long id, HttpServletResponse response)", "testcase": false, "constructor": false}, {"identifier": "read", "parameters": "(@PathVariable(value = \"id\") Long id, HttpServletResponse response)", "modifiers": "@RequestMapping(value = \"/{id}\", method = RequestMethod.GET) @ResponseBody public", "return": "DemandResponseEventReadDto", "signature": "DemandResponseEventReadDto read(@PathVariable(value = \"id\") Long id, HttpServletResponse response)", "full_signature": "@RequestMapping(value = \"/{id}\", method = RequestMethod.GET) @ResponseBody public DemandResponseEventReadDto read(@PathVariable(value = \"id\") Long id, HttpServletResponse response)", "class_method_signature": "DemandResponseController.read(@PathVariable(value = \"id\") Long id, HttpServletResponse response)", "testcase": false, "constructor": false}, {"identifier": "delete", "parameters": "(@PathVariable(value = \"id\") Long id, HttpServletResponse response)", "modifiers": "@RequestMapping(value = \"/{id}\", method = RequestMethod.DELETE) @ResponseBody public", "return": "void", "signature": "void delete(@PathVariable(value = \"id\") Long id, HttpServletResponse response)", "full_signature": "@RequestMapping(value = \"/{id}\", method = RequestMethod.DELETE) @ResponseBody public void delete(@PathVariable(value = \"id\") Long id, HttpServletResponse response)", "class_method_signature": "DemandResponseController.delete(@PathVariable(value = \"id\") Long id, HttpServletResponse response)", "testcase": false, "constructor": false}, {"identifier": "readVenDemandResponseEvent", "parameters": "(@PathVariable(value = \"id\") Long id,\n\t\t\tHttpServletResponse response)", "modifiers": "@RequestMapping(value = \"/{id}/venResponse\", method = RequestMethod.GET) @ResponseBody public", "return": "List<VenDemandResponseEventDto>", "signature": "List<VenDemandResponseEventDto> readVenDemandResponseEvent(@PathVariable(value = \"id\") Long id,\n\t\t\tHttpServletResponse response)", "full_signature": "@RequestMapping(value = \"/{id}/venResponse\", method = RequestMethod.GET) @ResponseBody public List<VenDemandResponseEventDto> readVenDemandResponseEvent(@PathVariable(value = \"id\") Long id,\n\t\t\tHttpServletResponse response)", "class_method_signature": "DemandResponseController.readVenDemandResponseEvent(@PathVariable(value = \"id\") Long id,\n\t\t\tHttpServletResponse response)", "testcase": false, "constructor": false}, {"identifier": "readVenDemandResponseEvent", "parameters": "(@PathVariable(value = \"id\") Long id,\n\t\t\t@PathVariable(value = \"username\") String username, HttpServletResponse response)", "modifiers": "@RequestMapping(value = \"/{id}/venResponse/{username}\", method = RequestMethod.GET) @ResponseBody public", "return": "VenDemandResponseEventDto", "signature": "VenDemandResponseEventDto readVenDemandResponseEvent(@PathVariable(value = \"id\") Long id,\n\t\t\t@PathVariable(value = \"username\") String username, HttpServletResponse response)", "full_signature": "@RequestMapping(value = \"/{id}/venResponse/{username}\", method = RequestMethod.GET) @ResponseBody public VenDemandResponseEventDto readVenDemandResponseEvent(@PathVariable(value = \"id\") Long id,\n\t\t\t@PathVariable(value = \"username\") String username, HttpServletResponse response)", "class_method_signature": "DemandResponseController.readVenDemandResponseEvent(@PathVariable(value = \"id\") Long id,\n\t\t\t@PathVariable(value = \"username\") String username, HttpServletResponse response)", "testcase": false, "constructor": false}], "file": "OpenADRServerVTNCommon/src/main/java/com/avob/openadr/server/common/vtn/controller/DemandResponseController.java"}, "focal_method": {"identifier": "update", "parameters": "(@PathVariable(value = \"id\") Long id,\n\t\t\t@Valid @RequestBody DemandResponseEventUpdateDto event, HttpServletResponse response,\n\t\t\tBindingResult result)", "modifiers": "@RequestMapping(value = \"/{id}\", method = RequestMethod.PUT) @ResponseBody public", "return": "DemandResponseEventReadDto", "body": "@RequestMapping(value = \"/{id}\", method = RequestMethod.PUT)\n\t@ResponseBody\n\tpublic DemandResponseEventReadDto update(@PathVariable(value = \"id\") Long id,\n\t\t\t@Valid @RequestBody DemandResponseEventUpdateDto event, HttpServletResponse response,\n\t\t\tBindingResult result) {\n\t\tOptional<DemandResponseEvent> op = demandResponseEventService.findById(id);\n\t\tif (!op.isPresent()) {\n\t\t\tresponse.setStatus(HttpStatus.NOT_FOUND_404);\n\t\t\treturn null;\n\t\t}\n\t\tDemandResponseEvent eventOld = op.get();\n\t\tDemandResponseEvent save = demandResponseEventService.update(eventOld, event);\n\n\t\tresponse.setStatus(HttpStatus.OK_200);\n\n\t\tLOGGER.info(\"update DR event: \" + save.toString());\n\n\t\treturn dtoMapper.map(save, DemandResponseEventReadDto.class);\n\n\t}", "signature": "DemandResponseEventReadDto update(@PathVariable(value = \"id\") Long id,\n\t\t\t@Valid @RequestBody DemandResponseEventUpdateDto event, HttpServletResponse response,\n\t\t\tBindingResult result)", "full_signature": "@RequestMapping(value = \"/{id}\", method = RequestMethod.PUT) @ResponseBody public DemandResponseEventReadDto update(@PathVariable(value = \"id\") Long id,\n\t\t\t@Valid @RequestBody DemandResponseEventUpdateDto event, HttpServletResponse response,\n\t\t\tBindingResult result)", "class_method_signature": "DemandResponseController.update(@PathVariable(value = \"id\") Long id,\n\t\t\t@Valid @RequestBody DemandResponseEventUpdateDto event, HttpServletResponse response,\n\t\t\tBindingResult result)", "testcase": false, "constructor": false, "invocations": ["findById", "isPresent", "setStatus", "get", "update", "setStatus", "info", "toString", "map"]}, "repository": {"repo_id": 169761438, "url": "https://github.com/avob/OpenADR", "language": "Java", "is_fork": false, "fork_count": 6, "stargazer_count": 8, "size": 55915, "license": "licensed"}}