{"test_class": {"identifier": "TestBufferPosition", "superclass": "", "interfaces": "", "fields": [], "file": "databus-core/databus-core-impl/src/test/java/com/linkedin/databus/core/util/TestBufferPosition.java"}, "test_case": {"identifier": "testSkipOverFreeSpace", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n  public void testSkipOverFreeSpace()\n  {\n    ByteBuffer[] buffers = allocateByteBuffers(128, 128, 50);\n    BufferPositionParser parser = createParser(128, 128, 50);\n    BufferPosition pos = new BufferPosition(parser, buffers);\n\n    adjustLimits(buffers, 50, 100, 0);\n\n    pos.setPosition(parser.encode(0, 0, 0));\n    pos.skipOverFreeSpace();\n    //should not change\n    assertPosition(pos, 0, 0, 0);\n\n    adjustLimits(buffers, 0, 0, 0);\n\n    pos.setPosition(parser.encode(0, 0, 0));\n    pos.skipOverFreeSpace();\n    //should wrap around\n    assertPosition(pos, 1, 0, 0);\n\n    adjustLimits(buffers, 10, 0, 0);\n\n    pos.setPosition(parser.encode(0, 0, 50));\n    pos.skipOverFreeSpace();\n    //should wrap around\n    assertPosition(pos, 1, 0, 0);\n\n    adjustLimits(buffers, 50, 100, 0);\n\n    pos.setPosition(parser.encode(10, 0, 10));\n    //should not change\n    pos.skipOverFreeSpace();\n    assertPosition(pos, 10, 0, 10);\n\n    pos.setPosition(parser.encode(12, 0, 50));\n    //should go to index 1\n    pos.skipOverFreeSpace();\n    assertPosition(pos, 12, 1, 0);\n\n    pos.setPosition(parser.encode(255, 1, 100));\n    //should go to index 0\n    pos.skipOverFreeSpace();\n    assertPosition(pos, 256, 0, 0);\n  }", "signature": "void testSkipOverFreeSpace()", "full_signature": "@Test public void testSkipOverFreeSpace()", "class_method_signature": "TestBufferPosition.testSkipOverFreeSpace()", "testcase": true, "constructor": false, "invocations": ["allocateByteBuffers", "createParser", "adjustLimits", "setPosition", "encode", "skipOverFreeSpace", "assertPosition", "adjustLimits", "setPosition", "encode", "skipOverFreeSpace", "assertPosition", "adjustLimits", "setPosition", "encode", "skipOverFreeSpace", "assertPosition", "adjustLimits", "setPosition", "encode", "skipOverFreeSpace", "assertPosition", "setPosition", "encode", "skipOverFreeSpace", "assertPosition", "setPosition", "encode", "skipOverFreeSpace", "assertPosition"]}, "focal_class": {"identifier": "BufferPosition", "superclass": "", "interfaces": "", "fields": [{"original_string": "public static final String MODULE = BufferPosition.class.getName();", "modifier": "public static final", "type": "String", "declarator": "MODULE = BufferPosition.class.getName()", "var_name": "MODULE"}, {"original_string": "public static final Logger LOG = Logger.getLogger(MODULE);", "modifier": "public static final", "type": "Logger", "declarator": "LOG = Logger.getLogger(MODULE)", "var_name": "LOG"}, {"original_string": "private volatile long  _address;", "modifier": "private volatile", "type": "long", "declarator": "_address", "var_name": "_address"}, {"original_string": "private final BufferPositionParser _parser;", "modifier": "private final", "type": "BufferPositionParser", "declarator": "_parser", "var_name": "_parser"}, {"original_string": "private final ByteBuffer[]  _buffers;", "modifier": "private final", "type": "ByteBuffer[]", "declarator": "_buffers", "var_name": "_buffers"}], "methods": [{"identifier": "init", "parameters": "()", "modifiers": "public", "return": "boolean", "signature": "boolean init()", "full_signature": "public boolean init()", "class_method_signature": "BufferPosition.init()", "testcase": false, "constructor": false}, {"identifier": "copy", "parameters": "(BufferPosition rhs )", "modifiers": "public", "return": "void", "signature": "void copy(BufferPosition rhs )", "full_signature": "public void copy(BufferPosition rhs )", "class_method_signature": "BufferPosition.copy(BufferPosition rhs )", "testcase": false, "constructor": false}, {"identifier": "getRealPosition", "parameters": "()", "modifiers": "public", "return": "long", "signature": "long getRealPosition()", "full_signature": "public long getRealPosition()", "class_method_signature": "BufferPosition.getRealPosition()", "testcase": false, "constructor": false}, {"identifier": "bufferIndex", "parameters": "()", "modifiers": "public", "return": "int", "signature": "int bufferIndex()", "full_signature": "public int bufferIndex()", "class_method_signature": "BufferPosition.bufferIndex()", "testcase": false, "constructor": false}, {"identifier": "bufferOffset", "parameters": "()", "modifiers": "public", "return": "int", "signature": "int bufferOffset()", "full_signature": "public int bufferOffset()", "class_method_signature": "BufferPosition.bufferOffset()", "testcase": false, "constructor": false}, {"identifier": "bufferGenId", "parameters": "()", "modifiers": "public", "return": "long", "signature": "long bufferGenId()", "full_signature": "public long bufferGenId()", "class_method_signature": "BufferPosition.bufferGenId()", "testcase": false, "constructor": false}, {"identifier": "setPosition", "parameters": "(long address)", "modifiers": "public", "return": "void", "signature": "void setPosition(long address)", "full_signature": "public void setPosition(long address)", "class_method_signature": "BufferPosition.setPosition(long address)", "testcase": false, "constructor": false}, {"identifier": "setPosition", "parameters": "(long genId, int index, int offset)", "modifiers": "public", "return": "void", "signature": "void setPosition(long genId, int index, int offset)", "full_signature": "public void setPosition(long genId, int index, int offset)", "class_method_signature": "BufferPosition.setPosition(long genId, int index, int offset)", "testcase": false, "constructor": false}, {"identifier": "getPosition", "parameters": "()", "modifiers": "public", "return": "long", "signature": "long getPosition()", "full_signature": "public long getPosition()", "class_method_signature": "BufferPosition.getPosition()", "testcase": false, "constructor": false}, {"identifier": "BufferPosition", "parameters": "(BufferPositionParser parser, ByteBuffer[] buffers)", "modifiers": "public", "return": "", "signature": " BufferPosition(BufferPositionParser parser, ByteBuffer[] buffers)", "full_signature": "public  BufferPosition(BufferPositionParser parser, ByteBuffer[] buffers)", "class_method_signature": "BufferPosition.BufferPosition(BufferPositionParser parser, ByteBuffer[] buffers)", "testcase": false, "constructor": true}, {"identifier": "BufferPosition", "parameters": "(long pos, BufferPositionParser parser, ByteBuffer[] buffers)", "modifiers": "public", "return": "", "signature": " BufferPosition(long pos, BufferPositionParser parser, ByteBuffer[] buffers)", "full_signature": "public  BufferPosition(long pos, BufferPositionParser parser, ByteBuffer[] buffers)", "class_method_signature": "BufferPosition.BufferPosition(long pos, BufferPositionParser parser, ByteBuffer[] buffers)", "testcase": false, "constructor": true}, {"identifier": "toString", "parameters": "()", "modifiers": "@Override public", "return": "String", "signature": "String toString()", "full_signature": "@Override public String toString()", "class_method_signature": "BufferPosition.toString()", "testcase": false, "constructor": false}, {"identifier": "incrementGenId", "parameters": "()", "modifiers": "public", "return": "long", "signature": "long incrementGenId()", "full_signature": "public long incrementGenId()", "class_method_signature": "BufferPosition.incrementGenId()", "testcase": false, "constructor": false}, {"identifier": "incrementIndex", "parameters": "()", "modifiers": "public", "return": "long", "signature": "long incrementIndex()", "full_signature": "public long incrementIndex()", "class_method_signature": "BufferPosition.incrementIndex()", "testcase": false, "constructor": false}, {"identifier": "incrementOffset", "parameters": "(int increment)", "modifiers": "public", "return": "long", "signature": "long incrementOffset(int increment)", "full_signature": "public long incrementOffset(int increment)", "class_method_signature": "BufferPosition.incrementOffset(int increment)", "testcase": false, "constructor": false}, {"identifier": "sanitize", "parameters": "()", "modifiers": "public", "return": "long", "signature": "long sanitize()", "full_signature": "public long sanitize()", "class_method_signature": "BufferPosition.sanitize()", "testcase": false, "constructor": false}, {"identifier": "sanitize", "parameters": "(boolean okToRegress)", "modifiers": "public", "return": "long", "signature": "long sanitize(boolean okToRegress)", "full_signature": "public long sanitize(boolean okToRegress)", "class_method_signature": "BufferPosition.sanitize(boolean okToRegress)", "testcase": false, "constructor": false}, {"identifier": "hashCode", "parameters": "()", "modifiers": "@Override public", "return": "int", "signature": "int hashCode()", "full_signature": "@Override public int hashCode()", "class_method_signature": "BufferPosition.hashCode()", "testcase": false, "constructor": false}, {"identifier": "equals", "parameters": "(Object obj)", "modifiers": "@Override public", "return": "boolean", "signature": "boolean equals(Object obj)", "full_signature": "@Override public boolean equals(Object obj)", "class_method_signature": "BufferPosition.equals(Object obj)", "testcase": false, "constructor": false}, {"identifier": "equals", "parameters": "(BufferPosition position)", "modifiers": "public", "return": "boolean", "signature": "boolean equals(BufferPosition position)", "full_signature": "public boolean equals(BufferPosition position)", "class_method_signature": "BufferPosition.equals(BufferPosition position)", "testcase": false, "constructor": false}, {"identifier": "equalsIgnoreGenId", "parameters": "(BufferPosition position)", "modifiers": "public", "return": "boolean", "signature": "boolean equalsIgnoreGenId(BufferPosition position)", "full_signature": "public boolean equalsIgnoreGenId(BufferPosition position)", "class_method_signature": "BufferPosition.equalsIgnoreGenId(BufferPosition position)", "testcase": false, "constructor": false}, {"identifier": "skipOverFreeSpace", "parameters": "()", "modifiers": "public", "return": "void", "signature": "void skipOverFreeSpace()", "full_signature": "public void skipOverFreeSpace()", "class_method_signature": "BufferPosition.skipOverFreeSpace()", "testcase": false, "constructor": false}], "file": "databus-core/databus-core-impl/src/main/java/com/linkedin/databus/core/util/BufferPosition.java"}, "focal_method": {"identifier": "skipOverFreeSpace", "parameters": "()", "modifiers": "public", "return": "void", "body": "public void skipOverFreeSpace()\n  {\n    ByteBuffer curBuf = _buffers[bufferIndex()];\n    for(int iterNum = 0;iterNum < _buffers.length && bufferOffset() >= curBuf.limit(); ++iterNum)\n    {\n      incrementIndex();\n      curBuf = _buffers[bufferIndex()];\n    }\n  }", "signature": "void skipOverFreeSpace()", "full_signature": "public void skipOverFreeSpace()", "class_method_signature": "BufferPosition.skipOverFreeSpace()", "testcase": false, "constructor": false, "invocations": ["bufferIndex", "bufferOffset", "limit", "incrementIndex", "bufferIndex"]}, "repository": {"repo_id": 7209229, "url": "https://github.com/linkedin/databus", "language": "Java", "is_fork": false, "fork_count": 653, "stargazer_count": 2899, "size": 51191, "license": "licensed"}}