{"test_class": {"identifier": "BlockChainTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private BlockChain testNetChain;", "modifier": "private", "type": "BlockChain", "declarator": "testNetChain", "var_name": "testNetChain"}, {"original_string": "private Wallet wallet;", "modifier": "private", "type": "Wallet", "declarator": "wallet", "var_name": "wallet"}, {"original_string": "private BlockChain chain;", "modifier": "private", "type": "BlockChain", "declarator": "chain", "var_name": "chain"}, {"original_string": "private BlockStore blockStore;", "modifier": "private", "type": "BlockStore", "declarator": "blockStore", "var_name": "blockStore"}, {"original_string": "private Address coinbaseTo;", "modifier": "private", "type": "Address", "declarator": "coinbaseTo", "var_name": "coinbaseTo"}, {"original_string": "private NetworkParameters unitTestParams;", "modifier": "private", "type": "NetworkParameters", "declarator": "unitTestParams", "var_name": "unitTestParams"}, {"original_string": "private final StoredBlock[] block = new StoredBlock[1];", "modifier": "private final", "type": "StoredBlock[]", "declarator": "block = new StoredBlock[1]", "var_name": "block"}, {"original_string": "private Transaction coinbaseTransaction;", "modifier": "private", "type": "Transaction", "declarator": "coinbaseTransaction", "var_name": "coinbaseTransaction"}, {"original_string": "private static final TweakableTestNet2Params testNet = new TweakableTestNet2Params();", "modifier": "private static final", "type": "TweakableTestNet2Params", "declarator": "testNet = new TweakableTestNet2Params()", "var_name": "testNet"}], "file": "core/src/test/java/com/google/bitcoin/core/BlockChainTest.java"}, "test_case": {"identifier": "badDifficulty", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void badDifficulty() throws Exception {\n        assertTrue(testNetChain.add(getBlock1()));\n        Block b2 = getBlock2();\n        assertTrue(testNetChain.add(b2));\n        Block bad = new Block(testNet);\n        // Merkle root can be anything here, doesn't matter.\n        bad.setMerkleRoot(new Sha256Hash(\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\"));\n        // Nonce was just some number that made the hash < difficulty limit set below, it can be anything.\n        bad.setNonce(140548933);\n        bad.setTime(1279242649);\n        bad.setPrevBlockHash(b2.getHash());\n        // We're going to make this block so easy 50% of solutions will pass, and check it gets rejected for having a\n        // bad difficulty target. Unfortunately the encoding mechanism means we cannot make one that accepts all\n        // solutions.\n        bad.setDifficultyTarget(Block.EASIEST_DIFFICULTY_TARGET);\n        try {\n            testNetChain.add(bad);\n            // The difficulty target above should be rejected on the grounds of being easier than the networks\n            // allowable difficulty.\n            fail();\n        } catch (VerificationException e) {\n            assertTrue(e.getMessage(), e.getCause().getMessage().contains(\"Difficulty target is bad\"));\n        }\n\n        // Accept any level of difficulty now.\n        BigInteger oldVal = testNet.getProofOfWorkLimit();\n        testNet.setProofOfWorkLimit(new BigInteger\n                (\"00ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\", 16));\n        try {\n            testNetChain.add(bad);\n            // We should not get here as the difficulty target should not be changing at this point.\n            fail();\n        } catch (VerificationException e) {\n            assertTrue(e.getMessage(), e.getCause().getMessage().contains(\"Unexpected change in difficulty\"));\n        }\n        testNet.setProofOfWorkLimit(oldVal);\n\n        // TODO: Test difficulty change is not out of range when a transition period becomes valid.\n    }", "signature": "void badDifficulty()", "full_signature": "@Test public void badDifficulty()", "class_method_signature": "BlockChainTest.badDifficulty()", "testcase": true, "constructor": false, "invocations": ["assertTrue", "add", "getBlock1", "getBlock2", "assertTrue", "add", "setMerkleRoot", "setNonce", "setTime", "setPrevBlockHash", "getHash", "setDifficultyTarget", "add", "fail", "assertTrue", "getMessage", "contains", "getMessage", "getCause", "getProofOfWorkLimit", "setProofOfWorkLimit", "add", "fail", "assertTrue", "getMessage", "contains", "getMessage", "getCause", "setProofOfWorkLimit"]}, "focal_class": {"identifier": "BlockChain", "superclass": "extends AbstractBlockChain", "interfaces": "", "fields": [{"original_string": "protected final BlockStore blockStore;", "modifier": "protected final", "type": "BlockStore", "declarator": "blockStore", "var_name": "blockStore"}], "methods": [{"identifier": "BlockChain", "parameters": "(NetworkParameters params, Wallet wallet, BlockStore blockStore)", "modifiers": "public", "return": "", "signature": " BlockChain(NetworkParameters params, Wallet wallet, BlockStore blockStore)", "full_signature": "public  BlockChain(NetworkParameters params, Wallet wallet, BlockStore blockStore)", "class_method_signature": "BlockChain.BlockChain(NetworkParameters params, Wallet wallet, BlockStore blockStore)", "testcase": false, "constructor": true}, {"identifier": "BlockChain", "parameters": "(NetworkParameters params, BlockStore blockStore)", "modifiers": "public", "return": "", "signature": " BlockChain(NetworkParameters params, BlockStore blockStore)", "full_signature": "public  BlockChain(NetworkParameters params, BlockStore blockStore)", "class_method_signature": "BlockChain.BlockChain(NetworkParameters params, BlockStore blockStore)", "testcase": false, "constructor": true}, {"identifier": "BlockChain", "parameters": "(NetworkParameters params, List<BlockChainListener> wallets,\n                      BlockStore blockStore)", "modifiers": "public", "return": "", "signature": " BlockChain(NetworkParameters params, List<BlockChainListener> wallets,\n                      BlockStore blockStore)", "full_signature": "public  BlockChain(NetworkParameters params, List<BlockChainListener> wallets,\n                      BlockStore blockStore)", "class_method_signature": "BlockChain.BlockChain(NetworkParameters params, List<BlockChainListener> wallets,\n                      BlockStore blockStore)", "testcase": false, "constructor": true}, {"identifier": "addToBlockStore", "parameters": "(StoredBlock storedPrev, Block blockHeader, TransactionOutputChanges txOutChanges)", "modifiers": "@Override protected", "return": "StoredBlock", "signature": "StoredBlock addToBlockStore(StoredBlock storedPrev, Block blockHeader, TransactionOutputChanges txOutChanges)", "full_signature": "@Override protected StoredBlock addToBlockStore(StoredBlock storedPrev, Block blockHeader, TransactionOutputChanges txOutChanges)", "class_method_signature": "BlockChain.addToBlockStore(StoredBlock storedPrev, Block blockHeader, TransactionOutputChanges txOutChanges)", "testcase": false, "constructor": false}, {"identifier": "addToBlockStore", "parameters": "(StoredBlock storedPrev, Block blockHeader)", "modifiers": "@Override protected", "return": "StoredBlock", "signature": "StoredBlock addToBlockStore(StoredBlock storedPrev, Block blockHeader)", "full_signature": "@Override protected StoredBlock addToBlockStore(StoredBlock storedPrev, Block blockHeader)", "class_method_signature": "BlockChain.addToBlockStore(StoredBlock storedPrev, Block blockHeader)", "testcase": false, "constructor": false}, {"identifier": "shouldVerifyTransactions", "parameters": "()", "modifiers": "@Override protected", "return": "boolean", "signature": "boolean shouldVerifyTransactions()", "full_signature": "@Override protected boolean shouldVerifyTransactions()", "class_method_signature": "BlockChain.shouldVerifyTransactions()", "testcase": false, "constructor": false}, {"identifier": "connectTransactions", "parameters": "(int height, Block block)", "modifiers": "@Override protected", "return": "TransactionOutputChanges", "signature": "TransactionOutputChanges connectTransactions(int height, Block block)", "full_signature": "@Override protected TransactionOutputChanges connectTransactions(int height, Block block)", "class_method_signature": "BlockChain.connectTransactions(int height, Block block)", "testcase": false, "constructor": false}, {"identifier": "connectTransactions", "parameters": "(StoredBlock newBlock)", "modifiers": "@Override protected", "return": "TransactionOutputChanges", "signature": "TransactionOutputChanges connectTransactions(StoredBlock newBlock)", "full_signature": "@Override protected TransactionOutputChanges connectTransactions(StoredBlock newBlock)", "class_method_signature": "BlockChain.connectTransactions(StoredBlock newBlock)", "testcase": false, "constructor": false}, {"identifier": "disconnectTransactions", "parameters": "(StoredBlock block)", "modifiers": "@Override protected", "return": "void", "signature": "void disconnectTransactions(StoredBlock block)", "full_signature": "@Override protected void disconnectTransactions(StoredBlock block)", "class_method_signature": "BlockChain.disconnectTransactions(StoredBlock block)", "testcase": false, "constructor": false}, {"identifier": "doSetChainHead", "parameters": "(StoredBlock chainHead)", "modifiers": "@Override protected", "return": "void", "signature": "void doSetChainHead(StoredBlock chainHead)", "full_signature": "@Override protected void doSetChainHead(StoredBlock chainHead)", "class_method_signature": "BlockChain.doSetChainHead(StoredBlock chainHead)", "testcase": false, "constructor": false}, {"identifier": "notSettingChainHead", "parameters": "()", "modifiers": "@Override protected", "return": "void", "signature": "void notSettingChainHead()", "full_signature": "@Override protected void notSettingChainHead()", "class_method_signature": "BlockChain.notSettingChainHead()", "testcase": false, "constructor": false}, {"identifier": "getStoredBlockInCurrentScope", "parameters": "(Sha256Hash hash)", "modifiers": "@Override protected", "return": "StoredBlock", "signature": "StoredBlock getStoredBlockInCurrentScope(Sha256Hash hash)", "full_signature": "@Override protected StoredBlock getStoredBlockInCurrentScope(Sha256Hash hash)", "class_method_signature": "BlockChain.getStoredBlockInCurrentScope(Sha256Hash hash)", "testcase": false, "constructor": false}, {"identifier": "add", "parameters": "(FilteredBlock block)", "modifiers": "@Override public", "return": "boolean", "signature": "boolean add(FilteredBlock block)", "full_signature": "@Override public boolean add(FilteredBlock block)", "class_method_signature": "BlockChain.add(FilteredBlock block)", "testcase": false, "constructor": false}], "file": "core/src/main/java/com/google/bitcoin/core/BlockChain.java"}, "focal_method": {"identifier": "add", "parameters": "(FilteredBlock block)", "modifiers": "@Override public", "return": "boolean", "body": "@Override\n    public boolean add(FilteredBlock block) throws VerificationException, PrunedException {\n        boolean success = super.add(block);\n        if (success) {\n            trackFilteredTransactions(block.getTransactionCount());\n        }\n        return success;\n    }", "signature": "boolean add(FilteredBlock block)", "full_signature": "@Override public boolean add(FilteredBlock block)", "class_method_signature": "BlockChain.add(FilteredBlock block)", "testcase": false, "constructor": false, "invocations": ["add", "trackFilteredTransactions", "getTransactionCount"]}, "repository": {"repo_id": 24363680, "url": "https://github.com/cannabiscoindev/cannabiscoinj", "language": "Java", "is_fork": false, "fork_count": 9, "stargazer_count": 5, "size": 10126, "license": "licensed"}}