{"test_class": {"identifier": "SqlViewUtilsTest", "superclass": "", "interfaces": "", "fields": [], "file": "dhis-2/dhis-services/dhis-service-administration/src/test/java/org/hisp/dhis/sqlview/SqlViewUtilsTest.java"}, "test_case": {"identifier": "testSubsituteSqlVariable", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testSubsituteSqlVariable()\n    {\n        String sql = \"select * from datavalue where level=${level} and id='${id}'\";\n\n        String expected = \"select * from datavalue where level=4 and id='${id}'\";\n\n        String actual = SqlViewUtils.substituteSqlVariable( sql, \"level\", \"4\" );\n\n        assertEquals( expected, actual );\n    }", "signature": "void testSubsituteSqlVariable()", "full_signature": "@Test public void testSubsituteSqlVariable()", "class_method_signature": "SqlViewUtilsTest.testSubsituteSqlVariable()", "testcase": true, "constructor": false, "invocations": ["substituteSqlVariable", "assertEquals"]}, "focal_class": {"identifier": "SqlViewUtils", "superclass": "", "interfaces": "", "fields": [{"original_string": "public static final String VARIABLE_EXPRESSION = \"\\\\$\\\\{(\\\\w+)\\\\}\";", "modifier": "public static final", "type": "String", "declarator": "VARIABLE_EXPRESSION = \"\\\\$\\\\{(\\\\w+)\\\\}\"", "var_name": "VARIABLE_EXPRESSION"}, {"original_string": "public static final Pattern VARIABLE_PATTERN = Pattern.compile( VARIABLE_EXPRESSION, Pattern.DOTALL );", "modifier": "public static final", "type": "Pattern", "declarator": "VARIABLE_PATTERN = Pattern.compile( VARIABLE_EXPRESSION, Pattern.DOTALL )", "var_name": "VARIABLE_PATTERN"}], "methods": [{"identifier": "getVariables", "parameters": "( String sql )", "modifiers": "public static", "return": "Set<String>", "signature": "Set<String> getVariables( String sql )", "full_signature": "public static Set<String> getVariables( String sql )", "class_method_signature": "SqlViewUtils.getVariables( String sql )", "testcase": false, "constructor": false}, {"identifier": "substituteSqlVariables", "parameters": "( String sql, Map<String, String> variables )", "modifiers": "public static", "return": "String", "signature": "String substituteSqlVariables( String sql, Map<String, String> variables )", "full_signature": "public static String substituteSqlVariables( String sql, Map<String, String> variables )", "class_method_signature": "SqlViewUtils.substituteSqlVariables( String sql, Map<String, String> variables )", "testcase": false, "constructor": false}, {"identifier": "substituteSqlVariable", "parameters": "( String sql, String name, String value )", "modifiers": "public static", "return": "String", "signature": "String substituteSqlVariable( String sql, String name, String value )", "full_signature": "public static String substituteSqlVariable( String sql, String name, String value )", "class_method_signature": "SqlViewUtils.substituteSqlVariable( String sql, String name, String value )", "testcase": false, "constructor": false}, {"identifier": "removeQuerySeparator", "parameters": "( String sql )", "modifiers": "public static", "return": "String", "signature": "String removeQuerySeparator( String sql )", "full_signature": "public static String removeQuerySeparator( String sql )", "class_method_signature": "SqlViewUtils.removeQuerySeparator( String sql )", "testcase": false, "constructor": false}], "file": "dhis-2/dhis-services/dhis-service-administration/src/main/java/org/hisp/dhis/sqlview/SqlViewUtils.java"}, "focal_method": {"identifier": "substituteSqlVariable", "parameters": "( String sql, String name, String value )", "modifiers": "public static", "return": "String", "body": "public static String substituteSqlVariable( String sql, String name, String value )\n    {\n        final String regex = \"\\\\$\\\\{(\" + name + \")\\\\}\";\n\n        if ( value != null && SqlView.isValidQueryValue( value ) )\n        {\n            return sql.replaceAll( regex, value );\n        }\n\n        return sql;\n    }", "signature": "String substituteSqlVariable( String sql, String name, String value )", "full_signature": "public static String substituteSqlVariable( String sql, String name, String value )", "class_method_signature": "SqlViewUtils.substituteSqlVariable( String sql, String name, String value )", "testcase": false, "constructor": false, "invocations": ["isValidQueryValue", "replaceAll"]}, "repository": {"repo_id": 66940520, "url": "https://github.com/dhis2/dhis2-core", "stars": 151, "created": "8/30/2016 12:57:05 PM +00:00", "updates": "2020-01-24T18:06:36+00:00", "fork": "False", "license": "licensed"}}