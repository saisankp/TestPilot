{"test_class": {"identifier": "OutputWriterHelperTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "@Rule\n    public TemporaryFolder folder = new TemporaryFolder();", "modifier": "@Rule\n    public", "type": "TemporaryFolder", "declarator": "folder = new TemporaryFolder()", "var_name": "folder"}, {"original_string": "@Rule\n    public TemporaryFolder outputFolder = new TemporaryFolder();", "modifier": "@Rule\n    public", "type": "TemporaryFolder", "declarator": "outputFolder = new TemporaryFolder()", "var_name": "outputFolder"}, {"original_string": "private TaskExecutionContext context;", "modifier": "private", "type": "TaskExecutionContext", "declarator": "context", "var_name": "context"}], "file": "sejda-core/src/test/java/org/sejda/core/support/io/OutputWriterHelperTest.java"}, "test_case": {"identifier": "copyFailsOverwrite", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void copyFailsOverwrite() throws IOException {\n        Map<String, File> files = new HashMap<String, File>();\n        files.put(\"newName\", folder.newFile());\n\n        File outFile = mock(File.class);\n        when(outFile.isFile()).thenReturn(Boolean.TRUE);\n        when(outFile.exists()).thenReturn(Boolean.TRUE);\n\n        try {\n            OutputWriterHelper.moveToFile(files, outFile, ExistingOutputPolicy.FAIL, context);\n            fail(\"Exception expected\");\n        } catch (IOException e) {\n            assertTrue(\"Different exception expected.\", e.getMessage().startsWith(\"Unable to write\"));\n        }\n    }", "signature": "void copyFailsOverwrite()", "full_signature": "@Test public void copyFailsOverwrite()", "class_method_signature": "OutputWriterHelperTest.copyFailsOverwrite()", "testcase": true, "constructor": false, "invocations": ["put", "newFile", "mock", "thenReturn", "when", "isFile", "thenReturn", "when", "exists", "moveToFile", "fail", "assertTrue", "startsWith", "getMessage"]}, "focal_class": {"identifier": "OutputWriterHelper", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final Logger LOG = LoggerFactory.getLogger(OutputWriterHelper.class);", "modifier": "private static final", "type": "Logger", "declarator": "LOG = LoggerFactory.getLogger(OutputWriterHelper.class)", "var_name": "LOG"}], "methods": [{"identifier": "OutputWriterHelper", "parameters": "()", "modifiers": "private", "return": "", "signature": " OutputWriterHelper()", "full_signature": "private  OutputWriterHelper()", "class_method_signature": "OutputWriterHelper.OutputWriterHelper()", "testcase": false, "constructor": true}, {"identifier": "moveToFile", "parameters": "(Map<String, File> files, File outputFile, ExistingOutputPolicy existingOutputPolicy,\n            TaskExecutionContext executionContext)", "modifiers": "static", "return": "void", "signature": "void moveToFile(Map<String, File> files, File outputFile, ExistingOutputPolicy existingOutputPolicy,\n            TaskExecutionContext executionContext)", "full_signature": "static void moveToFile(Map<String, File> files, File outputFile, ExistingOutputPolicy existingOutputPolicy,\n            TaskExecutionContext executionContext)", "class_method_signature": "OutputWriterHelper.moveToFile(Map<String, File> files, File outputFile, ExistingOutputPolicy existingOutputPolicy,\n            TaskExecutionContext executionContext)", "testcase": false, "constructor": false}, {"identifier": "moveToDirectory", "parameters": "(Map<String, File> files, File outputDirectory,\n            ExistingOutputPolicy existingOutputPolicy, TaskExecutionContext executionContext)", "modifiers": "static", "return": "void", "signature": "void moveToDirectory(Map<String, File> files, File outputDirectory,\n            ExistingOutputPolicy existingOutputPolicy, TaskExecutionContext executionContext)", "full_signature": "static void moveToDirectory(Map<String, File> files, File outputDirectory,\n            ExistingOutputPolicy existingOutputPolicy, TaskExecutionContext executionContext)", "class_method_signature": "OutputWriterHelper.moveToDirectory(Map<String, File> files, File outputDirectory,\n            ExistingOutputPolicy existingOutputPolicy, TaskExecutionContext executionContext)", "testcase": false, "constructor": false}, {"identifier": "moveFile", "parameters": "(File input, File output, ExistingOutputPolicy existingOutputPolicy,\n            TaskExecutionContext executionContext)", "modifiers": "static", "return": "void", "signature": "void moveFile(File input, File output, ExistingOutputPolicy existingOutputPolicy,\n            TaskExecutionContext executionContext)", "full_signature": "static void moveFile(File input, File output, ExistingOutputPolicy existingOutputPolicy,\n            TaskExecutionContext executionContext)", "class_method_signature": "OutputWriterHelper.moveFile(File input, File output, ExistingOutputPolicy existingOutputPolicy,\n            TaskExecutionContext executionContext)", "testcase": false, "constructor": false}, {"identifier": "doMoveFile", "parameters": "(File input, File output)", "modifiers": "private static", "return": "void", "signature": "void doMoveFile(File input, File output)", "full_signature": "private static void doMoveFile(File input, File output)", "class_method_signature": "OutputWriterHelper.doMoveFile(File input, File output)", "testcase": false, "constructor": false}, {"identifier": "finalName", "parameters": "(String filename, int totalFilesNumber)", "modifiers": "private static", "return": "String", "signature": "String finalName(String filename, int totalFilesNumber)", "full_signature": "private static String finalName(String filename, int totalFilesNumber)", "class_method_signature": "OutputWriterHelper.finalName(String filename, int totalFilesNumber)", "testcase": false, "constructor": false}, {"identifier": "copyToStreamZipped", "parameters": "(Map<String, File> files, OutputStream out)", "modifiers": "static", "return": "void", "signature": "void copyToStreamZipped(Map<String, File> files, OutputStream out)", "full_signature": "static void copyToStreamZipped(Map<String, File> files, OutputStream out)", "class_method_signature": "OutputWriterHelper.copyToStreamZipped(Map<String, File> files, OutputStream out)", "testcase": false, "constructor": false}, {"identifier": "copyToStream", "parameters": "(File file, OutputStream out)", "modifiers": "static", "return": "void", "signature": "void copyToStream(File file, OutputStream out)", "full_signature": "static void copyToStream(File file, OutputStream out)", "class_method_signature": "OutputWriterHelper.copyToStream(File file, OutputStream out)", "testcase": false, "constructor": false}, {"identifier": "delete", "parameters": "(File file)", "modifiers": "private static", "return": "void", "signature": "void delete(File file)", "full_signature": "private static void delete(File file)", "class_method_signature": "OutputWriterHelper.delete(File file)", "testcase": false, "constructor": false}], "file": "sejda-core/src/main/java/org/sejda/core/support/io/OutputWriterHelper.java"}, "focal_method": {"identifier": "moveToFile", "parameters": "(Map<String, File> files, File outputFile, ExistingOutputPolicy existingOutputPolicy,\n            TaskExecutionContext executionContext)", "modifiers": "static", "return": "void", "body": "static void moveToFile(Map<String, File> files, File outputFile, ExistingOutputPolicy existingOutputPolicy,\n            TaskExecutionContext executionContext) throws IOException {\n        if (outputFile.exists() && !outputFile.isFile()) {\n            throw new IOException(String.format(\"Wrong output destination %s, must be a file.\", outputFile));\n        }\n        if (files.size() != 1) {\n            throw new IOException(\n                    String.format(\"Wrong files map size %d, must be 1 to copy to the selected destination %s\",\n                            files.size(), outputFile));\n        }\n        for (Entry<String, File> entry : files.entrySet()) {\n            moveFile(entry.getValue(), outputFile, of(existingOutputPolicy).filter(p -> p != SKIP).orElseGet(() -> {\n                LOG.debug(\"Cannot use {} output policy for single output, replaced with {}\", SKIP, FAIL);\n                return FAIL;\n            }), executionContext);\n        }\n    }", "signature": "void moveToFile(Map<String, File> files, File outputFile, ExistingOutputPolicy existingOutputPolicy,\n            TaskExecutionContext executionContext)", "full_signature": "static void moveToFile(Map<String, File> files, File outputFile, ExistingOutputPolicy existingOutputPolicy,\n            TaskExecutionContext executionContext)", "class_method_signature": "OutputWriterHelper.moveToFile(Map<String, File> files, File outputFile, ExistingOutputPolicy existingOutputPolicy,\n            TaskExecutionContext executionContext)", "testcase": false, "constructor": false, "invocations": ["exists", "isFile", "format", "size", "format", "size", "entrySet", "moveFile", "getValue", "orElseGet", "filter", "of", "debug"]}, "repository": {"repo_id": 13146848, "url": "https://github.com/torakiki/sejda", "language": "Java", "is_fork": false, "fork_count": 47, "stargazer_count": 316, "size": 59670, "license": "licensed"}}