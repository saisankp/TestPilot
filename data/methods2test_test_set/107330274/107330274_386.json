{"test_class": {"identifier": "DefaultAppScaleManagerTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static Logger log = LoggerFactory.getLogger(DefaultAppScaleManagerTest.class);", "modifier": "private static", "type": "Logger", "declarator": "log = LoggerFactory.getLogger(DefaultAppScaleManagerTest.class)", "var_name": "log"}, {"original_string": "private CallMetadata callMetadata = CallMetadata.newBuilder().withCallerId(\"app scale test\").build();", "modifier": "private", "type": "CallMetadata", "declarator": "callMetadata = CallMetadata.newBuilder().withCallerId(\"app scale test\").build()", "var_name": "callMetadata"}], "file": "titus-server-master/src/test/java/com/netflix/titus/master/appscale/service/DefaultAppScaleManagerTest.java"}, "test_case": {"identifier": "checkBulkPolicyCreations", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void checkBulkPolicyCreations() {\n        AutoScalingPolicyTests.MockAlarmClient mockAlarmClient = new AutoScalingPolicyTests.MockAlarmClient();\n        AutoScalingPolicyTests.MockAppAutoScalingClient mockAppAutoScalingClient = new AutoScalingPolicyTests.MockAppAutoScalingClient();\n        InMemoryPolicyStore policyStore = new InMemoryPolicyStore();\n\n        final int totalJobs = 300;\n        List<String> jobIds = new ArrayList<>(totalJobs);\n        for (int i = 0; i < totalJobs; i++) {\n            String jobId = UUID.randomUUID().toString();\n            jobIds.add(jobId);\n        }\n\n        V3JobOperations v3JobOperations = mockV3OperationsForJobs(jobIds);\n        DefaultAppScaleManager appScaleManager = new DefaultAppScaleManager(policyStore, mockAlarmClient,\n                mockAppAutoScalingClient,\n                v3JobOperations,\n                new DefaultRegistry(),\n                AutoScalingPolicyTests.mockAppScaleManagerConfiguration(),\n                Schedulers.computation(),\n                mock(TitusRuntime.class));\n\n        final CountDownLatch latch = new CountDownLatch(totalJobs);\n        for (int i = 0; i < totalJobs; i++) {\n            final AutoScalingPolicy autoScalingPolicy = AutoScalingPolicyTests.buildStepScalingPolicy(jobIds.get(i));\n            appScaleManager.createAutoScalingPolicy(autoScalingPolicy).subscribe(pid -> {\n                log.info(\"Policy created {}\", pid);\n                latch.countDown();\n            });\n        }\n\n        await().timeout(30, TimeUnit.SECONDS).until(() -> mockAppAutoScalingClient.getNumPolicies() == totalJobs);\n    }", "signature": "void checkBulkPolicyCreations()", "full_signature": "@Test public void checkBulkPolicyCreations()", "class_method_signature": "DefaultAppScaleManagerTest.checkBulkPolicyCreations()", "testcase": true, "constructor": false, "invocations": ["toString", "randomUUID", "add", "mockV3OperationsForJobs", "mockAppScaleManagerConfiguration", "computation", "mock", "buildStepScalingPolicy", "get", "subscribe", "createAutoScalingPolicy", "info", "countDown", "until", "timeout", "await", "getNumPolicies"]}, "focal_class": {"identifier": "DefaultAppScaleManager", "superclass": "", "interfaces": "implements AppScaleManager", "fields": [{"original_string": "public static final long INITIAL_RETRY_DELAY_SEC = 5;", "modifier": "public static final", "type": "long", "declarator": "INITIAL_RETRY_DELAY_SEC = 5", "var_name": "INITIAL_RETRY_DELAY_SEC"}, {"original_string": "public static final long MAX_RETRY_DELAY_SEC = 30;", "modifier": "public static final", "type": "long", "declarator": "MAX_RETRY_DELAY_SEC = 30", "var_name": "MAX_RETRY_DELAY_SEC"}, {"original_string": "private static Logger logger = LoggerFactory.getLogger(DefaultAppScaleManager.class);", "modifier": "private static", "type": "Logger", "declarator": "logger = LoggerFactory.getLogger(DefaultAppScaleManager.class)", "var_name": "logger"}, {"original_string": "private static final long SHUTDOWN_TIMEOUT_MS = 5_000;", "modifier": "private static final", "type": "long", "declarator": "SHUTDOWN_TIMEOUT_MS = 5_000", "var_name": "SHUTDOWN_TIMEOUT_MS"}, {"original_string": "private static final String DEFAULT_JOB_GROUP_SEQ = \"v000\";", "modifier": "private static final", "type": "String", "declarator": "DEFAULT_JOB_GROUP_SEQ = \"v000\"", "var_name": "DEFAULT_JOB_GROUP_SEQ"}, {"original_string": "private static final int ASYNC_HANDLER_BUFFER_CAPACITY = 10_000;", "modifier": "private static final", "type": "int", "declarator": "ASYNC_HANDLER_BUFFER_CAPACITY = 10_000", "var_name": "ASYNC_HANDLER_BUFFER_CAPACITY"}, {"original_string": "private final AppScaleManagerMetrics metrics;", "modifier": "private final", "type": "AppScaleManagerMetrics", "declarator": "metrics", "var_name": "metrics"}, {"original_string": "private final SerializedSubject<AppScaleAction, AppScaleAction> appScaleActionsSubject;", "modifier": "private final", "type": "SerializedSubject<AppScaleAction, AppScaleAction>", "declarator": "appScaleActionsSubject", "var_name": "appScaleActionsSubject"}, {"original_string": "private final AppScalePolicyStore appScalePolicyStore;", "modifier": "private final", "type": "AppScalePolicyStore", "declarator": "appScalePolicyStore", "var_name": "appScalePolicyStore"}, {"original_string": "private final CloudAlarmClient cloudAlarmClient;", "modifier": "private final", "type": "CloudAlarmClient", "declarator": "cloudAlarmClient", "var_name": "cloudAlarmClient"}, {"original_string": "private final AppAutoScalingClient appAutoScalingClient;", "modifier": "private final", "type": "AppAutoScalingClient", "declarator": "appAutoScalingClient", "var_name": "appAutoScalingClient"}, {"original_string": "private final V3JobOperations v3JobOperations;", "modifier": "private final", "type": "V3JobOperations", "declarator": "v3JobOperations", "var_name": "v3JobOperations"}, {"original_string": "private final AppScaleManagerConfiguration appScaleManagerConfiguration;", "modifier": "private final", "type": "AppScaleManagerConfiguration", "declarator": "appScaleManagerConfiguration", "var_name": "appScaleManagerConfiguration"}, {"original_string": "private TitusRuntime titusRuntime;", "modifier": "private", "type": "TitusRuntime", "declarator": "titusRuntime", "var_name": "titusRuntime"}, {"original_string": "private volatile Map<String, AutoScalableTarget> scalableTargets;", "modifier": "private volatile", "type": "Map<String, AutoScalableTarget>", "declarator": "scalableTargets", "var_name": "scalableTargets"}, {"original_string": "private volatile Subscription reconcileFinishedJobsSub;", "modifier": "private volatile", "type": "Subscription", "declarator": "reconcileFinishedJobsSub", "var_name": "reconcileFinishedJobsSub"}, {"original_string": "private volatile Subscription reconcileAllPendingRequests;", "modifier": "private volatile", "type": "Subscription", "declarator": "reconcileAllPendingRequests", "var_name": "reconcileAllPendingRequests"}, {"original_string": "private volatile Subscription reconcileScalableTargetsSub;", "modifier": "private volatile", "type": "Subscription", "declarator": "reconcileScalableTargetsSub", "var_name": "reconcileScalableTargetsSub"}, {"original_string": "private volatile ExecutorService awsInteractionExecutor;", "modifier": "private volatile", "type": "ExecutorService", "declarator": "awsInteractionExecutor", "var_name": "awsInteractionExecutor"}, {"original_string": "private Subscription appScaleActionsSub;", "modifier": "private", "type": "Subscription", "declarator": "appScaleActionsSub", "var_name": "appScaleActionsSub"}], "methods": [{"identifier": "DefaultAppScaleManager", "parameters": "(AppScalePolicyStore appScalePolicyStore, CloudAlarmClient cloudAlarmClient,\n                                  AppAutoScalingClient applicationAutoScalingClient,\n                                  V3JobOperations v3JobOperations,\n                                  Registry registry,\n                                  AppScaleManagerConfiguration appScaleManagerConfiguration,\n                                  TitusRuntime titusRuntime)", "modifiers": "@Inject public", "return": "", "signature": " DefaultAppScaleManager(AppScalePolicyStore appScalePolicyStore, CloudAlarmClient cloudAlarmClient,\n                                  AppAutoScalingClient applicationAutoScalingClient,\n                                  V3JobOperations v3JobOperations,\n                                  Registry registry,\n                                  AppScaleManagerConfiguration appScaleManagerConfiguration,\n                                  TitusRuntime titusRuntime)", "full_signature": "@Inject public  DefaultAppScaleManager(AppScalePolicyStore appScalePolicyStore, CloudAlarmClient cloudAlarmClient,\n                                  AppAutoScalingClient applicationAutoScalingClient,\n                                  V3JobOperations v3JobOperations,\n                                  Registry registry,\n                                  AppScaleManagerConfiguration appScaleManagerConfiguration,\n                                  TitusRuntime titusRuntime)", "class_method_signature": "DefaultAppScaleManager.DefaultAppScaleManager(AppScalePolicyStore appScalePolicyStore, CloudAlarmClient cloudAlarmClient,\n                                  AppAutoScalingClient applicationAutoScalingClient,\n                                  V3JobOperations v3JobOperations,\n                                  Registry registry,\n                                  AppScaleManagerConfiguration appScaleManagerConfiguration,\n                                  TitusRuntime titusRuntime)", "testcase": false, "constructor": true}, {"identifier": "DefaultAppScaleManager", "parameters": "(AppScalePolicyStore appScalePolicyStore, CloudAlarmClient cloudAlarmClient,\n                                   AppAutoScalingClient applicationAutoScalingClient,\n                                   V3JobOperations v3JobOperations,\n                                   Registry registry,\n                                   AppScaleManagerConfiguration appScaleManagerConfiguration,\n                                   ExecutorService awsInteractionExecutor,\n                                   TitusRuntime titusRuntime)", "modifiers": "private", "return": "", "signature": " DefaultAppScaleManager(AppScalePolicyStore appScalePolicyStore, CloudAlarmClient cloudAlarmClient,\n                                   AppAutoScalingClient applicationAutoScalingClient,\n                                   V3JobOperations v3JobOperations,\n                                   Registry registry,\n                                   AppScaleManagerConfiguration appScaleManagerConfiguration,\n                                   ExecutorService awsInteractionExecutor,\n                                   TitusRuntime titusRuntime)", "full_signature": "private  DefaultAppScaleManager(AppScalePolicyStore appScalePolicyStore, CloudAlarmClient cloudAlarmClient,\n                                   AppAutoScalingClient applicationAutoScalingClient,\n                                   V3JobOperations v3JobOperations,\n                                   Registry registry,\n                                   AppScaleManagerConfiguration appScaleManagerConfiguration,\n                                   ExecutorService awsInteractionExecutor,\n                                   TitusRuntime titusRuntime)", "class_method_signature": "DefaultAppScaleManager.DefaultAppScaleManager(AppScalePolicyStore appScalePolicyStore, CloudAlarmClient cloudAlarmClient,\n                                   AppAutoScalingClient applicationAutoScalingClient,\n                                   V3JobOperations v3JobOperations,\n                                   Registry registry,\n                                   AppScaleManagerConfiguration appScaleManagerConfiguration,\n                                   ExecutorService awsInteractionExecutor,\n                                   TitusRuntime titusRuntime)", "testcase": false, "constructor": true}, {"identifier": "DefaultAppScaleManager", "parameters": "(AppScalePolicyStore appScalePolicyStore, CloudAlarmClient cloudAlarmClient,\n                                  AppAutoScalingClient applicationAutoScalingClient,\n                                  V3JobOperations v3JobOperations,\n                                  Registry registry,\n                                  AppScaleManagerConfiguration appScaleManagerConfiguration,\n                                  Scheduler awsInteractionScheduler,\n                                  TitusRuntime titusRuntime)", "modifiers": "@VisibleForTesting public", "return": "", "signature": " DefaultAppScaleManager(AppScalePolicyStore appScalePolicyStore, CloudAlarmClient cloudAlarmClient,\n                                  AppAutoScalingClient applicationAutoScalingClient,\n                                  V3JobOperations v3JobOperations,\n                                  Registry registry,\n                                  AppScaleManagerConfiguration appScaleManagerConfiguration,\n                                  Scheduler awsInteractionScheduler,\n                                  TitusRuntime titusRuntime)", "full_signature": "@VisibleForTesting public  DefaultAppScaleManager(AppScalePolicyStore appScalePolicyStore, CloudAlarmClient cloudAlarmClient,\n                                  AppAutoScalingClient applicationAutoScalingClient,\n                                  V3JobOperations v3JobOperations,\n                                  Registry registry,\n                                  AppScaleManagerConfiguration appScaleManagerConfiguration,\n                                  Scheduler awsInteractionScheduler,\n                                  TitusRuntime titusRuntime)", "class_method_signature": "DefaultAppScaleManager.DefaultAppScaleManager(AppScalePolicyStore appScalePolicyStore, CloudAlarmClient cloudAlarmClient,\n                                  AppAutoScalingClient applicationAutoScalingClient,\n                                  V3JobOperations v3JobOperations,\n                                  Registry registry,\n                                  AppScaleManagerConfiguration appScaleManagerConfiguration,\n                                  Scheduler awsInteractionScheduler,\n                                  TitusRuntime titusRuntime)", "testcase": false, "constructor": true}, {"identifier": "enterActiveMode", "parameters": "()", "modifiers": "@Activator public", "return": "Completable", "signature": "Completable enterActiveMode()", "full_signature": "@Activator public Completable enterActiveMode()", "class_method_signature": "DefaultAppScaleManager.enterActiveMode()", "testcase": false, "constructor": false}, {"identifier": "shutdown", "parameters": "()", "modifiers": "@PreDestroy public", "return": "void", "signature": "void shutdown()", "full_signature": "@PreDestroy public void shutdown()", "class_method_signature": "DefaultAppScaleManager.shutdown()", "testcase": false, "constructor": false}, {"identifier": "checkForScalingPolicyActions", "parameters": "()", "modifiers": "private", "return": "Observable<AutoScalingPolicy>", "signature": "Observable<AutoScalingPolicy> checkForScalingPolicyActions()", "full_signature": "private Observable<AutoScalingPolicy> checkForScalingPolicyActions()", "class_method_signature": "DefaultAppScaleManager.checkForScalingPolicyActions()", "testcase": false, "constructor": false}, {"identifier": "reconcileFinishedJobs", "parameters": "()", "modifiers": "private", "return": "Observable<String>", "signature": "Observable<String> reconcileFinishedJobs()", "full_signature": "private Observable<String> reconcileFinishedJobs()", "class_method_signature": "DefaultAppScaleManager.reconcileFinishedJobs()", "testcase": false, "constructor": false}, {"identifier": "reconcileScalableTargets", "parameters": "()", "modifiers": "private", "return": "Observable<String>", "signature": "Observable<String> reconcileScalableTargets()", "full_signature": "private Observable<String> reconcileScalableTargets()", "class_method_signature": "DefaultAppScaleManager.reconcileScalableTargets()", "testcase": false, "constructor": false}, {"identifier": "v3LiveStreamTargetUpdates", "parameters": "()", "modifiers": "", "return": "Observable<String>", "signature": "Observable<String> v3LiveStreamTargetUpdates()", "full_signature": " Observable<String> v3LiveStreamTargetUpdates()", "class_method_signature": "DefaultAppScaleManager.v3LiveStreamTargetUpdates()", "testcase": false, "constructor": false}, {"identifier": "v3LiveStreamPolicyCleanup", "parameters": "()", "modifiers": "private", "return": "Observable<String>", "signature": "Observable<String> v3LiveStreamPolicyCleanup()", "full_signature": "private Observable<String> v3LiveStreamPolicyCleanup()", "class_method_signature": "DefaultAppScaleManager.v3LiveStreamPolicyCleanup()", "testcase": false, "constructor": false}, {"identifier": "createAutoScalingPolicy", "parameters": "(AutoScalingPolicy autoScalingPolicy)", "modifiers": "@Override public", "return": "Observable<String>", "signature": "Observable<String> createAutoScalingPolicy(AutoScalingPolicy autoScalingPolicy)", "full_signature": "@Override public Observable<String> createAutoScalingPolicy(AutoScalingPolicy autoScalingPolicy)", "class_method_signature": "DefaultAppScaleManager.createAutoScalingPolicy(AutoScalingPolicy autoScalingPolicy)", "testcase": false, "constructor": false}, {"identifier": "updateAutoScalingPolicy", "parameters": "(AutoScalingPolicy autoScalingPolicy)", "modifiers": "@Override public", "return": "Completable", "signature": "Completable updateAutoScalingPolicy(AutoScalingPolicy autoScalingPolicy)", "full_signature": "@Override public Completable updateAutoScalingPolicy(AutoScalingPolicy autoScalingPolicy)", "class_method_signature": "DefaultAppScaleManager.updateAutoScalingPolicy(AutoScalingPolicy autoScalingPolicy)", "testcase": false, "constructor": false}, {"identifier": "getScalingPoliciesForJob", "parameters": "(String jobId)", "modifiers": "@Override public", "return": "Observable<AutoScalingPolicy>", "signature": "Observable<AutoScalingPolicy> getScalingPoliciesForJob(String jobId)", "full_signature": "@Override public Observable<AutoScalingPolicy> getScalingPoliciesForJob(String jobId)", "class_method_signature": "DefaultAppScaleManager.getScalingPoliciesForJob(String jobId)", "testcase": false, "constructor": false}, {"identifier": "getScalingPolicy", "parameters": "(String policyRefId)", "modifiers": "@Override public", "return": "Observable<AutoScalingPolicy>", "signature": "Observable<AutoScalingPolicy> getScalingPolicy(String policyRefId)", "full_signature": "@Override public Observable<AutoScalingPolicy> getScalingPolicy(String policyRefId)", "class_method_signature": "DefaultAppScaleManager.getScalingPolicy(String policyRefId)", "testcase": false, "constructor": false}, {"identifier": "getAllScalingPolicies", "parameters": "()", "modifiers": "@Override public", "return": "Observable<AutoScalingPolicy>", "signature": "Observable<AutoScalingPolicy> getAllScalingPolicies()", "full_signature": "@Override public Observable<AutoScalingPolicy> getAllScalingPolicies()", "class_method_signature": "DefaultAppScaleManager.getAllScalingPolicies()", "testcase": false, "constructor": false}, {"identifier": "removeAutoScalingPolicy", "parameters": "(String policyRefId)", "modifiers": "@Override public", "return": "Completable", "signature": "Completable removeAutoScalingPolicy(String policyRefId)", "full_signature": "@Override public Completable removeAutoScalingPolicy(String policyRefId)", "class_method_signature": "DefaultAppScaleManager.removeAutoScalingPolicy(String policyRefId)", "testcase": false, "constructor": false}, {"identifier": "removePoliciesForJob", "parameters": "(String jobId)", "modifiers": "private", "return": "Completable", "signature": "Completable removePoliciesForJob(String jobId)", "full_signature": "private Completable removePoliciesForJob(String jobId)", "class_method_signature": "DefaultAppScaleManager.removePoliciesForJob(String jobId)", "testcase": false, "constructor": false}, {"identifier": "shouldRefreshScalableTargetForJob", "parameters": "(String jobId, JobScalingConstraints jobScalingConstraints)", "modifiers": "private", "return": "boolean", "signature": "boolean shouldRefreshScalableTargetForJob(String jobId, JobScalingConstraints jobScalingConstraints)", "full_signature": "private boolean shouldRefreshScalableTargetForJob(String jobId, JobScalingConstraints jobScalingConstraints)", "class_method_signature": "DefaultAppScaleManager.shouldRefreshScalableTargetForJob(String jobId, JobScalingConstraints jobScalingConstraints)", "testcase": false, "constructor": false}, {"identifier": "isJobActive", "parameters": "(String jobId)", "modifiers": "private", "return": "boolean", "signature": "boolean isJobActive(String jobId)", "full_signature": "private boolean isJobActive(String jobId)", "class_method_signature": "DefaultAppScaleManager.isJobActive(String jobId)", "testcase": false, "constructor": false}, {"identifier": "saveStatusOnError", "parameters": "(Throwable e)", "modifiers": "private", "return": "Completable", "signature": "Completable saveStatusOnError(Throwable e)", "full_signature": "private Completable saveStatusOnError(Throwable e)", "class_method_signature": "DefaultAppScaleManager.saveStatusOnError(Throwable e)", "testcase": false, "constructor": false}, {"identifier": "getJobScalingConstraints", "parameters": "(String policyRefId, String jobId)", "modifiers": "private", "return": "JobScalingConstraints", "signature": "JobScalingConstraints getJobScalingConstraints(String policyRefId, String jobId)", "full_signature": "private JobScalingConstraints getJobScalingConstraints(String policyRefId, String jobId)", "class_method_signature": "DefaultAppScaleManager.getJobScalingConstraints(String policyRefId, String jobId)", "testcase": false, "constructor": false}, {"identifier": "buildAutoScalingGroup", "parameters": "(String jobId)", "modifiers": "private", "return": "String", "signature": "String buildAutoScalingGroup(String jobId)", "full_signature": "private String buildAutoScalingGroup(String jobId)", "class_method_signature": "DefaultAppScaleManager.buildAutoScalingGroup(String jobId)", "testcase": false, "constructor": false}, {"identifier": "buildAutoScalingGroupV3", "parameters": "(JobDescriptor<?> jobDescriptor)", "modifiers": "@VisibleForTesting static", "return": "String", "signature": "String buildAutoScalingGroupV3(JobDescriptor<?> jobDescriptor)", "full_signature": "@VisibleForTesting static String buildAutoScalingGroupV3(JobDescriptor<?> jobDescriptor)", "class_method_signature": "DefaultAppScaleManager.buildAutoScalingGroupV3(JobDescriptor<?> jobDescriptor)", "testcase": false, "constructor": false}, {"identifier": "addScalableTargetIfNew", "parameters": "(String jobId)", "modifiers": "private", "return": "void", "signature": "void addScalableTargetIfNew(String jobId)", "full_signature": "private void addScalableTargetIfNew(String jobId)", "class_method_signature": "DefaultAppScaleManager.addScalableTargetIfNew(String jobId)", "testcase": false, "constructor": false}, {"identifier": "extractAutoScalePolicyException", "parameters": "(Throwable exception)", "modifiers": "static", "return": "Optional<AutoScalePolicyException>", "signature": "Optional<AutoScalePolicyException> extractAutoScalePolicyException(Throwable exception)", "full_signature": "static Optional<AutoScalePolicyException> extractAutoScalePolicyException(Throwable exception)", "class_method_signature": "DefaultAppScaleManager.extractAutoScalePolicyException(Throwable exception)", "testcase": false, "constructor": false}, {"identifier": "updateScalableTargetWorkflow", "parameters": "(String policyRefId, String jobId)", "modifiers": "private", "return": "Observable<AutoScalableTarget>", "signature": "Observable<AutoScalableTarget> updateScalableTargetWorkflow(String policyRefId, String jobId)", "full_signature": "private Observable<AutoScalableTarget> updateScalableTargetWorkflow(String policyRefId, String jobId)", "class_method_signature": "DefaultAppScaleManager.updateScalableTargetWorkflow(String policyRefId, String jobId)", "testcase": false, "constructor": false}, {"identifier": "createOrUpdateScalingPolicyWorkflow", "parameters": "(AutoScalingPolicy inputAutoScalingPolicy)", "modifiers": "private", "return": "Observable<String>", "signature": "Observable<String> createOrUpdateScalingPolicyWorkflow(AutoScalingPolicy inputAutoScalingPolicy)", "full_signature": "private Observable<String> createOrUpdateScalingPolicyWorkflow(AutoScalingPolicy inputAutoScalingPolicy)", "class_method_signature": "DefaultAppScaleManager.createOrUpdateScalingPolicyWorkflow(AutoScalingPolicy inputAutoScalingPolicy)", "testcase": false, "constructor": false}, {"identifier": "deleteScalingPolicyWorkflow", "parameters": "(AutoScalingPolicy policyToBeDeleted)", "modifiers": "private", "return": "Observable<String>", "signature": "Observable<String> deleteScalingPolicyWorkflow(AutoScalingPolicy policyToBeDeleted)", "full_signature": "private Observable<String> deleteScalingPolicyWorkflow(AutoScalingPolicy policyToBeDeleted)", "class_method_signature": "DefaultAppScaleManager.deleteScalingPolicyWorkflow(AutoScalingPolicy policyToBeDeleted)", "testcase": false, "constructor": false}, {"identifier": "sendUpdateTargetAction", "parameters": "(AutoScalingPolicy autoScalingPolicy)", "modifiers": "private", "return": "AppScaleAction", "signature": "AppScaleAction sendUpdateTargetAction(AutoScalingPolicy autoScalingPolicy)", "full_signature": "private AppScaleAction sendUpdateTargetAction(AutoScalingPolicy autoScalingPolicy)", "class_method_signature": "DefaultAppScaleManager.sendUpdateTargetAction(AutoScalingPolicy autoScalingPolicy)", "testcase": false, "constructor": false}, {"identifier": "sendCreatePolicyAction", "parameters": "(AutoScalingPolicy autoScalingPolicy)", "modifiers": "private", "return": "AppScaleAction", "signature": "AppScaleAction sendCreatePolicyAction(AutoScalingPolicy autoScalingPolicy)", "full_signature": "private AppScaleAction sendCreatePolicyAction(AutoScalingPolicy autoScalingPolicy)", "class_method_signature": "DefaultAppScaleManager.sendCreatePolicyAction(AutoScalingPolicy autoScalingPolicy)", "testcase": false, "constructor": false}, {"identifier": "sendDeletePolicyAction", "parameters": "(AutoScalingPolicy autoScalingPolicy)", "modifiers": "private", "return": "AppScaleAction", "signature": "AppScaleAction sendDeletePolicyAction(AutoScalingPolicy autoScalingPolicy)", "full_signature": "private AppScaleAction sendDeletePolicyAction(AutoScalingPolicy autoScalingPolicy)", "class_method_signature": "DefaultAppScaleManager.sendDeletePolicyAction(AutoScalingPolicy autoScalingPolicy)", "testcase": false, "constructor": false}, {"identifier": "isPolicyCreationError", "parameters": "(AutoScalePolicyException autoScalePolicyException)", "modifiers": "private", "return": "Boolean", "signature": "Boolean isPolicyCreationError(AutoScalePolicyException autoScalePolicyException)", "full_signature": "private Boolean isPolicyCreationError(AutoScalePolicyException autoScalePolicyException)", "class_method_signature": "DefaultAppScaleManager.isPolicyCreationError(AutoScalePolicyException autoScalePolicyException)", "testcase": false, "constructor": false}], "file": "titus-server-master/src/main/java/com/netflix/titus/master/appscale/service/DefaultAppScaleManager.java"}, "focal_method": {"identifier": "createAutoScalingPolicy", "parameters": "(AutoScalingPolicy autoScalingPolicy)", "modifiers": "@Override public", "return": "Observable<String>", "body": "@Override\n    public Observable<String> createAutoScalingPolicy(AutoScalingPolicy autoScalingPolicy) {\n        if (autoScalingPolicy.getJobId() == null || autoScalingPolicy.getPolicyConfiguration() == null) {\n            return Observable.error(AutoScalePolicyException.invalidScalingPolicy(autoScalingPolicy.getRefId(),\n                    String.format(\"JobID Or PolicyConfiguration missing for %s\", autoScalingPolicy.getRefId())));\n        }\n\n        return appScalePolicyStore.storePolicy(autoScalingPolicy)\n                .map(policyRefId -> {\n                    addScalableTargetIfNew(autoScalingPolicy.getJobId());\n                    AutoScalingPolicy newPolicy = AutoScalingPolicy.newBuilder().withAutoScalingPolicy(autoScalingPolicy).withRefId(policyRefId).build();\n                    sendCreatePolicyAction(newPolicy);\n                    metrics.reportPolicyStatusTransition(newPolicy, PolicyStatus.Pending);\n                    return policyRefId;\n                });\n    }", "signature": "Observable<String> createAutoScalingPolicy(AutoScalingPolicy autoScalingPolicy)", "full_signature": "@Override public Observable<String> createAutoScalingPolicy(AutoScalingPolicy autoScalingPolicy)", "class_method_signature": "DefaultAppScaleManager.createAutoScalingPolicy(AutoScalingPolicy autoScalingPolicy)", "testcase": false, "constructor": false, "invocations": ["getJobId", "getPolicyConfiguration", "error", "invalidScalingPolicy", "getRefId", "format", "getRefId", "map", "storePolicy", "addScalableTargetIfNew", "getJobId", "build", "withRefId", "withAutoScalingPolicy", "newBuilder", "sendCreatePolicyAction", "reportPolicyStatusTransition"]}, "repository": {"repo_id": 107330274, "url": "https://github.com/Netflix/titus-control-plane", "stars": 241, "created": "10/17/2017 10:20:55 PM +00:00", "updates": "2020-01-25T13:01:05+00:00", "fork": "False", "license": "licensed"}}