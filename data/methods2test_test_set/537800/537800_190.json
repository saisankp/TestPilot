{"test_class": {"identifier": "UniformSnapshotTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private final Snapshot snapshot = new UniformSnapshot(new long[]{5, 1, 2, 3, 4});", "modifier": "private final", "type": "Snapshot", "declarator": "snapshot = new UniformSnapshot(new long[]{5, 1, 2, 3, 4})", "var_name": "snapshot"}], "file": "metrics-core/src/test/java/com/codahale/metrics/UniformSnapshotTest.java"}, "test_case": {"identifier": "correctlyCreatedFromCollectionWithWeakIterator", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void correctlyCreatedFromCollectionWithWeakIterator() throws Exception {\n        final ConcurrentSkipListSet<Long> values = new ConcurrentSkipListSet<>();\n\n        // Create a latch to make sure that the background thread has started and\n        // pushed some data to the collection.\n        final CountDownLatch latch = new CountDownLatch(10);\n        final Thread backgroundThread = new Thread(() -> {\n            final Random random = new Random();\n            // Update the collection in the loop to trigger a potential `ArrayOutOfBoundException`\n            // and verify that the snapshot doesn't make assumptions about the size of the iterator.\n            while (!Thread.currentThread().isInterrupted()) {\n                values.add(random.nextLong());\n                latch.countDown();\n            }\n        });\n        backgroundThread.start();\n\n        try {\n            latch.await(5, TimeUnit.SECONDS);\n            assertThat(latch.getCount()).isEqualTo(0);\n\n            // Create a snapshot while the  collection is being updated.\n            final Snapshot snapshot = new UniformSnapshot(values);\n            assertThat(snapshot.getValues().length).isGreaterThanOrEqualTo(10);\n        } finally {\n            backgroundThread.interrupt();\n        }\n    }", "signature": "void correctlyCreatedFromCollectionWithWeakIterator()", "full_signature": "@Test public void correctlyCreatedFromCollectionWithWeakIterator()", "class_method_signature": "UniformSnapshotTest.correctlyCreatedFromCollectionWithWeakIterator()", "testcase": true, "constructor": false, "invocations": ["isInterrupted", "currentThread", "add", "nextLong", "countDown", "start", "await", "isEqualTo", "assertThat", "getCount", "isGreaterThanOrEqualTo", "assertThat", "getValues", "interrupt"]}, "focal_class": {"identifier": "UniformSnapshot", "superclass": "extends Snapshot", "interfaces": "", "fields": [{"original_string": "private final long[] values;", "modifier": "private final", "type": "long[]", "declarator": "values", "var_name": "values"}], "methods": [{"identifier": "UniformSnapshot", "parameters": "(Collection<Long> values)", "modifiers": "public", "return": "", "signature": " UniformSnapshot(Collection<Long> values)", "full_signature": "public  UniformSnapshot(Collection<Long> values)", "class_method_signature": "UniformSnapshot.UniformSnapshot(Collection<Long> values)", "testcase": false, "constructor": true}, {"identifier": "UniformSnapshot", "parameters": "(long[] values)", "modifiers": "public", "return": "", "signature": " UniformSnapshot(long[] values)", "full_signature": "public  UniformSnapshot(long[] values)", "class_method_signature": "UniformSnapshot.UniformSnapshot(long[] values)", "testcase": false, "constructor": true}, {"identifier": "getValue", "parameters": "(double quantile)", "modifiers": "@Override public", "return": "double", "signature": "double getValue(double quantile)", "full_signature": "@Override public double getValue(double quantile)", "class_method_signature": "UniformSnapshot.getValue(double quantile)", "testcase": false, "constructor": false}, {"identifier": "size", "parameters": "()", "modifiers": "@Override public", "return": "int", "signature": "int size()", "full_signature": "@Override public int size()", "class_method_signature": "UniformSnapshot.size()", "testcase": false, "constructor": false}, {"identifier": "getValues", "parameters": "()", "modifiers": "@Override public", "return": "long[]", "signature": "long[] getValues()", "full_signature": "@Override public long[] getValues()", "class_method_signature": "UniformSnapshot.getValues()", "testcase": false, "constructor": false}, {"identifier": "getMax", "parameters": "()", "modifiers": "@Override public", "return": "long", "signature": "long getMax()", "full_signature": "@Override public long getMax()", "class_method_signature": "UniformSnapshot.getMax()", "testcase": false, "constructor": false}, {"identifier": "getMin", "parameters": "()", "modifiers": "@Override public", "return": "long", "signature": "long getMin()", "full_signature": "@Override public long getMin()", "class_method_signature": "UniformSnapshot.getMin()", "testcase": false, "constructor": false}, {"identifier": "getMean", "parameters": "()", "modifiers": "@Override public", "return": "double", "signature": "double getMean()", "full_signature": "@Override public double getMean()", "class_method_signature": "UniformSnapshot.getMean()", "testcase": false, "constructor": false}, {"identifier": "getStdDev", "parameters": "()", "modifiers": "@Override public", "return": "double", "signature": "double getStdDev()", "full_signature": "@Override public double getStdDev()", "class_method_signature": "UniformSnapshot.getStdDev()", "testcase": false, "constructor": false}, {"identifier": "dump", "parameters": "(OutputStream output)", "modifiers": "@Override public", "return": "void", "signature": "void dump(OutputStream output)", "full_signature": "@Override public void dump(OutputStream output)", "class_method_signature": "UniformSnapshot.dump(OutputStream output)", "testcase": false, "constructor": false}], "file": "metrics-core/src/main/java/com/codahale/metrics/UniformSnapshot.java"}, "focal_method": {"identifier": "getValues", "parameters": "()", "modifiers": "@Override public", "return": "long[]", "body": "@Override\n    public long[] getValues() {\n        return Arrays.copyOf(values, values.length);\n    }", "signature": "long[] getValues()", "full_signature": "@Override public long[] getValues()", "class_method_signature": "UniformSnapshot.getValues()", "testcase": false, "constructor": false, "invocations": ["copyOf"]}, "repository": {"repo_id": 537800, "url": "https://github.com/dropwizard/metrics", "stars": 6879, "created": "2/26/2010 7:44:42 PM +00:00", "updates": "2020-01-26T22:33:14+00:00", "fork": "False", "license": "licensed"}}