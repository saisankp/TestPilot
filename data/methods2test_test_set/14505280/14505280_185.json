{"test_class": {"identifier": "CacheFilterTest", "superclass": "", "interfaces": "", "fields": [], "file": "common-servlet/src/test/java/org/geomajas/servlet/CacheFilterTest.java"}, "test_case": {"identifier": "testShouldCompress", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n\tpublic void testShouldCompress() {\n\t\tCacheFilter cf = new CacheFilter();\n\t\tAssert.assertTrue(cf.shouldCompress(\"/blabla.js\"));\n\t\tAssert.assertTrue(cf.shouldCompress(\"/blabla.html\"));\n\t\tAssert.assertTrue(cf.shouldCompress(\"/blabla.css\"));\n\t\tAssert.assertFalse(cf.shouldCompress(\"/blabla.jpg\"));\n\t\tAssert.assertFalse(cf.shouldCompress(\"/blabla.jpeg\"));\n\t\tAssert.assertFalse(cf.shouldCompress(\"/blabla.gif\"));\n\t\tAssert.assertFalse(cf.shouldCompress(\"/blabla.png\"));\n\t\tAssert.assertTrue(cf.shouldCompress(\"/blabla.JS\"));\n\t\tAssert.assertTrue(cf.shouldCompress(\"/blabla.HtML\"));\n\t\tAssert.assertTrue(cf.shouldCompress(\"/blabla.CsS\"));\n\t\tAssert.assertFalse(cf.shouldCompress(\"/blabla.JPG\"));\n\t\tAssert.assertFalse(cf.shouldCompress(\"/blabla.JPeG\"));\n\t\tAssert.assertFalse(cf.shouldCompress(\"/blabla.GIF\"));\n\t\tAssert.assertFalse(cf.shouldCompress(\"/blabla.PNG\"));\n\t}", "signature": "void testShouldCompress()", "full_signature": "@Test public void testShouldCompress()", "class_method_signature": "CacheFilterTest.testShouldCompress()", "testcase": true, "constructor": false, "invocations": ["assertTrue", "shouldCompress", "assertTrue", "shouldCompress", "assertTrue", "shouldCompress", "assertFalse", "shouldCompress", "assertFalse", "shouldCompress", "assertFalse", "shouldCompress", "assertFalse", "shouldCompress", "assertTrue", "shouldCompress", "assertTrue", "shouldCompress", "assertTrue", "shouldCompress", "assertFalse", "shouldCompress", "assertFalse", "shouldCompress", "assertFalse", "shouldCompress", "assertFalse", "shouldCompress"]}, "focal_class": {"identifier": "CacheFilter", "superclass": "", "interfaces": "implements Filter", "fields": [{"original_string": "public static final String CACHE_DURATION_IN_SECONDS = \"cacheDurationInSeconds\";", "modifier": "public static final", "type": "String", "declarator": "CACHE_DURATION_IN_SECONDS = \"cacheDurationInSeconds\"", "var_name": "CACHE_DURATION_IN_SECONDS"}, {"original_string": "public static final String CACHE_IDENTIFIERS = \"cacheIdentifiers\";", "modifier": "public static final", "type": "String", "declarator": "CACHE_IDENTIFIERS = \"cacheIdentifiers\"", "var_name": "CACHE_IDENTIFIERS"}, {"original_string": "public static final String CACHE_SUFFIXES = \"cacheSuffixes\";", "modifier": "public static final", "type": "String", "declarator": "CACHE_SUFFIXES = \"cacheSuffixes\"", "var_name": "CACHE_SUFFIXES"}, {"original_string": "public static final String NO_CACHE_IDENTIFIERS = \"noCacheIdentifiers\";", "modifier": "public static final", "type": "String", "declarator": "NO_CACHE_IDENTIFIERS = \"noCacheIdentifiers\"", "var_name": "NO_CACHE_IDENTIFIERS"}, {"original_string": "public static final String NO_CACHE_SUFFIXES = \"noCacheSuffixes\";", "modifier": "public static final", "type": "String", "declarator": "NO_CACHE_SUFFIXES = \"noCacheSuffixes\"", "var_name": "NO_CACHE_SUFFIXES"}, {"original_string": "public static final String ZIP_SUFFIXES = \"zipSuffixes\";", "modifier": "public static final", "type": "String", "declarator": "ZIP_SUFFIXES = \"zipSuffixes\"", "var_name": "ZIP_SUFFIXES"}, {"original_string": "public static final String SKIP_PREFIXES = \"skipPrefixes\";", "modifier": "public static final", "type": "String", "declarator": "SKIP_PREFIXES = \"skipPrefixes\"", "var_name": "SKIP_PREFIXES"}, {"original_string": "public static final String PARAMETER_SPLIT_REGEX = \"[\\\\s,]+\";", "modifier": "public static final", "type": "String", "declarator": "PARAMETER_SPLIT_REGEX = \"[\\\\s,]+\"", "var_name": "PARAMETER_SPLIT_REGEX"}, {"original_string": "public static final String LOCALHOST_NAME = \"localhost\";", "modifier": "public static final", "type": "String", "declarator": "LOCALHOST_NAME = \"localhost\"", "var_name": "LOCALHOST_NAME"}, {"original_string": "public static final String LOCALHOST_IP_V4 = \"127.0.0.1\";", "modifier": "public static final", "type": "String", "declarator": "LOCALHOST_IP_V4 = \"127.0.0.1\"", "var_name": "LOCALHOST_IP_V4"}, {"original_string": "public static final String LOCALHOST_IP_V6 = \"::1\";", "modifier": "public static final", "type": "String", "declarator": "LOCALHOST_IP_V6 = \"::1\"", "var_name": "LOCALHOST_IP_V6"}, {"original_string": "private static final long MS_IN_S = 1000;", "modifier": "private static final", "type": "long", "declarator": "MS_IN_S = 1000", "var_name": "MS_IN_S"}, {"original_string": "private static final long S_IN_M = 60;", "modifier": "private static final", "type": "long", "declarator": "S_IN_M = 60", "var_name": "S_IN_M"}, {"original_string": "private static final long M_IN_H = 60;", "modifier": "private static final", "type": "long", "declarator": "M_IN_H = 60", "var_name": "M_IN_H"}, {"original_string": "private static final long H_IN_DAY = 24;", "modifier": "private static final", "type": "long", "declarator": "H_IN_DAY = 24", "var_name": "H_IN_DAY"}, {"original_string": "private static final long DAYS_IN_YEAR = 365;", "modifier": "private static final", "type": "long", "declarator": "DAYS_IN_YEAR = 365", "var_name": "DAYS_IN_YEAR"}, {"original_string": "private long cacheDurationInSeconds = S_IN_M * M_IN_H * H_IN_DAY * DAYS_IN_YEAR;", "modifier": "private", "type": "long", "declarator": "cacheDurationInSeconds = S_IN_M * M_IN_H * H_IN_DAY * DAYS_IN_YEAR", "var_name": "cacheDurationInSeconds"}, {"original_string": "private long cacheDurationInMilliSeconds = cacheDurationInSeconds * MS_IN_S;", "modifier": "private", "type": "long", "declarator": "cacheDurationInMilliSeconds = cacheDurationInSeconds * MS_IN_S", "var_name": "cacheDurationInMilliSeconds"}, {"original_string": "private static final String HTTP_LAST_MODIFIED_HEADER = \"Last-Modified\";", "modifier": "private static final", "type": "String", "declarator": "HTTP_LAST_MODIFIED_HEADER = \"Last-Modified\"", "var_name": "HTTP_LAST_MODIFIED_HEADER"}, {"original_string": "private static final String HTTP_ACCEPT_ENCODING_HEADER = \"Accept-Encoding\";", "modifier": "private static final", "type": "String", "declarator": "HTTP_ACCEPT_ENCODING_HEADER = \"Accept-Encoding\"", "var_name": "HTTP_ACCEPT_ENCODING_HEADER"}, {"original_string": "private static final String HTTP_ACCEPT_ENCODING_GZIP = \"gzip\";", "modifier": "private static final", "type": "String", "declarator": "HTTP_ACCEPT_ENCODING_GZIP = \"gzip\"", "var_name": "HTTP_ACCEPT_ENCODING_GZIP"}, {"original_string": "private static final String HTTP_EXPIRES_HEADER = \"Expires\";", "modifier": "private static final", "type": "String", "declarator": "HTTP_EXPIRES_HEADER = \"Expires\"", "var_name": "HTTP_EXPIRES_HEADER"}, {"original_string": "private static final String HTTP_EXPIRES_HEADER_NOCACHE_VALUE = \"Wed, 11 Jan 1984 05:00:00:GMT\";", "modifier": "private static final", "type": "String", "declarator": "HTTP_EXPIRES_HEADER_NOCACHE_VALUE = \"Wed, 11 Jan 1984 05:00:00:GMT\"", "var_name": "HTTP_EXPIRES_HEADER_NOCACHE_VALUE"}, {"original_string": "private static final String HTTP_CACHE_CONTROL_HEADER = \"Cache-Control\";", "modifier": "private static final", "type": "String", "declarator": "HTTP_CACHE_CONTROL_HEADER = \"Cache-Control\"", "var_name": "HTTP_CACHE_CONTROL_HEADER"}, {"original_string": "private static final String HTTP_CACHE_CONTROL_HEADER_NOCACHE_VALUE =\n\t\t\t\"max-age=0, no-cache, no-store, must-revalidate\";", "modifier": "private static final", "type": "String", "declarator": "HTTP_CACHE_CONTROL_HEADER_NOCACHE_VALUE =\n\t\t\t\"max-age=0, no-cache, no-store, must-revalidate\"", "var_name": "HTTP_CACHE_CONTROL_HEADER_NOCACHE_VALUE"}, {"original_string": "private static final String HTTP_CACHE_PRAGMA = \"Pragma\";", "modifier": "private static final", "type": "String", "declarator": "HTTP_CACHE_PRAGMA = \"Pragma\"", "var_name": "HTTP_CACHE_PRAGMA"}, {"original_string": "private static final String HTTP_CACHE_PRAGMA_VALUE = \"no-cache\";", "modifier": "private static final", "type": "String", "declarator": "HTTP_CACHE_PRAGMA_VALUE = \"no-cache\"", "var_name": "HTTP_CACHE_PRAGMA_VALUE"}, {"original_string": "private static final String HTTP_CACHE_MAX_AGE_PREFIX = \"max-age=\";", "modifier": "private static final", "type": "String", "declarator": "HTTP_CACHE_MAX_AGE_PREFIX = \"max-age=\"", "var_name": "HTTP_CACHE_MAX_AGE_PREFIX"}, {"original_string": "private String[] cacheIdentifiers = new String[] {\".cache.\"};", "modifier": "private", "type": "String[]", "declarator": "cacheIdentifiers = new String[] {\".cache.\"}", "var_name": "cacheIdentifiers"}, {"original_string": "private String[] cacheSuffixes = new String[] {\".js\", \".png\", \".jpg\", \".jpeg\", \".gif\", \".css\", \".html\"};", "modifier": "private", "type": "String[]", "declarator": "cacheSuffixes = new String[] {\".js\", \".png\", \".jpg\", \".jpeg\", \".gif\", \".css\", \".html\"}", "var_name": "cacheSuffixes"}, {"original_string": "private String[] noCacheIdentifiers = new String[] {\".nocache.\"};", "modifier": "private", "type": "String[]", "declarator": "noCacheIdentifiers = new String[] {\".nocache.\"}", "var_name": "noCacheIdentifiers"}, {"original_string": "private String[] noCacheSuffixes = new String[] {};", "modifier": "private", "type": "String[]", "declarator": "noCacheSuffixes = new String[] {}", "var_name": "noCacheSuffixes"}, {"original_string": "private String[] zipSuffixes = new String[] {\".js\", \".css\", \".html\"};", "modifier": "private", "type": "String[]", "declarator": "zipSuffixes = new String[] {\".js\", \".css\", \".html\"}", "var_name": "zipSuffixes"}, {"original_string": "private String[] skipPrefixes = new String[] {\"/d/\"};", "modifier": "private", "type": "String[]", "declarator": "skipPrefixes = new String[] {\"/d/\"}", "var_name": "skipPrefixes"}], "methods": [{"identifier": "destroy", "parameters": "()", "modifiers": "@Override public", "return": "void", "signature": "void destroy()", "full_signature": "@Override public void destroy()", "class_method_signature": "CacheFilter.destroy()", "testcase": false, "constructor": false}, {"identifier": "init", "parameters": "(FilterConfig config)", "modifiers": "@Override public", "return": "void", "signature": "void init(FilterConfig config)", "full_signature": "@Override public void init(FilterConfig config)", "class_method_signature": "CacheFilter.init(FilterConfig config)", "testcase": false, "constructor": false}, {"identifier": "doFilter", "parameters": "(ServletRequest request, ServletResponse response, FilterChain filterChain)", "modifiers": "@Override @edu.umd.cs.findbugs.annotations.SuppressWarnings(value = \"AvoidUsingHardCodedIP\", justification = \"double-safe check on localhost, ease configuration for development\") public", "return": "void", "signature": "void doFilter(ServletRequest request, ServletResponse response, FilterChain filterChain)", "full_signature": "@Override @edu.umd.cs.findbugs.annotations.SuppressWarnings(value = \"AvoidUsingHardCodedIP\", justification = \"double-safe check on localhost, ease configuration for development\") public void doFilter(ServletRequest request, ServletResponse response, FilterChain filterChain)", "class_method_signature": "CacheFilter.doFilter(ServletRequest request, ServletResponse response, FilterChain filterChain)", "testcase": false, "constructor": false}, {"identifier": "shouldCache", "parameters": "(String requestUri)", "modifiers": "public", "return": "boolean", "signature": "boolean shouldCache(String requestUri)", "full_signature": "public boolean shouldCache(String requestUri)", "class_method_signature": "CacheFilter.shouldCache(String requestUri)", "testcase": false, "constructor": false}, {"identifier": "shouldNotCache", "parameters": "(String requestUri)", "modifiers": "public", "return": "boolean", "signature": "boolean shouldNotCache(String requestUri)", "full_signature": "public boolean shouldNotCache(String requestUri)", "class_method_signature": "CacheFilter.shouldNotCache(String requestUri)", "testcase": false, "constructor": false}, {"identifier": "shouldCompress", "parameters": "(String requestUri)", "modifiers": "public", "return": "boolean", "signature": "boolean shouldCompress(String requestUri)", "full_signature": "public boolean shouldCompress(String requestUri)", "class_method_signature": "CacheFilter.shouldCompress(String requestUri)", "testcase": false, "constructor": false}, {"identifier": "checkContains", "parameters": "(String uri, String[] patterns)", "modifiers": "public", "return": "boolean", "signature": "boolean checkContains(String uri, String[] patterns)", "full_signature": "public boolean checkContains(String uri, String[] patterns)", "class_method_signature": "CacheFilter.checkContains(String uri, String[] patterns)", "testcase": false, "constructor": false}, {"identifier": "checkSuffixes", "parameters": "(String uri, String[] patterns)", "modifiers": "public", "return": "boolean", "signature": "boolean checkSuffixes(String uri, String[] patterns)", "full_signature": "public boolean checkSuffixes(String uri, String[] patterns)", "class_method_signature": "CacheFilter.checkSuffixes(String uri, String[] patterns)", "testcase": false, "constructor": false}, {"identifier": "checkPrefixes", "parameters": "(String uri, String[] patterns)", "modifiers": "public", "return": "boolean", "signature": "boolean checkPrefixes(String uri, String[] patterns)", "full_signature": "public boolean checkPrefixes(String uri, String[] patterns)", "class_method_signature": "CacheFilter.checkPrefixes(String uri, String[] patterns)", "testcase": false, "constructor": false}, {"identifier": "configureNoCaching", "parameters": "(HttpServletResponse response)", "modifiers": "@Api public static", "return": "void", "signature": "void configureNoCaching(HttpServletResponse response)", "full_signature": "@Api public static void configureNoCaching(HttpServletResponse response)", "class_method_signature": "CacheFilter.configureNoCaching(HttpServletResponse response)", "testcase": false, "constructor": false}, {"identifier": "configureCaching", "parameters": "(HttpServletResponse response)", "modifiers": "private", "return": "void", "signature": "void configureCaching(HttpServletResponse response)", "full_signature": "private void configureCaching(HttpServletResponse response)", "class_method_signature": "CacheFilter.configureCaching(HttpServletResponse response)", "testcase": false, "constructor": false}], "file": "common-servlet/src/main/java/org/geomajas/servlet/CacheFilter.java"}, "focal_method": {"identifier": "shouldCompress", "parameters": "(String requestUri)", "modifiers": "public", "return": "boolean", "body": "public boolean shouldCompress(String requestUri) {\n\t\tString uri = requestUri.toLowerCase();\n\t\treturn checkSuffixes(uri, zipSuffixes);\n\t}", "signature": "boolean shouldCompress(String requestUri)", "full_signature": "public boolean shouldCompress(String requestUri)", "class_method_signature": "CacheFilter.shouldCompress(String requestUri)", "testcase": false, "constructor": false, "invocations": ["toLowerCase", "checkSuffixes"]}, "repository": {"repo_id": 14505280, "url": "https://github.com/geomajas/geomajas-project-server", "language": "Java", "is_fork": false, "fork_count": 15, "stargazer_count": 13, "size": 124882, "license": "licensed"}}