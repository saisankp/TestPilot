{"test_class": {"identifier": "MigrationUtilsTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static Response response;", "modifier": "private static", "type": "Response", "declarator": "response", "var_name": "response"}, {"original_string": "public static CassandraOperationImpl cassandraOperationImpl;", "modifier": "public static", "type": "CassandraOperationImpl", "declarator": "cassandraOperationImpl", "var_name": "cassandraOperationImpl"}], "file": "actors/user/src/test/java/org/sunbird/user/util/MigrationUtilsTest.java"}, "test_case": {"identifier": "testUpdateRecord", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n  public void testUpdateRecord() {\n    Map<String, Object> compositeKeysMap = new HashMap<>();\n    compositeKeysMap.put(JsonKey.USER_EXT_ID, \"anyUserExtId\");\n    compositeKeysMap.put(JsonKey.CHANNEL, \"anyChannel\");\n    when(cassandraOperationImpl.updateRecord(\n            JsonKey.SUNBIRD, JsonKey.SHADOW_USER, new HashMap<>(), compositeKeysMap))\n        .thenReturn(response);\n    boolean isRecordUpdated =\n        MigrationUtils.updateRecord(new HashMap<>(), \"anyChannel\", \"anyUserExtId\");\n    Assert.assertEquals(true, isRecordUpdated);\n  }", "signature": "void testUpdateRecord()", "full_signature": "@Test public void testUpdateRecord()", "class_method_signature": "MigrationUtilsTest.testUpdateRecord()", "testcase": true, "constructor": false, "invocations": ["put", "put", "thenReturn", "when", "updateRecord", "updateRecord", "assertEquals"]}, "focal_class": {"identifier": "MigrationUtils", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static CassandraOperation cassandraOperation = ServiceFactory.getInstance();", "modifier": "private static", "type": "CassandraOperation", "declarator": "cassandraOperation = ServiceFactory.getInstance()", "var_name": "cassandraOperation"}, {"original_string": "private static ObjectMapper mapper = new ObjectMapper();", "modifier": "private static", "type": "ObjectMapper", "declarator": "mapper = new ObjectMapper()", "var_name": "mapper"}], "methods": [{"identifier": "getRecordByUserId", "parameters": "(String userId)", "modifiers": "public static", "return": "ShadowUser", "signature": "ShadowUser getRecordByUserId(String userId)", "full_signature": "public static ShadowUser getRecordByUserId(String userId)", "class_method_signature": "MigrationUtils.getRecordByUserId(String userId)", "testcase": false, "constructor": false}, {"identifier": "updateRecord", "parameters": "(Map<String, Object> propertiesMap, String channel, String userExtId)", "modifiers": "public static", "return": "boolean", "signature": "boolean updateRecord(Map<String, Object> propertiesMap, String channel, String userExtId)", "full_signature": "public static boolean updateRecord(Map<String, Object> propertiesMap, String channel, String userExtId)", "class_method_signature": "MigrationUtils.updateRecord(Map<String, Object> propertiesMap, String channel, String userExtId)", "testcase": false, "constructor": false}, {"identifier": "markUserAsRejected", "parameters": "(ShadowUser shadowUser)", "modifiers": "public static", "return": "boolean", "signature": "boolean markUserAsRejected(ShadowUser shadowUser)", "full_signature": "public static boolean markUserAsRejected(ShadowUser shadowUser)", "class_method_signature": "MigrationUtils.markUserAsRejected(ShadowUser shadowUser)", "testcase": false, "constructor": false}, {"identifier": "updateClaimStatus", "parameters": "(ShadowUser shadowUser,int claimStatus)", "modifiers": "public static", "return": "boolean", "signature": "boolean updateClaimStatus(ShadowUser shadowUser,int claimStatus)", "full_signature": "public static boolean updateClaimStatus(ShadowUser shadowUser,int claimStatus)", "class_method_signature": "MigrationUtils.updateClaimStatus(ShadowUser shadowUser,int claimStatus)", "testcase": false, "constructor": false}, {"identifier": "getEligibleUsersById", "parameters": "(String userId,Map<String, Object> propsMap)", "modifiers": "public static", "return": "List<ShadowUser>", "signature": "List<ShadowUser> getEligibleUsersById(String userId,Map<String, Object> propsMap)", "full_signature": "public static List<ShadowUser> getEligibleUsersById(String userId,Map<String, Object> propsMap)", "class_method_signature": "MigrationUtils.getEligibleUsersById(String userId,Map<String, Object> propsMap)", "testcase": false, "constructor": false}, {"identifier": "getEligibleUsersById", "parameters": "(String userId)", "modifiers": "public static", "return": "List<ShadowUser>", "signature": "List<ShadowUser> getEligibleUsersById(String userId)", "full_signature": "public static List<ShadowUser> getEligibleUsersById(String userId)", "class_method_signature": "MigrationUtils.getEligibleUsersById(String userId)", "testcase": false, "constructor": false}], "file": "actors/user/src/main/java/org/sunbird/user/util/MigrationUtils.java"}, "focal_method": {"identifier": "updateRecord", "parameters": "(Map<String, Object> propertiesMap, String channel, String userExtId)", "modifiers": "public static", "return": "boolean", "body": "public static boolean updateRecord(Map<String, Object> propertiesMap, String channel, String userExtId) {\n        Map<String, Object> compositeKeysMap = new HashMap<>();\n        compositeKeysMap.put(JsonKey.USER_EXT_ID, userExtId);\n        compositeKeysMap.put(JsonKey.CHANNEL, channel);\n        Response response = cassandraOperation.updateRecord(JsonKey.SUNBIRD, JsonKey.SHADOW_USER, propertiesMap, compositeKeysMap);\n        ProjectLogger.log(\"MigrationUtils:updateRecord:update in cassandra  with userExtId\" + userExtId + \":and response is:\" + response, LoggerEnum.INFO.name());\n        return true;\n    }", "signature": "boolean updateRecord(Map<String, Object> propertiesMap, String channel, String userExtId)", "full_signature": "public static boolean updateRecord(Map<String, Object> propertiesMap, String channel, String userExtId)", "class_method_signature": "MigrationUtils.updateRecord(Map<String, Object> propertiesMap, String channel, String userExtId)", "testcase": false, "constructor": false, "invocations": ["put", "put", "updateRecord", "log", "name"]}, "repository": {"repo_id": 96122408, "url": "https://github.com/project-sunbird/sunbird-lms-mw", "language": "Java", "is_fork": false, "fork_count": 36, "stargazer_count": 5, "size": 15380, "license": "licensed"}}