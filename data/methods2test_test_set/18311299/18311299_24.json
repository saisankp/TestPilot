{"test_class": {"identifier": "ListenerRepoTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "public static final long ID = 1l;", "modifier": "public static final", "type": "long", "declarator": "ID = 1l", "var_name": "ID"}, {"original_string": "public static final String TABLE_NAME = \"testTable\";", "modifier": "public static final", "type": "String", "declarator": "TABLE_NAME = \"testTable\"", "var_name": "TABLE_NAME"}, {"original_string": "public static final int WAIT_IN_SEC = 20;", "modifier": "public static final", "type": "int", "declarator": "WAIT_IN_SEC = 20", "var_name": "WAIT_IN_SEC"}, {"original_string": "public static final Date TODAY = new Date();", "modifier": "public static final", "type": "Date", "declarator": "TODAY = new Date()", "var_name": "TODAY"}, {"original_string": "ListenerRepo repo;", "modifier": "", "type": "ListenerRepo", "declarator": "repo", "var_name": "repo"}, {"original_string": "private Connection connection;", "modifier": "private", "type": "Connection", "declarator": "connection", "var_name": "connection"}], "file": "reactive-source-mysql/src/test/java/org/reactivesource/mysql/ListenerRepoTest.java"}, "test_case": {"identifier": "testCanGetListenersByTableNameCorrectlyWhenNoListenerExists", "parameters": "()", "modifiers": "@Test(groups = INTEGRATION) public", "return": "void", "body": "@Test(groups = INTEGRATION)\n    public void testCanGetListenersByTableNameCorrectlyWhenNoListenerExists() {\n        assertEquals(repo.findByTableName(TEST_TABLE_NAME, connection).size(), 0);\n    }", "signature": "void testCanGetListenersByTableNameCorrectlyWhenNoListenerExists()", "full_signature": "@Test(groups = INTEGRATION) public void testCanGetListenersByTableNameCorrectlyWhenNoListenerExists()", "class_method_signature": "ListenerRepoTest.testCanGetListenersByTableNameCorrectlyWhenNoListenerExists()", "testcase": true, "constructor": false, "invocations": ["assertEquals", "size", "findByTableName"]}, "focal_class": {"identifier": "ListenerRepo", "superclass": "", "interfaces": "", "fields": [{"original_string": "static final String TABLE_NAME = \"REACTIVE_LISTENER\";", "modifier": "static final", "type": "String", "declarator": "TABLE_NAME = \"REACTIVE_LISTENER\"", "var_name": "TABLE_NAME"}, {"original_string": "static final String LISTENER_ID_COL = \"LISTENER_ID\";", "modifier": "static final", "type": "String", "declarator": "LISTENER_ID_COL = \"LISTENER_ID\"", "var_name": "LISTENER_ID_COL"}, {"original_string": "static final String TABLE_NAME_COL = \"TABLE_NAME\";", "modifier": "static final", "type": "String", "declarator": "TABLE_NAME_COL = \"TABLE_NAME\"", "var_name": "TABLE_NAME_COL"}, {"original_string": "static final String WAITING_TIMEOUT_SEC_COL = \"WAITING_TIMEOUT_SEC\";", "modifier": "static final", "type": "String", "declarator": "WAITING_TIMEOUT_SEC_COL = \"WAITING_TIMEOUT_SEC\"", "var_name": "WAITING_TIMEOUT_SEC_COL"}, {"original_string": "static final String LAST_CHECK_COL = \"LAST_CHECK\";", "modifier": "static final", "type": "String", "declarator": "LAST_CHECK_COL = \"LAST_CHECK\"", "var_name": "LAST_CHECK_COL"}, {"original_string": "static final String LAST_EVENT_ID_COL = \"LAST_EVENT_ID\";", "modifier": "static final", "type": "String", "declarator": "LAST_EVENT_ID_COL = \"LAST_EVENT_ID\"", "var_name": "LAST_EVENT_ID_COL"}, {"original_string": "private static final String INSERT_LISTENER_QUERY =\n            \"INSERT INTO \" + TABLE_NAME +\n                    \"(\" + LISTENER_ID_COL + \",\" + TABLE_NAME_COL + \",\" + WAITING_TIMEOUT_SEC_COL + \") \" +\n                    \"VALUES \" +\n                    \"(?, ?, ?)\";", "modifier": "private static final", "type": "String", "declarator": "INSERT_LISTENER_QUERY =\n            \"INSERT INTO \" + TABLE_NAME +\n                    \"(\" + LISTENER_ID_COL + \",\" + TABLE_NAME_COL + \",\" + WAITING_TIMEOUT_SEC_COL + \") \" +\n                    \"VALUES \" +\n                    \"(?, ?, ?)\"", "var_name": "INSERT_LISTENER_QUERY"}, {"original_string": "private static final String REFRESH_QUERY =\n            \"UPDATE \" + TABLE_NAME + \" SET \" + LAST_CHECK_COL + \" = NOW() \" +\n                    \"WHERE \" + LISTENER_ID_COL + \"=?\";", "modifier": "private static final", "type": "String", "declarator": "REFRESH_QUERY =\n            \"UPDATE \" + TABLE_NAME + \" SET \" + LAST_CHECK_COL + \" = NOW() \" +\n                    \"WHERE \" + LISTENER_ID_COL + \"=?\"", "var_name": "REFRESH_QUERY"}, {"original_string": "private static final String FIND_BY_ID_QUERY =\n            \"SELECT * FROM \" + TABLE_NAME + \" WHERE \" + LISTENER_ID_COL + \"=?\";", "modifier": "private static final", "type": "String", "declarator": "FIND_BY_ID_QUERY =\n            \"SELECT * FROM \" + TABLE_NAME + \" WHERE \" + LISTENER_ID_COL + \"=?\"", "var_name": "FIND_BY_ID_QUERY"}, {"original_string": "private static final String REMOVE_BY_ID_QUERY =\n            \"DELETE FROM \" + TABLE_NAME +\n                    \" WHERE \" + LISTENER_ID_COL + \"=?\";", "modifier": "private static final", "type": "String", "declarator": "REMOVE_BY_ID_QUERY =\n            \"DELETE FROM \" + TABLE_NAME +\n                    \" WHERE \" + LISTENER_ID_COL + \"=?\"", "var_name": "REMOVE_BY_ID_QUERY"}, {"original_string": "private static final String UPDATE_QUERY =\n            \"UPDATE \" + TABLE_NAME + \" SET \" + LAST_EVENT_ID_COL + \"=? \" +\n                    \"WHERE \" + LISTENER_ID_COL + \"=?\";", "modifier": "private static final", "type": "String", "declarator": "UPDATE_QUERY =\n            \"UPDATE \" + TABLE_NAME + \" SET \" + LAST_EVENT_ID_COL + \"=? \" +\n                    \"WHERE \" + LISTENER_ID_COL + \"=?\"", "var_name": "UPDATE_QUERY"}, {"original_string": "private static final String FIND_BY_TABLE_NAME_QUERY = \"SELECT * FROM \" + TABLE_NAME +\n            \" WHERE \" + TABLE_NAME_COL + \"=?\";", "modifier": "private static final", "type": "String", "declarator": "FIND_BY_TABLE_NAME_QUERY = \"SELECT * FROM \" + TABLE_NAME +\n            \" WHERE \" + TABLE_NAME_COL + \"=?\"", "var_name": "FIND_BY_TABLE_NAME_QUERY"}], "methods": [{"identifier": "insert", "parameters": "(Listener listener, Connection connection)", "modifiers": "public", "return": "Listener", "signature": "Listener insert(Listener listener, Connection connection)", "full_signature": "public Listener insert(Listener listener, Connection connection)", "class_method_signature": "ListenerRepo.insert(Listener listener, Connection connection)", "testcase": false, "constructor": false}, {"identifier": "refreshLastCheck", "parameters": "(Listener listener, Connection connection)", "modifiers": "public", "return": "void", "signature": "void refreshLastCheck(Listener listener, Connection connection)", "full_signature": "public void refreshLastCheck(Listener listener, Connection connection)", "class_method_signature": "ListenerRepo.refreshLastCheck(Listener listener, Connection connection)", "testcase": false, "constructor": false}, {"identifier": "remove", "parameters": "(Listener listener, Connection connection)", "modifiers": "public", "return": "void", "signature": "void remove(Listener listener, Connection connection)", "full_signature": "public void remove(Listener listener, Connection connection)", "class_method_signature": "ListenerRepo.remove(Listener listener, Connection connection)", "testcase": false, "constructor": false}, {"identifier": "update", "parameters": "(Listener listener, Connection connection)", "modifiers": "public", "return": "void", "signature": "void update(Listener listener, Connection connection)", "full_signature": "public void update(Listener listener, Connection connection)", "class_method_signature": "ListenerRepo.update(Listener listener, Connection connection)", "testcase": false, "constructor": false}, {"identifier": "findById", "parameters": "(long id, Connection connection)", "modifiers": "public", "return": "Listener", "signature": "Listener findById(long id, Connection connection)", "full_signature": "public Listener findById(long id, Connection connection)", "class_method_signature": "ListenerRepo.findById(long id, Connection connection)", "testcase": false, "constructor": false}, {"identifier": "findByTableName", "parameters": "(String tableName, Connection connection)", "modifiers": "public", "return": "List<Listener>", "signature": "List<Listener> findByTableName(String tableName, Connection connection)", "full_signature": "public List<Listener> findByTableName(String tableName, Connection connection)", "class_method_signature": "ListenerRepo.findByTableName(String tableName, Connection connection)", "testcase": false, "constructor": false}, {"identifier": "extractListener", "parameters": "(ResultSet rs)", "modifiers": "static", "return": "Listener", "signature": "Listener extractListener(ResultSet rs)", "full_signature": "static Listener extractListener(ResultSet rs)", "class_method_signature": "ListenerRepo.extractListener(ResultSet rs)", "testcase": false, "constructor": false}], "file": "reactive-source-mysql/src/main/java/org/reactivesource/mysql/ListenerRepo.java"}, "focal_method": {"identifier": "findByTableName", "parameters": "(String tableName, Connection connection)", "modifiers": "public", "return": "List<Listener>", "body": "public List<Listener> findByTableName(String tableName, Connection connection) {\n        try (\n                PreparedStatement stmt = connection.prepareStatement(FIND_BY_TABLE_NAME_QUERY)\n        ) {\n            stmt.setObject(1, tableName);\n            ResultSet rs = stmt.executeQuery();\n\n            List<Listener> result = newArrayList();\n            while (rs.next()) {\n                result.add(extractListener(rs));\n            }\n            return result;\n        } catch (SQLException e) {\n            throw new DataAccessException(\"Something went wrong while listing listeners for table: \" + tableName, e);\n        }\n    }", "signature": "List<Listener> findByTableName(String tableName, Connection connection)", "full_signature": "public List<Listener> findByTableName(String tableName, Connection connection)", "class_method_signature": "ListenerRepo.findByTableName(String tableName, Connection connection)", "testcase": false, "constructor": false, "invocations": ["prepareStatement", "setObject", "executeQuery", "newArrayList", "next", "add", "extractListener"]}, "repository": {"repo_id": 18311299, "url": "https://github.com/eBay/reactive-source", "language": "Java", "is_fork": false, "fork_count": 6, "stargazer_count": 9, "size": 317, "license": "licensed"}}