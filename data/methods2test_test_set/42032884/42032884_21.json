{"test_class": {"identifier": "CsrfTokenClientTest", "superclass": "extends MockWebServerTest", "interfaces": "", "fields": [{"original_string": "private static final WikiSite TEST_WIKI = new WikiSite(\"test.wikipedia.org\");", "modifier": "private static final", "type": "WikiSite", "declarator": "TEST_WIKI = new WikiSite(\"test.wikipedia.org\")", "var_name": "TEST_WIKI"}, {"original_string": "@NonNull private final CsrfTokenClient subject = new CsrfTokenClient(TEST_WIKI, TEST_WIKI);", "modifier": "@NonNull private final", "type": "CsrfTokenClient", "declarator": "subject = new CsrfTokenClient(TEST_WIKI, TEST_WIKI)", "var_name": "subject"}], "file": "data-client/src/test/java/org/wikipedia/csrf/CsrfTokenClientTest.java"}, "test_case": {"identifier": "testRequestResponseMalformed", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test public void testRequestResponseMalformed() throws Throwable {\n        enqueueMalformed();\n\n        Callback cb = mock(Callback.class);\n        request(cb);\n\n        server().takeRequest();\n        assertCallbackFailure(cb, MalformedJsonException.class);\n    }", "signature": "void testRequestResponseMalformed()", "full_signature": "@Test public void testRequestResponseMalformed()", "class_method_signature": "CsrfTokenClientTest.testRequestResponseMalformed()", "testcase": true, "constructor": false, "invocations": ["enqueueMalformed", "mock", "request", "takeRequest", "server", "assertCallbackFailure"]}, "focal_class": {"identifier": "CsrfTokenClient", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final String ANON_TOKEN = \"+\\\\\";", "modifier": "private static final", "type": "String", "declarator": "ANON_TOKEN = \"+\\\\\"", "var_name": "ANON_TOKEN"}, {"original_string": "private static final int MAX_RETRIES = 1;", "modifier": "private static final", "type": "int", "declarator": "MAX_RETRIES = 1", "var_name": "MAX_RETRIES"}, {"original_string": "private static final int MAX_RETRIES_OF_LOGIN_BLOCKING = 2;", "modifier": "private static final", "type": "int", "declarator": "MAX_RETRIES_OF_LOGIN_BLOCKING = 2", "var_name": "MAX_RETRIES_OF_LOGIN_BLOCKING"}, {"original_string": "@NonNull private final WikiSite csrfWikiSite;", "modifier": "@NonNull private final", "type": "WikiSite", "declarator": "csrfWikiSite", "var_name": "csrfWikiSite"}, {"original_string": "@NonNull private final WikiSite loginWikiSite;", "modifier": "@NonNull private final", "type": "WikiSite", "declarator": "loginWikiSite", "var_name": "loginWikiSite"}, {"original_string": "private int retries = 0;", "modifier": "private", "type": "int", "declarator": "retries = 0", "var_name": "retries"}, {"original_string": "@Nullable private Call<MwQueryResponse> csrfTokenCall;", "modifier": "@Nullable private", "type": "Call<MwQueryResponse>", "declarator": "csrfTokenCall", "var_name": "csrfTokenCall"}, {"original_string": "@NonNull private LoginClient loginClient = new LoginClient();", "modifier": "@NonNull private", "type": "LoginClient", "declarator": "loginClient = new LoginClient()", "var_name": "loginClient"}], "methods": [{"identifier": "CsrfTokenClient", "parameters": "(@NonNull WikiSite csrfWikiSite, @NonNull WikiSite loginWikiSite)", "modifiers": "public", "return": "", "signature": " CsrfTokenClient(@NonNull WikiSite csrfWikiSite, @NonNull WikiSite loginWikiSite)", "full_signature": "public  CsrfTokenClient(@NonNull WikiSite csrfWikiSite, @NonNull WikiSite loginWikiSite)", "class_method_signature": "CsrfTokenClient.CsrfTokenClient(@NonNull WikiSite csrfWikiSite, @NonNull WikiSite loginWikiSite)", "testcase": false, "constructor": true}, {"identifier": "request", "parameters": "(@NonNull final Callback callback)", "modifiers": "public", "return": "void", "signature": "void request(@NonNull final Callback callback)", "full_signature": "public void request(@NonNull final Callback callback)", "class_method_signature": "CsrfTokenClient.request(@NonNull final Callback callback)", "testcase": false, "constructor": false}, {"identifier": "request", "parameters": "(boolean forceLogin, @NonNull final Callback callback)", "modifiers": "public", "return": "void", "signature": "void request(boolean forceLogin, @NonNull final Callback callback)", "full_signature": "public void request(boolean forceLogin, @NonNull final Callback callback)", "class_method_signature": "CsrfTokenClient.request(boolean forceLogin, @NonNull final Callback callback)", "testcase": false, "constructor": false}, {"identifier": "cancel", "parameters": "()", "modifiers": "public", "return": "void", "signature": "void cancel()", "full_signature": "public void cancel()", "class_method_signature": "CsrfTokenClient.cancel()", "testcase": false, "constructor": false}, {"identifier": "request", "parameters": "(@NonNull Service service, @NonNull final Callback cb)", "modifiers": "@VisibleForTesting @NonNull", "return": "Call<MwQueryResponse>", "signature": "Call<MwQueryResponse> request(@NonNull Service service, @NonNull final Callback cb)", "full_signature": "@VisibleForTesting @NonNull Call<MwQueryResponse> request(@NonNull Service service, @NonNull final Callback cb)", "class_method_signature": "CsrfTokenClient.request(@NonNull Service service, @NonNull final Callback cb)", "testcase": false, "constructor": false}, {"identifier": "retryWithLogin", "parameters": "(@NonNull Throwable caught, @NonNull final Callback callback)", "modifiers": "private", "return": "void", "signature": "void retryWithLogin(@NonNull Throwable caught, @NonNull final Callback callback)", "full_signature": "private void retryWithLogin(@NonNull Throwable caught, @NonNull final Callback callback)", "class_method_signature": "CsrfTokenClient.retryWithLogin(@NonNull Throwable caught, @NonNull final Callback callback)", "testcase": false, "constructor": false}, {"identifier": "login", "parameters": "(@NonNull final String username, @NonNull final String password,\n                       @NonNull final RetryCallback retryCallback,\n                       @NonNull final Callback callback)", "modifiers": "private", "return": "void", "signature": "void login(@NonNull final String username, @NonNull final String password,\n                       @NonNull final RetryCallback retryCallback,\n                       @NonNull final Callback callback)", "full_signature": "private void login(@NonNull final String username, @NonNull final String password,\n                       @NonNull final RetryCallback retryCallback,\n                       @NonNull final Callback callback)", "class_method_signature": "CsrfTokenClient.login(@NonNull final String username, @NonNull final String password,\n                       @NonNull final RetryCallback retryCallback,\n                       @NonNull final Callback callback)", "testcase": false, "constructor": false}, {"identifier": "getTokenBlocking", "parameters": "()", "modifiers": "@NonNull public", "return": "String", "signature": "String getTokenBlocking()", "full_signature": "@NonNull public String getTokenBlocking()", "class_method_signature": "CsrfTokenClient.getTokenBlocking()", "testcase": false, "constructor": false}, {"identifier": "requestToken", "parameters": "(@NonNull Service service,\n                                                                   @NonNull final Callback cb)", "modifiers": "@VisibleForTesting @NonNull", "return": "Call<MwQueryResponse>", "signature": "Call<MwQueryResponse> requestToken(@NonNull Service service,\n                                                                   @NonNull final Callback cb)", "full_signature": "@VisibleForTesting @NonNull Call<MwQueryResponse> requestToken(@NonNull Service service,\n                                                                   @NonNull final Callback cb)", "class_method_signature": "CsrfTokenClient.requestToken(@NonNull Service service,\n                                                                   @NonNull final Callback cb)", "testcase": false, "constructor": false}], "file": "data-client/src/main/java/org/wikipedia/csrf/CsrfTokenClient.java"}, "focal_method": {"identifier": "request", "parameters": "(@NonNull final Callback callback)", "modifiers": "public", "return": "void", "body": "public void request(@NonNull final Callback callback) {\n        request(false, callback);\n    }", "signature": "void request(@NonNull final Callback callback)", "full_signature": "public void request(@NonNull final Callback callback)", "class_method_signature": "CsrfTokenClient.request(@NonNull final Callback callback)", "testcase": false, "constructor": false, "invocations": ["request"]}, "repository": {"repo_id": 42032884, "url": "https://github.com/commons-app/apps-android-commons", "stars": 546, "created": "9/7/2015 5:23:27 AM +00:00", "updates": "2020-01-27T16:36:58+00:00", "fork": "False", "license": "licensed"}}