{"test_class": {"identifier": "KiePMMLScorecardModelCharacteristicASTFactoryTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final String SOURCE_SAMPLE = \"ScorecardSample.pmml\";", "modifier": "private static final", "type": "String", "declarator": "SOURCE_SAMPLE = \"ScorecardSample.pmml\"", "var_name": "SOURCE_SAMPLE"}, {"original_string": "private final String fieldName = \"age\";", "modifier": "private final", "type": "String", "declarator": "fieldName = \"age\"", "var_name": "fieldName"}, {"original_string": "private PMML samplePmml;", "modifier": "private", "type": "PMML", "declarator": "samplePmml", "var_name": "samplePmml"}, {"original_string": "private Scorecard scorecardModel;", "modifier": "private", "type": "Scorecard", "declarator": "scorecardModel", "var_name": "scorecardModel"}, {"original_string": "private DataDictionary dataDictionary;", "modifier": "private", "type": "DataDictionary", "declarator": "dataDictionary", "var_name": "dataDictionary"}], "file": "kie-pmml-trusty/kie-pmml-models/kie-pmml-models-drools/kie-pmml-models-drools-scorecard/kie-pmml-models-drools-scorecard-compiler/src/test/java/org/kie/pmml/models/drools/scorecard/compiler/factories/KiePMMLScorecardModelCharacteristicASTFactoryTest.java"}, "test_case": {"identifier": "declareRuleFromAttributeWithCompoundPredicate", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void declareRuleFromAttributeWithCompoundPredicate() {\n        Attribute attribute = getCompoundPredicateAttribute();\n        final String parentPath = \"parent_path\";\n        final int attributeIndex = 2;\n        final List<KiePMMLDroolsRule> rules = new ArrayList<>();\n        final String statusToSet = \"status_to_set\";\n        final String characteristicReasonCode = \"REASON_CODE\";\n        final double characteristicBaselineScore = 12;\n        final boolean isLastCharacteristic = false;\n        getKiePMMLScorecardModelCharacteristicASTFactory()\n                .declareRuleFromAttribute(attribute, parentPath, attributeIndex, rules, statusToSet, characteristicReasonCode, characteristicBaselineScore, isLastCharacteristic);\n        assertEquals(1, rules.size());\n        commonValidateRule(rules.get(0),\n                           attribute,\n                           statusToSet,\n                           parentPath,\n                           attributeIndex,\n                           isLastCharacteristic,\n                           1,\n                           null,\n                           BOOLEAN_OPERATOR.AND,\n                           \"value >= 5.0 && value < 12.0\",\n                           2);\n    }", "signature": "void declareRuleFromAttributeWithCompoundPredicate()", "full_signature": "@Test public void declareRuleFromAttributeWithCompoundPredicate()", "class_method_signature": "KiePMMLScorecardModelCharacteristicASTFactoryTest.declareRuleFromAttributeWithCompoundPredicate()", "testcase": true, "constructor": false, "invocations": ["getCompoundPredicateAttribute", "declareRuleFromAttribute", "getKiePMMLScorecardModelCharacteristicASTFactory", "assertEquals", "size", "commonValidateRule", "get"]}, "focal_class": {"identifier": "KiePMMLScorecardModelCharacteristicASTFactory", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final Logger logger = LoggerFactory.getLogger(KiePMMLScorecardModelCharacteristicASTFactory.class.getName());", "modifier": "private static final", "type": "Logger", "declarator": "logger = LoggerFactory.getLogger(KiePMMLScorecardModelCharacteristicASTFactory.class.getName())", "var_name": "logger"}, {"original_string": "private final Map<String, KiePMMLOriginalTypeGeneratedType> fieldTypeMap;", "modifier": "private final", "type": "Map<String, KiePMMLOriginalTypeGeneratedType>", "declarator": "fieldTypeMap", "var_name": "fieldTypeMap"}, {"original_string": "private final List<KiePMMLOutputField> outputFields;", "modifier": "private final", "type": "List<KiePMMLOutputField>", "declarator": "outputFields", "var_name": "outputFields"}, {"original_string": "private final DATA_TYPE targetType;", "modifier": "private final", "type": "DATA_TYPE", "declarator": "targetType", "var_name": "targetType"}, {"original_string": "private boolean useReasonCodes = false;", "modifier": "private", "type": "boolean", "declarator": "useReasonCodes = false", "var_name": "useReasonCodes"}, {"original_string": "private Number baselineScore;", "modifier": "private", "type": "Number", "declarator": "baselineScore", "var_name": "baselineScore"}, {"original_string": "private REASONCODE_ALGORITHM reasonCodeAlgorithm;", "modifier": "private", "type": "REASONCODE_ALGORITHM", "declarator": "reasonCodeAlgorithm", "var_name": "reasonCodeAlgorithm"}], "methods": [{"identifier": "KiePMMLScorecardModelCharacteristicASTFactory", "parameters": "(final Map<String, KiePMMLOriginalTypeGeneratedType> fieldTypeMap, final List<KiePMMLOutputField> outputFields, final DATA_TYPE targetType)", "modifiers": "private", "return": "", "signature": " KiePMMLScorecardModelCharacteristicASTFactory(final Map<String, KiePMMLOriginalTypeGeneratedType> fieldTypeMap, final List<KiePMMLOutputField> outputFields, final DATA_TYPE targetType)", "full_signature": "private  KiePMMLScorecardModelCharacteristicASTFactory(final Map<String, KiePMMLOriginalTypeGeneratedType> fieldTypeMap, final List<KiePMMLOutputField> outputFields, final DATA_TYPE targetType)", "class_method_signature": "KiePMMLScorecardModelCharacteristicASTFactory.KiePMMLScorecardModelCharacteristicASTFactory(final Map<String, KiePMMLOriginalTypeGeneratedType> fieldTypeMap, final List<KiePMMLOutputField> outputFields, final DATA_TYPE targetType)", "testcase": false, "constructor": true}, {"identifier": "factory", "parameters": "(final Map<String, KiePMMLOriginalTypeGeneratedType> fieldTypeMap, final List<KiePMMLOutputField> outputFields, final DATA_TYPE targetType)", "modifiers": "public static", "return": "KiePMMLScorecardModelCharacteristicASTFactory", "signature": "KiePMMLScorecardModelCharacteristicASTFactory factory(final Map<String, KiePMMLOriginalTypeGeneratedType> fieldTypeMap, final List<KiePMMLOutputField> outputFields, final DATA_TYPE targetType)", "full_signature": "public static KiePMMLScorecardModelCharacteristicASTFactory factory(final Map<String, KiePMMLOriginalTypeGeneratedType> fieldTypeMap, final List<KiePMMLOutputField> outputFields, final DATA_TYPE targetType)", "class_method_signature": "KiePMMLScorecardModelCharacteristicASTFactory.factory(final Map<String, KiePMMLOriginalTypeGeneratedType> fieldTypeMap, final List<KiePMMLOutputField> outputFields, final DATA_TYPE targetType)", "testcase": false, "constructor": false}, {"identifier": "withReasonCodes", "parameters": "(Number baselineScore, REASONCODE_ALGORITHM reasonCodeAlgorithm)", "modifiers": "public", "return": "KiePMMLScorecardModelCharacteristicASTFactory", "signature": "KiePMMLScorecardModelCharacteristicASTFactory withReasonCodes(Number baselineScore, REASONCODE_ALGORITHM reasonCodeAlgorithm)", "full_signature": "public KiePMMLScorecardModelCharacteristicASTFactory withReasonCodes(Number baselineScore, REASONCODE_ALGORITHM reasonCodeAlgorithm)", "class_method_signature": "KiePMMLScorecardModelCharacteristicASTFactory.withReasonCodes(Number baselineScore, REASONCODE_ALGORITHM reasonCodeAlgorithm)", "testcase": false, "constructor": false}, {"identifier": "declareRulesFromCharacteristics", "parameters": "(final Characteristics characteristics, final String parentPath, Number initialScore)", "modifiers": "public", "return": "List<KiePMMLDroolsRule>", "signature": "List<KiePMMLDroolsRule> declareRulesFromCharacteristics(final Characteristics characteristics, final String parentPath, Number initialScore)", "full_signature": "public List<KiePMMLDroolsRule> declareRulesFromCharacteristics(final Characteristics characteristics, final String parentPath, Number initialScore)", "class_method_signature": "KiePMMLScorecardModelCharacteristicASTFactory.declareRulesFromCharacteristics(final Characteristics characteristics, final String parentPath, Number initialScore)", "testcase": false, "constructor": false}, {"identifier": "declareRuleFromCharacteristic", "parameters": "(final Characteristic characteristic, final String parentPath,\n                                                 final List<KiePMMLDroolsRule> rules,\n                                                 final String statusToSet,\n                                                 final boolean isLastCharacteristic)", "modifiers": "protected", "return": "void", "signature": "void declareRuleFromCharacteristic(final Characteristic characteristic, final String parentPath,\n                                                 final List<KiePMMLDroolsRule> rules,\n                                                 final String statusToSet,\n                                                 final boolean isLastCharacteristic)", "full_signature": "protected void declareRuleFromCharacteristic(final Characteristic characteristic, final String parentPath,\n                                                 final List<KiePMMLDroolsRule> rules,\n                                                 final String statusToSet,\n                                                 final boolean isLastCharacteristic)", "class_method_signature": "KiePMMLScorecardModelCharacteristicASTFactory.declareRuleFromCharacteristic(final Characteristic characteristic, final String parentPath,\n                                                 final List<KiePMMLDroolsRule> rules,\n                                                 final String statusToSet,\n                                                 final boolean isLastCharacteristic)", "testcase": false, "constructor": false}, {"identifier": "declareRuleFromAttribute", "parameters": "(final Attribute attribute, final String parentPath,\n                                            final int attributeIndex,\n                                            final List<KiePMMLDroolsRule> rules,\n                                            final String statusToSet,\n                                            final String characteristicReasonCode,\n                                            final Number characteristicBaselineScore,\n                                            final boolean isLastCharacteristic)", "modifiers": "protected", "return": "void", "signature": "void declareRuleFromAttribute(final Attribute attribute, final String parentPath,\n                                            final int attributeIndex,\n                                            final List<KiePMMLDroolsRule> rules,\n                                            final String statusToSet,\n                                            final String characteristicReasonCode,\n                                            final Number characteristicBaselineScore,\n                                            final boolean isLastCharacteristic)", "full_signature": "protected void declareRuleFromAttribute(final Attribute attribute, final String parentPath,\n                                            final int attributeIndex,\n                                            final List<KiePMMLDroolsRule> rules,\n                                            final String statusToSet,\n                                            final String characteristicReasonCode,\n                                            final Number characteristicBaselineScore,\n                                            final boolean isLastCharacteristic)", "class_method_signature": "KiePMMLScorecardModelCharacteristicASTFactory.declareRuleFromAttribute(final Attribute attribute, final String parentPath,\n                                            final int attributeIndex,\n                                            final List<KiePMMLDroolsRule> rules,\n                                            final String statusToSet,\n                                            final String characteristicReasonCode,\n                                            final Number characteristicBaselineScore,\n                                            final boolean isLastCharacteristic)", "testcase": false, "constructor": false}, {"identifier": "getKiePMMLReasonCodeAndValue", "parameters": "(final Attribute attribute,\n                                                                     final String characteristicReasonCode,\n                                                                     final Number characteristicBaselineScore)", "modifiers": "protected", "return": "KiePMMLReasonCodeAndValue", "signature": "KiePMMLReasonCodeAndValue getKiePMMLReasonCodeAndValue(final Attribute attribute,\n                                                                     final String characteristicReasonCode,\n                                                                     final Number characteristicBaselineScore)", "full_signature": "protected KiePMMLReasonCodeAndValue getKiePMMLReasonCodeAndValue(final Attribute attribute,\n                                                                     final String characteristicReasonCode,\n                                                                     final Number characteristicBaselineScore)", "class_method_signature": "KiePMMLScorecardModelCharacteristicASTFactory.getKiePMMLReasonCodeAndValue(final Attribute attribute,\n                                                                     final String characteristicReasonCode,\n                                                                     final Number characteristicBaselineScore)", "testcase": false, "constructor": false}], "file": "kie-pmml-trusty/kie-pmml-models/kie-pmml-models-drools/kie-pmml-models-drools-scorecard/kie-pmml-models-drools-scorecard-compiler/src/main/java/org/kie/pmml/models/drools/scorecard/compiler/factories/KiePMMLScorecardModelCharacteristicASTFactory.java"}, "focal_method": {"identifier": "declareRuleFromAttribute", "parameters": "(final Attribute attribute, final String parentPath,\n                                            final int attributeIndex,\n                                            final List<KiePMMLDroolsRule> rules,\n                                            final String statusToSet,\n                                            final String characteristicReasonCode,\n                                            final Number characteristicBaselineScore,\n                                            final boolean isLastCharacteristic)", "modifiers": "protected", "return": "void", "body": "protected void declareRuleFromAttribute(final Attribute attribute, final String parentPath,\n                                            final int attributeIndex,\n                                            final List<KiePMMLDroolsRule> rules,\n                                            final String statusToSet,\n                                            final String characteristicReasonCode,\n                                            final Number characteristicBaselineScore,\n                                            final boolean isLastCharacteristic) {\n        logger.trace(\"declareRuleFromAttribute {} {}\", attribute, parentPath);\n        final Predicate predicate = attribute.getPredicate();\n        // This means the rule should not be created at all.\n        // Different semantics has to be implemented if the \"False\"/\"True\" predicates are declared inside\n        // an XOR compound predicate\n        if (predicate instanceof False) {\n            return;\n        }\n        String currentRule = String.format(PATH_PATTERN, parentPath, attributeIndex);\n        KiePMMLReasonCodeAndValue reasonCodeAndValue = getKiePMMLReasonCodeAndValue(attribute, characteristicReasonCode, characteristicBaselineScore);\n        PredicateASTFactoryData predicateASTFactoryData = new PredicateASTFactoryData(predicate, outputFields, rules, parentPath, currentRule, fieldTypeMap);\n        KiePMMLPredicateASTFactory.factory(predicateASTFactoryData).declareRuleFromPredicate(attribute.getPartialScore(), statusToSet, reasonCodeAndValue, isLastCharacteristic);\n    }", "signature": "void declareRuleFromAttribute(final Attribute attribute, final String parentPath,\n                                            final int attributeIndex,\n                                            final List<KiePMMLDroolsRule> rules,\n                                            final String statusToSet,\n                                            final String characteristicReasonCode,\n                                            final Number characteristicBaselineScore,\n                                            final boolean isLastCharacteristic)", "full_signature": "protected void declareRuleFromAttribute(final Attribute attribute, final String parentPath,\n                                            final int attributeIndex,\n                                            final List<KiePMMLDroolsRule> rules,\n                                            final String statusToSet,\n                                            final String characteristicReasonCode,\n                                            final Number characteristicBaselineScore,\n                                            final boolean isLastCharacteristic)", "class_method_signature": "KiePMMLScorecardModelCharacteristicASTFactory.declareRuleFromAttribute(final Attribute attribute, final String parentPath,\n                                            final int attributeIndex,\n                                            final List<KiePMMLDroolsRule> rules,\n                                            final String statusToSet,\n                                            final String characteristicReasonCode,\n                                            final Number characteristicBaselineScore,\n                                            final boolean isLastCharacteristic)", "testcase": false, "constructor": false, "invocations": ["trace", "getPredicate", "format", "getKiePMMLReasonCodeAndValue", "declareRuleFromPredicate", "factory", "getPartialScore"]}, "repository": {"repo_id": 1381673, "url": "https://github.com/kiegroup/drools", "stars": 2733, "created": "2/18/2011 8:37:05 AM +00:00", "updates": "2020-01-27T13:12:15+00:00", "fork": "False", "license": "licensed"}}