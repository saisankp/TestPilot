{"test_class": {"identifier": "IOUtilsTest", "superclass": "", "interfaces": "", "fields": [], "file": "hbc-core/src/test/java/com/twitter/hbc/common/IOUtilsTest.java"}, "test_case": {"identifier": "testIncompleteReadFully", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n  public void testIncompleteReadFully() {\n    String myMessage = \"{this is my message}\";\n    byte[] bytes = myMessage.getBytes(Charsets.UTF_8);\n\n    InputStream stream = new ByteArrayInputStream(bytes);\n    Reader reader = new InputStreamReader(stream);\n\n    char[] buffer = new char[myMessage.length() * 2];\n\n    try {\n      IOUtils.readFully(reader, buffer, 0);\n      fail();\n    } catch (IOException e) {\n      // expected\n    }\n\n    // reset the stream\n    stream = new ByteArrayInputStream(bytes);\n    reader = new InputStreamReader(stream);\n    try {\n      IOUtils.readFully(reader, buffer, myMessage.length()/2);\n      fail();\n    } catch (IOException e) {\n      // expected\n    }\n  }", "signature": "void testIncompleteReadFully()", "full_signature": "@Test public void testIncompleteReadFully()", "class_method_signature": "IOUtilsTest.testIncompleteReadFully()", "testcase": true, "constructor": false, "invocations": ["getBytes", "length", "readFully", "fail", "readFully", "length", "fail"]}, "focal_class": {"identifier": "IOUtils", "superclass": "", "interfaces": "", "fields": [], "methods": [{"identifier": "readFully", "parameters": "(Reader reader, char[] buffer, int offset)", "modifiers": "public static", "return": "void", "signature": "void readFully(Reader reader, char[] buffer, int offset)", "full_signature": "public static void readFully(Reader reader, char[] buffer, int offset)", "class_method_signature": "IOUtils.readFully(Reader reader, char[] buffer, int offset)", "testcase": false, "constructor": false}], "file": "hbc-core/src/main/java/com/twitter/hbc/common/IOUtils.java"}, "focal_method": {"identifier": "readFully", "parameters": "(Reader reader, char[] buffer, int offset)", "modifiers": "public static", "return": "void", "body": "public static void readFully(Reader reader, char[] buffer, int offset) throws IOException {\n    int originalOffset = offset;\n    int expected = buffer.length - offset;\n    while (offset < buffer.length) {\n      int numRead = reader.read(buffer, offset, buffer.length - offset);\n      if (numRead < 0) {\n        throw new IOException(\n                String.format(\"Reached end of stream earlier than expected. Expected to read %d bytes. Actual: %d\",\n                expected, offset - originalOffset));\n      }\n      offset += numRead;\n    }\n  }", "signature": "void readFully(Reader reader, char[] buffer, int offset)", "full_signature": "public static void readFully(Reader reader, char[] buffer, int offset)", "class_method_signature": "IOUtils.readFully(Reader reader, char[] buffer, int offset)", "testcase": false, "constructor": false, "invocations": ["read", "format"]}, "repository": {"repo_id": 8064341, "url": "https://github.com/twitter/hbc", "language": "Java", "is_fork": false, "fork_count": 338, "stargazer_count": 868, "size": 352, "license": "licensed"}}