{"test_class": {"identifier": "KiePMMLRegressionTableClassificationFactoryTest", "superclass": "extends AbstractKiePMMLRegressionTableRegressionFactoryTest", "interfaces": "", "fields": [{"original_string": "private final static List<RegressionModel.NormalizationMethod> SUPPORTED_NORMALIZATION_METHODS =\n            Arrays.asList(RegressionModel.NormalizationMethod.SOFTMAX,\n                          RegressionModel.NormalizationMethod.SIMPLEMAX,\n                          RegressionModel.NormalizationMethod.NONE,\n                          RegressionModel.NormalizationMethod.LOGIT,\n                          RegressionModel.NormalizationMethod.PROBIT,\n                          RegressionModel.NormalizationMethod.CLOGLOG,\n                          RegressionModel.NormalizationMethod.CAUCHIT);", "modifier": "private final static", "type": "List<RegressionModel.NormalizationMethod>", "declarator": "SUPPORTED_NORMALIZATION_METHODS =\n            Arrays.asList(RegressionModel.NormalizationMethod.SOFTMAX,\n                          RegressionModel.NormalizationMethod.SIMPLEMAX,\n                          RegressionModel.NormalizationMethod.NONE,\n                          RegressionModel.NormalizationMethod.LOGIT,\n                          RegressionModel.NormalizationMethod.PROBIT,\n                          RegressionModel.NormalizationMethod.CLOGLOG,\n                          RegressionModel.NormalizationMethod.CAUCHIT)", "var_name": "SUPPORTED_NORMALIZATION_METHODS"}, {"original_string": "private final static List<RegressionModel.NormalizationMethod> UNSUPPORTED_NORMALIZATION_METHODS =\n            Arrays.asList(RegressionModel.NormalizationMethod.EXP,\n                          RegressionModel.NormalizationMethod.LOGLOG);", "modifier": "private final static", "type": "List<RegressionModel.NormalizationMethod>", "declarator": "UNSUPPORTED_NORMALIZATION_METHODS =\n            Arrays.asList(RegressionModel.NormalizationMethod.EXP,\n                          RegressionModel.NormalizationMethod.LOGLOG)", "var_name": "UNSUPPORTED_NORMALIZATION_METHODS"}, {"original_string": "private CompilationUnit compilationUnit;", "modifier": "private", "type": "CompilationUnit", "declarator": "compilationUnit", "var_name": "compilationUnit"}, {"original_string": "private ClassOrInterfaceDeclaration modelTemplate;", "modifier": "private", "type": "ClassOrInterfaceDeclaration", "declarator": "modelTemplate", "var_name": "modelTemplate"}], "file": "kie-pmml-trusty/kie-pmml-models/kie-pmml-models-regression/kie-pmml-models-regression-compiler/src/test/java/org/kie/pmml/models/regression/compiler/factories/KiePMMLRegressionTableClassificationFactoryTest.java"}, "test_case": {"identifier": "getRegressionTable", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void getRegressionTable() {\n        KiePMMLOutputField outputFieldCat = getOutputField(\"CAT-1\", RESULT_FEATURE.PROBABILITY, \"CatPred-1\");\n        KiePMMLOutputField outputFieldNum = getOutputField(\"NUM-1\", RESULT_FEATURE.PROBABILITY, \"NumPred-0\");\n        KiePMMLOutputField outputFieldPrev = getOutputField(\"PREV\", RESULT_FEATURE.PREDICTED_VALUE, null);\n        List<KiePMMLOutputField> outputFields = Arrays.asList(outputFieldCat, outputFieldNum, outputFieldPrev);\n        LinkedHashMap<String, KiePMMLTableSourceCategory> toReturn = new LinkedHashMap<>();\n        Map.Entry<String, String> retrieved = KiePMMLRegressionTableClassificationFactory.getRegressionTable(toReturn,\n                                                                                                             RegressionModel.NormalizationMethod.SOFTMAX,\n                                                                                                             OpType.CATEGORICAL,\n                                                                                                             outputFields,\n                                                                                                             \"targetField\",\n                                                                                                             \"packageName\");\n        assertNotNull(retrieved);\n    }", "signature": "void getRegressionTable()", "full_signature": "@Test public void getRegressionTable()", "class_method_signature": "KiePMMLRegressionTableClassificationFactoryTest.getRegressionTable()", "testcase": true, "constructor": false, "invocations": ["getOutputField", "getOutputField", "getOutputField", "asList", "getRegressionTable", "assertNotNull"]}, "focal_class": {"identifier": "KiePMMLRegressionTableClassificationFactory", "superclass": "", "interfaces": "", "fields": [{"original_string": "public static final String KIE_PMML_REGRESSION_TABLE_CLASSIFICATION_TEMPLATE_JAVA =\n            \"KiePMMLRegressionTableClassificationTemplate.tmpl\";", "modifier": "public static final", "type": "String", "declarator": "KIE_PMML_REGRESSION_TABLE_CLASSIFICATION_TEMPLATE_JAVA =\n            \"KiePMMLRegressionTableClassificationTemplate.tmpl\"", "var_name": "KIE_PMML_REGRESSION_TABLE_CLASSIFICATION_TEMPLATE_JAVA"}, {"original_string": "public static final String KIE_PMML_REGRESSION_TABLE_CLASSIFICATION_TEMPLATE =\n            \"KiePMMLRegressionTableClassificationTemplate\";", "modifier": "public static final", "type": "String", "declarator": "KIE_PMML_REGRESSION_TABLE_CLASSIFICATION_TEMPLATE =\n            \"KiePMMLRegressionTableClassificationTemplate\"", "var_name": "KIE_PMML_REGRESSION_TABLE_CLASSIFICATION_TEMPLATE"}, {"original_string": "private static final Logger logger =\n            LoggerFactory.getLogger(KiePMMLRegressionTableClassificationFactory.class.getName());", "modifier": "private static final", "type": "Logger", "declarator": "logger =\n            LoggerFactory.getLogger(KiePMMLRegressionTableClassificationFactory.class.getName())", "var_name": "logger"}, {"original_string": "private static final String MAIN_CLASS_NOT_FOUND = \"Main class not found\";", "modifier": "private static final", "type": "String", "declarator": "MAIN_CLASS_NOT_FOUND = \"Main class not found\"", "var_name": "MAIN_CLASS_NOT_FOUND"}, {"original_string": "private static final String KIE_PMML_GET_PROBABILITY_MAP_METHOD_TEMPLATE_JAVA =\n            \"KiePMMLGetProbabilityMapMethodTemplate.tmpl\";", "modifier": "private static final", "type": "String", "declarator": "KIE_PMML_GET_PROBABILITY_MAP_METHOD_TEMPLATE_JAVA =\n            \"KiePMMLGetProbabilityMapMethodTemplate.tmpl\"", "var_name": "KIE_PMML_GET_PROBABILITY_MAP_METHOD_TEMPLATE_JAVA"}, {"original_string": "private static final String KIE_PMML_GET_PROBABILITY_MAP_METHOD_TEMPLATE = \"KiePMMLGetProbabilityMapMethodTemplate\";", "modifier": "private static final", "type": "String", "declarator": "KIE_PMML_GET_PROBABILITY_MAP_METHOD_TEMPLATE = \"KiePMMLGetProbabilityMapMethodTemplate\"", "var_name": "KIE_PMML_GET_PROBABILITY_MAP_METHOD_TEMPLATE"}, {"original_string": "private static AtomicInteger classArity = new AtomicInteger(0);", "modifier": "private static", "type": "AtomicInteger", "declarator": "classArity = new AtomicInteger(0)", "var_name": "classArity"}, {"original_string": "private static CompilationUnit templateEvaluate;", "modifier": "private static", "type": "CompilationUnit", "declarator": "templateEvaluate", "var_name": "templateEvaluate"}, {"original_string": "private static CompilationUnit cloneEvaluate;", "modifier": "private static", "type": "CompilationUnit", "declarator": "cloneEvaluate", "var_name": "cloneEvaluate"}], "methods": [{"identifier": "KiePMMLRegressionTableClassificationFactory", "parameters": "()", "modifiers": "private", "return": "", "signature": " KiePMMLRegressionTableClassificationFactory()", "full_signature": "private  KiePMMLRegressionTableClassificationFactory()", "class_method_signature": "KiePMMLRegressionTableClassificationFactory.KiePMMLRegressionTableClassificationFactory()", "testcase": false, "constructor": true}, {"identifier": "getRegressionTables", "parameters": "(final List<RegressionTable> regressionTables, final RegressionModel.NormalizationMethod normalizationMethod, final OpType opType, final List<KiePMMLOutputField> outputFields, final String targetField, final String packageName)", "modifiers": "public static", "return": "Map<String, KiePMMLTableSourceCategory>", "signature": "Map<String, KiePMMLTableSourceCategory> getRegressionTables(final List<RegressionTable> regressionTables, final RegressionModel.NormalizationMethod normalizationMethod, final OpType opType, final List<KiePMMLOutputField> outputFields, final String targetField, final String packageName)", "full_signature": "public static Map<String, KiePMMLTableSourceCategory> getRegressionTables(final List<RegressionTable> regressionTables, final RegressionModel.NormalizationMethod normalizationMethod, final OpType opType, final List<KiePMMLOutputField> outputFields, final String targetField, final String packageName)", "class_method_signature": "KiePMMLRegressionTableClassificationFactory.getRegressionTables(final List<RegressionTable> regressionTables, final RegressionModel.NormalizationMethod normalizationMethod, final OpType opType, final List<KiePMMLOutputField> outputFields, final String targetField, final String packageName)", "testcase": false, "constructor": false}, {"identifier": "getRegressionTable", "parameters": "(final LinkedHashMap<String, KiePMMLTableSourceCategory> regressionTablesMap, final RegressionModel.NormalizationMethod normalizationMethod, final OpType opType, final List<KiePMMLOutputField> outputFields, final String targetField, final String packageName)", "modifiers": "public static", "return": "Map.Entry<String, String>", "signature": "Map.Entry<String, String> getRegressionTable(final LinkedHashMap<String, KiePMMLTableSourceCategory> regressionTablesMap, final RegressionModel.NormalizationMethod normalizationMethod, final OpType opType, final List<KiePMMLOutputField> outputFields, final String targetField, final String packageName)", "full_signature": "public static Map.Entry<String, String> getRegressionTable(final LinkedHashMap<String, KiePMMLTableSourceCategory> regressionTablesMap, final RegressionModel.NormalizationMethod normalizationMethod, final OpType opType, final List<KiePMMLOutputField> outputFields, final String targetField, final String packageName)", "class_method_signature": "KiePMMLRegressionTableClassificationFactory.getRegressionTable(final LinkedHashMap<String, KiePMMLTableSourceCategory> regressionTablesMap, final RegressionModel.NormalizationMethod normalizationMethod, final OpType opType, final List<KiePMMLOutputField> outputFields, final String targetField, final String packageName)", "testcase": false, "constructor": false}, {"identifier": "setConstructor", "parameters": "(final ConstructorDeclaration constructorDeclaration,\n                               final SimpleName generatedClassName, final String targetField,\n                               final REGRESSION_NORMALIZATION_METHOD regressionNormalizationMethod,\n                               final OP_TYPE opType)", "modifiers": "static", "return": "void", "signature": "void setConstructor(final ConstructorDeclaration constructorDeclaration,\n                               final SimpleName generatedClassName, final String targetField,\n                               final REGRESSION_NORMALIZATION_METHOD regressionNormalizationMethod,\n                               final OP_TYPE opType)", "full_signature": "static void setConstructor(final ConstructorDeclaration constructorDeclaration,\n                               final SimpleName generatedClassName, final String targetField,\n                               final REGRESSION_NORMALIZATION_METHOD regressionNormalizationMethod,\n                               final OP_TYPE opType)", "class_method_signature": "KiePMMLRegressionTableClassificationFactory.setConstructor(final ConstructorDeclaration constructorDeclaration,\n                               final SimpleName generatedClassName, final String targetField,\n                               final REGRESSION_NORMALIZATION_METHOD regressionNormalizationMethod,\n                               final OP_TYPE opType)", "testcase": false, "constructor": false}, {"identifier": "addMapPopulation", "parameters": "(final BlockStmt body,\n                                 final LinkedHashMap<String, KiePMMLTableSourceCategory> regressionTablesMap)", "modifiers": "static", "return": "void", "signature": "void addMapPopulation(final BlockStmt body,\n                                 final LinkedHashMap<String, KiePMMLTableSourceCategory> regressionTablesMap)", "full_signature": "static void addMapPopulation(final BlockStmt body,\n                                 final LinkedHashMap<String, KiePMMLTableSourceCategory> regressionTablesMap)", "class_method_signature": "KiePMMLRegressionTableClassificationFactory.addMapPopulation(final BlockStmt body,\n                                 final LinkedHashMap<String, KiePMMLTableSourceCategory> regressionTablesMap)", "testcase": false, "constructor": false}, {"identifier": "populateOutputFieldsMap", "parameters": "(final ClassOrInterfaceDeclaration tableTemplate,\n                                                final List<KiePMMLOutputField> outputFields)", "modifiers": "static", "return": "void", "signature": "void populateOutputFieldsMap(final ClassOrInterfaceDeclaration tableTemplate,\n                                                final List<KiePMMLOutputField> outputFields)", "full_signature": "static void populateOutputFieldsMap(final ClassOrInterfaceDeclaration tableTemplate,\n                                                final List<KiePMMLOutputField> outputFields)", "class_method_signature": "KiePMMLRegressionTableClassificationFactory.populateOutputFieldsMap(final ClassOrInterfaceDeclaration tableTemplate,\n                                                final List<KiePMMLOutputField> outputFields)", "testcase": false, "constructor": false}, {"identifier": "populateOutputFieldsMapWithProbability", "parameters": "(final BlockStmt body,\n                                                               final List<KiePMMLOutputField> outputFields)", "modifiers": "static", "return": "void", "signature": "void populateOutputFieldsMapWithProbability(final BlockStmt body,\n                                                               final List<KiePMMLOutputField> outputFields)", "full_signature": "static void populateOutputFieldsMapWithProbability(final BlockStmt body,\n                                                               final List<KiePMMLOutputField> outputFields)", "class_method_signature": "KiePMMLRegressionTableClassificationFactory.populateOutputFieldsMapWithProbability(final BlockStmt body,\n                                                               final List<KiePMMLOutputField> outputFields)", "testcase": false, "constructor": false}, {"identifier": "populateGetProbabilityMapMethod", "parameters": "(final RegressionModel.NormalizationMethod normalizationMethod,\n                                                final ClassOrInterfaceDeclaration tableTemplate)", "modifiers": "static", "return": "void", "signature": "void populateGetProbabilityMapMethod(final RegressionModel.NormalizationMethod normalizationMethod,\n                                                final ClassOrInterfaceDeclaration tableTemplate)", "full_signature": "static void populateGetProbabilityMapMethod(final RegressionModel.NormalizationMethod normalizationMethod,\n                                                final ClassOrInterfaceDeclaration tableTemplate)", "class_method_signature": "KiePMMLRegressionTableClassificationFactory.populateGetProbabilityMapMethod(final RegressionModel.NormalizationMethod normalizationMethod,\n                                                final ClassOrInterfaceDeclaration tableTemplate)", "testcase": false, "constructor": false}, {"identifier": "populateIsBinaryMethod", "parameters": "(final OpType opType, int size,\n                                               final ClassOrInterfaceDeclaration tableTemplate)", "modifiers": "static", "return": "void", "signature": "void populateIsBinaryMethod(final OpType opType, int size,\n                                               final ClassOrInterfaceDeclaration tableTemplate)", "full_signature": "static void populateIsBinaryMethod(final OpType opType, int size,\n                                               final ClassOrInterfaceDeclaration tableTemplate)", "class_method_signature": "KiePMMLRegressionTableClassificationFactory.populateIsBinaryMethod(final OpType opType, int size,\n                                               final ClassOrInterfaceDeclaration tableTemplate)", "testcase": false, "constructor": false}], "file": "kie-pmml-trusty/kie-pmml-models/kie-pmml-models-regression/kie-pmml-models-regression-compiler/src/main/java/org/kie/pmml/models/regression/compiler/factories/KiePMMLRegressionTableClassificationFactory.java"}, "focal_method": {"identifier": "getRegressionTable", "parameters": "(final LinkedHashMap<String, KiePMMLTableSourceCategory> regressionTablesMap, final RegressionModel.NormalizationMethod normalizationMethod, final OpType opType, final List<KiePMMLOutputField> outputFields, final String targetField, final String packageName)", "modifiers": "public static", "return": "Map.Entry<String, String>", "body": "public static Map.Entry<String, String> getRegressionTable(final LinkedHashMap<String, KiePMMLTableSourceCategory> regressionTablesMap, final RegressionModel.NormalizationMethod normalizationMethod, final OpType opType, final List<KiePMMLOutputField> outputFields, final String targetField, final String packageName) {\n        logger.trace(\"getRegressionTable {}\", regressionTablesMap);\n        String className = \"KiePMMLRegressionTableClassification\" + classArity.addAndGet(1);\n        CompilationUnit cloneCU = JavaParserUtils.getKiePMMLModelCompilationUnit(className, packageName,\n                                                                                 KIE_PMML_REGRESSION_TABLE_CLASSIFICATION_TEMPLATE_JAVA, KIE_PMML_REGRESSION_TABLE_CLASSIFICATION_TEMPLATE);\n        ClassOrInterfaceDeclaration tableTemplate = cloneCU.getClassByName(className)\n                .orElseThrow(() -> new KiePMMLException(MAIN_CLASS_NOT_FOUND + \": \" + className));\n        final REGRESSION_NORMALIZATION_METHOD regressionNormalizationMethod =\n                REGRESSION_NORMALIZATION_METHOD.byName(normalizationMethod.value());\n        final OP_TYPE opTypePmml = opType != null ? OP_TYPE.byName(opType.value()) : null;\n        populateGetProbabilityMapMethod(normalizationMethod, tableTemplate);\n        populateOutputFieldsMap(tableTemplate, outputFields);\n        populateIsBinaryMethod(opType, regressionTablesMap.size(), tableTemplate);\n        final ConstructorDeclaration constructorDeclaration =\n                tableTemplate.getDefaultConstructor().orElseThrow(() -> new KiePMMLInternalException(String.format(MISSING_DEFAULT_CONSTRUCTOR, tableTemplate.getName())));\n        setConstructor(constructorDeclaration, tableTemplate.getName(), targetField, regressionNormalizationMethod,\n                       opTypePmml);\n        addMapPopulation(constructorDeclaration.getBody(), regressionTablesMap);\n        populateGetTargetCategory(tableTemplate, null);\n        return new AbstractMap.SimpleEntry<>(getFullClassName(cloneCU), cloneCU.toString());\n    }", "signature": "Map.Entry<String, String> getRegressionTable(final LinkedHashMap<String, KiePMMLTableSourceCategory> regressionTablesMap, final RegressionModel.NormalizationMethod normalizationMethod, final OpType opType, final List<KiePMMLOutputField> outputFields, final String targetField, final String packageName)", "full_signature": "public static Map.Entry<String, String> getRegressionTable(final LinkedHashMap<String, KiePMMLTableSourceCategory> regressionTablesMap, final RegressionModel.NormalizationMethod normalizationMethod, final OpType opType, final List<KiePMMLOutputField> outputFields, final String targetField, final String packageName)", "class_method_signature": "KiePMMLRegressionTableClassificationFactory.getRegressionTable(final LinkedHashMap<String, KiePMMLTableSourceCategory> regressionTablesMap, final RegressionModel.NormalizationMethod normalizationMethod, final OpType opType, final List<KiePMMLOutputField> outputFields, final String targetField, final String packageName)", "testcase": false, "constructor": false, "invocations": ["trace", "addAndGet", "getKiePMMLModelCompilationUnit", "orElseThrow", "getClassByName", "byName", "value", "byName", "value", "populateGetProbabilityMapMethod", "populateOutputFieldsMap", "populateIsBinaryMethod", "size", "orElseThrow", "getDefaultConstructor", "format", "getName", "setConstructor", "getName", "addMapPopulation", "getBody", "populateGetTargetCategory", "getFullClassName", "toString"]}, "repository": {"repo_id": 1381673, "url": "https://github.com/kiegroup/drools", "stars": 2733, "created": "2/18/2011 8:37:05 AM +00:00", "updates": "2020-01-27T13:12:15+00:00", "fork": "False", "license": "licensed"}}