{"test_class": {"identifier": "DefaultNodeMatcherTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private INodeMatcherPlugin nodeMatcher;", "modifier": "private", "type": "INodeMatcherPlugin", "declarator": "nodeMatcher", "var_name": "nodeMatcher"}, {"original_string": "private NodeType computeNodeType;", "modifier": "private", "type": "NodeType", "declarator": "computeNodeType", "var_name": "computeNodeType"}, {"original_string": "private NodeTemplate computeNodeTemplate;", "modifier": "private", "type": "NodeTemplate", "declarator": "computeNodeTemplate", "var_name": "computeNodeTemplate"}, {"original_string": "private LocationResources locationResources;", "modifier": "private", "type": "LocationResources", "declarator": "locationResources", "var_name": "locationResources"}], "file": "alien4cloud-core/src/test/java/alien4cloud/deployment/matching/services/nodes/DefaultNodeMatcherTest.java"}, "test_case": {"identifier": "location_resource_should_be_matched_only_if_capabilities_are_satisfied", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void location_resource_should_be_matched_only_if_capabilities_are_satisfied() throws Exception {\n        // Given\n        CapabilityDefinition capabilityArchitecture = new CapabilityDefinition(\"tosca.capabilities.OperatingSystem\");\n        computeNodeType.setCapabilities(Arrays.asList(capabilityArchitecture));\n\n        Capability capability = new Capability();\n        capability.setType(\"tosca.capabilities.OperatingSystem\");\n        capability.setProperties(ImmutableMap.of(\"architecture\", new ScalarPropertyValue(\"x86\")));\n        computeNodeTemplate.setCapabilities(ImmutableMap.of(\"os\", capability));\n\n        CapabilityType capabilityType = new CapabilityType();\n        PropertyDefinition propertyDefinition = new PropertyDefinition();\n        propertyDefinition.setType(\"string\");\n        capabilityType.setElementId(\"tosca.capabilities.OperatingSystem\");\n        capabilityType.setProperties(ImmutableMap.of(\"architecture\", propertyDefinition));\n        locationResources.setCapabilityTypes(ImmutableMap.of(\"tosca.capabilities.OperatingSystem\", capabilityType));\n\n        // Matching configuration\n        Map<String, MatchingConfiguration> capabilityFilterConfiguration = new HashMap<>();\n        MatchingConfiguration matchingConfiguration = new MatchingConfiguration();\n        MatchingFilterDefinition matchingFilterDefinition = new MatchingConfiguration();\n        matchingFilterDefinition.setProperties(ImmutableMap.of(\"architecture\", Arrays.asList(new EqualConstraint())));\n        matchingConfiguration.setCapabilities(ImmutableMap.of(\"os\", matchingFilterDefinition));\n        capabilityFilterConfiguration.put(\"org.alien4cloud.nodes.mock.aws.Compute\", matchingConfiguration);\n\n        // When\n        NodeTemplate wantedNodeTemplate = new NodeTemplate();\n        wantedNodeTemplate.setType(\"tosca.nodes.Compute\");\n        Capability wantedCapability = new Capability();\n        wantedCapability.setType(\"tosca.capabilities.OperatingSystem\");\n        wantedCapability.setProperties(ImmutableMap.of(\"architecture\", new ScalarPropertyValue(\"power_pc\")));\n        wantedNodeTemplate.setCapabilities(ImmutableMap.of(\"os\", wantedCapability));\n\n        NodeType nodeType = new NodeType();\n\n        List<LocationResourceTemplate> proposition = nodeMatcher.matchNode(wantedNodeTemplate, nodeType, locationResources, capabilityFilterConfiguration);\n\n        // Then\n        assertThat(proposition).hasSize(0);\n    }", "signature": "void location_resource_should_be_matched_only_if_capabilities_are_satisfied()", "full_signature": "@Test public void location_resource_should_be_matched_only_if_capabilities_are_satisfied()", "class_method_signature": "DefaultNodeMatcherTest.location_resource_should_be_matched_only_if_capabilities_are_satisfied()", "testcase": true, "constructor": false, "invocations": ["setCapabilities", "asList", "setType", "setProperties", "of", "setCapabilities", "of", "setType", "setElementId", "setProperties", "of", "setCapabilityTypes", "of", "setProperties", "of", "asList", "setCapabilities", "of", "put", "setType", "setType", "setProperties", "of", "setCapabilities", "of", "matchNode", "hasSize", "assertThat"]}, "focal_class": {"identifier": "DefaultNodeMatcher", "superclass": "extends AbstractTemplateMatcher<LocationResourceTemplate, NodeTemplate, NodeType>", "interfaces": "implements INodeMatcherPlugin", "fields": [], "methods": [{"identifier": "matchNode", "parameters": "(NodeTemplate nodeTemplate, NodeType nodeType, LocationResources locationResources,\n            Map<String, MatchingConfiguration> matchingConfigurations)", "modifiers": "public", "return": "List<LocationResourceTemplate>", "signature": "List<LocationResourceTemplate> matchNode(NodeTemplate nodeTemplate, NodeType nodeType, LocationResources locationResources,\n            Map<String, MatchingConfiguration> matchingConfigurations)", "full_signature": "public List<LocationResourceTemplate> matchNode(NodeTemplate nodeTemplate, NodeType nodeType, LocationResources locationResources,\n            Map<String, MatchingConfiguration> matchingConfigurations)", "class_method_signature": "DefaultNodeMatcher.matchNode(NodeTemplate nodeTemplate, NodeType nodeType, LocationResources locationResources,\n            Map<String, MatchingConfiguration> matchingConfigurations)", "testcase": false, "constructor": false}, {"identifier": "typeSpecificMatching", "parameters": "(NodeTemplate abstractTemplate, LocationResourceTemplate candidate, NodeType candidateType,\n            LocationResources locationResources, MatchingConfiguration matchingConfiguration)", "modifiers": "@Override protected", "return": "boolean", "signature": "boolean typeSpecificMatching(NodeTemplate abstractTemplate, LocationResourceTemplate candidate, NodeType candidateType,\n            LocationResources locationResources, MatchingConfiguration matchingConfiguration)", "full_signature": "@Override protected boolean typeSpecificMatching(NodeTemplate abstractTemplate, LocationResourceTemplate candidate, NodeType candidateType,\n            LocationResources locationResources, MatchingConfiguration matchingConfiguration)", "class_method_signature": "DefaultNodeMatcher.typeSpecificMatching(NodeTemplate abstractTemplate, LocationResourceTemplate candidate, NodeType candidateType,\n            LocationResources locationResources, MatchingConfiguration matchingConfiguration)", "testcase": false, "constructor": false}], "file": "alien4cloud-core/src/main/java/alien4cloud/deployment/matching/services/nodes/DefaultNodeMatcher.java"}, "focal_method": {"identifier": "matchNode", "parameters": "(NodeTemplate nodeTemplate, NodeType nodeType, LocationResources locationResources,\n            Map<String, MatchingConfiguration> matchingConfigurations)", "modifiers": "public", "return": "List<LocationResourceTemplate>", "body": "public List<LocationResourceTemplate> matchNode(NodeTemplate nodeTemplate, NodeType nodeType, LocationResources locationResources,\n            Map<String, MatchingConfiguration> matchingConfigurations) {\n        return super.match(nodeTemplate, nodeType, locationResources.getNodeTemplates(), locationResources.getNodeTypes(), locationResources,\n                matchingConfigurations);\n    }", "signature": "List<LocationResourceTemplate> matchNode(NodeTemplate nodeTemplate, NodeType nodeType, LocationResources locationResources,\n            Map<String, MatchingConfiguration> matchingConfigurations)", "full_signature": "public List<LocationResourceTemplate> matchNode(NodeTemplate nodeTemplate, NodeType nodeType, LocationResources locationResources,\n            Map<String, MatchingConfiguration> matchingConfigurations)", "class_method_signature": "DefaultNodeMatcher.matchNode(NodeTemplate nodeTemplate, NodeType nodeType, LocationResources locationResources,\n            Map<String, MatchingConfiguration> matchingConfigurations)", "testcase": false, "constructor": false, "invocations": ["match", "getNodeTemplates", "getNodeTypes"]}, "repository": {"repo_id": 24750302, "url": "https://github.com/alien4cloud/alien4cloud", "language": "Java", "is_fork": false, "fork_count": 64, "stargazer_count": 67, "size": 27647, "license": "licensed"}}