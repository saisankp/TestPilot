{"test_class": {"identifier": "BlockchainEventsTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final String ACCOUNT_ID = \"GBLUDU6Y6KVM5MCJWOLPVVSJEVICGEGXHOOHEAPWRSXJ7XVMBFKISOLR\";", "modifier": "private static final", "type": "String", "declarator": "ACCOUNT_ID = \"GBLUDU6Y6KVM5MCJWOLPVVSJEVICGEGXHOOHEAPWRSXJ7XVMBFKISOLR\"", "var_name": "ACCOUNT_ID"}, {"original_string": "@Rule\n    public ExpectedException expectedEx = ExpectedException.none();", "modifier": "@Rule\n    public", "type": "ExpectedException", "declarator": "expectedEx = ExpectedException.none()", "var_name": "expectedEx"}, {"original_string": "@Mock\n    private Server server;", "modifier": "@Mock\n    private", "type": "Server", "declarator": "server", "var_name": "server"}, {"original_string": "@Mock\n    private TransactionsRequestBuilder mockTransactionsRequestBuilder;", "modifier": "@Mock\n    private", "type": "TransactionsRequestBuilder", "declarator": "mockTransactionsRequestBuilder", "var_name": "mockTransactionsRequestBuilder"}, {"original_string": "@Mock\n    private ServerSentEvent mockServerSentEvent;", "modifier": "@Mock\n    private", "type": "ServerSentEvent", "declarator": "mockServerSentEvent", "var_name": "mockServerSentEvent"}, {"original_string": "private BlockchainEvents blockchainEvents;", "modifier": "private", "type": "BlockchainEvents", "declarator": "blockchainEvents", "var_name": "blockchainEvents"}, {"original_string": "private ConcurrentLinkedQueue<TransactionResponse> responsesQueue = new ConcurrentLinkedQueue<>();", "modifier": "private", "type": "ConcurrentLinkedQueue<TransactionResponse>", "declarator": "responsesQueue = new ConcurrentLinkedQueue<>()", "var_name": "responsesQueue"}, {"original_string": "private volatile boolean isCancelled = false;", "modifier": "private volatile", "type": "boolean", "declarator": "isCancelled = false", "var_name": "isCancelled"}], "file": "kin-sdk/kin-sdk-lib/src/test/java/kin/sdk/BlockchainEventsTest.java"}, "test_case": {"identifier": "addPaymentListener", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void addPaymentListener() throws Exception {\n        enqueueTransactionsResponses();\n\n        final CountDownLatch latch = new CountDownLatch(1);\n        final List<PaymentInfo> actualResults = new ArrayList<>();\n        blockchainEvents.addPaymentListener(new EventListener<PaymentInfo>() {\n            @Override\n            public void onEvent(PaymentInfo data) {\n                actualResults.add(data);\n                if (actualResults.size() == 2) {\n                    latch.countDown();\n                }\n            }\n        });\n        assertTrue(latch.await(1, TimeUnit.SECONDS));\n\n        assertThat(actualResults.size(), equalTo(2));\n        PaymentInfo payment1 = actualResults.get(0);\n        PaymentInfo payment2 = actualResults.get(1);\n        assertThat(payment1.hash().id(),\n                equalTo(\"3eb3024a9c03451e7c8b8d3ba525a3a241e286cb694a262444d46d92e7605f22\"));\n        assertThat(payment1.sourcePublicKey(), equalTo(\"GBLUDU6Y6KVM5MCJWOLPVVSJEVICGEGXHOOHEAPWRSXJ7XVMBFKISOLR\"));\n        assertThat(payment1.destinationPublicKey(),\n                equalTo(\"GANPYEGVH3ZVQFMQVVYFRP7U3HKE5LIJ3345ORI26G2OAX7HV66VIE7F\"));\n        assertThat(payment1.amount(), equalTo(new BigDecimal(\"250\")));\n        assertThat(payment1.createdAt(), equalTo(\"2018-11-19T15:59:07Z\"));\n        assertThat(payment1.fee(), equalTo(100L));\n        assertThat(payment1.memo(), equalTo(\"1-test-test1\"));\n\n        assertThat(payment2.hash().id(),\n                equalTo(\"c4ad29472150a741c0924086a76fea1aac326261afacee05c0b36be7e8fb5727\"));\n        assertThat(payment2.sourcePublicKey(), equalTo(\"GBLUDU6Y6KVM5MCJWOLPVVSJEVICGEGXHOOHEAPWRSXJ7XVMBFKISOLR\"));\n        assertThat(payment2.destinationPublicKey(),\n                equalTo(\"GANPYEGVH3ZVQFMQVVYFRP7U3HKE5LIJ3345ORI26G2OAX7HV66VIE7F\"));\n        assertThat(payment2.amount(), equalTo(new BigDecimal(\"250\")));\n        assertThat(payment2.createdAt(), equalTo(\"2018-11-19T16:36:42Z\"));\n        assertThat(payment2.fee(), equalTo(100L));\n        assertThat(payment2.memo(), equalTo(\"1-test-test1\"));\n    }", "signature": "void addPaymentListener()", "full_signature": "@Test public void addPaymentListener()", "class_method_signature": "BlockchainEventsTest.addPaymentListener()", "testcase": true, "constructor": false, "invocations": ["enqueueTransactionsResponses", "addPaymentListener", "add", "size", "countDown", "assertTrue", "await", "assertThat", "size", "equalTo", "get", "get", "assertThat", "id", "hash", "equalTo", "assertThat", "sourcePublicKey", "equalTo", "assertThat", "destinationPublicKey", "equalTo", "assertThat", "amount", "equalTo", "assertThat", "createdAt", "equalTo", "assertThat", "fee", "equalTo", "assertThat", "memo", "equalTo", "assertThat", "id", "hash", "equalTo", "assertThat", "sourcePublicKey", "equalTo", "assertThat", "destinationPublicKey", "equalTo", "assertThat", "amount", "equalTo", "assertThat", "createdAt", "equalTo", "assertThat", "fee", "equalTo", "assertThat", "memo", "equalTo"]}, "focal_class": {"identifier": "BlockchainEvents", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final String ASSET_TYPE_NATIVE = \"native\";", "modifier": "private static final", "type": "String", "declarator": "ASSET_TYPE_NATIVE = \"native\"", "var_name": "ASSET_TYPE_NATIVE"}, {"original_string": "private static final String CURSOR_FUTURE_ONLY = \"now\";", "modifier": "private static final", "type": "String", "declarator": "CURSOR_FUTURE_ONLY = \"now\"", "var_name": "CURSOR_FUTURE_ONLY"}, {"original_string": "private final KeyPair accountKeyPair;", "modifier": "private final", "type": "KeyPair", "declarator": "accountKeyPair", "var_name": "accountKeyPair"}, {"original_string": "private final ManagedServerSentEventStream<TransactionResponse> transactionsStream;", "modifier": "private final", "type": "ManagedServerSentEventStream<TransactionResponse>", "declarator": "transactionsStream", "var_name": "transactionsStream"}], "methods": [{"identifier": "BlockchainEvents", "parameters": "(Server server, String accountId)", "modifiers": "", "return": "", "signature": " BlockchainEvents(Server server, String accountId)", "full_signature": "  BlockchainEvents(Server server, String accountId)", "class_method_signature": "BlockchainEvents.BlockchainEvents(Server server, String accountId)", "testcase": false, "constructor": true}, {"identifier": "addBalanceListener", "parameters": "(@NonNull final EventListener<Balance> listener)", "modifiers": "", "return": "ListenerRegistration", "signature": "ListenerRegistration addBalanceListener(@NonNull final EventListener<Balance> listener)", "full_signature": " ListenerRegistration addBalanceListener(@NonNull final EventListener<Balance> listener)", "class_method_signature": "BlockchainEvents.addBalanceListener(@NonNull final EventListener<Balance> listener)", "testcase": false, "constructor": false}, {"identifier": "extractBalanceChangeFromTransaction", "parameters": "(TransactionResponse transactionResponse,\n                                                     @NonNull EventListener<Balance> listener)", "modifiers": "private", "return": "void", "signature": "void extractBalanceChangeFromTransaction(TransactionResponse transactionResponse,\n                                                     @NonNull EventListener<Balance> listener)", "full_signature": "private void extractBalanceChangeFromTransaction(TransactionResponse transactionResponse,\n                                                     @NonNull EventListener<Balance> listener)", "class_method_signature": "BlockchainEvents.extractBalanceChangeFromTransaction(TransactionResponse transactionResponse,\n                                                     @NonNull EventListener<Balance> listener)", "testcase": false, "constructor": false}, {"identifier": "extractBalanceFromUpdate", "parameters": "(@NonNull EventListener<Balance> listener,\n                                          LedgerEntryChange ledgerEntryUpdate)", "modifiers": "private", "return": "void", "signature": "void extractBalanceFromUpdate(@NonNull EventListener<Balance> listener,\n                                          LedgerEntryChange ledgerEntryUpdate)", "full_signature": "private void extractBalanceFromUpdate(@NonNull EventListener<Balance> listener,\n                                          LedgerEntryChange ledgerEntryUpdate)", "class_method_signature": "BlockchainEvents.extractBalanceFromUpdate(@NonNull EventListener<Balance> listener,\n                                          LedgerEntryChange ledgerEntryUpdate)", "testcase": false, "constructor": false}, {"identifier": "addPaymentListener", "parameters": "(@NonNull final EventListener<PaymentInfo> listener)", "modifiers": "", "return": "ListenerRegistration", "signature": "ListenerRegistration addPaymentListener(@NonNull final EventListener<PaymentInfo> listener)", "full_signature": " ListenerRegistration addPaymentListener(@NonNull final EventListener<PaymentInfo> listener)", "class_method_signature": "BlockchainEvents.addPaymentListener(@NonNull final EventListener<PaymentInfo> listener)", "testcase": false, "constructor": false}, {"identifier": "addAccountCreationListener", "parameters": "(final EventListener<Void> listener)", "modifiers": "", "return": "ListenerRegistration", "signature": "ListenerRegistration addAccountCreationListener(final EventListener<Void> listener)", "full_signature": " ListenerRegistration addAccountCreationListener(final EventListener<Void> listener)", "class_method_signature": "BlockchainEvents.addAccountCreationListener(final EventListener<Void> listener)", "testcase": false, "constructor": false}, {"identifier": "extractPaymentsFromTransaction", "parameters": "(TransactionResponse transactionResponse,\n                                                EventListener<PaymentInfo> listener)", "modifiers": "private", "return": "void", "signature": "void extractPaymentsFromTransaction(TransactionResponse transactionResponse,\n                                                EventListener<PaymentInfo> listener)", "full_signature": "private void extractPaymentsFromTransaction(TransactionResponse transactionResponse,\n                                                EventListener<PaymentInfo> listener)", "class_method_signature": "BlockchainEvents.extractPaymentsFromTransaction(TransactionResponse transactionResponse,\n                                                EventListener<PaymentInfo> listener)", "testcase": false, "constructor": false}, {"identifier": "isPaymentNative", "parameters": "(Asset asset)", "modifiers": "private", "return": "boolean", "signature": "boolean isPaymentNative(Asset asset)", "full_signature": "private boolean isPaymentNative(Asset asset)", "class_method_signature": "BlockchainEvents.isPaymentNative(Asset asset)", "testcase": false, "constructor": false}, {"identifier": "extractSourceAccountId", "parameters": "(TransactionResponse transactionResponse, Operation operation)", "modifiers": "private", "return": "String", "signature": "String extractSourceAccountId(TransactionResponse transactionResponse, Operation operation)", "full_signature": "private String extractSourceAccountId(TransactionResponse transactionResponse, Operation operation)", "class_method_signature": "BlockchainEvents.extractSourceAccountId(TransactionResponse transactionResponse, Operation operation)", "testcase": false, "constructor": false}, {"identifier": "extractHashTextIfAny", "parameters": "(TransactionResponse transactionResponse)", "modifiers": "private", "return": "String", "signature": "String extractHashTextIfAny(TransactionResponse transactionResponse)", "full_signature": "private String extractHashTextIfAny(TransactionResponse transactionResponse)", "class_method_signature": "BlockchainEvents.extractHashTextIfAny(TransactionResponse transactionResponse)", "testcase": false, "constructor": false}], "file": "kin-sdk/kin-sdk-lib/src/main/java/kin/sdk/BlockchainEvents.java"}, "focal_method": {"identifier": "addPaymentListener", "parameters": "(@NonNull final EventListener<PaymentInfo> listener)", "modifiers": "", "return": "ListenerRegistration", "body": "ListenerRegistration addPaymentListener(@NonNull final EventListener<PaymentInfo> listener) {\n        checkNotNull(listener, \"listener\");\n\n        final kin.base.requests.EventListener<TransactionResponse> responseListener = new kin.base.requests.EventListener<TransactionResponse>() {\n            @Override\n            public void onEvent(TransactionResponse transactionResponse) {\n                extractPaymentsFromTransaction(transactionResponse, listener);\n            }\n        };\n\n        transactionsStream.addListener(responseListener);\n\n        return new ListenerRegistration(new Runnable() {\n            @Override\n            public void run() {\n                transactionsStream.removeListener(responseListener);\n            }\n        });\n    }", "signature": "ListenerRegistration addPaymentListener(@NonNull final EventListener<PaymentInfo> listener)", "full_signature": " ListenerRegistration addPaymentListener(@NonNull final EventListener<PaymentInfo> listener)", "class_method_signature": "BlockchainEvents.addPaymentListener(@NonNull final EventListener<PaymentInfo> listener)", "testcase": false, "constructor": false, "invocations": ["checkNotNull", "extractPaymentsFromTransaction", "addListener", "removeListener"]}, "repository": {"repo_id": 156408389, "url": "https://github.com/kinecosystem/kin-sdk-android", "language": "Java", "is_fork": false, "fork_count": 11, "stargazer_count": 9, "size": 3232, "license": "licensed"}}