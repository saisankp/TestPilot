{"test_class": {"identifier": "PlaylistServiceTest", "superclass": "extends PrimeTimeTest", "interfaces": "", "fields": [{"original_string": "private PageService pageService;", "modifier": "private", "type": "PageService", "declarator": "pageService", "var_name": "pageService"}, {"original_string": "private PlaylistService playlistService;", "modifier": "private", "type": "PlaylistService", "declarator": "playlistService", "var_name": "playlistService"}, {"original_string": "private ScreenService screenService;", "modifier": "private", "type": "ScreenService", "declarator": "screenService", "var_name": "screenService"}, {"original_string": "private FileService fileService;", "modifier": "private", "type": "FileService", "declarator": "fileService", "var_name": "fileService"}], "file": "common/app/src/test/java/com/sap/primetime/api/PlaylistServiceTest.java"}, "test_case": {"identifier": "testGetReferencesForNonExistingPlaylist", "parameters": "()", "modifiers": "@Test(expected = WebApplicationException.class) public", "return": "void", "body": "@Test(expected = WebApplicationException.class)\n\tpublic void testGetReferencesForNonExistingPlaylist() throws Exception {\n\t\tplaylistService.getReferences(-1);\n\t}", "signature": "void testGetReferencesForNonExistingPlaylist()", "full_signature": "@Test(expected = WebApplicationException.class) public void testGetReferencesForNonExistingPlaylist()", "class_method_signature": "PlaylistServiceTest.testGetReferencesForNonExistingPlaylist()", "testcase": true, "constructor": false, "invocations": ["getReferences"]}, "focal_class": {"identifier": "PlaylistService", "superclass": "extends BasicService", "interfaces": "implements OwnerAPISupport<Playlist>", "fields": [], "methods": [{"identifier": "getPlaylists", "parameters": "(@DefaultValue(\"false\") @QueryParam(\"expand\") boolean expand,\n\t\t\t@QueryParam(\"userId\") String userId)", "modifiers": "@GET @Path(\"/playlists\") @Produces(MediaType.APPLICATION_JSON) public", "return": "List<Playlist>", "signature": "List<Playlist> getPlaylists(@DefaultValue(\"false\") @QueryParam(\"expand\") boolean expand,\n\t\t\t@QueryParam(\"userId\") String userId)", "full_signature": "@GET @Path(\"/playlists\") @Produces(MediaType.APPLICATION_JSON) public List<Playlist> getPlaylists(@DefaultValue(\"false\") @QueryParam(\"expand\") boolean expand,\n\t\t\t@QueryParam(\"userId\") String userId)", "class_method_signature": "PlaylistService.getPlaylists(@DefaultValue(\"false\") @QueryParam(\"expand\") boolean expand,\n\t\t\t@QueryParam(\"userId\") String userId)", "testcase": false, "constructor": false}, {"identifier": "getPlaylistCatalog", "parameters": "(@DefaultValue(\"0\") @QueryParam(\"exclude\") long excludeId)", "modifiers": "@GET @Path(\"/catalog\") @Produces(MediaType.APPLICATION_JSON) public", "return": "List<Playlist>", "signature": "List<Playlist> getPlaylistCatalog(@DefaultValue(\"0\") @QueryParam(\"exclude\") long excludeId)", "full_signature": "@GET @Path(\"/catalog\") @Produces(MediaType.APPLICATION_JSON) public List<Playlist> getPlaylistCatalog(@DefaultValue(\"0\") @QueryParam(\"exclude\") long excludeId)", "class_method_signature": "PlaylistService.getPlaylistCatalog(@DefaultValue(\"0\") @QueryParam(\"exclude\") long excludeId)", "testcase": false, "constructor": false}, {"identifier": "getPlaylist", "parameters": "(@PathParam(\"playlistId\") long playlistId,\n\t\t\t@DefaultValue(\"false\") @QueryParam(\"visibleOnly\") boolean visibleOnly,\n\t\t\t@DefaultValue(\"false\") @QueryParam(\"expand\") boolean expand,\n\t\t\t@DefaultValue(\"true\") @QueryParam(\"includeMetrics\") boolean includeMetrics)", "modifiers": "@GET @Path(\"/playlists/{playlistId}\") @Produces(MediaType.APPLICATION_JSON) public", "return": "Playlist", "signature": "Playlist getPlaylist(@PathParam(\"playlistId\") long playlistId,\n\t\t\t@DefaultValue(\"false\") @QueryParam(\"visibleOnly\") boolean visibleOnly,\n\t\t\t@DefaultValue(\"false\") @QueryParam(\"expand\") boolean expand,\n\t\t\t@DefaultValue(\"true\") @QueryParam(\"includeMetrics\") boolean includeMetrics)", "full_signature": "@GET @Path(\"/playlists/{playlistId}\") @Produces(MediaType.APPLICATION_JSON) public Playlist getPlaylist(@PathParam(\"playlistId\") long playlistId,\n\t\t\t@DefaultValue(\"false\") @QueryParam(\"visibleOnly\") boolean visibleOnly,\n\t\t\t@DefaultValue(\"false\") @QueryParam(\"expand\") boolean expand,\n\t\t\t@DefaultValue(\"true\") @QueryParam(\"includeMetrics\") boolean includeMetrics)", "class_method_signature": "PlaylistService.getPlaylist(@PathParam(\"playlistId\") long playlistId,\n\t\t\t@DefaultValue(\"false\") @QueryParam(\"visibleOnly\") boolean visibleOnly,\n\t\t\t@DefaultValue(\"false\") @QueryParam(\"expand\") boolean expand,\n\t\t\t@DefaultValue(\"true\") @QueryParam(\"includeMetrics\") boolean includeMetrics)", "testcase": false, "constructor": false}, {"identifier": "updatePlaylist", "parameters": "(@PathParam(\"playlistId\") long playlistId, Playlist playlistData)", "modifiers": "@PUT @Path(\"/playlists/{playlistId}\") @Produces(MediaType.APPLICATION_JSON) public", "return": "Playlist", "signature": "Playlist updatePlaylist(@PathParam(\"playlistId\") long playlistId, Playlist playlistData)", "full_signature": "@PUT @Path(\"/playlists/{playlistId}\") @Produces(MediaType.APPLICATION_JSON) public Playlist updatePlaylist(@PathParam(\"playlistId\") long playlistId, Playlist playlistData)", "class_method_signature": "PlaylistService.updatePlaylist(@PathParam(\"playlistId\") long playlistId, Playlist playlistData)", "testcase": false, "constructor": false}, {"identifier": "createPlaylist", "parameters": "(Playlist playlist)", "modifiers": "@POST @Path(\"/playlists\") @Consumes(MediaType.APPLICATION_JSON) @Produces(MediaType.APPLICATION_JSON) public", "return": "Playlist", "signature": "Playlist createPlaylist(Playlist playlist)", "full_signature": "@POST @Path(\"/playlists\") @Consumes(MediaType.APPLICATION_JSON) @Produces(MediaType.APPLICATION_JSON) public Playlist createPlaylist(Playlist playlist)", "class_method_signature": "PlaylistService.createPlaylist(Playlist playlist)", "testcase": false, "constructor": false}, {"identifier": "addPage", "parameters": "(@PathParam(\"playlistId\") long playlistId, Page page)", "modifiers": "@POST @Path(\"/playlists/{playlistId}/pages\") @Consumes(MediaType.APPLICATION_JSON) public", "return": "Playlist", "signature": "Playlist addPage(@PathParam(\"playlistId\") long playlistId, Page page)", "full_signature": "@POST @Path(\"/playlists/{playlistId}/pages\") @Consumes(MediaType.APPLICATION_JSON) public Playlist addPage(@PathParam(\"playlistId\") long playlistId, Page page)", "class_method_signature": "PlaylistService.addPage(@PathParam(\"playlistId\") long playlistId, Page page)", "testcase": false, "constructor": false}, {"identifier": "addPlaylist", "parameters": "(@PathParam(\"playlistId\") long playlistId, Playlist playlist)", "modifiers": "@POST @Path(\"/playlists/{playlistId}/playlists\") @Consumes(MediaType.APPLICATION_JSON) public", "return": "Playlist", "signature": "Playlist addPlaylist(@PathParam(\"playlistId\") long playlistId, Playlist playlist)", "full_signature": "@POST @Path(\"/playlists/{playlistId}/playlists\") @Consumes(MediaType.APPLICATION_JSON) public Playlist addPlaylist(@PathParam(\"playlistId\") long playlistId, Playlist playlist)", "class_method_signature": "PlaylistService.addPlaylist(@PathParam(\"playlistId\") long playlistId, Playlist playlist)", "testcase": false, "constructor": false}, {"identifier": "addFile", "parameters": "(@PathParam(\"playlistId\") long playlistId, File file)", "modifiers": "@POST @Path(\"/playlists/{playlistId}/files\") @Consumes(MediaType.APPLICATION_JSON) public", "return": "Playlist", "signature": "Playlist addFile(@PathParam(\"playlistId\") long playlistId, File file)", "full_signature": "@POST @Path(\"/playlists/{playlistId}/files\") @Consumes(MediaType.APPLICATION_JSON) public Playlist addFile(@PathParam(\"playlistId\") long playlistId, File file)", "class_method_signature": "PlaylistService.addFile(@PathParam(\"playlistId\") long playlistId, File file)", "testcase": false, "constructor": false}, {"identifier": "updatePageReference", "parameters": "(@PathParam(\"pageRefId\") long pageRefId, PageReference pageRef)", "modifiers": "@PUT @Path(\"/playlists/{playlistId}/pagereferences/{pageRefId}\") @Produces(MediaType.APPLICATION_JSON) public", "return": "PageReference", "signature": "PageReference updatePageReference(@PathParam(\"pageRefId\") long pageRefId, PageReference pageRef)", "full_signature": "@PUT @Path(\"/playlists/{playlistId}/pagereferences/{pageRefId}\") @Produces(MediaType.APPLICATION_JSON) public PageReference updatePageReference(@PathParam(\"pageRefId\") long pageRefId, PageReference pageRef)", "class_method_signature": "PlaylistService.updatePageReference(@PathParam(\"pageRefId\") long pageRefId, PageReference pageRef)", "testcase": false, "constructor": false}, {"identifier": "copyPlaylist", "parameters": "(@PathParam(\"playlistId\") long playlistId, Playlist newPlaylist)", "modifiers": "@POST @Path(\"/playlists/{playlistId}/copy\") @Consumes(MediaType.APPLICATION_JSON) public", "return": "Playlist", "signature": "Playlist copyPlaylist(@PathParam(\"playlistId\") long playlistId, Playlist newPlaylist)", "full_signature": "@POST @Path(\"/playlists/{playlistId}/copy\") @Consumes(MediaType.APPLICATION_JSON) public Playlist copyPlaylist(@PathParam(\"playlistId\") long playlistId, Playlist newPlaylist)", "class_method_signature": "PlaylistService.copyPlaylist(@PathParam(\"playlistId\") long playlistId, Playlist newPlaylist)", "testcase": false, "constructor": false}, {"identifier": "deletePlaylist", "parameters": "(@PathParam(\"playlistId\") long playlistId)", "modifiers": "@DELETE @Path(\"/playlists/{playlistId}\") public", "return": "Response", "signature": "Response deletePlaylist(@PathParam(\"playlistId\") long playlistId)", "full_signature": "@DELETE @Path(\"/playlists/{playlistId}\") public Response deletePlaylist(@PathParam(\"playlistId\") long playlistId)", "class_method_signature": "PlaylistService.deletePlaylist(@PathParam(\"playlistId\") long playlistId)", "testcase": false, "constructor": false}, {"identifier": "deletePage", "parameters": "(@PathParam(\"playlistId\") long playlistId,\n\t\t\t@PathParam(\"pageReferenceId\") long pageReferenceId)", "modifiers": "@DELETE @Path(\"/playlists/{playlistId}/pagereferences/{pageReferenceId}\") @Produces(MediaType.APPLICATION_JSON) public", "return": "Playlist", "signature": "Playlist deletePage(@PathParam(\"playlistId\") long playlistId,\n\t\t\t@PathParam(\"pageReferenceId\") long pageReferenceId)", "full_signature": "@DELETE @Path(\"/playlists/{playlistId}/pagereferences/{pageReferenceId}\") @Produces(MediaType.APPLICATION_JSON) public Playlist deletePage(@PathParam(\"playlistId\") long playlistId,\n\t\t\t@PathParam(\"pageReferenceId\") long pageReferenceId)", "class_method_signature": "PlaylistService.deletePage(@PathParam(\"playlistId\") long playlistId,\n\t\t\t@PathParam(\"pageReferenceId\") long pageReferenceId)", "testcase": false, "constructor": false}, {"identifier": "movePage", "parameters": "(@PathParam(\"playlistId\") long playlistId,\n\t\t\t@PathParam(\"pageReferenceId\") long pageReferenceId, @PathParam(\"idx\") int newPosition)", "modifiers": "@POST @Path(\"/playlists/{playlistId}/pagereferences/{pageReferenceId}/moveto/{idx}\") @Produces(MediaType.APPLICATION_JSON) public", "return": "Playlist", "signature": "Playlist movePage(@PathParam(\"playlistId\") long playlistId,\n\t\t\t@PathParam(\"pageReferenceId\") long pageReferenceId, @PathParam(\"idx\") int newPosition)", "full_signature": "@POST @Path(\"/playlists/{playlistId}/pagereferences/{pageReferenceId}/moveto/{idx}\") @Produces(MediaType.APPLICATION_JSON) public Playlist movePage(@PathParam(\"playlistId\") long playlistId,\n\t\t\t@PathParam(\"pageReferenceId\") long pageReferenceId, @PathParam(\"idx\") int newPosition)", "class_method_signature": "PlaylistService.movePage(@PathParam(\"playlistId\") long playlistId,\n\t\t\t@PathParam(\"pageReferenceId\") long pageReferenceId, @PathParam(\"idx\") int newPosition)", "testcase": false, "constructor": false}, {"identifier": "getReferences", "parameters": "(@PathParam(\"playlistId\") long playlistId)", "modifiers": "@GET @Path(\"/playlists/{playlistId}/references\") @Produces(MediaType.APPLICATION_JSON) public", "return": "PlaylistReferences", "signature": "PlaylistReferences getReferences(@PathParam(\"playlistId\") long playlistId)", "full_signature": "@GET @Path(\"/playlists/{playlistId}/references\") @Produces(MediaType.APPLICATION_JSON) public PlaylistReferences getReferences(@PathParam(\"playlistId\") long playlistId)", "class_method_signature": "PlaylistService.getReferences(@PathParam(\"playlistId\") long playlistId)", "testcase": false, "constructor": false}, {"identifier": "addOwners", "parameters": "(@PathParam(\"playlistId\") long playlistId, Owner[] ownerData)", "modifiers": "@Override @POST @Path(\"/playlists/{playlistId}/owners\") @Consumes(MediaType.APPLICATION_JSON) public", "return": "Playlist", "signature": "Playlist addOwners(@PathParam(\"playlistId\") long playlistId, Owner[] ownerData)", "full_signature": "@Override @POST @Path(\"/playlists/{playlistId}/owners\") @Consumes(MediaType.APPLICATION_JSON) public Playlist addOwners(@PathParam(\"playlistId\") long playlistId, Owner[] ownerData)", "class_method_signature": "PlaylistService.addOwners(@PathParam(\"playlistId\") long playlistId, Owner[] ownerData)", "testcase": false, "constructor": false}, {"identifier": "deleteOwner", "parameters": "(@PathParam(\"playlistId\") long playlistId, @PathParam(\"ownerId\") long ownerId)", "modifiers": "@Override @DELETE @Path(\"/playlists/{playlistId}/owners/{ownerId}\") @Produces(MediaType.APPLICATION_JSON) public", "return": "Playlist", "signature": "Playlist deleteOwner(@PathParam(\"playlistId\") long playlistId, @PathParam(\"ownerId\") long ownerId)", "full_signature": "@Override @DELETE @Path(\"/playlists/{playlistId}/owners/{ownerId}\") @Produces(MediaType.APPLICATION_JSON) public Playlist deleteOwner(@PathParam(\"playlistId\") long playlistId, @PathParam(\"ownerId\") long ownerId)", "class_method_signature": "PlaylistService.deleteOwner(@PathParam(\"playlistId\") long playlistId, @PathParam(\"ownerId\") long ownerId)", "testcase": false, "constructor": false}], "file": "common/app/src/main/java/com/sap/primetime/api/PlaylistService.java"}, "focal_method": {"identifier": "getReferences", "parameters": "(@PathParam(\"playlistId\") long playlistId)", "modifiers": "@GET @Path(\"/playlists/{playlistId}/references\") @Produces(MediaType.APPLICATION_JSON) public", "return": "PlaylistReferences", "body": "@GET\n\t@Path(\"/playlists/{playlistId}/references\")\n\t@Produces(MediaType.APPLICATION_JSON)\n\tpublic PlaylistReferences getReferences(@PathParam(\"playlistId\") long playlistId) {\n\t\tPlaylist existingPlaylist = getExistingPlaylist(playlistId, false);\n\n\t\tif (!existingPlaylist.isListPublicly() && !this.isAdmin() && !inAdminOwners(existingPlaylist.getOwners())) {\n\t\t\tthrowUnauthorized();\n\t\t}\n\n\t\tPlaylistReferences refs = new PlaylistReferences();\n\n\t\t// screens\n\t\tList<Screen> screens = ScreenDAO.getScreensByPlaylist(existingPlaylist);\n\t\tfor (Screen screen : screens) {\n\t\t\tif (this.isAdmin() || inAdminOwners(screen.getOwners())) {\n\t\t\t\trefs.addUserScreen(screen);\n\t\t\t} else {\n\t\t\t\trefs.setForeignScreens(refs.getForeignScreens() + 1);\n\t\t\t}\n\t\t}\n\n\t\t// other playlists\n\t\tList<Playlist> playlists = PlaylistDAO.getPlaylistsByPlaylist(existingPlaylist);\n\t\tfor (Playlist playlist : playlists) {\n\t\t\tif (this.isAdmin() || inAdminOwners(playlist.getOwners())) {\n\t\t\t\trefs.addUserPlaylist(playlist);\n\t\t\t} else {\n\t\t\t\trefs.setForeignPlaylists(refs.getForeignPlaylists() + 1);\n\t\t\t}\n\t\t}\n\n\t\treturn refs;\n\t}", "signature": "PlaylistReferences getReferences(@PathParam(\"playlistId\") long playlistId)", "full_signature": "@GET @Path(\"/playlists/{playlistId}/references\") @Produces(MediaType.APPLICATION_JSON) public PlaylistReferences getReferences(@PathParam(\"playlistId\") long playlistId)", "class_method_signature": "PlaylistService.getReferences(@PathParam(\"playlistId\") long playlistId)", "testcase": false, "constructor": false, "invocations": ["getExistingPlaylist", "isListPublicly", "isAdmin", "inAdminOwners", "getOwners", "throwUnauthorized", "getScreensByPlaylist", "isAdmin", "inAdminOwners", "getOwners", "addUserScreen", "setForeignScreens", "getForeignScreens", "getPlaylistsByPlaylist", "isAdmin", "inAdminOwners", "getOwners", "addUserPlaylist", "setForeignPlaylists", "getForeignPlaylists"]}, "repository": {"repo_id": 172529766, "url": "https://github.com/SAP/cloud-primetime", "language": "Java", "is_fork": false, "fork_count": 2, "stargazer_count": 25, "size": 7529, "license": "licensed"}}