{"test_class": {"identifier": "SysDictRestApiTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static SysDictRestApi sysDictRestApi = new SysDictRestApi();", "modifier": "private static", "type": "SysDictRestApi", "declarator": "sysDictRestApi = new SysDictRestApi()", "var_name": "sysDictRestApi"}, {"original_string": "private static SystemRestApi systemRestApi = new SystemRestApi();", "modifier": "private static", "type": "SystemRestApi", "declarator": "systemRestApi = new SystemRestApi()", "var_name": "systemRestApi"}, {"original_string": "private static GsonBuilder gsonBuilder = new GsonBuilder();", "modifier": "private static", "type": "GsonBuilder", "declarator": "gsonBuilder = new GsonBuilder()", "var_name": "gsonBuilder"}, {"original_string": "private static Gson gson = gsonBuilder.setDateFormat(\"yyyy-MM-dd HH:mm:ss\").create();", "modifier": "private static", "type": "Gson", "declarator": "gson = gsonBuilder.setDateFormat(\"yyyy-MM-dd HH:mm:ss\").create()", "var_name": "gson"}, {"original_string": "private static final int NEW_SYS_DICT_COUNT = 3;", "modifier": "private static final", "type": "int", "declarator": "NEW_SYS_DICT_COUNT = 3", "var_name": "NEW_SYS_DICT_COUNT"}], "file": "submarine-server/server-core/src/test/java/org/apache/submarine/server/workbench/rest/SysDictRestApiTest.java"}, "test_case": {"identifier": "setDeletedTest", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n  public void setDeletedTest() {\n    ListResult<SysDict> listResult = queryTestDictList();\n    for (SysDict dict : listResult.getRecords()) {\n      Response response = sysDictRestApi.delete(dict.getId(), 1);\n      CommonDataTest.assertResponseSuccess(response);\n    }\n\n    ListResult<SysDict> listResult2 = queryTestDictList();\n    for (SysDict dict : listResult2.getRecords()) {\n      assertEquals((int) dict.getDeleted(), 1);\n    }\n\n    for (SysDict dict : listResult2.getRecords()) {\n      Response response = sysDictRestApi.delete(dict.getId(), 0);\n      CommonDataTest.assertResponseSuccess(response);\n    }\n\n    ListResult<SysDict> listResult3 = queryTestDictList();\n    for (SysDict dict : listResult3.getRecords()) {\n      assertEquals((int) dict.getDeleted(), 0);\n    }\n  }", "signature": "void setDeletedTest()", "full_signature": "@Test public void setDeletedTest()", "class_method_signature": "SysDictRestApiTest.setDeletedTest()", "testcase": true, "constructor": false, "invocations": ["queryTestDictList", "getRecords", "delete", "getId", "assertResponseSuccess", "queryTestDictList", "getRecords", "assertEquals", "getDeleted", "getRecords", "delete", "getId", "assertResponseSuccess", "queryTestDictList", "getRecords", "assertEquals", "getDeleted"]}, "focal_class": {"identifier": "SysDictRestApi", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final Logger LOG = LoggerFactory.getLogger(SysDictRestApi.class);", "modifier": "private static final", "type": "Logger", "declarator": "LOG = LoggerFactory.getLogger(SysDictRestApi.class)", "var_name": "LOG"}, {"original_string": "private static final Gson gson = new Gson();", "modifier": "private static final", "type": "Gson", "declarator": "gson = new Gson()", "var_name": "gson"}], "methods": [{"identifier": "SysDictRestApi", "parameters": "()", "modifiers": "@Inject public", "return": "", "signature": " SysDictRestApi()", "full_signature": "@Inject public  SysDictRestApi()", "class_method_signature": "SysDictRestApi.SysDictRestApi()", "testcase": false, "constructor": true}, {"identifier": "list", "parameters": "(@QueryParam(\"dictCode\") String dictCode,\n                       @QueryParam(\"dictName\") String dictName,\n                       @QueryParam(\"column\") String column,\n                       @QueryParam(\"field\") String field,\n                       @QueryParam(\"order\") String order,\n                       @QueryParam(\"pageNo\") int pageNo,\n                       @QueryParam(\"pageSize\") int pageSize)", "modifiers": "@GET @Path(\"/list\") @SubmarineApi public", "return": "Response", "signature": "Response list(@QueryParam(\"dictCode\") String dictCode,\n                       @QueryParam(\"dictName\") String dictName,\n                       @QueryParam(\"column\") String column,\n                       @QueryParam(\"field\") String field,\n                       @QueryParam(\"order\") String order,\n                       @QueryParam(\"pageNo\") int pageNo,\n                       @QueryParam(\"pageSize\") int pageSize)", "full_signature": "@GET @Path(\"/list\") @SubmarineApi public Response list(@QueryParam(\"dictCode\") String dictCode,\n                       @QueryParam(\"dictName\") String dictName,\n                       @QueryParam(\"column\") String column,\n                       @QueryParam(\"field\") String field,\n                       @QueryParam(\"order\") String order,\n                       @QueryParam(\"pageNo\") int pageNo,\n                       @QueryParam(\"pageSize\") int pageSize)", "class_method_signature": "SysDictRestApi.list(@QueryParam(\"dictCode\") String dictCode,\n                       @QueryParam(\"dictName\") String dictName,\n                       @QueryParam(\"column\") String column,\n                       @QueryParam(\"field\") String field,\n                       @QueryParam(\"order\") String order,\n                       @QueryParam(\"pageNo\") int pageNo,\n                       @QueryParam(\"pageSize\") int pageSize)", "testcase": false, "constructor": false}, {"identifier": "add", "parameters": "(SysDict sysDict)", "modifiers": "@POST @Path(\"/add\") @SubmarineApi public", "return": "Response", "signature": "Response add(SysDict sysDict)", "full_signature": "@POST @Path(\"/add\") @SubmarineApi public Response add(SysDict sysDict)", "class_method_signature": "SysDictRestApi.add(SysDict sysDict)", "testcase": false, "constructor": false}, {"identifier": "edit", "parameters": "(SysDict sysDict)", "modifiers": "@PUT @Path(\"/edit\") @SubmarineApi public", "return": "Response", "signature": "Response edit(SysDict sysDict)", "full_signature": "@PUT @Path(\"/edit\") @SubmarineApi public Response edit(SysDict sysDict)", "class_method_signature": "SysDictRestApi.edit(SysDict sysDict)", "testcase": false, "constructor": false}, {"identifier": "delete", "parameters": "(@QueryParam(\"id\") String dictId, @QueryParam(\"deleted\") int deleted)", "modifiers": "@DELETE @Path(\"/delete\") @SubmarineApi public", "return": "Response", "signature": "Response delete(@QueryParam(\"id\") String dictId, @QueryParam(\"deleted\") int deleted)", "full_signature": "@DELETE @Path(\"/delete\") @SubmarineApi public Response delete(@QueryParam(\"id\") String dictId, @QueryParam(\"deleted\") int deleted)", "class_method_signature": "SysDictRestApi.delete(@QueryParam(\"id\") String dictId, @QueryParam(\"deleted\") int deleted)", "testcase": false, "constructor": false}, {"identifier": "remove", "parameters": "(String dictId)", "modifiers": "@DELETE @Path(\"/remove\") @SubmarineApi public", "return": "Response", "signature": "Response remove(String dictId)", "full_signature": "@DELETE @Path(\"/remove\") @SubmarineApi public Response remove(String dictId)", "class_method_signature": "SysDictRestApi.remove(String dictId)", "testcase": false, "constructor": false}], "file": "submarine-server/server-core/src/main/java/org/apache/submarine/server/workbench/rest/SysDictRestApi.java"}, "focal_method": {"identifier": "delete", "parameters": "(@QueryParam(\"id\") String dictId, @QueryParam(\"deleted\") int deleted)", "modifiers": "@DELETE @Path(\"/delete\") @SubmarineApi public", "return": "Response", "body": "@DELETE\n  @Path(\"/delete\")\n  @SubmarineApi\n  public Response delete(@QueryParam(\"id\") String dictId, @QueryParam(\"deleted\") int deleted) {\n    String msgOperation = \"Delete\";\n    if (deleted == 0) {\n      msgOperation = \"Restore\";\n    }\n\n    try {\n      SqlSession sqlSession = MyBatisUtil.getSqlSession();\n      SysDictMapper sysDictMapper = sqlSession.getMapper(SysDictMapper.class);\n      try {\n        SysDict dict = new SysDict();\n        dict.setId(dictId);\n        dict.setDeleted(deleted);\n        sysDictMapper.updateBy(dict);\n        sqlSession.commit();\n      } catch (Exception e) {\n        LOG.error(e.getMessage(), e);\n      } finally {\n        sqlSession.close();\n      }\n    } catch (Exception e) {\n      LOG.error(e.getMessage(), e);\n      return new JsonResponse.Builder<>(Response.Status.OK)\n          .message(msgOperation + \" dictionary failed!\").success(false).build();\n    }\n\n    return new JsonResponse.Builder<>(Response.Status.OK)\n        .message(msgOperation + \" the dictionary successfully!\").success(true).build();\n  }", "signature": "Response delete(@QueryParam(\"id\") String dictId, @QueryParam(\"deleted\") int deleted)", "full_signature": "@DELETE @Path(\"/delete\") @SubmarineApi public Response delete(@QueryParam(\"id\") String dictId, @QueryParam(\"deleted\") int deleted)", "class_method_signature": "SysDictRestApi.delete(@QueryParam(\"id\") String dictId, @QueryParam(\"deleted\") int deleted)", "testcase": false, "constructor": false, "invocations": ["getSqlSession", "getMapper", "setId", "setDeleted", "updateBy", "commit", "error", "getMessage", "close", "error", "getMessage", "build", "success", "message", "build", "success", "message"]}, "repository": {"repo_id": 209459144, "url": "https://github.com/apache/submarine", "stars": 185, "created": "9/19/2019 4:00:17 AM +00:00", "updates": "2020-01-27T15:27:05+00:00", "fork": "False", "license": "licensed"}}