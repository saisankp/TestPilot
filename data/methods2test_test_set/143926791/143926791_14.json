{"test_class": {"identifier": "PortfolioControllerTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "MockMvc mockMvc;", "modifier": "", "type": "MockMvc", "declarator": "mockMvc", "var_name": "mockMvc"}, {"original_string": "@InjectMocks\n\tPortfolioController controller;", "modifier": "@InjectMocks", "type": "PortfolioController", "declarator": "controller", "var_name": "controller"}, {"original_string": "@Mock\n\tPortfolioService service;", "modifier": "@Mock", "type": "PortfolioService", "declarator": "service", "var_name": "service"}], "file": "portfolio-service/src/test/java/io/pivotal/portfolio/controller/PortfolioControllerTest.java"}, "test_case": {"identifier": "getPortfolio", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n\tpublic void getPortfolio() throws Exception {\n\t\twhen(service.getPortfolio(ServiceTestConfiguration.USER_ID))\n\t\t\t\t.thenReturn(ServiceTestConfiguration.portfolio());\n\n\t\tmockMvc.perform(\n\t\t\t\tget(\"/portfolio/\" + ServiceTestConfiguration.USER_ID)\n\t\t\t\t\t\t.contentType(MediaType.APPLICATION_JSON))\n\t\t\t\t.andExpect(status().isOk())\n\t\t\t\t.andDo(print())\n\t\t\t\t.andExpect(\n\t\t\t\t\t\tcontent().contentTypeCompatibleWith(\n\t\t\t\t\t\t\t\tMediaType.APPLICATION_JSON))\n\t\t\t\t.andExpect(\n\t\t\t\t\t\tjsonPath(\"$.userName\").value(\n\t\t\t\t\t\t\t\tServiceTestConfiguration.USER_ID))\n\t\t\t\t.andExpect(jsonPath(\"$.holdings.*\").value(hasSize(1)))\n\t\t\t\t.andDo(print());\n\t}", "signature": "void getPortfolio()", "full_signature": "@Test public void getPortfolio()", "class_method_signature": "PortfolioControllerTest.getPortfolio()", "testcase": true, "constructor": false, "invocations": ["thenReturn", "when", "getPortfolio", "portfolio", "andDo", "andExpect", "andExpect", "andExpect", "andDo", "andExpect", "perform", "contentType", "get", "isOk", "status", "print", "contentTypeCompatibleWith", "content", "value", "jsonPath", "value", "jsonPath", "hasSize", "print"]}, "focal_class": {"identifier": "PortfolioController", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final Logger logger = LoggerFactory\n\t\t\t.getLogger(PortfolioController.class);", "modifier": "private static final", "type": "Logger", "declarator": "logger = LoggerFactory\n\t\t\t.getLogger(PortfolioController.class)", "var_name": "logger"}, {"original_string": "@Autowired\n\tprivate PortfolioService service;", "modifier": "@Autowired\n\tprivate", "type": "PortfolioService", "declarator": "service", "var_name": "service"}], "methods": [{"identifier": "getPortfolio", "parameters": "(@PathVariable(\"id\") final String userId)", "modifiers": "@RequestMapping(value = \"/portfolio/{id}\", method = RequestMethod.GET) public", "return": "ResponseEntity<Portfolio>", "signature": "ResponseEntity<Portfolio> getPortfolio(@PathVariable(\"id\") final String userId)", "full_signature": "@RequestMapping(value = \"/portfolio/{id}\", method = RequestMethod.GET) public ResponseEntity<Portfolio> getPortfolio(@PathVariable(\"id\") final String userId)", "class_method_signature": "PortfolioController.getPortfolio(@PathVariable(\"id\") final String userId)", "testcase": false, "constructor": false}, {"identifier": "getNoCacheHeaders", "parameters": "()", "modifiers": "private", "return": "HttpHeaders", "signature": "HttpHeaders getNoCacheHeaders()", "full_signature": "private HttpHeaders getNoCacheHeaders()", "class_method_signature": "PortfolioController.getNoCacheHeaders()", "testcase": false, "constructor": false}, {"identifier": "addOrder", "parameters": "(@RequestBody final Order order)", "modifiers": "@RequestMapping(value = \"/portfolio\", method = RequestMethod.POST) public", "return": "ResponseEntity<Order>", "signature": "ResponseEntity<Order> addOrder(@RequestBody final Order order)", "full_signature": "@RequestMapping(value = \"/portfolio\", method = RequestMethod.POST) public ResponseEntity<Order> addOrder(@RequestBody final Order order)", "class_method_signature": "PortfolioController.addOrder(@RequestBody final Order order)", "testcase": false, "constructor": false}], "file": "portfolio-service/src/main/java/io/pivotal/portfolio/controller/PortfolioController.java"}, "focal_method": {"identifier": "getPortfolio", "parameters": "(@PathVariable(\"id\") final String userId)", "modifiers": "@RequestMapping(value = \"/portfolio/{id}\", method = RequestMethod.GET) public", "return": "ResponseEntity<Portfolio>", "body": "@RequestMapping(value = \"/portfolio/{id}\", method = RequestMethod.GET)\n\tpublic ResponseEntity<Portfolio> getPortfolio(@PathVariable(\"id\") final String userId) {\n\t\tlogger.debug(\"PortfolioController: Retrieving portfolio with user id:\" + userId);\n\t\tPortfolio folio = service.getPortfolio(userId);\n\t\tlogger.debug(\"PortfolioController: Retrieved portfolio:\" + folio);\n\t\treturn new ResponseEntity<Portfolio>(folio, getNoCacheHeaders(), HttpStatus.OK);\n\t}", "signature": "ResponseEntity<Portfolio> getPortfolio(@PathVariable(\"id\") final String userId)", "full_signature": "@RequestMapping(value = \"/portfolio/{id}\", method = RequestMethod.GET) public ResponseEntity<Portfolio> getPortfolio(@PathVariable(\"id\") final String userId)", "class_method_signature": "PortfolioController.getPortfolio(@PathVariable(\"id\") final String userId)", "testcase": false, "constructor": false, "invocations": ["debug", "getPortfolio", "debug", "getNoCacheHeaders"]}, "repository": {"repo_id": 143926791, "url": "https://github.com/Pivotal-Field-Engineering/pivotal-bank-demo", "language": "Java", "is_fork": false, "fork_count": 48, "stargazer_count": 35, "size": 45556, "license": "licensed"}}