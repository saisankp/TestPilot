{"test_class": {"identifier": "DataBridgeWebClientTest", "superclass": "extends AbstractDataBridgeTest", "interfaces": "", "fields": [{"original_string": "private DataBridgeWebClient dataBridgeWebClient;", "modifier": "private", "type": "DataBridgeWebClient", "declarator": "dataBridgeWebClient", "var_name": "dataBridgeWebClient"}, {"original_string": "@Autowired\n    private HerdStringHelper herdStringHelper;", "modifier": "@Autowired\n    private", "type": "HerdStringHelper", "declarator": "herdStringHelper", "var_name": "herdStringHelper"}, {"original_string": "@Autowired\n    private HttpClientHelper httpClientHelper;", "modifier": "@Autowired\n    private", "type": "HttpClientHelper", "declarator": "httpClientHelper", "var_name": "httpClientHelper"}, {"original_string": "@Autowired\n    private HttpClientOperations httpClientOperations;", "modifier": "@Autowired\n    private", "type": "HttpClientOperations", "declarator": "httpClientOperations", "var_name": "httpClientOperations"}, {"original_string": "@Autowired\n    private XmlHelper xmlHelper;", "modifier": "@Autowired\n    private", "type": "XmlHelper", "declarator": "xmlHelper", "var_name": "xmlHelper"}], "file": "herd-code/herd-tools/herd-tools-common/src/test/java/org/finra/herd/tools/common/databridge/DataBridgeWebClientTest.java"}, "test_case": {"identifier": "testGetBusinessObjectDataStorageFilesCreateResponse400BadContentThrows", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testGetBusinessObjectDataStorageFilesCreateResponse400BadContentThrows() throws Exception\n    {\n        int expectedStatusCode = 400;\n        String expectedReasonPhrase = \"testReasonPhrase\";\n        String expectedErrorMessage = \"invalid xml\";\n\n        CloseableHttpResponse httpResponse =\n            new MockCloseableHttpResponse(new BasicStatusLine(HttpVersion.HTTP_1_1, expectedStatusCode, expectedReasonPhrase), false);\n        httpResponse.setEntity(new StringEntity(expectedErrorMessage));\n        try\n        {\n            executeWithoutLogging(DataBridgeWebClient.class, () -> {\n                dataBridgeWebClient.getBusinessObjectDataStorageFilesCreateResponse(httpResponse);\n            });\n            Assert.fail(\"expected HttpErrorResponseException, but no exception was thrown\");\n        }\n        catch (Exception e)\n        {\n            assertEquals(\"thrown exception type\", HttpErrorResponseException.class, e.getClass());\n\n            HttpErrorResponseException httpErrorResponseException = (HttpErrorResponseException) e;\n            assertEquals(\"httpErrorResponseException responseMessage\", expectedErrorMessage, httpErrorResponseException.getResponseMessage());\n            assertEquals(\"httpErrorResponseException statusCode\", expectedStatusCode, httpErrorResponseException.getStatusCode());\n            assertEquals(\"httpErrorResponseException statusDescription\", expectedReasonPhrase, httpErrorResponseException.getStatusDescription());\n            assertEquals(\"httpErrorResponseException message\", \"Failed to add storage files\", httpErrorResponseException.getMessage());\n        }\n    }", "signature": "void testGetBusinessObjectDataStorageFilesCreateResponse400BadContentThrows()", "full_signature": "@Test public void testGetBusinessObjectDataStorageFilesCreateResponse400BadContentThrows()", "class_method_signature": "DataBridgeWebClientTest.testGetBusinessObjectDataStorageFilesCreateResponse400BadContentThrows()", "testcase": true, "constructor": false, "invocations": ["setEntity", "executeWithoutLogging", "getBusinessObjectDataStorageFilesCreateResponse", "fail", "assertEquals", "getClass", "assertEquals", "getResponseMessage", "assertEquals", "getStatusCode", "assertEquals", "getStatusDescription", "assertEquals", "getMessage"]}, "focal_class": {"identifier": "DataBridgeWebClient", "superclass": "", "interfaces": "", "fields": [{"original_string": "protected static final String DEFAULT_ACCEPT = ContentType.APPLICATION_XML.withCharset(StandardCharsets.UTF_8).toString();", "modifier": "protected static final", "type": "String", "declarator": "DEFAULT_ACCEPT = ContentType.APPLICATION_XML.withCharset(StandardCharsets.UTF_8).toString()", "var_name": "DEFAULT_ACCEPT"}, {"original_string": "protected static final String DEFAULT_CONTENT_TYPE = ContentType.APPLICATION_XML.withCharset(StandardCharsets.UTF_8).toString();", "modifier": "protected static final", "type": "String", "declarator": "DEFAULT_CONTENT_TYPE = ContentType.APPLICATION_XML.withCharset(StandardCharsets.UTF_8).toString()", "var_name": "DEFAULT_CONTENT_TYPE"}, {"original_string": "protected static final String HERD_APP_REST_URI_PREFIX = \"/herd-app/rest\";", "modifier": "protected static final", "type": "String", "declarator": "HERD_APP_REST_URI_PREFIX = \"/herd-app/rest\"", "var_name": "HERD_APP_REST_URI_PREFIX"}, {"original_string": "private static final Logger LOGGER = LoggerFactory.getLogger(DataBridgeWebClient.class);", "modifier": "private static final", "type": "Logger", "declarator": "LOGGER = LoggerFactory.getLogger(DataBridgeWebClient.class)", "var_name": "LOGGER"}, {"original_string": "@Autowired\n    protected HerdStringHelper herdStringHelper;", "modifier": "@Autowired\n    protected", "type": "HerdStringHelper", "declarator": "herdStringHelper", "var_name": "herdStringHelper"}, {"original_string": "@Autowired\n    protected HttpClientHelper httpClientHelper;", "modifier": "@Autowired\n    protected", "type": "HttpClientHelper", "declarator": "httpClientHelper", "var_name": "httpClientHelper"}, {"original_string": "@Autowired\n    protected HttpClientOperations httpClientOperations;", "modifier": "@Autowired\n    protected", "type": "HttpClientOperations", "declarator": "httpClientOperations", "var_name": "httpClientOperations"}, {"original_string": "protected RegServerAccessParamsDto regServerAccessParamsDto;", "modifier": "protected", "type": "RegServerAccessParamsDto", "declarator": "regServerAccessParamsDto", "var_name": "regServerAccessParamsDto"}], "methods": [{"identifier": "addStorageFiles", "parameters": "(BusinessObjectDataKey businessObjectDataKey, UploaderInputManifestDto manifest,\n        S3FileTransferRequestParamsDto s3FileTransferRequestParamsDto, String storageName)", "modifiers": "@SuppressFBWarnings(value = \"VA_FORMAT_STRING_USES_NEWLINE\", justification = \"We will use the standard carriage return character.\") public", "return": "BusinessObjectDataStorageFilesCreateResponse", "signature": "BusinessObjectDataStorageFilesCreateResponse addStorageFiles(BusinessObjectDataKey businessObjectDataKey, UploaderInputManifestDto manifest,\n        S3FileTransferRequestParamsDto s3FileTransferRequestParamsDto, String storageName)", "full_signature": "@SuppressFBWarnings(value = \"VA_FORMAT_STRING_USES_NEWLINE\", justification = \"We will use the standard carriage return character.\") public BusinessObjectDataStorageFilesCreateResponse addStorageFiles(BusinessObjectDataKey businessObjectDataKey, UploaderInputManifestDto manifest,\n        S3FileTransferRequestParamsDto s3FileTransferRequestParamsDto, String storageName)", "class_method_signature": "DataBridgeWebClient.addStorageFiles(BusinessObjectDataKey businessObjectDataKey, UploaderInputManifestDto manifest,\n        S3FileTransferRequestParamsDto s3FileTransferRequestParamsDto, String storageName)", "testcase": false, "constructor": false}, {"identifier": "getRegServerAccessParamsDto", "parameters": "()", "modifiers": "public", "return": "RegServerAccessParamsDto", "signature": "RegServerAccessParamsDto getRegServerAccessParamsDto()", "full_signature": "public RegServerAccessParamsDto getRegServerAccessParamsDto()", "class_method_signature": "DataBridgeWebClient.getRegServerAccessParamsDto()", "testcase": false, "constructor": false}, {"identifier": "setRegServerAccessParamsDto", "parameters": "(RegServerAccessParamsDto regServerAccessParamsDto)", "modifiers": "public", "return": "void", "signature": "void setRegServerAccessParamsDto(RegServerAccessParamsDto regServerAccessParamsDto)", "full_signature": "public void setRegServerAccessParamsDto(RegServerAccessParamsDto regServerAccessParamsDto)", "class_method_signature": "DataBridgeWebClient.setRegServerAccessParamsDto(RegServerAccessParamsDto regServerAccessParamsDto)", "testcase": false, "constructor": false}, {"identifier": "getStorage", "parameters": "(String storageName)", "modifiers": "public", "return": "Storage", "signature": "Storage getStorage(String storageName)", "full_signature": "public Storage getStorage(String storageName)", "class_method_signature": "DataBridgeWebClient.getStorage(String storageName)", "testcase": false, "constructor": false}, {"identifier": "preRegisterBusinessObjectData", "parameters": "(UploaderInputManifestDto manifest, String storageName, Boolean createNewVersion)", "modifiers": "@SuppressFBWarnings(value = \"VA_FORMAT_STRING_USES_NEWLINE\", justification = \"We will use the standard carriage return character.\") public", "return": "BusinessObjectData", "signature": "BusinessObjectData preRegisterBusinessObjectData(UploaderInputManifestDto manifest, String storageName, Boolean createNewVersion)", "full_signature": "@SuppressFBWarnings(value = \"VA_FORMAT_STRING_USES_NEWLINE\", justification = \"We will use the standard carriage return character.\") public BusinessObjectData preRegisterBusinessObjectData(UploaderInputManifestDto manifest, String storageName, Boolean createNewVersion)", "class_method_signature": "DataBridgeWebClient.preRegisterBusinessObjectData(UploaderInputManifestDto manifest, String storageName, Boolean createNewVersion)", "testcase": false, "constructor": false}, {"identifier": "updateBusinessObjectDataStatus", "parameters": "(BusinessObjectDataKey businessObjectDataKey, String businessObjectDataStatus)", "modifiers": "public", "return": "BusinessObjectDataStatusUpdateResponse", "signature": "BusinessObjectDataStatusUpdateResponse updateBusinessObjectDataStatus(BusinessObjectDataKey businessObjectDataKey, String businessObjectDataStatus)", "full_signature": "public BusinessObjectDataStatusUpdateResponse updateBusinessObjectDataStatus(BusinessObjectDataKey businessObjectDataKey, String businessObjectDataStatus)", "class_method_signature": "DataBridgeWebClient.updateBusinessObjectDataStatus(BusinessObjectDataKey businessObjectDataKey, String businessObjectDataStatus)", "testcase": false, "constructor": false}, {"identifier": "getAuthorizationHeader", "parameters": "()", "modifiers": "protected", "return": "BasicHeader", "signature": "BasicHeader getAuthorizationHeader()", "full_signature": "protected BasicHeader getAuthorizationHeader()", "class_method_signature": "DataBridgeWebClient.getAuthorizationHeader()", "testcase": false, "constructor": false}, {"identifier": "getBusinessObjectData", "parameters": "(CloseableHttpResponse httpResponse, String actionDescription)", "modifiers": "protected", "return": "BusinessObjectData", "signature": "BusinessObjectData getBusinessObjectData(CloseableHttpResponse httpResponse, String actionDescription)", "full_signature": "protected BusinessObjectData getBusinessObjectData(CloseableHttpResponse httpResponse, String actionDescription)", "class_method_signature": "DataBridgeWebClient.getBusinessObjectData(CloseableHttpResponse httpResponse, String actionDescription)", "testcase": false, "constructor": false}, {"identifier": "getBusinessObjectDataStorageFilesCreateResponse", "parameters": "(CloseableHttpResponse httpResponse)", "modifiers": "protected", "return": "BusinessObjectDataStorageFilesCreateResponse", "signature": "BusinessObjectDataStorageFilesCreateResponse getBusinessObjectDataStorageFilesCreateResponse(CloseableHttpResponse httpResponse)", "full_signature": "protected BusinessObjectDataStorageFilesCreateResponse getBusinessObjectDataStorageFilesCreateResponse(CloseableHttpResponse httpResponse)", "class_method_signature": "DataBridgeWebClient.getBusinessObjectDataStorageFilesCreateResponse(CloseableHttpResponse httpResponse)", "testcase": false, "constructor": false}, {"identifier": "getS3KeyPrefix", "parameters": "(DataBridgeBaseManifestDto manifest, Integer businessObjectDataVersion, Boolean createNewVersion)", "modifiers": "protected", "return": "S3KeyPrefixInformation", "signature": "S3KeyPrefixInformation getS3KeyPrefix(DataBridgeBaseManifestDto manifest, Integer businessObjectDataVersion, Boolean createNewVersion)", "full_signature": "protected S3KeyPrefixInformation getS3KeyPrefix(DataBridgeBaseManifestDto manifest, Integer businessObjectDataVersion, Boolean createNewVersion)", "class_method_signature": "DataBridgeWebClient.getS3KeyPrefix(DataBridgeBaseManifestDto manifest, Integer businessObjectDataVersion, Boolean createNewVersion)", "testcase": false, "constructor": false}, {"identifier": "getUriScheme", "parameters": "()", "modifiers": "protected", "return": "String", "signature": "String getUriScheme()", "full_signature": "protected String getUriScheme()", "class_method_signature": "DataBridgeWebClient.getUriScheme()", "testcase": false, "constructor": false}, {"identifier": "processXmlHttpResponse", "parameters": "(CloseableHttpResponse response, String actionDescription, Class<?>... responseClass)", "modifiers": "protected", "return": "Object", "signature": "Object processXmlHttpResponse(CloseableHttpResponse response, String actionDescription, Class<?>... responseClass)", "full_signature": "protected Object processXmlHttpResponse(CloseableHttpResponse response, String actionDescription, Class<?>... responseClass)", "class_method_signature": "DataBridgeWebClient.processXmlHttpResponse(CloseableHttpResponse response, String actionDescription, Class<?>... responseClass)", "testcase": false, "constructor": false}, {"identifier": "getBusinessObjectDataStatusUpdateResponse", "parameters": "(CloseableHttpResponse response)", "modifiers": "private", "return": "BusinessObjectDataStatusUpdateResponse", "signature": "BusinessObjectDataStatusUpdateResponse getBusinessObjectDataStatusUpdateResponse(CloseableHttpResponse response)", "full_signature": "private BusinessObjectDataStatusUpdateResponse getBusinessObjectDataStatusUpdateResponse(CloseableHttpResponse response)", "class_method_signature": "DataBridgeWebClient.getBusinessObjectDataStatusUpdateResponse(CloseableHttpResponse response)", "testcase": false, "constructor": false}, {"identifier": "getS3KeyPrefixInformation", "parameters": "(CloseableHttpResponse httpResponse)", "modifiers": "private", "return": "S3KeyPrefixInformation", "signature": "S3KeyPrefixInformation getS3KeyPrefixInformation(CloseableHttpResponse httpResponse)", "full_signature": "private S3KeyPrefixInformation getS3KeyPrefixInformation(CloseableHttpResponse httpResponse)", "class_method_signature": "DataBridgeWebClient.getS3KeyPrefixInformation(CloseableHttpResponse httpResponse)", "testcase": false, "constructor": false}, {"identifier": "getStorage", "parameters": "(CloseableHttpResponse httpResponse)", "modifiers": "private", "return": "Storage", "signature": "Storage getStorage(CloseableHttpResponse httpResponse)", "full_signature": "private Storage getStorage(CloseableHttpResponse httpResponse)", "class_method_signature": "DataBridgeWebClient.getStorage(CloseableHttpResponse httpResponse)", "testcase": false, "constructor": false}], "file": "herd-code/herd-tools/herd-tools-common/src/main/java/org/finra/herd/tools/common/databridge/DataBridgeWebClient.java"}, "focal_method": {"identifier": "getBusinessObjectDataStorageFilesCreateResponse", "parameters": "(CloseableHttpResponse httpResponse)", "modifiers": "protected", "return": "BusinessObjectDataStorageFilesCreateResponse", "body": "protected BusinessObjectDataStorageFilesCreateResponse getBusinessObjectDataStorageFilesCreateResponse(CloseableHttpResponse httpResponse)\n    {\n        try\n        {\n            return (BusinessObjectDataStorageFilesCreateResponse) processXmlHttpResponse(httpResponse, \"add storage files\",\n                BusinessObjectDataStorageFilesCreateResponse.class);\n        }\n        catch (Exception e)\n        {\n            if (httpResponse.getStatusLine().getStatusCode() == 200)\n            {\n                // We assume add files is a success when we get status code 200 back from the service.\n                // Just return a null back, since processXmlHttpResponse() is responsible for logging the exception info.\n                return null;\n            }\n            else\n            {\n                throw e;\n            }\n        }\n    }", "signature": "BusinessObjectDataStorageFilesCreateResponse getBusinessObjectDataStorageFilesCreateResponse(CloseableHttpResponse httpResponse)", "full_signature": "protected BusinessObjectDataStorageFilesCreateResponse getBusinessObjectDataStorageFilesCreateResponse(CloseableHttpResponse httpResponse)", "class_method_signature": "DataBridgeWebClient.getBusinessObjectDataStorageFilesCreateResponse(CloseableHttpResponse httpResponse)", "testcase": false, "constructor": false, "invocations": ["processXmlHttpResponse", "getStatusCode", "getStatusLine"]}, "repository": {"repo_id": 42949039, "url": "https://github.com/FINRAOS/herd", "language": "Java", "is_fork": false, "fork_count": 36, "stargazer_count": 120, "size": 205797, "license": "licensed"}}