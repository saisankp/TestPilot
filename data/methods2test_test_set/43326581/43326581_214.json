{"test_class": {"identifier": "ConcatClosingInputStreamTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "@Rule\n    public ExpectedException expectedException = ExpectedException.none();", "modifier": "@Rule\n    public", "type": "ExpectedException", "declarator": "expectedException = ExpectedException.none()", "var_name": "expectedException"}], "file": "libraries/lib-datahandler/src/test/java/org/eclipse/sw360/datahandler/common/ConcatClosingInputStreamTest.java"}, "test_case": {"identifier": "testReportingFirstExceptionAndSuppressingLaterOnClose", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testReportingFirstExceptionAndSuppressingLaterOnClose() throws Exception {\n        IOException closingException = new IOException(\"stream close exception\");\n        IOException closingException2 = new IOException(\"stream close exception for stream c\");\n        IOException closingException3 = new IOException(\"stream close exception for stream d\");\n\n        InputStream a = mock(InputStream.class);\n\n        InputStream b = mock(InputStream.class);\n        doThrow(closingException).when(b).close();\n\n        InputStream c = mock(InputStream.class);\n        doThrow(closingException2).when(c).close();\n\n        InputStream d = mock(InputStream.class);\n        doThrow(closingException3).when(d).close();\n\n        ImmutableList<InputStream> inputStreams = ImmutableList.of(a, b, c, d);\n\n        ConcatClosingInputStream concatClosingInputStream = new ConcatClosingInputStream(inputStreams.iterator());\n\n        try {\n            concatClosingInputStream.close();\n        } catch (IOException e) {\n            assertSame(closingException, e);\n            // when reading we get the closing exception as suppressed\n            assertThat(e.getSuppressed(),\n                    is(arrayContaining((Throwable) closingException2, closingException3)));\n        }\n\n        verify(a).close();\n        verify(b).close();\n        verify(c).close();\n        verify(d).close();\n\n        verifyNoMoreInteractions(a, b, c, d);\n    }", "signature": "void testReportingFirstExceptionAndSuppressingLaterOnClose()", "full_signature": "@Test public void testReportingFirstExceptionAndSuppressingLaterOnClose()", "class_method_signature": "ConcatClosingInputStreamTest.testReportingFirstExceptionAndSuppressingLaterOnClose()", "testcase": true, "constructor": false, "invocations": ["mock", "mock", "close", "when", "doThrow", "mock", "close", "when", "doThrow", "mock", "close", "when", "doThrow", "of", "iterator", "close", "assertSame", "assertThat", "getSuppressed", "is", "arrayContaining", "close", "verify", "close", "verify", "close", "verify", "close", "verify", "verifyNoMoreInteractions"]}, "focal_class": {"identifier": "ConcatClosingInputStream", "superclass": "extends InputStream", "interfaces": "", "fields": [{"original_string": "private final Iterator<InputStream> streams;", "modifier": "private final", "type": "Iterator<InputStream>", "declarator": "streams", "var_name": "streams"}, {"original_string": "private boolean closed = false;", "modifier": "private", "type": "boolean", "declarator": "closed = false", "var_name": "closed"}, {"original_string": "private InputStream current;", "modifier": "private", "type": "InputStream", "declarator": "current", "var_name": "current"}], "methods": [{"identifier": "ConcatClosingInputStream", "parameters": "(Iterator<InputStream> streams)", "modifiers": "public", "return": "", "signature": " ConcatClosingInputStream(Iterator<InputStream> streams)", "full_signature": "public  ConcatClosingInputStream(Iterator<InputStream> streams)", "class_method_signature": "ConcatClosingInputStream.ConcatClosingInputStream(Iterator<InputStream> streams)", "testcase": false, "constructor": true}, {"identifier": "read", "parameters": "()", "modifiers": "@Override public", "return": "int", "signature": "int read()", "full_signature": "@Override public int read()", "class_method_signature": "ConcatClosingInputStream.read()", "testcase": false, "constructor": false}, {"identifier": "safeCloseAndThrow", "parameters": "(IOException e)", "modifiers": "private", "return": "int", "signature": "int safeCloseAndThrow(IOException e)", "full_signature": "private int safeCloseAndThrow(IOException e)", "class_method_signature": "ConcatClosingInputStream.safeCloseAndThrow(IOException e)", "testcase": false, "constructor": false}, {"identifier": "close", "parameters": "()", "modifiers": "@Override public", "return": "void", "signature": "void close()", "full_signature": "@Override public void close()", "class_method_signature": "ConcatClosingInputStream.close()", "testcase": false, "constructor": false}, {"identifier": "asSuppressedOf", "parameters": "(IOException ioException, IOException exception)", "modifiers": "private", "return": "IOException", "signature": "IOException asSuppressedOf(IOException ioException, IOException exception)", "full_signature": "private IOException asSuppressedOf(IOException ioException, IOException exception)", "class_method_signature": "ConcatClosingInputStream.asSuppressedOf(IOException ioException, IOException exception)", "testcase": false, "constructor": false}, {"identifier": "tryClose", "parameters": "(InputStream stream)", "modifiers": "private", "return": "IOException", "signature": "IOException tryClose(InputStream stream)", "full_signature": "private IOException tryClose(InputStream stream)", "class_method_signature": "ConcatClosingInputStream.tryClose(InputStream stream)", "testcase": false, "constructor": false}], "file": "libraries/lib-datahandler/src/main/java/org/eclipse/sw360/datahandler/common/ConcatClosingInputStream.java"}, "focal_method": {"identifier": "close", "parameters": "()", "modifiers": "@Override public", "return": "void", "body": "@Override\n    public void close() throws IOException {\n        if (closed)\n            return;\n\n        IOException ioException = tryClose(current);\n        while (streams.hasNext()) {\n            IOException exception = tryClose(streams.next());\n            ioException = asSuppressedOf(ioException, exception);\n        }\n        closed = true;\n\n        if (ioException != null)\n            throw ioException;\n    }", "signature": "void close()", "full_signature": "@Override public void close()", "class_method_signature": "ConcatClosingInputStream.close()", "testcase": false, "constructor": false, "invocations": ["tryClose", "hasNext", "tryClose", "next", "asSuppressedOf"]}, "repository": {"repo_id": 43326581, "url": "https://github.com/sw360/sw360portal", "language": "Java", "is_fork": false, "fork_count": 23, "stargazer_count": 31, "size": 8770, "license": "licensed"}}