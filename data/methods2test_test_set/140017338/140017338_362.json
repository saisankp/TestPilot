{"test_class": {"identifier": "JsonReaderTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private List<Artifact> artifacts;", "modifier": "private", "type": "List<Artifact>", "declarator": "artifacts", "var_name": "artifacts"}], "file": "core/core-workflow-steps/src/test/java/org/eclipse/sw360/antenna/jsonreader/JsonReaderTest.java"}, "test_case": {"identifier": "testParseData2", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testParseData2() throws URISyntaxException, IOException {\n        Path recordFilePath = Paths.get(\".\", \"target\", \"foo\");\n        JsonReader jsonReader = new JsonReader(recordFilePath, Paths.get(\"tmp\"), StandardCharsets.UTF_8);\n        URI uri = this.getClass().getClassLoader().getResource(\"JsonReaderTest/data2.json\").toURI();\n        InputStream iStream = Files.newInputStream(Paths.get(uri));\n\n        artifacts = jsonReader.createArtifactsList(iStream);\n\n        assertThat(artifacts.stream()\n                .map(artifact -> artifact.askForGet(DeclaredLicenseInformation.class))\n                .filter(Optional::isPresent)\n                .map(Optional::get)\n                .map(LicenseInformation::evaluate))\n                .contains(\"PUBLIC-DOMAIN\");\n        assertThat(artifacts.stream()\n                .map(Artifact::getAnalysisSource)).contains(\"JSON\");\n\n        Optional<List<Issue>> issues = artifacts.stream()\n                .map(artifact -> artifact.askForGet(ArtifactIssues.class))\n                .filter(Optional::isPresent)\n                .map(Optional::get)\n                .findFirst();\n\n        assertThat(issues.isPresent()).isTrue();\n        issues.ifPresent(i -> {\n            assertThat(i.stream().map(Issue::getStatus)).contains(SecurityIssueStatus.OPEN);\n            assertThat(i.stream().map(Issue::getReference)).contains(\"CVE-2018-8014\");\n            assertThat(i.stream().map(Issue::getSeverity)).contains(5.9);\n        });\n    }", "signature": "void testParseData2()", "full_signature": "@Test public void testParseData2()", "class_method_signature": "JsonReaderTest.testParseData2()", "testcase": true, "constructor": false, "invocations": ["get", "get", "toURI", "getResource", "getClassLoader", "getClass", "newInputStream", "get", "createArtifactsList", "contains", "assertThat", "map", "map", "filter", "map", "stream", "askForGet", "contains", "assertThat", "map", "stream", "findFirst", "map", "filter", "map", "stream", "askForGet", "isTrue", "assertThat", "isPresent", "ifPresent", "contains", "assertThat", "map", "stream", "contains", "assertThat", "map", "stream", "contains", "assertThat", "map", "stream"]}, "focal_class": {"identifier": "JsonReader", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final Logger LOGGER = LoggerFactory.getLogger(JsonReader.class);", "modifier": "private static final", "type": "Logger", "declarator": "LOGGER = LoggerFactory.getLogger(JsonReader.class)", "var_name": "LOGGER"}, {"original_string": "private static final String COMPONENTS = \"components\";", "modifier": "private static final", "type": "String", "declarator": "COMPONENTS = \"components\"", "var_name": "COMPONENTS"}, {"original_string": "private final Charset encoding;", "modifier": "private final", "type": "Charset", "declarator": "encoding", "var_name": "encoding"}, {"original_string": "private final Path recordingFile;", "modifier": "private final", "type": "Path", "declarator": "recordingFile", "var_name": "recordingFile"}, {"original_string": "private final Path dependencyDir;", "modifier": "private final", "type": "Path", "declarator": "dependencyDir", "var_name": "dependencyDir"}, {"original_string": "private static final String JSON_OBJ_PATHNAMES = \"pathnames\";", "modifier": "private static final", "type": "String", "declarator": "JSON_OBJ_PATHNAMES = \"pathnames\"", "var_name": "JSON_OBJ_PATHNAMES"}, {"original_string": "private static final String JSON_OBJ_VERSION = \"version\";", "modifier": "private static final", "type": "String", "declarator": "JSON_OBJ_VERSION = \"version\"", "var_name": "JSON_OBJ_VERSION"}, {"original_string": "private static final String JSON_OBJ_COORDINATES = \"coordinates\";", "modifier": "private static final", "type": "String", "declarator": "JSON_OBJ_COORDINATES = \"coordinates\"", "var_name": "JSON_OBJ_COORDINATES"}, {"original_string": "private static final Map<String, MissingLicenseReasons> SPECIAL_INFORMATION = Stream.of(new Object[][] {\n                {\"No-Sources\", MissingLicenseReasons.NO_SOURCES},\n                {\"No-Source-License\", MissingLicenseReasons.NO_LICENSE_IN_SOURCES},\n                {\"Not-Declared\", MissingLicenseReasons.NOT_DECLARED},\n                {\"Not-Provided\", MissingLicenseReasons.NOT_PROVIDED},\n                {\"Not-Supported\", MissingLicenseReasons.NOT_SUPPORTED},\n                {\"Non-Standard\", MissingLicenseReasons.NON_STANDARD}})\n                .collect(Collectors.toMap(data -> (String) data[0], data -> (MissingLicenseReasons) data[1]));", "modifier": "private static final", "type": "Map<String, MissingLicenseReasons>", "declarator": "SPECIAL_INFORMATION = Stream.of(new Object[][] {\n                {\"No-Sources\", MissingLicenseReasons.NO_SOURCES},\n                {\"No-Source-License\", MissingLicenseReasons.NO_LICENSE_IN_SOURCES},\n                {\"Not-Declared\", MissingLicenseReasons.NOT_DECLARED},\n                {\"Not-Provided\", MissingLicenseReasons.NOT_PROVIDED},\n                {\"Not-Supported\", MissingLicenseReasons.NOT_SUPPORTED},\n                {\"Non-Standard\", MissingLicenseReasons.NON_STANDARD}})\n                .collect(Collectors.toMap(data -> (String) data[0], data -> (MissingLicenseReasons) data[1]))", "var_name": "SPECIAL_INFORMATION"}], "methods": [{"identifier": "JsonReader", "parameters": "(Path recordingFile, Path dependencyDir, Charset encoding)", "modifiers": "public", "return": "", "signature": " JsonReader(Path recordingFile, Path dependencyDir, Charset encoding)", "full_signature": "public  JsonReader(Path recordingFile, Path dependencyDir, Charset encoding)", "class_method_signature": "JsonReader.JsonReader(Path recordingFile, Path dependencyDir, Charset encoding)", "testcase": false, "constructor": true}, {"identifier": "readJsonObjects", "parameters": "(InputStream stream)", "modifiers": "private", "return": "List<JsonObject>", "signature": "List<JsonObject> readJsonObjects(InputStream stream)", "full_signature": "private List<JsonObject> readJsonObjects(InputStream stream)", "class_method_signature": "JsonReader.readJsonObjects(InputStream stream)", "testcase": false, "constructor": false}, {"identifier": "createArtifactsList", "parameters": "(InputStream stream, List<String> filterStrings)", "modifiers": "@SuppressWarnings(\"WeakerAccess\") protected", "return": "List<Artifact>", "signature": "List<Artifact> createArtifactsList(InputStream stream, List<String> filterStrings)", "full_signature": "@SuppressWarnings(\"WeakerAccess\") protected List<Artifact> createArtifactsList(InputStream stream, List<String> filterStrings)", "class_method_signature": "JsonReader.createArtifactsList(InputStream stream, List<String> filterStrings)", "testcase": false, "constructor": false}, {"identifier": "createArtifactsList", "parameters": "(InputStream is)", "modifiers": "public", "return": "List<Artifact>", "signature": "List<Artifact> createArtifactsList(InputStream is)", "full_signature": "public List<Artifact> createArtifactsList(InputStream is)", "class_method_signature": "JsonReader.createArtifactsList(InputStream is)", "testcase": false, "constructor": false}, {"identifier": "filterObject", "parameters": "(JsonObject object, Optional<List<String>> filterStrings)", "modifiers": "private", "return": "boolean", "signature": "boolean filterObject(JsonObject object, Optional<List<String>> filterStrings)", "full_signature": "private boolean filterObject(JsonObject object, Optional<List<String>> filterStrings)", "class_method_signature": "JsonReader.filterObject(JsonObject object, Optional<List<String>> filterStrings)", "testcase": false, "constructor": false}, {"identifier": "mapArtifact", "parameters": "(JsonObject obj)", "modifiers": "private", "return": "Artifact", "signature": "Artifact mapArtifact(JsonObject obj)", "full_signature": "private Artifact mapArtifact(JsonObject obj)", "class_method_signature": "JsonReader.mapArtifact(JsonObject obj)", "testcase": false, "constructor": false}, {"identifier": "potentiallyAddSpecialLicenseInformation", "parameters": "(JsonObject licenseDataObj, Artifact a)", "modifiers": "private", "return": "void", "signature": "void potentiallyAddSpecialLicenseInformation(JsonObject licenseDataObj, Artifact a)", "full_signature": "private void potentiallyAddSpecialLicenseInformation(JsonObject licenseDataObj, Artifact a)", "class_method_signature": "JsonReader.potentiallyAddSpecialLicenseInformation(JsonObject licenseDataObj, Artifact a)", "testcase": false, "constructor": false}, {"identifier": "extractSpecialLicenseDeclarations", "parameters": "(String identifier, JsonObject licenseDataObj)", "modifiers": "private", "return": "List<MissingLicenseReasons>", "signature": "List<MissingLicenseReasons> extractSpecialLicenseDeclarations(String identifier, JsonObject licenseDataObj)", "full_signature": "private List<MissingLicenseReasons> extractSpecialLicenseDeclarations(String identifier, JsonObject licenseDataObj)", "class_method_signature": "JsonReader.extractSpecialLicenseDeclarations(String identifier, JsonObject licenseDataObj)", "testcase": false, "constructor": false}, {"identifier": "mapSecurityIssues", "parameters": "(JsonObject securityDataObj)", "modifiers": "private", "return": "Issues", "signature": "Issues mapSecurityIssues(JsonObject securityDataObj)", "full_signature": "private Issues mapSecurityIssues(JsonObject securityDataObj)", "class_method_signature": "JsonReader.mapSecurityIssues(JsonObject securityDataObj)", "testcase": false, "constructor": false}, {"identifier": "parseSeverity", "parameters": "(JsonObject json)", "modifiers": "private static", "return": "double", "signature": "double parseSeverity(JsonObject json)", "full_signature": "private static double parseSeverity(JsonObject json)", "class_method_signature": "JsonReader.parseSeverity(JsonObject json)", "testcase": false, "constructor": false}, {"identifier": "mapFilename", "parameters": "(JsonObject obj)", "modifiers": "private", "return": "ArtifactFilename", "signature": "ArtifactFilename mapFilename(JsonObject obj)", "full_signature": "private ArtifactFilename mapFilename(JsonObject obj)", "class_method_signature": "JsonReader.mapFilename(JsonObject obj)", "testcase": false, "constructor": false}, {"identifier": "mapLicenses", "parameters": "(String identifier, JsonObject licenseDataObj)", "modifiers": "private", "return": "LicenseInformation", "signature": "LicenseInformation mapLicenses(String identifier, JsonObject licenseDataObj)", "full_signature": "private LicenseInformation mapLicenses(String identifier, JsonObject licenseDataObj)", "class_method_signature": "JsonReader.mapLicenses(String identifier, JsonObject licenseDataObj)", "testcase": false, "constructor": false}, {"identifier": "mapPathNames", "parameters": "(JsonObject obj)", "modifiers": "private", "return": "String[]", "signature": "String[] mapPathNames(JsonObject obj)", "full_signature": "private String[] mapPathNames(JsonObject obj)", "class_method_signature": "JsonReader.mapPathNames(JsonObject obj)", "testcase": false, "constructor": false}, {"identifier": "mapProprietary", "parameters": "(JsonObject obj)", "modifiers": "private", "return": "boolean", "signature": "boolean mapProprietary(JsonObject obj)", "full_signature": "private boolean mapProprietary(JsonObject obj)", "class_method_signature": "JsonReader.mapProprietary(JsonObject obj)", "testcase": false, "constructor": false}, {"identifier": "mapMatchState", "parameters": "(JsonObject obj)", "modifiers": "private", "return": "MatchState", "signature": "MatchState mapMatchState(JsonObject obj)", "full_signature": "private MatchState mapMatchState(JsonObject obj)", "class_method_signature": "JsonReader.mapMatchState(JsonObject obj)", "testcase": false, "constructor": false}, {"identifier": "mapMavenCoordinates", "parameters": "(JsonObject objCoordinates)", "modifiers": "private", "return": "Optional<Coordinate>", "signature": "Optional<Coordinate> mapMavenCoordinates(JsonObject objCoordinates)", "full_signature": "private Optional<Coordinate> mapMavenCoordinates(JsonObject objCoordinates)", "class_method_signature": "JsonReader.mapMavenCoordinates(JsonObject objCoordinates)", "testcase": false, "constructor": false}, {"identifier": "mapJavaScriptCoordinates", "parameters": "(JsonObject objCoordinates)", "modifiers": "private", "return": "Optional<Coordinate>", "signature": "Optional<Coordinate> mapJavaScriptCoordinates(JsonObject objCoordinates)", "full_signature": "private Optional<Coordinate> mapJavaScriptCoordinates(JsonObject objCoordinates)", "class_method_signature": "JsonReader.mapJavaScriptCoordinates(JsonObject objCoordinates)", "testcase": false, "constructor": false}, {"identifier": "mapDotNetCoordinates", "parameters": "(JsonObject objCoordinates)", "modifiers": "private", "return": "Optional<Coordinate>", "signature": "Optional<Coordinate> mapDotNetCoordinates(JsonObject objCoordinates)", "full_signature": "private Optional<Coordinate> mapDotNetCoordinates(JsonObject objCoordinates)", "class_method_signature": "JsonReader.mapDotNetCoordinates(JsonObject objCoordinates)", "testcase": false, "constructor": false}, {"identifier": "mapCoordinates", "parameters": "(JsonObject object)", "modifiers": "private", "return": "Optional<Coordinate>", "signature": "Optional<Coordinate> mapCoordinates(JsonObject object)", "full_signature": "private Optional<Coordinate> mapCoordinates(JsonObject object)", "class_method_signature": "JsonReader.mapCoordinates(JsonObject object)", "testcase": false, "constructor": false}, {"identifier": "getJavaScriptCoordinatesNamespace", "parameters": "(String name)", "modifiers": "private", "return": "String", "signature": "String getJavaScriptCoordinatesNamespace(String name)", "full_signature": "private String getJavaScriptCoordinatesNamespace(String name)", "class_method_signature": "JsonReader.getJavaScriptCoordinatesNamespace(String name)", "testcase": false, "constructor": false}, {"identifier": "getJavaScriptCoordinatesPackageName", "parameters": "(String name)", "modifiers": "private", "return": "String", "signature": "String getJavaScriptCoordinatesPackageName(String name)", "full_signature": "private String getJavaScriptCoordinatesPackageName(String name)", "class_method_signature": "JsonReader.getJavaScriptCoordinatesPackageName(String name)", "testcase": false, "constructor": false}, {"identifier": "mapArtifactDownloadurl", "parameters": "(JsonObject obj)", "modifiers": "private", "return": "String", "signature": "String mapArtifactDownloadurl(JsonObject obj)", "full_signature": "private String mapArtifactDownloadurl(JsonObject obj)", "class_method_signature": "JsonReader.mapArtifactDownloadurl(JsonObject obj)", "testcase": false, "constructor": false}, {"identifier": "getEncoding", "parameters": "()", "modifiers": "protected", "return": "Charset", "signature": "Charset getEncoding()", "full_signature": "protected Charset getEncoding()", "class_method_signature": "JsonReader.getEncoding()", "testcase": false, "constructor": false}, {"identifier": "getRecordingFile", "parameters": "()", "modifiers": "protected", "return": "Path", "signature": "Path getRecordingFile()", "full_signature": "protected Path getRecordingFile()", "class_method_signature": "JsonReader.getRecordingFile()", "testcase": false, "constructor": false}], "file": "core/core-workflow-steps/src/main/java/org/eclipse/sw360/antenna/jsonreader/JsonReader.java"}, "focal_method": {"identifier": "createArtifactsList", "parameters": "(InputStream stream, List<String> filterStrings)", "modifiers": "@SuppressWarnings(\"WeakerAccess\") protected", "return": "List<Artifact>", "body": "@SuppressWarnings(\"WeakerAccess\")\n    protected List<Artifact> createArtifactsList(InputStream stream, List<String> filterStrings) {\n        LOGGER.debug(\"Create artifacts list from input stream.\");\n        List<Artifact> artifacts = new ArrayList<>();\n        List<JsonObject> objects = readJsonObjects(stream);\n        for (JsonObject obj : objects) {\n            if (filterObject(obj, Optional.ofNullable(filterStrings))) {\n                continue;\n            }\n            Artifact artifact = mapArtifact(obj);\n            artifacts.add(artifact);\n        }\n        LOGGER.debug(\"Creation of artifacts list finished.\");\n        try {\n            stream.close();\n        } catch (IOException e) {\n            LOGGER.debug(\"Failed to close stream. Ignored.\");\n        }\n        return artifacts;\n    }", "signature": "List<Artifact> createArtifactsList(InputStream stream, List<String> filterStrings)", "full_signature": "@SuppressWarnings(\"WeakerAccess\") protected List<Artifact> createArtifactsList(InputStream stream, List<String> filterStrings)", "class_method_signature": "JsonReader.createArtifactsList(InputStream stream, List<String> filterStrings)", "testcase": false, "constructor": false, "invocations": ["debug", "readJsonObjects", "filterObject", "ofNullable", "mapArtifact", "add", "debug", "close", "debug"]}, "repository": {"repo_id": 140017338, "url": "https://github.com/eclipse/antenna", "stars": 14, "created": "7/6/2018 6:17:28 PM +00:00", "updates": "2020-01-21T13:15:34+00:00", "fork": "False", "license": "licensed"}}