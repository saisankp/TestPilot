{"test_class": {"identifier": "DubboSwaggerApiListingResourceTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private Application app;", "modifier": "private", "type": "Application", "declarator": "app", "var_name": "app"}, {"original_string": "private ServletConfig sc;", "modifier": "private", "type": "ServletConfig", "declarator": "sc", "var_name": "sc"}], "file": "dubbo-rpc/dubbo-rpc-rest/src/test/java/org/apache/dubbo/rpc/protocol/rest/integration/swagger/DubboSwaggerApiListingResourceTest.java"}, "test_case": {"identifier": "test", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void test() throws Exception {\n\n        DubboSwaggerApiListingResource resource = new  DubboSwaggerApiListingResource();\n\n        app = mock(Application.class);\n        sc = mock(ServletConfig.class);\n        Set<Class<?>> sets = new HashSet<Class<?>>();\n        sets.add(SwaggerService.class);\n\n        when(sc.getServletContext()).thenReturn(mock(ServletContext.class));\n        when(app.getClasses()).thenReturn(sets);\n\n        Response response = resource.getListingJson(app, sc,\n                null, new ResteasyUriInfo(new URI(\"http://rest.test\")));\n\n        Assertions.assertNotNull(response);\n        Swagger swagger = (Swagger)response.getEntity();\n        Assertions.assertEquals(\"SwaggerService\",swagger.getTags().get(0).getName());\n        Assertions.assertEquals(\"/demoService/hello\",swagger.getPaths().keySet().toArray()[0].toString());\n    }", "signature": "void test()", "full_signature": "@Test public void test()", "class_method_signature": "DubboSwaggerApiListingResourceTest.test()", "testcase": true, "constructor": false, "invocations": ["mock", "mock", "add", "thenReturn", "when", "getServletContext", "mock", "thenReturn", "when", "getClasses", "getListingJson", "assertNotNull", "getEntity", "assertEquals", "getName", "get", "getTags", "assertEquals", "toString", "toArray", "keySet", "getPaths"]}, "focal_class": {"identifier": "DubboSwaggerApiListingResource", "superclass": "extends BaseApiListingResource", "interfaces": "implements DubboSwaggerService", "fields": [{"original_string": "@Context\n    ServletContext context;", "modifier": "@Context", "type": "ServletContext", "declarator": "context", "var_name": "context"}], "methods": [{"identifier": "getListingJson", "parameters": "(Application app, ServletConfig sc,\n                                   HttpHeaders headers, UriInfo uriInfo)", "modifiers": "@Override public", "return": "Response", "signature": "Response getListingJson(Application app, ServletConfig sc,\n                                   HttpHeaders headers, UriInfo uriInfo)", "full_signature": "@Override public Response getListingJson(Application app, ServletConfig sc,\n                                   HttpHeaders headers, UriInfo uriInfo)", "class_method_signature": "DubboSwaggerApiListingResource.getListingJson(Application app, ServletConfig sc,\n                                   HttpHeaders headers, UriInfo uriInfo)", "testcase": false, "constructor": false}], "file": "dubbo-rpc/dubbo-rpc-rest/src/main/java/org/apache/dubbo/rpc/protocol/rest/integration/swagger/DubboSwaggerApiListingResource.java"}, "focal_method": {"identifier": "getListingJson", "parameters": "(Application app, ServletConfig sc,\n                                   HttpHeaders headers, UriInfo uriInfo)", "modifiers": "@Override public", "return": "Response", "body": "@Override\n    public Response getListingJson(Application app, ServletConfig sc,\n                                   HttpHeaders headers, UriInfo uriInfo)  throws JsonProcessingException {\n        Response response =  getListingJsonResponse(app, context, sc, headers, uriInfo);\n        response.getHeaders().add(\"Access-Control-Allow-Origin\", \"*\");\n        response.getHeaders().add(\"Access-Control-Allow-Headers\", \"x-requested-with, ssi-token\");\n        response.getHeaders().add(\"Access-Control-Max-Age\", \"3600\");\n        response.getHeaders().add(\"Access-Control-Allow-Methods\",\"GET,POST,PUT,DELETE,OPTIONS\");\n        return response;\n    }", "signature": "Response getListingJson(Application app, ServletConfig sc,\n                                   HttpHeaders headers, UriInfo uriInfo)", "full_signature": "@Override public Response getListingJson(Application app, ServletConfig sc,\n                                   HttpHeaders headers, UriInfo uriInfo)", "class_method_signature": "DubboSwaggerApiListingResource.getListingJson(Application app, ServletConfig sc,\n                                   HttpHeaders headers, UriInfo uriInfo)", "testcase": false, "constructor": false, "invocations": ["getListingJsonResponse", "add", "getHeaders", "add", "getHeaders", "add", "getHeaders", "add", "getHeaders"]}, "repository": {"repo_id": 4710920, "url": "https://github.com/apache/dubbo", "stars": 30960, "created": "6/19/2012 7:56:02 AM +00:00", "updates": "2020-01-27T14:21:03+00:00", "fork": "False", "license": "licensed"}}