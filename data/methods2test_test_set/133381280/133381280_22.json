{"test_class": {"identifier": "LookoutRegistryMetricReaderTest", "superclass": "extends AbstractTestBase", "interfaces": "", "fields": [{"original_string": "@Autowired\n    private List<MetricReaderPublicMetrics> metricReaderPublicMetrics   = null;", "modifier": "@Autowired\n    private", "type": "List<MetricReaderPublicMetrics>", "declarator": "metricReaderPublicMetrics   = null", "var_name": "metricReaderPublicMetrics"}, {"original_string": "@Autowired\n    private LookoutRegistryMetricReader     lookoutRegistryMetricReader = null;", "modifier": "@Autowired\n    private", "type": "LookoutRegistryMetricReader", "declarator": "lookoutRegistryMetricReader = null", "var_name": "lookoutRegistryMetricReader"}], "file": "client/lookout-sofa-boot-starter/src/test/java/com/alipay/lookout/starter/support/reader/LookoutRegistryMetricReaderTest.java"}, "test_case": {"identifier": "testFindAll", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testFindAll() throws Exception {\n        Iterable<Metric<?>> metricIterable = this.lookoutRegistryMetricReader.findAll();\n        List<Metric> metricList = new ArrayList<Metric>();\n        for (Metric<?> metric : metricIterable) {\n            metricList.add(metric);\n        }\n        assertTrue(metricList.size() > 0);\n    }", "signature": "void testFindAll()", "full_signature": "@Test public void testFindAll()", "class_method_signature": "LookoutRegistryMetricReaderTest.testFindAll()", "testcase": true, "constructor": false, "invocations": ["findAll", "add", "assertTrue", "size"]}, "focal_class": {"identifier": "LookoutRegistryMetricReader", "superclass": "", "interfaces": "implements MetricReader, MetricRegistryListener", "fields": [{"original_string": "private final SpringBootActuatorRegistry springBootActuatorRegistry;", "modifier": "private final", "type": "SpringBootActuatorRegistry", "declarator": "springBootActuatorRegistry", "var_name": "springBootActuatorRegistry"}], "methods": [{"identifier": "LookoutRegistryMetricReader", "parameters": "(SpringBootActuatorRegistry springBootActuatorRegistry)", "modifiers": "public", "return": "", "signature": " LookoutRegistryMetricReader(SpringBootActuatorRegistry springBootActuatorRegistry)", "full_signature": "public  LookoutRegistryMetricReader(SpringBootActuatorRegistry springBootActuatorRegistry)", "class_method_signature": "LookoutRegistryMetricReader.LookoutRegistryMetricReader(SpringBootActuatorRegistry springBootActuatorRegistry)", "testcase": false, "constructor": true}, {"identifier": "findOne", "parameters": "(String metricName)", "modifiers": "@Override public", "return": "Metric<?>", "signature": "Metric<?> findOne(String metricName)", "full_signature": "@Override public Metric<?> findOne(String metricName)", "class_method_signature": "LookoutRegistryMetricReader.findOne(String metricName)", "testcase": false, "constructor": false}, {"identifier": "findMetricsById", "parameters": "(Id id)", "modifiers": "private", "return": "List<Metric>", "signature": "List<Metric> findMetricsById(Id id)", "full_signature": "private List<Metric> findMetricsById(Id id)", "class_method_signature": "LookoutRegistryMetricReader.findMetricsById(Id id)", "testcase": false, "constructor": false}, {"identifier": "findAll", "parameters": "()", "modifiers": "@Override public", "return": "Iterable<Metric<?>>", "signature": "Iterable<Metric<?>> findAll()", "full_signature": "@Override public Iterable<Metric<?>> findAll()", "class_method_signature": "LookoutRegistryMetricReader.findAll()", "testcase": false, "constructor": false}, {"identifier": "count", "parameters": "()", "modifiers": "@Override public", "return": "long", "signature": "long count()", "full_signature": "@Override public long count()", "class_method_signature": "LookoutRegistryMetricReader.count()", "testcase": false, "constructor": false}, {"identifier": "onRemoved", "parameters": "(com.alipay.lookout.api.Metric metric)", "modifiers": "@Override public", "return": "void", "signature": "void onRemoved(com.alipay.lookout.api.Metric metric)", "full_signature": "@Override public void onRemoved(com.alipay.lookout.api.Metric metric)", "class_method_signature": "LookoutRegistryMetricReader.onRemoved(com.alipay.lookout.api.Metric metric)", "testcase": false, "constructor": false}, {"identifier": "onAdded", "parameters": "(com.alipay.lookout.api.Metric metric)", "modifiers": "@Override public", "return": "void", "signature": "void onAdded(com.alipay.lookout.api.Metric metric)", "full_signature": "@Override public void onAdded(com.alipay.lookout.api.Metric metric)", "class_method_signature": "LookoutRegistryMetricReader.onAdded(com.alipay.lookout.api.Metric metric)", "testcase": false, "constructor": false}], "file": "client/lookout-sofa-boot-starter/src/main/java/com/alipay/lookout/starter/support/reader/LookoutRegistryMetricReader.java"}, "focal_method": {"identifier": "findAll", "parameters": "()", "modifiers": "@Override public", "return": "Iterable<Metric<?>>", "body": "@Override\n    public Iterable<Metric<?>> findAll() {\n        final Iterator<com.alipay.lookout.api.Metric> lookoutIt = this.springBootActuatorRegistry\n            .iterator();\n        return new Iterable<Metric<?>>() {\n            @Override\n            public Iterator<Metric<?>> iterator() {\n                List<Metric<?>> metricsRes = new LinkedList<Metric<?>>();\n                while (lookoutIt.hasNext()) {\n                    com.alipay.lookout.api.Metric lookoutMetric = lookoutIt.next();\n                    Id id = lookoutMetric.id();\n                    Collection<Metric> metricList = findMetricsById(id);\n                    if (metricList != null && metricList.size() > 0) {\n                        for (Metric metric : metricList) {\n                            metricsRes.add(metric);\n                        }\n                    }\n                }\n                return metricsRes.iterator();\n            }\n        };\n    }", "signature": "Iterable<Metric<?>> findAll()", "full_signature": "@Override public Iterable<Metric<?>> findAll()", "class_method_signature": "LookoutRegistryMetricReader.findAll()", "testcase": false, "constructor": false, "invocations": ["iterator", "hasNext", "next", "id", "findMetricsById", "size", "add", "iterator"]}, "repository": {"repo_id": 133381280, "url": "https://github.com/sofastack/sofa-lookout", "language": "Java", "is_fork": false, "fork_count": 113, "stargazer_count": 318, "size": 1394, "license": "licensed"}}