{"test_class": {"identifier": "SysDictItemRestApiTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static SysDictRestApi sysDictRestApi = new SysDictRestApi();", "modifier": "private static", "type": "SysDictRestApi", "declarator": "sysDictRestApi = new SysDictRestApi()", "var_name": "sysDictRestApi"}, {"original_string": "private static SysDictItemRestApi sysDictItemRestApi = new SysDictItemRestApi();", "modifier": "private static", "type": "SysDictItemRestApi", "declarator": "sysDictItemRestApi = new SysDictItemRestApi()", "var_name": "sysDictItemRestApi"}, {"original_string": "private static SystemRestApi systemRestApi = new SystemRestApi();", "modifier": "private static", "type": "SystemRestApi", "declarator": "systemRestApi = new SystemRestApi()", "var_name": "systemRestApi"}, {"original_string": "private static GsonBuilder gsonBuilder = new GsonBuilder();", "modifier": "private static", "type": "GsonBuilder", "declarator": "gsonBuilder = new GsonBuilder()", "var_name": "gsonBuilder"}, {"original_string": "private static Gson gson = gsonBuilder.setDateFormat(\"yyyy-MM-dd HH:mm:ss\").create();", "modifier": "private static", "type": "Gson", "declarator": "gson = gsonBuilder.setDateFormat(\"yyyy-MM-dd HH:mm:ss\").create()", "var_name": "gson"}, {"original_string": "private static final int NEW_SYS_DICT_ITEM_COUNT = 3;", "modifier": "private static final", "type": "int", "declarator": "NEW_SYS_DICT_ITEM_COUNT = 3", "var_name": "NEW_SYS_DICT_ITEM_COUNT"}, {"original_string": "private static final String DICT_CODE = \"dictCode-SysDictItemRestApiTest\";", "modifier": "private static final", "type": "String", "declarator": "DICT_CODE = \"dictCode-SysDictItemRestApiTest\"", "var_name": "DICT_CODE"}], "file": "submarine-server/server-core/src/test/java/org/apache/submarine/server/workbench/rest/SysDictItemRestApiTest.java"}, "test_case": {"identifier": "setDeletedTest", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n  public void setDeletedTest() {\n    ListResult<SysDictItem> listResult = queryTestDictItemList();\n    for (SysDictItem item : listResult.getRecords()) {\n      sysDictItemRestApi.delete(item.getId(), 1);\n    }\n\n    ListResult<SysDictItem> listResult2 = queryTestDictItemList();\n    for (SysDictItem item : listResult2.getRecords()) {\n      assertEquals((int) item.getDeleted(), 1);\n    }\n\n    for (SysDictItem item : listResult2.getRecords()) {\n      sysDictItemRestApi.delete(item.getId(), 0);\n    }\n\n    ListResult<SysDictItem> listResult3 = queryTestDictItemList();\n    for (SysDictItem item : listResult3.getRecords()) {\n      assertEquals((int) item.getDeleted(), 0);\n    }\n  }", "signature": "void setDeletedTest()", "full_signature": "@Test public void setDeletedTest()", "class_method_signature": "SysDictItemRestApiTest.setDeletedTest()", "testcase": true, "constructor": false, "invocations": ["queryTestDictItemList", "getRecords", "delete", "getId", "queryTestDictItemList", "getRecords", "assertEquals", "getDeleted", "getRecords", "delete", "getId", "queryTestDictItemList", "getRecords", "assertEquals", "getDeleted"]}, "focal_class": {"identifier": "SysDictItemRestApi", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final Logger LOG = LoggerFactory.getLogger(SysDictItemRestApi.class);", "modifier": "private static final", "type": "Logger", "declarator": "LOG = LoggerFactory.getLogger(SysDictItemRestApi.class)", "var_name": "LOG"}, {"original_string": "private static final Gson gson = new Gson();", "modifier": "private static final", "type": "Gson", "declarator": "gson = new Gson()", "var_name": "gson"}], "methods": [{"identifier": "SysDictItemRestApi", "parameters": "()", "modifiers": "@Inject public", "return": "", "signature": " SysDictItemRestApi()", "full_signature": "@Inject public  SysDictItemRestApi()", "class_method_signature": "SysDictItemRestApi.SysDictItemRestApi()", "testcase": false, "constructor": true}, {"identifier": "list", "parameters": "(@QueryParam(\"dictCode\") String dictCode,\n                       @QueryParam(\"itemText\") String itemText,\n                       @QueryParam(\"itemValue\") String itemValue,\n                       @QueryParam(\"column\") String column,\n                       @QueryParam(\"field\") String field,\n                       @QueryParam(\"order\") String order,\n                       @QueryParam(\"pageNo\") int pageNo,\n                       @QueryParam(\"pageSize\") int pageSize)", "modifiers": "@GET @Path(\"/list\") @SubmarineApi public", "return": "Response", "signature": "Response list(@QueryParam(\"dictCode\") String dictCode,\n                       @QueryParam(\"itemText\") String itemText,\n                       @QueryParam(\"itemValue\") String itemValue,\n                       @QueryParam(\"column\") String column,\n                       @QueryParam(\"field\") String field,\n                       @QueryParam(\"order\") String order,\n                       @QueryParam(\"pageNo\") int pageNo,\n                       @QueryParam(\"pageSize\") int pageSize)", "full_signature": "@GET @Path(\"/list\") @SubmarineApi public Response list(@QueryParam(\"dictCode\") String dictCode,\n                       @QueryParam(\"itemText\") String itemText,\n                       @QueryParam(\"itemValue\") String itemValue,\n                       @QueryParam(\"column\") String column,\n                       @QueryParam(\"field\") String field,\n                       @QueryParam(\"order\") String order,\n                       @QueryParam(\"pageNo\") int pageNo,\n                       @QueryParam(\"pageSize\") int pageSize)", "class_method_signature": "SysDictItemRestApi.list(@QueryParam(\"dictCode\") String dictCode,\n                       @QueryParam(\"itemText\") String itemText,\n                       @QueryParam(\"itemValue\") String itemValue,\n                       @QueryParam(\"column\") String column,\n                       @QueryParam(\"field\") String field,\n                       @QueryParam(\"order\") String order,\n                       @QueryParam(\"pageNo\") int pageNo,\n                       @QueryParam(\"pageSize\") int pageSize)", "testcase": false, "constructor": false}, {"identifier": "add", "parameters": "(SysDictItem sysDictItem)", "modifiers": "@POST @Path(\"/add\") @SubmarineApi public", "return": "Response", "signature": "Response add(SysDictItem sysDictItem)", "full_signature": "@POST @Path(\"/add\") @SubmarineApi public Response add(SysDictItem sysDictItem)", "class_method_signature": "SysDictItemRestApi.add(SysDictItem sysDictItem)", "testcase": false, "constructor": false}, {"identifier": "edit", "parameters": "(SysDictItem sysDictItem)", "modifiers": "@PUT @Path(\"/edit\") @SubmarineApi public", "return": "Response", "signature": "Response edit(SysDictItem sysDictItem)", "full_signature": "@PUT @Path(\"/edit\") @SubmarineApi public Response edit(SysDictItem sysDictItem)", "class_method_signature": "SysDictItemRestApi.edit(SysDictItem sysDictItem)", "testcase": false, "constructor": false}, {"identifier": "delete", "parameters": "(@QueryParam(\"id\") String id, @QueryParam(\"deleted\") int deleted)", "modifiers": "@DELETE @Path(\"/delete\") @SubmarineApi public", "return": "Response", "signature": "Response delete(@QueryParam(\"id\") String id, @QueryParam(\"deleted\") int deleted)", "full_signature": "@DELETE @Path(\"/delete\") @SubmarineApi public Response delete(@QueryParam(\"id\") String id, @QueryParam(\"deleted\") int deleted)", "class_method_signature": "SysDictItemRestApi.delete(@QueryParam(\"id\") String id, @QueryParam(\"deleted\") int deleted)", "testcase": false, "constructor": false}, {"identifier": "remove", "parameters": "(String id)", "modifiers": "@DELETE @Path(\"/remove\") @SubmarineApi public", "return": "Response", "signature": "Response remove(String id)", "full_signature": "@DELETE @Path(\"/remove\") @SubmarineApi public Response remove(String id)", "class_method_signature": "SysDictItemRestApi.remove(String id)", "testcase": false, "constructor": false}, {"identifier": "getDictItems", "parameters": "(@PathParam(\"dictCode\") String dictCode)", "modifiers": "@GET @Path(\"/getDictItems/{dictCode}\") @SubmarineApi public", "return": "Response", "signature": "Response getDictItems(@PathParam(\"dictCode\") String dictCode)", "full_signature": "@GET @Path(\"/getDictItems/{dictCode}\") @SubmarineApi public Response getDictItems(@PathParam(\"dictCode\") String dictCode)", "class_method_signature": "SysDictItemRestApi.getDictItems(@PathParam(\"dictCode\") String dictCode)", "testcase": false, "constructor": false}], "file": "submarine-server/server-core/src/main/java/org/apache/submarine/server/workbench/rest/SysDictItemRestApi.java"}, "focal_method": {"identifier": "delete", "parameters": "(@QueryParam(\"id\") String id, @QueryParam(\"deleted\") int deleted)", "modifiers": "@DELETE @Path(\"/delete\") @SubmarineApi public", "return": "Response", "body": "@DELETE\n  @Path(\"/delete\")\n  @SubmarineApi\n  public Response delete(@QueryParam(\"id\") String id, @QueryParam(\"deleted\") int deleted) {\n    String msgOperation = \"Delete\";\n    if (deleted == 0) {\n      msgOperation = \"Restore\";\n    }\n\n    try {\n      SqlSession sqlSession = MyBatisUtil.getSqlSession();\n      SysDictItemMapper sysDictItemMapper = sqlSession.getMapper(SysDictItemMapper.class);\n      try {\n        SysDictItem dictItem = new SysDictItem();\n        dictItem.setId(id);\n        dictItem.setDeleted(deleted);\n        sysDictItemMapper.updateBy(dictItem);\n        sqlSession.commit();\n      } catch (Exception e) {\n        LOG.error(e.getMessage(), e);\n      } finally {\n        sqlSession.close();\n      }\n    } catch (Exception e) {\n      LOG.error(e.getMessage(), e);\n      return new JsonResponse.Builder<>(Response.Status.OK)\n          .message(msgOperation + \" dict item failed!\").success(false).build();\n    }\n\n    return new JsonResponse.Builder<>(Response.Status.OK)\n        .message(msgOperation + \" the dict item successfully!\").success(true).build();\n  }", "signature": "Response delete(@QueryParam(\"id\") String id, @QueryParam(\"deleted\") int deleted)", "full_signature": "@DELETE @Path(\"/delete\") @SubmarineApi public Response delete(@QueryParam(\"id\") String id, @QueryParam(\"deleted\") int deleted)", "class_method_signature": "SysDictItemRestApi.delete(@QueryParam(\"id\") String id, @QueryParam(\"deleted\") int deleted)", "testcase": false, "constructor": false, "invocations": ["getSqlSession", "getMapper", "setId", "setDeleted", "updateBy", "commit", "error", "getMessage", "close", "error", "getMessage", "build", "success", "message", "build", "success", "message"]}, "repository": {"repo_id": 209459144, "url": "https://github.com/apache/submarine", "stars": 185, "created": "9/19/2019 4:00:17 AM +00:00", "updates": "2020-01-27T15:27:05+00:00", "fork": "False", "license": "licensed"}}