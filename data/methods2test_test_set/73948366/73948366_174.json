{"test_class": {"identifier": "NotificationToEmailConverterCommonTest", "superclass": "", "interfaces": "", "fields": [], "file": "libs/java/server_common/src/test/java/com/yahoo/athenz/common/server/notification/NotificationToEmailConverterCommonTest.java"}, "test_case": {"identifier": "testReadContentFromFileException", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testReadContentFromFileException() throws Exception {\n        NotificationToEmailConverterCommon notificationToEmailConverterCommon = new NotificationToEmailConverterCommon();\n\n        BufferedReader reader = mock(BufferedReader.class);\n        Mockito.when(reader.readLine()).thenThrow(new IOException());\n        assertTrue(notificationToEmailConverterCommon.readContentFromFile(getClass().getClassLoader(), \"resources/dummy\").isEmpty());\n    }", "signature": "void testReadContentFromFileException()", "full_signature": "@Test public void testReadContentFromFileException()", "class_method_signature": "NotificationToEmailConverterCommonTest.testReadContentFromFileException()", "testcase": true, "constructor": false, "invocations": ["mock", "thenThrow", "when", "readLine", "assertTrue", "isEmpty", "readContentFromFile", "getClassLoader", "getClass"]}, "focal_class": {"identifier": "NotificationToEmailConverterCommon", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final Logger LOGGER = LoggerFactory.getLogger(NotificationToEmailConverterCommon.class);", "modifier": "private static final", "type": "Logger", "declarator": "LOGGER = LoggerFactory.getLogger(NotificationToEmailConverterCommon.class)", "var_name": "LOGGER"}, {"original_string": "private static final String AT = \"@\";", "modifier": "private static final", "type": "String", "declarator": "AT = \"@\"", "var_name": "AT"}, {"original_string": "private static final String USER_DOMAIN_DEFAULT = \"user\";", "modifier": "private static final", "type": "String", "declarator": "USER_DOMAIN_DEFAULT = \"user\"", "var_name": "USER_DOMAIN_DEFAULT"}, {"original_string": "private static final String PROP_USER_DOMAIN = \"athenz.user_domain\";", "modifier": "private static final", "type": "String", "declarator": "PROP_USER_DOMAIN = \"athenz.user_domain\"", "var_name": "PROP_USER_DOMAIN"}, {"original_string": "private static final String PROP_NOTIFICATION_EMAIL_DOMAIN_TO = \"athenz.notification_email_domain_to\";", "modifier": "private static final", "type": "String", "declarator": "PROP_NOTIFICATION_EMAIL_DOMAIN_TO = \"athenz.notification_email_domain_to\"", "var_name": "PROP_NOTIFICATION_EMAIL_DOMAIN_TO"}, {"original_string": "private static final String PROP_NOTIFICATION_WORKFLOW_URL = \"athenz.notification_workflow_url\";", "modifier": "private static final", "type": "String", "declarator": "PROP_NOTIFICATION_WORKFLOW_URL = \"athenz.notification_workflow_url\"", "var_name": "PROP_NOTIFICATION_WORKFLOW_URL"}, {"original_string": "private static final String PROP_NOTIFICATION_ATHENZ_UI_URL = \"athenz.notification_athenz_ui_url\";", "modifier": "private static final", "type": "String", "declarator": "PROP_NOTIFICATION_ATHENZ_UI_URL = \"athenz.notification_athenz_ui_url\"", "var_name": "PROP_NOTIFICATION_ATHENZ_UI_URL"}, {"original_string": "private static final String PROP_NOTIFICATION_SUPPORT_TEXT = \"athenz.notification_support_text\";", "modifier": "private static final", "type": "String", "declarator": "PROP_NOTIFICATION_SUPPORT_TEXT = \"athenz.notification_support_text\"", "var_name": "PROP_NOTIFICATION_SUPPORT_TEXT"}, {"original_string": "private static final String PROP_NOTIFICATION_SUPPORT_URL = \"athenz.notification_support_url\";", "modifier": "private static final", "type": "String", "declarator": "PROP_NOTIFICATION_SUPPORT_URL = \"athenz.notification_support_url\"", "var_name": "PROP_NOTIFICATION_SUPPORT_URL"}, {"original_string": "private static final String EMAIL_TEMPLATE_CSS = \"emails/base.css\";", "modifier": "private static final", "type": "String", "declarator": "EMAIL_TEMPLATE_CSS = \"emails/base.css\"", "var_name": "EMAIL_TEMPLATE_CSS"}, {"original_string": "private static final String HTML_STYLE_TAG_START = \"<style>\";", "modifier": "private static final", "type": "String", "declarator": "HTML_STYLE_TAG_START = \"<style>\"", "var_name": "HTML_STYLE_TAG_START"}, {"original_string": "private static final String HTML_STYLE_TAG_END = \"</style>\";", "modifier": "private static final", "type": "String", "declarator": "HTML_STYLE_TAG_END = \"</style>\"", "var_name": "HTML_STYLE_TAG_END"}, {"original_string": "private static final String HTML_TBODY_TAG_START = \"<tbody>\";", "modifier": "private static final", "type": "String", "declarator": "HTML_TBODY_TAG_START = \"<tbody>\"", "var_name": "HTML_TBODY_TAG_START"}, {"original_string": "private static final String HTML_TBODY_TAG_END = \"</tbody>\";", "modifier": "private static final", "type": "String", "declarator": "HTML_TBODY_TAG_END = \"</tbody>\"", "var_name": "HTML_TBODY_TAG_END"}, {"original_string": "private static final ResourceBundle RB = ResourceBundle.getBundle(\"messages/ServerCommon\");", "modifier": "private static final", "type": "ResourceBundle", "declarator": "RB = ResourceBundle.getBundle(\"messages/ServerCommon\")", "var_name": "RB"}, {"original_string": "private String userDomainPrefix;", "modifier": "private", "type": "String", "declarator": "userDomainPrefix", "var_name": "userDomainPrefix"}, {"original_string": "private String emailDomainTo;", "modifier": "private", "type": "String", "declarator": "emailDomainTo", "var_name": "emailDomainTo"}, {"original_string": "private String workflowUrl;", "modifier": "private", "type": "String", "declarator": "workflowUrl", "var_name": "workflowUrl"}, {"original_string": "private String athenzUIUrl;", "modifier": "private", "type": "String", "declarator": "athenzUIUrl", "var_name": "athenzUIUrl"}, {"original_string": "private String supportText;", "modifier": "private", "type": "String", "declarator": "supportText", "var_name": "supportText"}, {"original_string": "private String supportUrl;", "modifier": "private", "type": "String", "declarator": "supportUrl", "var_name": "supportUrl"}, {"original_string": "private String emailBaseCSS;", "modifier": "private", "type": "String", "declarator": "emailBaseCSS", "var_name": "emailBaseCSS"}], "methods": [{"identifier": "NotificationToEmailConverterCommon", "parameters": "()", "modifiers": "public", "return": "", "signature": " NotificationToEmailConverterCommon()", "full_signature": "public  NotificationToEmailConverterCommon()", "class_method_signature": "NotificationToEmailConverterCommon.NotificationToEmailConverterCommon()", "testcase": false, "constructor": true}, {"identifier": "readContentFromFile", "parameters": "(ClassLoader classLoader, String fileName)", "modifiers": "public", "return": "String", "signature": "String readContentFromFile(ClassLoader classLoader, String fileName)", "full_signature": "public String readContentFromFile(ClassLoader classLoader, String fileName)", "class_method_signature": "NotificationToEmailConverterCommon.readContentFromFile(ClassLoader classLoader, String fileName)", "testcase": false, "constructor": false}, {"identifier": "generateBodyFromTemplate", "parameters": "(Map<String, String> metaDetails,\n                                            String bodyTemplate,\n                                            String bodyTemplateDetails,\n                                            String tableValuesKey,\n                                            int tableEntryNumColumns)", "modifiers": "public", "return": "String", "signature": "String generateBodyFromTemplate(Map<String, String> metaDetails,\n                                            String bodyTemplate,\n                                            String bodyTemplateDetails,\n                                            String tableValuesKey,\n                                            int tableEntryNumColumns)", "full_signature": "public String generateBodyFromTemplate(Map<String, String> metaDetails,\n                                            String bodyTemplate,\n                                            String bodyTemplateDetails,\n                                            String tableValuesKey,\n                                            int tableEntryNumColumns)", "class_method_signature": "NotificationToEmailConverterCommon.generateBodyFromTemplate(Map<String, String> metaDetails,\n                                            String bodyTemplate,\n                                            String bodyTemplateDetails,\n                                            String tableValuesKey,\n                                            int tableEntryNumColumns)", "testcase": false, "constructor": false}, {"identifier": "getTableEntryTemplate", "parameters": "(int numOfColumns)", "modifiers": "public", "return": "String", "signature": "String getTableEntryTemplate(int numOfColumns)", "full_signature": "public String getTableEntryTemplate(int numOfColumns)", "class_method_signature": "NotificationToEmailConverterCommon.getTableEntryTemplate(int numOfColumns)", "testcase": false, "constructor": false}, {"identifier": "addCssStyleToBody", "parameters": "(String body)", "modifiers": "public", "return": "String", "signature": "String addCssStyleToBody(String body)", "full_signature": "public String addCssStyleToBody(String body)", "class_method_signature": "NotificationToEmailConverterCommon.addCssStyleToBody(String body)", "testcase": false, "constructor": false}, {"identifier": "processEntry", "parameters": "(StringBuilder body, final String entryNames, final String entryFormat, int entryLength)", "modifiers": "", "return": "void", "signature": "void processEntry(StringBuilder body, final String entryNames, final String entryFormat, int entryLength)", "full_signature": " void processEntry(StringBuilder body, final String entryNames, final String entryFormat, int entryLength)", "class_method_signature": "NotificationToEmailConverterCommon.processEntry(StringBuilder body, final String entryNames, final String entryFormat, int entryLength)", "testcase": false, "constructor": false}, {"identifier": "getSubject", "parameters": "(String propertyName)", "modifiers": "public", "return": "String", "signature": "String getSubject(String propertyName)", "full_signature": "public String getSubject(String propertyName)", "class_method_signature": "NotificationToEmailConverterCommon.getSubject(String propertyName)", "testcase": false, "constructor": false}, {"identifier": "getFullyQualifiedEmailAddresses", "parameters": "(Set<String> recipients)", "modifiers": "public", "return": "Set<String>", "signature": "Set<String> getFullyQualifiedEmailAddresses(Set<String> recipients)", "full_signature": "public Set<String> getFullyQualifiedEmailAddresses(Set<String> recipients)", "class_method_signature": "NotificationToEmailConverterCommon.getFullyQualifiedEmailAddresses(Set<String> recipients)", "testcase": false, "constructor": false}, {"identifier": "getWorkflowUrl", "parameters": "()", "modifiers": "public", "return": "String", "signature": "String getWorkflowUrl()", "full_signature": "public String getWorkflowUrl()", "class_method_signature": "NotificationToEmailConverterCommon.getWorkflowUrl()", "testcase": false, "constructor": false}, {"identifier": "getAthenzUIUrl", "parameters": "()", "modifiers": "public", "return": "String", "signature": "String getAthenzUIUrl()", "full_signature": "public String getAthenzUIUrl()", "class_method_signature": "NotificationToEmailConverterCommon.getAthenzUIUrl()", "testcase": false, "constructor": false}], "file": "libs/java/server_common/src/main/java/com/yahoo/athenz/common/server/notification/NotificationToEmailConverterCommon.java"}, "focal_method": {"identifier": "readContentFromFile", "parameters": "(ClassLoader classLoader, String fileName)", "modifiers": "public", "return": "String", "body": "public String readContentFromFile(ClassLoader classLoader, String fileName) {\n        StringBuilder contents = new StringBuilder();\n        URL resource = classLoader.getResource(fileName);\n        if (resource != null) {\n            try (BufferedReader br = new BufferedReader(new InputStreamReader(resource.openStream()))) {\n                String line;\n                while ((line = br.readLine()) != null) {\n                    contents.append(line);\n                    contents.append(System.getProperty(\"line.separator\"));\n                }\n            } catch (IOException ex) {\n                LOGGER.error(\"Could not read file: {}. Error message: {}\", fileName, ex.getMessage());\n            }\n        }\n        return contents.toString();\n    }", "signature": "String readContentFromFile(ClassLoader classLoader, String fileName)", "full_signature": "public String readContentFromFile(ClassLoader classLoader, String fileName)", "class_method_signature": "NotificationToEmailConverterCommon.readContentFromFile(ClassLoader classLoader, String fileName)", "testcase": false, "constructor": false, "invocations": ["getResource", "openStream", "readLine", "append", "append", "getProperty", "error", "getMessage", "toString"]}, "repository": {"repo_id": 73948366, "url": "https://github.com/yahoo/athenz", "stars": 394, "created": "11/16/2016 6:23:08 PM +00:00", "updates": "2020-01-27T15:36:13+00:00", "fork": "False", "license": "licensed"}}