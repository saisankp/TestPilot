{"test_class": {"identifier": "CopybaraGeneratorTest", "superclass": "extends TestWithGitBackedRepository", "interfaces": "", "fields": [], "file": "org.eclipse.winery.tools.copybaragenerator/src/test/java/org/eclipse/winery/tools/copybaragenerator/CopybaraGeneratorTest.java"}, "test_case": {"identifier": "generatedConfigHasCorrectStrings", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void generatedConfigHasCorrectStrings() throws Exception {\n        // we use the commit 4b218e6 instead of origin/plain, because the number of definitions changes fast\n        this.setRevisionTo(\"4b218e6\");\n        CopybaraGenerator copybaraGenerator = new CopybaraGenerator();\n        String config = copybaraGenerator.generateCopybaraConfigFile();\n        assertEquals(\"urlOrigin = \\\"https://github.com/OpenTOSCA/tosca-definitions-internal.git\\\"\\n\" +\n            \"urlDestination = \\\"file:///tmp/copybara/tosca-definitions-public\\\"\\n\" +\n            \"core.workflow(\\n\" +\n            \"    name = \\\"default\\\",\\n\" +\n            \"    origin = git.origin(\\n\" +\n            \"        url = urlOrigin,\\n\" +\n            \"        ref = \\\"master\\\",\\n\" +\n            \"    ),\\n\" +\n            \"    destination = git.destination(\\n\" +\n            \"        url = urlDestination,\\n\" +\n            \"        fetch = \\\"master\\\",\\n\" +\n            \"        push = \\\"master\\\",\\n\" +\n            \"    ),\\n\" +\n            \"    authoring = authoring.pass_thru(\\\"OpenTOSCA Bot <opentosca@iaas.uni-stuttgart.de>\\\"),\\n\" +\n            \"    origin_files = glob([\\\"README.md\\\", \\\"LICENSE\\\", \\\"artifacttemplates/http%3A%2F%2Fplain.winery.opentosca.org%2Fartifacttemplates/ArtifactTemplateWithFilesAndSources-ArtifactTypeWithoutProperties/**\\\",\\n\" +\n            \"        \\\"artifacttemplates/http%3A%2F%2Fplain.winery.opentosca.org%2Fartifacttemplates/ArtifactTemplateWithoutAnyFiles-ArtifactTypeWithoutProperties/**\\\"]),\\n\" +\n            \"    destination_files = glob([\\\"**\\\"], exclude = [\\\"README_INTERNAL.md\\\"]),\\n\" +\n            \")\", config);\n    }", "signature": "void generatedConfigHasCorrectStrings()", "full_signature": "@Test public void generatedConfigHasCorrectStrings()", "class_method_signature": "CopybaraGeneratorTest.generatedConfigHasCorrectStrings()", "testcase": true, "constructor": false, "invocations": ["setRevisionTo", "generateCopybaraConfigFile", "assertEquals"]}, "focal_class": {"identifier": "CopybaraGenerator", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final Logger LOGGER = LoggerFactory.getLogger(CopybaraGenerator.class);", "modifier": "private static final", "type": "Logger", "declarator": "LOGGER = LoggerFactory.getLogger(CopybaraGenerator.class)", "var_name": "LOGGER"}, {"original_string": "private final IRepository repository;", "modifier": "private final", "type": "IRepository", "declarator": "repository", "var_name": "repository"}], "methods": [{"identifier": "CopybaraGenerator", "parameters": "()", "modifiers": "public", "return": "", "signature": " CopybaraGenerator()", "full_signature": "public  CopybaraGenerator()", "class_method_signature": "CopybaraGenerator.CopybaraGenerator()", "testcase": false, "constructor": true}, {"identifier": "CopybaraGenerator", "parameters": "(IRepository repository)", "modifiers": "public", "return": "", "signature": " CopybaraGenerator(IRepository repository)", "full_signature": "public  CopybaraGenerator(IRepository repository)", "class_method_signature": "CopybaraGenerator.CopybaraGenerator(IRepository repository)", "testcase": false, "constructor": true}, {"identifier": "generateOriginFilesConfig", "parameters": "()", "modifiers": "public", "return": "String", "signature": "String generateOriginFilesConfig()", "full_signature": "public String generateOriginFilesConfig()", "class_method_signature": "CopybaraGenerator.generateOriginFilesConfig()", "testcase": false, "constructor": false}, {"identifier": "generateCopybaraConfigFile", "parameters": "()", "modifiers": "public", "return": "String", "signature": "String generateCopybaraConfigFile()", "full_signature": "public String generateCopybaraConfigFile()", "class_method_signature": "CopybaraGenerator.generateCopybaraConfigFile()", "testcase": false, "constructor": false}, {"identifier": "generateCopybaraConfigFile", "parameters": "(Path targetFile)", "modifiers": "public", "return": "void", "signature": "void generateCopybaraConfigFile(Path targetFile)", "full_signature": "public void generateCopybaraConfigFile(Path targetFile)", "class_method_signature": "CopybaraGenerator.generateCopybaraConfigFile(Path targetFile)", "testcase": false, "constructor": false}], "file": "org.eclipse.winery.tools.copybaragenerator/src/main/java/org/eclipse/winery/tools/copybaragenerator/CopybaraGenerator.java"}, "focal_method": {"identifier": "generateCopybaraConfigFile", "parameters": "()", "modifiers": "public", "return": "String", "body": "public String generateCopybaraConfigFile() {\n        StringJoiner copybaraConfig = new StringJoiner(\"\\n\");\n        copybaraConfig.add(\"urlOrigin = \\\"https://github.com/OpenTOSCA/tosca-definitions-internal.git\\\"\");\n        copybaraConfig.add(\"urlDestination = \\\"file:///tmp/copybara/tosca-definitions-public\\\"\");\n        copybaraConfig.add(\"core.workflow(\");\n        copybaraConfig.add(\"    name = \\\"default\\\",\");\n        copybaraConfig.add(\"    origin = git.origin(\");\n        copybaraConfig.add(\"        url = urlOrigin,\");\n        copybaraConfig.add(\"        ref = \\\"master\\\",\");\n        copybaraConfig.add(\"    ),\");\n        copybaraConfig.add(\"    destination = git.destination(\");\n        copybaraConfig.add(\"        url = urlDestination,\");\n        copybaraConfig.add(\"        fetch = \\\"master\\\",\");\n        copybaraConfig.add(\"        push = \\\"master\\\",\");\n        copybaraConfig.add(\"    ),\");\n        copybaraConfig.add(\"    authoring = authoring.pass_thru(\\\"OpenTOSCA Bot <opentosca@iaas.uni-stuttgart.de>\\\"),\");\n        copybaraConfig.add(\"    \" + generateOriginFilesConfig());\n        copybaraConfig.add(\"    destination_files = glob([\\\"**\\\"], exclude = [\\\"README_INTERNAL.md\\\"]),\");\n        copybaraConfig.add(\")\");\n        return copybaraConfig.toString();\n    }", "signature": "String generateCopybaraConfigFile()", "full_signature": "public String generateCopybaraConfigFile()", "class_method_signature": "CopybaraGenerator.generateCopybaraConfigFile()", "testcase": false, "constructor": false, "invocations": ["add", "add", "add", "add", "add", "add", "add", "add", "add", "add", "add", "add", "add", "add", "add", "generateOriginFilesConfig", "add", "add", "toString"]}, "repository": {"repo_id": 42622157, "url": "https://github.com/eclipse/winery", "stars": 34, "created": "9/17/2015 12:31:44 AM +00:00", "updates": "2020-01-22T09:32:00+00:00", "fork": "False", "license": "licensed"}}