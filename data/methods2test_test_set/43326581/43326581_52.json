{"test_class": {"identifier": "FossologySshConnectorTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "FossologySshConnector fossologySshConnector;", "modifier": "", "type": "FossologySshConnector", "declarator": "fossologySshConnector", "var_name": "fossologySshConnector"}, {"original_string": "@Mock\n    private FossologySettings fossologySettings;", "modifier": "@Mock\n    private", "type": "FossologySettings", "declarator": "fossologySettings", "var_name": "fossologySettings"}, {"original_string": "@Mock\n    private JSchSessionProvider jSchSessionProvider;", "modifier": "@Mock\n    private", "type": "JSchSessionProvider", "declarator": "jSchSessionProvider", "var_name": "jSchSessionProvider"}, {"original_string": "@Mock\n    private Session session;", "modifier": "@Mock\n    private", "type": "Session", "declarator": "session", "var_name": "session"}, {"original_string": "@Mock\n    private ChannelExec channel;", "modifier": "@Mock\n    private", "type": "ChannelExec", "declarator": "channel", "var_name": "channel"}, {"original_string": "@Rule\n    public ExpectedException expectedException = ExpectedException.none();", "modifier": "@Rule\n    public", "type": "ExpectedException", "declarator": "expectedException = ExpectedException.none()", "var_name": "expectedException"}, {"original_string": "private int connectionTimeout = 10000;", "modifier": "private", "type": "int", "declarator": "connectionTimeout = 10000", "var_name": "connectionTimeout"}, {"original_string": "private long executionTimeout = 203004;", "modifier": "private", "type": "long", "declarator": "executionTimeout = 203004", "var_name": "executionTimeout"}], "file": "backend/src/src-fossology/src/test/java/org/eclipse/sw360/fossology/ssh/FossologySshConnectorTest.java"}, "test_case": {"identifier": "testWaitCompletionThrowsOnTimeout", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testWaitCompletionThrowsOnTimeout() throws SW360Exception {\n        executionTimeout = 100;\n\n        doCallRealMethod().when(fossologySshConnector).waitCompletion(channel, executionTimeout); // reset spy\n\n        expectedException.expect(SW360Exception.class);\n\n        when(channel.isClosed()).thenReturn(false);\n        fossologySshConnector.waitCompletion(channel, executionTimeout);\n    }", "signature": "void testWaitCompletionThrowsOnTimeout()", "full_signature": "@Test public void testWaitCompletionThrowsOnTimeout()", "class_method_signature": "FossologySshConnectorTest.testWaitCompletionThrowsOnTimeout()", "testcase": true, "constructor": false, "invocations": ["waitCompletion", "when", "doCallRealMethod", "expect", "thenReturn", "when", "isClosed", "waitCompletion"]}, "focal_class": {"identifier": "FossologySshConnector", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final Logger log = getLogger(FossologySshConnector.class);", "modifier": "private static final", "type": "Logger", "declarator": "log = getLogger(FossologySshConnector.class)", "var_name": "log"}, {"original_string": "private static final OutputStream BLACK_HOLE = new OutputStream() {\n        @Override\n        public void write(int b) throws IOException {\n        }\n    };", "modifier": "private static final", "type": "OutputStream", "declarator": "BLACK_HOLE = new OutputStream() {\n        @Override\n        public void write(int b) throws IOException {\n        }\n    }", "var_name": "BLACK_HOLE"}, {"original_string": "private static final InputStream EMPTY_INPUT = new InputStream() {\n        @Override\n        public int read() throws IOException {\n            return -1;\n        }\n    };", "modifier": "private static final", "type": "InputStream", "declarator": "EMPTY_INPUT = new InputStream() {\n        @Override\n        public int read() throws IOException {\n            return -1;\n        }\n    }", "var_name": "EMPTY_INPUT"}, {"original_string": "private final JSchSessionProvider jSchSessionProvider;", "modifier": "private final", "type": "JSchSessionProvider", "declarator": "jSchSessionProvider", "var_name": "jSchSessionProvider"}, {"original_string": "private final int connectionTimeout;", "modifier": "private final", "type": "int", "declarator": "connectionTimeout", "var_name": "connectionTimeout"}, {"original_string": "private final long executionTimeout;", "modifier": "private final", "type": "long", "declarator": "executionTimeout", "var_name": "executionTimeout"}], "methods": [{"identifier": "FossologySshConnector", "parameters": "(JSchSessionProvider jSchSessionProvider, FossologySettings fossologySettings)", "modifiers": "@Autowired public", "return": "", "signature": " FossologySshConnector(JSchSessionProvider jSchSessionProvider, FossologySettings fossologySettings)", "full_signature": "@Autowired public  FossologySshConnector(JSchSessionProvider jSchSessionProvider, FossologySettings fossologySettings)", "class_method_signature": "FossologySshConnector.FossologySshConnector(JSchSessionProvider jSchSessionProvider, FossologySettings fossologySettings)", "testcase": false, "constructor": true}, {"identifier": "waitCompletion", "parameters": "(Channel channel, long timeout)", "modifiers": "protected", "return": "void", "signature": "void waitCompletion(Channel channel, long timeout)", "full_signature": "protected void waitCompletion(Channel channel, long timeout)", "class_method_signature": "FossologySshConnector.waitCompletion(Channel channel, long timeout)", "testcase": false, "constructor": false}, {"identifier": "runInFossologyViaSsh", "parameters": "(String command)", "modifiers": "public", "return": "int", "signature": "int runInFossologyViaSsh(String command)", "full_signature": "public int runInFossologyViaSsh(String command)", "class_method_signature": "FossologySshConnector.runInFossologyViaSsh(String command)", "testcase": false, "constructor": false}, {"identifier": "runInFossologyViaSsh", "parameters": "(String command, InputStream stdin)", "modifiers": "public", "return": "int", "signature": "int runInFossologyViaSsh(String command, InputStream stdin)", "full_signature": "public int runInFossologyViaSsh(String command, InputStream stdin)", "class_method_signature": "FossologySshConnector.runInFossologyViaSsh(String command, InputStream stdin)", "testcase": false, "constructor": false}, {"identifier": "runInFossologyViaSsh", "parameters": "(String command, OutputStream stdout)", "modifiers": "public", "return": "int", "signature": "int runInFossologyViaSsh(String command, OutputStream stdout)", "full_signature": "public int runInFossologyViaSsh(String command, OutputStream stdout)", "class_method_signature": "FossologySshConnector.runInFossologyViaSsh(String command, OutputStream stdout)", "testcase": false, "constructor": false}, {"identifier": "runInFossologyViaSsh", "parameters": "(String command, InputStream stdin, OutputStream stdout)", "modifiers": "public", "return": "int", "signature": "int runInFossologyViaSsh(String command, InputStream stdin, OutputStream stdout)", "full_signature": "public int runInFossologyViaSsh(String command, InputStream stdin, OutputStream stdout)", "class_method_signature": "FossologySshConnector.runInFossologyViaSsh(String command, InputStream stdin, OutputStream stdout)", "testcase": false, "constructor": false}], "file": "backend/src/src-fossology/src/main/java/org/eclipse/sw360/fossology/ssh/FossologySshConnector.java"}, "focal_method": {"identifier": "waitCompletion", "parameters": "(Channel channel, long timeout)", "modifiers": "protected", "return": "void", "body": "protected void waitCompletion(Channel channel, long timeout) throws SW360Exception {\n        long startTime = currentTimeMillis();\n        while (!channel.isClosed() && (currentTimeMillis() - startTime < timeout)) {\n            try {\n                Thread.sleep(200);\n            } catch (InterruptedException e) {\n                throw fail(e, \"interrupted connection to Fossology\");\n            }\n        }\n        if (!channel.isClosed()) {\n            throw fail(\"timeout while waiting for completion of connection to Fossology\");\n        }\n    }", "signature": "void waitCompletion(Channel channel, long timeout)", "full_signature": "protected void waitCompletion(Channel channel, long timeout)", "class_method_signature": "FossologySshConnector.waitCompletion(Channel channel, long timeout)", "testcase": false, "constructor": false, "invocations": ["currentTimeMillis", "isClosed", "currentTimeMillis", "sleep", "fail", "isClosed", "fail"]}, "repository": {"repo_id": 43326581, "url": "https://github.com/sw360/sw360portal", "language": "Java", "is_fork": false, "fork_count": 23, "stargazer_count": 31, "size": 8770, "license": "licensed"}}