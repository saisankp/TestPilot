{"test_class": {"identifier": "GeoStoreClientTest", "superclass": "extends BaseGeoStoreClientTest", "interfaces": "", "fields": [{"original_string": "private final static Logger LOGGER = Logger.getLogger(GeoStoreClientTest.class);", "modifier": "private final static", "type": "Logger", "declarator": "LOGGER = Logger.getLogger(GeoStoreClientTest.class)", "var_name": "LOGGER"}, {"original_string": "final String DEFAULTCATEGORYNAME = \"TestCategory1\";", "modifier": "final", "type": "String", "declarator": "DEFAULTCATEGORYNAME = \"TestCategory1\"", "var_name": "DEFAULTCATEGORYNAME"}], "file": "src/modules/rest/client/src/test/java/it/geosolutions/geostore/services/rest/GeoStoreClientTest.java"}, "test_case": {"identifier": "testUpdateResource", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testUpdateResource() {\n\n        final String KEY_STRING = \"stringAtt\";\n        final String KEY_DATE = \"dateAtt\";\n\n        final Date origDate = new Date();\n        final String origString = \"OrigStringValue\";\n\n        Long rid;\n\n        createDefaultCategory();\n\n        {\n            RESTStoredData storedData = new RESTStoredData();\n            storedData.setData(\"we wish you a merry xmas and a happy new year\");\n\n            List<ShortAttribute> attrList = new ArrayList<ShortAttribute>();\n            attrList.add(new ShortAttribute(\"string1\", \"value1\", DataType.STRING));\n            attrList.add(new ShortAttribute(\"string2\", \"value2\", DataType.STRING));\n            attrList.add(new ShortAttribute(\"string3\", \"value3\", DataType.STRING));\n\n            String timeid = Long.toString(System.currentTimeMillis());\n\n            RESTResource origResource = new RESTResource();\n            origResource.setCategory(new RESTCategory(DEFAULTCATEGORYNAME));\n            origResource.setName(\"rest_test_resource_\" + timeid);\n            origResource.setStore(storedData);\n            origResource.setAttribute(attrList);\n\n            rid = client.insert(origResource);\n        }\n        System.out.println(\"RESOURCE has ID \" + rid);\n\n        // test getResource\n        String name1 = \"rest_test_resource_\" + Long.toString(System.currentTimeMillis());\n        {\n            RESTResource updResource = new RESTResource();\n            updResource.setName(name1);\n\n            List<ShortAttribute> attrList = new ArrayList<ShortAttribute>();\n            attrList.add(new ShortAttribute(\"string1\", \"value1\", DataType.STRING)); // same\n            attrList.add(new ShortAttribute(\"string2\", \"value2.2\", DataType.STRING)); // updated\n            // attrList.add(new ShortAttribute(\"string3\", \"value3\", DataType.STRING)); //removed\n            attrList.add(new ShortAttribute(\"string4\", \"value4\", DataType.STRING)); // added\n\n            updResource.setAttribute(attrList);\n            client.updateResource(rid, updResource);\n        }\n\n        {\n            Resource loaded = client.getResource(rid);\n            System.out.println(\"RESOURCE: \" + loaded);\n\n            // test reloaded attrs\n            List<Attribute> loadedAttrs = loaded.getAttribute();\n            assertEquals(3, loadedAttrs.size());\n\n            Map<String, String> attMap = new HashMap<String, String>();\n            for (Attribute attribute : loadedAttrs) {\n                attMap.put(attribute.getName(), attribute.getTextValue());\n            }\n\n            assertEquals(\"value1\", attMap.get(\"string1\"));\n            assertEquals(\"value2.2\", attMap.get(\"string2\"));\n            assertEquals(\"value4\", attMap.get(\"string4\"));\n        }\n\n        // try bad update\n        {\n            RESTResource res = new RESTResource();\n            res.setCategory(new RESTCategory(\"TestCategory2\"));\n            try {\n                client.updateResource(rid, res);\n                fail(\"Undetected error\");\n            } catch (UniformInterfaceException e) {\n                String response = \"COULD NOT READ RESPONSE\";\n                try {\n                    response = IOUtils.toString(e.getResponse().getEntityInputStream());\n                } catch (Exception e2) {\n                    LOGGER.warn(\"Error reading response: \" + e2.getMessage());\n                }\n                LOGGER.info(\"Error condition successfully detected: \" + response);\n            } catch (Exception e) {\n                LOGGER.info(\"Error condition successfully detected:\" + e.getMessage(), e);\n\n            }\n        }\n\n        client.deleteResource(rid);\n    }", "signature": "void testUpdateResource()", "full_signature": "@Test public void testUpdateResource()", "class_method_signature": "GeoStoreClientTest.testUpdateResource()", "testcase": true, "constructor": false, "invocations": ["createDefaultCategory", "setData", "add", "add", "add", "toString", "currentTimeMillis", "setCategory", "setName", "setStore", "setAttribute", "insert", "println", "toString", "currentTimeMillis", "setName", "add", "add", "add", "setAttribute", "updateResource", "getResource", "println", "getAttribute", "assertEquals", "size", "put", "getName", "getTextValue", "assertEquals", "get", "assertEquals", "get", "assertEquals", "get", "setCategory", "updateResource", "fail", "toString", "getEntityInputStream", "getResponse", "warn", "getMessage", "info", "info", "getMessage", "deleteResource"]}, "focal_class": {"identifier": "GeoStoreClient", "superclass": "", "interfaces": "", "fields": [{"original_string": "private String username = null;", "modifier": "private", "type": "String", "declarator": "username = null", "var_name": "username"}, {"original_string": "private String password = null;", "modifier": "private", "type": "String", "declarator": "password = null", "var_name": "password"}, {"original_string": "private String geostoreRestUrl = null;", "modifier": "private", "type": "String", "declarator": "geostoreRestUrl = null", "var_name": "geostoreRestUrl"}], "methods": [{"identifier": "GeoStoreClient", "parameters": "()", "modifiers": "public", "return": "", "signature": " GeoStoreClient()", "full_signature": "public  GeoStoreClient()", "class_method_signature": "GeoStoreClient.GeoStoreClient()", "testcase": false, "constructor": true}, {"identifier": "searchResources", "parameters": "(SearchFilter searchFilter)", "modifiers": "@Deprecated public", "return": "ShortResourceList", "signature": "ShortResourceList searchResources(SearchFilter searchFilter)", "full_signature": "@Deprecated public ShortResourceList searchResources(SearchFilter searchFilter)", "class_method_signature": "GeoStoreClient.searchResources(SearchFilter searchFilter)", "testcase": false, "constructor": false}, {"identifier": "searchResources", "parameters": "(SearchFilter searchFilter,\n            Integer page, Integer entries,\n            Boolean includeAttributes, Boolean includeData)", "modifiers": "public", "return": "ResourceList", "signature": "ResourceList searchResources(SearchFilter searchFilter,\n            Integer page, Integer entries,\n            Boolean includeAttributes, Boolean includeData)", "full_signature": "public ResourceList searchResources(SearchFilter searchFilter,\n            Integer page, Integer entries,\n            Boolean includeAttributes, Boolean includeData)", "class_method_signature": "GeoStoreClient.searchResources(SearchFilter searchFilter,\n            Integer page, Integer entries,\n            Boolean includeAttributes, Boolean includeData)", "testcase": false, "constructor": false}, {"identifier": "addQParam", "parameters": "(WebResource wb, String key, Object value)", "modifiers": "protected", "return": "WebResource", "signature": "WebResource addQParam(WebResource wb, String key, Object value)", "full_signature": "protected WebResource addQParam(WebResource wb, String key, Object value)", "class_method_signature": "GeoStoreClient.addQParam(WebResource wb, String key, Object value)", "testcase": false, "constructor": false}, {"identifier": "insert", "parameters": "(RESTResource resource)", "modifiers": "public", "return": "Long", "signature": "Long insert(RESTResource resource)", "full_signature": "public Long insert(RESTResource resource)", "class_method_signature": "GeoStoreClient.insert(RESTResource resource)", "testcase": false, "constructor": false}, {"identifier": "getResource", "parameters": "(Long id, boolean full)", "modifiers": "public", "return": "Resource", "signature": "Resource getResource(Long id, boolean full)", "full_signature": "public Resource getResource(Long id, boolean full)", "class_method_signature": "GeoStoreClient.getResource(Long id, boolean full)", "testcase": false, "constructor": false}, {"identifier": "getResource", "parameters": "(Long id)", "modifiers": "public", "return": "Resource", "signature": "Resource getResource(Long id)", "full_signature": "public Resource getResource(Long id)", "class_method_signature": "GeoStoreClient.getResource(Long id)", "testcase": false, "constructor": false}, {"identifier": "deleteResource", "parameters": "(Long id)", "modifiers": "public", "return": "void", "signature": "void deleteResource(Long id)", "full_signature": "public void deleteResource(Long id)", "class_method_signature": "GeoStoreClient.deleteResource(Long id)", "testcase": false, "constructor": false}, {"identifier": "updateResource", "parameters": "(Long id, RESTResource resource)", "modifiers": "public", "return": "void", "signature": "void updateResource(Long id, RESTResource resource)", "full_signature": "public void updateResource(Long id, RESTResource resource)", "class_method_signature": "GeoStoreClient.updateResource(Long id, RESTResource resource)", "testcase": false, "constructor": false}, {"identifier": "getAllShortResource", "parameters": "(Integer page, Integer entries)", "modifiers": "public", "return": "ShortResourceList", "signature": "ShortResourceList getAllShortResource(Integer page, Integer entries)", "full_signature": "public ShortResourceList getAllShortResource(Integer page, Integer entries)", "class_method_signature": "GeoStoreClient.getAllShortResource(Integer page, Integer entries)", "testcase": false, "constructor": false}, {"identifier": "getSecurityRules", "parameters": "(Long resourceId)", "modifiers": "public", "return": "SecurityRuleList", "signature": "SecurityRuleList getSecurityRules(Long resourceId)", "full_signature": "public SecurityRuleList getSecurityRules(Long resourceId)", "class_method_signature": "GeoStoreClient.getSecurityRules(Long resourceId)", "testcase": false, "constructor": false}, {"identifier": "updateSecurityRules", "parameters": "(Long resourceId, SecurityRuleList rules)", "modifiers": "public", "return": "void", "signature": "void updateSecurityRules(Long resourceId, SecurityRuleList rules)", "full_signature": "public void updateSecurityRules(Long resourceId, SecurityRuleList rules)", "class_method_signature": "GeoStoreClient.updateSecurityRules(Long resourceId, SecurityRuleList rules)", "testcase": false, "constructor": false}, {"identifier": "getData", "parameters": "(Long id)", "modifiers": "public", "return": "String", "signature": "String getData(Long id)", "full_signature": "public String getData(Long id)", "class_method_signature": "GeoStoreClient.getData(Long id)", "testcase": false, "constructor": false}, {"identifier": "getData", "parameters": "(Long id, MediaType acceptMediaType)", "modifiers": "public", "return": "String", "signature": "String getData(Long id, MediaType acceptMediaType)", "full_signature": "public String getData(Long id, MediaType acceptMediaType)", "class_method_signature": "GeoStoreClient.getData(Long id, MediaType acceptMediaType)", "testcase": false, "constructor": false}, {"identifier": "getRawData", "parameters": "(Long id, RawFormat decodeFrom)", "modifiers": "public", "return": "byte[]", "signature": "byte[] getRawData(Long id, RawFormat decodeFrom)", "full_signature": "public byte[] getRawData(Long id, RawFormat decodeFrom)", "class_method_signature": "GeoStoreClient.getRawData(Long id, RawFormat decodeFrom)", "testcase": false, "constructor": false}, {"identifier": "getRawData", "parameters": "(Class<T> clazz, Long id, RawFormat decodeFrom)", "modifiers": "public", "return": "T", "signature": "T getRawData(Class<T> clazz, Long id, RawFormat decodeFrom)", "full_signature": "public T getRawData(Class<T> clazz, Long id, RawFormat decodeFrom)", "class_method_signature": "GeoStoreClient.getRawData(Class<T> clazz, Long id, RawFormat decodeFrom)", "testcase": false, "constructor": false}, {"identifier": "setData", "parameters": "(Long id, String data)", "modifiers": "public", "return": "void", "signature": "void setData(Long id, String data)", "full_signature": "public void setData(Long id, String data)", "class_method_signature": "GeoStoreClient.setData(Long id, String data)", "testcase": false, "constructor": false}, {"identifier": "updateData", "parameters": "(Long id, String data)", "modifiers": "public", "return": "void", "signature": "void updateData(Long id, String data)", "full_signature": "public void updateData(Long id, String data)", "class_method_signature": "GeoStoreClient.updateData(Long id, String data)", "testcase": false, "constructor": false}, {"identifier": "insert", "parameters": "(RESTCategory category)", "modifiers": "public", "return": "Long", "signature": "Long insert(RESTCategory category)", "full_signature": "public Long insert(RESTCategory category)", "class_method_signature": "GeoStoreClient.insert(RESTCategory category)", "testcase": false, "constructor": false}, {"identifier": "getCategory", "parameters": "(Long id)", "modifiers": "public", "return": "Category", "signature": "Category getCategory(Long id)", "full_signature": "public Category getCategory(Long id)", "class_method_signature": "GeoStoreClient.getCategory(Long id)", "testcase": false, "constructor": false}, {"identifier": "getCategoryCount", "parameters": "(String nameLike)", "modifiers": "public", "return": "Long", "signature": "Long getCategoryCount(String nameLike)", "full_signature": "public Long getCategoryCount(String nameLike)", "class_method_signature": "GeoStoreClient.getCategoryCount(String nameLike)", "testcase": false, "constructor": false}, {"identifier": "getCategories", "parameters": "(Integer page, Integer entries)", "modifiers": "public", "return": "CategoryList", "signature": "CategoryList getCategories(Integer page, Integer entries)", "full_signature": "public CategoryList getCategories(Integer page, Integer entries)", "class_method_signature": "GeoStoreClient.getCategories(Integer page, Integer entries)", "testcase": false, "constructor": false}, {"identifier": "getCategories", "parameters": "()", "modifiers": "public", "return": "CategoryList", "signature": "CategoryList getCategories()", "full_signature": "public CategoryList getCategories()", "class_method_signature": "GeoStoreClient.getCategories()", "testcase": false, "constructor": false}, {"identifier": "deleteCategory", "parameters": "(Long id)", "modifiers": "public", "return": "void", "signature": "void deleteCategory(Long id)", "full_signature": "public void deleteCategory(Long id)", "class_method_signature": "GeoStoreClient.deleteCategory(Long id)", "testcase": false, "constructor": false}, {"identifier": "searchUserGroup", "parameters": "(Integer start,Integer limit, String nameLike, boolean all)", "modifiers": "public", "return": "ExtGroupList", "signature": "ExtGroupList searchUserGroup(Integer start,Integer limit, String nameLike, boolean all)", "full_signature": "public ExtGroupList searchUserGroup(Integer start,Integer limit, String nameLike, boolean all)", "class_method_signature": "GeoStoreClient.searchUserGroup(Integer start,Integer limit, String nameLike, boolean all)", "testcase": false, "constructor": false}, {"identifier": "searchUserGroup", "parameters": "(Integer start,Integer limit, String nameLike)", "modifiers": "public", "return": "ExtGroupList", "signature": "ExtGroupList searchUserGroup(Integer start,Integer limit, String nameLike)", "full_signature": "public ExtGroupList searchUserGroup(Integer start,Integer limit, String nameLike)", "class_method_signature": "GeoStoreClient.searchUserGroup(Integer start,Integer limit, String nameLike)", "testcase": false, "constructor": false}, {"identifier": "getShortResource", "parameters": "(long id)", "modifiers": "public", "return": "ShortResource", "signature": "ShortResource getShortResource(long id)", "full_signature": "public ShortResource getShortResource(long id)", "class_method_signature": "GeoStoreClient.getShortResource(long id)", "testcase": false, "constructor": false}, {"identifier": "getBaseWebResource", "parameters": "()", "modifiers": "protected", "return": "WebResource", "signature": "WebResource getBaseWebResource()", "full_signature": "protected WebResource getBaseWebResource()", "class_method_signature": "GeoStoreClient.getBaseWebResource()", "testcase": false, "constructor": false}, {"identifier": "getBaseWebResource", "parameters": "(Object... path)", "modifiers": "protected", "return": "WebResource", "signature": "WebResource getBaseWebResource(Object... path)", "full_signature": "protected WebResource getBaseWebResource(Object... path)", "class_method_signature": "GeoStoreClient.getBaseWebResource(Object... path)", "testcase": false, "constructor": false}, {"identifier": "getPassword", "parameters": "()", "modifiers": "public", "return": "String", "signature": "String getPassword()", "full_signature": "public String getPassword()", "class_method_signature": "GeoStoreClient.getPassword()", "testcase": false, "constructor": false}, {"identifier": "setPassword", "parameters": "(String password)", "modifiers": "public", "return": "void", "signature": "void setPassword(String password)", "full_signature": "public void setPassword(String password)", "class_method_signature": "GeoStoreClient.setPassword(String password)", "testcase": false, "constructor": false}, {"identifier": "getUsername", "parameters": "()", "modifiers": "public", "return": "String", "signature": "String getUsername()", "full_signature": "public String getUsername()", "class_method_signature": "GeoStoreClient.getUsername()", "testcase": false, "constructor": false}, {"identifier": "setUsername", "parameters": "(String username)", "modifiers": "public", "return": "void", "signature": "void setUsername(String username)", "full_signature": "public void setUsername(String username)", "class_method_signature": "GeoStoreClient.setUsername(String username)", "testcase": false, "constructor": false}, {"identifier": "getGeostoreRestUrl", "parameters": "()", "modifiers": "public", "return": "String", "signature": "String getGeostoreRestUrl()", "full_signature": "public String getGeostoreRestUrl()", "class_method_signature": "GeoStoreClient.getGeostoreRestUrl()", "testcase": false, "constructor": false}, {"identifier": "setGeostoreRestUrl", "parameters": "(String geostoreRestUrl)", "modifiers": "public", "return": "void", "signature": "void setGeostoreRestUrl(String geostoreRestUrl)", "full_signature": "public void setGeostoreRestUrl(String geostoreRestUrl)", "class_method_signature": "GeoStoreClient.setGeostoreRestUrl(String geostoreRestUrl)", "testcase": false, "constructor": false}], "file": "src/modules/rest/client/src/main/java/it/geosolutions/geostore/services/rest/GeoStoreClient.java"}, "focal_method": {"identifier": "updateResource", "parameters": "(Long id, RESTResource resource)", "modifiers": "public", "return": "void", "body": "public void updateResource(Long id, RESTResource resource)\n    {\n        getBaseWebResource(\"resources\", \"resource\", id)\n                .header(\"Content-Type\", MediaType.TEXT_XML)\n                .put(resource);\n    }", "signature": "void updateResource(Long id, RESTResource resource)", "full_signature": "public void updateResource(Long id, RESTResource resource)", "class_method_signature": "GeoStoreClient.updateResource(Long id, RESTResource resource)", "testcase": false, "constructor": false, "invocations": ["put", "header", "getBaseWebResource"]}, "repository": {"repo_id": 4157021, "url": "https://github.com/geosolutions-it/geostore", "language": "Java", "is_fork": false, "fork_count": 35, "stargazer_count": 19, "size": 1798, "license": "licensed"}}