{"test_class": {"identifier": "WmfOnlineDailyDumpFileTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "MockWebResourceFetcher wrf;", "modifier": "", "type": "MockWebResourceFetcher", "declarator": "wrf", "var_name": "wrf"}, {"original_string": "MockDirectoryManager dm;", "modifier": "", "type": "MockDirectoryManager", "declarator": "dm", "var_name": "dm"}], "file": "wdtk-dumpfiles/src/test/java/org/wikidata/wdtk/dumpfiles/wmf/WmfOnlineDailyDumpFileTest.java"}, "test_case": {"identifier": "validDumpProperties", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n\tpublic void validDumpProperties() throws IOException {\n\t\tString dateStamp = \"20140220\";\n\t\twrf.setWebResourceContents(\n\t\t\t\t\"https://dumps.wikimedia.org/other/incr/wikidatawiki/\"\n\t\t\t\t\t\t+ dateStamp + \"/status.txt\", \"done\");\n\t\twrf.setWebResourceContents(\n\t\t\t\t\"https://dumps.wikimedia.org/other/incr/wikidatawiki/\"\n\t\t\t\t\t\t+ dateStamp + \"/wikidatawiki-\" + dateStamp\n\t\t\t\t\t\t+ \"-pages-meta-hist-incr.xml.bz2\", \"Line1\",\n\t\t\t\tCompressionType.BZ2);\n\t\tWmfOnlineDailyDumpFile dump = new WmfOnlineDailyDumpFile(dateStamp,\n\t\t\t\t\"wikidatawiki\", wrf, dm);\n\n\t\tBufferedReader br = dump.getDumpFileReader();\n\n\t\tassertEquals(br.readLine(), \"Line1\");\n\t\tassertNull(br.readLine());\n\t\tassertTrue(dump.isAvailable());\n\t\tassertTrue(dump.isAvailable()); // second time should use cached entry\n\t\tassertEquals(dateStamp, dump.getDateStamp());\n\t\tassertEquals(\"wikidatawiki\", dump.getProjectName());\n\t\tassertEquals(\"wikidatawiki-daily-\" + dateStamp, dump.toString());\n\t\tassertEquals(DumpContentType.DAILY, dump.getDumpContentType());\n\t}", "signature": "void validDumpProperties()", "full_signature": "@Test public void validDumpProperties()", "class_method_signature": "WmfOnlineDailyDumpFileTest.validDumpProperties()", "testcase": true, "constructor": false, "invocations": ["setWebResourceContents", "setWebResourceContents", "getDumpFileReader", "assertEquals", "readLine", "assertNull", "readLine", "assertTrue", "isAvailable", "assertTrue", "isAvailable", "assertEquals", "getDateStamp", "assertEquals", "getProjectName", "assertEquals", "toString", "assertEquals", "getDumpContentType"]}, "focal_class": {"identifier": "WmfOnlineDailyDumpFile", "superclass": "extends WmfDumpFile", "interfaces": "", "fields": [{"original_string": "static final Logger logger = LoggerFactory\n\t\t\t.getLogger(WmfOnlineDailyDumpFile.class);", "modifier": "static final", "type": "Logger", "declarator": "logger = LoggerFactory\n\t\t\t.getLogger(WmfOnlineDailyDumpFile.class)", "var_name": "logger"}, {"original_string": "final WebResourceFetcher webResourceFetcher;", "modifier": "final", "type": "WebResourceFetcher", "declarator": "webResourceFetcher", "var_name": "webResourceFetcher"}, {"original_string": "final DirectoryManager dumpfileDirectoryManager;", "modifier": "final", "type": "DirectoryManager", "declarator": "dumpfileDirectoryManager", "var_name": "dumpfileDirectoryManager"}, {"original_string": "boolean isPrepared = false;", "modifier": "", "type": "boolean", "declarator": "isPrepared = false", "var_name": "isPrepared"}], "methods": [{"identifier": "WmfOnlineDailyDumpFile", "parameters": "(String dateStamp, String projectName,\n\t\t\tWebResourceFetcher webResourceFetcher,\n\t\t\tDirectoryManager dumpfileDirectoryManager)", "modifiers": "public", "return": "", "signature": " WmfOnlineDailyDumpFile(String dateStamp, String projectName,\n\t\t\tWebResourceFetcher webResourceFetcher,\n\t\t\tDirectoryManager dumpfileDirectoryManager)", "full_signature": "public  WmfOnlineDailyDumpFile(String dateStamp, String projectName,\n\t\t\tWebResourceFetcher webResourceFetcher,\n\t\t\tDirectoryManager dumpfileDirectoryManager)", "class_method_signature": "WmfOnlineDailyDumpFile.WmfOnlineDailyDumpFile(String dateStamp, String projectName,\n\t\t\tWebResourceFetcher webResourceFetcher,\n\t\t\tDirectoryManager dumpfileDirectoryManager)", "testcase": false, "constructor": true}, {"identifier": "getDumpContentType", "parameters": "()", "modifiers": "@Override public", "return": "DumpContentType", "signature": "DumpContentType getDumpContentType()", "full_signature": "@Override public DumpContentType getDumpContentType()", "class_method_signature": "WmfOnlineDailyDumpFile.getDumpContentType()", "testcase": false, "constructor": false}, {"identifier": "getDumpFileStream", "parameters": "()", "modifiers": "@Override public", "return": "InputStream", "signature": "InputStream getDumpFileStream()", "full_signature": "@Override public InputStream getDumpFileStream()", "class_method_signature": "WmfOnlineDailyDumpFile.getDumpFileStream()", "testcase": false, "constructor": false}, {"identifier": "prepareDumpFile", "parameters": "()", "modifiers": "@Override public", "return": "void", "signature": "void prepareDumpFile()", "full_signature": "@Override public void prepareDumpFile()", "class_method_signature": "WmfOnlineDailyDumpFile.prepareDumpFile()", "testcase": false, "constructor": false}, {"identifier": "fetchIsDone", "parameters": "()", "modifiers": "@Override protected", "return": "boolean", "signature": "boolean fetchIsDone()", "full_signature": "@Override protected boolean fetchIsDone()", "class_method_signature": "WmfOnlineDailyDumpFile.fetchIsDone()", "testcase": false, "constructor": false}, {"identifier": "getBaseUrl", "parameters": "()", "modifiers": "", "return": "String", "signature": "String getBaseUrl()", "full_signature": " String getBaseUrl()", "class_method_signature": "WmfOnlineDailyDumpFile.getBaseUrl()", "testcase": false, "constructor": false}], "file": "wdtk-dumpfiles/src/main/java/org/wikidata/wdtk/dumpfiles/wmf/WmfOnlineDailyDumpFile.java"}, "focal_method": {"identifier": "getDumpContentType", "parameters": "()", "modifiers": "@Override public", "return": "DumpContentType", "body": "@Override\n\tpublic DumpContentType getDumpContentType() {\n\t\treturn DumpContentType.DAILY;\n\t}", "signature": "DumpContentType getDumpContentType()", "full_signature": "@Override public DumpContentType getDumpContentType()", "class_method_signature": "WmfOnlineDailyDumpFile.getDumpContentType()", "testcase": false, "constructor": false, "invocations": []}, "repository": {"repo_id": 16144428, "url": "https://github.com/Wikidata/Wikidata-Toolkit", "language": "Java", "is_fork": false, "fork_count": 80, "stargazer_count": 264, "size": 11241, "license": "licensed"}}