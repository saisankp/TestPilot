{"test_class": {"identifier": "MailServiceTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "@Autowired\n\tprivate MailService mailService;", "modifier": "@Autowired\n\tprivate", "type": "MailService", "declarator": "mailService", "var_name": "mailService"}], "file": "spring-boot-2.x_mail/src/test/java/cn/lijunkui/mail/MailServiceTest.java"}, "test_case": {"identifier": "sendAttachmentsMail", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n\tpublic void sendAttachmentsMail() {\n\t\tString html= \"<!DOCTYPE html>\\r\\n\" + \n\t\t\t\t\"<html>\\r\\n\" + \n\t\t\t\t\"<head>\\r\\n\" + \n\t\t\t\t\"<meta charset=\\\"UTF-8\\\">\\r\\n\" + \n\t\t\t\t\"<title>Insert title here</title>\\r\\n\" + \n\t\t\t\t\"</head>\\r\\n\" + \n\t\t\t\t\"<body>\\r\\n\" + \n\t\t\t\t\"\t<font color=\\\"red\\\">\u53d1\u9001html</font>\\r\\n\" + \n\t\t\t\t\"</body>\\r\\n\" + \n\t\t\t\t\"</html>\";\n\t\tString path = MailServiceTest.class.getClassLoader().getResource(\"image.jpg\").getPath();\n\t\tmailService.sendAttachmentsMail(\"1165904938@qq.com\", \"\u8fd9\u662f\u4e00\u4e2a\u6d4b\u8bd5\u90ae\u4ef6\", html, path);\n\t}", "signature": "void sendAttachmentsMail()", "full_signature": "@Test public void sendAttachmentsMail()", "class_method_signature": "MailServiceTest.sendAttachmentsMail()", "testcase": true, "constructor": false, "invocations": ["getPath", "getResource", "getClassLoader", "sendAttachmentsMail"]}, "focal_class": {"identifier": "MailService", "superclass": "", "interfaces": "", "fields": [{"original_string": "private final Logger logger = LoggerFactory.getLogger(this.getClass());", "modifier": "private final", "type": "Logger", "declarator": "logger = LoggerFactory.getLogger(this.getClass())", "var_name": "logger"}, {"original_string": "@Autowired\n\tprivate JavaMailSender sender;", "modifier": "@Autowired\n\tprivate", "type": "JavaMailSender", "declarator": "sender", "var_name": "sender"}, {"original_string": "@Value(\"${spring.mail.username}\")\n\tprivate String formMail;", "modifier": "@Value(\"${spring.mail.username}\")\n\tprivate", "type": "String", "declarator": "formMail", "var_name": "formMail"}], "methods": [{"identifier": "sendSimpleMail", "parameters": "(String toMail,String subject,String content)", "modifiers": "public", "return": "void", "signature": "void sendSimpleMail(String toMail,String subject,String content)", "full_signature": "public void sendSimpleMail(String toMail,String subject,String content)", "class_method_signature": "MailService.sendSimpleMail(String toMail,String subject,String content)", "testcase": false, "constructor": false}, {"identifier": "sendHtmlMail", "parameters": "(String toMail,String subject,String content)", "modifiers": "public", "return": "void", "signature": "void sendHtmlMail(String toMail,String subject,String content)", "full_signature": "public void sendHtmlMail(String toMail,String subject,String content)", "class_method_signature": "MailService.sendHtmlMail(String toMail,String subject,String content)", "testcase": false, "constructor": false}, {"identifier": "sendInlineResourceMail", "parameters": "(String toMail,String subject,String content,List<InlineResource> resourceist)", "modifiers": "public", "return": "void", "signature": "void sendInlineResourceMail(String toMail,String subject,String content,List<InlineResource> resourceist)", "full_signature": "public void sendInlineResourceMail(String toMail,String subject,String content,List<InlineResource> resourceist)", "class_method_signature": "MailService.sendInlineResourceMail(String toMail,String subject,String content,List<InlineResource> resourceist)", "testcase": false, "constructor": false}, {"identifier": "sendInlineResourceMailForGroupSending", "parameters": "(String[] toMail,String subject,String content,List<InlineResource> resourceist)", "modifiers": "public", "return": "void", "signature": "void sendInlineResourceMailForGroupSending(String[] toMail,String subject,String content,List<InlineResource> resourceist)", "full_signature": "public void sendInlineResourceMailForGroupSending(String[] toMail,String subject,String content,List<InlineResource> resourceist)", "class_method_signature": "MailService.sendInlineResourceMailForGroupSending(String[] toMail,String subject,String content,List<InlineResource> resourceist)", "testcase": false, "constructor": false}, {"identifier": "sendAttachmentsMail", "parameters": "(String toMail,String subject,String content,String filePath)", "modifiers": "public", "return": "void", "signature": "void sendAttachmentsMail(String toMail,String subject,String content,String filePath)", "full_signature": "public void sendAttachmentsMail(String toMail,String subject,String content,String filePath)", "class_method_signature": "MailService.sendAttachmentsMail(String toMail,String subject,String content,String filePath)", "testcase": false, "constructor": false}], "file": "spring-boot-2.x_mail/src/main/java/cn/lijunkui/mail/MailService.java"}, "focal_method": {"identifier": "sendAttachmentsMail", "parameters": "(String toMail,String subject,String content,String filePath)", "modifiers": "public", "return": "void", "body": "public void sendAttachmentsMail(String toMail,String subject,String content,String filePath) {\n   \t \tMimeMessage message = sender.createMimeMessage();\n        try {\n            MimeMessageHelper helper = new MimeMessageHelper(message, true);\n            helper.setFrom(formMail);\n            helper.setTo(toMail);\n            helper.setSubject(subject);\n            helper.setText(content, true);\n            FileSystemResource file = new FileSystemResource(new File(filePath));\n            String fileName = filePath.substring(filePath.lastIndexOf(\"/\"));\n            helper.addAttachment(fileName, file);\n            sender.send(message);\n            logger.info(\"\u53d1\u9001\u7ed9\"+toMail+\"\u5e26\u9644\u4ef6\u7684\u90ae\u4ef6\u5df2\u7ecf\u53d1\u9001\u3002\");\n        } catch (MessagingException e) {\n            e.printStackTrace();\n            logger.error(\"\u53d1\u9001\u7ed9\"+toMail+\"\u5e26\u9644\u4ef6\u7684\u90ae\u4ef6\u65f6\u53d1\u751f\u5f02\u5e38\uff01\", e);\n        }\n    }", "signature": "void sendAttachmentsMail(String toMail,String subject,String content,String filePath)", "full_signature": "public void sendAttachmentsMail(String toMail,String subject,String content,String filePath)", "class_method_signature": "MailService.sendAttachmentsMail(String toMail,String subject,String content,String filePath)", "testcase": false, "constructor": false, "invocations": ["createMimeMessage", "setFrom", "setTo", "setSubject", "setText", "substring", "lastIndexOf", "addAttachment", "send", "info", "printStackTrace", "error"]}, "repository": {"repo_id": 157791342, "url": "https://github.com/zhuoqianmingyue/springbootexamples", "language": "Java", "is_fork": false, "fork_count": 83, "stargazer_count": 140, "size": 1587, "license": "licensed"}}