{"test_class": {"identifier": "DelegatingContextTest", "superclass": "extends AbstractPoolTestCase", "interfaces": "", "fields": [], "file": "core/src/test/java/org/springframework/ldap/pool2/DelegatingContextTest.java"}, "test_case": {"identifier": "testPoolExceptionOnClose", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testPoolExceptionOnClose() throws Exception {\n        doThrow(new Exception(\"Fake Pool returnObject Exception\"))\n                .when(keyedObjectPoolMock).returnObject(DirContextType.READ_ONLY, contextMock);\n\n        final DelegatingContext delegatingContext = new DelegatingContext(\n                keyedObjectPoolMock, contextMock, DirContextType.READ_ONLY);\n\n        try {\n            delegatingContext.close();\n            fail(\"DelegatingContext.close should have thrown a NamingException\");\n        } catch (NamingException ne) {\n            // Expected\n        }\n    }", "signature": "void testPoolExceptionOnClose()", "full_signature": "@Test public void testPoolExceptionOnClose()", "class_method_signature": "DelegatingContextTest.testPoolExceptionOnClose()", "testcase": true, "constructor": false, "invocations": ["returnObject", "when", "doThrow", "close", "fail"]}, "focal_class": {"identifier": "DelegatingContext", "superclass": "", "interfaces": "implements Context", "fields": [{"original_string": "private KeyedObjectPool<Object,Object> keyedObjectPool;", "modifier": "private", "type": "KeyedObjectPool<Object,Object>", "declarator": "keyedObjectPool", "var_name": "keyedObjectPool"}, {"original_string": "private Context delegateContext;", "modifier": "private", "type": "Context", "declarator": "delegateContext", "var_name": "delegateContext"}, {"original_string": "private final DirContextType dirContextType;", "modifier": "private final", "type": "DirContextType", "declarator": "dirContextType", "var_name": "dirContextType"}], "methods": [{"identifier": "DelegatingContext", "parameters": "(KeyedObjectPool<Object,Object> keyedObjectPool, Context delegateContext, DirContextType dirContextType)", "modifiers": "public", "return": "", "signature": " DelegatingContext(KeyedObjectPool<Object,Object> keyedObjectPool, Context delegateContext, DirContextType dirContextType)", "full_signature": "public  DelegatingContext(KeyedObjectPool<Object,Object> keyedObjectPool, Context delegateContext, DirContextType dirContextType)", "class_method_signature": "DelegatingContext.DelegatingContext(KeyedObjectPool<Object,Object> keyedObjectPool, Context delegateContext, DirContextType dirContextType)", "testcase": false, "constructor": true}, {"identifier": "getDelegateContext", "parameters": "()", "modifiers": "public", "return": "Context", "signature": "Context getDelegateContext()", "full_signature": "public Context getDelegateContext()", "class_method_signature": "DelegatingContext.getDelegateContext()", "testcase": false, "constructor": false}, {"identifier": "getInnermostDelegateContext", "parameters": "()", "modifiers": "public", "return": "Context", "signature": "Context getInnermostDelegateContext()", "full_signature": "public Context getInnermostDelegateContext()", "class_method_signature": "DelegatingContext.getInnermostDelegateContext()", "testcase": false, "constructor": false}, {"identifier": "assertOpen", "parameters": "()", "modifiers": "protected", "return": "void", "signature": "void assertOpen()", "full_signature": "protected void assertOpen()", "class_method_signature": "DelegatingContext.assertOpen()", "testcase": false, "constructor": false}, {"identifier": "equals", "parameters": "(Object obj)", "modifiers": "public", "return": "boolean", "signature": "boolean equals(Object obj)", "full_signature": "public boolean equals(Object obj)", "class_method_signature": "DelegatingContext.equals(Object obj)", "testcase": false, "constructor": false}, {"identifier": "hashCode", "parameters": "()", "modifiers": "public", "return": "int", "signature": "int hashCode()", "full_signature": "public int hashCode()", "class_method_signature": "DelegatingContext.hashCode()", "testcase": false, "constructor": false}, {"identifier": "toString", "parameters": "()", "modifiers": "public", "return": "String", "signature": "String toString()", "full_signature": "public String toString()", "class_method_signature": "DelegatingContext.toString()", "testcase": false, "constructor": false}, {"identifier": "addToEnvironment", "parameters": "(String propName, Object propVal)", "modifiers": "public", "return": "Object", "signature": "Object addToEnvironment(String propName, Object propVal)", "full_signature": "public Object addToEnvironment(String propName, Object propVal)", "class_method_signature": "DelegatingContext.addToEnvironment(String propName, Object propVal)", "testcase": false, "constructor": false}, {"identifier": "bind", "parameters": "(Name name, Object obj)", "modifiers": "public", "return": "void", "signature": "void bind(Name name, Object obj)", "full_signature": "public void bind(Name name, Object obj)", "class_method_signature": "DelegatingContext.bind(Name name, Object obj)", "testcase": false, "constructor": false}, {"identifier": "bind", "parameters": "(String name, Object obj)", "modifiers": "public", "return": "void", "signature": "void bind(String name, Object obj)", "full_signature": "public void bind(String name, Object obj)", "class_method_signature": "DelegatingContext.bind(String name, Object obj)", "testcase": false, "constructor": false}, {"identifier": "close", "parameters": "()", "modifiers": "public", "return": "void", "signature": "void close()", "full_signature": "public void close()", "class_method_signature": "DelegatingContext.close()", "testcase": false, "constructor": false}, {"identifier": "composeName", "parameters": "(Name name, Name prefix)", "modifiers": "public", "return": "Name", "signature": "Name composeName(Name name, Name prefix)", "full_signature": "public Name composeName(Name name, Name prefix)", "class_method_signature": "DelegatingContext.composeName(Name name, Name prefix)", "testcase": false, "constructor": false}, {"identifier": "composeName", "parameters": "(String name, String prefix)", "modifiers": "public", "return": "String", "signature": "String composeName(String name, String prefix)", "full_signature": "public String composeName(String name, String prefix)", "class_method_signature": "DelegatingContext.composeName(String name, String prefix)", "testcase": false, "constructor": false}, {"identifier": "createSubcontext", "parameters": "(Name name)", "modifiers": "public", "return": "Context", "signature": "Context createSubcontext(Name name)", "full_signature": "public Context createSubcontext(Name name)", "class_method_signature": "DelegatingContext.createSubcontext(Name name)", "testcase": false, "constructor": false}, {"identifier": "createSubcontext", "parameters": "(String name)", "modifiers": "public", "return": "Context", "signature": "Context createSubcontext(String name)", "full_signature": "public Context createSubcontext(String name)", "class_method_signature": "DelegatingContext.createSubcontext(String name)", "testcase": false, "constructor": false}, {"identifier": "destroySubcontext", "parameters": "(Name name)", "modifiers": "public", "return": "void", "signature": "void destroySubcontext(Name name)", "full_signature": "public void destroySubcontext(Name name)", "class_method_signature": "DelegatingContext.destroySubcontext(Name name)", "testcase": false, "constructor": false}, {"identifier": "destroySubcontext", "parameters": "(String name)", "modifiers": "public", "return": "void", "signature": "void destroySubcontext(String name)", "full_signature": "public void destroySubcontext(String name)", "class_method_signature": "DelegatingContext.destroySubcontext(String name)", "testcase": false, "constructor": false}, {"identifier": "getEnvironment", "parameters": "()", "modifiers": "public", "return": "Hashtable<?, ?>", "signature": "Hashtable<?, ?> getEnvironment()", "full_signature": "public Hashtable<?, ?> getEnvironment()", "class_method_signature": "DelegatingContext.getEnvironment()", "testcase": false, "constructor": false}, {"identifier": "getNameInNamespace", "parameters": "()", "modifiers": "public", "return": "String", "signature": "String getNameInNamespace()", "full_signature": "public String getNameInNamespace()", "class_method_signature": "DelegatingContext.getNameInNamespace()", "testcase": false, "constructor": false}, {"identifier": "getNameParser", "parameters": "(Name name)", "modifiers": "public", "return": "NameParser", "signature": "NameParser getNameParser(Name name)", "full_signature": "public NameParser getNameParser(Name name)", "class_method_signature": "DelegatingContext.getNameParser(Name name)", "testcase": false, "constructor": false}, {"identifier": "getNameParser", "parameters": "(String name)", "modifiers": "public", "return": "NameParser", "signature": "NameParser getNameParser(String name)", "full_signature": "public NameParser getNameParser(String name)", "class_method_signature": "DelegatingContext.getNameParser(String name)", "testcase": false, "constructor": false}, {"identifier": "list", "parameters": "(Name name)", "modifiers": "public", "return": "NamingEnumeration<NameClassPair>", "signature": "NamingEnumeration<NameClassPair> list(Name name)", "full_signature": "public NamingEnumeration<NameClassPair> list(Name name)", "class_method_signature": "DelegatingContext.list(Name name)", "testcase": false, "constructor": false}, {"identifier": "list", "parameters": "(String name)", "modifiers": "public", "return": "NamingEnumeration<NameClassPair>", "signature": "NamingEnumeration<NameClassPair> list(String name)", "full_signature": "public NamingEnumeration<NameClassPair> list(String name)", "class_method_signature": "DelegatingContext.list(String name)", "testcase": false, "constructor": false}, {"identifier": "listBindings", "parameters": "(Name name)", "modifiers": "public", "return": "NamingEnumeration<Binding>", "signature": "NamingEnumeration<Binding> listBindings(Name name)", "full_signature": "public NamingEnumeration<Binding> listBindings(Name name)", "class_method_signature": "DelegatingContext.listBindings(Name name)", "testcase": false, "constructor": false}, {"identifier": "listBindings", "parameters": "(String name)", "modifiers": "public", "return": "NamingEnumeration<Binding>", "signature": "NamingEnumeration<Binding> listBindings(String name)", "full_signature": "public NamingEnumeration<Binding> listBindings(String name)", "class_method_signature": "DelegatingContext.listBindings(String name)", "testcase": false, "constructor": false}, {"identifier": "lookup", "parameters": "(Name name)", "modifiers": "public", "return": "Object", "signature": "Object lookup(Name name)", "full_signature": "public Object lookup(Name name)", "class_method_signature": "DelegatingContext.lookup(Name name)", "testcase": false, "constructor": false}, {"identifier": "lookup", "parameters": "(String name)", "modifiers": "public", "return": "Object", "signature": "Object lookup(String name)", "full_signature": "public Object lookup(String name)", "class_method_signature": "DelegatingContext.lookup(String name)", "testcase": false, "constructor": false}, {"identifier": "lookupLink", "parameters": "(Name name)", "modifiers": "public", "return": "Object", "signature": "Object lookupLink(Name name)", "full_signature": "public Object lookupLink(Name name)", "class_method_signature": "DelegatingContext.lookupLink(Name name)", "testcase": false, "constructor": false}, {"identifier": "lookupLink", "parameters": "(String name)", "modifiers": "public", "return": "Object", "signature": "Object lookupLink(String name)", "full_signature": "public Object lookupLink(String name)", "class_method_signature": "DelegatingContext.lookupLink(String name)", "testcase": false, "constructor": false}, {"identifier": "rebind", "parameters": "(Name name, Object obj)", "modifiers": "public", "return": "void", "signature": "void rebind(Name name, Object obj)", "full_signature": "public void rebind(Name name, Object obj)", "class_method_signature": "DelegatingContext.rebind(Name name, Object obj)", "testcase": false, "constructor": false}, {"identifier": "rebind", "parameters": "(String name, Object obj)", "modifiers": "public", "return": "void", "signature": "void rebind(String name, Object obj)", "full_signature": "public void rebind(String name, Object obj)", "class_method_signature": "DelegatingContext.rebind(String name, Object obj)", "testcase": false, "constructor": false}, {"identifier": "removeFromEnvironment", "parameters": "(String propName)", "modifiers": "public", "return": "Object", "signature": "Object removeFromEnvironment(String propName)", "full_signature": "public Object removeFromEnvironment(String propName)", "class_method_signature": "DelegatingContext.removeFromEnvironment(String propName)", "testcase": false, "constructor": false}, {"identifier": "rename", "parameters": "(Name oldName, Name newName)", "modifiers": "public", "return": "void", "signature": "void rename(Name oldName, Name newName)", "full_signature": "public void rename(Name oldName, Name newName)", "class_method_signature": "DelegatingContext.rename(Name oldName, Name newName)", "testcase": false, "constructor": false}, {"identifier": "rename", "parameters": "(String oldName, String newName)", "modifiers": "public", "return": "void", "signature": "void rename(String oldName, String newName)", "full_signature": "public void rename(String oldName, String newName)", "class_method_signature": "DelegatingContext.rename(String oldName, String newName)", "testcase": false, "constructor": false}, {"identifier": "unbind", "parameters": "(Name name)", "modifiers": "public", "return": "void", "signature": "void unbind(Name name)", "full_signature": "public void unbind(Name name)", "class_method_signature": "DelegatingContext.unbind(Name name)", "testcase": false, "constructor": false}, {"identifier": "unbind", "parameters": "(String name)", "modifiers": "public", "return": "void", "signature": "void unbind(String name)", "full_signature": "public void unbind(String name)", "class_method_signature": "DelegatingContext.unbind(String name)", "testcase": false, "constructor": false}], "file": "core/src/main/java/org/springframework/ldap/pool2/DelegatingContext.java"}, "focal_method": {"identifier": "close", "parameters": "()", "modifiers": "public", "return": "void", "body": "public void close() throws NamingException {\n        final Context context = this.getInnermostDelegateContext();\n        if (context == null) {\n            return;\n        }\n\n        //Get a local reference so the member can be nulled earlier\n        this.delegateContext = null;\n\n        //Return the object to the Pool and then null the pool reference\n        try {\n            boolean valid = true;\n\n            if (context instanceof FailureAwareContext) {\n                FailureAwareContext failureAwareContext = (FailureAwareContext) context;\n                if(failureAwareContext.hasFailed()) {\n                    valid = false;\n                }\n            }\n\n            if (valid) {\n                this.keyedObjectPool.returnObject(this.dirContextType, context);\n            } else {\n                this.keyedObjectPool.invalidateObject(this.dirContextType, context);\n            }\n        }\n        catch (Exception e) {\n            final NamingException namingException = new NamingException(\"Failed to return delegate Context to pool.\");\n            namingException.setRootCause(e);\n            throw namingException;\n        }\n        finally {\n            this.keyedObjectPool = null;\n        }\n    }", "signature": "void close()", "full_signature": "public void close()", "class_method_signature": "DelegatingContext.close()", "testcase": false, "constructor": false, "invocations": ["getInnermostDelegateContext", "hasFailed", "returnObject", "invalidateObject", "setRootCause"]}, "repository": {"repo_id": 11136641, "url": "https://github.com/spring-projects/spring-ldap", "language": "Java", "is_fork": false, "fork_count": 433, "stargazer_count": 240, "size": 24447, "license": "licensed"}}