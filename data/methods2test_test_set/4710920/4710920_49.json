{"test_class": {"identifier": "TelnetProcessHandlerTest", "superclass": "", "interfaces": "", "fields": [], "file": "dubbo-plugin/dubbo-qos/src/test/java/org/apache/dubbo/qos/server/handler/TelnetProcessHandlerTest.java"}, "test_case": {"identifier": "testPrompt", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testPrompt() throws Exception {\n        ChannelHandlerContext context = mock(ChannelHandlerContext.class);\n        TelnetProcessHandler handler = new TelnetProcessHandler();\n        handler.channelRead0(context, \"\");\n        verify(context).writeAndFlush(QosProcessHandler.PROMPT);\n    }", "signature": "void testPrompt()", "full_signature": "@Test public void testPrompt()", "class_method_signature": "TelnetProcessHandlerTest.testPrompt()", "testcase": true, "constructor": false, "invocations": ["mock", "channelRead0", "writeAndFlush", "verify"]}, "focal_class": {"identifier": "TelnetProcessHandler", "superclass": "extends SimpleChannelInboundHandler<String>", "interfaces": "", "fields": [{"original_string": "private static final Logger log = LoggerFactory.getLogger(TelnetProcessHandler.class);", "modifier": "private static final", "type": "Logger", "declarator": "log = LoggerFactory.getLogger(TelnetProcessHandler.class)", "var_name": "log"}, {"original_string": "private static CommandExecutor commandExecutor = new DefaultCommandExecutor();", "modifier": "private static", "type": "CommandExecutor", "declarator": "commandExecutor = new DefaultCommandExecutor()", "var_name": "commandExecutor"}], "methods": [{"identifier": "channelRead0", "parameters": "(ChannelHandlerContext ctx, String msg)", "modifiers": "@Override protected", "return": "void", "signature": "void channelRead0(ChannelHandlerContext ctx, String msg)", "full_signature": "@Override protected void channelRead0(ChannelHandlerContext ctx, String msg)", "class_method_signature": "TelnetProcessHandler.channelRead0(ChannelHandlerContext ctx, String msg)", "testcase": false, "constructor": false}, {"identifier": "getByeLabel", "parameters": "()", "modifiers": "private", "return": "String", "signature": "String getByeLabel()", "full_signature": "private String getByeLabel()", "class_method_signature": "TelnetProcessHandler.getByeLabel()", "testcase": false, "constructor": false}], "file": "dubbo-plugin/dubbo-qos/src/main/java/org/apache/dubbo/qos/server/handler/TelnetProcessHandler.java"}, "focal_method": {"identifier": "channelRead0", "parameters": "(ChannelHandlerContext ctx, String msg)", "modifiers": "@Override protected", "return": "void", "body": "@Override\n    protected void channelRead0(ChannelHandlerContext ctx, String msg) throws Exception {\n\n        if (StringUtils.isBlank(msg)) {\n            ctx.writeAndFlush(QosProcessHandler.PROMPT);\n        } else {\n            CommandContext commandContext = TelnetCommandDecoder.decode(msg);\n            commandContext.setRemote(ctx.channel());\n\n            try {\n                String result = commandExecutor.execute(commandContext);\n                if (StringUtils.isEquals(QosConstants.CLOSE, result)) {\n                    ctx.writeAndFlush(getByeLabel()).addListener(ChannelFutureListener.CLOSE);\n                } else {\n                    ctx.writeAndFlush(result + QosConstants.BR_STR + QosProcessHandler.PROMPT);\n                }\n            } catch (NoSuchCommandException ex) {\n                ctx.writeAndFlush(msg + \" :no such command\");\n                ctx.writeAndFlush(QosConstants.BR_STR + QosProcessHandler.PROMPT);\n                log.error(\"can not found command \" + commandContext, ex);\n            } catch (Exception ex) {\n                ctx.writeAndFlush(msg + \" :fail to execute commandContext by \" + ex.getMessage());\n                ctx.writeAndFlush(QosConstants.BR_STR + QosProcessHandler.PROMPT);\n                log.error(\"execute commandContext got exception \" + commandContext, ex);\n            }\n        }\n    }", "signature": "void channelRead0(ChannelHandlerContext ctx, String msg)", "full_signature": "@Override protected void channelRead0(ChannelHandlerContext ctx, String msg)", "class_method_signature": "TelnetProcessHandler.channelRead0(ChannelHandlerContext ctx, String msg)", "testcase": false, "constructor": false, "invocations": ["isBlank", "writeAndFlush", "decode", "setRemote", "channel", "execute", "isEquals", "addListener", "writeAndFlush", "getByeLabel", "writeAndFlush", "writeAndFlush", "writeAndFlush", "error", "writeAndFlush", "getMessage", "writeAndFlush", "error"]}, "repository": {"repo_id": 4710920, "url": "https://github.com/apache/dubbo", "stars": 30960, "created": "6/19/2012 7:56:02 AM +00:00", "updates": "2020-01-27T14:21:03+00:00", "fork": "False", "license": "licensed"}}