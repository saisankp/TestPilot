{"test_class": {"identifier": "OpentsdbConverterTest", "superclass": "", "interfaces": "", "fields": [], "file": "gateway/metrics/importer/opentsdb/src/test/java/com/alipay/sofa/lookout/gateway/metrics/importer/opentsdb/OpentsdbConverterTest.java"}, "test_case": {"identifier": "testConvertToModel", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testConvertToModel() {\n        Map map = new HashMap();\n        map.put(\"app\", \"demo\");\n        JSONObject obj = new JSONObject();\n        obj.put(\"timestamp\", 1557844146565l);\n        obj.put(\"metric\", \"jvm.mem.free\");\n        obj.put(\"value\", 1.2d);\n        obj.put(\"tags\", map);\n        System.out.println(JSONObject.toJSONString(obj));\n        Metric m = OpentsdbConverter.convertToModel(obj);\n        System.out.println(m);\n        Assert\n            .assertEquals(\n                \"Metric{name='jvm.mem.free', value=1.2, timestamp=1557844146565000, info='null', tags={app=demo}}\",\n                m.toString());\n    }", "signature": "void testConvertToModel()", "full_signature": "@Test public void testConvertToModel()", "class_method_signature": "OpentsdbConverterTest.testConvertToModel()", "testcase": true, "constructor": false, "invocations": ["put", "put", "put", "put", "put", "println", "toJSONString", "convertToModel", "println", "assertEquals", "toString"]}, "focal_class": {"identifier": "OpentsdbConverter", "superclass": "", "interfaces": "", "fields": [], "methods": [{"identifier": "OpentsdbConverter", "parameters": "()", "modifiers": "private", "return": "", "signature": " OpentsdbConverter()", "full_signature": "private  OpentsdbConverter()", "class_method_signature": "OpentsdbConverter.OpentsdbConverter()", "testcase": false, "constructor": true}, {"identifier": "convertToModel", "parameters": "(JSONObject json)", "modifiers": "public static", "return": "Metric", "signature": "Metric convertToModel(JSONObject json)", "full_signature": "public static Metric convertToModel(JSONObject json)", "class_method_signature": "OpentsdbConverter.convertToModel(JSONObject json)", "testcase": false, "constructor": false}], "file": "gateway/metrics/importer/opentsdb/src/main/java/com/alipay/sofa/lookout/gateway/metrics/importer/opentsdb/OpentsdbConverter.java"}, "focal_method": {"identifier": "convertToModel", "parameters": "(JSONObject json)", "modifiers": "public static", "return": "Metric", "body": "public static Metric convertToModel(JSONObject json) {\n\n        Metric m = new Metric();\n        // opentsdb\u65f6\u95f4\u6233\u5355\u4f4d\u662f\u79d2\n        m.setTimestamp(json.getLongValue(\"timestamp\") * 1000L);\n        m.setName(json.getString(\"metric\"));\n        m.setValue(json.getDoubleValue(\"value\"));\n        Map<String, String> mtags = m.getTags();\n\n        JSONObject tags = json.getJSONObject(\"tags\");\n        if (tags != null) {\n            for (Map.Entry<String, Object> e : tags.entrySet()) {\n                String key = MetricUtils.formatMetricTagKey(e.getKey());\n                String value = MetricUtils.formatTagValue(e.getValue().toString());\n                mtags.put(key, value);\n            }\n        }\n\n        return m;\n    }", "signature": "Metric convertToModel(JSONObject json)", "full_signature": "public static Metric convertToModel(JSONObject json)", "class_method_signature": "OpentsdbConverter.convertToModel(JSONObject json)", "testcase": false, "constructor": false, "invocations": ["setTimestamp", "getLongValue", "setName", "getString", "setValue", "getDoubleValue", "getTags", "getJSONObject", "entrySet", "formatMetricTagKey", "getKey", "formatTagValue", "toString", "getValue", "put"]}, "repository": {"repo_id": 133381280, "url": "https://github.com/sofastack/sofa-lookout", "language": "Java", "is_fork": false, "fork_count": 113, "stargazer_count": 318, "size": 1394, "license": "licensed"}}