{"test_class": {"identifier": "IpTranslatorProcessorTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private IpTranslatorProcessor processor;", "modifier": "private", "type": "IpTranslatorProcessor", "declarator": "processor", "var_name": "processor"}, {"original_string": "private SlackMessage slackMessage;", "modifier": "private", "type": "SlackMessage", "declarator": "slackMessage", "var_name": "slackMessage"}], "file": "cerberus-ip-translator-lambda/src/test/java/com.nike.cerberus.lambda.waf/IpTranslatorProcessorTest.java"}, "test_case": {"identifier": "test_that_getIpsFromSlackMessage_returns_ips_as_expected", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n  public void test_that_getIpsFromSlackMessage_returns_ips_as_expected() {\n    List<String> ips = processor.getIpsFromSlackMessage(slackMessage);\n    assertEquals(ImmutableList.of(\"52.71.59.82\"), ips);\n  }", "signature": "void test_that_getIpsFromSlackMessage_returns_ips_as_expected()", "full_signature": "@Test public void test_that_getIpsFromSlackMessage_returns_ips_as_expected()", "class_method_signature": "IpTranslatorProcessorTest.test_that_getIpsFromSlackMessage_returns_ips_as_expected()", "testcase": true, "constructor": false, "invocations": ["getIpsFromSlackMessage", "assertEquals", "of"]}, "focal_class": {"identifier": "IpTranslatorProcessor", "superclass": "", "interfaces": "", "fields": [{"original_string": "Logger log = Logger.getLogger(getClass());", "modifier": "", "type": "Logger", "declarator": "log = Logger.getLogger(getClass())", "var_name": "log"}, {"original_string": "private CerberusMetadataLookup cerberusMetadataLookup = new CerberusMetadataLookup();", "modifier": "private", "type": "CerberusMetadataLookup", "declarator": "cerberusMetadataLookup = new CerberusMetadataLookup()", "var_name": "cerberusMetadataLookup"}, {"original_string": "private SlackMessageSender slackMessageSender = new SlackMessageSender();", "modifier": "private", "type": "SlackMessageSender", "declarator": "slackMessageSender = new SlackMessageSender()", "var_name": "slackMessageSender"}], "methods": [{"identifier": "processMessageIfFromRateLimiter", "parameters": "(SlackMessage message)", "modifiers": "public", "return": "void", "signature": "void processMessageIfFromRateLimiter(SlackMessage message)", "full_signature": "public void processMessageIfFromRateLimiter(SlackMessage message)", "class_method_signature": "IpTranslatorProcessor.processMessageIfFromRateLimiter(SlackMessage message)", "testcase": false, "constructor": false}, {"identifier": "isMessageFromRateLimiter", "parameters": "(SlackMessage message)", "modifiers": "protected", "return": "boolean", "signature": "boolean isMessageFromRateLimiter(SlackMessage message)", "full_signature": "protected boolean isMessageFromRateLimiter(SlackMessage message)", "class_method_signature": "IpTranslatorProcessor.isMessageFromRateLimiter(SlackMessage message)", "testcase": false, "constructor": false}, {"identifier": "getEnvironmentFromSlackMessage", "parameters": "(SlackMessage message)", "modifiers": "protected", "return": "String", "signature": "String getEnvironmentFromSlackMessage(SlackMessage message)", "full_signature": "protected String getEnvironmentFromSlackMessage(SlackMessage message)", "class_method_signature": "IpTranslatorProcessor.getEnvironmentFromSlackMessage(SlackMessage message)", "testcase": false, "constructor": false}, {"identifier": "translateIpToMetadata", "parameters": "(SlackMessage message, String environment)", "modifiers": "private", "return": "void", "signature": "void translateIpToMetadata(SlackMessage message, String environment)", "full_signature": "private void translateIpToMetadata(SlackMessage message, String environment)", "class_method_signature": "IpTranslatorProcessor.translateIpToMetadata(SlackMessage message, String environment)", "testcase": false, "constructor": false}, {"identifier": "getIpsFromSlackMessage", "parameters": "(SlackMessage message)", "modifiers": "protected", "return": "List<String>", "signature": "List<String> getIpsFromSlackMessage(SlackMessage message)", "full_signature": "protected List<String> getIpsFromSlackMessage(SlackMessage message)", "class_method_signature": "IpTranslatorProcessor.getIpsFromSlackMessage(SlackMessage message)", "testcase": false, "constructor": false}, {"identifier": "parseAndTranslateIpAddressToMetadata", "parameters": "(String ipAddress, String environment)", "modifiers": "private", "return": "List<Map<String,String>>", "signature": "List<Map<String,String>> parseAndTranslateIpAddressToMetadata(String ipAddress, String environment)", "full_signature": "private List<Map<String,String>> parseAndTranslateIpAddressToMetadata(String ipAddress, String environment)", "class_method_signature": "IpTranslatorProcessor.parseAndTranslateIpAddressToMetadata(String ipAddress, String environment)", "testcase": false, "constructor": false}], "file": "cerberus-ip-translator-lambda/src/main/java/com.nike.cerberus.lambda.waf/IpTranslatorProcessor.java"}, "focal_method": {"identifier": "getIpsFromSlackMessage", "parameters": "(SlackMessage message)", "modifiers": "protected", "return": "List<String>", "body": "protected List<String> getIpsFromSlackMessage(SlackMessage message) {\n        String text = message.getText();\n        List<String> parsedIps = new LinkedList<>();\n\n        Arrays.stream(text.split(\"\\\\n\"))\n                .filter(i -> i.startsWith(\"IP addresses added to auto block list:\"))\n                .findFirst().ifPresent(ipAddedLine -> {\n            ipAddedLine = StringUtils.removeStart(ipAddedLine, \"IP addresses added to auto block list: \");\n            ipAddedLine = StringUtils.removeEnd(ipAddedLine.trim(), \",\");\n            String[] ips = ipAddedLine.split(\",\");\n            Arrays.stream(ips).forEach(ipLine -> {\n                parsedIps.add(ipLine.trim().split(\"\\\\s\")[0]);\n            });\n        });\n\n        return parsedIps.stream().filter(StringUtils::isNotBlank).collect(Collectors.toList());\n    }", "signature": "List<String> getIpsFromSlackMessage(SlackMessage message)", "full_signature": "protected List<String> getIpsFromSlackMessage(SlackMessage message)", "class_method_signature": "IpTranslatorProcessor.getIpsFromSlackMessage(SlackMessage message)", "testcase": false, "constructor": false, "invocations": ["getText", "ifPresent", "findFirst", "filter", "stream", "split", "startsWith", "removeStart", "removeEnd", "trim", "split", "forEach", "stream", "add", "split", "trim", "collect", "filter", "stream", "toList"]}, "repository": {"repo_id": 70515197, "url": "https://github.com/Nike-Inc/cerberus-serverless-components", "language": "Java", "is_fork": false, "fork_count": 5, "stargazer_count": 12, "size": 269, "license": "licensed"}}