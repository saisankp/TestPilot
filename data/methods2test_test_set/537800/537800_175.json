{"test_class": {"identifier": "CsvReporterTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "@Rule\n    public final TemporaryFolder folder = new TemporaryFolder();", "modifier": "@Rule\n    public final", "type": "TemporaryFolder", "declarator": "folder = new TemporaryFolder()", "var_name": "folder"}, {"original_string": "private final MetricRegistry registry = mock(MetricRegistry.class);", "modifier": "private final", "type": "MetricRegistry", "declarator": "registry = mock(MetricRegistry.class)", "var_name": "registry"}, {"original_string": "private final Clock clock = mock(Clock.class);", "modifier": "private final", "type": "Clock", "declarator": "clock = mock(Clock.class)", "var_name": "clock"}, {"original_string": "private File dataDirectory;", "modifier": "private", "type": "File", "declarator": "dataDirectory", "var_name": "dataDirectory"}, {"original_string": "private CsvReporter reporter;", "modifier": "private", "type": "CsvReporter", "declarator": "reporter", "var_name": "reporter"}], "file": "metrics-core/src/test/java/com/codahale/metrics/CsvReporterTest.java"}, "test_case": {"identifier": "reportsTimerValues", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void reportsTimerValues() throws Exception {\n        final Timer timer = mock(Timer.class);\n        when(timer.getCount()).thenReturn(1L);\n        when(timer.getMeanRate()).thenReturn(2.0);\n        when(timer.getOneMinuteRate()).thenReturn(3.0);\n        when(timer.getFiveMinuteRate()).thenReturn(4.0);\n        when(timer.getFifteenMinuteRate()).thenReturn(5.0);\n\n        final Snapshot snapshot = mock(Snapshot.class);\n        when(snapshot.getMax()).thenReturn(TimeUnit.MILLISECONDS.toNanos(100));\n        when(snapshot.getMean()).thenReturn((double) TimeUnit.MILLISECONDS.toNanos(200));\n        when(snapshot.getMin()).thenReturn(TimeUnit.MILLISECONDS.toNanos(300));\n        when(snapshot.getStdDev()).thenReturn((double) TimeUnit.MILLISECONDS.toNanos(400));\n        when(snapshot.getMedian()).thenReturn((double) TimeUnit.MILLISECONDS.toNanos(500));\n        when(snapshot.get75thPercentile()).thenReturn((double) TimeUnit.MILLISECONDS.toNanos(600));\n        when(snapshot.get95thPercentile()).thenReturn((double) TimeUnit.MILLISECONDS.toNanos(700));\n        when(snapshot.get98thPercentile()).thenReturn((double) TimeUnit.MILLISECONDS.toNanos(800));\n        when(snapshot.get99thPercentile()).thenReturn((double) TimeUnit.MILLISECONDS.toNanos(900));\n        when(snapshot.get999thPercentile()).thenReturn((double) TimeUnit.MILLISECONDS.toNanos(1000));\n\n        when(timer.getSnapshot()).thenReturn(snapshot);\n\n        reporter.report(map(),\n                map(),\n                map(),\n                map(),\n                map(\"test.another.timer\", timer));\n\n        assertThat(fileContents(\"test.another.timer.csv\"))\n                .isEqualTo(csv(\n                        \"t,count,max,mean,min,stddev,p50,p75,p95,p98,p99,p999,mean_rate,m1_rate,m5_rate,m15_rate,rate_unit,duration_unit\",\n                        \"19910191,1,100.000000,200.000000,300.000000,400.000000,500.000000,600.000000,700.000000,800.000000,900.000000,1000.000000,2.000000,3.000000,4.000000,5.000000,calls/second,milliseconds\"\n                ));\n    }", "signature": "void reportsTimerValues()", "full_signature": "@Test public void reportsTimerValues()", "class_method_signature": "CsvReporterTest.reportsTimerValues()", "testcase": true, "constructor": false, "invocations": ["mock", "thenReturn", "when", "getCount", "thenReturn", "when", "getMeanRate", "thenReturn", "when", "getOneMinuteRate", "thenReturn", "when", "getFiveMinuteRate", "thenReturn", "when", "getFifteenMinuteRate", "mock", "thenReturn", "when", "getMax", "toNanos", "thenReturn", "when", "getMean", "toNanos", "thenReturn", "when", "getMin", "toNanos", "thenReturn", "when", "getStdDev", "toNanos", "thenReturn", "when", "getMedian", "toNanos", "thenReturn", "when", "get75thPercentile", "toNanos", "thenReturn", "when", "get95thPercentile", "toNanos", "thenReturn", "when", "get98thPercentile", "toNanos", "thenReturn", "when", "get99thPercentile", "toNanos", "thenReturn", "when", "get999thPercentile", "toNanos", "thenReturn", "when", "getSnapshot", "report", "map", "map", "map", "map", "map", "isEqualTo", "assertThat", "fileContents", "csv"]}, "focal_class": {"identifier": "CsvReporter", "superclass": "extends ScheduledReporter", "interfaces": "", "fields": [{"original_string": "private static final String DEFAULT_SEPARATOR = \",\";", "modifier": "private static final", "type": "String", "declarator": "DEFAULT_SEPARATOR = \",\"", "var_name": "DEFAULT_SEPARATOR"}, {"original_string": "private static final Logger LOGGER = LoggerFactory.getLogger(CsvReporter.class);", "modifier": "private static final", "type": "Logger", "declarator": "LOGGER = LoggerFactory.getLogger(CsvReporter.class)", "var_name": "LOGGER"}, {"original_string": "private final File directory;", "modifier": "private final", "type": "File", "declarator": "directory", "var_name": "directory"}, {"original_string": "private final Locale locale;", "modifier": "private final", "type": "Locale", "declarator": "locale", "var_name": "locale"}, {"original_string": "private final String separator;", "modifier": "private final", "type": "String", "declarator": "separator", "var_name": "separator"}, {"original_string": "private final Clock clock;", "modifier": "private final", "type": "Clock", "declarator": "clock", "var_name": "clock"}, {"original_string": "private final CsvFileProvider csvFileProvider;", "modifier": "private final", "type": "CsvFileProvider", "declarator": "csvFileProvider", "var_name": "csvFileProvider"}, {"original_string": "private final String histogramFormat;", "modifier": "private final", "type": "String", "declarator": "histogramFormat", "var_name": "histogramFormat"}, {"original_string": "private final String meterFormat;", "modifier": "private final", "type": "String", "declarator": "meterFormat", "var_name": "meterFormat"}, {"original_string": "private final String timerFormat;", "modifier": "private final", "type": "String", "declarator": "timerFormat", "var_name": "timerFormat"}], "methods": [{"identifier": "forRegistry", "parameters": "(MetricRegistry registry)", "modifiers": "public static", "return": "Builder", "signature": "Builder forRegistry(MetricRegistry registry)", "full_signature": "public static Builder forRegistry(MetricRegistry registry)", "class_method_signature": "CsvReporter.forRegistry(MetricRegistry registry)", "testcase": false, "constructor": false}, {"identifier": "CsvReporter", "parameters": "(MetricRegistry registry,\n                        File directory,\n                        Locale locale,\n                        String separator,\n                        TimeUnit rateUnit,\n                        TimeUnit durationUnit,\n                        Clock clock,\n                        MetricFilter filter,\n                        ScheduledExecutorService executor,\n                        boolean shutdownExecutorOnStop,\n                        CsvFileProvider csvFileProvider)", "modifiers": "private", "return": "", "signature": " CsvReporter(MetricRegistry registry,\n                        File directory,\n                        Locale locale,\n                        String separator,\n                        TimeUnit rateUnit,\n                        TimeUnit durationUnit,\n                        Clock clock,\n                        MetricFilter filter,\n                        ScheduledExecutorService executor,\n                        boolean shutdownExecutorOnStop,\n                        CsvFileProvider csvFileProvider)", "full_signature": "private  CsvReporter(MetricRegistry registry,\n                        File directory,\n                        Locale locale,\n                        String separator,\n                        TimeUnit rateUnit,\n                        TimeUnit durationUnit,\n                        Clock clock,\n                        MetricFilter filter,\n                        ScheduledExecutorService executor,\n                        boolean shutdownExecutorOnStop,\n                        CsvFileProvider csvFileProvider)", "class_method_signature": "CsvReporter.CsvReporter(MetricRegistry registry,\n                        File directory,\n                        Locale locale,\n                        String separator,\n                        TimeUnit rateUnit,\n                        TimeUnit durationUnit,\n                        Clock clock,\n                        MetricFilter filter,\n                        ScheduledExecutorService executor,\n                        boolean shutdownExecutorOnStop,\n                        CsvFileProvider csvFileProvider)", "testcase": false, "constructor": true}, {"identifier": "report", "parameters": "(SortedMap<String, Gauge> gauges,\n                       SortedMap<String, Counter> counters,\n                       SortedMap<String, Histogram> histograms,\n                       SortedMap<String, Meter> meters,\n                       SortedMap<String, Timer> timers)", "modifiers": "@Override @SuppressWarnings(\"rawtypes\") public", "return": "void", "signature": "void report(SortedMap<String, Gauge> gauges,\n                       SortedMap<String, Counter> counters,\n                       SortedMap<String, Histogram> histograms,\n                       SortedMap<String, Meter> meters,\n                       SortedMap<String, Timer> timers)", "full_signature": "@Override @SuppressWarnings(\"rawtypes\") public void report(SortedMap<String, Gauge> gauges,\n                       SortedMap<String, Counter> counters,\n                       SortedMap<String, Histogram> histograms,\n                       SortedMap<String, Meter> meters,\n                       SortedMap<String, Timer> timers)", "class_method_signature": "CsvReporter.report(SortedMap<String, Gauge> gauges,\n                       SortedMap<String, Counter> counters,\n                       SortedMap<String, Histogram> histograms,\n                       SortedMap<String, Meter> meters,\n                       SortedMap<String, Timer> timers)", "testcase": false, "constructor": false}, {"identifier": "reportTimer", "parameters": "(long timestamp, String name, Timer timer)", "modifiers": "private", "return": "void", "signature": "void reportTimer(long timestamp, String name, Timer timer)", "full_signature": "private void reportTimer(long timestamp, String name, Timer timer)", "class_method_signature": "CsvReporter.reportTimer(long timestamp, String name, Timer timer)", "testcase": false, "constructor": false}, {"identifier": "reportMeter", "parameters": "(long timestamp, String name, Meter meter)", "modifiers": "private", "return": "void", "signature": "void reportMeter(long timestamp, String name, Meter meter)", "full_signature": "private void reportMeter(long timestamp, String name, Meter meter)", "class_method_signature": "CsvReporter.reportMeter(long timestamp, String name, Meter meter)", "testcase": false, "constructor": false}, {"identifier": "reportHistogram", "parameters": "(long timestamp, String name, Histogram histogram)", "modifiers": "private", "return": "void", "signature": "void reportHistogram(long timestamp, String name, Histogram histogram)", "full_signature": "private void reportHistogram(long timestamp, String name, Histogram histogram)", "class_method_signature": "CsvReporter.reportHistogram(long timestamp, String name, Histogram histogram)", "testcase": false, "constructor": false}, {"identifier": "reportCounter", "parameters": "(long timestamp, String name, Counter counter)", "modifiers": "private", "return": "void", "signature": "void reportCounter(long timestamp, String name, Counter counter)", "full_signature": "private void reportCounter(long timestamp, String name, Counter counter)", "class_method_signature": "CsvReporter.reportCounter(long timestamp, String name, Counter counter)", "testcase": false, "constructor": false}, {"identifier": "reportGauge", "parameters": "(long timestamp, String name, Gauge<?> gauge)", "modifiers": "private", "return": "void", "signature": "void reportGauge(long timestamp, String name, Gauge<?> gauge)", "full_signature": "private void reportGauge(long timestamp, String name, Gauge<?> gauge)", "class_method_signature": "CsvReporter.reportGauge(long timestamp, String name, Gauge<?> gauge)", "testcase": false, "constructor": false}, {"identifier": "report", "parameters": "(long timestamp, String name, String header, String line, Object... values)", "modifiers": "private", "return": "void", "signature": "void report(long timestamp, String name, String header, String line, Object... values)", "full_signature": "private void report(long timestamp, String name, String header, String line, Object... values)", "class_method_signature": "CsvReporter.report(long timestamp, String name, String header, String line, Object... values)", "testcase": false, "constructor": false}, {"identifier": "sanitize", "parameters": "(String name)", "modifiers": "protected", "return": "String", "signature": "String sanitize(String name)", "full_signature": "protected String sanitize(String name)", "class_method_signature": "CsvReporter.sanitize(String name)", "testcase": false, "constructor": false}], "file": "metrics-core/src/main/java/com/codahale/metrics/CsvReporter.java"}, "focal_method": {"identifier": "report", "parameters": "(SortedMap<String, Gauge> gauges,\n                       SortedMap<String, Counter> counters,\n                       SortedMap<String, Histogram> histograms,\n                       SortedMap<String, Meter> meters,\n                       SortedMap<String, Timer> timers)", "modifiers": "@Override @SuppressWarnings(\"rawtypes\") public", "return": "void", "body": "@Override\n    @SuppressWarnings(\"rawtypes\")\n    public void report(SortedMap<String, Gauge> gauges,\n                       SortedMap<String, Counter> counters,\n                       SortedMap<String, Histogram> histograms,\n                       SortedMap<String, Meter> meters,\n                       SortedMap<String, Timer> timers) {\n        final long timestamp = TimeUnit.MILLISECONDS.toSeconds(clock.getTime());\n\n        for (Map.Entry<String, Gauge> entry : gauges.entrySet()) {\n            reportGauge(timestamp, entry.getKey(), entry.getValue());\n        }\n\n        for (Map.Entry<String, Counter> entry : counters.entrySet()) {\n            reportCounter(timestamp, entry.getKey(), entry.getValue());\n        }\n\n        for (Map.Entry<String, Histogram> entry : histograms.entrySet()) {\n            reportHistogram(timestamp, entry.getKey(), entry.getValue());\n        }\n\n        for (Map.Entry<String, Meter> entry : meters.entrySet()) {\n            reportMeter(timestamp, entry.getKey(), entry.getValue());\n        }\n\n        for (Map.Entry<String, Timer> entry : timers.entrySet()) {\n            reportTimer(timestamp, entry.getKey(), entry.getValue());\n        }\n    }", "signature": "void report(SortedMap<String, Gauge> gauges,\n                       SortedMap<String, Counter> counters,\n                       SortedMap<String, Histogram> histograms,\n                       SortedMap<String, Meter> meters,\n                       SortedMap<String, Timer> timers)", "full_signature": "@Override @SuppressWarnings(\"rawtypes\") public void report(SortedMap<String, Gauge> gauges,\n                       SortedMap<String, Counter> counters,\n                       SortedMap<String, Histogram> histograms,\n                       SortedMap<String, Meter> meters,\n                       SortedMap<String, Timer> timers)", "class_method_signature": "CsvReporter.report(SortedMap<String, Gauge> gauges,\n                       SortedMap<String, Counter> counters,\n                       SortedMap<String, Histogram> histograms,\n                       SortedMap<String, Meter> meters,\n                       SortedMap<String, Timer> timers)", "testcase": false, "constructor": false, "invocations": ["toSeconds", "getTime", "entrySet", "reportGauge", "getKey", "getValue", "entrySet", "reportCounter", "getKey", "getValue", "entrySet", "reportHistogram", "getKey", "getValue", "entrySet", "reportMeter", "getKey", "getValue", "entrySet", "reportTimer", "getKey", "getValue"]}, "repository": {"repo_id": 537800, "url": "https://github.com/dropwizard/metrics", "stars": 6879, "created": "2/26/2010 7:44:42 PM +00:00", "updates": "2020-01-26T22:33:14+00:00", "fork": "False", "license": "licensed"}}