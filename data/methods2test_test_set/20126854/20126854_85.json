{"test_class": {"identifier": "BsDiffTest", "superclass": "", "interfaces": "", "fields": [], "file": "feya/libraries/archive_diff/diff.generator/src/test/java/com/google/archivepatcher/generator/bsdiff/BsDiffTest.java"}, "test_case": {"identifier": "searchForMatchBaseCaseShortGroupArrayTest", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n  public void searchForMatchBaseCaseShortGroupArrayTest() throws IOException {\n    final String s1 = \"asdf;1234;this should match;5678\";\n    final String s2 = \"hkjl.9999.00vbn,``'=-this should match.9900-mmmnmn,,,.x??'\";\n    final byte[] s1b = s1.getBytes(Charset.forName(\"US-ASCII\"));\n    final byte[] s2b = s2.getBytes(Charset.forName(\"US-ASCII\"));\n    final RandomAccessObject s1ro = new RandomAccessObject.RandomAccessByteArrayObject(s1b);\n    final RandomAccessObject s2ro = new RandomAccessObject.RandomAccessByteArrayObject(s2b);\n    final RandomAccessObject groupArrayRO =\n        intArrayToRandomAccessObject(BsDiffTestData.SHORT_GROUP_ARRAY);\n\n    BsDiff.Match ret = BsDiff.searchForMatchBaseCase(groupArrayRO, s1ro, s2ro, 0, 0, 12);\n    Assert.assertEquals(0, ret.length);\n    Assert.assertEquals(12, ret.start);\n\n    ret = BsDiff.searchForMatchBaseCase(groupArrayRO, s1ro, s2ro, 0, 9, 10);\n    Assert.assertEquals(0, ret.length);\n    Assert.assertEquals(10, ret.start);\n  }", "signature": "void searchForMatchBaseCaseShortGroupArrayTest()", "full_signature": "@Test public void searchForMatchBaseCaseShortGroupArrayTest()", "class_method_signature": "BsDiffTest.searchForMatchBaseCaseShortGroupArrayTest()", "testcase": true, "constructor": false, "invocations": ["getBytes", "forName", "getBytes", "forName", "intArrayToRandomAccessObject", "searchForMatchBaseCase", "assertEquals", "assertEquals", "searchForMatchBaseCase", "assertEquals", "assertEquals"]}, "focal_class": {"identifier": "BsDiff", "superclass": "", "interfaces": "", "fields": [], "methods": [{"identifier": "lengthOfMatch", "parameters": "(\n      final RandomAccessObject oldData,\n      final int oldStart,\n      final RandomAccessObject newData,\n      final int newStart)", "modifiers": "static", "return": "int", "signature": "int lengthOfMatch(\n      final RandomAccessObject oldData,\n      final int oldStart,\n      final RandomAccessObject newData,\n      final int newStart)", "full_signature": "static int lengthOfMatch(\n      final RandomAccessObject oldData,\n      final int oldStart,\n      final RandomAccessObject newData,\n      final int newStart)", "class_method_signature": "BsDiff.lengthOfMatch(\n      final RandomAccessObject oldData,\n      final int oldStart,\n      final RandomAccessObject newData,\n      final int newStart)", "testcase": false, "constructor": false}, {"identifier": "searchForMatchBaseCase", "parameters": "(\n      final RandomAccessObject groupArray,\n      final RandomAccessObject oldData,\n      final RandomAccessObject newData,\n      final int newStart,\n      final int oldDataRangeStartA,\n      final int oldDataRangeStartB)", "modifiers": "static", "return": "Match", "signature": "Match searchForMatchBaseCase(\n      final RandomAccessObject groupArray,\n      final RandomAccessObject oldData,\n      final RandomAccessObject newData,\n      final int newStart,\n      final int oldDataRangeStartA,\n      final int oldDataRangeStartB)", "full_signature": "static Match searchForMatchBaseCase(\n      final RandomAccessObject groupArray,\n      final RandomAccessObject oldData,\n      final RandomAccessObject newData,\n      final int newStart,\n      final int oldDataRangeStartA,\n      final int oldDataRangeStartB)", "class_method_signature": "BsDiff.searchForMatchBaseCase(\n      final RandomAccessObject groupArray,\n      final RandomAccessObject oldData,\n      final RandomAccessObject newData,\n      final int newStart,\n      final int oldDataRangeStartA,\n      final int oldDataRangeStartB)", "testcase": false, "constructor": false}, {"identifier": "searchForMatch", "parameters": "(\n      final RandomAccessObject groupArray,\n      final RandomAccessObject oldData,\n      final RandomAccessObject newData,\n      final int newStart,\n      final int oldDataRangeStartA,\n      final int oldDataRangeStartB)", "modifiers": "static", "return": "Match", "signature": "Match searchForMatch(\n      final RandomAccessObject groupArray,\n      final RandomAccessObject oldData,\n      final RandomAccessObject newData,\n      final int newStart,\n      final int oldDataRangeStartA,\n      final int oldDataRangeStartB)", "full_signature": "static Match searchForMatch(\n      final RandomAccessObject groupArray,\n      final RandomAccessObject oldData,\n      final RandomAccessObject newData,\n      final int newStart,\n      final int oldDataRangeStartA,\n      final int oldDataRangeStartB)", "class_method_signature": "BsDiff.searchForMatch(\n      final RandomAccessObject groupArray,\n      final RandomAccessObject oldData,\n      final RandomAccessObject newData,\n      final int newStart,\n      final int oldDataRangeStartA,\n      final int oldDataRangeStartB)", "testcase": false, "constructor": false}], "file": "feya/libraries/archive_diff/diff.generator/src/main/java/com/google/archivepatcher/generator/bsdiff/BsDiff.java"}, "focal_method": {"identifier": "searchForMatchBaseCase", "parameters": "(\n      final RandomAccessObject groupArray,\n      final RandomAccessObject oldData,\n      final RandomAccessObject newData,\n      final int newStart,\n      final int oldDataRangeStartA,\n      final int oldDataRangeStartB)", "modifiers": "static", "return": "Match", "body": "static Match searchForMatchBaseCase(\n      final RandomAccessObject groupArray,\n      final RandomAccessObject oldData,\n      final RandomAccessObject newData,\n      final int newStart,\n      final int oldDataRangeStartA,\n      final int oldDataRangeStartB)\n      throws IOException {\n    // Located the start of a matching range (no further search required) or the size of the range\n    // has shrunk to one byte (no further search possible).\n    groupArray.seekToIntAligned(oldDataRangeStartA);\n    final int groupArrayOldDataRangeStartA = groupArray.readInt();\n    final int lengthOfMatchA =\n        lengthOfMatch(oldData, groupArrayOldDataRangeStartA, newData, newStart);\n    groupArray.seekToIntAligned(oldDataRangeStartB);\n    final int groupArrayOldDataRangeStartB = groupArray.readInt();\n    final int lengthOfMatchB =\n        lengthOfMatch(oldData, groupArrayOldDataRangeStartB, newData, newStart);\n\n    if (lengthOfMatchA > lengthOfMatchB) {\n      return Match.of(groupArrayOldDataRangeStartA, lengthOfMatchA);\n    }\n\n    return Match.of(groupArrayOldDataRangeStartB, lengthOfMatchB);\n  }", "signature": "Match searchForMatchBaseCase(\n      final RandomAccessObject groupArray,\n      final RandomAccessObject oldData,\n      final RandomAccessObject newData,\n      final int newStart,\n      final int oldDataRangeStartA,\n      final int oldDataRangeStartB)", "full_signature": "static Match searchForMatchBaseCase(\n      final RandomAccessObject groupArray,\n      final RandomAccessObject oldData,\n      final RandomAccessObject newData,\n      final int newStart,\n      final int oldDataRangeStartA,\n      final int oldDataRangeStartB)", "class_method_signature": "BsDiff.searchForMatchBaseCase(\n      final RandomAccessObject groupArray,\n      final RandomAccessObject oldData,\n      final RandomAccessObject newData,\n      final int newStart,\n      final int oldDataRangeStartA,\n      final int oldDataRangeStartB)", "testcase": false, "constructor": false, "invocations": ["seekToIntAligned", "readInt", "lengthOfMatch", "seekToIntAligned", "readInt", "lengthOfMatch", "of", "of"]}, "repository": {"repo_id": 20126854, "url": "https://github.com/kaedea/Feya", "language": "Java", "is_fork": false, "fork_count": 1, "stargazer_count": 12, "size": 7798, "license": "licensed"}}