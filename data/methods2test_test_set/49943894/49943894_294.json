{"test_class": {"identifier": "NiciraNvpResourceTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "NiciraNvpApi nvpApi = mock(NiciraNvpApi.class);", "modifier": "", "type": "NiciraNvpApi", "declarator": "nvpApi = mock(NiciraNvpApi.class)", "var_name": "nvpApi"}, {"original_string": "NiciraNvpResource resource;", "modifier": "", "type": "NiciraNvpResource", "declarator": "resource", "var_name": "resource"}, {"original_string": "Map<String, Object> parameters;", "modifier": "", "type": "Map<String, Object>", "declarator": "parameters", "var_name": "parameters"}, {"original_string": "private CommandRetryUtility retryUtility;", "modifier": "private", "type": "CommandRetryUtility", "declarator": "retryUtility", "var_name": "retryUtility"}], "file": "plugins/network-elements/nicira-nvp/src/test/java/com/cloud/network/resource/NiciraNvpResourceTest.java"}, "test_case": {"identifier": "testGeneratePortForwardingRulePair", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testGeneratePortForwardingRulePair() {\n        final NatRule[] rules = resource.generatePortForwardingRulePair(\"10.10.10.10\", new int[] { 8080, 8080 }, \"11.11.11.11\", new int[] { 80, 80 }, \"tcp\");\n        assertTrue(\"DestinationNatRule\".equals(rules[0].getType()));\n        assertTrue(\"SourceNatRule\".equals(rules[1].getType()));\n\n        final DestinationNatRule dnr = (DestinationNatRule) rules[0];\n        assertTrue(dnr.getToDestinationIpAddress().equals(\"10.10.10.10\"));\n        assertTrue(dnr.getToDestinationPort() == 8080);\n        assertTrue(dnr.getMatch().getDestinationIpAddresses().equals(\"11.11.11.11\"));\n        assertTrue(dnr.getMatch().getDestinationPort() == 80);\n        assertTrue(dnr.getMatch().getEthertype().equals(\"IPv4\") && dnr.getMatch().getProtocol() == 6);\n\n        final SourceNatRule snr = (SourceNatRule) rules[1];\n        assertTrue(snr.getToSourceIpAddressMin().equals(\"11.11.11.11\") && snr.getToSourceIpAddressMax().equals(\"11.11.11.11\"));\n        assertTrue(snr.getToSourcePort() == 80);\n        assertTrue(snr.getMatch().getSourceIpAddresses().equals(\"10.10.10.10\"));\n        assertTrue(snr.getMatch().getSourcePort() == 8080);\n        assertTrue(snr.getMatch().getEthertype().equals(\"IPv4\") && rules[1].getMatch().getProtocol() == 6);\n    }", "signature": "void testGeneratePortForwardingRulePair()", "full_signature": "@Test public void testGeneratePortForwardingRulePair()", "class_method_signature": "NiciraNvpResourceTest.testGeneratePortForwardingRulePair()", "testcase": true, "constructor": false, "invocations": ["generatePortForwardingRulePair", "assertTrue", "equals", "getType", "assertTrue", "equals", "getType", "assertTrue", "equals", "getToDestinationIpAddress", "assertTrue", "getToDestinationPort", "assertTrue", "equals", "getDestinationIpAddresses", "getMatch", "assertTrue", "getDestinationPort", "getMatch", "assertTrue", "equals", "getEthertype", "getMatch", "getProtocol", "getMatch", "assertTrue", "equals", "getToSourceIpAddressMin", "equals", "getToSourceIpAddressMax", "assertTrue", "getToSourcePort", "assertTrue", "equals", "getSourceIpAddresses", "getMatch", "assertTrue", "getSourcePort", "getMatch", "assertTrue", "equals", "getEthertype", "getMatch", "getProtocol", "getMatch"]}, "focal_class": {"identifier": "NiciraNvpResource", "superclass": "", "interfaces": "implements ServerResource", "fields": [{"original_string": "private static final Logger s_logger = LoggerFactory.getLogger(NiciraNvpResource.class);", "modifier": "private static final", "type": "Logger", "declarator": "s_logger = LoggerFactory.getLogger(NiciraNvpResource.class)", "var_name": "s_logger"}, {"original_string": "public static final int NAME_MAX_LEN = 40;", "modifier": "public static final", "type": "int", "declarator": "NAME_MAX_LEN = 40", "var_name": "NAME_MAX_LEN"}, {"original_string": "public static final int NUM_RETRIES = 2;", "modifier": "public static final", "type": "int", "declarator": "NUM_RETRIES = 2", "var_name": "NUM_RETRIES"}, {"original_string": "private static final int MAX_REDIRECTS = 5;", "modifier": "private static final", "type": "int", "declarator": "MAX_REDIRECTS = 5", "var_name": "MAX_REDIRECTS"}, {"original_string": "private String name;", "modifier": "private", "type": "String", "declarator": "name", "var_name": "name"}, {"original_string": "private String guid;", "modifier": "private", "type": "String", "declarator": "guid", "var_name": "guid"}, {"original_string": "private String zoneId;", "modifier": "private", "type": "String", "declarator": "zoneId", "var_name": "zoneId"}, {"original_string": "private NiciraNvpApi niciraNvpApi;", "modifier": "private", "type": "NiciraNvpApi", "declarator": "niciraNvpApi", "var_name": "niciraNvpApi"}, {"original_string": "private NiciraNvpUtilities niciraNvpUtilities;", "modifier": "private", "type": "NiciraNvpUtilities", "declarator": "niciraNvpUtilities", "var_name": "niciraNvpUtilities"}, {"original_string": "private CommandRetryUtility retryUtility;", "modifier": "private", "type": "CommandRetryUtility", "declarator": "retryUtility", "var_name": "retryUtility"}], "methods": [{"identifier": "createNiciraNvpApi", "parameters": "(final String host, final String username, final String password)", "modifiers": "protected", "return": "NiciraNvpApi", "signature": "NiciraNvpApi createNiciraNvpApi(final String host, final String username, final String password)", "full_signature": "protected NiciraNvpApi createNiciraNvpApi(final String host, final String username, final String password)", "class_method_signature": "NiciraNvpResource.createNiciraNvpApi(final String host, final String username, final String password)", "testcase": false, "constructor": false}, {"identifier": "configure", "parameters": "(final String ignoredName, final Map<String, Object> params)", "modifiers": "@Override public", "return": "boolean", "signature": "boolean configure(final String ignoredName, final Map<String, Object> params)", "full_signature": "@Override public boolean configure(final String ignoredName, final Map<String, Object> params)", "class_method_signature": "NiciraNvpResource.configure(final String ignoredName, final Map<String, Object> params)", "testcase": false, "constructor": false}, {"identifier": "getNiciraNvpApi", "parameters": "()", "modifiers": "public", "return": "NiciraNvpApi", "signature": "NiciraNvpApi getNiciraNvpApi()", "full_signature": "public NiciraNvpApi getNiciraNvpApi()", "class_method_signature": "NiciraNvpResource.getNiciraNvpApi()", "testcase": false, "constructor": false}, {"identifier": "getNiciraNvpUtilities", "parameters": "()", "modifiers": "public", "return": "NiciraNvpUtilities", "signature": "NiciraNvpUtilities getNiciraNvpUtilities()", "full_signature": "public NiciraNvpUtilities getNiciraNvpUtilities()", "class_method_signature": "NiciraNvpResource.getNiciraNvpUtilities()", "testcase": false, "constructor": false}, {"identifier": "getRetryUtility", "parameters": "()", "modifiers": "public", "return": "CommandRetryUtility", "signature": "CommandRetryUtility getRetryUtility()", "full_signature": "public CommandRetryUtility getRetryUtility()", "class_method_signature": "NiciraNvpResource.getRetryUtility()", "testcase": false, "constructor": false}, {"identifier": "start", "parameters": "()", "modifiers": "@Override public", "return": "boolean", "signature": "boolean start()", "full_signature": "@Override public boolean start()", "class_method_signature": "NiciraNvpResource.start()", "testcase": false, "constructor": false}, {"identifier": "stop", "parameters": "()", "modifiers": "@Override public", "return": "boolean", "signature": "boolean stop()", "full_signature": "@Override public boolean stop()", "class_method_signature": "NiciraNvpResource.stop()", "testcase": false, "constructor": false}, {"identifier": "getName", "parameters": "()", "modifiers": "@Override public", "return": "String", "signature": "String getName()", "full_signature": "@Override public String getName()", "class_method_signature": "NiciraNvpResource.getName()", "testcase": false, "constructor": false}, {"identifier": "getType", "parameters": "()", "modifiers": "@Override public", "return": "Type", "signature": "Type getType()", "full_signature": "@Override public Type getType()", "class_method_signature": "NiciraNvpResource.getType()", "testcase": false, "constructor": false}, {"identifier": "initialize", "parameters": "()", "modifiers": "@Override public", "return": "StartupCommand[]", "signature": "StartupCommand[] initialize()", "full_signature": "@Override public StartupCommand[] initialize()", "class_method_signature": "NiciraNvpResource.initialize()", "testcase": false, "constructor": false}, {"identifier": "getCurrentStatus", "parameters": "(final long id)", "modifiers": "@Override public", "return": "PingCommand", "signature": "PingCommand getCurrentStatus(final long id)", "full_signature": "@Override public PingCommand getCurrentStatus(final long id)", "class_method_signature": "NiciraNvpResource.getCurrentStatus(final long id)", "testcase": false, "constructor": false}, {"identifier": "getApiProviderMajorityVersion", "parameters": "(ControlClusterStatus ccs)", "modifiers": "private", "return": "void", "signature": "void getApiProviderMajorityVersion(ControlClusterStatus ccs)", "full_signature": "private void getApiProviderMajorityVersion(ControlClusterStatus ccs)", "class_method_signature": "NiciraNvpResource.getApiProviderMajorityVersion(ControlClusterStatus ccs)", "testcase": false, "constructor": false}, {"identifier": "searchApiProvider", "parameters": "(ClusterRoleConfig[] configuredRoles)", "modifiers": "private", "return": "String", "signature": "String searchApiProvider(ClusterRoleConfig[] configuredRoles)", "full_signature": "private String searchApiProvider(ClusterRoleConfig[] configuredRoles)", "class_method_signature": "NiciraNvpResource.searchApiProvider(ClusterRoleConfig[] configuredRoles)", "testcase": false, "constructor": false}, {"identifier": "executeRequest", "parameters": "(final Command cmd)", "modifiers": "@Override public", "return": "Answer", "signature": "Answer executeRequest(final Command cmd)", "full_signature": "@Override public Answer executeRequest(final Command cmd)", "class_method_signature": "NiciraNvpResource.executeRequest(final Command cmd)", "testcase": false, "constructor": false}, {"identifier": "disconnected", "parameters": "()", "modifiers": "@Override public", "return": "void", "signature": "void disconnected()", "full_signature": "@Override public void disconnected()", "class_method_signature": "NiciraNvpResource.disconnected()", "testcase": false, "constructor": false}, {"identifier": "getAgentControl", "parameters": "()", "modifiers": "@Override public", "return": "IAgentControl", "signature": "IAgentControl getAgentControl()", "full_signature": "@Override public IAgentControl getAgentControl()", "class_method_signature": "NiciraNvpResource.getAgentControl()", "testcase": false, "constructor": false}, {"identifier": "setAgentControl", "parameters": "(final IAgentControl agentControl)", "modifiers": "@Override public", "return": "void", "signature": "void setAgentControl(final IAgentControl agentControl)", "full_signature": "@Override public void setAgentControl(final IAgentControl agentControl)", "class_method_signature": "NiciraNvpResource.setAgentControl(final IAgentControl agentControl)", "testcase": false, "constructor": false}, {"identifier": "natRuleToString", "parameters": "(final NatRule rule)", "modifiers": "public", "return": "String", "signature": "String natRuleToString(final NatRule rule)", "full_signature": "public String natRuleToString(final NatRule rule)", "class_method_signature": "NiciraNvpResource.natRuleToString(final NatRule rule)", "testcase": false, "constructor": false}, {"identifier": "truncate", "parameters": "(final String string, final int length)", "modifiers": "public", "return": "String", "signature": "String truncate(final String string, final int length)", "full_signature": "public String truncate(final String string, final int length)", "class_method_signature": "NiciraNvpResource.truncate(final String string, final int length)", "testcase": false, "constructor": false}, {"identifier": "generateStaticNatRulePair", "parameters": "(final String insideIp, final String outsideIp)", "modifiers": "public", "return": "NatRule[]", "signature": "NatRule[] generateStaticNatRulePair(final String insideIp, final String outsideIp)", "full_signature": "public NatRule[] generateStaticNatRulePair(final String insideIp, final String outsideIp)", "class_method_signature": "NiciraNvpResource.generateStaticNatRulePair(final String insideIp, final String outsideIp)", "testcase": false, "constructor": false}, {"identifier": "generatePortForwardingRulePair", "parameters": "(final String insideIp, final int[] insidePorts, final String outsideIp, final int[] outsidePorts,\n                    final String protocol)", "modifiers": "public", "return": "NatRule[]", "signature": "NatRule[] generatePortForwardingRulePair(final String insideIp, final int[] insidePorts, final String outsideIp, final int[] outsidePorts,\n                    final String protocol)", "full_signature": "public NatRule[] generatePortForwardingRulePair(final String insideIp, final int[] insidePorts, final String outsideIp, final int[] outsidePorts,\n                    final String protocol)", "class_method_signature": "NiciraNvpResource.generatePortForwardingRulePair(final String insideIp, final int[] insidePorts, final String outsideIp, final int[] outsidePorts,\n                    final String protocol)", "testcase": false, "constructor": false}, {"identifier": "setName", "parameters": "(final String name)", "modifiers": "@Override public", "return": "void", "signature": "void setName(final String name)", "full_signature": "@Override public void setName(final String name)", "class_method_signature": "NiciraNvpResource.setName(final String name)", "testcase": false, "constructor": false}, {"identifier": "setConfigParams", "parameters": "(final Map<String, Object> params)", "modifiers": "@Override public", "return": "void", "signature": "void setConfigParams(final Map<String, Object> params)", "full_signature": "@Override public void setConfigParams(final Map<String, Object> params)", "class_method_signature": "NiciraNvpResource.setConfigParams(final Map<String, Object> params)", "testcase": false, "constructor": false}, {"identifier": "getConfigParams", "parameters": "()", "modifiers": "@Override public", "return": "Map<String, Object>", "signature": "Map<String, Object> getConfigParams()", "full_signature": "@Override public Map<String, Object> getConfigParams()", "class_method_signature": "NiciraNvpResource.getConfigParams()", "testcase": false, "constructor": false}, {"identifier": "getRunLevel", "parameters": "()", "modifiers": "@Override public", "return": "int", "signature": "int getRunLevel()", "full_signature": "@Override public int getRunLevel()", "class_method_signature": "NiciraNvpResource.getRunLevel()", "testcase": false, "constructor": false}, {"identifier": "setRunLevel", "parameters": "(final int level)", "modifiers": "@Override public", "return": "void", "signature": "void setRunLevel(final int level)", "full_signature": "@Override public void setRunLevel(final int level)", "class_method_signature": "NiciraNvpResource.setRunLevel(final int level)", "testcase": false, "constructor": false}], "file": "plugins/network-elements/nicira-nvp/src/main/java/com/cloud/network/resource/NiciraNvpResource.java"}, "focal_method": {"identifier": "generatePortForwardingRulePair", "parameters": "(final String insideIp, final int[] insidePorts, final String outsideIp, final int[] outsidePorts,\n                    final String protocol)", "modifiers": "public", "return": "NatRule[]", "body": "public NatRule[] generatePortForwardingRulePair(final String insideIp, final int[] insidePorts, final String outsideIp, final int[] outsidePorts,\n                    final String protocol) {\n        // Start with a basic static nat rule, then add port and protocol details\n        final NatRule[] rulepair = generateStaticNatRulePair(insideIp, outsideIp);\n\n        ((DestinationNatRule) rulepair[0]).setToDestinationPort(insidePorts[0]);\n        rulepair[0].getMatch().setDestinationPort(outsidePorts[0]);\n        rulepair[0].setOrder(50);\n        rulepair[0].getMatch().setEthertype(\"IPv4\");\n        if (\"tcp\".equals(protocol)) {\n            rulepair[0].getMatch().setProtocol(6);\n        } else if (\"udp\".equals(protocol)) {\n            rulepair[0].getMatch().setProtocol(17);\n        }\n\n        ((SourceNatRule) rulepair[1]).setToSourcePort(outsidePorts[0]);\n        rulepair[1].getMatch().setSourcePort(insidePorts[0]);\n        rulepair[1].setOrder(50);\n        rulepair[1].getMatch().setEthertype(\"IPv4\");\n        if (\"tcp\".equals(protocol)) {\n            rulepair[1].getMatch().setProtocol(6);\n        } else if (\"udp\".equals(protocol)) {\n            rulepair[1].getMatch().setProtocol(17);\n        }\n\n        return rulepair;\n\n    }", "signature": "NatRule[] generatePortForwardingRulePair(final String insideIp, final int[] insidePorts, final String outsideIp, final int[] outsidePorts,\n                    final String protocol)", "full_signature": "public NatRule[] generatePortForwardingRulePair(final String insideIp, final int[] insidePorts, final String outsideIp, final int[] outsidePorts,\n                    final String protocol)", "class_method_signature": "NiciraNvpResource.generatePortForwardingRulePair(final String insideIp, final int[] insidePorts, final String outsideIp, final int[] outsidePorts,\n                    final String protocol)", "testcase": false, "constructor": false, "invocations": ["generateStaticNatRulePair", "setToDestinationPort", "setDestinationPort", "getMatch", "setOrder", "setEthertype", "getMatch", "equals", "setProtocol", "getMatch", "equals", "setProtocol", "getMatch", "setToSourcePort", "setSourcePort", "getMatch", "setOrder", "setEthertype", "getMatch", "equals", "setProtocol", "getMatch", "equals", "setProtocol", "getMatch"]}, "repository": {"repo_id": 49943894, "url": "https://github.com/MissionCriticalCloudOldRepos/cosmic-core", "language": "Java", "is_fork": false, "fork_count": 3, "stargazer_count": 9, "size": 18165, "license": "licensed"}}