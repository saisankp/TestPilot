{"test_class": {"identifier": "AbstractZookeeperTransporterTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private TestingServer zkServer;", "modifier": "private", "type": "TestingServer", "declarator": "zkServer", "var_name": "zkServer"}, {"original_string": "private ZookeeperClient zookeeperClient;", "modifier": "private", "type": "ZookeeperClient", "declarator": "zookeeperClient", "var_name": "zookeeperClient"}, {"original_string": "private AbstractZookeeperTransporter abstractZookeeperTransporter;", "modifier": "private", "type": "AbstractZookeeperTransporter", "declarator": "abstractZookeeperTransporter", "var_name": "abstractZookeeperTransporter"}, {"original_string": "private int zkServerPort;", "modifier": "private", "type": "int", "declarator": "zkServerPort", "var_name": "zkServerPort"}], "file": "dubbo-remoting/dubbo-remoting-zookeeper/src/test/java/org/apache/dubbo/remoting/zookeeper/support/AbstractZookeeperTransporterTest.java"}, "test_case": {"identifier": "testGetURLBackupAddress", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testGetURLBackupAddress() {\n        URL url = URL.valueOf(\"zookeeper://127.0.0.1:\" + zkServerPort + \"/org.apache.dubbo.registry.RegistryService?backup=127.0.0.1:\" + 9099 + \"&application=metadatareport-local-xml-provider2&dubbo=2.0.2&interface=org.apache.dubbo.registry.RegistryService&pid=47418&specVersion=2.7.0-SNAPSHOT&timestamp=1547102428828\");\n        List<String> stringList = abstractZookeeperTransporter.getURLBackupAddress(url);\n        Assertions.assertEquals(stringList.size(), 2);\n        Assertions.assertEquals(stringList.get(0), \"127.0.0.1:\" + zkServerPort);\n        Assertions.assertEquals(stringList.get(1), \"127.0.0.1:9099\");\n    }", "signature": "void testGetURLBackupAddress()", "full_signature": "@Test public void testGetURLBackupAddress()", "class_method_signature": "AbstractZookeeperTransporterTest.testGetURLBackupAddress()", "testcase": true, "constructor": false, "invocations": ["valueOf", "getURLBackupAddress", "assertEquals", "size", "assertEquals", "get", "assertEquals", "get"]}, "focal_class": {"identifier": "AbstractZookeeperTransporter", "superclass": "", "interfaces": "implements ZookeeperTransporter", "fields": [{"original_string": "private static final Logger logger = LoggerFactory.getLogger(ZookeeperTransporter.class);", "modifier": "private static final", "type": "Logger", "declarator": "logger = LoggerFactory.getLogger(ZookeeperTransporter.class)", "var_name": "logger"}, {"original_string": "private final Map<String, ZookeeperClient> zookeeperClientMap = new ConcurrentHashMap<>();", "modifier": "private final", "type": "Map<String, ZookeeperClient>", "declarator": "zookeeperClientMap = new ConcurrentHashMap<>()", "var_name": "zookeeperClientMap"}], "methods": [{"identifier": "connect", "parameters": "(URL url)", "modifiers": "@Override public", "return": "ZookeeperClient", "signature": "ZookeeperClient connect(URL url)", "full_signature": "@Override public ZookeeperClient connect(URL url)", "class_method_signature": "AbstractZookeeperTransporter.connect(URL url)", "testcase": false, "constructor": false}, {"identifier": "createZookeeperClient", "parameters": "(URL url)", "modifiers": "protected abstract", "return": "ZookeeperClient", "signature": "ZookeeperClient createZookeeperClient(URL url)", "full_signature": "protected abstract ZookeeperClient createZookeeperClient(URL url)", "class_method_signature": "AbstractZookeeperTransporter.createZookeeperClient(URL url)", "testcase": false, "constructor": false}, {"identifier": "fetchAndUpdateZookeeperClientCache", "parameters": "(List<String> addressList)", "modifiers": "", "return": "ZookeeperClient", "signature": "ZookeeperClient fetchAndUpdateZookeeperClientCache(List<String> addressList)", "full_signature": " ZookeeperClient fetchAndUpdateZookeeperClientCache(List<String> addressList)", "class_method_signature": "AbstractZookeeperTransporter.fetchAndUpdateZookeeperClientCache(List<String> addressList)", "testcase": false, "constructor": false}, {"identifier": "getURLBackupAddress", "parameters": "(URL url)", "modifiers": "", "return": "List<String>", "signature": "List<String> getURLBackupAddress(URL url)", "full_signature": " List<String> getURLBackupAddress(URL url)", "class_method_signature": "AbstractZookeeperTransporter.getURLBackupAddress(URL url)", "testcase": false, "constructor": false}, {"identifier": "writeToClientMap", "parameters": "(List<String> addressList, ZookeeperClient zookeeperClient)", "modifiers": "", "return": "void", "signature": "void writeToClientMap(List<String> addressList, ZookeeperClient zookeeperClient)", "full_signature": " void writeToClientMap(List<String> addressList, ZookeeperClient zookeeperClient)", "class_method_signature": "AbstractZookeeperTransporter.writeToClientMap(List<String> addressList, ZookeeperClient zookeeperClient)", "testcase": false, "constructor": false}, {"identifier": "toClientURL", "parameters": "(URL url)", "modifiers": "", "return": "URL", "signature": "URL toClientURL(URL url)", "full_signature": " URL toClientURL(URL url)", "class_method_signature": "AbstractZookeeperTransporter.toClientURL(URL url)", "testcase": false, "constructor": false}, {"identifier": "getZookeeperClientMap", "parameters": "()", "modifiers": "", "return": "Map<String, ZookeeperClient>", "signature": "Map<String, ZookeeperClient> getZookeeperClientMap()", "full_signature": " Map<String, ZookeeperClient> getZookeeperClientMap()", "class_method_signature": "AbstractZookeeperTransporter.getZookeeperClientMap()", "testcase": false, "constructor": false}], "file": "dubbo-remoting/dubbo-remoting-zookeeper/src/main/java/org/apache/dubbo/remoting/zookeeper/support/AbstractZookeeperTransporter.java"}, "focal_method": {"identifier": "getURLBackupAddress", "parameters": "(URL url)", "modifiers": "", "return": "List<String>", "body": "List<String> getURLBackupAddress(URL url) {\n        List<String> addressList = new ArrayList<String>();\n        addressList.add(url.getAddress());\n        addressList.addAll(url.getParameter(RemotingConstants.BACKUP_KEY, Collections.EMPTY_LIST));\n\n        String authPrefix = null;\n        if (StringUtils.isNotEmpty(url.getUsername())) {\n            StringBuilder buf = new StringBuilder();\n            buf.append(url.getUsername());\n            if (StringUtils.isNotEmpty(url.getPassword())) {\n                buf.append(\":\");\n                buf.append(url.getPassword());\n            }\n            buf.append(\"@\");\n            authPrefix = buf.toString();\n        }\n\n        if (StringUtils.isNotEmpty(authPrefix)) {\n            List<String> authedAddressList = new ArrayList<>(addressList.size());\n            for (String addr : addressList) {\n                authedAddressList.add(authPrefix + addr);\n            }\n            return authedAddressList;\n        }\n\n\n        return addressList;\n    }", "signature": "List<String> getURLBackupAddress(URL url)", "full_signature": " List<String> getURLBackupAddress(URL url)", "class_method_signature": "AbstractZookeeperTransporter.getURLBackupAddress(URL url)", "testcase": false, "constructor": false, "invocations": ["add", "getAddress", "addAll", "getParameter", "isNotEmpty", "getUsername", "append", "getUsername", "isNotEmpty", "getPassword", "append", "append", "getPassword", "append", "toString", "isNotEmpty", "size", "add"]}, "repository": {"repo_id": 4710920, "url": "https://github.com/apache/dubbo", "stars": 30960, "created": "6/19/2012 7:56:02 AM +00:00", "updates": "2020-01-27T14:21:03+00:00", "fork": "False", "license": "licensed"}}