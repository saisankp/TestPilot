{"test_class": {"identifier": "HerdApiClientOperationsTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "@InjectMocks\n    private HerdApiClientOperations herdApiClientOperations;", "modifier": "@InjectMocks\n    private", "type": "HerdApiClientOperations", "declarator": "herdApiClientOperations", "var_name": "herdApiClientOperations"}, {"original_string": "@Mock\n    private PropertiesHelper propertiesHelper;", "modifier": "@Mock\n    private", "type": "PropertiesHelper", "declarator": "propertiesHelper", "var_name": "propertiesHelper"}], "file": "herd-code/herd-tools/herd-access-validator/src/test/java/org/finra/herd/tools/access/validator/HerdApiClientOperationsTest.java"}, "test_case": {"identifier": "testMissingPropertiesSqs", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testMissingPropertiesSqs() throws Exception\n    {\n        String errorMessage = \"\";\n\n        List<String> requiredProperties =\n            Arrays.asList(HERD_BASE_URL_PROPERTY, HERD_USERNAME_PROPERTY, HERD_PASSWORD_PROPERTY, AWS_ROLE_ARN_PROPERTY, AWS_REGION_PROPERTY);\n\n        for (String property : requiredProperties)\n        {\n            when(propertiesHelper.isBlankOrNull(property)).thenReturn(false);\n        }\n\n        try\n        {\n            when(propertiesHelper.isBlankOrNull(AWS_SQS_QUEUE_URL_PROPERTY)).thenReturn(true);\n            herdApiClientOperations.checkPropertiesFile(propertiesHelper, true);\n        }\n        catch (ApiException e)\n        {\n            errorMessage = e.getMessage();\n        }\n\n        System.out.println(errorMessage);\n        for (String property : requiredProperties)\n        {\n            Assert.assertFalse(\"Unexpected error for \" + property, StringUtils.contains(errorMessage, property));\n        }\n\n        Assert.assertTrue(\"Could not find error for \" + AWS_SQS_QUEUE_URL_PROPERTY, StringUtils.contains(errorMessage, AWS_SQS_QUEUE_URL_PROPERTY));\n\n        for (String property : requiredProperties)\n        {\n            verify(propertiesHelper).isBlankOrNull(property);\n        }\n\n        verify(propertiesHelper).isBlankOrNull(AWS_SQS_QUEUE_URL_PROPERTY);\n        verifyNoMoreInteractionsHelper();\n    }", "signature": "void testMissingPropertiesSqs()", "full_signature": "@Test public void testMissingPropertiesSqs()", "class_method_signature": "HerdApiClientOperationsTest.testMissingPropertiesSqs()", "testcase": true, "constructor": false, "invocations": ["asList", "thenReturn", "when", "isBlankOrNull", "thenReturn", "when", "isBlankOrNull", "checkPropertiesFile", "getMessage", "println", "assertFalse", "contains", "assertTrue", "contains", "isBlankOrNull", "verify", "isBlankOrNull", "verify", "verifyNoMoreInteractionsHelper"]}, "focal_class": {"identifier": "HerdApiClientOperations", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final Logger LOGGER = LoggerFactory.getLogger(HerdApiClientOperations.class);", "modifier": "private static final", "type": "Logger", "declarator": "LOGGER = LoggerFactory.getLogger(HerdApiClientOperations.class)", "var_name": "LOGGER"}, {"original_string": "private static final String SEARCH_KEYWORD_1 = \"businessObjectDataKey\";", "modifier": "private static final", "type": "String", "declarator": "SEARCH_KEYWORD_1 = \"businessObjectDataKey\"", "var_name": "SEARCH_KEYWORD_1"}, {"original_string": "private static final String SEARCH_KEYWORD_2 = \"BUS_OBJCT_DATA_STTS_CHG\";", "modifier": "private static final", "type": "String", "declarator": "SEARCH_KEYWORD_2 = \"BUS_OBJCT_DATA_STTS_CHG\"", "var_name": "SEARCH_KEYWORD_2"}, {"original_string": "private static final String JSON_KEY = \"Message\";", "modifier": "private static final", "type": "String", "declarator": "JSON_KEY = \"Message\"", "var_name": "JSON_KEY"}, {"original_string": "private static final int MAX_NUM_MESSAGES = 10;", "modifier": "private static final", "type": "int", "declarator": "MAX_NUM_MESSAGES = 10", "var_name": "MAX_NUM_MESSAGES"}, {"original_string": "private static final int WAIT_TIME_SECS = 1;", "modifier": "private static final", "type": "int", "declarator": "WAIT_TIME_SECS = 1", "var_name": "WAIT_TIME_SECS"}, {"original_string": "private static final int VISIBILITY_TIMEOUT_SECS = 0;", "modifier": "private static final", "type": "int", "declarator": "VISIBILITY_TIMEOUT_SECS = 0", "var_name": "VISIBILITY_TIMEOUT_SECS"}], "methods": [{"identifier": "applicationGetBuildInfo", "parameters": "(ApplicationApi applicationApi)", "modifiers": "", "return": "BuildInformation", "signature": "BuildInformation applicationGetBuildInfo(ApplicationApi applicationApi)", "full_signature": " BuildInformation applicationGetBuildInfo(ApplicationApi applicationApi)", "class_method_signature": "HerdApiClientOperations.applicationGetBuildInfo(ApplicationApi applicationApi)", "testcase": false, "constructor": false}, {"identifier": "businessObjectDataGetBusinessObjectData", "parameters": "(BusinessObjectDataApi businessObjectDataApi, String namespace,\n        String businessObjectDefinitionName, String businessObjectFormatUsage, String businessObjectFormatFileType, String partitionKey, String partitionValue,\n        String subPartitionValues, Integer businessObjectFormatVersion, Integer businessObjectDataVersion, String businessObjectDataStatus,\n        Boolean includeBusinessObjectDataStatusHistory, Boolean includeStorageUnitStatusHistory, Boolean excludeBusinessObjectDataStorageFiles)", "modifiers": "", "return": "BusinessObjectData", "signature": "BusinessObjectData businessObjectDataGetBusinessObjectData(BusinessObjectDataApi businessObjectDataApi, String namespace,\n        String businessObjectDefinitionName, String businessObjectFormatUsage, String businessObjectFormatFileType, String partitionKey, String partitionValue,\n        String subPartitionValues, Integer businessObjectFormatVersion, Integer businessObjectDataVersion, String businessObjectDataStatus,\n        Boolean includeBusinessObjectDataStatusHistory, Boolean includeStorageUnitStatusHistory, Boolean excludeBusinessObjectDataStorageFiles)", "full_signature": " BusinessObjectData businessObjectDataGetBusinessObjectData(BusinessObjectDataApi businessObjectDataApi, String namespace,\n        String businessObjectDefinitionName, String businessObjectFormatUsage, String businessObjectFormatFileType, String partitionKey, String partitionValue,\n        String subPartitionValues, Integer businessObjectFormatVersion, Integer businessObjectDataVersion, String businessObjectDataStatus,\n        Boolean includeBusinessObjectDataStatusHistory, Boolean includeStorageUnitStatusHistory, Boolean excludeBusinessObjectDataStorageFiles)", "class_method_signature": "HerdApiClientOperations.businessObjectDataGetBusinessObjectData(BusinessObjectDataApi businessObjectDataApi, String namespace,\n        String businessObjectDefinitionName, String businessObjectFormatUsage, String businessObjectFormatFileType, String partitionKey, String partitionValue,\n        String subPartitionValues, Integer businessObjectFormatVersion, Integer businessObjectDataVersion, String businessObjectDataStatus,\n        Boolean includeBusinessObjectDataStatusHistory, Boolean includeStorageUnitStatusHistory, Boolean excludeBusinessObjectDataStorageFiles)", "testcase": false, "constructor": false}, {"identifier": "getBdataKeySqs", "parameters": "(AmazonSQS client, String queueUrl)", "modifiers": "@Retryable(value = ApiException.class, backoff = @Backoff(delay = 2000, multiplier = 2))", "return": "BusinessObjectDataKey", "signature": "BusinessObjectDataKey getBdataKeySqs(AmazonSQS client, String queueUrl)", "full_signature": "@Retryable(value = ApiException.class, backoff = @Backoff(delay = 2000, multiplier = 2)) BusinessObjectDataKey getBdataKeySqs(AmazonSQS client, String queueUrl)", "class_method_signature": "HerdApiClientOperations.getBdataKeySqs(AmazonSQS client, String queueUrl)", "testcase": false, "constructor": false}, {"identifier": "mapJsontoBdataKey", "parameters": "(String messageBody)", "modifiers": "", "return": "JsonSqsMessageBody", "signature": "JsonSqsMessageBody mapJsontoBdataKey(String messageBody)", "full_signature": " JsonSqsMessageBody mapJsontoBdataKey(String messageBody)", "class_method_signature": "HerdApiClientOperations.mapJsontoBdataKey(String messageBody)", "testcase": false, "constructor": false}, {"identifier": "checkPropertiesFile", "parameters": "(PropertiesHelper propertiesHelper, Boolean messageFlag)", "modifiers": "", "return": "void", "signature": "void checkPropertiesFile(PropertiesHelper propertiesHelper, Boolean messageFlag)", "full_signature": " void checkPropertiesFile(PropertiesHelper propertiesHelper, Boolean messageFlag)", "class_method_signature": "HerdApiClientOperations.checkPropertiesFile(PropertiesHelper propertiesHelper, Boolean messageFlag)", "testcase": false, "constructor": false}, {"identifier": "currentUserGetCurrentUser", "parameters": "(CurrentUserApi currentUserApi)", "modifiers": "", "return": "UserAuthorizations", "signature": "UserAuthorizations currentUserGetCurrentUser(CurrentUserApi currentUserApi)", "full_signature": " UserAuthorizations currentUserGetCurrentUser(CurrentUserApi currentUserApi)", "class_method_signature": "HerdApiClientOperations.currentUserGetCurrentUser(CurrentUserApi currentUserApi)", "testcase": false, "constructor": false}], "file": "herd-code/herd-tools/herd-access-validator/src/main/java/org/finra/herd/tools/access/validator/HerdApiClientOperations.java"}, "focal_method": {"identifier": "checkPropertiesFile", "parameters": "(PropertiesHelper propertiesHelper, Boolean messageFlag)", "modifiers": "", "return": "void", "body": "void checkPropertiesFile(PropertiesHelper propertiesHelper, Boolean messageFlag) throws ApiException\n    {\n        List<String> requiredProperties =\n            Arrays.asList(HERD_BASE_URL_PROPERTY, HERD_USERNAME_PROPERTY, HERD_PASSWORD_PROPERTY, AWS_ROLE_ARN_PROPERTY, AWS_REGION_PROPERTY);\n        Boolean missingProperty = false;\n        StringBuilder errorMessage = new StringBuilder();\n\n        for (String property : requiredProperties)\n        {\n            if (propertiesHelper.isBlankOrNull(property))\n            {\n                missingProperty = true;\n                errorMessage.append(property);\n                errorMessage.append('\\n');\n            }\n        }\n\n        if (messageFlag)\n        {\n            if (propertiesHelper.isBlankOrNull(AWS_SQS_QUEUE_URL_PROPERTY))\n            {\n                missingProperty = true;\n                errorMessage.append(AWS_SQS_QUEUE_URL_PROPERTY);\n                errorMessage.append('\\n');\n            }\n        }\n        else\n        {\n            requiredProperties = Arrays.asList(NAMESPACE_PROPERTY, BUSINESS_OBJECT_DEFINITION_NAME_PROPERTY, BUSINESS_OBJECT_FORMAT_USAGE_PROPERTY,\n                BUSINESS_OBJECT_FORMAT_FILE_TYPE_PROPERTY, PRIMARY_PARTITION_VALUE_PROPERTY);\n\n            for (String property : requiredProperties)\n            {\n                if (propertiesHelper.isBlankOrNull(property))\n                {\n                    missingProperty = true;\n                    errorMessage.append(property);\n                    errorMessage.append('\\n');\n                }\n            }\n        }\n\n        if (missingProperty)\n        {\n            throw new ApiException(\"The following properties are missing. Please double check case and spelling:\\n\" + errorMessage.toString());\n        }\n    }", "signature": "void checkPropertiesFile(PropertiesHelper propertiesHelper, Boolean messageFlag)", "full_signature": " void checkPropertiesFile(PropertiesHelper propertiesHelper, Boolean messageFlag)", "class_method_signature": "HerdApiClientOperations.checkPropertiesFile(PropertiesHelper propertiesHelper, Boolean messageFlag)", "testcase": false, "constructor": false, "invocations": ["asList", "isBlankOrNull", "append", "append", "isBlankOrNull", "append", "append", "asList", "isBlankOrNull", "append", "append", "toString"]}, "repository": {"repo_id": 42949039, "url": "https://github.com/FINRAOS/herd", "language": "Java", "is_fork": false, "fork_count": 36, "stargazer_count": 120, "size": 205797, "license": "licensed"}}