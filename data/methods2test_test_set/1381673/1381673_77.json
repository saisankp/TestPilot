{"test_class": {"identifier": "MVELExpressionEvaluatorTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "MVELExpressionEvaluator evaluator = new MVELExpressionEvaluator(MVELExpressionEvaluatorTest.class.getClassLoader());", "modifier": "", "type": "MVELExpressionEvaluator", "declarator": "evaluator = new MVELExpressionEvaluator(MVELExpressionEvaluatorTest.class.getClassLoader())", "var_name": "evaluator"}], "file": "drools-scenario-simulation/drools-scenario-simulation-backend/src/test/java/org/drools/scenariosimulation/backend/expression/MVELExpressionEvaluatorTest.java"}, "test_case": {"identifier": "evaluateUnaryExpression", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void evaluateUnaryExpression() {\n        assertTrue(evaluator.evaluateUnaryExpression(mvelExpression(\"java.util.Objects.equals(\" + ACTUAL_VALUE_IDENTIFIER + \", \\\"Test\\\")\"), \"Test\", String.class));\n        assertFalse(evaluator.evaluateUnaryExpression(mvelExpression(\"java.util.Objects.equals(\" + ACTUAL_VALUE_IDENTIFIER + \", \" + \"\\\"Test\\\")\"), \"Test1\", String.class));\n        assertTrue(evaluator.evaluateUnaryExpression(mvelExpression(\"1\"), 1, Integer.class));\n        assertFalse(evaluator.evaluateUnaryExpression(mvelExpression(\"2\"), 1, Integer.class));\n\n        assertTrue(evaluator.evaluateUnaryExpression(mvelExpression(\"\"), null, String.class));\n        assertFalse(evaluator.evaluateUnaryExpression(mvelExpression(\"\"), \"\", String.class));\n\n        assertTrue(evaluator.evaluateUnaryExpression(mvelExpression(null), null, String.class));\n        assertFalse(evaluator.evaluateUnaryExpression(mvelExpression(null), \"null\", String.class));\n\n        assertTrue(evaluator.evaluateUnaryExpression(mvelExpression(\"\\\"\\\"\"), \"\", String.class));\n        assertFalse(evaluator.evaluateUnaryExpression(mvelExpression(null), \"\", String.class));\n\n        assertTrue(evaluator.evaluateUnaryExpression(mvelExpression(ACTUAL_VALUE_IDENTIFIER + \" == 123\"), 123, Integer.class));\n        assertTrue(evaluator.evaluateUnaryExpression(mvelExpression(ACTUAL_VALUE_IDENTIFIER + \" != 123\"), 321, Integer.class));\n        assertFalse(evaluator.evaluateUnaryExpression(mvelExpression(ACTUAL_VALUE_IDENTIFIER + \" == 123\"), 321, Integer.class));\n        assertFalse(evaluator.evaluateUnaryExpression(mvelExpression(ACTUAL_VALUE_IDENTIFIER + \" != 123\"), 123, Integer.class));\n\n        assertThatThrownBy(() -> evaluator.evaluateUnaryExpression(null, \"\", String.class))\n                .isInstanceOf(IllegalArgumentException.class)\n                .hasMessageStartingWith(\"Malformed MVEL expression\");\n    }", "signature": "void evaluateUnaryExpression()", "full_signature": "@Test public void evaluateUnaryExpression()", "class_method_signature": "MVELExpressionEvaluatorTest.evaluateUnaryExpression()", "testcase": true, "constructor": false, "invocations": ["assertTrue", "evaluateUnaryExpression", "mvelExpression", "assertFalse", "evaluateUnaryExpression", "mvelExpression", "assertTrue", "evaluateUnaryExpression", "mvelExpression", "assertFalse", "evaluateUnaryExpression", "mvelExpression", "assertTrue", "evaluateUnaryExpression", "mvelExpression", "assertFalse", "evaluateUnaryExpression", "mvelExpression", "assertTrue", "evaluateUnaryExpression", "mvelExpression", "assertFalse", "evaluateUnaryExpression", "mvelExpression", "assertTrue", "evaluateUnaryExpression", "mvelExpression", "assertFalse", "evaluateUnaryExpression", "mvelExpression", "assertTrue", "evaluateUnaryExpression", "mvelExpression", "assertTrue", "evaluateUnaryExpression", "mvelExpression", "assertFalse", "evaluateUnaryExpression", "mvelExpression", "assertFalse", "evaluateUnaryExpression", "mvelExpression", "hasMessageStartingWith", "isInstanceOf", "assertThatThrownBy", "evaluateUnaryExpression"]}, "focal_class": {"identifier": "MVELExpressionEvaluator", "superclass": "", "interfaces": "implements ExpressionEvaluator", "fields": [{"original_string": "private final ParserConfiguration config;", "modifier": "private final", "type": "ParserConfiguration", "declarator": "config", "var_name": "config"}, {"original_string": "private final MVELEvaluator evaluator = MVELSafeHelper.getEvaluator();", "modifier": "private final", "type": "MVELEvaluator", "declarator": "evaluator = MVELSafeHelper.getEvaluator()", "var_name": "evaluator"}, {"original_string": "private final ClassLoader classLoader;", "modifier": "private final", "type": "ClassLoader", "declarator": "classLoader", "var_name": "classLoader"}], "methods": [{"identifier": "MVELExpressionEvaluator", "parameters": "(ClassLoader classLoader)", "modifiers": "public", "return": "", "signature": " MVELExpressionEvaluator(ClassLoader classLoader)", "full_signature": "public  MVELExpressionEvaluator(ClassLoader classLoader)", "class_method_signature": "MVELExpressionEvaluator.MVELExpressionEvaluator(ClassLoader classLoader)", "testcase": false, "constructor": true}, {"identifier": "evaluateUnaryExpression", "parameters": "(String rawExpression, Object resultValue, Class<?> resultClass)", "modifiers": "@Override public", "return": "boolean", "signature": "boolean evaluateUnaryExpression(String rawExpression, Object resultValue, Class<?> resultClass)", "full_signature": "@Override public boolean evaluateUnaryExpression(String rawExpression, Object resultValue, Class<?> resultClass)", "class_method_signature": "MVELExpressionEvaluator.evaluateUnaryExpression(String rawExpression, Object resultValue, Class<?> resultClass)", "testcase": false, "constructor": false}, {"identifier": "evaluateLiteralExpression", "parameters": "(String rawExpression, String className, List<String> genericClasses)", "modifiers": "@Override public", "return": "Object", "signature": "Object evaluateLiteralExpression(String rawExpression, String className, List<String> genericClasses)", "full_signature": "@Override public Object evaluateLiteralExpression(String rawExpression, String className, List<String> genericClasses)", "class_method_signature": "MVELExpressionEvaluator.evaluateLiteralExpression(String rawExpression, String className, List<String> genericClasses)", "testcase": false, "constructor": false}, {"identifier": "fromObjectToExpression", "parameters": "(Object value)", "modifiers": "@Override public", "return": "String", "signature": "String fromObjectToExpression(Object value)", "full_signature": "@Override public String fromObjectToExpression(Object value)", "class_method_signature": "MVELExpressionEvaluator.fromObjectToExpression(Object value)", "testcase": false, "constructor": false}, {"identifier": "compileAndExecute", "parameters": "(String rawExpression, Map<String, Object> params)", "modifiers": "protected", "return": "Object", "signature": "Object compileAndExecute(String rawExpression, Map<String, Object> params)", "full_signature": "protected Object compileAndExecute(String rawExpression, Map<String, Object> params)", "class_method_signature": "MVELExpressionEvaluator.compileAndExecute(String rawExpression, Map<String, Object> params)", "testcase": false, "constructor": false}, {"identifier": "cleanExpression", "parameters": "(String rawExpression)", "modifiers": "protected", "return": "String", "signature": "String cleanExpression(String rawExpression)", "full_signature": "protected String cleanExpression(String rawExpression)", "class_method_signature": "MVELExpressionEvaluator.cleanExpression(String rawExpression)", "testcase": false, "constructor": false}], "file": "drools-scenario-simulation/drools-scenario-simulation-backend/src/main/java/org/drools/scenariosimulation/backend/expression/MVELExpressionEvaluator.java"}, "focal_method": {"identifier": "evaluateUnaryExpression", "parameters": "(String rawExpression, Object resultValue, Class<?> resultClass)", "modifiers": "@Override public", "return": "boolean", "body": "@Override\n    public boolean evaluateUnaryExpression(String rawExpression, Object resultValue, Class<?> resultClass) {\n        Map<String, Object> params = new HashMap<>();\n        params.put(ACTUAL_VALUE_IDENTIFIER, resultValue);\n\n        Object expressionResult = compileAndExecute(rawExpression, params);\n        if (!(expressionResult instanceof Boolean)) {\n            // try to compare via compare/equals operators\n            return compareValues(expressionResult, resultValue);\n        }\n        return (boolean) expressionResult;\n    }", "signature": "boolean evaluateUnaryExpression(String rawExpression, Object resultValue, Class<?> resultClass)", "full_signature": "@Override public boolean evaluateUnaryExpression(String rawExpression, Object resultValue, Class<?> resultClass)", "class_method_signature": "MVELExpressionEvaluator.evaluateUnaryExpression(String rawExpression, Object resultValue, Class<?> resultClass)", "testcase": false, "constructor": false, "invocations": ["put", "compileAndExecute", "compareValues"]}, "repository": {"repo_id": 1381673, "url": "https://github.com/kiegroup/drools", "stars": 2733, "created": "2/18/2011 8:37:05 AM +00:00", "updates": "2020-01-27T13:12:15+00:00", "fork": "False", "license": "licensed"}}