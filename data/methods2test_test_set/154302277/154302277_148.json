{"test_class": {"identifier": "BundleServiceTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "@InjectMocks\n    private BundleService bundleService;", "modifier": "@InjectMocks\n    private", "type": "BundleService", "declarator": "bundleService", "var_name": "bundleService"}, {"original_string": "private final ActionDtoBuilder builder = new ActionDtoBuilder();", "modifier": "private final", "type": "ActionDtoBuilder", "declarator": "builder = new ActionDtoBuilder()", "var_name": "builder"}, {"original_string": "@Spy\n    private final CommandExecutorMapStub bundleCommandExecutorMap = new CommandExecutorMapStub();", "modifier": "@Spy\n    private final", "type": "CommandExecutorMapStub", "declarator": "bundleCommandExecutorMap = new CommandExecutorMapStub()", "var_name": "bundleCommandExecutorMap"}, {"original_string": "private final List<FaultResponseParameterDto> parameters = new ArrayList<>();", "modifier": "private final", "type": "List<FaultResponseParameterDto>", "declarator": "parameters = new ArrayList<>()", "var_name": "parameters"}, {"original_string": "private final ComponentType defaultComponent = ComponentType.PROTOCOL_DLMS;", "modifier": "private final", "type": "ComponentType", "declarator": "defaultComponent = ComponentType.PROTOCOL_DLMS", "var_name": "defaultComponent"}], "file": "osgp/protocol-adapter-dlms/osgp-protocol-adapter-dlms/src/test/java/org/opensmartgridplatform/adapter/protocol/dlms/application/services/BundleServiceTest.java"}, "test_case": {"identifier": "exceptionDetailsWithDefaultComponentInFaultResponse", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void exceptionDetailsWithDefaultComponentInFaultResponse() throws Exception {\n\n        final String message = \"Unexpected null/unspecified value for M-Bus Capture Time\";\n        final Exception exception = new ProtocolAdapterException(message);\n\n        this.parameters.add(new FaultResponseParameterDto(\"deviceIdentification\", \"ESIM1400000000123\"));\n        this.parameters.add(new FaultResponseParameterDto(\"gasDeviceIdentification\", \"ESIMG140000000841\"));\n        this.parameters.add(new FaultResponseParameterDto(\"channel\", \"3\"));\n\n        final String defaultMessage = \"Unable to handle request\";\n        final FaultResponseDto faultResponse = this.bundleService.faultResponseForException(exception, this.parameters,\n                defaultMessage);\n\n        this.assertResponse(faultResponse, null, defaultMessage, this.defaultComponent.name(),\n                exception.getClass().getName(), message, this.parameters);\n    }", "signature": "void exceptionDetailsWithDefaultComponentInFaultResponse()", "full_signature": "@Test public void exceptionDetailsWithDefaultComponentInFaultResponse()", "class_method_signature": "BundleServiceTest.exceptionDetailsWithDefaultComponentInFaultResponse()", "testcase": true, "constructor": false, "invocations": ["add", "add", "add", "faultResponseForException", "assertResponse", "name", "getName", "getClass"]}, "focal_class": {"identifier": "BundleService", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final Logger LOGGER = LoggerFactory.getLogger(BundleService.class);", "modifier": "private static final", "type": "Logger", "declarator": "LOGGER = LoggerFactory.getLogger(BundleService.class)", "var_name": "LOGGER"}, {"original_string": "@Autowired\n    private CommandExecutorMap bundleCommandExecutorMap;", "modifier": "@Autowired\n    private", "type": "CommandExecutorMap", "declarator": "bundleCommandExecutorMap", "var_name": "bundleCommandExecutorMap"}], "methods": [{"identifier": "callExecutors", "parameters": "(final DlmsConnectionManager conn, final DlmsDevice device,\n            final BundleMessagesRequestDto bundleMessagesRequest)", "modifiers": "public", "return": "BundleMessagesRequestDto", "signature": "BundleMessagesRequestDto callExecutors(final DlmsConnectionManager conn, final DlmsDevice device,\n            final BundleMessagesRequestDto bundleMessagesRequest)", "full_signature": "public BundleMessagesRequestDto callExecutors(final DlmsConnectionManager conn, final DlmsDevice device,\n            final BundleMessagesRequestDto bundleMessagesRequest)", "class_method_signature": "BundleService.callExecutors(final DlmsConnectionManager conn, final DlmsDevice device,\n            final BundleMessagesRequestDto bundleMessagesRequest)", "testcase": false, "constructor": false}, {"identifier": "addFaultResponse", "parameters": "(final ActionDto actionDto, final Exception exception, final String defaultMessage,\n            final DlmsDevice device)", "modifiers": "private", "return": "void", "signature": "void addFaultResponse(final ActionDto actionDto, final Exception exception, final String defaultMessage,\n            final DlmsDevice device)", "full_signature": "private void addFaultResponse(final ActionDto actionDto, final Exception exception, final String defaultMessage,\n            final DlmsDevice device)", "class_method_signature": "BundleService.addFaultResponse(final ActionDto actionDto, final Exception exception, final String defaultMessage,\n            final DlmsDevice device)", "testcase": false, "constructor": false}, {"identifier": "faultResponseForException", "parameters": "(final Exception exception,\n            final List<FaultResponseParameterDto> parameters, final String defaultMessage)", "modifiers": "protected", "return": "FaultResponseDto", "signature": "FaultResponseDto faultResponseForException(final Exception exception,\n            final List<FaultResponseParameterDto> parameters, final String defaultMessage)", "full_signature": "protected FaultResponseDto faultResponseForException(final Exception exception,\n            final List<FaultResponseParameterDto> parameters, final String defaultMessage)", "class_method_signature": "BundleService.faultResponseForException(final Exception exception,\n            final List<FaultResponseParameterDto> parameters, final String defaultMessage)", "testcase": false, "constructor": false}, {"identifier": "faultResponseParametersForList", "parameters": "(\n            final List<FaultResponseParameterDto> parameterList)", "modifiers": "private", "return": "FaultResponseParametersDto", "signature": "FaultResponseParametersDto faultResponseParametersForList(\n            final List<FaultResponseParameterDto> parameterList)", "full_signature": "private FaultResponseParametersDto faultResponseParametersForList(\n            final List<FaultResponseParameterDto> parameterList)", "class_method_signature": "BundleService.faultResponseParametersForList(\n            final List<FaultResponseParameterDto> parameterList)", "testcase": false, "constructor": false}, {"identifier": "faultResponseForFunctionalOrTechnicalException", "parameters": "(final OsgpException exception,\n            final FaultResponseParametersDto faultResponseParameters, final String defaultMessage)", "modifiers": "private", "return": "FaultResponseDto", "signature": "FaultResponseDto faultResponseForFunctionalOrTechnicalException(final OsgpException exception,\n            final FaultResponseParametersDto faultResponseParameters, final String defaultMessage)", "full_signature": "private FaultResponseDto faultResponseForFunctionalOrTechnicalException(final OsgpException exception,\n            final FaultResponseParametersDto faultResponseParameters, final String defaultMessage)", "class_method_signature": "BundleService.faultResponseForFunctionalOrTechnicalException(final OsgpException exception,\n            final FaultResponseParametersDto faultResponseParameters, final String defaultMessage)", "testcase": false, "constructor": false}, {"identifier": "checkIfExecutorExists", "parameters": "(final Class<? extends ActionRequestDto> actionRequestClass,\n            final CommandExecutor<?, ?> executor)", "modifiers": "private", "return": "void", "signature": "void checkIfExecutorExists(final Class<? extends ActionRequestDto> actionRequestClass,\n            final CommandExecutor<?, ?> executor)", "full_signature": "private void checkIfExecutorExists(final Class<? extends ActionRequestDto> actionRequestClass,\n            final CommandExecutor<?, ?> executor)", "class_method_signature": "BundleService.checkIfExecutorExists(final Class<? extends ActionRequestDto> actionRequestClass,\n            final CommandExecutor<?, ?> executor)", "testcase": false, "constructor": false}], "file": "osgp/protocol-adapter-dlms/osgp-protocol-adapter-dlms/src/main/java/org/opensmartgridplatform/adapter/protocol/dlms/application/services/BundleService.java"}, "focal_method": {"identifier": "faultResponseForException", "parameters": "(final Exception exception,\n            final List<FaultResponseParameterDto> parameters, final String defaultMessage)", "modifiers": "protected", "return": "FaultResponseDto", "body": "protected FaultResponseDto faultResponseForException(final Exception exception,\n            final List<FaultResponseParameterDto> parameters, final String defaultMessage) {\n\n        final FaultResponseParametersDto faultResponseParameters = this.faultResponseParametersForList(parameters);\n\n        if (exception instanceof FunctionalException || exception instanceof TechnicalException) {\n            return this\n                    .faultResponseForFunctionalOrTechnicalException((OsgpException) exception, faultResponseParameters,\n                            defaultMessage);\n        }\n\n        return new FaultResponseDto.Builder().withMessage(defaultMessage)\n                                             .withComponent(ComponentType.PROTOCOL_DLMS.name())\n                                             .withInnerException(exception.getClass().getName())\n                                             .withInnerMessage(exception.getMessage())\n                                             .withFaultResponseParameters(faultResponseParameters).build();\n    }", "signature": "FaultResponseDto faultResponseForException(final Exception exception,\n            final List<FaultResponseParameterDto> parameters, final String defaultMessage)", "full_signature": "protected FaultResponseDto faultResponseForException(final Exception exception,\n            final List<FaultResponseParameterDto> parameters, final String defaultMessage)", "class_method_signature": "BundleService.faultResponseForException(final Exception exception,\n            final List<FaultResponseParameterDto> parameters, final String defaultMessage)", "testcase": false, "constructor": false, "invocations": ["faultResponseParametersForList", "faultResponseForFunctionalOrTechnicalException", "build", "withFaultResponseParameters", "withInnerMessage", "withInnerException", "withComponent", "withMessage", "name", "getName", "getClass", "getMessage"]}, "repository": {"repo_id": 154302277, "url": "https://github.com/OSGP/open-smart-grid-platform", "stars": 30, "created": "10/23/2018 9:41:12 AM +00:00", "updates": "2020-01-26T20:15:09+00:00", "fork": "False", "license": "licensed"}}