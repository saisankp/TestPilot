{"test_class": {"identifier": "DeleteAllOperationTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final String USER_DEFINED_COLLECTION_NAME_1 = \"some_collection_1\";", "modifier": "private static final", "type": "String", "declarator": "USER_DEFINED_COLLECTION_NAME_1 = \"some_collection_1\"", "var_name": "USER_DEFINED_COLLECTION_NAME_1"}, {"original_string": "private static final String USER_DEFINED_COLLECTION_NAME_2 = \"some_collection_2\";", "modifier": "private static final", "type": "String", "declarator": "USER_DEFINED_COLLECTION_NAME_2 = \"some_collection_2\"", "var_name": "USER_DEFINED_COLLECTION_NAME_2"}, {"original_string": "@Mock\n    private MongoDatabase connection;", "modifier": "@Mock\n    private", "type": "MongoDatabase", "declarator": "connection", "var_name": "connection"}, {"original_string": "@Mock\n    private MongoCollection<Document> collection;", "modifier": "@Mock\n    private", "type": "MongoCollection<Document>", "declarator": "collection", "var_name": "collection"}, {"original_string": "private DeleteAllOperation operation = new DeleteAllOperation();", "modifier": "private", "type": "DeleteAllOperation", "declarator": "operation = new DeleteAllOperation()", "var_name": "operation"}], "file": "mongodb/src/test/java/eu/drus/jpa/unit/mongodb/operation/DeleteAllOperationTest.java"}, "test_case": {"identifier": "testOperationExecution", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testOperationExecution() {\n        // GIVEN\n        final Document data = new Document().append(USER_DEFINED_COLLECTION_NAME_1, Arrays.asList(new Document()))\n                .append(USER_DEFINED_COLLECTION_NAME_2, Arrays.asList(new Document()));\n\n        // WHEN\n        operation.execute(connection, data);\n\n        // THEN\n        final ArgumentCaptor<String> collectionNameCaptor = ArgumentCaptor.forClass(String.class);\n        verify(connection, times(2)).getCollection(collectionNameCaptor.capture());\n\n        final List<String> capturedCollectionNames = collectionNameCaptor.getAllValues();\n        assertThat(capturedCollectionNames.size(), equalTo(2));\n        assertThat(capturedCollectionNames, hasItems(USER_DEFINED_COLLECTION_NAME_1, USER_DEFINED_COLLECTION_NAME_2));\n\n        verify(collection, times(2)).deleteMany(eq(new Document()));\n    }", "signature": "void testOperationExecution()", "full_signature": "@Test public void testOperationExecution()", "class_method_signature": "DeleteAllOperationTest.testOperationExecution()", "testcase": true, "constructor": false, "invocations": ["append", "append", "asList", "asList", "execute", "forClass", "getCollection", "verify", "times", "capture", "getAllValues", "assertThat", "size", "equalTo", "assertThat", "hasItems", "deleteMany", "verify", "times", "eq"]}, "focal_class": {"identifier": "DeleteAllOperation", "superclass": "", "interfaces": "implements MongoDbOperation", "fields": [], "methods": [{"identifier": "execute", "parameters": "(final MongoDatabase connection, final Document data)", "modifiers": "@Override public", "return": "void", "signature": "void execute(final MongoDatabase connection, final Document data)", "full_signature": "@Override public void execute(final MongoDatabase connection, final Document data)", "class_method_signature": "DeleteAllOperation.execute(final MongoDatabase connection, final Document data)", "testcase": false, "constructor": false}], "file": "mongodb/src/main/java/eu/drus/jpa/unit/mongodb/operation/DeleteAllOperation.java"}, "focal_method": {"identifier": "execute", "parameters": "(final MongoDatabase connection, final Document data)", "modifiers": "@Override public", "return": "void", "body": "@Override\n    public void execute(final MongoDatabase connection, final Document data) {\n        for (final String collectionName : data.keySet()) {\n            final MongoCollection<Document> collection = connection.getCollection(collectionName);\n            collection.deleteMany(new Document());\n        }\n    }", "signature": "void execute(final MongoDatabase connection, final Document data)", "full_signature": "@Override public void execute(final MongoDatabase connection, final Document data)", "class_method_signature": "DeleteAllOperation.execute(final MongoDatabase connection, final Document data)", "testcase": false, "constructor": false, "invocations": ["keySet", "getCollection", "deleteMany"]}, "repository": {"repo_id": 52435170, "url": "https://github.com/dadrus/jpa-unit", "language": "Java", "is_fork": false, "fork_count": 7, "stargazer_count": 24, "size": 1190, "license": "licensed"}}