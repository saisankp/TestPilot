{"test_class": {"identifier": "LunaKeyProxyTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private LunaKeyProxy subject;", "modifier": "private", "type": "LunaKeyProxy", "declarator": "subject", "var_name": "subject"}, {"original_string": "private Key encryptionKey;", "modifier": "private", "type": "Key", "declarator": "encryptionKey", "var_name": "encryptionKey"}, {"original_string": "private EncryptionKeyCanary canary;", "modifier": "private", "type": "EncryptionKeyCanary", "declarator": "canary", "var_name": "canary"}, {"original_string": "private EncryptionKeyCanary deprecatedCanary;", "modifier": "private", "type": "EncryptionKeyCanary", "declarator": "deprecatedCanary", "var_name": "deprecatedCanary"}], "file": "components/encryption/src/test/java/org/cloudfoundry/credhub/services/LunaKeyProxyTest.java"}, "test_case": {"identifier": "isMatchingCanary_WhenDecryptThrowsExceptionWithNoCause_throwsRuntimeException", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n  public void isMatchingCanary_WhenDecryptThrowsExceptionWithNoCause_throwsRuntimeException() throws Exception {\n    subject = new LunaKeyProxy(encryptionKey,\n      new PasswordEncryptionService(new TestPasswordKeyProxyFactory()) {\n        @Override\n        public String decrypt(final Key key, final byte[] encryptedValue, final byte[] nonce) {\n          throw new RuntimeException(\"test message\");\n        }\n      });\n\n    try {\n      subject.matchesCanary(mock(EncryptionKeyCanary.class));\n      fail(\"Expected to get RuntimeException\");\n    } catch (RuntimeException e) {\n      assertThat(e.getCause().getMessage(), equalTo(\"test message\"));\n    }\n  }", "signature": "void isMatchingCanary_WhenDecryptThrowsExceptionWithNoCause_throwsRuntimeException()", "full_signature": "@Test public void isMatchingCanary_WhenDecryptThrowsExceptionWithNoCause_throwsRuntimeException()", "class_method_signature": "LunaKeyProxyTest.isMatchingCanary_WhenDecryptThrowsExceptionWithNoCause_throwsRuntimeException()", "testcase": true, "constructor": false, "invocations": ["matchesCanary", "mock", "fail", "assertThat", "getMessage", "getCause", "equalTo"]}, "focal_class": {"identifier": "LunaKeyProxy", "superclass": "", "interfaces": "implements KeyProxy", "fields": [{"original_string": "private final List<Byte> salt;", "modifier": "private final", "type": "List<Byte>", "declarator": "salt", "var_name": "salt"}, {"original_string": "private final InternalEncryptionService encryptionService;", "modifier": "private final", "type": "InternalEncryptionService", "declarator": "encryptionService", "var_name": "encryptionService"}, {"original_string": "private Key key;", "modifier": "private", "type": "Key", "declarator": "key", "var_name": "key"}], "methods": [{"identifier": "LunaKeyProxy", "parameters": "(final Key key, final InternalEncryptionService encryptionService)", "modifiers": "public", "return": "", "signature": " LunaKeyProxy(final Key key, final InternalEncryptionService encryptionService)", "full_signature": "public  LunaKeyProxy(final Key key, final InternalEncryptionService encryptionService)", "class_method_signature": "LunaKeyProxy.LunaKeyProxy(final Key key, final InternalEncryptionService encryptionService)", "testcase": false, "constructor": true}, {"identifier": "getKey", "parameters": "()", "modifiers": "@Override public", "return": "Key", "signature": "Key getKey()", "full_signature": "@Override public Key getKey()", "class_method_signature": "LunaKeyProxy.getKey()", "testcase": false, "constructor": false}, {"identifier": "setKey", "parameters": "(final Key key)", "modifiers": "public", "return": "void", "signature": "void setKey(final Key key)", "full_signature": "public void setKey(final Key key)", "class_method_signature": "LunaKeyProxy.setKey(final Key key)", "testcase": false, "constructor": false}, {"identifier": "matchesCanary", "parameters": "(final EncryptionKeyCanary canary)", "modifiers": "@Override public", "return": "boolean", "signature": "boolean matchesCanary(final EncryptionKeyCanary canary)", "full_signature": "@Override public boolean matchesCanary(final EncryptionKeyCanary canary)", "class_method_signature": "LunaKeyProxy.matchesCanary(final EncryptionKeyCanary canary)", "testcase": false, "constructor": false}, {"identifier": "matchesCanary", "parameters": "(final Key key, final EncryptionKeyCanary canary)", "modifiers": "protected", "return": "boolean", "signature": "boolean matchesCanary(final Key key, final EncryptionKeyCanary canary)", "full_signature": "protected boolean matchesCanary(final Key key, final EncryptionKeyCanary canary)", "class_method_signature": "LunaKeyProxy.matchesCanary(final Key key, final EncryptionKeyCanary canary)", "testcase": false, "constructor": false}, {"identifier": "errorIsSomethingOtherThanTheKeyBeingIncorrect", "parameters": "(final Exception e)", "modifiers": "private", "return": "boolean", "signature": "boolean errorIsSomethingOtherThanTheKeyBeingIncorrect(final Exception e)", "full_signature": "private boolean errorIsSomethingOtherThanTheKeyBeingIncorrect(final Exception e)", "class_method_signature": "LunaKeyProxy.errorIsSomethingOtherThanTheKeyBeingIncorrect(final Exception e)", "testcase": false, "constructor": false}, {"identifier": "getSalt", "parameters": "()", "modifiers": "@Override public", "return": "List<Byte>", "signature": "List<Byte> getSalt()", "full_signature": "@Override public List<Byte> getSalt()", "class_method_signature": "LunaKeyProxy.getSalt()", "testcase": false, "constructor": false}], "file": "components/encryption/src/main/java/org/cloudfoundry/credhub/services/LunaKeyProxy.java"}, "focal_method": {"identifier": "matchesCanary", "parameters": "(final EncryptionKeyCanary canary)", "modifiers": "@Override public", "return": "boolean", "body": "@Override\n  public boolean matchesCanary(final EncryptionKeyCanary canary) {\n    return matchesCanary(key, canary);\n  }", "signature": "boolean matchesCanary(final EncryptionKeyCanary canary)", "full_signature": "@Override public boolean matchesCanary(final EncryptionKeyCanary canary)", "class_method_signature": "LunaKeyProxy.matchesCanary(final EncryptionKeyCanary canary)", "testcase": false, "constructor": false, "invocations": ["matchesCanary"]}, "repository": {"repo_id": 57061988, "url": "https://github.com/cloudfoundry-incubator/credhub", "stars": 167, "created": "4/25/2016 5:30:51 PM +00:00", "updates": "2020-01-27T21:31:19+00:00", "fork": "False", "license": "licensed"}}