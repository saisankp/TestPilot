{"test_class": {"identifier": "ScheduledJobExecutorTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "@Captor\n    private ArgumentCaptor<ScheduledJobLog> jobLogArgumentCaptor;", "modifier": "@Captor\n    private", "type": "ArgumentCaptor<ScheduledJobLog>", "declarator": "jobLogArgumentCaptor", "var_name": "jobLogArgumentCaptor"}, {"original_string": "@Mock\n    private ScheduledJobLogRepository jobLogRepoMock;", "modifier": "@Mock\n    private", "type": "ScheduledJobLogRepository", "declarator": "jobLogRepoMock", "var_name": "jobLogRepoMock"}, {"original_string": "@Mock\n    private ApplicationContext applicationContextMock;", "modifier": "@Mock\n    private", "type": "ApplicationContext", "declarator": "applicationContextMock", "var_name": "applicationContextMock"}, {"original_string": "@Mock\n    private ScheduledJob jobMock;", "modifier": "@Mock\n    private", "type": "ScheduledJob", "declarator": "jobMock", "var_name": "jobMock"}, {"original_string": "@Mock\n    private ScheduledJob otherJobMock;", "modifier": "@Mock\n    private", "type": "ScheduledJob", "declarator": "otherJobMock", "var_name": "otherJobMock"}, {"original_string": "private Clock clock;", "modifier": "private", "type": "Clock", "declarator": "clock", "var_name": "clock"}, {"original_string": "private ScheduledJobExecutor scheduledJobExecutor;", "modifier": "private", "type": "ScheduledJobExecutor", "declarator": "scheduledJobExecutor", "var_name": "scheduledJobExecutor"}], "file": "backend/project-board/src/test/java/de/adesso/projectboard/base/scheduled/ScheduledJobExecutorTest.java"}, "test_case": {"identifier": "setApplicationContextRegistersAllScheduledJobBeansWithAutoRegistration", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void setApplicationContextRegistersAllScheduledJobBeansWithAutoRegistration() {\n        // given\n        var jobId = \"JOB-MOCK\";\n        var nonAutoRegisteredJob = new NonAutoRegisteredJob();\n        var jobMap =  Map.of(\n                \"bean1\", nonAutoRegisteredJob,\n                \"bean2\", jobMock\n        );\n\n        given(jobMock.getJobIdentifier()).willReturn(jobId);\n        given(applicationContextMock.getBeansOfType(ScheduledJob.class)).willReturn(jobMap);\n\n        // when\n        scheduledJobExecutor.setApplicationContext(applicationContextMock);\n\n        // then\n        assertThat(scheduledJobExecutor.scheduledJobIdMap).containsExactly(Map.entry(jobMock, jobId));\n    }", "signature": "void setApplicationContextRegistersAllScheduledJobBeansWithAutoRegistration()", "full_signature": "@Test public void setApplicationContextRegistersAllScheduledJobBeansWithAutoRegistration()", "class_method_signature": "ScheduledJobExecutorTest.setApplicationContextRegistersAllScheduledJobBeansWithAutoRegistration()", "testcase": true, "constructor": false, "invocations": ["of", "willReturn", "given", "getJobIdentifier", "willReturn", "given", "getBeansOfType", "setApplicationContext", "containsExactly", "assertThat", "entry"]}, "focal_class": {"identifier": "ScheduledJobExecutor", "superclass": "", "interfaces": "implements ApplicationContextAware", "fields": [{"original_string": "private final ScheduledJobLogRepository jobLogRepo;", "modifier": "private final", "type": "ScheduledJobLogRepository", "declarator": "jobLogRepo", "var_name": "jobLogRepo"}, {"original_string": "private final Clock clock;", "modifier": "private final", "type": "Clock", "declarator": "clock", "var_name": "clock"}, {"original_string": "final HashMap<ScheduledJob, String> scheduledJobIdMap;", "modifier": "final", "type": "HashMap<ScheduledJob, String>", "declarator": "scheduledJobIdMap", "var_name": "scheduledJobIdMap"}], "methods": [{"identifier": "ScheduledJobExecutor", "parameters": "(ScheduledJobLogRepository jobLogRepo, Clock clock)", "modifiers": "@Autowired public", "return": "", "signature": " ScheduledJobExecutor(ScheduledJobLogRepository jobLogRepo, Clock clock)", "full_signature": "@Autowired public  ScheduledJobExecutor(ScheduledJobLogRepository jobLogRepo, Clock clock)", "class_method_signature": "ScheduledJobExecutor.ScheduledJobExecutor(ScheduledJobLogRepository jobLogRepo, Clock clock)", "testcase": false, "constructor": true}, {"identifier": "executeJobs", "parameters": "()", "modifiers": "@Scheduled( initialDelay = 0L, fixedDelay = 120_000L ) public", "return": "void", "signature": "void executeJobs()", "full_signature": "@Scheduled( initialDelay = 0L, fixedDelay = 120_000L ) public void executeJobs()", "class_method_signature": "ScheduledJobExecutor.executeJobs()", "testcase": false, "constructor": false}, {"identifier": "execute", "parameters": "(Callable<Void> callable, String jobIdentifier)", "modifiers": "", "return": "void", "signature": "void execute(Callable<Void> callable, String jobIdentifier)", "full_signature": " void execute(Callable<Void> callable, String jobIdentifier)", "class_method_signature": "ScheduledJobExecutor.execute(Callable<Void> callable, String jobIdentifier)", "testcase": false, "constructor": false}, {"identifier": "registerScheduledJob", "parameters": "(@NonNull ScheduledJob scheduledJob)", "modifiers": "public", "return": "void", "signature": "void registerScheduledJob(@NonNull ScheduledJob scheduledJob)", "full_signature": "public void registerScheduledJob(@NonNull ScheduledJob scheduledJob)", "class_method_signature": "ScheduledJobExecutor.registerScheduledJob(@NonNull ScheduledJob scheduledJob)", "testcase": false, "constructor": false}, {"identifier": "setApplicationContext", "parameters": "(ApplicationContext applicationContext)", "modifiers": "@Override public", "return": "void", "signature": "void setApplicationContext(ApplicationContext applicationContext)", "full_signature": "@Override public void setApplicationContext(ApplicationContext applicationContext)", "class_method_signature": "ScheduledJobExecutor.setApplicationContext(ApplicationContext applicationContext)", "testcase": false, "constructor": false}, {"identifier": "shouldAutoRegister", "parameters": "(ScheduledJob scheduledJob)", "modifiers": "", "return": "boolean", "signature": "boolean shouldAutoRegister(ScheduledJob scheduledJob)", "full_signature": " boolean shouldAutoRegister(ScheduledJob scheduledJob)", "class_method_signature": "ScheduledJobExecutor.shouldAutoRegister(ScheduledJob scheduledJob)", "testcase": false, "constructor": false}], "file": "backend/project-board/src/main/java/de/adesso/projectboard/base/scheduled/ScheduledJobExecutor.java"}, "focal_method": {"identifier": "setApplicationContext", "parameters": "(ApplicationContext applicationContext)", "modifiers": "@Override public", "return": "void", "body": "@Override\n    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {\n        var scheduledJobs = applicationContext.getBeansOfType(ScheduledJob.class).values();\n        scheduledJobs.stream()\n                .filter(this::shouldAutoRegister)\n                .forEach(this::registerScheduledJob);\n    }", "signature": "void setApplicationContext(ApplicationContext applicationContext)", "full_signature": "@Override public void setApplicationContext(ApplicationContext applicationContext)", "class_method_signature": "ScheduledJobExecutor.setApplicationContext(ApplicationContext applicationContext)", "testcase": false, "constructor": false, "invocations": ["values", "getBeansOfType", "forEach", "filter", "stream"]}, "repository": {"repo_id": 144251992, "url": "https://github.com/adessoAG/project-board", "language": "Java", "is_fork": false, "fork_count": 1, "stargazer_count": 8, "size": 2608, "license": "licensed"}}