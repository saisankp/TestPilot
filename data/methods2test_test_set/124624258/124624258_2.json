{"test_class": {"identifier": "TasksRepositoryTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private final static String TASK_TITLE = \"title\";", "modifier": "private final static", "type": "String", "declarator": "TASK_TITLE = \"title\"", "var_name": "TASK_TITLE"}, {"original_string": "private final static String TASK_TITLE2 = \"title2\";", "modifier": "private final static", "type": "String", "declarator": "TASK_TITLE2 = \"title2\"", "var_name": "TASK_TITLE2"}, {"original_string": "private final static String TASK_TITLE3 = \"title3\";", "modifier": "private final static", "type": "String", "declarator": "TASK_TITLE3 = \"title3\"", "var_name": "TASK_TITLE3"}, {"original_string": "private static List<Task> TASKS = Lists.newArrayList(new Task(\"Title1\", \"Description1\"),\n            new Task(\"Title2\", \"Description2\"));", "modifier": "private static", "type": "List<Task>", "declarator": "TASKS = Lists.newArrayList(new Task(\"Title1\", \"Description1\"),\n            new Task(\"Title2\", \"Description2\"))", "var_name": "TASKS"}, {"original_string": "private TasksRepository mTasksRepository;", "modifier": "private", "type": "TasksRepository", "declarator": "mTasksRepository", "var_name": "mTasksRepository"}, {"original_string": "private TestSubscriber<List<Task>> mTasksTestSubscriber;", "modifier": "private", "type": "TestSubscriber<List<Task>>", "declarator": "mTasksTestSubscriber", "var_name": "mTasksTestSubscriber"}, {"original_string": "@Mock\n    private TasksDataSource mTasksRemoteDataSource;", "modifier": "@Mock\n    private", "type": "TasksDataSource", "declarator": "mTasksRemoteDataSource", "var_name": "mTasksRemoteDataSource"}, {"original_string": "@Mock\n    private TasksDataSource mTasksLocalDataSource;", "modifier": "@Mock\n    private", "type": "TasksDataSource", "declarator": "mTasksLocalDataSource", "var_name": "mTasksLocalDataSource"}, {"original_string": "@Mock\n    private Context mContext;", "modifier": "@Mock\n    private", "type": "Context", "declarator": "mContext", "var_name": "mContext"}], "file": "data/src/test/java/com/example/data/source/TasksRepositoryTest.java"}, "test_case": {"identifier": "getTasks_requestsAllTasksFromLocalDataSource", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void getTasks_requestsAllTasksFromLocalDataSource() {\n        // Given that the local data source has data available\n        setTasksAvailable(mTasksLocalDataSource, TASKS);\n        // And the remote data source does not have any data available\n        setTasksNotAvailable(mTasksRemoteDataSource);\n\n        // When tasks are requested from the tasks repository\n        mTasksRepository.getTasks().subscribe(mTasksTestSubscriber);\n\n        // Then tasks are loaded from the local data source\n        Mockito.verify(mTasksLocalDataSource).getTasks();\n        mTasksTestSubscriber.assertValue(TASKS);\n    }", "signature": "void getTasks_requestsAllTasksFromLocalDataSource()", "full_signature": "@Test public void getTasks_requestsAllTasksFromLocalDataSource()", "class_method_signature": "TasksRepositoryTest.getTasks_requestsAllTasksFromLocalDataSource()", "testcase": true, "constructor": false, "invocations": ["setTasksAvailable", "setTasksNotAvailable", "subscribe", "getTasks", "getTasks", "verify", "assertValue"]}, "focal_class": {"identifier": "TasksRepository", "superclass": "", "interfaces": "implements TasksDataSource", "fields": [{"original_string": "@Nullable\n    private static TasksRepository INSTANCE = null;", "modifier": "@Nullable\n    private static", "type": "TasksRepository", "declarator": "INSTANCE = null", "var_name": "INSTANCE"}, {"original_string": "@NonNull\n    private final TasksDataSource mTasksRemoteDataSource;", "modifier": "@NonNull\n    private final", "type": "TasksDataSource", "declarator": "mTasksRemoteDataSource", "var_name": "mTasksRemoteDataSource"}, {"original_string": "@NonNull\n    private final TasksDataSource mTasksLocalDataSource;", "modifier": "@NonNull\n    private final", "type": "TasksDataSource", "declarator": "mTasksLocalDataSource", "var_name": "mTasksLocalDataSource"}, {"original_string": "@VisibleForTesting\n    @Nullable\n    Map<String, Task> mCachedTasks;", "modifier": "@VisibleForTesting\n    @Nullable", "type": "Map<String, Task>", "declarator": "mCachedTasks", "var_name": "mCachedTasks"}, {"original_string": "@VisibleForTesting\n    boolean mCacheIsDirty = false;", "modifier": "@VisibleForTesting", "type": "boolean", "declarator": "mCacheIsDirty = false", "var_name": "mCacheIsDirty"}], "methods": [{"identifier": "TasksRepository", "parameters": "(@NonNull TasksDataSource tasksRemoteDataSource,\n                            @NonNull TasksDataSource tasksLocalDataSource)", "modifiers": "private", "return": "", "signature": " TasksRepository(@NonNull TasksDataSource tasksRemoteDataSource,\n                            @NonNull TasksDataSource tasksLocalDataSource)", "full_signature": "private  TasksRepository(@NonNull TasksDataSource tasksRemoteDataSource,\n                            @NonNull TasksDataSource tasksLocalDataSource)", "class_method_signature": "TasksRepository.TasksRepository(@NonNull TasksDataSource tasksRemoteDataSource,\n                            @NonNull TasksDataSource tasksLocalDataSource)", "testcase": false, "constructor": true}, {"identifier": "getInstance", "parameters": "(@NonNull TasksDataSource tasksRemoteDataSource,\n                                              @NonNull TasksDataSource tasksLocalDataSource)", "modifiers": "public static", "return": "TasksRepository", "signature": "TasksRepository getInstance(@NonNull TasksDataSource tasksRemoteDataSource,\n                                              @NonNull TasksDataSource tasksLocalDataSource)", "full_signature": "public static TasksRepository getInstance(@NonNull TasksDataSource tasksRemoteDataSource,\n                                              @NonNull TasksDataSource tasksLocalDataSource)", "class_method_signature": "TasksRepository.getInstance(@NonNull TasksDataSource tasksRemoteDataSource,\n                                              @NonNull TasksDataSource tasksLocalDataSource)", "testcase": false, "constructor": false}, {"identifier": "destroyInstance", "parameters": "()", "modifiers": "public static", "return": "void", "signature": "void destroyInstance()", "full_signature": "public static void destroyInstance()", "class_method_signature": "TasksRepository.destroyInstance()", "testcase": false, "constructor": false}, {"identifier": "getTasks", "parameters": "()", "modifiers": "@Override public", "return": "Flowable<List<Task>>", "signature": "Flowable<List<Task>> getTasks()", "full_signature": "@Override public Flowable<List<Task>> getTasks()", "class_method_signature": "TasksRepository.getTasks()", "testcase": false, "constructor": false}, {"identifier": "getAndCacheLocalTasks", "parameters": "()", "modifiers": "private", "return": "Flowable<List<Task>>", "signature": "Flowable<List<Task>> getAndCacheLocalTasks()", "full_signature": "private Flowable<List<Task>> getAndCacheLocalTasks()", "class_method_signature": "TasksRepository.getAndCacheLocalTasks()", "testcase": false, "constructor": false}, {"identifier": "getAndSaveRemoteTasks", "parameters": "()", "modifiers": "private", "return": "Flowable<List<Task>>", "signature": "Flowable<List<Task>> getAndSaveRemoteTasks()", "full_signature": "private Flowable<List<Task>> getAndSaveRemoteTasks()", "class_method_signature": "TasksRepository.getAndSaveRemoteTasks()", "testcase": false, "constructor": false}, {"identifier": "saveTask", "parameters": "(@NonNull Task task)", "modifiers": "@Override public", "return": "void", "signature": "void saveTask(@NonNull Task task)", "full_signature": "@Override public void saveTask(@NonNull Task task)", "class_method_signature": "TasksRepository.saveTask(@NonNull Task task)", "testcase": false, "constructor": false}, {"identifier": "completeTask", "parameters": "(@NonNull Task task)", "modifiers": "@Override public", "return": "void", "signature": "void completeTask(@NonNull Task task)", "full_signature": "@Override public void completeTask(@NonNull Task task)", "class_method_signature": "TasksRepository.completeTask(@NonNull Task task)", "testcase": false, "constructor": false}, {"identifier": "completeTask", "parameters": "(@NonNull String taskId)", "modifiers": "@Override public", "return": "void", "signature": "void completeTask(@NonNull String taskId)", "full_signature": "@Override public void completeTask(@NonNull String taskId)", "class_method_signature": "TasksRepository.completeTask(@NonNull String taskId)", "testcase": false, "constructor": false}, {"identifier": "activateTask", "parameters": "(@NonNull Task task)", "modifiers": "@Override public", "return": "void", "signature": "void activateTask(@NonNull Task task)", "full_signature": "@Override public void activateTask(@NonNull Task task)", "class_method_signature": "TasksRepository.activateTask(@NonNull Task task)", "testcase": false, "constructor": false}, {"identifier": "activateTask", "parameters": "(@NonNull String taskId)", "modifiers": "@Override public", "return": "void", "signature": "void activateTask(@NonNull String taskId)", "full_signature": "@Override public void activateTask(@NonNull String taskId)", "class_method_signature": "TasksRepository.activateTask(@NonNull String taskId)", "testcase": false, "constructor": false}, {"identifier": "clearCompletedTasks", "parameters": "()", "modifiers": "@Override public", "return": "void", "signature": "void clearCompletedTasks()", "full_signature": "@Override public void clearCompletedTasks()", "class_method_signature": "TasksRepository.clearCompletedTasks()", "testcase": false, "constructor": false}, {"identifier": "getTask", "parameters": "(@NonNull final String taskId)", "modifiers": "@Override public", "return": "Flowable<Optional<Task>>", "signature": "Flowable<Optional<Task>> getTask(@NonNull final String taskId)", "full_signature": "@Override public Flowable<Optional<Task>> getTask(@NonNull final String taskId)", "class_method_signature": "TasksRepository.getTask(@NonNull final String taskId)", "testcase": false, "constructor": false}, {"identifier": "refreshTasks", "parameters": "()", "modifiers": "@Override public", "return": "void", "signature": "void refreshTasks()", "full_signature": "@Override public void refreshTasks()", "class_method_signature": "TasksRepository.refreshTasks()", "testcase": false, "constructor": false}, {"identifier": "deleteAllTasks", "parameters": "()", "modifiers": "@Override public", "return": "void", "signature": "void deleteAllTasks()", "full_signature": "@Override public void deleteAllTasks()", "class_method_signature": "TasksRepository.deleteAllTasks()", "testcase": false, "constructor": false}, {"identifier": "deleteTask", "parameters": "(@NonNull String taskId)", "modifiers": "@Override public", "return": "void", "signature": "void deleteTask(@NonNull String taskId)", "full_signature": "@Override public void deleteTask(@NonNull String taskId)", "class_method_signature": "TasksRepository.deleteTask(@NonNull String taskId)", "testcase": false, "constructor": false}, {"identifier": "getTaskWithId", "parameters": "(@NonNull String id)", "modifiers": "@Nullable private", "return": "Task", "signature": "Task getTaskWithId(@NonNull String id)", "full_signature": "@Nullable private Task getTaskWithId(@NonNull String id)", "class_method_signature": "TasksRepository.getTaskWithId(@NonNull String id)", "testcase": false, "constructor": false}, {"identifier": "getTaskWithIdFromLocalRepository", "parameters": "(@NonNull final String taskId)", "modifiers": "@NonNull", "return": "Flowable<Optional<Task>>", "signature": "Flowable<Optional<Task>> getTaskWithIdFromLocalRepository(@NonNull final String taskId)", "full_signature": "@NonNull Flowable<Optional<Task>> getTaskWithIdFromLocalRepository(@NonNull final String taskId)", "class_method_signature": "TasksRepository.getTaskWithIdFromLocalRepository(@NonNull final String taskId)", "testcase": false, "constructor": false}], "file": "data/src/main/java/com/example/data/source/TasksRepository.java"}, "focal_method": {"identifier": "getTasks", "parameters": "()", "modifiers": "@Override public", "return": "Flowable<List<Task>>", "body": "@Override\n    public Flowable<List<Task>> getTasks() {\n        // Respond immediately with cache if available and not dirty\n        if (mCachedTasks != null && !mCacheIsDirty) {\n            return Flowable.fromIterable(mCachedTasks.values()).toList().toFlowable();\n        } else if (mCachedTasks == null) {\n            mCachedTasks = new LinkedHashMap<>();\n        }\n\n        Flowable<List<Task>> remoteTasks = getAndSaveRemoteTasks();\n\n        if (mCacheIsDirty) {\n            return remoteTasks;\n        } else {\n            // Query the local storage if available. If not, query the network.\n            Flowable<List<Task>> localTasks = getAndCacheLocalTasks();\n            return Flowable.concat(localTasks, remoteTasks)\n                    .filter(tasks -> !tasks.isEmpty())\n                    .firstOrError()\n                    .toFlowable();\n        }\n    }", "signature": "Flowable<List<Task>> getTasks()", "full_signature": "@Override public Flowable<List<Task>> getTasks()", "class_method_signature": "TasksRepository.getTasks()", "testcase": false, "constructor": false, "invocations": ["toFlowable", "toList", "fromIterable", "values", "getAndSaveRemoteTasks", "getAndCacheLocalTasks", "toFlowable", "firstOrError", "filter", "concat", "isEmpty"]}, "repository": {"repo_id": 124624258, "url": "https://github.com/cliveleehere/multimodulegradle", "language": "Java", "is_fork": false, "fork_count": 0, "stargazer_count": 6, "size": 20323, "license": "licensed"}}