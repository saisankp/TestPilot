{"test_class": {"identifier": "MulticastRegistryTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private String service = \"com.alibaba.dubbo.test.injvmServie\";", "modifier": "private", "type": "String", "declarator": "service = \"com.alibaba.dubbo.test.injvmServie\"", "var_name": "service"}, {"original_string": "private URL registryUrl = URL.valueOf(\"multicast://239.255.255.255/\");", "modifier": "private", "type": "URL", "declarator": "registryUrl = URL.valueOf(\"multicast://239.255.255.255/\")", "var_name": "registryUrl"}, {"original_string": "private URL serviceUrl = URL.valueOf(\"dubbo://\" + NetUtils.getLocalHost() + \"/\" + service\n            + \"?methods=test1,test2\");", "modifier": "private", "type": "URL", "declarator": "serviceUrl = URL.valueOf(\"dubbo://\" + NetUtils.getLocalHost() + \"/\" + service\n            + \"?methods=test1,test2\")", "var_name": "serviceUrl"}, {"original_string": "private URL adminUrl = URL.valueOf(\"dubbo://\" + NetUtils.getLocalHost() + \"/*\");", "modifier": "private", "type": "URL", "declarator": "adminUrl = URL.valueOf(\"dubbo://\" + NetUtils.getLocalHost() + \"/*\")", "var_name": "adminUrl"}, {"original_string": "private URL consumerUrl = URL.valueOf(\"subscribe://\" + NetUtils.getLocalHost() + \"/\" + service + \"?arg1=1&arg2=2\");", "modifier": "private", "type": "URL", "declarator": "consumerUrl = URL.valueOf(\"subscribe://\" + NetUtils.getLocalHost() + \"/\" + service + \"?arg1=1&arg2=2\")", "var_name": "consumerUrl"}, {"original_string": "private MulticastRegistry registry = new MulticastRegistry(registryUrl);", "modifier": "private", "type": "MulticastRegistry", "declarator": "registry = new MulticastRegistry(registryUrl)", "var_name": "registry"}], "file": "dubbo-registry/dubbo-registry-multicast/src/test/java/com/alibaba/dubbo/registry/multicast/MulticastRegistryTest.java"}, "test_case": {"identifier": "testSubscribe", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testSubscribe() {\n        // verify lisener.\n        final AtomicReference<URL> args = new AtomicReference<URL>();\n        registry.subscribe(consumerUrl, new NotifyListener() {\n\n            @Override\n            public void notify(List<URL> urls) {\n                // FIXME assertEquals(MulticastRegistry.this.service, service);\n                args.set(urls.get(0));\n            }\n        });\n        assertEquals(serviceUrl.toFullString(), args.get().toFullString());\n        Map<URL, Set<NotifyListener>> arg = registry.getSubscribed();\n        assertEquals(consumerUrl, arg.keySet().iterator().next());\n\n    }", "signature": "void testSubscribe()", "full_signature": "@Test public void testSubscribe()", "class_method_signature": "MulticastRegistryTest.testSubscribe()", "testcase": true, "constructor": false, "invocations": ["subscribe", "set", "get", "assertEquals", "toFullString", "toFullString", "get", "getSubscribed", "assertEquals", "next", "iterator", "keySet"]}, "focal_class": {"identifier": "MulticastRegistry", "superclass": "extends FailbackRegistry", "interfaces": "", "fields": [{"original_string": "private static final Logger logger = LoggerFactory.getLogger(MulticastRegistry.class);", "modifier": "private static final", "type": "Logger", "declarator": "logger = LoggerFactory.getLogger(MulticastRegistry.class)", "var_name": "logger"}, {"original_string": "private static final int DEFAULT_MULTICAST_PORT = 1234;", "modifier": "private static final", "type": "int", "declarator": "DEFAULT_MULTICAST_PORT = 1234", "var_name": "DEFAULT_MULTICAST_PORT"}, {"original_string": "private final InetAddress mutilcastAddress;", "modifier": "private final", "type": "InetAddress", "declarator": "mutilcastAddress", "var_name": "mutilcastAddress"}, {"original_string": "private final MulticastSocket mutilcastSocket;", "modifier": "private final", "type": "MulticastSocket", "declarator": "mutilcastSocket", "var_name": "mutilcastSocket"}, {"original_string": "private final int mutilcastPort;", "modifier": "private final", "type": "int", "declarator": "mutilcastPort", "var_name": "mutilcastPort"}, {"original_string": "private final ConcurrentMap<URL, Set<URL>> received = new ConcurrentHashMap<URL, Set<URL>>();", "modifier": "private final", "type": "ConcurrentMap<URL, Set<URL>>", "declarator": "received = new ConcurrentHashMap<URL, Set<URL>>()", "var_name": "received"}, {"original_string": "private final ScheduledExecutorService cleanExecutor = Executors.newScheduledThreadPool(1, new NamedThreadFactory(\"DubboMulticastRegistryCleanTimer\", true));", "modifier": "private final", "type": "ScheduledExecutorService", "declarator": "cleanExecutor = Executors.newScheduledThreadPool(1, new NamedThreadFactory(\"DubboMulticastRegistryCleanTimer\", true))", "var_name": "cleanExecutor"}, {"original_string": "private final ScheduledFuture<?> cleanFuture;", "modifier": "private final", "type": "ScheduledFuture<?>", "declarator": "cleanFuture", "var_name": "cleanFuture"}, {"original_string": "private final int cleanPeriod;", "modifier": "private final", "type": "int", "declarator": "cleanPeriod", "var_name": "cleanPeriod"}, {"original_string": "private volatile boolean admin = false;", "modifier": "private volatile", "type": "boolean", "declarator": "admin = false", "var_name": "admin"}], "methods": [{"identifier": "MulticastRegistry", "parameters": "(URL url)", "modifiers": "public", "return": "", "signature": " MulticastRegistry(URL url)", "full_signature": "public  MulticastRegistry(URL url)", "class_method_signature": "MulticastRegistry.MulticastRegistry(URL url)", "testcase": false, "constructor": true}, {"identifier": "isMulticastAddress", "parameters": "(String ip)", "modifiers": "private static", "return": "boolean", "signature": "boolean isMulticastAddress(String ip)", "full_signature": "private static boolean isMulticastAddress(String ip)", "class_method_signature": "MulticastRegistry.isMulticastAddress(String ip)", "testcase": false, "constructor": false}, {"identifier": "clean", "parameters": "()", "modifiers": "private", "return": "void", "signature": "void clean()", "full_signature": "private void clean()", "class_method_signature": "MulticastRegistry.clean()", "testcase": false, "constructor": false}, {"identifier": "isExpired", "parameters": "(URL url)", "modifiers": "private", "return": "boolean", "signature": "boolean isExpired(URL url)", "full_signature": "private boolean isExpired(URL url)", "class_method_signature": "MulticastRegistry.isExpired(URL url)", "testcase": false, "constructor": false}, {"identifier": "receive", "parameters": "(String msg, InetSocketAddress remoteAddress)", "modifiers": "private", "return": "void", "signature": "void receive(String msg, InetSocketAddress remoteAddress)", "full_signature": "private void receive(String msg, InetSocketAddress remoteAddress)", "class_method_signature": "MulticastRegistry.receive(String msg, InetSocketAddress remoteAddress)", "testcase": false, "constructor": false}, {"identifier": "broadcast", "parameters": "(String msg)", "modifiers": "private", "return": "void", "signature": "void broadcast(String msg)", "full_signature": "private void broadcast(String msg)", "class_method_signature": "MulticastRegistry.broadcast(String msg)", "testcase": false, "constructor": false}, {"identifier": "unicast", "parameters": "(String msg, String host)", "modifiers": "private", "return": "void", "signature": "void unicast(String msg, String host)", "full_signature": "private void unicast(String msg, String host)", "class_method_signature": "MulticastRegistry.unicast(String msg, String host)", "testcase": false, "constructor": false}, {"identifier": "doRegister", "parameters": "(URL url)", "modifiers": "@Override protected", "return": "void", "signature": "void doRegister(URL url)", "full_signature": "@Override protected void doRegister(URL url)", "class_method_signature": "MulticastRegistry.doRegister(URL url)", "testcase": false, "constructor": false}, {"identifier": "doUnregister", "parameters": "(URL url)", "modifiers": "@Override protected", "return": "void", "signature": "void doUnregister(URL url)", "full_signature": "@Override protected void doUnregister(URL url)", "class_method_signature": "MulticastRegistry.doUnregister(URL url)", "testcase": false, "constructor": false}, {"identifier": "doSubscribe", "parameters": "(URL url, NotifyListener listener)", "modifiers": "@Override protected", "return": "void", "signature": "void doSubscribe(URL url, NotifyListener listener)", "full_signature": "@Override protected void doSubscribe(URL url, NotifyListener listener)", "class_method_signature": "MulticastRegistry.doSubscribe(URL url, NotifyListener listener)", "testcase": false, "constructor": false}, {"identifier": "doUnsubscribe", "parameters": "(URL url, NotifyListener listener)", "modifiers": "@Override protected", "return": "void", "signature": "void doUnsubscribe(URL url, NotifyListener listener)", "full_signature": "@Override protected void doUnsubscribe(URL url, NotifyListener listener)", "class_method_signature": "MulticastRegistry.doUnsubscribe(URL url, NotifyListener listener)", "testcase": false, "constructor": false}, {"identifier": "isAvailable", "parameters": "()", "modifiers": "@Override public", "return": "boolean", "signature": "boolean isAvailable()", "full_signature": "@Override public boolean isAvailable()", "class_method_signature": "MulticastRegistry.isAvailable()", "testcase": false, "constructor": false}, {"identifier": "destroy", "parameters": "()", "modifiers": "@Override public", "return": "void", "signature": "void destroy()", "full_signature": "@Override public void destroy()", "class_method_signature": "MulticastRegistry.destroy()", "testcase": false, "constructor": false}, {"identifier": "registered", "parameters": "(URL url)", "modifiers": "protected", "return": "void", "signature": "void registered(URL url)", "full_signature": "protected void registered(URL url)", "class_method_signature": "MulticastRegistry.registered(URL url)", "testcase": false, "constructor": false}, {"identifier": "unregistered", "parameters": "(URL url)", "modifiers": "protected", "return": "void", "signature": "void unregistered(URL url)", "full_signature": "protected void unregistered(URL url)", "class_method_signature": "MulticastRegistry.unregistered(URL url)", "testcase": false, "constructor": false}, {"identifier": "subscribed", "parameters": "(URL url, NotifyListener listener)", "modifiers": "protected", "return": "void", "signature": "void subscribed(URL url, NotifyListener listener)", "full_signature": "protected void subscribed(URL url, NotifyListener listener)", "class_method_signature": "MulticastRegistry.subscribed(URL url, NotifyListener listener)", "testcase": false, "constructor": false}, {"identifier": "toList", "parameters": "(Set<URL> urls)", "modifiers": "private", "return": "List<URL>", "signature": "List<URL> toList(Set<URL> urls)", "full_signature": "private List<URL> toList(Set<URL> urls)", "class_method_signature": "MulticastRegistry.toList(Set<URL> urls)", "testcase": false, "constructor": false}, {"identifier": "register", "parameters": "(URL url)", "modifiers": "@Override public", "return": "void", "signature": "void register(URL url)", "full_signature": "@Override public void register(URL url)", "class_method_signature": "MulticastRegistry.register(URL url)", "testcase": false, "constructor": false}, {"identifier": "unregister", "parameters": "(URL url)", "modifiers": "@Override public", "return": "void", "signature": "void unregister(URL url)", "full_signature": "@Override public void unregister(URL url)", "class_method_signature": "MulticastRegistry.unregister(URL url)", "testcase": false, "constructor": false}, {"identifier": "subscribe", "parameters": "(URL url, NotifyListener listener)", "modifiers": "@Override public", "return": "void", "signature": "void subscribe(URL url, NotifyListener listener)", "full_signature": "@Override public void subscribe(URL url, NotifyListener listener)", "class_method_signature": "MulticastRegistry.subscribe(URL url, NotifyListener listener)", "testcase": false, "constructor": false}, {"identifier": "unsubscribe", "parameters": "(URL url, NotifyListener listener)", "modifiers": "@Override public", "return": "void", "signature": "void unsubscribe(URL url, NotifyListener listener)", "full_signature": "@Override public void unsubscribe(URL url, NotifyListener listener)", "class_method_signature": "MulticastRegistry.unsubscribe(URL url, NotifyListener listener)", "testcase": false, "constructor": false}, {"identifier": "lookup", "parameters": "(URL url)", "modifiers": "@Override public", "return": "List<URL>", "signature": "List<URL> lookup(URL url)", "full_signature": "@Override public List<URL> lookup(URL url)", "class_method_signature": "MulticastRegistry.lookup(URL url)", "testcase": false, "constructor": false}, {"identifier": "getMutilcastSocket", "parameters": "()", "modifiers": "public", "return": "MulticastSocket", "signature": "MulticastSocket getMutilcastSocket()", "full_signature": "public MulticastSocket getMutilcastSocket()", "class_method_signature": "MulticastRegistry.getMutilcastSocket()", "testcase": false, "constructor": false}, {"identifier": "getReceived", "parameters": "()", "modifiers": "public", "return": "Map<URL, Set<URL>>", "signature": "Map<URL, Set<URL>> getReceived()", "full_signature": "public Map<URL, Set<URL>> getReceived()", "class_method_signature": "MulticastRegistry.getReceived()", "testcase": false, "constructor": false}], "file": "dubbo-registry/dubbo-registry-multicast/src/main/java/com/alibaba/dubbo/registry/multicast/MulticastRegistry.java"}, "focal_method": {"identifier": "subscribe", "parameters": "(URL url, NotifyListener listener)", "modifiers": "@Override public", "return": "void", "body": "@Override\n    public void subscribe(URL url, NotifyListener listener) {\n        super.subscribe(url, listener);\n        subscribed(url, listener);\n    }", "signature": "void subscribe(URL url, NotifyListener listener)", "full_signature": "@Override public void subscribe(URL url, NotifyListener listener)", "class_method_signature": "MulticastRegistry.subscribe(URL url, NotifyListener listener)", "testcase": false, "constructor": false, "invocations": ["subscribe", "subscribed"]}, "repository": {"repo_id": 189562861, "url": "https://github.com/smallFive55/dubbo-dubbo-2.6.6", "language": "Java", "is_fork": false, "fork_count": 11, "stargazer_count": 8, "size": 1428, "license": "licensed"}}