{"test_class": {"identifier": "NiciraRestClientTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final int HTTPS_PORT = 443;", "modifier": "private static final", "type": "int", "declarator": "HTTPS_PORT = 443", "var_name": "HTTPS_PORT"}, {"original_string": "private static final String HTTPS = \"HTTPS\";", "modifier": "private static final", "type": "String", "declarator": "HTTPS = \"HTTPS\"", "var_name": "HTTPS"}, {"original_string": "private static final String LOGIN_PATH = \"/login\";", "modifier": "private static final", "type": "String", "declarator": "LOGIN_PATH = \"/login\"", "var_name": "LOGIN_PATH"}, {"original_string": "private static final String LOCALHOST = \"localhost\";", "modifier": "private static final", "type": "String", "declarator": "LOCALHOST = \"localhost\"", "var_name": "LOCALHOST"}, {"original_string": "private static final String ADMIN = \"admin\";", "modifier": "private static final", "type": "String", "declarator": "ADMIN = \"admin\"", "var_name": "ADMIN"}, {"original_string": "private static final String ADMIN_PASSWORD = \"adminpassword\";", "modifier": "private static final", "type": "String", "declarator": "ADMIN_PASSWORD = \"adminpassword\"", "var_name": "ADMIN_PASSWORD"}, {"original_string": "private static final HttpHost HTTP_HOST = new HttpHost(LOCALHOST, HTTPS_PORT, HTTPS);", "modifier": "private static final", "type": "HttpHost", "declarator": "HTTP_HOST = new HttpHost(LOCALHOST, HTTPS_PORT, HTTPS)", "var_name": "HTTP_HOST"}, {"original_string": "private static final StatusLine HTTP_200_STATUSLINE = new BasicStatusLine(new ProtocolVersion(HTTPS, 1, 1), 200, \"OK\");", "modifier": "private static final", "type": "StatusLine", "declarator": "HTTP_200_STATUSLINE = new BasicStatusLine(new ProtocolVersion(HTTPS, 1, 1), 200, \"OK\")", "var_name": "HTTP_200_STATUSLINE"}, {"original_string": "private static final StatusLine HTTP_401_STATUSLINE = new BasicStatusLine(new ProtocolVersion(HTTPS, 1, 1), 401, \"Unauthorized\");", "modifier": "private static final", "type": "StatusLine", "declarator": "HTTP_401_STATUSLINE = new BasicStatusLine(new ProtocolVersion(HTTPS, 1, 1), 401, \"Unauthorized\")", "var_name": "HTTP_401_STATUSLINE"}, {"original_string": "private static final Map<String, String> loginParameters = new HashMap<String, String>();", "modifier": "private static final", "type": "Map<String, String>", "declarator": "loginParameters = new HashMap<String, String>()", "var_name": "loginParameters"}, {"original_string": "private static HttpUriRequest request;", "modifier": "private static", "type": "HttpUriRequest", "declarator": "request", "var_name": "request"}, {"original_string": "private static HttpUriRequest loginRequest;", "modifier": "private static", "type": "HttpUriRequest", "declarator": "loginRequest", "var_name": "loginRequest"}, {"original_string": "private final CloseableHttpClient httpClient = mock(CloseableHttpClient.class);", "modifier": "private final", "type": "CloseableHttpClient", "declarator": "httpClient = mock(CloseableHttpClient.class)", "var_name": "httpClient"}, {"original_string": "private final CloseableHttpResponse mockResponse = mock(CloseableHttpResponse.class);", "modifier": "private final", "type": "CloseableHttpResponse", "declarator": "mockResponse = mock(CloseableHttpResponse.class)", "var_name": "mockResponse"}, {"original_string": "private HttpClientContext httpClientContext;", "modifier": "private", "type": "HttpClientContext", "declarator": "httpClientContext", "var_name": "httpClientContext"}, {"original_string": "private NiciraRestClient client;", "modifier": "private", "type": "NiciraRestClient", "declarator": "client", "var_name": "client"}], "file": "plugins/network-elements/nicira-nvp/src/test/java/com/cloud/network/nicira/NiciraRestClientTest.java"}, "test_case": {"identifier": "testExecuteSuccessAtFirstAttempt", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testExecuteSuccessAtFirstAttempt() throws Exception {\n        when(mockResponse.getStatusLine()).thenReturn(HTTP_200_STATUSLINE);\n        when(httpClient.execute(eq(HTTP_HOST), eq(request), eq(httpClientContext))).thenReturn(mockResponse);\n\n        final CloseableHttpResponse response = client.execute(request);\n\n        assertThat(response, notNullValue());\n        assertThat(response, sameInstance(mockResponse));\n        verifyPrivate(client).invoke(\"execute\", request, 0);\n    }", "signature": "void testExecuteSuccessAtFirstAttempt()", "full_signature": "@Test public void testExecuteSuccessAtFirstAttempt()", "class_method_signature": "NiciraRestClientTest.testExecuteSuccessAtFirstAttempt()", "testcase": true, "constructor": false, "invocations": ["thenReturn", "when", "getStatusLine", "thenReturn", "when", "execute", "eq", "eq", "eq", "execute", "assertThat", "notNullValue", "assertThat", "sameInstance", "invoke", "verifyPrivate"]}, "focal_class": {"identifier": "NiciraRestClient", "superclass": "extends BasicRestClient", "interfaces": "", "fields": [{"original_string": "private static final Logger s_logger = LoggerFactory.getLogger(NiciraRestClient.class);", "modifier": "private static final", "type": "Logger", "declarator": "s_logger = LoggerFactory.getLogger(NiciraRestClient.class)", "var_name": "s_logger"}, {"original_string": "private static final String CONTENT_TYPE = HttpConstants.CONTENT_TYPE;", "modifier": "private static final", "type": "String", "declarator": "CONTENT_TYPE = HttpConstants.CONTENT_TYPE", "var_name": "CONTENT_TYPE"}, {"original_string": "private static final String TEXT_HTML_CONTENT_TYPE = HttpConstants.TEXT_HTML_CONTENT_TYPE;", "modifier": "private static final", "type": "String", "declarator": "TEXT_HTML_CONTENT_TYPE = HttpConstants.TEXT_HTML_CONTENT_TYPE", "var_name": "TEXT_HTML_CONTENT_TYPE"}, {"original_string": "private static final int DEFAULT_BODY_RESP_MAX_LEN = 1024;", "modifier": "private static final", "type": "int", "declarator": "DEFAULT_BODY_RESP_MAX_LEN = 1024", "var_name": "DEFAULT_BODY_RESP_MAX_LEN"}, {"original_string": "private static final int DEFAULT_EXECUTION_LIMIT = 5;", "modifier": "private static final", "type": "int", "declarator": "DEFAULT_EXECUTION_LIMIT = 5", "var_name": "DEFAULT_EXECUTION_LIMIT"}, {"original_string": "private final ExecutionCounter counter;", "modifier": "private final", "type": "ExecutionCounter", "declarator": "counter", "var_name": "counter"}, {"original_string": "private final int maxResponseErrorMesageLength;", "modifier": "private final", "type": "int", "declarator": "maxResponseErrorMesageLength", "var_name": "maxResponseErrorMesageLength"}, {"original_string": "private final int executionLimit;", "modifier": "private final", "type": "int", "declarator": "executionLimit", "var_name": "executionLimit"}, {"original_string": "private final String username;", "modifier": "private final", "type": "String", "declarator": "username", "var_name": "username"}, {"original_string": "private final String password;", "modifier": "private final", "type": "String", "declarator": "password", "var_name": "password"}, {"original_string": "private final String loginUrl;", "modifier": "private final", "type": "String", "declarator": "loginUrl", "var_name": "loginUrl"}], "methods": [{"identifier": "NiciraRestClient", "parameters": "(final Builder builder)", "modifiers": "private", "return": "", "signature": " NiciraRestClient(final Builder builder)", "full_signature": "private  NiciraRestClient(final Builder builder)", "class_method_signature": "NiciraRestClient.NiciraRestClient(final Builder builder)", "testcase": false, "constructor": true}, {"identifier": "create", "parameters": "()", "modifiers": "public static", "return": "Builder", "signature": "Builder create()", "full_signature": "public static Builder create()", "class_method_signature": "NiciraRestClient.create()", "testcase": false, "constructor": false}, {"identifier": "execute", "parameters": "(final HttpUriRequest request)", "modifiers": "@Override public", "return": "CloseableHttpResponse", "signature": "CloseableHttpResponse execute(final HttpUriRequest request)", "full_signature": "@Override public CloseableHttpResponse execute(final HttpUriRequest request)", "class_method_signature": "NiciraRestClient.execute(final HttpUriRequest request)", "testcase": false, "constructor": false}, {"identifier": "execute", "parameters": "(final HttpUriRequest request, final int previousStatusCode)", "modifiers": "private", "return": "CloseableHttpResponse", "signature": "CloseableHttpResponse execute(final HttpUriRequest request, final int previousStatusCode)", "full_signature": "private CloseableHttpResponse execute(final HttpUriRequest request, final int previousStatusCode)", "class_method_signature": "NiciraRestClient.execute(final HttpUriRequest request, final int previousStatusCode)", "testcase": false, "constructor": false}, {"identifier": "handleUnauthorizedResponse", "parameters": "(final HttpUriRequest request, final int previousStatusCode, final CloseableHttpResponse response, final int statusCode)", "modifiers": "private", "return": "CloseableHttpResponse", "signature": "CloseableHttpResponse handleUnauthorizedResponse(final HttpUriRequest request, final int previousStatusCode, final CloseableHttpResponse response, final int statusCode)", "full_signature": "private CloseableHttpResponse handleUnauthorizedResponse(final HttpUriRequest request, final int previousStatusCode, final CloseableHttpResponse response, final int statusCode)", "class_method_signature": "NiciraRestClient.handleUnauthorizedResponse(final HttpUriRequest request, final int previousStatusCode, final CloseableHttpResponse response, final int statusCode)", "testcase": false, "constructor": false}, {"identifier": "handleSuccessResponse", "parameters": "(final HttpUriRequest request, final CloseableHttpResponse response)", "modifiers": "private", "return": "CloseableHttpResponse", "signature": "CloseableHttpResponse handleSuccessResponse(final HttpUriRequest request, final CloseableHttpResponse response)", "full_signature": "private CloseableHttpResponse handleSuccessResponse(final HttpUriRequest request, final CloseableHttpResponse response)", "class_method_signature": "NiciraRestClient.handleSuccessResponse(final HttpUriRequest request, final CloseableHttpResponse response)", "testcase": false, "constructor": false}, {"identifier": "createAuthenticationRequest", "parameters": "()", "modifiers": "private", "return": "HttpUriRequest", "signature": "HttpUriRequest createAuthenticationRequest()", "full_signature": "private HttpUriRequest createAuthenticationRequest()", "class_method_signature": "NiciraRestClient.createAuthenticationRequest()", "testcase": false, "constructor": false}, {"identifier": "responseToErrorMessage", "parameters": "(final CloseableHttpResponse response)", "modifiers": "private", "return": "String", "signature": "String responseToErrorMessage(final CloseableHttpResponse response)", "full_signature": "private String responseToErrorMessage(final CloseableHttpResponse response)", "class_method_signature": "NiciraRestClient.responseToErrorMessage(final CloseableHttpResponse response)", "testcase": false, "constructor": false}], "file": "plugins/network-elements/nicira-nvp/src/main/java/com/cloud/network/nicira/NiciraRestClient.java"}, "focal_method": {"identifier": "execute", "parameters": "(final HttpUriRequest request)", "modifiers": "@Override public", "return": "CloseableHttpResponse", "body": "@Override\n    public CloseableHttpResponse execute(final HttpUriRequest request) throws CloudstackRESTException {\n        return execute(request, 0);\n    }", "signature": "CloseableHttpResponse execute(final HttpUriRequest request)", "full_signature": "@Override public CloseableHttpResponse execute(final HttpUriRequest request)", "class_method_signature": "NiciraRestClient.execute(final HttpUriRequest request)", "testcase": false, "constructor": false, "invocations": ["execute"]}, "repository": {"repo_id": 49943894, "url": "https://github.com/MissionCriticalCloudOldRepos/cosmic-core", "language": "Java", "is_fork": false, "fork_count": 3, "stargazer_count": 9, "size": 18165, "license": "licensed"}}