{"test_class": {"identifier": "DataBridgeWebClientTest", "superclass": "extends AbstractDataBridgeTest", "interfaces": "", "fields": [{"original_string": "private DataBridgeWebClient dataBridgeWebClient;", "modifier": "private", "type": "DataBridgeWebClient", "declarator": "dataBridgeWebClient", "var_name": "dataBridgeWebClient"}, {"original_string": "@Autowired\n    private HerdStringHelper herdStringHelper;", "modifier": "@Autowired\n    private", "type": "HerdStringHelper", "declarator": "herdStringHelper", "var_name": "herdStringHelper"}, {"original_string": "@Autowired\n    private HttpClientHelper httpClientHelper;", "modifier": "@Autowired\n    private", "type": "HttpClientHelper", "declarator": "httpClientHelper", "var_name": "httpClientHelper"}, {"original_string": "@Autowired\n    private HttpClientOperations httpClientOperations;", "modifier": "@Autowired\n    private", "type": "HttpClientOperations", "declarator": "httpClientOperations", "var_name": "httpClientOperations"}, {"original_string": "@Autowired\n    private XmlHelper xmlHelper;", "modifier": "@Autowired\n    private", "type": "XmlHelper", "declarator": "xmlHelper", "var_name": "xmlHelper"}], "file": "herd-code/herd-tools/herd-tools-common/src/test/java/org/finra/herd/tools/common/databridge/DataBridgeWebClientTest.java"}, "test_case": {"identifier": "testUpdateBusinessObjectDataStatus", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testUpdateBusinessObjectDataStatus() throws Exception\n    {\n        testUpdateBusinessObjectDataStatus(null, false);\n    }", "signature": "void testUpdateBusinessObjectDataStatus()", "full_signature": "@Test public void testUpdateBusinessObjectDataStatus()", "class_method_signature": "DataBridgeWebClientTest.testUpdateBusinessObjectDataStatus()", "testcase": true, "constructor": false, "invocations": ["testUpdateBusinessObjectDataStatus"]}, "focal_class": {"identifier": "DataBridgeWebClient", "superclass": "", "interfaces": "", "fields": [{"original_string": "protected static final String DEFAULT_ACCEPT = ContentType.APPLICATION_XML.withCharset(StandardCharsets.UTF_8).toString();", "modifier": "protected static final", "type": "String", "declarator": "DEFAULT_ACCEPT = ContentType.APPLICATION_XML.withCharset(StandardCharsets.UTF_8).toString()", "var_name": "DEFAULT_ACCEPT"}, {"original_string": "protected static final String DEFAULT_CONTENT_TYPE = ContentType.APPLICATION_XML.withCharset(StandardCharsets.UTF_8).toString();", "modifier": "protected static final", "type": "String", "declarator": "DEFAULT_CONTENT_TYPE = ContentType.APPLICATION_XML.withCharset(StandardCharsets.UTF_8).toString()", "var_name": "DEFAULT_CONTENT_TYPE"}, {"original_string": "protected static final String HERD_APP_REST_URI_PREFIX = \"/herd-app/rest\";", "modifier": "protected static final", "type": "String", "declarator": "HERD_APP_REST_URI_PREFIX = \"/herd-app/rest\"", "var_name": "HERD_APP_REST_URI_PREFIX"}, {"original_string": "private static final Logger LOGGER = LoggerFactory.getLogger(DataBridgeWebClient.class);", "modifier": "private static final", "type": "Logger", "declarator": "LOGGER = LoggerFactory.getLogger(DataBridgeWebClient.class)", "var_name": "LOGGER"}, {"original_string": "@Autowired\n    protected HerdStringHelper herdStringHelper;", "modifier": "@Autowired\n    protected", "type": "HerdStringHelper", "declarator": "herdStringHelper", "var_name": "herdStringHelper"}, {"original_string": "@Autowired\n    protected HttpClientHelper httpClientHelper;", "modifier": "@Autowired\n    protected", "type": "HttpClientHelper", "declarator": "httpClientHelper", "var_name": "httpClientHelper"}, {"original_string": "@Autowired\n    protected HttpClientOperations httpClientOperations;", "modifier": "@Autowired\n    protected", "type": "HttpClientOperations", "declarator": "httpClientOperations", "var_name": "httpClientOperations"}, {"original_string": "protected RegServerAccessParamsDto regServerAccessParamsDto;", "modifier": "protected", "type": "RegServerAccessParamsDto", "declarator": "regServerAccessParamsDto", "var_name": "regServerAccessParamsDto"}], "methods": [{"identifier": "addStorageFiles", "parameters": "(BusinessObjectDataKey businessObjectDataKey, UploaderInputManifestDto manifest,\n        S3FileTransferRequestParamsDto s3FileTransferRequestParamsDto, String storageName)", "modifiers": "@SuppressFBWarnings(value = \"VA_FORMAT_STRING_USES_NEWLINE\", justification = \"We will use the standard carriage return character.\") public", "return": "BusinessObjectDataStorageFilesCreateResponse", "signature": "BusinessObjectDataStorageFilesCreateResponse addStorageFiles(BusinessObjectDataKey businessObjectDataKey, UploaderInputManifestDto manifest,\n        S3FileTransferRequestParamsDto s3FileTransferRequestParamsDto, String storageName)", "full_signature": "@SuppressFBWarnings(value = \"VA_FORMAT_STRING_USES_NEWLINE\", justification = \"We will use the standard carriage return character.\") public BusinessObjectDataStorageFilesCreateResponse addStorageFiles(BusinessObjectDataKey businessObjectDataKey, UploaderInputManifestDto manifest,\n        S3FileTransferRequestParamsDto s3FileTransferRequestParamsDto, String storageName)", "class_method_signature": "DataBridgeWebClient.addStorageFiles(BusinessObjectDataKey businessObjectDataKey, UploaderInputManifestDto manifest,\n        S3FileTransferRequestParamsDto s3FileTransferRequestParamsDto, String storageName)", "testcase": false, "constructor": false}, {"identifier": "getRegServerAccessParamsDto", "parameters": "()", "modifiers": "public", "return": "RegServerAccessParamsDto", "signature": "RegServerAccessParamsDto getRegServerAccessParamsDto()", "full_signature": "public RegServerAccessParamsDto getRegServerAccessParamsDto()", "class_method_signature": "DataBridgeWebClient.getRegServerAccessParamsDto()", "testcase": false, "constructor": false}, {"identifier": "setRegServerAccessParamsDto", "parameters": "(RegServerAccessParamsDto regServerAccessParamsDto)", "modifiers": "public", "return": "void", "signature": "void setRegServerAccessParamsDto(RegServerAccessParamsDto regServerAccessParamsDto)", "full_signature": "public void setRegServerAccessParamsDto(RegServerAccessParamsDto regServerAccessParamsDto)", "class_method_signature": "DataBridgeWebClient.setRegServerAccessParamsDto(RegServerAccessParamsDto regServerAccessParamsDto)", "testcase": false, "constructor": false}, {"identifier": "getStorage", "parameters": "(String storageName)", "modifiers": "public", "return": "Storage", "signature": "Storage getStorage(String storageName)", "full_signature": "public Storage getStorage(String storageName)", "class_method_signature": "DataBridgeWebClient.getStorage(String storageName)", "testcase": false, "constructor": false}, {"identifier": "preRegisterBusinessObjectData", "parameters": "(UploaderInputManifestDto manifest, String storageName, Boolean createNewVersion)", "modifiers": "@SuppressFBWarnings(value = \"VA_FORMAT_STRING_USES_NEWLINE\", justification = \"We will use the standard carriage return character.\") public", "return": "BusinessObjectData", "signature": "BusinessObjectData preRegisterBusinessObjectData(UploaderInputManifestDto manifest, String storageName, Boolean createNewVersion)", "full_signature": "@SuppressFBWarnings(value = \"VA_FORMAT_STRING_USES_NEWLINE\", justification = \"We will use the standard carriage return character.\") public BusinessObjectData preRegisterBusinessObjectData(UploaderInputManifestDto manifest, String storageName, Boolean createNewVersion)", "class_method_signature": "DataBridgeWebClient.preRegisterBusinessObjectData(UploaderInputManifestDto manifest, String storageName, Boolean createNewVersion)", "testcase": false, "constructor": false}, {"identifier": "updateBusinessObjectDataStatus", "parameters": "(BusinessObjectDataKey businessObjectDataKey, String businessObjectDataStatus)", "modifiers": "public", "return": "BusinessObjectDataStatusUpdateResponse", "signature": "BusinessObjectDataStatusUpdateResponse updateBusinessObjectDataStatus(BusinessObjectDataKey businessObjectDataKey, String businessObjectDataStatus)", "full_signature": "public BusinessObjectDataStatusUpdateResponse updateBusinessObjectDataStatus(BusinessObjectDataKey businessObjectDataKey, String businessObjectDataStatus)", "class_method_signature": "DataBridgeWebClient.updateBusinessObjectDataStatus(BusinessObjectDataKey businessObjectDataKey, String businessObjectDataStatus)", "testcase": false, "constructor": false}, {"identifier": "getAuthorizationHeader", "parameters": "()", "modifiers": "protected", "return": "BasicHeader", "signature": "BasicHeader getAuthorizationHeader()", "full_signature": "protected BasicHeader getAuthorizationHeader()", "class_method_signature": "DataBridgeWebClient.getAuthorizationHeader()", "testcase": false, "constructor": false}, {"identifier": "getBusinessObjectData", "parameters": "(CloseableHttpResponse httpResponse, String actionDescription)", "modifiers": "protected", "return": "BusinessObjectData", "signature": "BusinessObjectData getBusinessObjectData(CloseableHttpResponse httpResponse, String actionDescription)", "full_signature": "protected BusinessObjectData getBusinessObjectData(CloseableHttpResponse httpResponse, String actionDescription)", "class_method_signature": "DataBridgeWebClient.getBusinessObjectData(CloseableHttpResponse httpResponse, String actionDescription)", "testcase": false, "constructor": false}, {"identifier": "getBusinessObjectDataStorageFilesCreateResponse", "parameters": "(CloseableHttpResponse httpResponse)", "modifiers": "protected", "return": "BusinessObjectDataStorageFilesCreateResponse", "signature": "BusinessObjectDataStorageFilesCreateResponse getBusinessObjectDataStorageFilesCreateResponse(CloseableHttpResponse httpResponse)", "full_signature": "protected BusinessObjectDataStorageFilesCreateResponse getBusinessObjectDataStorageFilesCreateResponse(CloseableHttpResponse httpResponse)", "class_method_signature": "DataBridgeWebClient.getBusinessObjectDataStorageFilesCreateResponse(CloseableHttpResponse httpResponse)", "testcase": false, "constructor": false}, {"identifier": "getS3KeyPrefix", "parameters": "(DataBridgeBaseManifestDto manifest, Integer businessObjectDataVersion, Boolean createNewVersion)", "modifiers": "protected", "return": "S3KeyPrefixInformation", "signature": "S3KeyPrefixInformation getS3KeyPrefix(DataBridgeBaseManifestDto manifest, Integer businessObjectDataVersion, Boolean createNewVersion)", "full_signature": "protected S3KeyPrefixInformation getS3KeyPrefix(DataBridgeBaseManifestDto manifest, Integer businessObjectDataVersion, Boolean createNewVersion)", "class_method_signature": "DataBridgeWebClient.getS3KeyPrefix(DataBridgeBaseManifestDto manifest, Integer businessObjectDataVersion, Boolean createNewVersion)", "testcase": false, "constructor": false}, {"identifier": "getUriScheme", "parameters": "()", "modifiers": "protected", "return": "String", "signature": "String getUriScheme()", "full_signature": "protected String getUriScheme()", "class_method_signature": "DataBridgeWebClient.getUriScheme()", "testcase": false, "constructor": false}, {"identifier": "processXmlHttpResponse", "parameters": "(CloseableHttpResponse response, String actionDescription, Class<?>... responseClass)", "modifiers": "protected", "return": "Object", "signature": "Object processXmlHttpResponse(CloseableHttpResponse response, String actionDescription, Class<?>... responseClass)", "full_signature": "protected Object processXmlHttpResponse(CloseableHttpResponse response, String actionDescription, Class<?>... responseClass)", "class_method_signature": "DataBridgeWebClient.processXmlHttpResponse(CloseableHttpResponse response, String actionDescription, Class<?>... responseClass)", "testcase": false, "constructor": false}, {"identifier": "getBusinessObjectDataStatusUpdateResponse", "parameters": "(CloseableHttpResponse response)", "modifiers": "private", "return": "BusinessObjectDataStatusUpdateResponse", "signature": "BusinessObjectDataStatusUpdateResponse getBusinessObjectDataStatusUpdateResponse(CloseableHttpResponse response)", "full_signature": "private BusinessObjectDataStatusUpdateResponse getBusinessObjectDataStatusUpdateResponse(CloseableHttpResponse response)", "class_method_signature": "DataBridgeWebClient.getBusinessObjectDataStatusUpdateResponse(CloseableHttpResponse response)", "testcase": false, "constructor": false}, {"identifier": "getS3KeyPrefixInformation", "parameters": "(CloseableHttpResponse httpResponse)", "modifiers": "private", "return": "S3KeyPrefixInformation", "signature": "S3KeyPrefixInformation getS3KeyPrefixInformation(CloseableHttpResponse httpResponse)", "full_signature": "private S3KeyPrefixInformation getS3KeyPrefixInformation(CloseableHttpResponse httpResponse)", "class_method_signature": "DataBridgeWebClient.getS3KeyPrefixInformation(CloseableHttpResponse httpResponse)", "testcase": false, "constructor": false}, {"identifier": "getStorage", "parameters": "(CloseableHttpResponse httpResponse)", "modifiers": "private", "return": "Storage", "signature": "Storage getStorage(CloseableHttpResponse httpResponse)", "full_signature": "private Storage getStorage(CloseableHttpResponse httpResponse)", "class_method_signature": "DataBridgeWebClient.getStorage(CloseableHttpResponse httpResponse)", "testcase": false, "constructor": false}], "file": "herd-code/herd-tools/herd-tools-common/src/main/java/org/finra/herd/tools/common/databridge/DataBridgeWebClient.java"}, "focal_method": {"identifier": "updateBusinessObjectDataStatus", "parameters": "(BusinessObjectDataKey businessObjectDataKey, String businessObjectDataStatus)", "modifiers": "public", "return": "BusinessObjectDataStatusUpdateResponse", "body": "public BusinessObjectDataStatusUpdateResponse updateBusinessObjectDataStatus(BusinessObjectDataKey businessObjectDataKey, String businessObjectDataStatus)\n        throws URISyntaxException, IOException, JAXBException, NoSuchAlgorithmException, KeyStoreException, KeyManagementException\n    {\n        BusinessObjectDataStatusUpdateRequest request = new BusinessObjectDataStatusUpdateRequest();\n        request.setStatus(businessObjectDataStatus);\n\n        // Create a JAXB context and marshaller\n        JAXBContext requestContext = JAXBContext.newInstance(BusinessObjectDataStatusUpdateRequest.class);\n        Marshaller requestMarshaller = requestContext.createMarshaller();\n        requestMarshaller.setProperty(Marshaller.JAXB_ENCODING, StandardCharsets.UTF_8.name());\n        requestMarshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);\n\n        StringWriter sw = new StringWriter();\n        requestMarshaller.marshal(request, sw);\n\n        BusinessObjectDataStatusUpdateResponse businessObjectDataStatusUpdateResponse;\n        try (CloseableHttpClient client = httpClientHelper\n            .createHttpClient(regServerAccessParamsDto.isTrustSelfSignedCertificate(), regServerAccessParamsDto.isDisableHostnameVerification()))\n        {\n\n            StringBuilder uriPathBuilder = new StringBuilder(300);\n            uriPathBuilder.append(HERD_APP_REST_URI_PREFIX + \"/businessObjectDataStatus/namespaces/\").append(businessObjectDataKey.getNamespace());\n            uriPathBuilder.append(\"/businessObjectDefinitionNames/\").append(businessObjectDataKey.getBusinessObjectDefinitionName());\n            uriPathBuilder.append(\"/businessObjectFormatUsages/\").append(businessObjectDataKey.getBusinessObjectFormatUsage());\n            uriPathBuilder.append(\"/businessObjectFormatFileTypes/\").append(businessObjectDataKey.getBusinessObjectFormatFileType());\n            uriPathBuilder.append(\"/businessObjectFormatVersions/\").append(businessObjectDataKey.getBusinessObjectFormatVersion());\n            uriPathBuilder.append(\"/partitionValues/\").append(businessObjectDataKey.getPartitionValue());\n            for (int i = 0; i < org.apache.commons.collections4.CollectionUtils.size(businessObjectDataKey.getSubPartitionValues()) &&\n                i < BusinessObjectDataEntity.MAX_SUBPARTITIONS; i++)\n            {\n                uriPathBuilder.append(\"/subPartition\").append(i + 1).append(\"Values/\").append(businessObjectDataKey.getSubPartitionValues().get(i));\n            }\n            uriPathBuilder.append(\"/businessObjectDataVersions/\").append(businessObjectDataKey.getBusinessObjectDataVersion());\n\n            URIBuilder uriBuilder = new URIBuilder().setScheme(getUriScheme()).setHost(regServerAccessParamsDto.getRegServerHost())\n                .setPort(regServerAccessParamsDto.getRegServerPort()).setPath(uriPathBuilder.toString());\n\n            HttpPut httpPut = new HttpPut(uriBuilder.build());\n            httpPut.addHeader(\"Content-Type\", DEFAULT_CONTENT_TYPE);\n            httpPut.addHeader(\"Accepts\", DEFAULT_ACCEPT);\n            if (regServerAccessParamsDto.isUseSsl())\n            {\n                httpPut.addHeader(getAuthorizationHeader());\n            }\n\n            httpPut.setEntity(new StringEntity(sw.toString()));\n\n            LOGGER.info(String.format(\"    HTTP POST URI: %s\", httpPut.getURI().toString()));\n            LOGGER.info(String.format(\"    HTTP POST Entity Content:%n%s\", sw.toString()));\n\n            businessObjectDataStatusUpdateResponse = getBusinessObjectDataStatusUpdateResponse(httpClientOperations.execute(client, httpPut));\n        }\n\n        LOGGER.info(\"Successfully updated status of the business object data.\");\n\n        return businessObjectDataStatusUpdateResponse;\n    }", "signature": "BusinessObjectDataStatusUpdateResponse updateBusinessObjectDataStatus(BusinessObjectDataKey businessObjectDataKey, String businessObjectDataStatus)", "full_signature": "public BusinessObjectDataStatusUpdateResponse updateBusinessObjectDataStatus(BusinessObjectDataKey businessObjectDataKey, String businessObjectDataStatus)", "class_method_signature": "DataBridgeWebClient.updateBusinessObjectDataStatus(BusinessObjectDataKey businessObjectDataKey, String businessObjectDataStatus)", "testcase": false, "constructor": false, "invocations": ["setStatus", "newInstance", "createMarshaller", "setProperty", "name", "setProperty", "marshal", "createHttpClient", "isTrustSelfSignedCertificate", "isDisableHostnameVerification", "append", "append", "getNamespace", "append", "append", "getBusinessObjectDefinitionName", "append", "append", "getBusinessObjectFormatUsage", "append", "append", "getBusinessObjectFormatFileType", "append", "append", "getBusinessObjectFormatVersion", "append", "append", "getPartitionValue", "size", "getSubPartitionValues", "append", "append", "append", "append", "get", "getSubPartitionValues", "append", "append", "getBusinessObjectDataVersion", "setPath", "setPort", "setHost", "setScheme", "getUriScheme", "getRegServerHost", "getRegServerPort", "toString", "build", "addHeader", "addHeader", "isUseSsl", "addHeader", "getAuthorizationHeader", "setEntity", "toString", "info", "format", "toString", "getURI", "info", "format", "toString", "getBusinessObjectDataStatusUpdateResponse", "execute", "info"]}, "repository": {"repo_id": 42949039, "url": "https://github.com/FINRAOS/herd", "language": "Java", "is_fork": false, "fork_count": 36, "stargazer_count": 120, "size": 205797, "license": "licensed"}}