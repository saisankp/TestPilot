{"test_class": {"identifier": "InMemoryCachedDistributedMetaStorageBridgeTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private JdkMarshaller marshaller;", "modifier": "private", "type": "JdkMarshaller", "declarator": "marshaller", "var_name": "marshaller"}, {"original_string": "private InMemoryCachedDistributedMetaStorageBridge bridge;", "modifier": "private", "type": "InMemoryCachedDistributedMetaStorageBridge", "declarator": "bridge", "var_name": "bridge"}], "file": "modules/core/src/test/java/org/apache/ignite/internal/processors/metastorage/persistence/InMemoryCachedDistributedMetaStorageBridgeTest.java"}, "test_case": {"identifier": "testWriteFullNodeData", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testWriteFullNodeData() throws Exception {\n        bridge.write(\"oldKey\", marshaller.marshal(\"oldVal\"));\n\n        bridge.writeFullNodeData(new DistributedMetaStorageClusterNodeData(\n            DistributedMetaStorageVersion.INITIAL_VERSION,\n            new DistributedMetaStorageKeyValuePair[] {\n                new DistributedMetaStorageKeyValuePair(\"newKey\", marshaller.marshal(\"newVal\"))\n            },\n            DistributedMetaStorageHistoryItem.EMPTY_ARRAY,\n            null\n        ));\n\n        assertNull(bridge.read(\"oldKey\"));\n        assertEquals(\"newVal\", bridge.read(\"newKey\"));\n    }", "signature": "void testWriteFullNodeData()", "full_signature": "@Test public void testWriteFullNodeData()", "class_method_signature": "InMemoryCachedDistributedMetaStorageBridgeTest.testWriteFullNodeData()", "testcase": true, "constructor": false, "invocations": ["write", "marshal", "writeFullNodeData", "marshal", "assertNull", "read", "assertEquals", "read"]}, "focal_class": {"identifier": "InMemoryCachedDistributedMetaStorageBridge", "superclass": "", "interfaces": "", "fields": [{"original_string": "private final JdkMarshaller marshaller;", "modifier": "private final", "type": "JdkMarshaller", "declarator": "marshaller", "var_name": "marshaller"}, {"original_string": "private final SortedMap<String, byte[]> cache = new TreeMap<>();", "modifier": "private final", "type": "SortedMap<String, byte[]>", "declarator": "cache = new TreeMap<>()", "var_name": "cache"}], "methods": [{"identifier": "InMemoryCachedDistributedMetaStorageBridge", "parameters": "(JdkMarshaller marshaller)", "modifiers": "public", "return": "", "signature": " InMemoryCachedDistributedMetaStorageBridge(JdkMarshaller marshaller)", "full_signature": "public  InMemoryCachedDistributedMetaStorageBridge(JdkMarshaller marshaller)", "class_method_signature": "InMemoryCachedDistributedMetaStorageBridge.InMemoryCachedDistributedMetaStorageBridge(JdkMarshaller marshaller)", "testcase": false, "constructor": true}, {"identifier": "read", "parameters": "(String globalKey)", "modifiers": "public", "return": "Serializable", "signature": "Serializable read(String globalKey)", "full_signature": "public Serializable read(String globalKey)", "class_method_signature": "InMemoryCachedDistributedMetaStorageBridge.read(String globalKey)", "testcase": false, "constructor": false}, {"identifier": "readMarshalled", "parameters": "(String globalKey)", "modifiers": "public", "return": "byte[]", "signature": "byte[] readMarshalled(String globalKey)", "full_signature": "public byte[] readMarshalled(String globalKey)", "class_method_signature": "InMemoryCachedDistributedMetaStorageBridge.readMarshalled(String globalKey)", "testcase": false, "constructor": false}, {"identifier": "iterate", "parameters": "(\n        String globalKeyPrefix,\n        BiConsumer<String, ? super Serializable> cb\n    )", "modifiers": "public", "return": "void", "signature": "void iterate(\n        String globalKeyPrefix,\n        BiConsumer<String, ? super Serializable> cb\n    )", "full_signature": "public void iterate(\n        String globalKeyPrefix,\n        BiConsumer<String, ? super Serializable> cb\n    )", "class_method_signature": "InMemoryCachedDistributedMetaStorageBridge.iterate(\n        String globalKeyPrefix,\n        BiConsumer<String, ? super Serializable> cb\n    )", "testcase": false, "constructor": false}, {"identifier": "write", "parameters": "(String globalKey, @Nullable byte[] valBytes)", "modifiers": "public", "return": "void", "signature": "void write(String globalKey, @Nullable byte[] valBytes)", "full_signature": "public void write(String globalKey, @Nullable byte[] valBytes)", "class_method_signature": "InMemoryCachedDistributedMetaStorageBridge.write(String globalKey, @Nullable byte[] valBytes)", "testcase": false, "constructor": false}, {"identifier": "localFullData", "parameters": "()", "modifiers": "public", "return": "DistributedMetaStorageKeyValuePair[]", "signature": "DistributedMetaStorageKeyValuePair[] localFullData()", "full_signature": "public DistributedMetaStorageKeyValuePair[] localFullData()", "class_method_signature": "InMemoryCachedDistributedMetaStorageBridge.localFullData()", "testcase": false, "constructor": false}, {"identifier": "writeFullNodeData", "parameters": "(DistributedMetaStorageClusterNodeData fullNodeData)", "modifiers": "public", "return": "void", "signature": "void writeFullNodeData(DistributedMetaStorageClusterNodeData fullNodeData)", "full_signature": "public void writeFullNodeData(DistributedMetaStorageClusterNodeData fullNodeData)", "class_method_signature": "InMemoryCachedDistributedMetaStorageBridge.writeFullNodeData(DistributedMetaStorageClusterNodeData fullNodeData)", "testcase": false, "constructor": false}, {"identifier": "readInitialData", "parameters": "(\n        ReadOnlyMetastorage metastorage\n    )", "modifiers": "public", "return": "DistributedMetaStorageVersion", "signature": "DistributedMetaStorageVersion readInitialData(\n        ReadOnlyMetastorage metastorage\n    )", "full_signature": "public DistributedMetaStorageVersion readInitialData(\n        ReadOnlyMetastorage metastorage\n    )", "class_method_signature": "InMemoryCachedDistributedMetaStorageBridge.readInitialData(\n        ReadOnlyMetastorage metastorage\n    )", "testcase": false, "constructor": false}], "file": "modules/core/src/main/java/org/apache/ignite/internal/processors/metastorage/persistence/InMemoryCachedDistributedMetaStorageBridge.java"}, "focal_method": {"identifier": "writeFullNodeData", "parameters": "(DistributedMetaStorageClusterNodeData fullNodeData)", "modifiers": "public", "return": "void", "body": "public void writeFullNodeData(DistributedMetaStorageClusterNodeData fullNodeData) {\n        assert fullNodeData.fullData != null;\n\n        cache.clear();\n\n        for (DistributedMetaStorageKeyValuePair item : fullNodeData.fullData)\n            cache.put(item.key, item.valBytes);\n    }", "signature": "void writeFullNodeData(DistributedMetaStorageClusterNodeData fullNodeData)", "full_signature": "public void writeFullNodeData(DistributedMetaStorageClusterNodeData fullNodeData)", "class_method_signature": "InMemoryCachedDistributedMetaStorageBridge.writeFullNodeData(DistributedMetaStorageClusterNodeData fullNodeData)", "testcase": false, "constructor": false, "invocations": ["clear", "put"]}, "repository": {"repo_id": 170496871, "url": "https://github.com/gridgain/gridgain", "stars": 46, "created": "2/13/2019 11:31:35 AM +00:00", "updates": "2020-01-27T16:02:24+00:00", "fork": "False", "license": "licensed"}}