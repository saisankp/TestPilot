{"test_class": {"identifier": "OrdinalSmellTypeAnalysisTest", "superclass": "extends SmellTypeAnalysisTestCase", "interfaces": "", "fields": [], "file": "SmellTracker/src/test/java/fr/inria/sniffer/tracker/analysis/query/smell/OrdinalSmellTypeAnalysisTest.java"}, "test_case": {"identifier": "testRenamedSmellsBackToOriginal", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testRenamedSmellsBackToOriginal() throws QueryException {\n        Commit A = new Commit(\"0-A\", 0);\n        Commit B = new Commit(\"0-B\", 1);\n        Commit C = new Commit(\"0-C\", 2);\n        Commit D = new Commit(\"0-D\", 3);\n        Commit E = new Commit(\"0-E\", 4);\n        Commit F = new Commit(\"0-F\", 5);\n        Commit G = new Commit(\"0-G\", 6);\n\n        // This define the input order\n        addSmell(A, firstSmell);\n        addSmell(B, secondSmell);\n        addSmell(C, secondSmell);\n        addSmell(D, firstSmell);\n        addSmell(E, firstSmell);\n        addSmell(F, firstSmell);\n        addSmell(G, firstSmell);\n\n        mockEndCommit(G.sha);\n\n        Smell expectedSecondSmell = mockSmellRenamed(B, secondSmell, firstSmell);\n        mockSmellRenamed(C, secondSmell, firstSmell);\n        Smell expectedRenamedFirstSmell = mockSmellRenamed(D, firstSmell, secondSmell);\n        mockSmellRenamed(E, firstSmell, secondSmell);\n        mockSmellRenamed(F, firstSmell, secondSmell);\n        mockSmellRenamed(G, firstSmell, secondSmell);\n\n        mockSmellId(expectedSecondSmell);\n        expectedRenamedFirstSmell.parent = expectedSecondSmell;\n        mockSmellId(expectedRenamedFirstSmell);\n\n        getAnalysis().query();\n        debugSmellInsertions();\n\n        verify(persistence, times(3)).execute(any());\n        verify(smellQueries).smellInsertionStatement(projectId, firstSmell);\n        verify(smellQueries).smellInsertionStatement(projectId, expectedSecondSmell);\n        verify(smellQueries).smellInsertionStatement(projectId, expectedRenamedFirstSmell);\n\n        verify(persistence, times(8)).addStatements(any());\n        verify(smellQueries).smellCategoryInsertionStatement(projectId, A.sha, firstSmell, SmellCategory.PRESENCE);\n        verify(smellQueries).smellCategoryInsertionStatement(projectId, A.sha, firstSmell, SmellCategory.INTRODUCTION);\n\n        verify(smellQueries).smellCategoryInsertionStatement(projectId, B.sha, expectedSecondSmell, SmellCategory.PRESENCE);\n        verify(smellQueries).smellCategoryInsertionStatement(projectId, C.sha, expectedSecondSmell, SmellCategory.PRESENCE);\n\n        verify(smellQueries).smellCategoryInsertionStatement(projectId, D.sha, expectedRenamedFirstSmell, SmellCategory.PRESENCE);\n        verify(smellQueries).smellCategoryInsertionStatement(projectId, E.sha, expectedRenamedFirstSmell, SmellCategory.PRESENCE);\n        verify(smellQueries).smellCategoryInsertionStatement(projectId, F.sha, expectedRenamedFirstSmell, SmellCategory.PRESENCE);\n        verify(smellQueries).smellCategoryInsertionStatement(projectId, G.sha, expectedRenamedFirstSmell, SmellCategory.PRESENCE);\n    }", "signature": "void testRenamedSmellsBackToOriginal()", "full_signature": "@Test public void testRenamedSmellsBackToOriginal()", "class_method_signature": "OrdinalSmellTypeAnalysisTest.testRenamedSmellsBackToOriginal()", "testcase": true, "constructor": false, "invocations": ["addSmell", "addSmell", "addSmell", "addSmell", "addSmell", "addSmell", "addSmell", "mockEndCommit", "mockSmellRenamed", "mockSmellRenamed", "mockSmellRenamed", "mockSmellRenamed", "mockSmellRenamed", "mockSmellRenamed", "mockSmellId", "mockSmellId", "query", "getAnalysis", "debugSmellInsertions", "execute", "verify", "times", "any", "smellInsertionStatement", "verify", "smellInsertionStatement", "verify", "smellInsertionStatement", "verify", "addStatements", "verify", "times", "any", "smellCategoryInsertionStatement", "verify", "smellCategoryInsertionStatement", "verify", "smellCategoryInsertionStatement", "verify", "smellCategoryInsertionStatement", "verify", "smellCategoryInsertionStatement", "verify", "smellCategoryInsertionStatement", "verify", "smellCategoryInsertionStatement", "verify", "smellCategoryInsertionStatement", "verify"]}, "focal_class": {"identifier": "OrdinalSmellTypeAnalysis", "superclass": "", "interfaces": "implements Query", "fields": [{"original_string": "private final int projectId;", "modifier": "private final", "type": "int", "declarator": "projectId", "var_name": "projectId"}, {"original_string": "private String smellType;", "modifier": "private", "type": "String", "declarator": "smellType", "var_name": "smellType"}, {"original_string": "private final Persistence persistence;", "modifier": "private final", "type": "Persistence", "declarator": "persistence", "var_name": "persistence"}, {"original_string": "private final CommitQueries commitQueries;", "modifier": "private final", "type": "CommitQueries", "declarator": "commitQueries", "var_name": "commitQueries"}, {"original_string": "private final SmellQueries smellQueries;", "modifier": "private final", "type": "SmellQueries", "declarator": "smellQueries", "var_name": "smellQueries"}, {"original_string": "private final SmellDuplicationChecker duplicationChecker;", "modifier": "private final", "type": "SmellDuplicationChecker", "declarator": "duplicationChecker", "var_name": "duplicationChecker"}, {"original_string": "private final Iterator<Map<String, Object>> smells;", "modifier": "private final", "type": "Iterator<Map<String, Object>>", "declarator": "smells", "var_name": "smells"}], "methods": [{"identifier": "OrdinalSmellTypeAnalysis", "parameters": "(int projectId, Persistence persistence, Iterator<Map<String, Object>> smells,\n                             String smellType, SmellDuplicationChecker duplicationChecker,\n                             CommitQueries commitQueries, SmellQueries smellQueries)", "modifiers": "", "return": "", "signature": " OrdinalSmellTypeAnalysis(int projectId, Persistence persistence, Iterator<Map<String, Object>> smells,\n                             String smellType, SmellDuplicationChecker duplicationChecker,\n                             CommitQueries commitQueries, SmellQueries smellQueries)", "full_signature": "  OrdinalSmellTypeAnalysis(int projectId, Persistence persistence, Iterator<Map<String, Object>> smells,\n                             String smellType, SmellDuplicationChecker duplicationChecker,\n                             CommitQueries commitQueries, SmellQueries smellQueries)", "class_method_signature": "OrdinalSmellTypeAnalysis.OrdinalSmellTypeAnalysis(int projectId, Persistence persistence, Iterator<Map<String, Object>> smells,\n                             String smellType, SmellDuplicationChecker duplicationChecker,\n                             CommitQueries commitQueries, SmellQueries smellQueries)", "testcase": false, "constructor": true}, {"identifier": "query", "parameters": "()", "modifiers": "@Override public", "return": "void", "signature": "void query()", "full_signature": "@Override public void query()", "class_method_signature": "OrdinalSmellTypeAnalysis.query()", "testcase": false, "constructor": false}], "file": "SmellTracker/src/main/java/fr/inria/sniffer/tracker/analysis/query/smell/OrdinalSmellTypeAnalysis.java"}, "focal_method": {"identifier": "query", "parameters": "()", "modifiers": "@Override public", "return": "void", "body": "@Override\n    public void query() throws QueryException {\n        Smell smell;\n        Commit commit;\n\n        Map<String, Object> instance;\n        BranchAnalyzer branchAnalyzer = new BranchAnalyzer(\n                projectId, persistence,\n                duplicationChecker, commitQueries, smellQueries\n        );\n        while (smells.hasNext()) {\n            instance = smells.next();\n            smell = Smell.fromPaprikaInstance(instance, smellType);\n            commit = Commit.fromInstance(instance);\n            branchAnalyzer.notifyCommit(commit);\n            branchAnalyzer.notifySmell(smell);\n        }\n\n        branchAnalyzer.notifyEnd();\n    }", "signature": "void query()", "full_signature": "@Override public void query()", "class_method_signature": "OrdinalSmellTypeAnalysis.query()", "testcase": false, "constructor": false, "invocations": ["hasNext", "next", "fromPaprikaInstance", "fromInstance", "notifyCommit", "notifySmell", "notifyEnd"]}, "repository": {"repo_id": 175298978, "url": "https://github.com/HabchiSarra/Sniffer", "language": "Java", "is_fork": false, "fork_count": 2, "stargazer_count": 10, "size": 587, "license": "licensed"}}