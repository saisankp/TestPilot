{"test_class": {"identifier": "ElasticSearchHelperTest", "superclass": "extends AbstractDaoTest", "interfaces": "", "fields": [{"original_string": "private static final String INDEX_SEARCH_RESULT_TYPE = \"Index Search Result Type 1\";", "modifier": "private static final", "type": "String", "declarator": "INDEX_SEARCH_RESULT_TYPE = \"Index Search Result Type 1\"", "var_name": "INDEX_SEARCH_RESULT_TYPE"}, {"original_string": "private static final String TAG_TYPE_CODE = \"Tag Type Code 1\";", "modifier": "private static final", "type": "String", "declarator": "TAG_TYPE_CODE = \"Tag Type Code 1\"", "var_name": "TAG_TYPE_CODE"}, {"original_string": "private static final String TAG_TYPE_CODE_2 = \"Tag Type Code 2\";", "modifier": "private static final", "type": "String", "declarator": "TAG_TYPE_CODE_2 = \"Tag Type Code 2\"", "var_name": "TAG_TYPE_CODE_2"}, {"original_string": "private static final String TAG_TYPE_CODE_3 = \"Tag Type Code 3\";", "modifier": "private static final", "type": "String", "declarator": "TAG_TYPE_CODE_3 = \"Tag Type Code 3\"", "var_name": "TAG_TYPE_CODE_3"}, {"original_string": "private static final String TAG_TYPE_DISPLAY_NAME = \"Tag Type DisplayName\";", "modifier": "private static final", "type": "String", "declarator": "TAG_TYPE_DISPLAY_NAME = \"Tag Type DisplayName\"", "var_name": "TAG_TYPE_DISPLAY_NAME"}, {"original_string": "private static final String TAG_TYPE_DISPLAY_NAME_2 = \"Tag Type DisplayName 2\";", "modifier": "private static final", "type": "String", "declarator": "TAG_TYPE_DISPLAY_NAME_2 = \"Tag Type DisplayName 2\"", "var_name": "TAG_TYPE_DISPLAY_NAME_2"}, {"original_string": "private static final String TAG_TYPE_DISPLAY_NAME_3 = \"Tag Type DisplayName 3\";", "modifier": "private static final", "type": "String", "declarator": "TAG_TYPE_DISPLAY_NAME_3 = \"Tag Type DisplayName 3\"", "var_name": "TAG_TYPE_DISPLAY_NAME_3"}, {"original_string": "private static final String TAG_CODE = \"Tag Code 1\";", "modifier": "private static final", "type": "String", "declarator": "TAG_CODE = \"Tag Code 1\"", "var_name": "TAG_CODE"}, {"original_string": "private static final String TAG_CODE_2 = \"Tag Code 2\";", "modifier": "private static final", "type": "String", "declarator": "TAG_CODE_2 = \"Tag Code 2\"", "var_name": "TAG_CODE_2"}, {"original_string": "private static final int TAG_CODE_COUNT = 1;", "modifier": "private static final", "type": "int", "declarator": "TAG_CODE_COUNT = 1", "var_name": "TAG_CODE_COUNT"}, {"original_string": "private static final String TAG_CODE_DISPLAY_NAME = \"Tag Code DisplayName\";", "modifier": "private static final", "type": "String", "declarator": "TAG_CODE_DISPLAY_NAME = \"Tag Code DisplayName\"", "var_name": "TAG_CODE_DISPLAY_NAME"}, {"original_string": "private static final String TAG_CODE_DISPLAY_NAME_2 = \"Tag Code DisplayName 2\";", "modifier": "private static final", "type": "String", "declarator": "TAG_CODE_DISPLAY_NAME_2 = \"Tag Code DisplayName 2\"", "var_name": "TAG_CODE_DISPLAY_NAME_2"}, {"original_string": "@InjectMocks\n    private ElasticsearchHelper elasticsearchHelper;", "modifier": "@InjectMocks\n    private", "type": "ElasticsearchHelper", "declarator": "elasticsearchHelper", "var_name": "elasticsearchHelper"}, {"original_string": "@Mock\n    private JsonHelper jsonHelper;", "modifier": "@Mock\n    private", "type": "JsonHelper", "declarator": "jsonHelper", "var_name": "jsonHelper"}, {"original_string": "@Mock\n    private TagDaoHelper tagDaoHelper;", "modifier": "@Mock\n    private", "type": "TagDaoHelper", "declarator": "tagDaoHelper", "var_name": "tagDaoHelper"}], "file": "herd-code/herd-dao/src/test/java/org/finra/herd/dao/helper/ElasticSearchHelperTest.java"}, "test_case": {"identifier": "testGetAggregationsFromSearchResponseAggregationsSetIsNull", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testGetAggregationsFromSearchResponseAggregationsSetIsNull()\n    {\n        // Create a mock search response.\n        SearchResponse searchResponse = mock(SearchResponse.class);\n        when(searchResponse.getAggregations()).thenReturn(null);\n\n        // Mock the external calls.\n        when(jsonHelper.objectToJson(searchResponse)).thenReturn(SEARCH_RESPONSE_JSON_STRING);\n\n        // Try to call the method under test.\n        try\n        {\n            elasticsearchHelper.getAggregationsFromSearchResponse(searchResponse);\n        }\n        catch (IllegalStateException e)\n        {\n            assertEquals(\"Invalid search result.\", e.getMessage());\n        }\n\n        // Verify the external calls.\n        verify(jsonHelper).objectToJson(searchResponse);\n        verifyNoMoreInteractionsHelper();\n    }", "signature": "void testGetAggregationsFromSearchResponseAggregationsSetIsNull()", "full_signature": "@Test public void testGetAggregationsFromSearchResponseAggregationsSetIsNull()", "class_method_signature": "ElasticSearchHelperTest.testGetAggregationsFromSearchResponseAggregationsSetIsNull()", "testcase": true, "constructor": false, "invocations": ["mock", "thenReturn", "when", "getAggregations", "thenReturn", "when", "objectToJson", "getAggregationsFromSearchResponse", "assertEquals", "getMessage", "objectToJson", "verify", "verifyNoMoreInteractionsHelper"]}, "focal_class": {"identifier": "ElasticsearchHelper", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final Logger LOGGER = LoggerFactory.getLogger(ElasticsearchHelper.class);", "modifier": "private static final", "type": "Logger", "declarator": "LOGGER = LoggerFactory.getLogger(ElasticsearchHelper.class)", "var_name": "LOGGER"}, {"original_string": "@Autowired\n    private JsonHelper jsonHelper;", "modifier": "@Autowired\n    private", "type": "JsonHelper", "declarator": "jsonHelper", "var_name": "jsonHelper"}, {"original_string": "@Autowired\n    private TagDaoHelper tagDaoHelper;", "modifier": "@Autowired\n    private", "type": "TagDaoHelper", "declarator": "tagDaoHelper", "var_name": "tagDaoHelper"}, {"original_string": "public static final String DISPLAY_NAME_SOURCE = \"displayName\";", "modifier": "public static final", "type": "String", "declarator": "DISPLAY_NAME_SOURCE = \"displayName\"", "var_name": "DISPLAY_NAME_SOURCE"}, {"original_string": "public static final String NESTED_BDEFTAGS_PATH = \"businessObjectDefinitionTags.tag\";", "modifier": "public static final", "type": "String", "declarator": "NESTED_BDEFTAGS_PATH = \"businessObjectDefinitionTags.tag\"", "var_name": "NESTED_BDEFTAGS_PATH"}, {"original_string": "public static final String TAGTYPE_CODE_FIELD_TAG_INDEX = \"tagType.code.keyword\";", "modifier": "public static final", "type": "String", "declarator": "TAGTYPE_CODE_FIELD_TAG_INDEX = \"tagType.code.keyword\"", "var_name": "TAGTYPE_CODE_FIELD_TAG_INDEX"}, {"original_string": "public static final String TAGTYPE_NAME_FIELD_TAG_INDEX = \"tagType.displayName.keyword\";", "modifier": "public static final", "type": "String", "declarator": "TAGTYPE_NAME_FIELD_TAG_INDEX = \"tagType.displayName.keyword\"", "var_name": "TAGTYPE_NAME_FIELD_TAG_INDEX"}, {"original_string": "public static final String TAG_CODE_FIELD_TAG_INDEX = \"tagCode.keyword\";", "modifier": "public static final", "type": "String", "declarator": "TAG_CODE_FIELD_TAG_INDEX = \"tagCode.keyword\"", "var_name": "TAG_CODE_FIELD_TAG_INDEX"}, {"original_string": "public static final String TAG_NAME_FIELD_TAG_INDEX = \"displayName.keyword\";", "modifier": "public static final", "type": "String", "declarator": "TAG_NAME_FIELD_TAG_INDEX = \"displayName.keyword\"", "var_name": "TAG_NAME_FIELD_TAG_INDEX"}, {"original_string": "public static final String BDEF_TAGTYPE_CODE_FIELD = NESTED_BDEFTAGS_PATH + \".tagType.code.keyword\";", "modifier": "public static final", "type": "String", "declarator": "BDEF_TAGTYPE_CODE_FIELD = NESTED_BDEFTAGS_PATH + \".tagType.code.keyword\"", "var_name": "BDEF_TAGTYPE_CODE_FIELD"}, {"original_string": "public static final String BDEF_TAGTYPE_NAME_FIELD = NESTED_BDEFTAGS_PATH + \".tagType.displayName.keyword\";", "modifier": "public static final", "type": "String", "declarator": "BDEF_TAGTYPE_NAME_FIELD = NESTED_BDEFTAGS_PATH + \".tagType.displayName.keyword\"", "var_name": "BDEF_TAGTYPE_NAME_FIELD"}, {"original_string": "public static final String BDEF_TAG_CODE_FIELD = NESTED_BDEFTAGS_PATH + \".tagCode.keyword\";", "modifier": "public static final", "type": "String", "declarator": "BDEF_TAG_CODE_FIELD = NESTED_BDEFTAGS_PATH + \".tagCode.keyword\"", "var_name": "BDEF_TAG_CODE_FIELD"}, {"original_string": "public static final String BDEF_TAG_NAME_FIELD = NESTED_BDEFTAGS_PATH + \".displayName.keyword\";", "modifier": "public static final", "type": "String", "declarator": "BDEF_TAG_NAME_FIELD = NESTED_BDEFTAGS_PATH + \".displayName.keyword\"", "var_name": "BDEF_TAG_NAME_FIELD"}, {"original_string": "public static final String TAG_TAG_CODE_FIELD = \"tagCode.keyword\";", "modifier": "public static final", "type": "String", "declarator": "TAG_TAG_CODE_FIELD = \"tagCode.keyword\"", "var_name": "TAG_TAG_CODE_FIELD"}, {"original_string": "public static final String TAG_TAGTYPE_CODE_FIELD = \"tagType.code.keyword\";", "modifier": "public static final", "type": "String", "declarator": "TAG_TAGTYPE_CODE_FIELD = \"tagType.code.keyword\"", "var_name": "TAG_TAGTYPE_CODE_FIELD"}, {"original_string": "public static final String TAG_FACET_AGGS = \"tagFacet\";", "modifier": "public static final", "type": "String", "declarator": "TAG_FACET_AGGS = \"tagFacet\"", "var_name": "TAG_FACET_AGGS"}, {"original_string": "public static final String TAGTYPE_CODE_AGGREGATION = \"tagTypeCodes\";", "modifier": "public static final", "type": "String", "declarator": "TAGTYPE_CODE_AGGREGATION = \"tagTypeCodes\"", "var_name": "TAGTYPE_CODE_AGGREGATION"}, {"original_string": "public static final String TAGTYPE_NAME_AGGREGATION = \"tagTypeDisplayNames\";", "modifier": "public static final", "type": "String", "declarator": "TAGTYPE_NAME_AGGREGATION = \"tagTypeDisplayNames\"", "var_name": "TAGTYPE_NAME_AGGREGATION"}, {"original_string": "public static final String TAG_CODE_AGGREGATION = \"tagCodes\";", "modifier": "public static final", "type": "String", "declarator": "TAG_CODE_AGGREGATION = \"tagCodes\"", "var_name": "TAG_CODE_AGGREGATION"}, {"original_string": "public static final String TAG_NAME_AGGREGATION = \"tagDisplayNames\";", "modifier": "public static final", "type": "String", "declarator": "TAG_NAME_AGGREGATION = \"tagDisplayNames\"", "var_name": "TAG_NAME_AGGREGATION"}, {"original_string": "public static final String TAG_FACET = \"tag\";", "modifier": "public static final", "type": "String", "declarator": "TAG_FACET = \"tag\"", "var_name": "TAG_FACET"}, {"original_string": "public static final String RESULT_TYPE_FACET = \"resulttype\";", "modifier": "public static final", "type": "String", "declarator": "RESULT_TYPE_FACET = \"resulttype\"", "var_name": "RESULT_TYPE_FACET"}, {"original_string": "public static final String TAG_TYPE_FACET_AGGS = \"tagTypeFacet\";", "modifier": "public static final", "type": "String", "declarator": "TAG_TYPE_FACET_AGGS = \"tagTypeFacet\"", "var_name": "TAG_TYPE_FACET_AGGS"}, {"original_string": "public static final String RESULT_TYPE_AGGS = \"resultType\";", "modifier": "public static final", "type": "String", "declarator": "RESULT_TYPE_AGGS = \"resultType\"", "var_name": "RESULT_TYPE_AGGS"}, {"original_string": "public static final String RESULT_TYPE_FIELD = \"_index\";", "modifier": "public static final", "type": "String", "declarator": "RESULT_TYPE_FIELD = \"_index\"", "var_name": "RESULT_TYPE_FIELD"}], "methods": [{"identifier": "addFacetFieldAggregations", "parameters": "(Set<String> facetFieldsList, SearchRequestBuilder searchRequestBuilder)", "modifiers": "public", "return": "SearchRequestBuilder", "signature": "SearchRequestBuilder addFacetFieldAggregations(Set<String> facetFieldsList, SearchRequestBuilder searchRequestBuilder)", "full_signature": "public SearchRequestBuilder addFacetFieldAggregations(Set<String> facetFieldsList, SearchRequestBuilder searchRequestBuilder)", "class_method_signature": "ElasticsearchHelper.addFacetFieldAggregations(Set<String> facetFieldsList, SearchRequestBuilder searchRequestBuilder)", "testcase": false, "constructor": false}, {"identifier": "addIndexSearchFilterBooleanClause", "parameters": "(List<IndexSearchFilter> indexSearchFilters, String bdefActiveIndex, String tagActiveIndex)", "modifiers": "public", "return": "BoolQueryBuilder", "signature": "BoolQueryBuilder addIndexSearchFilterBooleanClause(List<IndexSearchFilter> indexSearchFilters, String bdefActiveIndex, String tagActiveIndex)", "full_signature": "public BoolQueryBuilder addIndexSearchFilterBooleanClause(List<IndexSearchFilter> indexSearchFilters, String bdefActiveIndex, String tagActiveIndex)", "class_method_signature": "ElasticsearchHelper.addIndexSearchFilterBooleanClause(List<IndexSearchFilter> indexSearchFilters, String bdefActiveIndex, String tagActiveIndex)", "testcase": false, "constructor": false}, {"identifier": "applySearchFilterClause", "parameters": "(IndexSearchFilter indexSearchFilter, String bdefActiveIndex, String tagActiveIndex)", "modifiers": "private", "return": "BoolQueryBuilder", "signature": "BoolQueryBuilder applySearchFilterClause(IndexSearchFilter indexSearchFilter, String bdefActiveIndex, String tagActiveIndex)", "full_signature": "private BoolQueryBuilder applySearchFilterClause(IndexSearchFilter indexSearchFilter, String bdefActiveIndex, String tagActiveIndex)", "class_method_signature": "ElasticsearchHelper.applySearchFilterClause(IndexSearchFilter indexSearchFilter, String bdefActiveIndex, String tagActiveIndex)", "testcase": false, "constructor": false}, {"identifier": "getResultTypeIndexSearchResponseDto", "parameters": "(SearchResponse searchResponse)", "modifiers": "public", "return": "List<ResultTypeIndexSearchResponseDto>", "signature": "List<ResultTypeIndexSearchResponseDto> getResultTypeIndexSearchResponseDto(SearchResponse searchResponse)", "full_signature": "public List<ResultTypeIndexSearchResponseDto> getResultTypeIndexSearchResponseDto(SearchResponse searchResponse)", "class_method_signature": "ElasticsearchHelper.getResultTypeIndexSearchResponseDto(SearchResponse searchResponse)", "testcase": false, "constructor": false}, {"identifier": "getTagTypeIndexSearchResponseDtosFromTerms", "parameters": "(Terms aggregation)", "modifiers": "private", "return": "List<TagTypeIndexSearchResponseDto>", "signature": "List<TagTypeIndexSearchResponseDto> getTagTypeIndexSearchResponseDtosFromTerms(Terms aggregation)", "full_signature": "private List<TagTypeIndexSearchResponseDto> getTagTypeIndexSearchResponseDtosFromTerms(Terms aggregation)", "class_method_signature": "ElasticsearchHelper.getTagTypeIndexSearchResponseDtosFromTerms(Terms aggregation)", "testcase": false, "constructor": false}, {"identifier": "getTagTagIndexSearchResponseDto", "parameters": "(SearchResponse searchResponse)", "modifiers": "public", "return": "List<TagTypeIndexSearchResponseDto>", "signature": "List<TagTypeIndexSearchResponseDto> getTagTagIndexSearchResponseDto(SearchResponse searchResponse)", "full_signature": "public List<TagTypeIndexSearchResponseDto> getTagTagIndexSearchResponseDto(SearchResponse searchResponse)", "class_method_signature": "ElasticsearchHelper.getTagTagIndexSearchResponseDto(SearchResponse searchResponse)", "testcase": false, "constructor": false}, {"identifier": "getNestedTagTagIndexSearchResponseDto", "parameters": "(SearchResponse searchResponse)", "modifiers": "public", "return": "List<TagTypeIndexSearchResponseDto>", "signature": "List<TagTypeIndexSearchResponseDto> getNestedTagTagIndexSearchResponseDto(SearchResponse searchResponse)", "full_signature": "public List<TagTypeIndexSearchResponseDto> getNestedTagTagIndexSearchResponseDto(SearchResponse searchResponse)", "class_method_signature": "ElasticsearchHelper.getNestedTagTagIndexSearchResponseDto(SearchResponse searchResponse)", "testcase": false, "constructor": false}, {"identifier": "createTagTypeFacet", "parameters": "(TagTypeIndexSearchResponseDto tagTypeIndexSearchResponseDto)", "modifiers": "private", "return": "Facet", "signature": "Facet createTagTypeFacet(TagTypeIndexSearchResponseDto tagTypeIndexSearchResponseDto)", "full_signature": "private Facet createTagTypeFacet(TagTypeIndexSearchResponseDto tagTypeIndexSearchResponseDto)", "class_method_signature": "ElasticsearchHelper.createTagTypeFacet(TagTypeIndexSearchResponseDto tagTypeIndexSearchResponseDto)", "testcase": false, "constructor": false}, {"identifier": "getFacetsResponse", "parameters": "(ElasticsearchResponseDto elasticsearchResponseDto, final String bdefActiveIndex, final String tagActiveIndex)", "modifiers": "public", "return": "List<Facet>", "signature": "List<Facet> getFacetsResponse(ElasticsearchResponseDto elasticsearchResponseDto, final String bdefActiveIndex, final String tagActiveIndex)", "full_signature": "public List<Facet> getFacetsResponse(ElasticsearchResponseDto elasticsearchResponseDto, final String bdefActiveIndex, final String tagActiveIndex)", "class_method_signature": "ElasticsearchHelper.getFacetsResponse(ElasticsearchResponseDto elasticsearchResponseDto, final String bdefActiveIndex, final String tagActiveIndex)", "testcase": false, "constructor": false}, {"identifier": "getAggregation", "parameters": "(SearchResponse searchResponse, String aggregationName)", "modifiers": "public", "return": "Terms", "signature": "Terms getAggregation(SearchResponse searchResponse, String aggregationName)", "full_signature": "public Terms getAggregation(SearchResponse searchResponse, String aggregationName)", "class_method_signature": "ElasticsearchHelper.getAggregation(SearchResponse searchResponse, String aggregationName)", "testcase": false, "constructor": false}, {"identifier": "getNestedAggregation", "parameters": "(SearchResponse searchResponse, String nestedAggregationName, String subAggregationName)", "modifiers": "public", "return": "Terms", "signature": "Terms getNestedAggregation(SearchResponse searchResponse, String nestedAggregationName, String subAggregationName)", "full_signature": "public Terms getNestedAggregation(SearchResponse searchResponse, String nestedAggregationName, String subAggregationName)", "class_method_signature": "ElasticsearchHelper.getNestedAggregation(SearchResponse searchResponse, String nestedAggregationName, String subAggregationName)", "testcase": false, "constructor": false}, {"identifier": "getSearchIndexType", "parameters": "(final String indexName, final String bdefActiveIndex, final String tagActiveIndex)", "modifiers": "public", "return": "String", "signature": "String getSearchIndexType(final String indexName, final String bdefActiveIndex, final String tagActiveIndex)", "full_signature": "public String getSearchIndexType(final String indexName, final String bdefActiveIndex, final String tagActiveIndex)", "class_method_signature": "ElasticsearchHelper.getSearchIndexType(final String indexName, final String bdefActiveIndex, final String tagActiveIndex)", "testcase": false, "constructor": false}, {"identifier": "getAggregationsFromNestedAggregation", "parameters": "(Nested nestedAggregation, SearchResponse searchResponse)", "modifiers": "protected", "return": "Aggregations", "signature": "Aggregations getAggregationsFromNestedAggregation(Nested nestedAggregation, SearchResponse searchResponse)", "full_signature": "protected Aggregations getAggregationsFromNestedAggregation(Nested nestedAggregation, SearchResponse searchResponse)", "class_method_signature": "ElasticsearchHelper.getAggregationsFromNestedAggregation(Nested nestedAggregation, SearchResponse searchResponse)", "testcase": false, "constructor": false}, {"identifier": "getAggregationsFromSearchResponse", "parameters": "(SearchResponse searchResponse)", "modifiers": "protected", "return": "Aggregations", "signature": "Aggregations getAggregationsFromSearchResponse(SearchResponse searchResponse)", "full_signature": "protected Aggregations getAggregationsFromSearchResponse(SearchResponse searchResponse)", "class_method_signature": "ElasticsearchHelper.getAggregationsFromSearchResponse(SearchResponse searchResponse)", "testcase": false, "constructor": false}], "file": "herd-code/herd-dao/src/main/java/org/finra/herd/dao/helper/ElasticsearchHelper.java"}, "focal_method": {"identifier": "getAggregationsFromSearchResponse", "parameters": "(SearchResponse searchResponse)", "modifiers": "protected", "return": "Aggregations", "body": "protected Aggregations getAggregationsFromSearchResponse(SearchResponse searchResponse)\n    {\n        // Retrieve the aggregations.\n        Aggregations aggregations = searchResponse.getAggregations();\n\n        // Fail if the retrieved object is null.\n        if (aggregations == null)\n        {\n            // Log the error along with the search response contents.\n            LOGGER.error(\"Failed to retrieve aggregations from the search response. searchResponse={}\", jsonHelper.objectToJson(searchResponse));\n\n            // Throw an exception.\n            throw new IllegalStateException(\"Invalid search result.\");\n        }\n\n        return aggregations;\n    }", "signature": "Aggregations getAggregationsFromSearchResponse(SearchResponse searchResponse)", "full_signature": "protected Aggregations getAggregationsFromSearchResponse(SearchResponse searchResponse)", "class_method_signature": "ElasticsearchHelper.getAggregationsFromSearchResponse(SearchResponse searchResponse)", "testcase": false, "constructor": false, "invocations": ["getAggregations", "error", "objectToJson"]}, "repository": {"repo_id": 42949039, "url": "https://github.com/FINRAOS/herd", "language": "Java", "is_fork": false, "fork_count": 36, "stargazer_count": 120, "size": 205797, "license": "licensed"}}