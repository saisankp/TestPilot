{"test_class": {"identifier": "SofaRequestTest", "superclass": "", "interfaces": "", "fields": [], "file": "core/api/src/test/java/com/alipay/sofa/rpc/core/request/SofaRequestTest.java"}, "test_case": {"identifier": "getRequestProp", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void getRequestProp() throws Exception {\n        SofaRequest request = new SofaRequest();\n        request.setInterfaceName(Invoker.class.getName());\n        request.setMethodName(\"invoke\");\n        request.setMethod(Invoker.class.getMethod(\"invoke\", SofaRequest.class));\n        request.setMethodArgs(new Object[] { new SofaRequest() });\n        request.setMethodArgSigs(new String[] { SofaRequest.class.getCanonicalName() });\n        request.setTargetServiceUniqueName(Invoker.class.getName() + \":1.0\");\n        request.setTargetAppName(\"targetApp\");\n        request.setSerializeType((byte) 11);\n        request.setTimeout(1024);\n        request.setSerializeType((byte) 11);\n        request.setData(new ByteArrayWrapperByteBuf(new byte[] { 1, 2, 3 }));\n        request.setInvokeType(RpcConstants.INVOKER_TYPE_SYNC);\n        request.setSofaResponseCallback(new SofaResponseCallback() {\n            @Override\n            public void onAppResponse(Object appResponse, String methodName, RequestBase request) {\n\n            }\n\n            @Override\n            public void onAppException(Throwable throwable, String methodName, RequestBase request) {\n\n            }\n\n            @Override\n            public void onSofaException(SofaRpcException sofaException, String methodName, RequestBase request) {\n\n            }\n        });\n\n        Assert.assertEquals(Invoker.class.getName(), request.getInterfaceName());\n        Assert.assertEquals(\"invoke\", request.getMethodName());\n        Assert.assertEquals(\"invoke\", request.getMethod().getName());\n        Assert.assertArrayEquals(new String[] { SofaRequest.class.getCanonicalName() },\n            request.getMethodArgSigs());\n        Assert.assertEquals(1, request.getMethodArgs().length);\n        Assert.assertEquals(Invoker.class.getName() + \":1.0\", request.getTargetServiceUniqueName());\n        Assert.assertEquals(\"targetApp\", request.getTargetAppName());\n        Assert.assertTrue(request.getSerializeType() == 11);\n        Assert.assertTrue(request.getTimeout() == 1024);\n        Assert.assertEquals(RpcConstants.INVOKER_TYPE_SYNC, request.getInvokeType());\n        Assert.assertTrue(request.getSerializeType() == 11);\n        Assert.assertTrue(request.getData().array().length == 3);\n        Assert.assertNotNull(request.getSofaResponseCallback());\n\n        Map<String, Object> map = request.getRequestProps();\n        Assert.assertTrue(map == null);\n\n        request.addRequestProp(\"1\", \"1\");\n        map = request.getRequestProps();\n        Assert.assertTrue(map.size() == 1);\n        request.addRequestProp(null, \"1\");\n        Assert.assertTrue(map.size() == 1);\n        request.addRequestProp(\"1\", null);\n        Assert.assertTrue(map.size() == 1);\n\n        request.addRequestProps(null);\n        Assert.assertTrue(map.size() == 1);\n        request.addRequestProps(new HashMap<String, Object>());\n        Assert.assertTrue(map.size() == 1);\n\n        request.removeRequestProp(\"1\");\n        HashMap<String, Object> hashMap = new HashMap<String, Object>();\n        hashMap.put(\"1\", \"1\");\n        request.addRequestProps(hashMap);\n        hashMap.put(\"2\", \"2\");\n        request.addRequestProps(hashMap);\n        Assert.assertTrue(map.size() == 2);\n        Assert.assertEquals(\"2\", request.getRequestProp(\"2\"));\n\n        request.removeRequestProp(null);\n        Assert.assertTrue(map.size() == 2);\n        request.removeRequestProp(\"2\");\n        Assert.assertTrue(map.size() == 1);\n        Assert.assertNull(request.getRequestProp(\"2\"));\n\n        Assert.assertFalse(request.isAsync());\n\n        request.setInvokeType(RpcConstants.INVOKER_TYPE_FUTURE);\n        Assert.assertTrue(request.isAsync());\n\n        request.setInvokeType(RpcConstants.INVOKER_TYPE_CALLBACK);\n        Assert.assertTrue(request.isAsync());\n\n        request.setInvokeType(null);\n        Assert.assertFalse(request.isAsync());\n    }", "signature": "void getRequestProp()", "full_signature": "@Test public void getRequestProp()", "class_method_signature": "SofaRequestTest.getRequestProp()", "testcase": true, "constructor": false, "invocations": ["setInterfaceName", "getName", "setMethodName", "setMethod", "getMethod", "setMethodArgs", "setMethodArgSigs", "getCanonicalName", "setTargetServiceUniqueName", "getName", "setTargetAppName", "setSerializeType", "setTimeout", "setSerializeType", "setData", "setInvokeType", "setSofaResponseCallback", "assertEquals", "getName", "getInterfaceName", "assertEquals", "getMethodName", "assertEquals", "getName", "getMethod", "assertArrayEquals", "getCanonicalName", "getMethodArgSigs", "assertEquals", "getMethodArgs", "assertEquals", "getName", "getTargetServiceUniqueName", "assertEquals", "getTargetAppName", "assertTrue", "getSerializeType", "assertTrue", "getTimeout", "assertEquals", "getInvokeType", "assertTrue", "getSerializeType", "assertTrue", "array", "getData", "assertNotNull", "getSofaResponseCallback", "getRequestProps", "assertTrue", "addRequestProp", "getRequestProps", "assertTrue", "size", "addRequestProp", "assertTrue", "size", "addRequestProp", "assertTrue", "size", "addRequestProps", "assertTrue", "size", "addRequestProps", "assertTrue", "size", "removeRequestProp", "put", "addRequestProps", "put", "addRequestProps", "assertTrue", "size", "assertEquals", "getRequestProp", "removeRequestProp", "assertTrue", "size", "removeRequestProp", "assertTrue", "size", "assertNull", "getRequestProp", "assertFalse", "isAsync", "setInvokeType", "assertTrue", "isAsync", "setInvokeType", "assertTrue", "isAsync", "setInvokeType", "assertFalse", "isAsync"]}, "focal_class": {"identifier": "SofaRequest", "superclass": "extends RequestBase", "interfaces": "", "fields": [{"original_string": "private static final long   serialVersionUID = 7329530374415722876L;", "modifier": "private static final", "type": "long", "declarator": "serialVersionUID = 7329530374415722876L", "var_name": "serialVersionUID"}, {"original_string": "private String              targetAppName;", "modifier": "private", "type": "String", "declarator": "targetAppName", "var_name": "targetAppName"}, {"original_string": "private Map<String, Object> requestProps;", "modifier": "private", "type": "Map<String, Object>", "declarator": "requestProps", "var_name": "requestProps"}, {"original_string": "private transient Method               method;", "modifier": "private transient", "type": "Method", "declarator": "method", "var_name": "method"}, {"original_string": "private transient String               interfaceName;", "modifier": "private transient", "type": "String", "declarator": "interfaceName", "var_name": "interfaceName"}, {"original_string": "private transient byte                 serializeType;", "modifier": "private transient", "type": "byte", "declarator": "serializeType", "var_name": "serializeType"}, {"original_string": "private transient AbstractByteBuf      data;", "modifier": "private transient", "type": "AbstractByteBuf", "declarator": "data", "var_name": "data"}, {"original_string": "private transient String               invokeType;", "modifier": "private transient", "type": "String", "declarator": "invokeType", "var_name": "invokeType"}, {"original_string": "private transient SofaResponseCallback sofaResponseCallback;", "modifier": "private transient", "type": "SofaResponseCallback", "declarator": "sofaResponseCallback", "var_name": "sofaResponseCallback"}, {"original_string": "private transient Integer              timeout;", "modifier": "private transient", "type": "Integer", "declarator": "timeout", "var_name": "timeout"}], "methods": [{"identifier": "getRequestProp", "parameters": "(String key)", "modifiers": "public", "return": "Object", "signature": "Object getRequestProp(String key)", "full_signature": "public Object getRequestProp(String key)", "class_method_signature": "SofaRequest.getRequestProp(String key)", "testcase": false, "constructor": false}, {"identifier": "addRequestProp", "parameters": "(String key, Object value)", "modifiers": "public", "return": "void", "signature": "void addRequestProp(String key, Object value)", "full_signature": "public void addRequestProp(String key, Object value)", "class_method_signature": "SofaRequest.addRequestProp(String key, Object value)", "testcase": false, "constructor": false}, {"identifier": "removeRequestProp", "parameters": "(String key)", "modifiers": "public", "return": "void", "signature": "void removeRequestProp(String key)", "full_signature": "public void removeRequestProp(String key)", "class_method_signature": "SofaRequest.removeRequestProp(String key)", "testcase": false, "constructor": false}, {"identifier": "addRequestProps", "parameters": "(Map<String, Object> map)", "modifiers": "public", "return": "void", "signature": "void addRequestProps(Map<String, Object> map)", "full_signature": "public void addRequestProps(Map<String, Object> map)", "class_method_signature": "SofaRequest.addRequestProps(Map<String, Object> map)", "testcase": false, "constructor": false}, {"identifier": "getRequestProps", "parameters": "()", "modifiers": "public", "return": "Map<String, Object>", "signature": "Map<String, Object> getRequestProps()", "full_signature": "public Map<String, Object> getRequestProps()", "class_method_signature": "SofaRequest.getRequestProps()", "testcase": false, "constructor": false}, {"identifier": "getTargetAppName", "parameters": "()", "modifiers": "public", "return": "String", "signature": "String getTargetAppName()", "full_signature": "public String getTargetAppName()", "class_method_signature": "SofaRequest.getTargetAppName()", "testcase": false, "constructor": false}, {"identifier": "setTargetAppName", "parameters": "(String targetAppName)", "modifiers": "public", "return": "void", "signature": "void setTargetAppName(String targetAppName)", "full_signature": "public void setTargetAppName(String targetAppName)", "class_method_signature": "SofaRequest.setTargetAppName(String targetAppName)", "testcase": false, "constructor": false}, {"identifier": "getMethod", "parameters": "()", "modifiers": "public", "return": "Method", "signature": "Method getMethod()", "full_signature": "public Method getMethod()", "class_method_signature": "SofaRequest.getMethod()", "testcase": false, "constructor": false}, {"identifier": "setMethod", "parameters": "(Method method)", "modifiers": "public", "return": "void", "signature": "void setMethod(Method method)", "full_signature": "public void setMethod(Method method)", "class_method_signature": "SofaRequest.setMethod(Method method)", "testcase": false, "constructor": false}, {"identifier": "getSerializeType", "parameters": "()", "modifiers": "public", "return": "byte", "signature": "byte getSerializeType()", "full_signature": "public byte getSerializeType()", "class_method_signature": "SofaRequest.getSerializeType()", "testcase": false, "constructor": false}, {"identifier": "setSerializeType", "parameters": "(byte serializeType)", "modifiers": "public", "return": "SofaRequest", "signature": "SofaRequest setSerializeType(byte serializeType)", "full_signature": "public SofaRequest setSerializeType(byte serializeType)", "class_method_signature": "SofaRequest.setSerializeType(byte serializeType)", "testcase": false, "constructor": false}, {"identifier": "getInvokeType", "parameters": "()", "modifiers": "public", "return": "String", "signature": "String getInvokeType()", "full_signature": "public String getInvokeType()", "class_method_signature": "SofaRequest.getInvokeType()", "testcase": false, "constructor": false}, {"identifier": "setInvokeType", "parameters": "(String invokeType)", "modifiers": "public", "return": "SofaRequest", "signature": "SofaRequest setInvokeType(String invokeType)", "full_signature": "public SofaRequest setInvokeType(String invokeType)", "class_method_signature": "SofaRequest.setInvokeType(String invokeType)", "testcase": false, "constructor": false}, {"identifier": "getInterfaceName", "parameters": "()", "modifiers": "public", "return": "String", "signature": "String getInterfaceName()", "full_signature": "public String getInterfaceName()", "class_method_signature": "SofaRequest.getInterfaceName()", "testcase": false, "constructor": false}, {"identifier": "setInterfaceName", "parameters": "(String interfaceName)", "modifiers": "public", "return": "void", "signature": "void setInterfaceName(String interfaceName)", "full_signature": "public void setInterfaceName(String interfaceName)", "class_method_signature": "SofaRequest.setInterfaceName(String interfaceName)", "testcase": false, "constructor": false}, {"identifier": "getSofaResponseCallback", "parameters": "()", "modifiers": "public", "return": "SofaResponseCallback", "signature": "SofaResponseCallback getSofaResponseCallback()", "full_signature": "public SofaResponseCallback getSofaResponseCallback()", "class_method_signature": "SofaRequest.getSofaResponseCallback()", "testcase": false, "constructor": false}, {"identifier": "setSofaResponseCallback", "parameters": "(SofaResponseCallback sofaResponseCallback)", "modifiers": "public", "return": "SofaRequest", "signature": "SofaRequest setSofaResponseCallback(SofaResponseCallback sofaResponseCallback)", "full_signature": "public SofaRequest setSofaResponseCallback(SofaResponseCallback sofaResponseCallback)", "class_method_signature": "SofaRequest.setSofaResponseCallback(SofaResponseCallback sofaResponseCallback)", "testcase": false, "constructor": false}, {"identifier": "getTimeout", "parameters": "()", "modifiers": "public", "return": "Integer", "signature": "Integer getTimeout()", "full_signature": "public Integer getTimeout()", "class_method_signature": "SofaRequest.getTimeout()", "testcase": false, "constructor": false}, {"identifier": "setTimeout", "parameters": "(Integer timeout)", "modifiers": "public", "return": "SofaRequest", "signature": "SofaRequest setTimeout(Integer timeout)", "full_signature": "public SofaRequest setTimeout(Integer timeout)", "class_method_signature": "SofaRequest.setTimeout(Integer timeout)", "testcase": false, "constructor": false}, {"identifier": "getData", "parameters": "()", "modifiers": "public", "return": "AbstractByteBuf", "signature": "AbstractByteBuf getData()", "full_signature": "public AbstractByteBuf getData()", "class_method_signature": "SofaRequest.getData()", "testcase": false, "constructor": false}, {"identifier": "setData", "parameters": "(AbstractByteBuf data)", "modifiers": "public", "return": "SofaRequest", "signature": "SofaRequest setData(AbstractByteBuf data)", "full_signature": "public SofaRequest setData(AbstractByteBuf data)", "class_method_signature": "SofaRequest.setData(AbstractByteBuf data)", "testcase": false, "constructor": false}, {"identifier": "isAsync", "parameters": "()", "modifiers": "public", "return": "boolean", "signature": "boolean isAsync()", "full_signature": "public boolean isAsync()", "class_method_signature": "SofaRequest.isAsync()", "testcase": false, "constructor": false}], "file": "core/api/src/main/java/com/alipay/sofa/rpc/core/request/SofaRequest.java"}, "focal_method": {"identifier": "getRequestProp", "parameters": "(String key)", "modifiers": "public", "return": "Object", "body": "public Object getRequestProp(String key) {\n        return requestProps != null ? requestProps.get(key) : null;\n    }", "signature": "Object getRequestProp(String key)", "full_signature": "public Object getRequestProp(String key)", "class_method_signature": "SofaRequest.getRequestProp(String key)", "testcase": false, "constructor": false, "invocations": ["get"]}, "repository": {"repo_id": 128709824, "url": "https://github.com/sofastack/sofa-rpc", "stars": 3001, "created": "4/9/2018 3:32:04 AM +00:00", "updates": "2020-01-22T02:08:51+00:00", "fork": "False", "license": "licensed"}}