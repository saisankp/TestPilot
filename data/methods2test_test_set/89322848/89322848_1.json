{"test_class": {"identifier": "MasterServiceTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final Log LOG = LogFactory.getLog(MasterServiceTest.class);", "modifier": "private static final", "type": "Log", "declarator": "LOG = LogFactory.getLog(MasterServiceTest.class)", "var_name": "LOG"}, {"original_string": "private static final String LOCAL_FS = LocalFileSystem.DEFAULT_FS;", "modifier": "private static final", "type": "String", "declarator": "LOCAL_FS = LocalFileSystem.DEFAULT_FS", "var_name": "LOCAL_FS"}, {"original_string": "private static final String TMP_PATH = System.getProperty(\"java.io.tmpdir\", \"/tmp\");", "modifier": "private static final", "type": "String", "declarator": "TMP_PATH = System.getProperty(\"java.io.tmpdir\", \"/tmp\")", "var_name": "TMP_PATH"}, {"original_string": "private AngelClient angelClient;", "modifier": "private", "type": "AngelClient", "declarator": "angelClient", "var_name": "angelClient"}, {"original_string": "private WorkerGroupId group0Id;", "modifier": "private", "type": "WorkerGroupId", "declarator": "group0Id", "var_name": "group0Id"}, {"original_string": "private WorkerId worker0Id;", "modifier": "private", "type": "WorkerId", "declarator": "worker0Id", "var_name": "worker0Id"}, {"original_string": "private WorkerAttemptId worker0Attempt0Id;", "modifier": "private", "type": "WorkerAttemptId", "declarator": "worker0Attempt0Id", "var_name": "worker0Attempt0Id"}, {"original_string": "private TaskId task0Id;", "modifier": "private", "type": "TaskId", "declarator": "task0Id", "var_name": "task0Id"}, {"original_string": "private TaskId task1Id;", "modifier": "private", "type": "TaskId", "declarator": "task1Id", "var_name": "task1Id"}, {"original_string": "private ParameterServerId psId;", "modifier": "private", "type": "ParameterServerId", "declarator": "psId", "var_name": "psId"}, {"original_string": "private PSAttemptId psAttempt0Id;", "modifier": "private", "type": "PSAttemptId", "declarator": "psAttempt0Id", "var_name": "psAttempt0Id"}], "file": "angel-ps/core/src/test/java/com/tencent/angel/master/MasterServiceTest.java"}, "test_case": {"identifier": "testMasterService", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test public void testMasterService() throws Exception {\n    try {\n      LOG.info(\"===========================testMasterService===============================\");\n      Worker worker = LocalClusterContext.get().getWorker(worker0Attempt0Id).getWorker();\n      Location masterLoc =\n        LocalClusterContext.get().getMaster().getAppMaster().getAppContext().getMasterService()\n          .getLocation();\n      TConnection connection = TConnectionManager.getConnection(worker.getConf());\n      MasterProtocol master = connection.getMasterService(masterLoc.getIp(), masterLoc.getPort());\n\n      int psAgentId = master\n        .getPSAgentId(null, PSAgentMasterServiceProtos.GetPSAgentIdRequest.getDefaultInstance())\n        .getPsAgentId();\n\n      // worker register\n      WorkerAttemptId worker1Attempt0Id =\n        new WorkerAttemptId(new WorkerId(new WorkerGroupId(1), 0), 0);\n      WorkerRegisterRequest registeRequest =\n        WorkerRegisterRequest.newBuilder().setPsAgentId(psAgentId)\n          .setWorkerAttemptId(ProtobufUtil.convertToIdProto(worker1Attempt0Id))\n          .setLocation(LocationProto.newBuilder().setIp(\"10.10.10.10\").setPort(10000).build())\n          .build();\n      WorkerRegisterResponse registerResponse = master.workerRegister(null, registeRequest);\n      assertTrue(registerResponse.getCommand() == WorkerCommandProto.W_SHUTDOWN);\n\n      WorkerReportRequest.Builder reportBuilder = WorkerReportRequest.newBuilder();\n      Pair.Builder kvBuilder = Pair.newBuilder();\n      TaskStateProto.Builder taskBuilder = TaskStateProto.newBuilder();\n\n      reportBuilder.setWorkerAttemptId(ProtobufUtil.convertToIdProto(worker0Attempt0Id));\n\n      taskBuilder.setProgress(0.20f);\n      taskBuilder.setState(\"RUNNING\");\n      taskBuilder.setTaskId(ProtobufUtil.convertToIdProto(task0Id));\n      kvBuilder.setKey(\"task_key1\");\n      kvBuilder.setValue(\"100\");\n      taskBuilder.addCounters(kvBuilder.build());\n      kvBuilder.setKey(\"task_key2\");\n      kvBuilder.setValue(\"200\");\n      taskBuilder.addCounters(kvBuilder.build());\n      reportBuilder.addTaskReports(taskBuilder.build());\n\n      taskBuilder.setProgress(0.30f);\n      taskBuilder.setState(\"RUNNING\");\n      taskBuilder.setTaskId(ProtobufUtil.convertToIdProto(task1Id));\n      kvBuilder.setKey(\"task_key1\");\n      kvBuilder.setValue(\"1000\");\n      taskBuilder.addCounters(kvBuilder.build());\n      kvBuilder.setKey(\"task_key2\");\n      kvBuilder.setValue(\"2000\");\n      taskBuilder.addCounters(kvBuilder.build());\n      reportBuilder.addTaskReports(taskBuilder.build());\n\n      kvBuilder.setKey(\"worker_key1\");\n      kvBuilder.setValue(\"100\");\n      reportBuilder.addPairs(kvBuilder.build());\n      kvBuilder.setKey(\"worker_key2\");\n      kvBuilder.setValue(\"200\");\n      reportBuilder.addPairs(kvBuilder.build());\n\n      WorkerReportResponse reportResponse = master.workerReport(null, reportBuilder.build());\n      assertTrue(reportResponse.getCommand() == WorkerCommandProto.W_SUCCESS);\n      assertEquals(reportResponse.getActiveTaskNum(), 2);\n\n      AngelApplicationMaster angelAppMaster = LocalClusterContext.get().getMaster().getAppMaster();\n      WorkerAttempt worker0Attempt =\n        angelAppMaster.getAppContext().getWorkerManager().getWorker(worker0Attempt0Id.getWorkerId())\n          .getWorkerAttempt(worker0Attempt0Id);\n      assertTrue(worker0Attempt != null);\n      Map<String, String> workerMetrics = worker0Attempt.getMetrics();\n      String valueForWorkerKey1 = workerMetrics.get(\"worker_key1\");\n      String valueForWorkerKey2 = workerMetrics.get(\"worker_key2\");\n      assertNotNull(valueForWorkerKey1);\n      assertNotNull(valueForWorkerKey2);\n      assertEquals(valueForWorkerKey1, \"100\");\n      assertEquals(valueForWorkerKey2, \"200\");\n\n      AMTaskManager amTaskManager = angelAppMaster.getAppContext().getTaskManager();\n      AMTask task0 = amTaskManager.getTask(task0Id);\n      AMTask task1 = amTaskManager.getTask(task1Id);\n      assertTrue(task0 != null);\n      assertTrue(task1 != null);\n      Map<String, String> task0Metrics = task0.getMetrics();\n      Map<String, String> task1Metrics = task1.getMetrics();\n      String valueForTask0Key1 = task0Metrics.get(\"task_key1\");\n      String valueForTask0Key2 = task0Metrics.get(\"task_key2\");\n      String valueForTask1Key1 = task1Metrics.get(\"task_key1\");\n      String valueForTask1Key2 = task1Metrics.get(\"task_key2\");\n      assertTrue(valueForTask0Key1 != null);\n      assertTrue(valueForTask0Key2 != null);\n      assertTrue(valueForTask1Key1 != null);\n      assertTrue(valueForTask1Key2 != null);\n      assertEquals(valueForTask0Key1, \"100\");\n      assertEquals(valueForTask0Key2, \"200\");\n      assertEquals(valueForTask1Key1, \"1000\");\n      assertEquals(valueForTask1Key2, \"2000\");\n      assertEquals(task0.getProgress(), 0.20f, 0.000001);\n      assertEquals(task1.getProgress(), 0.30f, 0.000001);\n    } catch (Exception x) {\n      LOG.error(\"run testMasterService failed \", x);\n      throw x;\n    }\n  }", "signature": "void testMasterService()", "full_signature": "@Test public void testMasterService()", "class_method_signature": "MasterServiceTest.testMasterService()", "testcase": true, "constructor": false, "invocations": ["info", "getWorker", "getWorker", "get", "getLocation", "getMasterService", "getAppContext", "getAppMaster", "getMaster", "get", "getConnection", "getConf", "getMasterService", "getIp", "getPort", "getPsAgentId", "getPSAgentId", "getDefaultInstance", "build", "setLocation", "setWorkerAttemptId", "setPsAgentId", "newBuilder", "convertToIdProto", "build", "setPort", "setIp", "newBuilder", "workerRegister", "assertTrue", "getCommand", "newBuilder", "newBuilder", "newBuilder", "setWorkerAttemptId", "convertToIdProto", "setProgress", "setState", "setTaskId", "convertToIdProto", "setKey", "setValue", "addCounters", "build", "setKey", "setValue", "addCounters", "build", "addTaskReports", "build", "setProgress", "setState", "setTaskId", "convertToIdProto", "setKey", "setValue", "addCounters", "build", "setKey", "setValue", "addCounters", "build", "addTaskReports", "build", "setKey", "setValue", "addPairs", "build", "setKey", "setValue", "addPairs", "build", "workerReport", "build", "assertTrue", "getCommand", "assertEquals", "getActiveTaskNum", "getAppMaster", "getMaster", "get", "getWorkerAttempt", "getWorker", "getWorkerManager", "getAppContext", "getWorkerId", "assertTrue", "getMetrics", "get", "get", "assertNotNull", "assertNotNull", "assertEquals", "assertEquals", "getTaskManager", "getAppContext", "getTask", "getTask", "assertTrue", "assertTrue", "getMetrics", "getMetrics", "get", "get", "get", "get", "assertTrue", "assertTrue", "assertTrue", "assertTrue", "assertEquals", "assertEquals", "assertEquals", "assertEquals", "assertEquals", "getProgress", "assertEquals", "getProgress", "error"]}, "focal_class": {"identifier": "MasterService", "superclass": "extends AbstractService", "interfaces": "implements MasterProtocol", "fields": [{"original_string": "private static final Log LOG = LogFactory.getLog(MasterService.class);", "modifier": "private static final", "type": "Log", "declarator": "LOG = LogFactory.getLog(MasterService.class)", "var_name": "LOG"}, {"original_string": "private final AMContext context;", "modifier": "private final", "type": "AMContext", "declarator": "context", "var_name": "context"}, {"original_string": "private RpcServer rpcServer;", "modifier": "private", "type": "RpcServer", "declarator": "rpcServer", "var_name": "rpcServer"}, {"original_string": "private Thread timeOutChecker;", "modifier": "private", "type": "Thread", "declarator": "timeOutChecker", "var_name": "timeOutChecker"}, {"original_string": "private final AtomicBoolean stopped;", "modifier": "private final", "type": "AtomicBoolean", "declarator": "stopped", "var_name": "stopped"}, {"original_string": "private final List<MatrixMeta> matrics;", "modifier": "private final", "type": "List<MatrixMeta>", "declarator": "matrics", "var_name": "matrics"}, {"original_string": "private volatile Location location;", "modifier": "private volatile", "type": "Location", "declarator": "location", "var_name": "location"}, {"original_string": "private final int yarnNMWebPort;", "modifier": "private final", "type": "int", "declarator": "yarnNMWebPort", "var_name": "yarnNMWebPort"}], "methods": [{"identifier": "MasterService", "parameters": "(AMContext context)", "modifiers": "public", "return": "", "signature": " MasterService(AMContext context)", "full_signature": "public  MasterService(AMContext context)", "class_method_signature": "MasterService.MasterService(AMContext context)", "testcase": false, "constructor": true}, {"identifier": "getYarnNMWebPort", "parameters": "(Configuration conf)", "modifiers": "private", "return": "int", "signature": "int getYarnNMWebPort(Configuration conf)", "full_signature": "private int getYarnNMWebPort(Configuration conf)", "class_method_signature": "MasterService.getYarnNMWebPort(Configuration conf)", "testcase": false, "constructor": false}, {"identifier": "getProtocolVersion", "parameters": "(String protocol, long clientVersion)", "modifiers": "@Override public", "return": "long", "signature": "long getProtocolVersion(String protocol, long clientVersion)", "full_signature": "@Override public long getProtocolVersion(String protocol, long clientVersion)", "class_method_signature": "MasterService.getProtocolVersion(String protocol, long clientVersion)", "testcase": false, "constructor": false}, {"identifier": "psReport", "parameters": "(\n      RpcController controller, PSReportRequest request)", "modifiers": "@SuppressWarnings(\"unchecked\") @Override public", "return": "PSReportResponse", "signature": "PSReportResponse psReport(\n      RpcController controller, PSReportRequest request)", "full_signature": "@SuppressWarnings(\"unchecked\") @Override public PSReportResponse psReport(\n      RpcController controller, PSReportRequest request)", "class_method_signature": "MasterService.psReport(\n      RpcController controller, PSReportRequest request)", "testcase": false, "constructor": false}, {"identifier": "fetchMinClock", "parameters": "(RpcController controller,\n      PSAgentMasterServiceProtos.FetchMinClockRequest request)", "modifiers": "@Override public", "return": "PSAgentMasterServiceProtos.FetchMinClockResponse", "signature": "PSAgentMasterServiceProtos.FetchMinClockResponse fetchMinClock(RpcController controller,\n      PSAgentMasterServiceProtos.FetchMinClockRequest request)", "full_signature": "@Override public PSAgentMasterServiceProtos.FetchMinClockResponse fetchMinClock(RpcController controller,\n      PSAgentMasterServiceProtos.FetchMinClockRequest request)", "class_method_signature": "MasterService.fetchMinClock(RpcController controller,\n      PSAgentMasterServiceProtos.FetchMinClockRequest request)", "testcase": false, "constructor": false}, {"identifier": "psRegister", "parameters": "(\n      RpcController controller, PSRegisterRequest request)", "modifiers": "@SuppressWarnings(\"unchecked\") @Override public", "return": "PSRegisterResponse", "signature": "PSRegisterResponse psRegister(\n      RpcController controller, PSRegisterRequest request)", "full_signature": "@SuppressWarnings(\"unchecked\") @Override public PSRegisterResponse psRegister(\n      RpcController controller, PSRegisterRequest request)", "class_method_signature": "MasterService.psRegister(\n      RpcController controller, PSRegisterRequest request)", "testcase": false, "constructor": false}, {"identifier": "serviceStart", "parameters": "()", "modifiers": "@Override protected", "return": "void", "signature": "void serviceStart()", "full_signature": "@Override protected void serviceStart()", "class_method_signature": "MasterService.serviceStart()", "testcase": false, "constructor": false}, {"identifier": "serviceInit", "parameters": "(Configuration conf)", "modifiers": "@Override protected", "return": "void", "signature": "void serviceInit(Configuration conf)", "full_signature": "@Override protected void serviceInit(Configuration conf)", "class_method_signature": "MasterService.serviceInit(Configuration conf)", "testcase": false, "constructor": false}, {"identifier": "serviceStop", "parameters": "()", "modifiers": "@Override protected", "return": "void", "signature": "void serviceStop()", "full_signature": "@Override protected void serviceStop()", "class_method_signature": "MasterService.serviceStop()", "testcase": false, "constructor": false}, {"identifier": "getRpcServer", "parameters": "()", "modifiers": "public", "return": "RpcServer", "signature": "RpcServer getRpcServer()", "full_signature": "public RpcServer getRpcServer()", "class_method_signature": "MasterService.getRpcServer()", "testcase": false, "constructor": false}, {"identifier": "getJobReport", "parameters": "(RpcController controller,\n      GetJobReportRequest request)", "modifiers": "@Override public", "return": "GetJobReportResponse", "signature": "GetJobReportResponse getJobReport(RpcController controller,\n      GetJobReportRequest request)", "full_signature": "@Override public GetJobReportResponse getJobReport(RpcController controller,\n      GetJobReportRequest request)", "class_method_signature": "MasterService.getJobReport(RpcController controller,\n      GetJobReportRequest request)", "testcase": false, "constructor": false}, {"identifier": "getWorkerLogDir", "parameters": "(RpcController controller,\n      GetWorkerLogDirRequest request)", "modifiers": "@Override public", "return": "GetWorkerLogDirResponse", "signature": "GetWorkerLogDirResponse getWorkerLogDir(RpcController controller,\n      GetWorkerLogDirRequest request)", "full_signature": "@Override public GetWorkerLogDirResponse getWorkerLogDir(RpcController controller,\n      GetWorkerLogDirRequest request)", "class_method_signature": "MasterService.getWorkerLogDir(RpcController controller,\n      GetWorkerLogDirRequest request)", "testcase": false, "constructor": false}, {"identifier": "createMatrices", "parameters": "(RpcController controller,\n      CreateMatricesRequest request)", "modifiers": "@Override public", "return": "CreateMatricesResponse", "signature": "CreateMatricesResponse createMatrices(RpcController controller,\n      CreateMatricesRequest request)", "full_signature": "@Override public CreateMatricesResponse createMatrices(RpcController controller,\n      CreateMatricesRequest request)", "class_method_signature": "MasterService.createMatrices(RpcController controller,\n      CreateMatricesRequest request)", "testcase": false, "constructor": false}, {"identifier": "getMatrices", "parameters": "(RpcController controller,\n      GetMatricesRequest request)", "modifiers": "@Override public", "return": "GetMatricesResponse", "signature": "GetMatricesResponse getMatrices(RpcController controller,\n      GetMatricesRequest request)", "full_signature": "@Override public GetMatricesResponse getMatrices(RpcController controller,\n      GetMatricesRequest request)", "class_method_signature": "MasterService.getMatrices(RpcController controller,\n      GetMatricesRequest request)", "testcase": false, "constructor": false}, {"identifier": "releaseMatrices", "parameters": "(RpcController controller,\n      ReleaseMatricesRequest request)", "modifiers": "@Override public", "return": "ReleaseMatricesResponse", "signature": "ReleaseMatricesResponse releaseMatrices(RpcController controller,\n      ReleaseMatricesRequest request)", "full_signature": "@Override public ReleaseMatricesResponse releaseMatrices(RpcController controller,\n      ReleaseMatricesRequest request)", "class_method_signature": "MasterService.releaseMatrices(RpcController controller,\n      ReleaseMatricesRequest request)", "testcase": false, "constructor": false}, {"identifier": "getRPCListenAddr", "parameters": "()", "modifiers": "public", "return": "InetSocketAddress", "signature": "InetSocketAddress getRPCListenAddr()", "full_signature": "public InetSocketAddress getRPCListenAddr()", "class_method_signature": "MasterService.getRPCListenAddr()", "testcase": false, "constructor": false}, {"identifier": "psDone", "parameters": "(RpcController controller,\n      PSDoneRequest request)", "modifiers": "@SuppressWarnings(\"unchecked\") @Override public", "return": "PSDoneResponse", "signature": "PSDoneResponse psDone(RpcController controller,\n      PSDoneRequest request)", "full_signature": "@SuppressWarnings(\"unchecked\") @Override public PSDoneResponse psDone(RpcController controller,\n      PSDoneRequest request)", "class_method_signature": "MasterService.psDone(RpcController controller,\n      PSDoneRequest request)", "testcase": false, "constructor": false}, {"identifier": "psError", "parameters": "(RpcController controller,\n      PSErrorRequest request)", "modifiers": "@SuppressWarnings(\"unchecked\") @Override public", "return": "PSErrorResponse", "signature": "PSErrorResponse psError(RpcController controller,\n      PSErrorRequest request)", "full_signature": "@SuppressWarnings(\"unchecked\") @Override public PSErrorResponse psError(RpcController controller,\n      PSErrorRequest request)", "class_method_signature": "MasterService.psError(RpcController controller,\n      PSErrorRequest request)", "testcase": false, "constructor": false}, {"identifier": "getAllMatrixMeta", "parameters": "(RpcController controller,\n      GetAllMatrixMetaRequest request)", "modifiers": "@Override public", "return": "GetAllMatrixMetaResponse", "signature": "GetAllMatrixMetaResponse getAllMatrixMeta(RpcController controller,\n      GetAllMatrixMetaRequest request)", "full_signature": "@Override public GetAllMatrixMetaResponse getAllMatrixMeta(RpcController controller,\n      GetAllMatrixMetaRequest request)", "class_method_signature": "MasterService.getAllMatrixMeta(RpcController controller,\n      GetAllMatrixMetaRequest request)", "testcase": false, "constructor": false}, {"identifier": "getAllPSLocation", "parameters": "(RpcController controller,\n      GetAllPSLocationRequest request)", "modifiers": "@Override public", "return": "GetAllPSLocationResponse", "signature": "GetAllPSLocationResponse getAllPSLocation(RpcController controller,\n      GetAllPSLocationRequest request)", "full_signature": "@Override public GetAllPSLocationResponse getAllPSLocation(RpcController controller,\n      GetAllPSLocationRequest request)", "class_method_signature": "MasterService.getAllPSLocation(RpcController controller,\n      GetAllPSLocationRequest request)", "testcase": false, "constructor": false}, {"identifier": "getPSLocation", "parameters": "(RpcController controller,\n      GetPSLocationRequest request)", "modifiers": "@Override public", "return": "GetPSLocationReponse", "signature": "GetPSLocationReponse getPSLocation(RpcController controller,\n      GetPSLocationRequest request)", "full_signature": "@Override public GetPSLocationReponse getPSLocation(RpcController controller,\n      GetPSLocationRequest request)", "class_method_signature": "MasterService.getPSLocation(RpcController controller,\n      GetPSLocationRequest request)", "testcase": false, "constructor": false}, {"identifier": "getPartLocation", "parameters": "(RpcController controller,\n      GetPartLocationRequest request)", "modifiers": "@Override public", "return": "GetPartLocationResponse", "signature": "GetPartLocationResponse getPartLocation(RpcController controller,\n      GetPartLocationRequest request)", "full_signature": "@Override public GetPartLocationResponse getPartLocation(RpcController controller,\n      GetPartLocationRequest request)", "class_method_signature": "MasterService.getPartLocation(RpcController controller,\n      GetPartLocationRequest request)", "testcase": false, "constructor": false}, {"identifier": "getIteration", "parameters": "(RpcController controller,\n      GetIterationRequest request)", "modifiers": "@Override public", "return": "GetIterationResponse", "signature": "GetIterationResponse getIteration(RpcController controller,\n      GetIterationRequest request)", "full_signature": "@Override public GetIterationResponse getIteration(RpcController controller,\n      GetIterationRequest request)", "class_method_signature": "MasterService.getIteration(RpcController controller,\n      GetIterationRequest request)", "testcase": false, "constructor": false}, {"identifier": "getPSMatricesMeta", "parameters": "(RpcController controller,\n      GetPSMatricesMetaRequest request)", "modifiers": "@Override public", "return": "GetPSMatricesResponse", "signature": "GetPSMatricesResponse getPSMatricesMeta(RpcController controller,\n      GetPSMatricesMetaRequest request)", "full_signature": "@Override public GetPSMatricesResponse getPSMatricesMeta(RpcController controller,\n      GetPSMatricesMetaRequest request)", "class_method_signature": "MasterService.getPSMatricesMeta(RpcController controller,\n      GetPSMatricesMetaRequest request)", "testcase": false, "constructor": false}, {"identifier": "saveFinish", "parameters": "(RpcController controller,\n      SaveFinishRequest request)", "modifiers": "@Override public", "return": "SaveFinishResponse", "signature": "SaveFinishResponse saveFinish(RpcController controller,\n      SaveFinishRequest request)", "full_signature": "@Override public SaveFinishResponse saveFinish(RpcController controller,\n      SaveFinishRequest request)", "class_method_signature": "MasterService.saveFinish(RpcController controller,\n      SaveFinishRequest request)", "testcase": false, "constructor": false}, {"identifier": "loadFinish", "parameters": "(RpcController controller,\n      LoadFinishRequest request)", "modifiers": "@Override public", "return": "LoadFinishResponse", "signature": "LoadFinishResponse loadFinish(RpcController controller,\n      LoadFinishRequest request)", "full_signature": "@Override public LoadFinishResponse loadFinish(RpcController controller,\n      LoadFinishRequest request)", "class_method_signature": "MasterService.loadFinish(RpcController controller,\n      LoadFinishRequest request)", "testcase": false, "constructor": false}, {"identifier": "saveStart", "parameters": "(RpcController controller, SaveStartRequest request)", "modifiers": "@Override public", "return": "SaveStartResponse", "signature": "SaveStartResponse saveStart(RpcController controller, SaveStartRequest request)", "full_signature": "@Override public SaveStartResponse saveStart(RpcController controller, SaveStartRequest request)", "class_method_signature": "MasterService.saveStart(RpcController controller, SaveStartRequest request)", "testcase": false, "constructor": false}, {"identifier": "loadStart", "parameters": "(RpcController controller, LoadStartRequest request)", "modifiers": "@Override public", "return": "LoadStartResponse", "signature": "LoadStartResponse loadStart(RpcController controller, LoadStartRequest request)", "full_signature": "@Override public LoadStartResponse loadStart(RpcController controller, LoadStartRequest request)", "class_method_signature": "MasterService.loadStart(RpcController controller, LoadStartRequest request)", "testcase": false, "constructor": false}, {"identifier": "getSaveResults", "parameters": "(RpcController controller,\n      GetSaveResultsRequest request)", "modifiers": "@Override public", "return": "GetSaveResultsResponse", "signature": "GetSaveResultsResponse getSaveResults(RpcController controller,\n      GetSaveResultsRequest request)", "full_signature": "@Override public GetSaveResultsResponse getSaveResults(RpcController controller,\n      GetSaveResultsRequest request)", "class_method_signature": "MasterService.getSaveResults(RpcController controller,\n      GetSaveResultsRequest request)", "testcase": false, "constructor": false}, {"identifier": "getCheckpointResults", "parameters": "(RpcController controller,\n      GetCheckpointsRequest request)", "modifiers": "@Override public", "return": "GetCheckpointsResponse", "signature": "GetCheckpointsResponse getCheckpointResults(RpcController controller,\n      GetCheckpointsRequest request)", "full_signature": "@Override public GetCheckpointsResponse getCheckpointResults(RpcController controller,\n      GetCheckpointsRequest request)", "class_method_signature": "MasterService.getCheckpointResults(RpcController controller,\n      GetCheckpointsRequest request)", "testcase": false, "constructor": false}, {"identifier": "getStoredPss", "parameters": "(RpcController controller,\n      GetStoredPssRequest request)", "modifiers": "@Override public", "return": "GetStoredPssResponse", "signature": "GetStoredPssResponse getStoredPss(RpcController controller,\n      GetStoredPssRequest request)", "full_signature": "@Override public GetStoredPssResponse getStoredPss(RpcController controller,\n      GetStoredPssRequest request)", "class_method_signature": "MasterService.getStoredPss(RpcController controller,\n      GetStoredPssRequest request)", "testcase": false, "constructor": false}, {"identifier": "getPSAgentId", "parameters": "(RpcController controller,\n      GetPSAgentIdRequest request)", "modifiers": "@Override public", "return": "GetPSAgentIdResponse", "signature": "GetPSAgentIdResponse getPSAgentId(RpcController controller,\n      GetPSAgentIdRequest request)", "full_signature": "@Override public GetPSAgentIdResponse getPSAgentId(RpcController controller,\n      GetPSAgentIdRequest request)", "class_method_signature": "MasterService.getPSAgentId(RpcController controller,\n      GetPSAgentIdRequest request)", "testcase": false, "constructor": false}, {"identifier": "checkPSExited", "parameters": "(RpcController controller,\n      CheckPSExitRequest request)", "modifiers": "@Override public", "return": "CheckPSExitResponse", "signature": "CheckPSExitResponse checkPSExited(RpcController controller,\n      CheckPSExitRequest request)", "full_signature": "@Override public CheckPSExitResponse checkPSExited(RpcController controller,\n      CheckPSExitRequest request)", "class_method_signature": "MasterService.checkPSExited(RpcController controller,\n      CheckPSExitRequest request)", "testcase": false, "constructor": false}, {"identifier": "psAgentReport", "parameters": "(\n      RpcController controller, PSAgentReportRequest request)", "modifiers": "@SuppressWarnings(\"unchecked\") @Override public", "return": "PSAgentReportResponse", "signature": "PSAgentReportResponse psAgentReport(\n      RpcController controller, PSAgentReportRequest request)", "full_signature": "@SuppressWarnings(\"unchecked\") @Override public PSAgentReportResponse psAgentReport(\n      RpcController controller, PSAgentReportRequest request)", "class_method_signature": "MasterService.psAgentReport(\n      RpcController controller, PSAgentReportRequest request)", "testcase": false, "constructor": false}, {"identifier": "psAgentRegister", "parameters": "(\n      RpcController controller, PSAgentRegisterRequest request)", "modifiers": "@SuppressWarnings(\"unchecked\") @Override public", "return": "PSAgentRegisterResponse", "signature": "PSAgentRegisterResponse psAgentRegister(\n      RpcController controller, PSAgentRegisterRequest request)", "full_signature": "@SuppressWarnings(\"unchecked\") @Override public PSAgentRegisterResponse psAgentRegister(\n      RpcController controller, PSAgentRegisterRequest request)", "class_method_signature": "MasterService.psAgentRegister(\n      RpcController controller, PSAgentRegisterRequest request)", "testcase": false, "constructor": false}, {"identifier": "psAgentDone", "parameters": "(\n      RpcController controller, PSAgentDoneRequest request)", "modifiers": "@SuppressWarnings(\"unchecked\") @Override public", "return": "PSAgentDoneResponse", "signature": "PSAgentDoneResponse psAgentDone(\n      RpcController controller, PSAgentDoneRequest request)", "full_signature": "@SuppressWarnings(\"unchecked\") @Override public PSAgentDoneResponse psAgentDone(\n      RpcController controller, PSAgentDoneRequest request)", "class_method_signature": "MasterService.psAgentDone(\n      RpcController controller, PSAgentDoneRequest request)", "testcase": false, "constructor": false}, {"identifier": "psAgentError", "parameters": "(\n      RpcController controller, PSAgentErrorRequest request)", "modifiers": "@SuppressWarnings(\"unchecked\") @Override public", "return": "PSAgentErrorResponse", "signature": "PSAgentErrorResponse psAgentError(\n      RpcController controller, PSAgentErrorRequest request)", "full_signature": "@SuppressWarnings(\"unchecked\") @Override public PSAgentErrorResponse psAgentError(\n      RpcController controller, PSAgentErrorRequest request)", "class_method_signature": "MasterService.psAgentError(\n      RpcController controller, PSAgentErrorRequest request)", "testcase": false, "constructor": false}, {"identifier": "getExecuteUnitDesc", "parameters": "(RpcController controller,\n      GetExecuteUnitDescRequest request)", "modifiers": "@Override public", "return": "GetExecuteUnitDescResponse", "signature": "GetExecuteUnitDescResponse getExecuteUnitDesc(RpcController controller,\n      GetExecuteUnitDescRequest request)", "full_signature": "@Override public GetExecuteUnitDescResponse getExecuteUnitDesc(RpcController controller,\n      GetExecuteUnitDescRequest request)", "class_method_signature": "MasterService.getExecuteUnitDesc(RpcController controller,\n      GetExecuteUnitDescRequest request)", "testcase": false, "constructor": false}, {"identifier": "workerReport", "parameters": "(\n      RpcController controller, WorkerReportRequest request)", "modifiers": "@SuppressWarnings(\"unchecked\") @Override public", "return": "WorkerReportResponse", "signature": "WorkerReportResponse workerReport(\n      RpcController controller, WorkerReportRequest request)", "full_signature": "@SuppressWarnings(\"unchecked\") @Override public WorkerReportResponse workerReport(\n      RpcController controller, WorkerReportRequest request)", "class_method_signature": "MasterService.workerReport(\n      RpcController controller, WorkerReportRequest request)", "testcase": false, "constructor": false}, {"identifier": "workerRegister", "parameters": "(\n      RpcController controller, WorkerRegisterRequest request)", "modifiers": "@SuppressWarnings(\"unchecked\") @Override public", "return": "WorkerRegisterResponse", "signature": "WorkerRegisterResponse workerRegister(\n      RpcController controller, WorkerRegisterRequest request)", "full_signature": "@SuppressWarnings(\"unchecked\") @Override public WorkerRegisterResponse workerRegister(\n      RpcController controller, WorkerRegisterRequest request)", "class_method_signature": "MasterService.workerRegister(\n      RpcController controller, WorkerRegisterRequest request)", "testcase": false, "constructor": false}, {"identifier": "getWorkerGroupMetaInfo", "parameters": "(RpcController controller,\n      GetWorkerGroupMetaInfoRequest request)", "modifiers": "@Override public", "return": "GetWorkerGroupMetaInfoResponse", "signature": "GetWorkerGroupMetaInfoResponse getWorkerGroupMetaInfo(RpcController controller,\n      GetWorkerGroupMetaInfoRequest request)", "full_signature": "@Override public GetWorkerGroupMetaInfoResponse getWorkerGroupMetaInfo(RpcController controller,\n      GetWorkerGroupMetaInfoRequest request)", "class_method_signature": "MasterService.getWorkerGroupMetaInfo(RpcController controller,\n      GetWorkerGroupMetaInfoRequest request)", "testcase": false, "constructor": false}, {"identifier": "workerDone", "parameters": "(\n      RpcController controller, WorkerDoneRequest request)", "modifiers": "@SuppressWarnings(\"unchecked\") @Override public", "return": "WorkerDoneResponse", "signature": "WorkerDoneResponse workerDone(\n      RpcController controller, WorkerDoneRequest request)", "full_signature": "@SuppressWarnings(\"unchecked\") @Override public WorkerDoneResponse workerDone(\n      RpcController controller, WorkerDoneRequest request)", "class_method_signature": "MasterService.workerDone(\n      RpcController controller, WorkerDoneRequest request)", "testcase": false, "constructor": false}, {"identifier": "workerError", "parameters": "(\n      RpcController controller, WorkerErrorRequest request)", "modifiers": "@SuppressWarnings(\"unchecked\") @Override public", "return": "WorkerErrorResponse", "signature": "WorkerErrorResponse workerError(\n      RpcController controller, WorkerErrorRequest request)", "full_signature": "@SuppressWarnings(\"unchecked\") @Override public WorkerErrorResponse workerError(\n      RpcController controller, WorkerErrorRequest request)", "class_method_signature": "MasterService.workerError(\n      RpcController controller, WorkerErrorRequest request)", "testcase": false, "constructor": false}, {"identifier": "getWorkerGroupSuccessNum", "parameters": "(\n      RpcController controller, GetWorkerGroupSuccessNumRequest request)", "modifiers": "@Override public", "return": "GetWorkerGroupSuccessNumResponse", "signature": "GetWorkerGroupSuccessNumResponse getWorkerGroupSuccessNum(\n      RpcController controller, GetWorkerGroupSuccessNumRequest request)", "full_signature": "@Override public GetWorkerGroupSuccessNumResponse getWorkerGroupSuccessNum(\n      RpcController controller, GetWorkerGroupSuccessNumRequest request)", "class_method_signature": "MasterService.getWorkerGroupSuccessNum(\n      RpcController controller, GetWorkerGroupSuccessNumRequest request)", "testcase": false, "constructor": false}, {"identifier": "getMatrics", "parameters": "()", "modifiers": "public", "return": "List<MatrixMeta>", "signature": "List<MatrixMeta> getMatrics()", "full_signature": "public List<MatrixMeta> getMatrics()", "class_method_signature": "MasterService.getMatrics()", "testcase": false, "constructor": false}, {"identifier": "taskClock", "parameters": "(RpcController controller, TaskClockRequest request)", "modifiers": "@Override public", "return": "TaskClockResponse", "signature": "TaskClockResponse taskClock(RpcController controller, TaskClockRequest request)", "full_signature": "@Override public TaskClockResponse taskClock(RpcController controller, TaskClockRequest request)", "class_method_signature": "MasterService.taskClock(RpcController controller, TaskClockRequest request)", "testcase": false, "constructor": false}, {"identifier": "taskIteration", "parameters": "(RpcController controller,\n      TaskIterationRequest request)", "modifiers": "@Override public", "return": "TaskIterationResponse", "signature": "TaskIterationResponse taskIteration(RpcController controller,\n      TaskIterationRequest request)", "full_signature": "@Override public TaskIterationResponse taskIteration(RpcController controller,\n      TaskIterationRequest request)", "class_method_signature": "MasterService.taskIteration(RpcController controller,\n      TaskIterationRequest request)", "testcase": false, "constructor": false}, {"identifier": "taskCountersUpdate", "parameters": "(\n      RpcController controller, PSAgentMasterServiceProtos.TaskCounterUpdateRequest request)", "modifiers": "@Override public", "return": "PSAgentMasterServiceProtos.TaskCountersUpdateResponse", "signature": "PSAgentMasterServiceProtos.TaskCountersUpdateResponse taskCountersUpdate(\n      RpcController controller, PSAgentMasterServiceProtos.TaskCounterUpdateRequest request)", "full_signature": "@Override public PSAgentMasterServiceProtos.TaskCountersUpdateResponse taskCountersUpdate(\n      RpcController controller, PSAgentMasterServiceProtos.TaskCounterUpdateRequest request)", "class_method_signature": "MasterService.taskCountersUpdate(\n      RpcController controller, PSAgentMasterServiceProtos.TaskCounterUpdateRequest request)", "testcase": false, "constructor": false}, {"identifier": "setAlgoMetrics", "parameters": "(\n      RpcController controller, PSAgentMasterServiceProtos.SetAlgoMetricsRequest request)", "modifiers": "@Override public", "return": "PSAgentMasterServiceProtos.SetAlgoMetricsResponse", "signature": "PSAgentMasterServiceProtos.SetAlgoMetricsResponse setAlgoMetrics(\n      RpcController controller, PSAgentMasterServiceProtos.SetAlgoMetricsRequest request)", "full_signature": "@Override public PSAgentMasterServiceProtos.SetAlgoMetricsResponse setAlgoMetrics(\n      RpcController controller, PSAgentMasterServiceProtos.SetAlgoMetricsRequest request)", "class_method_signature": "MasterService.setAlgoMetrics(\n      RpcController controller, PSAgentMasterServiceProtos.SetAlgoMetricsRequest request)", "testcase": false, "constructor": false}, {"identifier": "psFailedReport", "parameters": "(RpcController controller,\n      PSFailedReportRequest request)", "modifiers": "@Override public", "return": "PSFailedReportResponse", "signature": "PSFailedReportResponse psFailedReport(RpcController controller,\n      PSFailedReportRequest request)", "full_signature": "@Override public PSFailedReportResponse psFailedReport(RpcController controller,\n      PSFailedReportRequest request)", "class_method_signature": "MasterService.psFailedReport(RpcController controller,\n      PSFailedReportRequest request)", "testcase": false, "constructor": false}, {"identifier": "getTaskMatrixClocks", "parameters": "(RpcController controller,\n      GetTaskMatrixClockRequest request)", "modifiers": "@Override public", "return": "GetTaskMatrixClockResponse", "signature": "GetTaskMatrixClockResponse getTaskMatrixClocks(RpcController controller,\n      GetTaskMatrixClockRequest request)", "full_signature": "@Override public GetTaskMatrixClockResponse getTaskMatrixClocks(RpcController controller,\n      GetTaskMatrixClockRequest request)", "class_method_signature": "MasterService.getTaskMatrixClocks(RpcController controller,\n      GetTaskMatrixClockRequest request)", "testcase": false, "constructor": false}, {"identifier": "ping", "parameters": "(RpcController controller, PingRequest request)", "modifiers": "@Override public", "return": "PingResponse", "signature": "PingResponse ping(RpcController controller, PingRequest request)", "full_signature": "@Override public PingResponse ping(RpcController controller, PingRequest request)", "class_method_signature": "MasterService.ping(RpcController controller, PingRequest request)", "testcase": false, "constructor": false}, {"identifier": "getLocation", "parameters": "()", "modifiers": "public", "return": "Location", "signature": "Location getLocation()", "full_signature": "public Location getLocation()", "class_method_signature": "MasterService.getLocation()", "testcase": false, "constructor": false}, {"identifier": "start", "parameters": "(RpcController controller, StartRequest request)", "modifiers": "@Override public", "return": "StartResponse", "signature": "StartResponse start(RpcController controller, StartRequest request)", "full_signature": "@Override public StartResponse start(RpcController controller, StartRequest request)", "class_method_signature": "MasterService.start(RpcController controller, StartRequest request)", "testcase": false, "constructor": false}, {"identifier": "save", "parameters": "(RpcController controller,\n      SaveRequest request)", "modifiers": "@SuppressWarnings(\"unchecked\") @Override public", "return": "SaveResponse", "signature": "SaveResponse save(RpcController controller,\n      SaveRequest request)", "full_signature": "@SuppressWarnings(\"unchecked\") @Override public SaveResponse save(RpcController controller,\n      SaveRequest request)", "class_method_signature": "MasterService.save(RpcController controller,\n      SaveRequest request)", "testcase": false, "constructor": false}, {"identifier": "load", "parameters": "(RpcController controller, LoadRequest request)", "modifiers": "@Override public", "return": "LoadResponse", "signature": "LoadResponse load(RpcController controller, LoadRequest request)", "full_signature": "@Override public LoadResponse load(RpcController controller, LoadRequest request)", "class_method_signature": "MasterService.load(RpcController controller, LoadRequest request)", "testcase": false, "constructor": false}, {"identifier": "stop", "parameters": "(RpcController controller,\n      ClientMasterServiceProtos.StopRequest request)", "modifiers": "@Override public", "return": "ClientMasterServiceProtos.StopResponse", "signature": "ClientMasterServiceProtos.StopResponse stop(RpcController controller,\n      ClientMasterServiceProtos.StopRequest request)", "full_signature": "@Override public ClientMasterServiceProtos.StopResponse stop(RpcController controller,\n      ClientMasterServiceProtos.StopRequest request)", "class_method_signature": "MasterService.stop(RpcController controller,\n      ClientMasterServiceProtos.StopRequest request)", "testcase": false, "constructor": false}, {"identifier": "stop", "parameters": "(int exitStatus)", "modifiers": "public", "return": "void", "signature": "void stop(int exitStatus)", "full_signature": "public void stop(int exitStatus)", "class_method_signature": "MasterService.stop(int exitStatus)", "testcase": false, "constructor": false}, {"identifier": "checkMatricesCreated", "parameters": "(RpcController controller,\n      CheckMatricesCreatedRequest request)", "modifiers": "@Override public", "return": "CheckMatricesCreatedResponse", "signature": "CheckMatricesCreatedResponse checkMatricesCreated(RpcController controller,\n      CheckMatricesCreatedRequest request)", "full_signature": "@Override public CheckMatricesCreatedResponse checkMatricesCreated(RpcController controller,\n      CheckMatricesCreatedRequest request)", "class_method_signature": "MasterService.checkMatricesCreated(RpcController controller,\n      CheckMatricesCreatedRequest request)", "testcase": false, "constructor": false}, {"identifier": "checkModelSaved", "parameters": "(RpcController controller,\n      CheckModelSavedRequest request)", "modifiers": "@Override public", "return": "CheckModelSavedResponse", "signature": "CheckModelSavedResponse checkModelSaved(RpcController controller,\n      CheckModelSavedRequest request)", "full_signature": "@Override public CheckModelSavedResponse checkModelSaved(RpcController controller,\n      CheckModelSavedRequest request)", "class_method_signature": "MasterService.checkModelSaved(RpcController controller,\n      CheckModelSavedRequest request)", "testcase": false, "constructor": false}, {"identifier": "checkModelLoaded", "parameters": "(RpcController controller,\n      CheckModelLoadedRequest request)", "modifiers": "@Override public", "return": "CheckModelLoadedResponse", "signature": "CheckModelLoadedResponse checkModelLoaded(RpcController controller,\n      CheckModelLoadedRequest request)", "full_signature": "@Override public CheckModelLoadedResponse checkModelLoaded(RpcController controller,\n      CheckModelLoadedRequest request)", "class_method_signature": "MasterService.checkModelLoaded(RpcController controller,\n      CheckModelLoadedRequest request)", "testcase": false, "constructor": false}, {"identifier": "setParams", "parameters": "(RpcController controller, SetParamsRequest request)", "modifiers": "@Override public", "return": "SetParamsResponse", "signature": "SetParamsResponse setParams(RpcController controller, SetParamsRequest request)", "full_signature": "@Override public SetParamsResponse setParams(RpcController controller, SetParamsRequest request)", "class_method_signature": "MasterService.setParams(RpcController controller, SetParamsRequest request)", "testcase": false, "constructor": false}, {"identifier": "getClientId", "parameters": "(RpcController controller, GetClientIdRequest request)", "modifiers": "@Override public", "return": "GetClientIdResponse", "signature": "GetClientIdResponse getClientId(RpcController controller, GetClientIdRequest request)", "full_signature": "@Override public GetClientIdResponse getClientId(RpcController controller, GetClientIdRequest request)", "class_method_signature": "MasterService.getClientId(RpcController controller, GetClientIdRequest request)", "testcase": false, "constructor": false}, {"identifier": "keepAlive", "parameters": "(RpcController controller, KeepAliveRequest request)", "modifiers": "@Override public", "return": "KeepAliveResponse", "signature": "KeepAliveResponse keepAlive(RpcController controller, KeepAliveRequest request)", "full_signature": "@Override public KeepAliveResponse keepAlive(RpcController controller, KeepAliveRequest request)", "class_method_signature": "MasterService.keepAlive(RpcController controller, KeepAliveRequest request)", "testcase": false, "constructor": false}, {"identifier": "clientRegister", "parameters": "(RpcController controller,\n      ClientRegisterRequest request)", "modifiers": "@Override public", "return": "ClientRegisterResponse", "signature": "ClientRegisterResponse clientRegister(RpcController controller,\n      ClientRegisterRequest request)", "full_signature": "@Override public ClientRegisterResponse clientRegister(RpcController controller,\n      ClientRegisterRequest request)", "class_method_signature": "MasterService.clientRegister(RpcController controller,\n      ClientRegisterRequest request)", "testcase": false, "constructor": false}, {"identifier": "killPS", "parameters": "(RpcController controller, KillPSRequest request)", "modifiers": "@Override public", "return": "KillPSResponse", "signature": "KillPSResponse killPS(RpcController controller, KillPSRequest request)", "full_signature": "@Override public KillPSResponse killPS(RpcController controller, KillPSRequest request)", "class_method_signature": "MasterService.killPS(RpcController controller, KillPSRequest request)", "testcase": false, "constructor": false}], "file": "angel-ps/core/src/main/java/com/tencent/angel/master/MasterService.java"}, "focal_method": {"identifier": "MasterService", "parameters": "(AMContext context)", "modifiers": "public", "return": "", "body": "public MasterService(AMContext context) {\n    super(MasterService.class.getName());\n    this.context = context;\n    this.stopped = new AtomicBoolean(false);\n    matrics = new ArrayList<>();\n\n    Configuration conf = context.getConf();\n    yarnNMWebPort = getYarnNMWebPort(conf);\n  }", "signature": " MasterService(AMContext context)", "full_signature": "public  MasterService(AMContext context)", "class_method_signature": "MasterService.MasterService(AMContext context)", "testcase": false, "constructor": true, "invocations": []}, "repository": {"repo_id": 89322848, "url": "https://github.com/Angel-ML/angel", "stars": 5692, "created": "4/25/2017 5:57:43 AM +00:00", "updates": "2020-01-27T19:16:33+00:00", "fork": "False", "license": "licensed"}}