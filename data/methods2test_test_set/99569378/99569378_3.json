{"test_class": {"identifier": "ActorsPackageGeneratedTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final String PACKAGE_NAME = \"com.truecaller.androidactors\";", "modifier": "private static final", "type": "String", "declarator": "PACKAGE_NAME = \"com.truecaller.androidactors\"", "var_name": "PACKAGE_NAME"}, {"original_string": "private static final String BUILDER_CLASS_NAME = \"TestPackageGenerator\";", "modifier": "private static final", "type": "String", "declarator": "BUILDER_CLASS_NAME = \"TestPackageGenerator\"", "var_name": "BUILDER_CLASS_NAME"}, {"original_string": "@Mock\n    private ActorsPackageDescription mDescription;", "modifier": "@Mock\n    private", "type": "ActorsPackageDescription", "declarator": "mDescription", "var_name": "mDescription"}], "file": "generator/src/test/java/com/truecaller/androidactors/ActorsPackageGeneratedTest.java"}, "test_case": {"identifier": "generate_validPublicLevel_withoutProxies", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void generate_validPublicLevel_withoutProxies() {\n        Mockito.doReturn(ActorsPackage.AccessLevel.Public).when(mDescription).getAccessLevel();\n\n        ActorsPackageGenerated generated = new ActorsPackageGenerated(mDescription);\n        List<ActorInterfaceGenerated> proxies = new ArrayList<>();\n        JavaFile file = generated.generate(proxies);\n        Assert.assertEquals(PACKAGE_NAME, file.packageName);\n\n        verifyClass(file.typeSpec, true);\n\n        ClassName self = ClassName.get(file.packageName, file.typeSpec.name);\n\n        TypeSpec cls = file.typeSpec;\n        verifyErrorHandlerField(cls.fieldSpecs);\n        verifyProxyFactoryField(cls.fieldSpecs);\n\n        verifyErrorHandlerSetter(self, cls.methodSpecs);\n        verifyProxyFactorySetter(self, cls.methodSpecs);\n        verifyBuildMethod(cls.methodSpecs);\n\n        verifyProxyFactoryClass(cls.typeSpecs);\n    }", "signature": "void generate_validPublicLevel_withoutProxies()", "full_signature": "@Test public void generate_validPublicLevel_withoutProxies()", "class_method_signature": "ActorsPackageGeneratedTest.generate_validPublicLevel_withoutProxies()", "testcase": true, "constructor": false, "invocations": ["getAccessLevel", "when", "doReturn", "generate", "assertEquals", "verifyClass", "get", "verifyErrorHandlerField", "verifyProxyFactoryField", "verifyErrorHandlerSetter", "verifyProxyFactorySetter", "verifyBuildMethod", "verifyProxyFactoryClass"]}, "focal_class": {"identifier": "ActorsPackageGenerated", "superclass": "", "interfaces": "implements ActorsPackageGenerator", "fields": [{"original_string": "static final String FIELD_ERROR_HANDLER = \"mFailureHandler\";", "modifier": "static final", "type": "String", "declarator": "FIELD_ERROR_HANDLER = \"mFailureHandler\"", "var_name": "FIELD_ERROR_HANDLER"}, {"original_string": "static final String FIELD_PROXY_FACTORY = \"mProxyFactory\";", "modifier": "static final", "type": "String", "declarator": "FIELD_PROXY_FACTORY = \"mProxyFactory\"", "var_name": "FIELD_PROXY_FACTORY"}, {"original_string": "static final String METHOD_SET_ERROR_HANDLER = \"setFailureHandler\";", "modifier": "static final", "type": "String", "declarator": "METHOD_SET_ERROR_HANDLER = \"setFailureHandler\"", "var_name": "METHOD_SET_ERROR_HANDLER"}, {"original_string": "static final String METHOD_SET_PROXY_FACTORY = \"setProxyFactory\";", "modifier": "static final", "type": "String", "declarator": "METHOD_SET_PROXY_FACTORY = \"setProxyFactory\"", "var_name": "METHOD_SET_PROXY_FACTORY"}, {"original_string": "static final String METHOD_BUILD = \"build\";", "modifier": "static final", "type": "String", "declarator": "METHOD_BUILD = \"build\"", "var_name": "METHOD_BUILD"}, {"original_string": "static final String CLASS_PROXY_FACTORY = \"ProxyFactoryImpl\";", "modifier": "static final", "type": "String", "declarator": "CLASS_PROXY_FACTORY = \"ProxyFactoryImpl\"", "var_name": "CLASS_PROXY_FACTORY"}, {"original_string": "@NotNull\n    private final String mPackageName;", "modifier": "@NotNull\n    private final", "type": "String", "declarator": "mPackageName", "var_name": "mPackageName"}, {"original_string": "@NotNull\n    private final String mClassName;", "modifier": "@NotNull\n    private final", "type": "String", "declarator": "mClassName", "var_name": "mClassName"}, {"original_string": "@NotNull\n    private final ActorsPackage.AccessLevel mAccessLevel;", "modifier": "@NotNull\n    private final", "type": "ActorsPackage.AccessLevel", "declarator": "mAccessLevel", "var_name": "mAccessLevel"}], "methods": [{"identifier": "ActorsPackageGenerated", "parameters": "(@NotNull ActorsPackageDescription description)", "modifiers": "", "return": "", "signature": " ActorsPackageGenerated(@NotNull ActorsPackageDescription description)", "full_signature": "  ActorsPackageGenerated(@NotNull ActorsPackageDescription description)", "class_method_signature": "ActorsPackageGenerated.ActorsPackageGenerated(@NotNull ActorsPackageDescription description)", "testcase": false, "constructor": true}, {"identifier": "generate", "parameters": "(@NonNull List<? extends ActorInterfaceGenerated> interfaces)", "modifiers": "@NotNull @Override public", "return": "JavaFile", "signature": "JavaFile generate(@NonNull List<? extends ActorInterfaceGenerated> interfaces)", "full_signature": "@NotNull @Override public JavaFile generate(@NonNull List<? extends ActorInterfaceGenerated> interfaces)", "class_method_signature": "ActorsPackageGenerated.generate(@NonNull List<? extends ActorInterfaceGenerated> interfaces)", "testcase": false, "constructor": false}, {"identifier": "generateHandlerSetter", "parameters": "(@NotNull ClassName builderClass)", "modifiers": "@NotNull private", "return": "MethodSpec", "signature": "MethodSpec generateHandlerSetter(@NotNull ClassName builderClass)", "full_signature": "@NotNull private MethodSpec generateHandlerSetter(@NotNull ClassName builderClass)", "class_method_signature": "ActorsPackageGenerated.generateHandlerSetter(@NotNull ClassName builderClass)", "testcase": false, "constructor": false}, {"identifier": "generateProxyFactorySetter", "parameters": "(@NotNull ClassName builderClass)", "modifiers": "@NotNull private", "return": "MethodSpec", "signature": "MethodSpec generateProxyFactorySetter(@NotNull ClassName builderClass)", "full_signature": "@NotNull private MethodSpec generateProxyFactorySetter(@NotNull ClassName builderClass)", "class_method_signature": "ActorsPackageGenerated.generateProxyFactorySetter(@NotNull ClassName builderClass)", "testcase": false, "constructor": false}, {"identifier": "generateBuild", "parameters": "(@NonNull TypeSpec threads, @NonNull TypeSpec factory, @NonNull TypeName handler)", "modifiers": "@NotNull private", "return": "MethodSpec", "signature": "MethodSpec generateBuild(@NonNull TypeSpec threads, @NonNull TypeSpec factory, @NonNull TypeName handler)", "full_signature": "@NotNull private MethodSpec generateBuild(@NonNull TypeSpec threads, @NonNull TypeSpec factory, @NonNull TypeName handler)", "class_method_signature": "ActorsPackageGenerated.generateBuild(@NonNull TypeSpec threads, @NonNull TypeSpec factory, @NonNull TypeName handler)", "testcase": false, "constructor": false}, {"identifier": "generateThreadsClass", "parameters": "()", "modifiers": "@NotNull private", "return": "TypeSpec", "signature": "TypeSpec generateThreadsClass()", "full_signature": "@NotNull private TypeSpec generateThreadsClass()", "class_method_signature": "ActorsPackageGenerated.generateThreadsClass()", "testcase": false, "constructor": false}, {"identifier": "generateProxyFactory", "parameters": "(@NonNull List<? extends ActorInterfaceGenerated> interfaces)", "modifiers": "@NotNull private", "return": "TypeSpec", "signature": "TypeSpec generateProxyFactory(@NonNull List<? extends ActorInterfaceGenerated> interfaces)", "full_signature": "@NotNull private TypeSpec generateProxyFactory(@NonNull List<? extends ActorInterfaceGenerated> interfaces)", "class_method_signature": "ActorsPackageGenerated.generateProxyFactory(@NonNull List<? extends ActorInterfaceGenerated> interfaces)", "testcase": false, "constructor": false}], "file": "generator/src/main/java/com/truecaller/androidactors/ActorsPackageGenerated.java"}, "focal_method": {"identifier": "generate", "parameters": "(@NonNull List<? extends ActorInterfaceGenerated> interfaces)", "modifiers": "@NotNull @Override public", "return": "JavaFile", "body": "@NotNull\n    @Override\n    public JavaFile generate(@NonNull List<? extends ActorInterfaceGenerated> interfaces) {\n        final ClassName builderClass = ClassName.get(mPackageName, mClassName);\n        final TypeSpec.Builder builder = TypeSpec.classBuilder(mClassName);\n\n        builder.addModifiers(Modifier.FINAL);\n        if (mAccessLevel == ActorsPackage.AccessLevel.Public) {\n            builder.addModifiers(Modifier.PUBLIC);\n        }\n\n        builder.addField(FailureHandler.class, FIELD_ERROR_HANDLER, Modifier.PRIVATE);\n        builder.addField(ProxyFactoryBase.class, FIELD_PROXY_FACTORY, Modifier.PRIVATE);\n\n        builder.addMethod(generateHandlerSetter(builderClass));\n        builder.addMethod(generateProxyFactorySetter(builderClass));\n\n        TypeSpec threads = generateThreadsClass();\n        TypeSpec proxyFactory = generateProxyFactory(interfaces);\n\n        builder.addMethod(generateBuild(threads, proxyFactory, ClassName.get(CrashEarlyFailureHandler.class)));\n\n        builder.addType(threads);\n        builder.addType(proxyFactory);\n\n        return JavaFile.builder(mPackageName, builder.build()).build();\n    }", "signature": "JavaFile generate(@NonNull List<? extends ActorInterfaceGenerated> interfaces)", "full_signature": "@NotNull @Override public JavaFile generate(@NonNull List<? extends ActorInterfaceGenerated> interfaces)", "class_method_signature": "ActorsPackageGenerated.generate(@NonNull List<? extends ActorInterfaceGenerated> interfaces)", "testcase": false, "constructor": false, "invocations": ["get", "classBuilder", "addModifiers", "addModifiers", "addField", "addField", "addMethod", "generateHandlerSetter", "addMethod", "generateProxyFactorySetter", "generateThreadsClass", "generateProxyFactory", "addMethod", "generateBuild", "get", "addType", "addType", "build", "builder", "build"]}, "repository": {"repo_id": 99569378, "url": "https://github.com/truecaller/android-actors-library", "language": "Java", "is_fork": false, "fork_count": 2, "stargazer_count": 20, "size": 352, "license": "licensed"}}