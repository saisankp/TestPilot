{"test_class": {"identifier": "KMeansUtilTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private final FastDistance distance = new EuclideanDistance();", "modifier": "private final", "type": "FastDistance", "declarator": "distance = new EuclideanDistance()", "var_name": "distance"}, {"original_string": "private final int vectorSize = 2;", "modifier": "private final", "type": "int", "declarator": "vectorSize = 2", "var_name": "vectorSize"}, {"original_string": "private final int length = 10;", "modifier": "private final", "type": "int", "declarator": "length = 10", "var_name": "length"}, {"original_string": "private final List<Row> modelRows = Arrays.asList(\n        Row.of(0L, \"{\\\"vectorCol\\\":\\\"\\\\\\\"Y\\\\\\\"\\\",\\\"latitudeCol\\\":null,\\\"longitudeCol\\\":null,\"\n            + \"\\\"distanceType\\\":\\\"\\\\\\\"EUCLIDEAN\\\\\\\"\\\",\\\"k\\\":\\\"2\\\",\\\"vectorSize\\\":\\\"3\\\"}\"),\n        Row.of(1048576L, \"{\\\"clusterId\\\":0,\\\"weight\\\":3.0,\\\"vec\\\":{\\\"data\\\":[9.1,9.1,9.1]}}\"),\n        Row.of(2097152L, \"{\\\"clusterId\\\":1,\\\"weight\\\":3.0,\\\"vec\\\":{\\\"data\\\":[0.1,0.1,0.1]}}\")\n    );", "modifier": "private final", "type": "List<Row>", "declarator": "modelRows = Arrays.asList(\n        Row.of(0L, \"{\\\"vectorCol\\\":\\\"\\\\\\\"Y\\\\\\\"\\\",\\\"latitudeCol\\\":null,\\\"longitudeCol\\\":null,\"\n            + \"\\\"distanceType\\\":\\\"\\\\\\\"EUCLIDEAN\\\\\\\"\\\",\\\"k\\\":\\\"2\\\",\\\"vectorSize\\\":\\\"3\\\"}\"),\n        Row.of(1048576L, \"{\\\"clusterId\\\":0,\\\"weight\\\":3.0,\\\"vec\\\":{\\\"data\\\":[9.1,9.1,9.1]}}\"),\n        Row.of(2097152L, \"{\\\"clusterId\\\":1,\\\"weight\\\":3.0,\\\"vec\\\":{\\\"data\\\":[0.1,0.1,0.1]}}\")\n    )", "var_name": "modelRows"}], "file": "core/src/test/java/com/alibaba/alink/operator/common/clustering/kmeans/KMeansUtilTest.java"}, "test_case": {"identifier": "getKmeansPredictColIdxsTest", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void getKmeansPredictColIdxsTest() {\n        KMeansTrainModelData.ParamSummary params = new KMeansTrainModelData.ParamSummary();\n        params.vectorColName = \"vec\";\n        params.latitudeColName = null;\n        params.longtitudeColName = null;\n        params.k = 2;\n        params.vectorSize = vectorSize;\n        params.distanceType = HasKMeansWithHaversineDistanceType.DistanceType.EUCLIDEAN;\n\n        String[] colNames = new String[] {\"id\", \"vec\", \"lat\", \"lon\"};\n        Assert.assertArrayEquals(KMeansUtil.getKmeansPredictColIdxs(params, colNames), new int[] {1});\n\n        params.vectorColName = null;\n        params.latitudeColName = \"lat\";\n        params.longtitudeColName = \"lon\";\n        params.distanceType = HasKMeansWithHaversineDistanceType.DistanceType.HAVERSINE;\n        Assert.assertArrayEquals(KMeansUtil.getKmeansPredictColIdxs(params, colNames), new int[] {2, 3});\n    }", "signature": "void getKmeansPredictColIdxsTest()", "full_signature": "@Test public void getKmeansPredictColIdxsTest()", "class_method_signature": "KMeansUtilTest.getKmeansPredictColIdxsTest()", "testcase": true, "constructor": false, "invocations": ["assertArrayEquals", "getKmeansPredictColIdxs", "assertArrayEquals", "getKmeansPredictColIdxs"]}, "focal_class": {"identifier": "KMeansUtil", "superclass": "", "interfaces": "implements Serializable", "fields": [], "methods": [{"identifier": "buildCentroidsMatrix", "parameters": "(List<FastDistanceVectorData> vectors,\n                                                              FastDistance distance,\n                                                              int vectorSize)", "modifiers": "public static", "return": "FastDistanceMatrixData", "signature": "FastDistanceMatrixData buildCentroidsMatrix(List<FastDistanceVectorData> vectors,\n                                                              FastDistance distance,\n                                                              int vectorSize)", "full_signature": "public static FastDistanceMatrixData buildCentroidsMatrix(List<FastDistanceVectorData> vectors,\n                                                              FastDistance distance,\n                                                              int vectorSize)", "class_method_signature": "KMeansUtil.buildCentroidsMatrix(List<FastDistanceVectorData> vectors,\n                                                              FastDistance distance,\n                                                              int vectorSize)", "testcase": false, "constructor": false}, {"identifier": "updateSumMatrix", "parameters": "(FastDistanceVectorData sample,\n                                      long sampleWeight,\n                                      FastDistanceMatrixData centroids,\n                                      int vectorSize,\n                                      double[] sumMatrix,\n                                      int k,\n                                      FastDistance fastDistance,\n                                      DenseMatrix distanceMatrix)", "modifiers": "public static", "return": "int", "signature": "int updateSumMatrix(FastDistanceVectorData sample,\n                                      long sampleWeight,\n                                      FastDistanceMatrixData centroids,\n                                      int vectorSize,\n                                      double[] sumMatrix,\n                                      int k,\n                                      FastDistance fastDistance,\n                                      DenseMatrix distanceMatrix)", "full_signature": "public static int updateSumMatrix(FastDistanceVectorData sample,\n                                      long sampleWeight,\n                                      FastDistanceMatrixData centroids,\n                                      int vectorSize,\n                                      double[] sumMatrix,\n                                      int k,\n                                      FastDistance fastDistance,\n                                      DenseMatrix distanceMatrix)", "class_method_signature": "KMeansUtil.updateSumMatrix(FastDistanceVectorData sample,\n                                      long sampleWeight,\n                                      FastDistanceMatrixData centroids,\n                                      int vectorSize,\n                                      double[] sumMatrix,\n                                      int k,\n                                      FastDistance fastDistance,\n                                      DenseMatrix distanceMatrix)", "testcase": false, "constructor": false}, {"identifier": "getClosestClusterIndex", "parameters": "(FastDistanceVectorData sample,\n                                                                 FastDistanceMatrixData centroids,\n                                                                 int k,\n                                                                 FastDistance distance,\n                                                                 DenseMatrix distanceMatrix)", "modifiers": "public static", "return": "Tuple2<Integer, Double>", "signature": "Tuple2<Integer, Double> getClosestClusterIndex(FastDistanceVectorData sample,\n                                                                 FastDistanceMatrixData centroids,\n                                                                 int k,\n                                                                 FastDistance distance,\n                                                                 DenseMatrix distanceMatrix)", "full_signature": "public static Tuple2<Integer, Double> getClosestClusterIndex(FastDistanceVectorData sample,\n                                                                 FastDistanceMatrixData centroids,\n                                                                 int k,\n                                                                 FastDistance distance,\n                                                                 DenseMatrix distanceMatrix)", "class_method_signature": "KMeansUtil.getClosestClusterIndex(FastDistanceVectorData sample,\n                                                                 FastDistanceMatrixData centroids,\n                                                                 int k,\n                                                                 FastDistance distance,\n                                                                 DenseMatrix distanceMatrix)", "testcase": false, "constructor": false}, {"identifier": "getClusterDistances", "parameters": "(FastDistanceVectorData sample,\n                                               FastDistanceMatrixData centroids,\n                                               FastDistance distance,\n                                               DenseMatrix distanceMatrix)", "modifiers": "public static", "return": "double[]", "signature": "double[] getClusterDistances(FastDistanceVectorData sample,\n                                               FastDistanceMatrixData centroids,\n                                               FastDistance distance,\n                                               DenseMatrix distanceMatrix)", "full_signature": "public static double[] getClusterDistances(FastDistanceVectorData sample,\n                                               FastDistanceMatrixData centroids,\n                                               FastDistance distance,\n                                               DenseMatrix distanceMatrix)", "class_method_signature": "KMeansUtil.getClusterDistances(FastDistanceVectorData sample,\n                                               FastDistanceMatrixData centroids,\n                                               FastDistance distance,\n                                               DenseMatrix distanceMatrix)", "testcase": false, "constructor": false}, {"identifier": "getClosestClusterIndex", "parameters": "(KMeansTrainModelData trainModelData,\n                                                                 Vector sample,\n                                                                 ContinuousDistance distance)", "modifiers": "public static", "return": "Tuple2<Integer, Double>", "signature": "Tuple2<Integer, Double> getClosestClusterIndex(KMeansTrainModelData trainModelData,\n                                                                 Vector sample,\n                                                                 ContinuousDistance distance)", "full_signature": "public static Tuple2<Integer, Double> getClosestClusterIndex(KMeansTrainModelData trainModelData,\n                                                                 Vector sample,\n                                                                 ContinuousDistance distance)", "class_method_signature": "KMeansUtil.getClosestClusterIndex(KMeansTrainModelData trainModelData,\n                                                                 Vector sample,\n                                                                 ContinuousDistance distance)", "testcase": false, "constructor": false}, {"identifier": "getClusterDistances", "parameters": "(KMeansTrainModelData trainModelData,\n                                               Vector sample,\n                                               ContinuousDistance distance)", "modifiers": "public static", "return": "double[]", "signature": "double[] getClusterDistances(KMeansTrainModelData trainModelData,\n                                               Vector sample,\n                                               ContinuousDistance distance)", "full_signature": "public static double[] getClusterDistances(KMeansTrainModelData trainModelData,\n                                               Vector sample,\n                                               ContinuousDistance distance)", "class_method_signature": "KMeansUtil.getClusterDistances(KMeansTrainModelData trainModelData,\n                                               Vector sample,\n                                               ContinuousDistance distance)", "testcase": false, "constructor": false}, {"identifier": "getMinPointIndex", "parameters": "(double[] data, int endIndex)", "modifiers": "public static", "return": "int", "signature": "int getMinPointIndex(double[] data, int endIndex)", "full_signature": "public static int getMinPointIndex(double[] data, int endIndex)", "class_method_signature": "KMeansUtil.getMinPointIndex(double[] data, int endIndex)", "testcase": false, "constructor": false}, {"identifier": "getKmeansPredictColIdxs", "parameters": "(KMeansTrainModelData.ParamSummary params, String[] dataCols)", "modifiers": "public static", "return": "int[]", "signature": "int[] getKmeansPredictColIdxs(KMeansTrainModelData.ParamSummary params, String[] dataCols)", "full_signature": "public static int[] getKmeansPredictColIdxs(KMeansTrainModelData.ParamSummary params, String[] dataCols)", "class_method_signature": "KMeansUtil.getKmeansPredictColIdxs(KMeansTrainModelData.ParamSummary params, String[] dataCols)", "testcase": false, "constructor": false}, {"identifier": "getKMeansPredictVector", "parameters": "(int[] colIdxs, Row row)", "modifiers": "public static", "return": "Vector", "signature": "Vector getKMeansPredictVector(int[] colIdxs, Row row)", "full_signature": "public static Vector getKMeansPredictVector(int[] colIdxs, Row row)", "class_method_signature": "KMeansUtil.getKMeansPredictVector(int[] colIdxs, Row row)", "testcase": false, "constructor": false}, {"identifier": "transformPredictDataToTrainData", "parameters": "(KMeansPredictModelData predictModelData)", "modifiers": "public static", "return": "KMeansTrainModelData", "signature": "KMeansTrainModelData transformPredictDataToTrainData(KMeansPredictModelData predictModelData)", "full_signature": "public static KMeansTrainModelData transformPredictDataToTrainData(KMeansPredictModelData predictModelData)", "class_method_signature": "KMeansUtil.transformPredictDataToTrainData(KMeansPredictModelData predictModelData)", "testcase": false, "constructor": false}, {"identifier": "transformTrainDataToPredictData", "parameters": "(KMeansTrainModelData trainModelData)", "modifiers": "public static", "return": "KMeansPredictModelData", "signature": "KMeansPredictModelData transformTrainDataToPredictData(KMeansTrainModelData trainModelData)", "full_signature": "public static KMeansPredictModelData transformTrainDataToPredictData(KMeansTrainModelData trainModelData)", "class_method_signature": "KMeansUtil.transformTrainDataToPredictData(KMeansTrainModelData trainModelData)", "testcase": false, "constructor": false}, {"identifier": "getProbArrayFromDistanceArray", "parameters": "(double[] distances)", "modifiers": "public static", "return": "double[]", "signature": "double[] getProbArrayFromDistanceArray(double[] distances)", "full_signature": "public static double[] getProbArrayFromDistanceArray(double[] distances)", "class_method_signature": "KMeansUtil.getProbArrayFromDistanceArray(double[] distances)", "testcase": false, "constructor": false}, {"identifier": "loadModelForTrain", "parameters": "(Params params, Iterable<String> data)", "modifiers": "public static", "return": "KMeansTrainModelData", "signature": "KMeansTrainModelData loadModelForTrain(Params params, Iterable<String> data)", "full_signature": "public static KMeansTrainModelData loadModelForTrain(Params params, Iterable<String> data)", "class_method_signature": "KMeansUtil.loadModelForTrain(Params params, Iterable<String> data)", "testcase": false, "constructor": false}], "file": "core/src/main/java/com/alibaba/alink/operator/common/clustering/kmeans/KMeansUtil.java"}, "focal_method": {"identifier": "getKmeansPredictColIdxs", "parameters": "(KMeansTrainModelData.ParamSummary params, String[] dataCols)", "modifiers": "public static", "return": "int[]", "body": "public static int[] getKmeansPredictColIdxs(KMeansTrainModelData.ParamSummary params, String[] dataCols) {\n        Preconditions.checkArgument((null == params.longtitudeColName) == (null == params.latitudeColName),\n            \"Model Format error!\");\n        Preconditions.checkArgument(params.distanceType.equals(HasKMeansWithHaversineDistanceType.DistanceType.HAVERSINE) == (null == params.vectorColName\n                && null != params.longtitudeColName),\n            \"Model Format error!\");\n        int[] colIdxs;\n        if (null != params.vectorColName) {\n            colIdxs = new int[1];\n            colIdxs[0] = TableUtil.findColIndexWithAssert(dataCols, params.vectorColName);\n        } else {\n            colIdxs = new int[2];\n            colIdxs[0] = TableUtil.findColIndexWithAssert(dataCols, params.latitudeColName);\n            colIdxs[1] = TableUtil.findColIndexWithAssert(dataCols, params.longtitudeColName);\n        }\n        return colIdxs;\n    }", "signature": "int[] getKmeansPredictColIdxs(KMeansTrainModelData.ParamSummary params, String[] dataCols)", "full_signature": "public static int[] getKmeansPredictColIdxs(KMeansTrainModelData.ParamSummary params, String[] dataCols)", "class_method_signature": "KMeansUtil.getKmeansPredictColIdxs(KMeansTrainModelData.ParamSummary params, String[] dataCols)", "testcase": false, "constructor": false, "invocations": ["checkArgument", "checkArgument", "equals", "findColIndexWithAssert", "findColIndexWithAssert", "findColIndexWithAssert"]}, "repository": {"repo_id": 150938406, "url": "https://github.com/alibaba/Alink", "stars": 1923, "created": "9/30/2018 6:36:11 AM +00:00", "updates": "2020-01-27T10:24:34+00:00", "fork": "False", "license": "licensed"}}