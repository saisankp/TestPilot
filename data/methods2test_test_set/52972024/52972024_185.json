{"test_class": {"identifier": "FeatureManagerActorTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private IStrategyContainer container = new StrategyContainer();", "modifier": "private", "type": "IStrategyContainer", "declarator": "container = new StrategyContainer()", "var_name": "container"}, {"original_string": "private IQueue queue = mock(IQueue.class);", "modifier": "private", "type": "IQueue", "declarator": "queue = mock(IQueue.class)", "var_name": "queue"}, {"original_string": "private IReceiverChain chain = mock(IReceiverChain.class);", "modifier": "private", "type": "IReceiverChain", "declarator": "chain = mock(IReceiverChain.class)", "var_name": "chain"}, {"original_string": "private IChainStorage storage = mock(IChainStorage.class);", "modifier": "private", "type": "IChainStorage", "declarator": "storage = mock(IChainStorage.class)", "var_name": "storage"}, {"original_string": "private IResolveDependencyStrategy getChainIDByNameStrategy = mock(IResolveDependencyStrategy.class);", "modifier": "private", "type": "IResolveDependencyStrategy", "declarator": "getChainIDByNameStrategy = mock(IResolveDependencyStrategy.class)", "var_name": "getChainIDByNameStrategy"}, {"original_string": "private IResolveDependencyStrategy getSequence = mock(IResolveDependencyStrategy.class);", "modifier": "private", "type": "IResolveDependencyStrategy", "declarator": "getSequence = mock(IResolveDependencyStrategy.class)", "var_name": "getSequence"}, {"original_string": "private IResolveDependencyStrategy getProcessor = mock(IResolveDependencyStrategy.class);", "modifier": "private", "type": "IResolveDependencyStrategy", "declarator": "getProcessor = mock(IResolveDependencyStrategy.class)", "var_name": "getProcessor"}, {"original_string": "private IQueue afterFeaturesCallbackQueue1 = mock(IQueue.class);", "modifier": "private", "type": "IQueue", "declarator": "afterFeaturesCallbackQueue1 = mock(IQueue.class)", "var_name": "afterFeaturesCallbackQueue1"}, {"original_string": "private IQueue afterFeaturesCallbackQueue2 = mock(IQueue.class);", "modifier": "private", "type": "IQueue", "declarator": "afterFeaturesCallbackQueue2 = mock(IQueue.class)", "var_name": "afterFeaturesCallbackQueue2"}, {"original_string": "private IQueue afterFeaturesCallbackQueue3 = mock(IQueue.class);", "modifier": "private", "type": "IQueue", "declarator": "afterFeaturesCallbackQueue3 = mock(IQueue.class)", "var_name": "afterFeaturesCallbackQueue3"}, {"original_string": "private IResolveDependencyStrategy afterFeaturesCallbackStrategy = mock(IResolveDependencyStrategy.class);", "modifier": "private", "type": "IResolveDependencyStrategy", "declarator": "afterFeaturesCallbackStrategy = mock(IResolveDependencyStrategy.class)", "var_name": "afterFeaturesCallbackStrategy"}], "file": "CoreFeatures/FeatureManagement/FeatureManagerActor/src/test/java/info/smart_tools/smartactors/feature_management/feature_manager_actor/FeatureManagerActorTest.java"}, "test_case": {"identifier": "checkFeatureManagementExceptionOnCallAddFeaturesMethod", "parameters": "()", "modifiers": "@Test (expected = FeatureManagementException.class) public", "return": "void", "body": "@Test (expected = FeatureManagementException.class)\n    public void checkFeatureManagementExceptionOnCallAddFeaturesMethod()\n            throws Exception {\n        FeatureManagerActor actor = new FeatureManagerActor();\n        AddFeatureWrapper wrapper = mock(AddFeatureWrapper.class);\n        when(wrapper.getFeatures()).thenThrow(ReadValueException.class);\n        actor.addFeatures(wrapper);\n        fail();\n    }", "signature": "void checkFeatureManagementExceptionOnCallAddFeaturesMethod()", "full_signature": "@Test (expected = FeatureManagementException.class) public void checkFeatureManagementExceptionOnCallAddFeaturesMethod()", "class_method_signature": "FeatureManagerActorTest.checkFeatureManagementExceptionOnCallAddFeaturesMethod()", "testcase": true, "constructor": false, "invocations": ["mock", "thenThrow", "when", "getFeatures", "addFeatures", "fail"]}, "focal_class": {"identifier": "FeatureManagerActor", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final int DEFAULT_STACK_DEPTH = 5;", "modifier": "private static final", "type": "int", "declarator": "DEFAULT_STACK_DEPTH = 5", "var_name": "DEFAULT_STACK_DEPTH"}, {"original_string": "private Map<IMessageProcessor, Set<IFeature>> mainProcesses;", "modifier": "private", "type": "Map<IMessageProcessor, Set<IFeature>>", "declarator": "mainProcesses", "var_name": "mainProcesses"}, {"original_string": "private Map<IMessageProcessor, Set<IFeature>> mainProcessesForInfo;", "modifier": "private", "type": "Map<IMessageProcessor, Set<IFeature>>", "declarator": "mainProcessesForInfo", "var_name": "mainProcessesForInfo"}, {"original_string": "private Map<IMessageProcessor, IFeature> featureProcess;", "modifier": "private", "type": "Map<IMessageProcessor, IFeature>", "declarator": "featureProcess", "var_name": "featureProcess"}, {"original_string": "private Map<Object, IFeature> loadedFeatures;", "modifier": "private", "type": "Map<Object, IFeature>", "declarator": "loadedFeatures", "var_name": "loadedFeatures"}, {"original_string": "private Map<Object, IFeature> failedFeatures;", "modifier": "private", "type": "Map<Object, IFeature>", "declarator": "failedFeatures", "var_name": "failedFeatures"}, {"original_string": "private Map<Object, IFeature> processingFeatures;", "modifier": "private", "type": "Map<Object, IFeature>", "declarator": "processingFeatures", "var_name": "processingFeatures"}, {"original_string": "private final IFieldName loadedFeatureFN;", "modifier": "private final", "type": "IFieldName", "declarator": "loadedFeatureFN", "var_name": "loadedFeatureFN"}, {"original_string": "private final IFieldName failedFeatureFN;", "modifier": "private final", "type": "IFieldName", "declarator": "failedFeatureFN", "var_name": "failedFeatureFN"}, {"original_string": "private final IFieldName processingFeatureFN;", "modifier": "private final", "type": "IFieldName", "declarator": "processingFeatureFN", "var_name": "processingFeatureFN"}, {"original_string": "private final IFieldName featureProcessFN;", "modifier": "private final", "type": "IFieldName", "declarator": "featureProcessFN", "var_name": "featureProcessFN"}, {"original_string": "private final IFieldName featureFN;", "modifier": "private final", "type": "IFieldName", "declarator": "featureFN", "var_name": "featureFN"}, {"original_string": "private final IFieldName afterFeaturesCallbackQueueFN;", "modifier": "private final", "type": "IFieldName", "declarator": "afterFeaturesCallbackQueueFN", "var_name": "afterFeaturesCallbackQueueFN"}], "methods": [{"identifier": "FeatureManagerActor", "parameters": "()", "modifiers": "public", "return": "", "signature": " FeatureManagerActor()", "full_signature": "public  FeatureManagerActor()", "class_method_signature": "FeatureManagerActor.FeatureManagerActor()", "testcase": false, "constructor": true}, {"identifier": "addFeatures", "parameters": "(final AddFeatureWrapper wrapper)", "modifiers": "public", "return": "void", "signature": "void addFeatures(final AddFeatureWrapper wrapper)", "full_signature": "public void addFeatures(final AddFeatureWrapper wrapper)", "class_method_signature": "FeatureManagerActor.addFeatures(final AddFeatureWrapper wrapper)", "testcase": false, "constructor": false}, {"identifier": "onFeatureLoaded", "parameters": "(final OnFeatureLoadedWrapper wrapper)", "modifiers": "public", "return": "void", "signature": "void onFeatureLoaded(final OnFeatureLoadedWrapper wrapper)", "full_signature": "public void onFeatureLoaded(final OnFeatureLoadedWrapper wrapper)", "class_method_signature": "FeatureManagerActor.onFeatureLoaded(final OnFeatureLoadedWrapper wrapper)", "testcase": false, "constructor": false}, {"identifier": "onFeatureStepCompleted", "parameters": "(final OnFeatureStepCompletedWrapper wrapper)", "modifiers": "public", "return": "void", "signature": "void onFeatureStepCompleted(final OnFeatureStepCompletedWrapper wrapper)", "full_signature": "public void onFeatureStepCompleted(final OnFeatureStepCompletedWrapper wrapper)", "class_method_signature": "FeatureManagerActor.onFeatureStepCompleted(final OnFeatureStepCompletedWrapper wrapper)", "testcase": false, "constructor": false}, {"identifier": "getState", "parameters": "(final FeatureManagerStateWrapper wrapper)", "modifiers": "public", "return": "void", "signature": "void getState(final FeatureManagerStateWrapper wrapper)", "full_signature": "public void getState(final FeatureManagerStateWrapper wrapper)", "class_method_signature": "FeatureManagerActor.getState(final FeatureManagerStateWrapper wrapper)", "testcase": false, "constructor": false}, {"identifier": "checkAndRunConnectedFeatures", "parameters": "()", "modifiers": "private", "return": "void", "signature": "void checkAndRunConnectedFeatures()", "full_signature": "private void checkAndRunConnectedFeatures()", "class_method_signature": "FeatureManagerActor.checkAndRunConnectedFeatures()", "testcase": false, "constructor": false}, {"identifier": "removeLoadedFeatureFromDependencies", "parameters": "(final IFeature loadedFeature)", "modifiers": "private", "return": "void", "signature": "void removeLoadedFeatureFromDependencies(final IFeature loadedFeature)", "full_signature": "private void removeLoadedFeatureFromDependencies(final IFeature loadedFeature)", "class_method_signature": "FeatureManagerActor.removeLoadedFeatureFromDependencies(final IFeature loadedFeature)", "testcase": false, "constructor": false}, {"identifier": "checkUnresolved", "parameters": "()", "modifiers": "private", "return": "void", "signature": "void checkUnresolved()", "full_signature": "private void checkUnresolved()", "class_method_signature": "FeatureManagerActor.checkUnresolved()", "testcase": false, "constructor": false}], "file": "CoreFeatures/FeatureManagement/FeatureManagerActor/src/main/java/info/smart_tools/smartactors/feature_management/feature_manager_actor/FeatureManagerActor.java"}, "focal_method": {"identifier": "addFeatures", "parameters": "(final AddFeatureWrapper wrapper)", "modifiers": "public", "return": "void", "body": "public void addFeatures(final AddFeatureWrapper wrapper)\n            throws FeatureManagementException {\n        try {\n            Set<IFeature> features = new HashSet<>(wrapper.getFeatures());\n            Set<IFeature> featuresForInfo = new HashSet<>(wrapper.getFeatures());\n            IMessageProcessor mp = wrapper.getMessageProcessor();\n\n            IQueue<ITask> queue = IOC.resolve(Keys.getOrAdd(\"task_queue\"));\n            String scatterChainName = wrapper.getScatterChainName();\n            Object chainId = IOC.resolve(Keys.getOrAdd(\"chain_id_from_map_name\"), scatterChainName);\n            IChainStorage chainStorage = IOC.resolve(Keys.getOrAdd(IChainStorage.class.getCanonicalName()));\n            int stackDepth = DEFAULT_STACK_DEPTH;\n            IReceiverChain scatterChain = chainStorage.resolve(chainId);\n\n\n            IQueue afterFeaturesCallbackQueue = IOC.resolve(Keys.getOrAdd(IQueue.class.getCanonicalName()));\n\n\n            int count = 0;\n            for (IFeature feature : features) {\n                Object featureName = feature.getName();\n                if (\n                        null == this.processingFeatures.get(featureName) &&\n                        null == this.loadedFeatures.get(featureName)\n                ) {\n                    this.processingFeatures.put(feature.getName(), feature);\n                    IMessageProcessingSequence processingSequence =\n                            IOC.resolve(Keys.getOrAdd(\"info.smart_tools.smartactors.message_processing_interfaces.message_processing.IMessageProcessingSequence\"), stackDepth, scatterChain);\n                    IMessageProcessor messageProcessor =\n                            IOC.resolve(Keys.getOrAdd(\"info.smart_tools.smartactors.message_processing_interfaces.message_processing.IMessageProcessor\"), queue, processingSequence);\n                    IObject message = IOC.resolve(Keys.getOrAdd(\"info.smart_tools.smartactors.iobject.iobject.IObject\"));\n                    message.setValue(this.loadedFeatureFN, this.loadedFeatures);\n                    message.setValue(this.failedFeatureFN, this.failedFeatures);\n                    message.setValue(this.processingFeatureFN, this.processingFeatures);\n                    message.setValue(this.featureProcessFN, this.featureProcess);\n                    message.setValue(this.featureFN, feature);\n                    message.setValue(this.afterFeaturesCallbackQueueFN, afterFeaturesCallbackQueue);\n                    IObject context = IOC.resolve(Keys.getOrAdd(\"info.smart_tools.smartactors.iobject.iobject.IObject\"));\n                    messageProcessor.process(message, context);\n                    ++count;\n                }\n            }\n            if (count > 0) {\n                mp.pauseProcess();\n                this.mainProcesses.put(mp, features);\n                this.mainProcessesForInfo.put(mp, featuresForInfo);\n            }\n        } catch (\n                ReadValueException |\n                ChangeValueException |\n                InvalidArgumentException |\n                ResolutionException |\n                ChainNotFoundException |\n                MessageProcessorProcessException |\n                AsynchronousOperationException e\n        ) {\n            throw new FeatureManagementException(e);\n        }\n    }", "signature": "void addFeatures(final AddFeatureWrapper wrapper)", "full_signature": "public void addFeatures(final AddFeatureWrapper wrapper)", "class_method_signature": "FeatureManagerActor.addFeatures(final AddFeatureWrapper wrapper)", "testcase": false, "constructor": false, "invocations": ["getFeatures", "getFeatures", "getMessageProcessor", "resolve", "getOrAdd", "getScatterChainName", "resolve", "getOrAdd", "resolve", "getOrAdd", "getCanonicalName", "resolve", "resolve", "getOrAdd", "getCanonicalName", "getName", "get", "get", "put", "getName", "resolve", "getOrAdd", "resolve", "getOrAdd", "resolve", "getOrAdd", "setValue", "setValue", "setValue", "setValue", "setValue", "setValue", "resolve", "getOrAdd", "process", "pauseProcess", "put", "put"]}, "repository": {"repo_id": 52972024, "url": "https://github.com/SmartTools/smartactors-core", "language": "Java", "is_fork": false, "fork_count": 7, "stargazer_count": 17, "size": 58816, "license": "licensed"}}