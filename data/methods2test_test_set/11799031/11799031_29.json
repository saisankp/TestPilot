{"test_class": {"identifier": "DeregisterServiceProviderServletListenerTest", "superclass": "", "interfaces": "", "fields": [], "file": "gdp-process-wps/src/test/java/gov/usgs/cida/n52/wps/servlet/DeregisterServiceProviderServletListenerTest.java"}, "test_case": {"identifier": "testSomeMethod", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testSomeMethod() {\n        IIORegistry iioRegistry = IIORegistry.getDefaultInstance();\n        \n        DeregisterServiceProviderServletListener l = new DeregisterServiceProviderServletListener();\n        \n        List<ImageInputStreamSpi> iBefore = convertToList(ServiceRegistry.lookupProviders(ImageInputStreamSpi.class, getClass().getClassLoader()));\n        List<ImageOutputStreamSpi> oBefore = convertToList(ServiceRegistry.lookupProviders(ImageOutputStreamSpi.class, getClass().getClassLoader()));\n        \n        List<ImageInputStreamSpi> iiBefore = convertToList(iioRegistry.getServiceProviders(ImageInputStreamSpi.class, false));\n        List<ImageOutputStreamSpi> ooBefore = convertToList(iioRegistry.getServiceProviders(ImageOutputStreamSpi.class, false));\n        \n        l.contextDestroyed(null);\n       \n        List<ImageInputStreamSpi> iiAfter = convertToList(iioRegistry.getServiceProviders(ImageInputStreamSpi.class, false));\n        List<ImageOutputStreamSpi> ooAfter = convertToList(iioRegistry.getServiceProviders(ImageOutputStreamSpi.class, false));\n        \n        List<ImageInputStreamSpi> iAfter = convertToList(ServiceRegistry.lookupProviders(ImageInputStreamSpi.class, getClass().getClassLoader()));\n        List<ImageOutputStreamSpi> oAfter = convertToList(ServiceRegistry.lookupProviders(ImageOutputStreamSpi.class, getClass().getClassLoader()));\n        \n        \n        \n        \n    }", "signature": "void testSomeMethod()", "full_signature": "@Test public void testSomeMethod()", "class_method_signature": "DeregisterServiceProviderServletListenerTest.testSomeMethod()", "testcase": true, "constructor": false, "invocations": ["getDefaultInstance", "convertToList", "lookupProviders", "getClassLoader", "getClass", "convertToList", "lookupProviders", "getClassLoader", "getClass", "convertToList", "getServiceProviders", "convertToList", "getServiceProviders", "contextDestroyed", "convertToList", "getServiceProviders", "convertToList", "getServiceProviders", "convertToList", "lookupProviders", "getClassLoader", "getClass", "convertToList", "lookupProviders", "getClassLoader", "getClass"]}, "focal_class": {"identifier": "DeregisterServiceProviderServletListener", "superclass": "", "interfaces": "implements ServletContextListener", "fields": [{"original_string": "private final static Logger LOGGER = LoggerFactory.getLogger(DeregisterServiceProviderServletListener.class);", "modifier": "private final static", "type": "Logger", "declarator": "LOGGER = LoggerFactory.getLogger(DeregisterServiceProviderServletListener.class)", "var_name": "LOGGER"}], "methods": [{"identifier": "DeregisterServiceProviderServletListener", "parameters": "()", "modifiers": "public", "return": "", "signature": " DeregisterServiceProviderServletListener()", "full_signature": "public  DeregisterServiceProviderServletListener()", "class_method_signature": "DeregisterServiceProviderServletListener.DeregisterServiceProviderServletListener()", "testcase": false, "constructor": true}, {"identifier": "contextInitialized", "parameters": "(ServletContextEvent sce)", "modifiers": "@Override public", "return": "void", "signature": "void contextInitialized(ServletContextEvent sce)", "full_signature": "@Override public void contextInitialized(ServletContextEvent sce)", "class_method_signature": "DeregisterServiceProviderServletListener.contextInitialized(ServletContextEvent sce)", "testcase": false, "constructor": false}, {"identifier": "contextDestroyed", "parameters": "(ServletContextEvent sce)", "modifiers": "@Override public", "return": "void", "signature": "void contextDestroyed(ServletContextEvent sce)", "full_signature": "@Override public void contextDestroyed(ServletContextEvent sce)", "class_method_signature": "DeregisterServiceProviderServletListener.contextDestroyed(ServletContextEvent sce)", "testcase": false, "constructor": false}], "file": "gdp-process-wps/src/main/java/gov/usgs/cida/n52/wps/servlet/DeregisterServiceProviderServletListener.java"}, "focal_method": {"identifier": "contextDestroyed", "parameters": "(ServletContextEvent sce)", "modifiers": "@Override public", "return": "void", "body": "@Override\n    public void contextDestroyed(ServletContextEvent sce) {\n        final ClassLoader classLoader = getClass().getClassLoader();\n        final ServiceRegistry serviceRegistry = IIORegistry.getDefaultInstance();\n        Iterator<Class<?>> categories = IIORegistry.getDefaultInstance().getCategories();\n        if (categories != null) {\n            while (categories.hasNext()) {\n                Class<?> category = categories.next();\n                Iterator<?> providers = serviceRegistry.getServiceProviders(category, false);\n                if (providers != null) {\n                    List providersToRemove = new ArrayList();\n                    while (providers.hasNext()) {\n                        Object provider = providers.next();\n                        if (provider != null && classLoader.equals(provider.getClass().getClassLoader())) {\n                            providersToRemove.add(provider);\n                        }\n                    }\n                    for (Object provider : providersToRemove) {\n                        serviceRegistry.deregisterServiceProvider(provider);\n                        LOGGER.info(\"deregistered service provider {} from category {}\", provider.getClass().getName(), category.getName());\n                    }\n                }\n            }\n        }\n    }", "signature": "void contextDestroyed(ServletContextEvent sce)", "full_signature": "@Override public void contextDestroyed(ServletContextEvent sce)", "class_method_signature": "DeregisterServiceProviderServletListener.contextDestroyed(ServletContextEvent sce)", "testcase": false, "constructor": false, "invocations": ["getClassLoader", "getClass", "getDefaultInstance", "getCategories", "getDefaultInstance", "hasNext", "next", "getServiceProviders", "hasNext", "next", "equals", "getClassLoader", "getClass", "add", "deregisterServiceProvider", "info", "getName", "getClass", "getName"]}, "repository": {"repo_id": 11799031, "url": "https://github.com/USGS-CIDA/geo-data-portal", "language": "Java", "is_fork": false, "fork_count": 21, "stargazer_count": 9, "size": 178468, "license": "licensed"}}