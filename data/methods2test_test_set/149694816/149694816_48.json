{"test_class": {"identifier": "AnsiMessagePrinterTest", "superclass": "extends AbstractTestCase", "interfaces": "", "fields": [], "file": "core/src/test/java/ship/util/AnsiMessagePrinterTest.java"}, "test_case": {"identifier": "testFormat", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n  public void testFormat() {\n    final String resetCode = randomUUID().toString();\n    final String blue = randomUUID().toString();\n    final HashMap<String, String> colors = new HashMap<>();\n    colors.put(\"blue\", blue);\n    colors.put(\"red\", blue);\n    final AnsiMessagePrinter printer = new AnsiMessagePrinter(mock(PrintStream.class));\n    printer.setResetCode(resetCode);\n    printer.setColors(colors);\n    final String encoded = printer.format(\"<blue>hello, world</blue>\");\n    logger.debug(\"Encoded: {}\", encoded);\n    assertTrue(encoded.startsWith(blue));\n    assertTrue(encoded.contains(\"hello\"));\n    assertTrue(encoded.contains(\"world\"));\n    assertTrue(encoded.endsWith(resetCode));\n  }", "signature": "void testFormat()", "full_signature": "@Test public void testFormat()", "class_method_signature": "AnsiMessagePrinterTest.testFormat()", "testcase": true, "constructor": false, "invocations": ["toString", "randomUUID", "toString", "randomUUID", "put", "put", "mock", "setResetCode", "setColors", "format", "debug", "assertTrue", "startsWith", "assertTrue", "contains", "assertTrue", "contains", "assertTrue", "endsWith"]}, "focal_class": {"identifier": "AnsiMessagePrinter", "superclass": "", "interfaces": "implements MessagePrinter", "fields": [{"original_string": "public static final String COLOR_RESET   = \"\\u001B[0m\";", "modifier": "public static final", "type": "String", "declarator": "COLOR_RESET   = \"\\u001B[0m\"", "var_name": "COLOR_RESET"}, {"original_string": "public static final String COLOR_BLACK   = \"\\u001B[30m\";", "modifier": "public static final", "type": "String", "declarator": "COLOR_BLACK   = \"\\u001B[30m\"", "var_name": "COLOR_BLACK"}, {"original_string": "public static final String COLOR_RED     = \"\\u001B[31m\";", "modifier": "public static final", "type": "String", "declarator": "COLOR_RED     = \"\\u001B[31m\"", "var_name": "COLOR_RED"}, {"original_string": "public static final String COLOR_GREEN   = \"\\u001B[32m\";", "modifier": "public static final", "type": "String", "declarator": "COLOR_GREEN   = \"\\u001B[32m\"", "var_name": "COLOR_GREEN"}, {"original_string": "public static final String COLOR_YELLOW  = \"\\u001B[33m\";", "modifier": "public static final", "type": "String", "declarator": "COLOR_YELLOW  = \"\\u001B[33m\"", "var_name": "COLOR_YELLOW"}, {"original_string": "public static final String COLOR_BLUE    = \"\\u001B[34m\";", "modifier": "public static final", "type": "String", "declarator": "COLOR_BLUE    = \"\\u001B[34m\"", "var_name": "COLOR_BLUE"}, {"original_string": "public static final String COLOR_MAGENTA = \"\\u001B[35m\";", "modifier": "public static final", "type": "String", "declarator": "COLOR_MAGENTA = \"\\u001B[35m\"", "var_name": "COLOR_MAGENTA"}, {"original_string": "public static final String COLOR_CYAN    = \"\\u001B[36m\";", "modifier": "public static final", "type": "String", "declarator": "COLOR_CYAN    = \"\\u001B[36m\"", "var_name": "COLOR_CYAN"}, {"original_string": "public static final String COLOR_WHITE   = \"\\u001B[37m\";", "modifier": "public static final", "type": "String", "declarator": "COLOR_WHITE   = \"\\u001B[37m\"", "var_name": "COLOR_WHITE"}, {"original_string": "public static final String COLOR_BRIGHT_BLACK    = removeSuffix(COLOR_BLACK, \"m\") + \";1m\";", "modifier": "public static final", "type": "String", "declarator": "COLOR_BRIGHT_BLACK    = removeSuffix(COLOR_BLACK, \"m\") + \";1m\"", "var_name": "COLOR_BRIGHT_BLACK"}, {"original_string": "public static final String COLOR_BRIGHT_RED      = removeSuffix(COLOR_RED, \"m\") + \";1m\";", "modifier": "public static final", "type": "String", "declarator": "COLOR_BRIGHT_RED      = removeSuffix(COLOR_RED, \"m\") + \";1m\"", "var_name": "COLOR_BRIGHT_RED"}, {"original_string": "public static final String COLOR_BRIGHT_GREEN    = removeSuffix(COLOR_GREEN, \"m\") + \";1m\";", "modifier": "public static final", "type": "String", "declarator": "COLOR_BRIGHT_GREEN    = removeSuffix(COLOR_GREEN, \"m\") + \";1m\"", "var_name": "COLOR_BRIGHT_GREEN"}, {"original_string": "public static final String COLOR_BRIGHT_YELLOW   = removeSuffix(COLOR_YELLOW, \"m\") + \";1m\";", "modifier": "public static final", "type": "String", "declarator": "COLOR_BRIGHT_YELLOW   = removeSuffix(COLOR_YELLOW, \"m\") + \";1m\"", "var_name": "COLOR_BRIGHT_YELLOW"}, {"original_string": "public static final String COLOR_BRIGHT_BLUE     = removeSuffix(COLOR_BLUE, \"m\") + \";1m\";", "modifier": "public static final", "type": "String", "declarator": "COLOR_BRIGHT_BLUE     = removeSuffix(COLOR_BLUE, \"m\") + \";1m\"", "var_name": "COLOR_BRIGHT_BLUE"}, {"original_string": "public static final String COLOR_BRIGHT_MAGENTA  = removeSuffix(COLOR_MAGENTA, \"m\") + \";1m\";", "modifier": "public static final", "type": "String", "declarator": "COLOR_BRIGHT_MAGENTA  = removeSuffix(COLOR_MAGENTA, \"m\") + \";1m\"", "var_name": "COLOR_BRIGHT_MAGENTA"}, {"original_string": "public static final String COLOR_BRIGHT_CYAN     = removeSuffix(COLOR_CYAN, \"m\") + \";1m\";", "modifier": "public static final", "type": "String", "declarator": "COLOR_BRIGHT_CYAN     = removeSuffix(COLOR_CYAN, \"m\") + \";1m\"", "var_name": "COLOR_BRIGHT_CYAN"}, {"original_string": "public static final String COLOR_BRIGHT_WHITE    = removeSuffix(COLOR_WHITE, \"m\") + \";1m\";", "modifier": "public static final", "type": "String", "declarator": "COLOR_BRIGHT_WHITE    = removeSuffix(COLOR_WHITE, \"m\") + \";1m\"", "var_name": "COLOR_BRIGHT_WHITE"}, {"original_string": "public static final String BG_BLACK = \"\\u001B[40m\";", "modifier": "public static final", "type": "String", "declarator": "BG_BLACK = \"\\u001B[40m\"", "var_name": "BG_BLACK"}, {"original_string": "public static final String BG_RED = \"\\u001B[41m\";", "modifier": "public static final", "type": "String", "declarator": "BG_RED = \"\\u001B[41m\"", "var_name": "BG_RED"}, {"original_string": "public static final String BG_GREEN = \"\\u001B[42m\";", "modifier": "public static final", "type": "String", "declarator": "BG_GREEN = \"\\u001B[42m\"", "var_name": "BG_GREEN"}, {"original_string": "public static final String BG_YELLOW = \"\\u001B[43m\";", "modifier": "public static final", "type": "String", "declarator": "BG_YELLOW = \"\\u001B[43m\"", "var_name": "BG_YELLOW"}, {"original_string": "public static final String BG_BLUE = \"\\u001B[44m\";", "modifier": "public static final", "type": "String", "declarator": "BG_BLUE = \"\\u001B[44m\"", "var_name": "BG_BLUE"}, {"original_string": "public static final String BG_MAGENTA = \"\\u001B[45m\";", "modifier": "public static final", "type": "String", "declarator": "BG_MAGENTA = \"\\u001B[45m\"", "var_name": "BG_MAGENTA"}, {"original_string": "public static final String BG_CYAN = \"\\u001B[46m\";", "modifier": "public static final", "type": "String", "declarator": "BG_CYAN = \"\\u001B[46m\"", "var_name": "BG_CYAN"}, {"original_string": "public static final String BG_WHITE = \"\\u001B[47m\";", "modifier": "public static final", "type": "String", "declarator": "BG_WHITE = \"\\u001B[47m\"", "var_name": "BG_WHITE"}, {"original_string": "public static final String BG_BRIGHT_BLACK = removeSuffix(BG_BLACK, \"m\") + \";1m\";", "modifier": "public static final", "type": "String", "declarator": "BG_BRIGHT_BLACK = removeSuffix(BG_BLACK, \"m\") + \";1m\"", "var_name": "BG_BRIGHT_BLACK"}, {"original_string": "public static final String BG_BRIGHT_RED = removeSuffix(BG_RED, \"m\") + \";1m\";", "modifier": "public static final", "type": "String", "declarator": "BG_BRIGHT_RED = removeSuffix(BG_RED, \"m\") + \";1m\"", "var_name": "BG_BRIGHT_RED"}, {"original_string": "public static final String BG_BRIGHT_GREEN = removeSuffix(BG_GREEN, \"m\") + \";1m\";", "modifier": "public static final", "type": "String", "declarator": "BG_BRIGHT_GREEN = removeSuffix(BG_GREEN, \"m\") + \";1m\"", "var_name": "BG_BRIGHT_GREEN"}, {"original_string": "public static final String BG_BRIGHT_YELLOW = removeSuffix(BG_YELLOW, \"m\") + \";1m\";", "modifier": "public static final", "type": "String", "declarator": "BG_BRIGHT_YELLOW = removeSuffix(BG_YELLOW, \"m\") + \";1m\"", "var_name": "BG_BRIGHT_YELLOW"}, {"original_string": "public static final String BG_BRIGHT_BLUE = removeSuffix(BG_BLUE, \"m\") + \";1m\";", "modifier": "public static final", "type": "String", "declarator": "BG_BRIGHT_BLUE = removeSuffix(BG_BLUE, \"m\") + \";1m\"", "var_name": "BG_BRIGHT_BLUE"}, {"original_string": "public static final String BG_BRIGHT_MAGENTA = removeSuffix(BG_MAGENTA, \"m\") + \";1m\";", "modifier": "public static final", "type": "String", "declarator": "BG_BRIGHT_MAGENTA = removeSuffix(BG_MAGENTA, \"m\") + \";1m\"", "var_name": "BG_BRIGHT_MAGENTA"}, {"original_string": "public static final String BG_BRIGHT_CYAN = removeSuffix(BG_CYAN, \"m\") + \";1m\";", "modifier": "public static final", "type": "String", "declarator": "BG_BRIGHT_CYAN = removeSuffix(BG_CYAN, \"m\") + \";1m\"", "var_name": "BG_BRIGHT_CYAN"}, {"original_string": "public static final String BG_BRIGHT_WHITE = removeSuffix(BG_WHITE, \"m\") + \";1m\";", "modifier": "public static final", "type": "String", "declarator": "BG_BRIGHT_WHITE = removeSuffix(BG_WHITE, \"m\") + \";1m\"", "var_name": "BG_BRIGHT_WHITE"}, {"original_string": "protected final transient Logger logger = getLogger(getClass());", "modifier": "protected final transient", "type": "Logger", "declarator": "logger = getLogger(getClass())", "var_name": "logger"}, {"original_string": "@Getter\n  @Setter\n  protected String resetCode = COLOR_RESET;", "modifier": "@Getter\n  @Setter\n  protected", "type": "String", "declarator": "resetCode = COLOR_RESET", "var_name": "resetCode"}, {"original_string": "@Getter\n  @Setter\n  protected Map<String, String> colors = new HashMap<>();", "modifier": "@Getter\n  @Setter\n  protected", "type": "Map<String, String>", "declarator": "colors = new HashMap<>()", "var_name": "colors"}, {"original_string": "protected final PrintStream out;", "modifier": "protected final", "type": "PrintStream", "declarator": "out", "var_name": "out"}], "methods": [{"identifier": "AnsiMessagePrinter", "parameters": "(final PrintStream out)", "modifiers": "public", "return": "", "signature": " AnsiMessagePrinter(final PrintStream out)", "full_signature": "public  AnsiMessagePrinter(final PrintStream out)", "class_method_signature": "AnsiMessagePrinter.AnsiMessagePrinter(final PrintStream out)", "testcase": false, "constructor": true}, {"identifier": "format", "parameters": "(final String message)", "modifiers": "public", "return": "String", "signature": "String format(final String message)", "full_signature": "public String format(final String message)", "class_method_signature": "AnsiMessagePrinter.format(final String message)", "testcase": false, "constructor": false}, {"identifier": "escape", "parameters": "(final String str)", "modifiers": "public", "return": "String", "signature": "String escape(final String str)", "full_signature": "public String escape(final String str)", "class_method_signature": "AnsiMessagePrinter.escape(final String str)", "testcase": false, "constructor": false}, {"identifier": "bind", "parameters": "(final String messageId, Object... args)", "modifiers": "protected", "return": "String", "signature": "String bind(final String messageId, Object... args)", "full_signature": "protected String bind(final String messageId, Object... args)", "class_method_signature": "AnsiMessagePrinter.bind(final String messageId, Object... args)", "testcase": false, "constructor": false}, {"identifier": "print", "parameters": "(final String messageId, Object...args)", "modifiers": "public", "return": "void", "signature": "void print(final String messageId, Object...args)", "full_signature": "public void print(final String messageId, Object...args)", "class_method_signature": "AnsiMessagePrinter.print(final String messageId, Object...args)", "testcase": false, "constructor": false}, {"identifier": "println", "parameters": "()", "modifiers": "public", "return": "void", "signature": "void println()", "full_signature": "public void println()", "class_method_signature": "AnsiMessagePrinter.println()", "testcase": false, "constructor": false}, {"identifier": "println", "parameters": "(final String messageId, Object... args)", "modifiers": "public", "return": "void", "signature": "void println(final String messageId, Object... args)", "full_signature": "public void println(final String messageId, Object... args)", "class_method_signature": "AnsiMessagePrinter.println(final String messageId, Object... args)", "testcase": false, "constructor": false}, {"identifier": "flush", "parameters": "()", "modifiers": "@Override public", "return": "void", "signature": "void flush()", "full_signature": "@Override public void flush()", "class_method_signature": "AnsiMessagePrinter.flush()", "testcase": false, "constructor": false}], "file": "core/src/main/java/ship/util/AnsiMessagePrinter.java"}, "focal_method": {"identifier": "format", "parameters": "(final String message)", "modifiers": "public", "return": "String", "body": "public String format(final String message) {\n    logger.debug(\"Message: {}\", message);\n    if (null == message) {\n      return null;\n    }\n    final StringReader reader = new StringReader(message);\n\n    int ch = 0;\n    State state = new Normal(new Stack<>(), new StringWriter());\n    try {\n      while (0 <= (ch = reader.read())) {\n        logger.trace(\"Char: {} - {}\", ch < 32 ? ' ' : (char) ch, ch);\n        final State old = state;\n        state = state.next(ch);\n        if (old != state) {\n          logger.debug(\"{} -> {}\", old, state);\n        }\n      }\n    } catch (final IOException ex) {\n      throw new IllegalStateException();\n    }\n    logger.debug(\"State: {}\", state);\n    logger.debug(\"Tags: {}\", state.getTags());\n    assertTrue(state instanceof Normal, \"Expression is invalid[\" + state + \": \" + message);\n    assertTrue(state.getTags().isEmpty(),\n        \"The closing tag[\" + state.getTags() + \"] missed: \" + message);\n    return state.getWriter().toString();\n  }", "signature": "String format(final String message)", "full_signature": "public String format(final String message)", "class_method_signature": "AnsiMessagePrinter.format(final String message)", "testcase": false, "constructor": false, "invocations": ["debug", "read", "trace", "next", "debug", "debug", "debug", "getTags", "assertTrue", "assertTrue", "isEmpty", "getTags", "getTags", "toString", "getWriter"]}, "repository": {"repo_id": 149694816, "url": "https://github.com/aergoio/ship", "language": "Java", "is_fork": false, "fork_count": 4, "stargazer_count": 11, "size": 1743, "license": "licensed"}}