{"test_class": {"identifier": "PMMLRuleMapperFactoryTest", "superclass": "", "interfaces": "", "fields": [], "file": "kie-pmml-trusty/kie-pmml-evaluator/kie-pmml-evaluator-assembler/src/test/java/org/kie/pmml/evaluator/assembler/factories/PMMLRuleMapperFactoryTest.java"}, "test_case": {"identifier": "getPredictionRuleMapperSourceWithoutPackage", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void getPredictionRuleMapperSourceWithoutPackage() {\n        final String fullRuleName = \"FULL_RULE_NAME\";\n        String retrieved = PMMLRuleMapperFactory.getPMMLRuleMapperSource(fullRuleName);\n        assertNotNull(retrieved);\n        String expected = String.format(\"public final static Model model = new %s();\", fullRuleName);\n        assertTrue(retrieved.contains(expected));\n    }", "signature": "void getPredictionRuleMapperSourceWithoutPackage()", "full_signature": "@Test public void getPredictionRuleMapperSourceWithoutPackage()", "class_method_signature": "PMMLRuleMapperFactoryTest.getPredictionRuleMapperSourceWithoutPackage()", "testcase": true, "constructor": false, "invocations": ["getPMMLRuleMapperSource", "assertNotNull", "format", "assertTrue", "contains"]}, "focal_class": {"identifier": "PMMLRuleMapperFactory", "superclass": "", "interfaces": "", "fields": [{"original_string": "public static final String KIE_PMML_RULE_MAPPER_CLASS_NAME = \"PMMLRuleMapperImpl\";", "modifier": "public static final", "type": "String", "declarator": "KIE_PMML_RULE_MAPPER_CLASS_NAME = \"PMMLRuleMapperImpl\"", "var_name": "KIE_PMML_RULE_MAPPER_CLASS_NAME"}, {"original_string": "static final String KIE_PMML_RULE_MAPPER_TEMPLATE_JAVA = \"PMMLRuleMapperTemplate.tmpl\";", "modifier": "static final", "type": "String", "declarator": "KIE_PMML_RULE_MAPPER_TEMPLATE_JAVA = \"PMMLRuleMapperTemplate.tmpl\"", "var_name": "KIE_PMML_RULE_MAPPER_TEMPLATE_JAVA"}], "methods": [{"identifier": "PMMLRuleMapperFactory", "parameters": "()", "modifiers": "private", "return": "", "signature": " PMMLRuleMapperFactory()", "full_signature": "private  PMMLRuleMapperFactory()", "class_method_signature": "PMMLRuleMapperFactory.PMMLRuleMapperFactory()", "testcase": false, "constructor": true}, {"identifier": "getPMMLRuleMapperSource", "parameters": "(final String fullRuleName)", "modifiers": "public static", "return": "String", "signature": "String getPMMLRuleMapperSource(final String fullRuleName)", "full_signature": "public static String getPMMLRuleMapperSource(final String fullRuleName)", "class_method_signature": "PMMLRuleMapperFactory.getPMMLRuleMapperSource(final String fullRuleName)", "testcase": false, "constructor": false}], "file": "kie-pmml-trusty/kie-pmml-evaluator/kie-pmml-evaluator-assembler/src/main/java/org/kie/pmml/evaluator/assembler/factories/PMMLRuleMapperFactory.java"}, "focal_method": {"identifier": "getPMMLRuleMapperSource", "parameters": "(final String fullRuleName)", "modifiers": "public static", "return": "String", "body": "public static String getPMMLRuleMapperSource(final String fullRuleName) {\n        final String packageName = fullRuleName.contains(\".\") ? fullRuleName.substring(0,\n                                                                                       fullRuleName.lastIndexOf('.')) : \"\";\n        CompilationUnit cloneCU = JavaParserUtils.getKiePMMLModelCompilationUnit(KIE_PMML_RULE_MAPPER_CLASS_NAME, packageName, KIE_PMML_RULE_MAPPER_TEMPLATE_JAVA, KIE_PMML_RULE_MAPPER_CLASS_NAME);\n        ClassOrInterfaceDeclaration typeDeclaration = (ClassOrInterfaceDeclaration) cloneCU.getTypes().get(0);\n        FieldDeclaration ruleNameField =\n                typeDeclaration.getFieldByName(\"model\").orElseThrow(() -> new RuntimeException(\"The template \" + KIE_PMML_RULE_MAPPER_TEMPLATE_JAVA + \" has been modified.\"));\n        ObjectCreationExpr objectCreationExpr = new ObjectCreationExpr();\n        objectCreationExpr.setType(fullRuleName);\n        ruleNameField.getVariables().get(0).setInitializer(objectCreationExpr);\n        return cloneCU.toString();\n    }", "signature": "String getPMMLRuleMapperSource(final String fullRuleName)", "full_signature": "public static String getPMMLRuleMapperSource(final String fullRuleName)", "class_method_signature": "PMMLRuleMapperFactory.getPMMLRuleMapperSource(final String fullRuleName)", "testcase": false, "constructor": false, "invocations": ["contains", "substring", "lastIndexOf", "getKiePMMLModelCompilationUnit", "get", "getTypes", "orElseThrow", "getFieldByName", "setType", "setInitializer", "get", "getVariables", "toString"]}, "repository": {"repo_id": 1381673, "url": "https://github.com/kiegroup/drools", "stars": 2733, "created": "2/18/2011 8:37:05 AM +00:00", "updates": "2020-01-27T13:12:15+00:00", "fork": "False", "license": "licensed"}}