{"test_class": {"identifier": "CategorizedCircularBufferTest", "superclass": "extends TestCase", "interfaces": "", "fields": [], "file": "src/core/services-impl/src/test/java/it/geosolutions/geostore/util/CategorizedCircularBufferTest.java"}, "test_case": {"identifier": "testSubList", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testSubList() {\n        CategorizedCircularBuffer<String, Long> ccb = new CategorizedCircularBuffer<String, Long>(4);\n\n        ccb.add(0L, \"e0\"); // 3\n        ccb.add(1L, \"e2\"); // 2\n        ccb.add(1L, \"e3\"); // 1\n        ccb.add(3L, \"e4\"); // idx 0\n\n        {\n            List<String> l = ccb.subList(2, 4);\n            assertEquals(2, l.size());\n            assertEquals(\"e2\", l.get(0));\n            assertEquals(\"e0\", l.get(1));\n\n            List<String> kl = ccb.subListByKey(1L, 0, 2);\n            assertEquals(2, kl.size());\n            assertEquals(\"e3\", kl.get(0));\n            assertEquals(\"e2\", kl.get(1));\n        }\n\n        ccb.add(3L, \"e5\"); // idx 0; other will scroll up\n\n        {\n            List<String> l = ccb.subList(2, 4);\n            assertEquals(2, l.size());\n            assertEquals(\"e3\", l.get(0));\n            assertEquals(\"e2\", l.get(1));\n        }\n\n        ccb.add(3L, \"e6\"); // idx 0; other will scroll up\n\n        {\n            List<String> kl = ccb.subListByKey(1L, 0, 1);\n            assertEquals(1, kl.size());\n            assertEquals(\"e3\", kl.get(0));\n        }\n    }", "signature": "void testSubList()", "full_signature": "@Test public void testSubList()", "class_method_signature": "CategorizedCircularBufferTest.testSubList()", "testcase": true, "constructor": false, "invocations": ["add", "add", "add", "add", "subList", "assertEquals", "size", "assertEquals", "get", "assertEquals", "get", "subListByKey", "assertEquals", "size", "assertEquals", "get", "assertEquals", "get", "add", "subList", "assertEquals", "size", "assertEquals", "get", "assertEquals", "get", "add", "subListByKey", "assertEquals", "size", "assertEquals", "get"]}, "focal_class": {"identifier": "CategorizedCircularBuffer", "superclass": "", "interfaces": "", "fields": [{"original_string": "private final int maxSize;", "modifier": "private final", "type": "int", "declarator": "maxSize", "var_name": "maxSize"}, {"original_string": "LinkedList<Pair<T, K>> mainList;", "modifier": "", "type": "LinkedList<Pair<T, K>>", "declarator": "mainList", "var_name": "mainList"}, {"original_string": "private Map<K, LinkedList<T>> typedLists = new HashMap<K, LinkedList<T>>();", "modifier": "private", "type": "Map<K, LinkedList<T>>", "declarator": "typedLists = new HashMap<K, LinkedList<T>>()", "var_name": "typedLists"}], "methods": [{"identifier": "CategorizedCircularBuffer", "parameters": "(int maxCount)", "modifiers": "public", "return": "", "signature": " CategorizedCircularBuffer(int maxCount)", "full_signature": "public  CategorizedCircularBuffer(int maxCount)", "class_method_signature": "CategorizedCircularBuffer.CategorizedCircularBuffer(int maxCount)", "testcase": false, "constructor": true}, {"identifier": "add", "parameters": "(K key, T value)", "modifiers": "public", "return": "void", "signature": "void add(K key, T value)", "full_signature": "public void add(K key, T value)", "class_method_signature": "CategorizedCircularBuffer.add(K key, T value)", "testcase": false, "constructor": false}, {"identifier": "removeLastEntry", "parameters": "()", "modifiers": "private", "return": "void", "signature": "void removeLastEntry()", "full_signature": "private void removeLastEntry()", "class_method_signature": "CategorizedCircularBuffer.removeLastEntry()", "testcase": false, "constructor": false}, {"identifier": "subList", "parameters": "(int fromIndex, int toIndex)", "modifiers": "public", "return": "List<T>", "signature": "List<T> subList(int fromIndex, int toIndex)", "full_signature": "public List<T> subList(int fromIndex, int toIndex)", "class_method_signature": "CategorizedCircularBuffer.subList(int fromIndex, int toIndex)", "testcase": false, "constructor": false}, {"identifier": "size", "parameters": "()", "modifiers": "public", "return": "int", "signature": "int size()", "full_signature": "public int size()", "class_method_signature": "CategorizedCircularBuffer.size()", "testcase": false, "constructor": false}, {"identifier": "subListByKey", "parameters": "(K key, int fromIndex, int toIndex)", "modifiers": "@SuppressWarnings(\"unchecked\") public", "return": "List<T>", "signature": "List<T> subListByKey(K key, int fromIndex, int toIndex)", "full_signature": "@SuppressWarnings(\"unchecked\") public List<T> subListByKey(K key, int fromIndex, int toIndex)", "class_method_signature": "CategorizedCircularBuffer.subListByKey(K key, int fromIndex, int toIndex)", "testcase": false, "constructor": false}, {"identifier": "sizeByKey", "parameters": "(K key)", "modifiers": "public", "return": "int", "signature": "int sizeByKey(K key)", "full_signature": "public int sizeByKey(K key)", "class_method_signature": "CategorizedCircularBuffer.sizeByKey(K key)", "testcase": false, "constructor": false}], "file": "src/core/services-impl/src/main/java/it/geosolutions/geostore/util/CategorizedCircularBuffer.java"}, "focal_method": {"identifier": "subList", "parameters": "(int fromIndex, int toIndex)", "modifiers": "public", "return": "List<T>", "body": "public List<T> subList(int fromIndex, int toIndex) {\n        List<T> ret = new ArrayList<T>(toIndex - fromIndex);\n        for (Pair<T, K> pair : mainList.subList(fromIndex, toIndex)) {\n            ret.add(pair.value);\n        }\n\n        return ret;\n    }", "signature": "List<T> subList(int fromIndex, int toIndex)", "full_signature": "public List<T> subList(int fromIndex, int toIndex)", "class_method_signature": "CategorizedCircularBuffer.subList(int fromIndex, int toIndex)", "testcase": false, "constructor": false, "invocations": ["subList", "add"]}, "repository": {"repo_id": 4157021, "url": "https://github.com/geosolutions-it/geostore", "language": "Java", "is_fork": false, "fork_count": 35, "stargazer_count": 19, "size": 1798, "license": "licensed"}}