{"test_class": {"identifier": "IndividualLoanAssemblerTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private LoanAssembler loanAssembler;", "modifier": "private", "type": "LoanAssembler", "declarator": "loanAssembler", "var_name": "loanAssembler"}, {"original_string": "@Mock private LoanProductDao loanProductDao;", "modifier": "@Mock private", "type": "LoanProductDao", "declarator": "loanProductDao", "var_name": "loanProductDao"}, {"original_string": "@Mock private CustomerDao customerDao;", "modifier": "@Mock private", "type": "CustomerDao", "declarator": "customerDao", "var_name": "customerDao"}, {"original_string": "@Mock private LoanScheduleFactory loanScheduleFactory;", "modifier": "@Mock private", "type": "LoanScheduleFactory", "declarator": "loanScheduleFactory", "var_name": "loanScheduleFactory"}, {"original_string": "@Mock private ScheduledDateGeneration scheduledDateGeneration;", "modifier": "@Mock private", "type": "ScheduledDateGeneration", "declarator": "scheduledDateGeneration", "var_name": "scheduledDateGeneration"}, {"original_string": "@Mock private RecurringScheduledEventFactory scheduledEventFactory;", "modifier": "@Mock private", "type": "RecurringScheduledEventFactory", "declarator": "scheduledEventFactory", "var_name": "scheduledEventFactory"}, {"original_string": "private LoanProductId loanProductId = new LoanProductId(\"LPLPLP-001\");", "modifier": "private", "type": "LoanProductId", "declarator": "loanProductId = new LoanProductId(\"LPLPLP-001\")", "var_name": "loanProductId"}, {"original_string": "private ClientId clientId = new ClientId(\"CCC-001\");", "modifier": "private", "type": "ClientId", "declarator": "clientId = new ClientId(\"CCC-001\")", "var_name": "clientId"}, {"original_string": "@Mock private LoanOfferingBO loanProduct;", "modifier": "@Mock private", "type": "LoanOfferingBO", "declarator": "loanProduct", "var_name": "loanProduct"}], "file": "appdomain/src/test/java/org/mifos/clientportfolio/newloan/applicationservice/IndividualLoanAssemblerTest.java"}, "test_case": {"identifier": "shouldRetrieveLoanProductWhenAssembling", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void shouldRetrieveLoanProductWhenAssembling() {\n\n        // setup\n        IndividualLoanRequest individualLoanRequest = new IndividualLoanRequestBuilder().with(loanProductId).build();\n\n        // stubbing\n        when(loanProductDao.findBySystemId(loanProductId.globalIdentity())).thenReturn(loanProduct);\n\n        // exercise test\n        IndividualLoan individualLoan = loanAssembler.assembleFrom(individualLoanRequest);\n\n        // verification\n        verify(loanProductDao).findBySystemId(loanProductId.globalIdentity());\n        assertThat(individualLoan, is(notNullValue()));\n    }", "signature": "void shouldRetrieveLoanProductWhenAssembling()", "full_signature": "@Test public void shouldRetrieveLoanProductWhenAssembling()", "class_method_signature": "IndividualLoanAssemblerTest.shouldRetrieveLoanProductWhenAssembling()", "testcase": true, "constructor": false, "invocations": ["build", "with", "thenReturn", "when", "findBySystemId", "globalIdentity", "assembleFrom", "findBySystemId", "verify", "globalIdentity", "assertThat", "is", "notNullValue"]}, "focal_class": {"identifier": "IndividualLoanAssembler", "superclass": "", "interfaces": "implements LoanAssembler", "fields": [{"original_string": "private final LoanProductDao loanProductDao;", "modifier": "private final", "type": "LoanProductDao", "declarator": "loanProductDao", "var_name": "loanProductDao"}, {"original_string": "private final CustomerDao customerDao;", "modifier": "private final", "type": "CustomerDao", "declarator": "customerDao", "var_name": "customerDao"}, {"original_string": "private final LoanScheduleFactory loanScheduleFactory;", "modifier": "private final", "type": "LoanScheduleFactory", "declarator": "loanScheduleFactory", "var_name": "loanScheduleFactory"}, {"original_string": "private final ScheduledDateGeneration scheduledDateGeneration;", "modifier": "private final", "type": "ScheduledDateGeneration", "declarator": "scheduledDateGeneration", "var_name": "scheduledDateGeneration"}, {"original_string": "private final RecurringScheduledEventFactory scheduledEventFactory;", "modifier": "private final", "type": "RecurringScheduledEventFactory", "declarator": "scheduledEventFactory", "var_name": "scheduledEventFactory"}], "methods": [{"identifier": "IndividualLoanAssembler", "parameters": "(LoanProductDao loanProductDao, CustomerDao customerDao, LoanScheduleFactory loanScheduleFactory,\n            ScheduledDateGeneration scheduledDateGeneration, RecurringScheduledEventFactory scheduledEventFactory)", "modifiers": "public", "return": "", "signature": " IndividualLoanAssembler(LoanProductDao loanProductDao, CustomerDao customerDao, LoanScheduleFactory loanScheduleFactory,\n            ScheduledDateGeneration scheduledDateGeneration, RecurringScheduledEventFactory scheduledEventFactory)", "full_signature": "public  IndividualLoanAssembler(LoanProductDao loanProductDao, CustomerDao customerDao, LoanScheduleFactory loanScheduleFactory,\n            ScheduledDateGeneration scheduledDateGeneration, RecurringScheduledEventFactory scheduledEventFactory)", "class_method_signature": "IndividualLoanAssembler.IndividualLoanAssembler(LoanProductDao loanProductDao, CustomerDao customerDao, LoanScheduleFactory loanScheduleFactory,\n            ScheduledDateGeneration scheduledDateGeneration, RecurringScheduledEventFactory scheduledEventFactory)", "testcase": false, "constructor": true}, {"identifier": "assembleFrom", "parameters": "(IndividualLoanRequest individualLoan)", "modifiers": "@Override public", "return": "IndividualLoan", "signature": "IndividualLoan assembleFrom(IndividualLoanRequest individualLoan)", "full_signature": "@Override public IndividualLoan assembleFrom(IndividualLoanRequest individualLoan)", "class_method_signature": "IndividualLoanAssembler.assembleFrom(IndividualLoanRequest individualLoan)", "testcase": false, "constructor": false}], "file": "appdomain/src/main/java/org/mifos/clientportfolio/newloan/applicationservice/IndividualLoanAssembler.java"}, "focal_method": {"identifier": "assembleFrom", "parameters": "(IndividualLoanRequest individualLoan)", "modifiers": "@Override public", "return": "IndividualLoan", "body": "@Override\n    public IndividualLoan assembleFrom(IndividualLoanRequest individualLoan) {\n\n        LoanOfferingBO loanProduct = this.loanProductDao.findBySystemId(individualLoan.getLoanProductId().globalIdentity());\n        ClientBO client = this.customerDao.findClientBySystemId(individualLoan.getClientId().globalIdentity());\n\n        int occurences = 12;\n        DateTime lastScheduledDate = new DateTime();\n\n        ScheduledEvent scheduledEvent = scheduledEventFactory.createScheduledEventFrom(loanProduct.getLoanOfferingMeetingValue());\n        List<DateTime> loanScheduleDates = scheduledDateGeneration.generateScheduledDates(occurences, lastScheduledDate, scheduledEvent, false);\n\n        // FIXME - assemble loanAmount from dto\n        Money loanAmount = null;\n        Double interestRate = Double.valueOf(\"10.0\");\n        Integer interestDays = Integer.valueOf(AccountingRules.getNumberOfInterestDays());\n//        IndividualLoanSchedule loanSchedule = loanScheduleFactory.create(loanScheduleDates, loanProduct, loanAmount, interestRate, interestDays);\n\n        return new IndividualLoanImpl();\n    }", "signature": "IndividualLoan assembleFrom(IndividualLoanRequest individualLoan)", "full_signature": "@Override public IndividualLoan assembleFrom(IndividualLoanRequest individualLoan)", "class_method_signature": "IndividualLoanAssembler.assembleFrom(IndividualLoanRequest individualLoan)", "testcase": false, "constructor": false, "invocations": ["findBySystemId", "globalIdentity", "getLoanProductId", "findClientBySystemId", "globalIdentity", "getClientId", "createScheduledEventFrom", "getLoanOfferingMeetingValue", "generateScheduledDates", "valueOf", "valueOf", "getNumberOfInterestDays"]}, "repository": {"repo_id": 1348716, "url": "https://github.com/mifos/head", "language": "Java", "is_fork": false, "fork_count": 91, "stargazer_count": 55, "size": 532732, "license": "licensed"}}