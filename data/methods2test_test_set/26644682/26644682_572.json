{"test_class": {"identifier": "MinTest", "superclass": "extends OperationBaseTest", "interfaces": "", "fields": [], "file": "dataprep-transformation/src/test/java/org/talend/dataprep/transformation/aggregation/operation/MinTest.java"}, "test_case": {"identifier": "shouldComputeMin", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void shouldComputeMin() {\n        // given when\n        AggregationResult result = new AggregationResult(Operator.MIN);\n        aggregator.accept(getRow(\"toto\", \"5123.4\"), result);\n        aggregator.accept(getRow(\"tata\", \"-50.2\"), result); // <-- min here for tata\n        aggregator.accept(getRow(\"toto\", \"786.884\"), result);\n        aggregator.accept(getRow(\"tata\", \"-0.2\"), result);\n        aggregator.accept(getRow(\"toto\", \"41843.453\"), result);\n        aggregator.accept(getRow(\"toto\", \"0\"), result);\n        aggregator.accept(getRow(\"tata\", \"20\"), result);\n        aggregator.accept(getRow(\"toto\", \"-1\"), result); // <-- min here for toto\n        aggregator.accept(getRow(\"toto\", \"8.87\"), result);\n        aggregator.accept(getRow(\"tata\", \"875\"), result);\n        aggregator.accept(getRow(\"toto\", \"-0.01\"), result);\n        aggregator.accept(getRow(\"tutu\", \"dqsfqs\"), result); // <-- should not be part of the result\n\n        // then\n        Assert.assertEquals(result.get(\"toto\").getValue(), -1, 0);\n        Assert.assertEquals(result.get(\"tata\").getValue(), -50.2, 0);\n        Assert.assertNull(result.get(\"tutu\"));\n    }", "signature": "void shouldComputeMin()", "full_signature": "@Test public void shouldComputeMin()", "class_method_signature": "MinTest.shouldComputeMin()", "testcase": true, "constructor": false, "invocations": ["accept", "getRow", "accept", "getRow", "accept", "getRow", "accept", "getRow", "accept", "getRow", "accept", "getRow", "accept", "getRow", "accept", "getRow", "accept", "getRow", "accept", "getRow", "accept", "getRow", "accept", "getRow", "assertEquals", "getValue", "get", "assertEquals", "getValue", "get", "assertNull", "get"]}, "focal_class": {"identifier": "Min", "superclass": "extends AbstractAggregator", "interfaces": "implements Aggregator", "fields": [], "methods": [{"identifier": "Min", "parameters": "(String groupBy, String columnId)", "modifiers": "", "return": "", "signature": " Min(String groupBy, String columnId)", "full_signature": "  Min(String groupBy, String columnId)", "class_method_signature": "Min.Min(String groupBy, String columnId)", "testcase": false, "constructor": true}, {"identifier": "accept", "parameters": "(DataSetRow row, AggregationResult result)", "modifiers": "@Override public", "return": "void", "signature": "void accept(DataSetRow row, AggregationResult result)", "full_signature": "@Override public void accept(DataSetRow row, AggregationResult result)", "class_method_signature": "Min.accept(DataSetRow row, AggregationResult result)", "testcase": false, "constructor": false}, {"identifier": "normalize", "parameters": "(AggregationResult result)", "modifiers": "@Override public", "return": "void", "signature": "void normalize(AggregationResult result)", "full_signature": "@Override public void normalize(AggregationResult result)", "class_method_signature": "Min.normalize(AggregationResult result)", "testcase": false, "constructor": false}], "file": "dataprep-transformation/src/main/java/org/talend/dataprep/transformation/aggregation/operation/Min.java"}, "focal_method": {"identifier": "accept", "parameters": "(DataSetRow row, AggregationResult result)", "modifiers": "@Override public", "return": "void", "body": "@Override\n    public void accept(DataSetRow row, AggregationResult result) {\n        final String minKey = row.get(groupBy);\n\n        // skip value not found\n        if (StringUtils.isEmpty(minKey)) {\n            return;\n        }\n\n        // get the value\n        double currentValue;\n        try {\n            currentValue = Double.parseDouble(row.get(columnId));\n        } catch (NumberFormatException e) {\n            // skip non number\n            return;\n        }\n\n        // init the group by in the result\n        if (!result.contains(minKey)) {\n            result.put(minKey, new NumberContext(currentValue));\n        }\n\n        NumberContext context = (NumberContext) result.get(minKey);\n\n        if (currentValue < context.getValue()) {\n            context.setValue(currentValue);\n        }\n    }", "signature": "void accept(DataSetRow row, AggregationResult result)", "full_signature": "@Override public void accept(DataSetRow row, AggregationResult result)", "class_method_signature": "Min.accept(DataSetRow row, AggregationResult result)", "testcase": false, "constructor": false, "invocations": ["get", "isEmpty", "parseDouble", "get", "contains", "put", "get", "getValue", "setValue"]}, "repository": {"repo_id": 26644682, "url": "https://github.com/Talend/data-prep", "language": "Java", "is_fork": false, "fork_count": 29, "stargazer_count": 53, "size": 70450, "license": "licensed"}}