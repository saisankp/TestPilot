{"test_class": {"identifier": "HttpServerAdapterTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "@Mock HttpServerAdapter<Object, Object> adapter;", "modifier": "@Mock", "type": "HttpServerAdapter<Object, Object>", "declarator": "adapter", "var_name": "adapter"}, {"original_string": "@Mock Span span;", "modifier": "@Mock", "type": "Span", "declarator": "span", "var_name": "span"}, {"original_string": "Object request = new Object();", "modifier": "", "type": "Object", "declarator": "request = new Object()", "var_name": "request"}, {"original_string": "Object response = new Object();", "modifier": "", "type": "Object", "declarator": "response = new Object()", "var_name": "response"}], "file": "instrumentation/http/src/test/java/brave/http/HttpServerAdapterTest.java"}, "test_case": {"identifier": "parseClientIpAndPort_prefersXForwardedFor", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test public void parseClientIpAndPort_prefersXForwardedFor() {\n    when(adapter.requestHeader(request, \"X-Forwarded-For\")).thenReturn(\"1.2.3.4\");\n\n    adapter.parseClientIpAndPort(request, span);\n\n    verify(span).remoteIpAndPort(\"1.2.3.4\", 0);\n    verifyNoMoreInteractions(span);\n  }", "signature": "void parseClientIpAndPort_prefersXForwardedFor()", "full_signature": "@Test public void parseClientIpAndPort_prefersXForwardedFor()", "class_method_signature": "HttpServerAdapterTest.parseClientIpAndPort_prefersXForwardedFor()", "testcase": true, "constructor": false, "invocations": ["thenReturn", "when", "requestHeader", "parseClientIpAndPort", "remoteIpAndPort", "verify", "verifyNoMoreInteractions"]}, "focal_class": {"identifier": "HttpServerAdapter", "superclass": "extends HttpAdapter<Req, Resp>", "interfaces": "", "fields": [], "methods": [{"identifier": "parseClientAddress", "parameters": "(Req req, zipkin2.Endpoint.Builder builder)", "modifiers": "@Deprecated public", "return": "boolean", "signature": "boolean parseClientAddress(Req req, zipkin2.Endpoint.Builder builder)", "full_signature": "@Deprecated public boolean parseClientAddress(Req req, zipkin2.Endpoint.Builder builder)", "class_method_signature": "HttpServerAdapter.parseClientAddress(Req req, zipkin2.Endpoint.Builder builder)", "testcase": false, "constructor": false}, {"identifier": "parseClientIpAndPort", "parameters": "(Req req, Span span)", "modifiers": "public", "return": "boolean", "signature": "boolean parseClientIpAndPort(Req req, Span span)", "full_signature": "public boolean parseClientIpAndPort(Req req, Span span)", "class_method_signature": "HttpServerAdapter.parseClientIpAndPort(Req req, Span span)", "testcase": false, "constructor": false}, {"identifier": "parseClientIpFromXForwardedFor", "parameters": "(Req req, Span span)", "modifiers": "public", "return": "boolean", "signature": "boolean parseClientIpFromXForwardedFor(Req req, Span span)", "full_signature": "public boolean parseClientIpFromXForwardedFor(Req req, Span span)", "class_method_signature": "HttpServerAdapter.parseClientIpFromXForwardedFor(Req req, Span span)", "testcase": false, "constructor": false}], "file": "instrumentation/http/src/main/java/brave/http/HttpServerAdapter.java"}, "focal_method": {"identifier": "parseClientIpAndPort", "parameters": "(Req req, Span span)", "modifiers": "public", "return": "boolean", "body": "public boolean parseClientIpAndPort(Req req, Span span) {\n    return parseClientIpFromXForwardedFor(req, span);\n  }", "signature": "boolean parseClientIpAndPort(Req req, Span span)", "full_signature": "public boolean parseClientIpAndPort(Req req, Span span)", "class_method_signature": "HttpServerAdapter.parseClientIpAndPort(Req req, Span span)", "testcase": false, "constructor": false, "invocations": ["parseClientIpFromXForwardedFor"]}, "repository": {"repo_id": 9278888, "url": "https://github.com/openzipkin/brave", "stars": 1754, "created": "4/7/2013 3:48:18 PM +00:00", "updates": "2020-01-26T11:52:41+00:00", "fork": "False", "license": "licensed"}}