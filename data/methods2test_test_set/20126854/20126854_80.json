{"test_class": {"identifier": "PreDiffExecutorTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final UnitTestZipEntry ENTRY_LEVEL_6 =\n      UnitTestZipArchive.makeUnitTestZipEntry(\"/for/great/justice\", 6, \"entry A\", null);", "modifier": "private static final", "type": "UnitTestZipEntry", "declarator": "ENTRY_LEVEL_6 =\n      UnitTestZipArchive.makeUnitTestZipEntry(\"/for/great/justice\", 6, \"entry A\", null)", "var_name": "ENTRY_LEVEL_6"}, {"original_string": "private static final UnitTestZipEntry ENTRY_LEVEL_9 =\n      UnitTestZipArchive.makeUnitTestZipEntry(\"/for/great/justice\", 9, \"entry A\", null);", "modifier": "private static final", "type": "UnitTestZipEntry", "declarator": "ENTRY_LEVEL_9 =\n      UnitTestZipArchive.makeUnitTestZipEntry(\"/for/great/justice\", 9, \"entry A\", null)", "var_name": "ENTRY_LEVEL_9"}, {"original_string": "private List<File> tempFilesCreated;", "modifier": "private", "type": "List<File>", "declarator": "tempFilesCreated", "var_name": "tempFilesCreated"}, {"original_string": "private File deltaFriendlyOldFile;", "modifier": "private", "type": "File", "declarator": "deltaFriendlyOldFile", "var_name": "deltaFriendlyOldFile"}, {"original_string": "private File deltaFriendlyNewFile;", "modifier": "private", "type": "File", "declarator": "deltaFriendlyNewFile", "var_name": "deltaFriendlyNewFile"}], "file": "feya/libraries/archive_diff/diff.generator/src/test/java/com/google/archivepatcher/generator/PreDiffExecutorTest.java"}, "test_case": {"identifier": "testPrepareForDiffing_OneCompressedEntry_Changed_Limited", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n  public void testPrepareForDiffing_OneCompressedEntry_Changed_Limited() throws IOException {\n    // Like above, but this time limited by a TotalRecompressionLimiter that will prevent the\n    // uncompression of the resources.\n    byte[] oldBytes = UnitTestZipArchive.makeTestZip(Collections.singletonList(ENTRY_LEVEL_6));\n    File oldFile = store(oldBytes);\n    byte[] newBytes = UnitTestZipArchive.makeTestZip(Collections.singletonList(ENTRY_LEVEL_9));\n    File newFile = store(newBytes);\n    TotalRecompressionLimiter limiter = new TotalRecompressionLimiter(1); // 1 byte limitation\n    PreDiffExecutor executor =\n        new PreDiffExecutor.Builder()\n            .readingOriginalFiles(oldFile, newFile)\n            .writingDeltaFriendlyFiles(deltaFriendlyOldFile, deltaFriendlyNewFile)\n            .withRecommendationModifier(limiter)\n            .build();\n    PreDiffPlan plan = executor.prepareForDiffing();\n    Assert.assertNotNull(plan);\n    // The plan should be to leave everything alone because of the limiter\n    Assert.assertTrue(plan.getOldFileUncompressionPlan().isEmpty());\n    Assert.assertTrue(plan.getNewFileUncompressionPlan().isEmpty());\n    Assert.assertTrue(plan.getDeltaFriendlyNewFileRecompressionPlan().isEmpty());\n    // Because nothing has changed, the delta-friendly files should be exact matches for the\n    // original files.\n    assertFileEquals(oldFile, deltaFriendlyOldFile);\n    assertFileEquals(newFile, deltaFriendlyNewFile);\n  }", "signature": "void testPrepareForDiffing_OneCompressedEntry_Changed_Limited()", "full_signature": "@Test public void testPrepareForDiffing_OneCompressedEntry_Changed_Limited()", "class_method_signature": "PreDiffExecutorTest.testPrepareForDiffing_OneCompressedEntry_Changed_Limited()", "testcase": true, "constructor": false, "invocations": ["makeTestZip", "singletonList", "store", "makeTestZip", "singletonList", "store", "build", "withRecommendationModifier", "writingDeltaFriendlyFiles", "readingOriginalFiles", "prepareForDiffing", "assertNotNull", "assertTrue", "isEmpty", "getOldFileUncompressionPlan", "assertTrue", "isEmpty", "getNewFileUncompressionPlan", "assertTrue", "isEmpty", "getDeltaFriendlyNewFileRecompressionPlan", "assertFileEquals", "assertFileEquals"]}, "focal_class": {"identifier": "PreDiffExecutor", "superclass": "", "interfaces": "", "fields": [{"original_string": "private final File originalOldFile;", "modifier": "private final", "type": "File", "declarator": "originalOldFile", "var_name": "originalOldFile"}, {"original_string": "private final File originalNewFile;", "modifier": "private final", "type": "File", "declarator": "originalNewFile", "var_name": "originalNewFile"}, {"original_string": "private final File deltaFriendlyOldFile;", "modifier": "private final", "type": "File", "declarator": "deltaFriendlyOldFile", "var_name": "deltaFriendlyOldFile"}, {"original_string": "private final File deltaFriendlyNewFile;", "modifier": "private final", "type": "File", "declarator": "deltaFriendlyNewFile", "var_name": "deltaFriendlyNewFile"}, {"original_string": "private final List<RecommendationModifier> recommendationModifiers;", "modifier": "private final", "type": "List<RecommendationModifier>", "declarator": "recommendationModifiers", "var_name": "recommendationModifiers"}], "methods": [{"identifier": "PreDiffExecutor", "parameters": "(\n      File originalOldFile,\n      File originalNewFile,\n      File deltaFriendlyOldFile,\n      File deltaFriendlyNewFile,\n      List<RecommendationModifier> recommendationModifiers)", "modifiers": "private", "return": "", "signature": " PreDiffExecutor(\n      File originalOldFile,\n      File originalNewFile,\n      File deltaFriendlyOldFile,\n      File deltaFriendlyNewFile,\n      List<RecommendationModifier> recommendationModifiers)", "full_signature": "private  PreDiffExecutor(\n      File originalOldFile,\n      File originalNewFile,\n      File deltaFriendlyOldFile,\n      File deltaFriendlyNewFile,\n      List<RecommendationModifier> recommendationModifiers)", "class_method_signature": "PreDiffExecutor.PreDiffExecutor(\n      File originalOldFile,\n      File originalNewFile,\n      File deltaFriendlyOldFile,\n      File deltaFriendlyNewFile,\n      List<RecommendationModifier> recommendationModifiers)", "testcase": false, "constructor": true}, {"identifier": "prepareForDiffing", "parameters": "()", "modifiers": "public", "return": "PreDiffPlan", "signature": "PreDiffPlan prepareForDiffing()", "full_signature": "public PreDiffPlan prepareForDiffing()", "class_method_signature": "PreDiffExecutor.prepareForDiffing()", "testcase": false, "constructor": false}, {"identifier": "generateDeltaFriendlyFiles", "parameters": "(PreDiffPlan preDiffPlan)", "modifiers": "private", "return": "List<TypedRange<JreDeflateParameters>>", "signature": "List<TypedRange<JreDeflateParameters>> generateDeltaFriendlyFiles(PreDiffPlan preDiffPlan)", "full_signature": "private List<TypedRange<JreDeflateParameters>> generateDeltaFriendlyFiles(PreDiffPlan preDiffPlan)", "class_method_signature": "PreDiffExecutor.generateDeltaFriendlyFiles(PreDiffPlan preDiffPlan)", "testcase": false, "constructor": false}, {"identifier": "generatePreDiffPlan", "parameters": "()", "modifiers": "private", "return": "PreDiffPlan", "signature": "PreDiffPlan generatePreDiffPlan()", "full_signature": "private PreDiffPlan generatePreDiffPlan()", "class_method_signature": "PreDiffExecutor.generatePreDiffPlan()", "testcase": false, "constructor": false}], "file": "feya/libraries/archive_diff/diff.generator/src/main/java/com/google/archivepatcher/generator/PreDiffExecutor.java"}, "focal_method": {"identifier": "prepareForDiffing", "parameters": "()", "modifiers": "public", "return": "PreDiffPlan", "body": "public PreDiffPlan prepareForDiffing() throws IOException {\n    PreDiffPlan preDiffPlan = generatePreDiffPlan();\n    List<TypedRange<JreDeflateParameters>> deltaFriendlyNewFileRecompressionPlan = null;\n    if (deltaFriendlyOldFile != null) {\n      // Builder.writingDeltaFriendlyFiles() ensures old and new are non-null when called, so a\n      // check on either is sufficient.\n      deltaFriendlyNewFileRecompressionPlan =\n          Collections.unmodifiableList(generateDeltaFriendlyFiles(preDiffPlan));\n    }\n    return new PreDiffPlan(\n        preDiffPlan.getQualifiedRecommendations(),\n        preDiffPlan.getOldFileUncompressionPlan(),\n        preDiffPlan.getNewFileUncompressionPlan(),\n        deltaFriendlyNewFileRecompressionPlan);\n  }", "signature": "PreDiffPlan prepareForDiffing()", "full_signature": "public PreDiffPlan prepareForDiffing()", "class_method_signature": "PreDiffExecutor.prepareForDiffing()", "testcase": false, "constructor": false, "invocations": ["generatePreDiffPlan", "unmodifiableList", "generateDeltaFriendlyFiles", "getQualifiedRecommendations", "getOldFileUncompressionPlan", "getNewFileUncompressionPlan"]}, "repository": {"repo_id": 20126854, "url": "https://github.com/kaedea/Feya", "language": "Java", "is_fork": false, "fork_count": 1, "stargazer_count": 12, "size": 7798, "license": "licensed"}}