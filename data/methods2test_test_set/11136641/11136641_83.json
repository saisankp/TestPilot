{"test_class": {"identifier": "DirContextPoolableObjectFactoryTest", "superclass": "extends AbstractPoolTestCase", "interfaces": "", "fields": [], "file": "core/src/test/java/org/springframework/ldap/pool/factory/DirContextPoolableObjectFactoryTest.java"}, "test_case": {"identifier": "testDestroyObject", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testDestroyObject() throws Exception {\n        final DirContextPoolableObjectFactory objectFactory = new DirContextPoolableObjectFactory();\n\n        objectFactory.destroyObject(DirContextType.READ_ONLY, dirContextMock);\n\n        DirContext throwingDirContextMock = Mockito.mock(DirContext.class);\n\n        doThrow(new RuntimeException(\"Failed to close\"))\n                .when(throwingDirContextMock).close();\n\n        objectFactory.destroyObject(DirContextType.READ_ONLY, throwingDirContextMock);\n        verify(dirContextMock).close();\n    }", "signature": "void testDestroyObject()", "full_signature": "@Test public void testDestroyObject()", "class_method_signature": "DirContextPoolableObjectFactoryTest.testDestroyObject()", "testcase": true, "constructor": false, "invocations": ["destroyObject", "mock", "close", "when", "doThrow", "destroyObject", "close", "verify"]}, "focal_class": {"identifier": "DirContextPoolableObjectFactory", "superclass": "extends BaseKeyedPoolableObjectFactory", "interfaces": "", "fields": [{"original_string": "protected final Logger logger = LoggerFactory.getLogger(this.getClass());", "modifier": "protected final", "type": "Logger", "declarator": "logger = LoggerFactory.getLogger(this.getClass())", "var_name": "logger"}, {"original_string": "private static final Set<Class<? extends Throwable>> DEFAULT_NONTRANSIENT_EXCEPTIONS\n            = new HashSet<Class<? extends Throwable>>(){{\n       add(CommunicationException.class);\n    }};", "modifier": "private static final", "type": "Set<Class<? extends Throwable>>", "declarator": "DEFAULT_NONTRANSIENT_EXCEPTIONS\n            = new HashSet<Class<? extends Throwable>>(){{\n       add(CommunicationException.class);\n    }}", "var_name": "DEFAULT_NONTRANSIENT_EXCEPTIONS"}, {"original_string": "private ContextSource contextSource;", "modifier": "private", "type": "ContextSource", "declarator": "contextSource", "var_name": "contextSource"}, {"original_string": "private DirContextValidator dirContextValidator;", "modifier": "private", "type": "DirContextValidator", "declarator": "dirContextValidator", "var_name": "dirContextValidator"}, {"original_string": "private Set<Class<? extends Throwable>> nonTransientExceptions = DEFAULT_NONTRANSIENT_EXCEPTIONS;", "modifier": "private", "type": "Set<Class<? extends Throwable>>", "declarator": "nonTransientExceptions = DEFAULT_NONTRANSIENT_EXCEPTIONS", "var_name": "nonTransientExceptions"}], "methods": [{"identifier": "setNonTransientExceptions", "parameters": "(Collection<Class<? extends Throwable>> nonTransientExceptions)", "modifiers": "", "return": "void", "signature": "void setNonTransientExceptions(Collection<Class<? extends Throwable>> nonTransientExceptions)", "full_signature": " void setNonTransientExceptions(Collection<Class<? extends Throwable>> nonTransientExceptions)", "class_method_signature": "DirContextPoolableObjectFactory.setNonTransientExceptions(Collection<Class<? extends Throwable>> nonTransientExceptions)", "testcase": false, "constructor": false}, {"identifier": "getContextSource", "parameters": "()", "modifiers": "public", "return": "ContextSource", "signature": "ContextSource getContextSource()", "full_signature": "public ContextSource getContextSource()", "class_method_signature": "DirContextPoolableObjectFactory.getContextSource()", "testcase": false, "constructor": false}, {"identifier": "setContextSource", "parameters": "(ContextSource contextSource)", "modifiers": "public", "return": "void", "signature": "void setContextSource(ContextSource contextSource)", "full_signature": "public void setContextSource(ContextSource contextSource)", "class_method_signature": "DirContextPoolableObjectFactory.setContextSource(ContextSource contextSource)", "testcase": false, "constructor": false}, {"identifier": "getDirContextValidator", "parameters": "()", "modifiers": "public", "return": "DirContextValidator", "signature": "DirContextValidator getDirContextValidator()", "full_signature": "public DirContextValidator getDirContextValidator()", "class_method_signature": "DirContextPoolableObjectFactory.getDirContextValidator()", "testcase": false, "constructor": false}, {"identifier": "setDirContextValidator", "parameters": "(DirContextValidator dirContextValidator)", "modifiers": "public", "return": "void", "signature": "void setDirContextValidator(DirContextValidator dirContextValidator)", "full_signature": "public void setDirContextValidator(DirContextValidator dirContextValidator)", "class_method_signature": "DirContextPoolableObjectFactory.setDirContextValidator(DirContextValidator dirContextValidator)", "testcase": false, "constructor": false}, {"identifier": "makeObject", "parameters": "(Object key)", "modifiers": "public", "return": "Object", "signature": "Object makeObject(Object key)", "full_signature": "public Object makeObject(Object key)", "class_method_signature": "DirContextPoolableObjectFactory.makeObject(Object key)", "testcase": false, "constructor": false}, {"identifier": "makeFailureAwareProxy", "parameters": "(DirContext readOnlyContext)", "modifiers": "private", "return": "Object", "signature": "Object makeFailureAwareProxy(DirContext readOnlyContext)", "full_signature": "private Object makeFailureAwareProxy(DirContext readOnlyContext)", "class_method_signature": "DirContextPoolableObjectFactory.makeFailureAwareProxy(DirContext readOnlyContext)", "testcase": false, "constructor": false}, {"identifier": "validateObject", "parameters": "(Object key, Object obj)", "modifiers": "public", "return": "boolean", "signature": "boolean validateObject(Object key, Object obj)", "full_signature": "public boolean validateObject(Object key, Object obj)", "class_method_signature": "DirContextPoolableObjectFactory.validateObject(Object key, Object obj)", "testcase": false, "constructor": false}, {"identifier": "destroyObject", "parameters": "(Object key, Object obj)", "modifiers": "public", "return": "void", "signature": "void destroyObject(Object key, Object obj)", "full_signature": "public void destroyObject(Object key, Object obj)", "class_method_signature": "DirContextPoolableObjectFactory.destroyObject(Object key, Object obj)", "testcase": false, "constructor": false}], "file": "core/src/main/java/org/springframework/ldap/pool/factory/DirContextPoolableObjectFactory.java"}, "focal_method": {"identifier": "destroyObject", "parameters": "(Object key, Object obj)", "modifiers": "public", "return": "void", "body": "public void destroyObject(Object key, Object obj) throws Exception {\n        Assert.isTrue(obj instanceof DirContext,\n                \"The Object to validate must be of type '\" + DirContext.class\n                        + \"'\");\n\n        try {\n            final DirContext dirContext = (DirContext) obj;\n            if (this.logger.isDebugEnabled()) {\n                this.logger.debug(\"Closing \" + key + \" DirContext='\"\n                        + dirContext + \"'\");\n            }\n            dirContext.close();\n            if (this.logger.isDebugEnabled()) {\n                this.logger.debug(\"Closed \" + key + \" DirContext='\"\n                        + dirContext + \"'\");\n            }\n        } catch (Exception e) {\n            this.logger.warn(\n                    \"An exception occured while closing '\" + obj + \"'\", e);\n        }\n    }", "signature": "void destroyObject(Object key, Object obj)", "full_signature": "public void destroyObject(Object key, Object obj)", "class_method_signature": "DirContextPoolableObjectFactory.destroyObject(Object key, Object obj)", "testcase": false, "constructor": false, "invocations": ["isTrue", "isDebugEnabled", "debug", "close", "isDebugEnabled", "debug", "warn"]}, "repository": {"repo_id": 11136641, "url": "https://github.com/spring-projects/spring-ldap", "language": "Java", "is_fork": false, "fork_count": 433, "stargazer_count": 240, "size": 24447, "license": "licensed"}}