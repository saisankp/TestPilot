{"test_class": {"identifier": "TokenValidatorTest", "superclass": "extends RedisBaseTest", "interfaces": "", "fields": [{"original_string": "@Autowired\n\tprivate TokenValidator tokenValidator;", "modifier": "@Autowired\n\tprivate", "type": "TokenValidator", "declarator": "tokenValidator", "var_name": "tokenValidator"}], "file": "core/modules/boot/src/test/java/org/onetwo/boot/module/redis/TokenValidatorTest.java"}, "test_case": {"identifier": "testCheck", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n\tpublic void testCheck(){\n\t\tString key = \"addOrder\";\n\t\tString value = \"709394\";\n\t\tthis.tokenValidator.clear(key);\n\t\tthis.tokenValidator.save(key, ()->value);\n\t\t\n\t\t//value\u4e0d\u6b63\u786e\n\t\tAssertions.assertThatExceptionOfType(ServiceException.class)\n\t\t\t\t\t.isThrownBy(()->{\n\t\t\t\t\t\tthis.tokenValidator.check(key, \"error code\", ()->{\n\t\t\t\t\t\t\tAssert.fail(\"will not run...\");\n\t\t\t\t\t\t});\n\t\t\t\t\t})\n\t\t\t\t\t.withMessage(TokenValidatorErrors.TOKEN_INVALID_OR_EXPIRED.getErrorMessage());\n\n\t\tthis.tokenValidator.check(key, value, ()->{\n\t\t\tSystem.out.println(\"run...\");\n\t\t});\n\t\tthis.tokenValidator.clear(key);\n\t}", "signature": "void testCheck()", "full_signature": "@Test public void testCheck()", "class_method_signature": "TokenValidatorTest.testCheck()", "testcase": true, "constructor": false, "invocations": ["clear", "save", "withMessage", "isThrownBy", "assertThatExceptionOfType", "check", "fail", "getErrorMessage", "check", "println", "clear"]}, "focal_class": {"identifier": "TokenValidator", "superclass": "", "interfaces": "", "fields": [{"original_string": "private RedisOperationService redisOperationService;", "modifier": "private", "type": "RedisOperationService", "declarator": "redisOperationService", "var_name": "redisOperationService"}, {"original_string": "private int expiredInSeconds = 60;", "modifier": "private", "type": "int", "declarator": "expiredInSeconds = 60", "var_name": "expiredInSeconds"}, {"original_string": "private String tokenKeyPrefix = \"once-token:\";", "modifier": "private", "type": "String", "declarator": "tokenKeyPrefix = \"once-token:\"", "var_name": "tokenKeyPrefix"}], "methods": [{"identifier": "getStoreKey", "parameters": "(String key)", "modifiers": "protected", "return": "String", "signature": "String getStoreKey(String key)", "full_signature": "protected String getStoreKey(String key)", "class_method_signature": "TokenValidator.getStoreKey(String key)", "testcase": false, "constructor": false}, {"identifier": "generate", "parameters": "(String key, int length)", "modifiers": "public", "return": "String", "signature": "String generate(String key, int length)", "full_signature": "public String generate(String key, int length)", "class_method_signature": "TokenValidator.generate(String key, int length)", "testcase": false, "constructor": false}, {"identifier": "generate", "parameters": "(String key, int length, int expiredInSeconds)", "modifiers": "public", "return": "String", "signature": "String generate(String key, int length, int expiredInSeconds)", "full_signature": "public String generate(String key, int length, int expiredInSeconds)", "class_method_signature": "TokenValidator.generate(String key, int length, int expiredInSeconds)", "testcase": false, "constructor": false}, {"identifier": "generateAlphanumeric", "parameters": "(String key, int length)", "modifiers": "public", "return": "String", "signature": "String generateAlphanumeric(String key, int length)", "full_signature": "public String generateAlphanumeric(String key, int length)", "class_method_signature": "TokenValidator.generateAlphanumeric(String key, int length)", "testcase": false, "constructor": false}, {"identifier": "generateAlphanumeric", "parameters": "(String key, int length, int expiredInSeconds)", "modifiers": "public", "return": "String", "signature": "String generateAlphanumeric(String key, int length, int expiredInSeconds)", "full_signature": "public String generateAlphanumeric(String key, int length, int expiredInSeconds)", "class_method_signature": "TokenValidator.generateAlphanumeric(String key, int length, int expiredInSeconds)", "testcase": false, "constructor": false}, {"identifier": "save", "parameters": "(String key, Supplier<String> valueGenerator)", "modifiers": "public", "return": "String", "signature": "String save(String key, Supplier<String> valueGenerator)", "full_signature": "public String save(String key, Supplier<String> valueGenerator)", "class_method_signature": "TokenValidator.save(String key, Supplier<String> valueGenerator)", "testcase": false, "constructor": false}, {"identifier": "save", "parameters": "(String key, int expiredInSeconds, Supplier<String> valueGenerator)", "modifiers": "public", "return": "String", "signature": "String save(String key, int expiredInSeconds, Supplier<String> valueGenerator)", "full_signature": "public String save(String key, int expiredInSeconds, Supplier<String> valueGenerator)", "class_method_signature": "TokenValidator.save(String key, int expiredInSeconds, Supplier<String> valueGenerator)", "testcase": false, "constructor": false}, {"identifier": "clear", "parameters": "(String key)", "modifiers": "public", "return": "Long", "signature": "Long clear(String key)", "full_signature": "public Long clear(String key)", "class_method_signature": "TokenValidator.clear(String key)", "testcase": false, "constructor": false}, {"identifier": "checkValue", "parameters": "(String value)", "modifiers": "private", "return": "void", "signature": "void checkValue(String value)", "full_signature": "private void checkValue(String value)", "class_method_signature": "TokenValidator.checkValue(String value)", "testcase": false, "constructor": false}, {"identifier": "check", "parameters": "(String key, String value, boolean deleteCode)", "modifiers": "public", "return": "boolean", "signature": "boolean check(String key, String value, boolean deleteCode)", "full_signature": "public boolean check(String key, String value, boolean deleteCode)", "class_method_signature": "TokenValidator.check(String key, String value, boolean deleteCode)", "testcase": false, "constructor": false}, {"identifier": "check", "parameters": "(String key, String value, Runnable runnable)", "modifiers": "public", "return": "void", "signature": "void check(String key, String value, Runnable runnable)", "full_signature": "public void check(String key, String value, Runnable runnable)", "class_method_signature": "TokenValidator.check(String key, String value, Runnable runnable)", "testcase": false, "constructor": false}, {"identifier": "check", "parameters": "(String key, String value, Supplier<T> supplier)", "modifiers": "public", "return": "T", "signature": "T check(String key, String value, Supplier<T> supplier)", "full_signature": "public T check(String key, String value, Supplier<T> supplier)", "class_method_signature": "TokenValidator.check(String key, String value, Supplier<T> supplier)", "testcase": false, "constructor": false}, {"identifier": "check", "parameters": "(String key, String value, Supplier<T> successSupplier, boolean deleteCode)", "modifiers": "public", "return": "T", "signature": "T check(String key, String value, Supplier<T> successSupplier, boolean deleteCode)", "full_signature": "public T check(String key, String value, Supplier<T> successSupplier, boolean deleteCode)", "class_method_signature": "TokenValidator.check(String key, String value, Supplier<T> successSupplier, boolean deleteCode)", "testcase": false, "constructor": false}, {"identifier": "check", "parameters": "(String key, String value, Supplier<T> successSupplier, Function<StoreContext, T> failFunc, boolean deleteCode)", "modifiers": "public", "return": "T", "signature": "T check(String key, String value, Supplier<T> successSupplier, Function<StoreContext, T> failFunc, boolean deleteCode)", "full_signature": "public T check(String key, String value, Supplier<T> successSupplier, Function<StoreContext, T> failFunc, boolean deleteCode)", "class_method_signature": "TokenValidator.check(String key, String value, Supplier<T> successSupplier, Function<StoreContext, T> failFunc, boolean deleteCode)", "testcase": false, "constructor": false}, {"identifier": "checkOnlyOnce", "parameters": "(String key, String value, Runnable runnable)", "modifiers": "public", "return": "void", "signature": "void checkOnlyOnce(String key, String value, Runnable runnable)", "full_signature": "public void checkOnlyOnce(String key, String value, Runnable runnable)", "class_method_signature": "TokenValidator.checkOnlyOnce(String key, String value, Runnable runnable)", "testcase": false, "constructor": false}, {"identifier": "checkOnlyOnce", "parameters": "(String key, String value, Supplier<T> supplier)", "modifiers": "public", "return": "T", "signature": "T checkOnlyOnce(String key, String value, Supplier<T> supplier)", "full_signature": "public T checkOnlyOnce(String key, String value, Supplier<T> supplier)", "class_method_signature": "TokenValidator.checkOnlyOnce(String key, String value, Supplier<T> supplier)", "testcase": false, "constructor": false}, {"identifier": "setRedisOperationService", "parameters": "(RedisOperationService redisOperationService)", "modifiers": "public", "return": "void", "signature": "void setRedisOperationService(RedisOperationService redisOperationService)", "full_signature": "public void setRedisOperationService(RedisOperationService redisOperationService)", "class_method_signature": "TokenValidator.setRedisOperationService(RedisOperationService redisOperationService)", "testcase": false, "constructor": false}, {"identifier": "setExpiredInSeconds", "parameters": "(int expiredInSeconds)", "modifiers": "public", "return": "void", "signature": "void setExpiredInSeconds(int expiredInSeconds)", "full_signature": "public void setExpiredInSeconds(int expiredInSeconds)", "class_method_signature": "TokenValidator.setExpiredInSeconds(int expiredInSeconds)", "testcase": false, "constructor": false}, {"identifier": "setTokenKeyPrefix", "parameters": "(String tokenKeyPrefix)", "modifiers": "public", "return": "void", "signature": "void setTokenKeyPrefix(String tokenKeyPrefix)", "full_signature": "public void setTokenKeyPrefix(String tokenKeyPrefix)", "class_method_signature": "TokenValidator.setTokenKeyPrefix(String tokenKeyPrefix)", "testcase": false, "constructor": false}], "file": "core/modules/boot/src/main/java/org/onetwo/boot/module/redis/TokenValidator.java"}, "focal_method": {"identifier": "check", "parameters": "(String key, String value, boolean deleteCode)", "modifiers": "public", "return": "boolean", "body": "public boolean check(String key, String value, boolean deleteCode){\n    \treturn this.check(key, value, ()->true, ctx->false, deleteCode);\n    }", "signature": "boolean check(String key, String value, boolean deleteCode)", "full_signature": "public boolean check(String key, String value, boolean deleteCode)", "class_method_signature": "TokenValidator.check(String key, String value, boolean deleteCode)", "testcase": false, "constructor": false, "invocations": ["check"]}, "repository": {"repo_id": 47802308, "url": "https://github.com/wayshall/onetwo", "language": "Java", "is_fork": false, "fork_count": 10, "stargazer_count": 16, "size": 57582, "license": "licensed"}}