{"test_class": {"identifier": "MigrationUtilsTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static Response response;", "modifier": "private static", "type": "Response", "declarator": "response", "var_name": "response"}, {"original_string": "public static CassandraOperationImpl cassandraOperationImpl;", "modifier": "public static", "type": "CassandraOperationImpl", "declarator": "cassandraOperationImpl", "var_name": "cassandraOperationImpl"}], "file": "actors/user/src/test/java/org/sunbird/user/util/MigrationUtilsTest.java"}, "test_case": {"identifier": "testGetEligibleUserByIdsWithoutProps", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n  public void testGetEligibleUserByIdsWithoutProps() {\n    List<ShadowUser> shadowUserList = MigrationUtils.getEligibleUsersById(\"EFG\");\n    Assert.assertEquals(1, shadowUserList.size());\n  }", "signature": "void testGetEligibleUserByIdsWithoutProps()", "full_signature": "@Test public void testGetEligibleUserByIdsWithoutProps()", "class_method_signature": "MigrationUtilsTest.testGetEligibleUserByIdsWithoutProps()", "testcase": true, "constructor": false, "invocations": ["getEligibleUsersById", "assertEquals", "size"]}, "focal_class": {"identifier": "MigrationUtils", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static CassandraOperation cassandraOperation = ServiceFactory.getInstance();", "modifier": "private static", "type": "CassandraOperation", "declarator": "cassandraOperation = ServiceFactory.getInstance()", "var_name": "cassandraOperation"}, {"original_string": "private static ObjectMapper mapper = new ObjectMapper();", "modifier": "private static", "type": "ObjectMapper", "declarator": "mapper = new ObjectMapper()", "var_name": "mapper"}], "methods": [{"identifier": "getRecordByUserId", "parameters": "(String userId)", "modifiers": "public static", "return": "ShadowUser", "signature": "ShadowUser getRecordByUserId(String userId)", "full_signature": "public static ShadowUser getRecordByUserId(String userId)", "class_method_signature": "MigrationUtils.getRecordByUserId(String userId)", "testcase": false, "constructor": false}, {"identifier": "updateRecord", "parameters": "(Map<String, Object> propertiesMap, String channel, String userExtId)", "modifiers": "public static", "return": "boolean", "signature": "boolean updateRecord(Map<String, Object> propertiesMap, String channel, String userExtId)", "full_signature": "public static boolean updateRecord(Map<String, Object> propertiesMap, String channel, String userExtId)", "class_method_signature": "MigrationUtils.updateRecord(Map<String, Object> propertiesMap, String channel, String userExtId)", "testcase": false, "constructor": false}, {"identifier": "markUserAsRejected", "parameters": "(ShadowUser shadowUser)", "modifiers": "public static", "return": "boolean", "signature": "boolean markUserAsRejected(ShadowUser shadowUser)", "full_signature": "public static boolean markUserAsRejected(ShadowUser shadowUser)", "class_method_signature": "MigrationUtils.markUserAsRejected(ShadowUser shadowUser)", "testcase": false, "constructor": false}, {"identifier": "updateClaimStatus", "parameters": "(ShadowUser shadowUser,int claimStatus)", "modifiers": "public static", "return": "boolean", "signature": "boolean updateClaimStatus(ShadowUser shadowUser,int claimStatus)", "full_signature": "public static boolean updateClaimStatus(ShadowUser shadowUser,int claimStatus)", "class_method_signature": "MigrationUtils.updateClaimStatus(ShadowUser shadowUser,int claimStatus)", "testcase": false, "constructor": false}, {"identifier": "getEligibleUsersById", "parameters": "(String userId,Map<String, Object> propsMap)", "modifiers": "public static", "return": "List<ShadowUser>", "signature": "List<ShadowUser> getEligibleUsersById(String userId,Map<String, Object> propsMap)", "full_signature": "public static List<ShadowUser> getEligibleUsersById(String userId,Map<String, Object> propsMap)", "class_method_signature": "MigrationUtils.getEligibleUsersById(String userId,Map<String, Object> propsMap)", "testcase": false, "constructor": false}, {"identifier": "getEligibleUsersById", "parameters": "(String userId)", "modifiers": "public static", "return": "List<ShadowUser>", "signature": "List<ShadowUser> getEligibleUsersById(String userId)", "full_signature": "public static List<ShadowUser> getEligibleUsersById(String userId)", "class_method_signature": "MigrationUtils.getEligibleUsersById(String userId)", "testcase": false, "constructor": false}], "file": "actors/user/src/main/java/org/sunbird/user/util/MigrationUtils.java"}, "focal_method": {"identifier": "getEligibleUsersById", "parameters": "(String userId,Map<String, Object> propsMap)", "modifiers": "public static", "return": "List<ShadowUser>", "body": "public static List<ShadowUser> getEligibleUsersById(String userId,Map<String, Object> propsMap) {\n        List<ShadowUser>shadowUsersList=new ArrayList<>();\n        Response response = cassandraOperation.searchValueInList(JsonKey.SUNBIRD, JsonKey.SHADOW_USER, JsonKey.USERIDS, userId,propsMap);\n        if(!((List) response.getResult().get(JsonKey.RESPONSE)).isEmpty()) {\n            ((List) response.getResult().get(JsonKey.RESPONSE)).stream().forEach(shadowMap->{\n                ShadowUser shadowUser=mapper.convertValue(shadowMap,ShadowUser.class);\n                if(shadowUser.getClaimStatus()==ClaimStatus.ELIGIBLE.getValue()) {\n                    shadowUsersList.add(shadowUser);\n                }\n            });\n        }\n        return shadowUsersList;\n    }", "signature": "List<ShadowUser> getEligibleUsersById(String userId,Map<String, Object> propsMap)", "full_signature": "public static List<ShadowUser> getEligibleUsersById(String userId,Map<String, Object> propsMap)", "class_method_signature": "MigrationUtils.getEligibleUsersById(String userId,Map<String, Object> propsMap)", "testcase": false, "constructor": false, "invocations": ["searchValueInList", "isEmpty", "get", "getResult", "forEach", "stream", "get", "getResult", "convertValue", "getClaimStatus", "getValue", "add"]}, "repository": {"repo_id": 96122408, "url": "https://github.com/project-sunbird/sunbird-lms-mw", "language": "Java", "is_fork": false, "fork_count": 36, "stargazer_count": 5, "size": 15380, "license": "licensed"}}