{"test_class": {"identifier": "DroolsModelProviderTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final String SOURCE_1 = \"SimpleScorecardWithTransformations.pmml\";", "modifier": "private static final", "type": "String", "declarator": "SOURCE_1 = \"SimpleScorecardWithTransformations.pmml\"", "var_name": "SOURCE_1"}, {"original_string": "private static final String PACKAGE_NAME = \"PACKAGE_NAME\";", "modifier": "private static final", "type": "String", "declarator": "PACKAGE_NAME = \"PACKAGE_NAME\"", "var_name": "PACKAGE_NAME"}, {"original_string": "private static final Map<String, String> SOURCE_MAP = new HashMap<>();", "modifier": "private static final", "type": "Map<String, String>", "declarator": "SOURCE_MAP = new HashMap<>()", "var_name": "SOURCE_MAP"}, {"original_string": "private static PMML pmml;", "modifier": "private static", "type": "PMML", "declarator": "pmml", "var_name": "pmml"}, {"original_string": "private static Scorecard scorecard;", "modifier": "private static", "type": "Scorecard", "declarator": "scorecard", "var_name": "scorecard"}, {"original_string": "private static DroolsModelProvider<Scorecard, ? extends KiePMMLDroolsModel> droolsModelProvider;", "modifier": "private static", "type": "DroolsModelProvider<Scorecard, ? extends KiePMMLDroolsModel>", "declarator": "droolsModelProvider", "var_name": "droolsModelProvider"}], "file": "kie-pmml-trusty/kie-pmml-models/kie-pmml-models-drools/kie-pmml-models-drools-common/src/test/java/org/kie/pmml/models/drools/provider/DroolsModelProviderTest.java"}, "test_case": {"identifier": "getKiePMMLModelFromPluginWithKnowledgeBuilder", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void getKiePMMLModelFromPluginWithKnowledgeBuilder() {\n        KnowledgeBuilderImpl knowledgeBuilder = new KnowledgeBuilderImpl();\n        KiePMMLDroolsModel retrieved = droolsModelProvider.getKiePMMLModelFromPlugin(PACKAGE_NAME,\n                                                                                     pmml.getDataDictionary(),\n                                                                                     pmml.getTransformationDictionary(),\n                                                                                     scorecard,\n                                                                                     knowledgeBuilder);\n        assertNotNull(retrieved);\n        assertTrue(retrieved instanceof KiePMMLDroolsModelWithSources);\n        KiePMMLDroolsModelWithSources retrievedSources = (KiePMMLDroolsModelWithSources) retrieved;\n        assertEquals(SOURCE_MAP, retrievedSources.getSourcesMap());\n        assertEquals(PACKAGE_NAME, retrievedSources.getKModulePackageName());\n        assertEquals(scorecard.getModelName(), retrievedSources.getName());\n        PackageDescr packageDescr = knowledgeBuilder.getPackageDescrs(\"defaultpkg\").get(0);\n        commonVerifyPackageDescr(packageDescr, null, PACKAGE_NAME);\n    }", "signature": "void getKiePMMLModelFromPluginWithKnowledgeBuilder()", "full_signature": "@Test public void getKiePMMLModelFromPluginWithKnowledgeBuilder()", "class_method_signature": "DroolsModelProviderTest.getKiePMMLModelFromPluginWithKnowledgeBuilder()", "testcase": true, "constructor": false, "invocations": ["getKiePMMLModelFromPlugin", "getDataDictionary", "getTransformationDictionary", "assertNotNull", "assertTrue", "assertEquals", "getSourcesMap", "assertEquals", "getKModulePackageName", "assertEquals", "getModelName", "getName", "get", "getPackageDescrs", "commonVerifyPackageDescr"]}, "focal_class": {"identifier": "DroolsModelProvider", "superclass": "", "interfaces": "implements ModelImplementationProvider<T, E>", "fields": [{"original_string": "private static final Logger logger = LoggerFactory.getLogger(DroolsModelProvider.class.getName());", "modifier": "private static final", "type": "Logger", "declarator": "logger = LoggerFactory.getLogger(DroolsModelProvider.class.getName())", "var_name": "logger"}], "methods": [{"identifier": "getKiePMMLModel", "parameters": "(final DataDictionary dataDictionary, final TransformationDictionary transformationDictionary, final T model, final Object kBuilder)", "modifiers": "@Override public", "return": "E", "signature": "E getKiePMMLModel(final DataDictionary dataDictionary, final TransformationDictionary transformationDictionary, final T model, final Object kBuilder)", "full_signature": "@Override public E getKiePMMLModel(final DataDictionary dataDictionary, final TransformationDictionary transformationDictionary, final T model, final Object kBuilder)", "class_method_signature": "DroolsModelProvider.getKiePMMLModel(final DataDictionary dataDictionary, final TransformationDictionary transformationDictionary, final T model, final Object kBuilder)", "testcase": false, "constructor": false}, {"identifier": "getKiePMMLModelFromPlugin", "parameters": "(final String packageName, final DataDictionary dataDictionary, final TransformationDictionary transformationDictionary, final T model, final Object kBuilder)", "modifiers": "@Override public", "return": "E", "signature": "E getKiePMMLModelFromPlugin(final String packageName, final DataDictionary dataDictionary, final TransformationDictionary transformationDictionary, final T model, final Object kBuilder)", "full_signature": "@Override public E getKiePMMLModelFromPlugin(final String packageName, final DataDictionary dataDictionary, final TransformationDictionary transformationDictionary, final T model, final Object kBuilder)", "class_method_signature": "DroolsModelProvider.getKiePMMLModelFromPlugin(final String packageName, final DataDictionary dataDictionary, final TransformationDictionary transformationDictionary, final T model, final Object kBuilder)", "testcase": false, "constructor": false}, {"identifier": "getPackageDescr", "parameters": "(final KiePMMLDroolsAST kiePMMLDroolsAST, final String packageName)", "modifiers": "public", "return": "PackageDescr", "signature": "PackageDescr getPackageDescr(final KiePMMLDroolsAST kiePMMLDroolsAST, final String packageName)", "full_signature": "public PackageDescr getPackageDescr(final KiePMMLDroolsAST kiePMMLDroolsAST, final String packageName)", "class_method_signature": "DroolsModelProvider.getPackageDescr(final KiePMMLDroolsAST kiePMMLDroolsAST, final String packageName)", "testcase": false, "constructor": false}, {"identifier": "getKiePMMLDroolsModel", "parameters": "(final DataDictionary dataDictionary,\n                                            final TransformationDictionary transformationDictionary,\n                                            final T model,\n                                            final Map<String, KiePMMLOriginalTypeGeneratedType> fieldTypeMap)", "modifiers": "public abstract", "return": "E", "signature": "E getKiePMMLDroolsModel(final DataDictionary dataDictionary,\n                                            final TransformationDictionary transformationDictionary,\n                                            final T model,\n                                            final Map<String, KiePMMLOriginalTypeGeneratedType> fieldTypeMap)", "full_signature": "public abstract E getKiePMMLDroolsModel(final DataDictionary dataDictionary,\n                                            final TransformationDictionary transformationDictionary,\n                                            final T model,\n                                            final Map<String, KiePMMLOriginalTypeGeneratedType> fieldTypeMap)", "class_method_signature": "DroolsModelProvider.getKiePMMLDroolsModel(final DataDictionary dataDictionary,\n                                            final TransformationDictionary transformationDictionary,\n                                            final T model,\n                                            final Map<String, KiePMMLOriginalTypeGeneratedType> fieldTypeMap)", "testcase": false, "constructor": false}, {"identifier": "getKiePMMLDroolsAST", "parameters": "(final DataDictionary dataDictionary,\n                                                         final T model,\n                                                         final Map<String, KiePMMLOriginalTypeGeneratedType> fieldTypeMap,\n                                                         final List<KiePMMLDroolsType> types)", "modifiers": "public abstract", "return": "KiePMMLDroolsAST", "signature": "KiePMMLDroolsAST getKiePMMLDroolsAST(final DataDictionary dataDictionary,\n                                                         final T model,\n                                                         final Map<String, KiePMMLOriginalTypeGeneratedType> fieldTypeMap,\n                                                         final List<KiePMMLDroolsType> types)", "full_signature": "public abstract KiePMMLDroolsAST getKiePMMLDroolsAST(final DataDictionary dataDictionary,\n                                                         final T model,\n                                                         final Map<String, KiePMMLOriginalTypeGeneratedType> fieldTypeMap,\n                                                         final List<KiePMMLDroolsType> types)", "class_method_signature": "DroolsModelProvider.getKiePMMLDroolsAST(final DataDictionary dataDictionary,\n                                                         final T model,\n                                                         final Map<String, KiePMMLOriginalTypeGeneratedType> fieldTypeMap,\n                                                         final List<KiePMMLDroolsType> types)", "testcase": false, "constructor": false}, {"identifier": "getKiePMMLDroolsModelSourcesMap", "parameters": "(final DataDictionary dataDictionary,\n                                                                        final TransformationDictionary transformationDictionary,\n                                                                        final T model,\n                                                                        final Map<String, KiePMMLOriginalTypeGeneratedType> fieldTypeMap,\n                                                                        final String packageName)", "modifiers": "public abstract", "return": "Map<String, String>", "signature": "Map<String, String> getKiePMMLDroolsModelSourcesMap(final DataDictionary dataDictionary,\n                                                                        final TransformationDictionary transformationDictionary,\n                                                                        final T model,\n                                                                        final Map<String, KiePMMLOriginalTypeGeneratedType> fieldTypeMap,\n                                                                        final String packageName)", "full_signature": "public abstract Map<String, String> getKiePMMLDroolsModelSourcesMap(final DataDictionary dataDictionary,\n                                                                        final TransformationDictionary transformationDictionary,\n                                                                        final T model,\n                                                                        final Map<String, KiePMMLOriginalTypeGeneratedType> fieldTypeMap,\n                                                                        final String packageName)", "class_method_signature": "DroolsModelProvider.getKiePMMLDroolsModelSourcesMap(final DataDictionary dataDictionary,\n                                                                        final TransformationDictionary transformationDictionary,\n                                                                        final T model,\n                                                                        final Map<String, KiePMMLOriginalTypeGeneratedType> fieldTypeMap,\n                                                                        final String packageName)", "testcase": false, "constructor": false}, {"identifier": "getKiePMMLDroolsASTCommon", "parameters": "(final DataDictionary dataDictionary,\n                                                         final TransformationDictionary transformationDictionary,\n                                                         final T model,\n                                                         final Map<String, KiePMMLOriginalTypeGeneratedType> fieldTypeMap)", "modifiers": "protected", "return": "KiePMMLDroolsAST", "signature": "KiePMMLDroolsAST getKiePMMLDroolsASTCommon(final DataDictionary dataDictionary,\n                                                         final TransformationDictionary transformationDictionary,\n                                                         final T model,\n                                                         final Map<String, KiePMMLOriginalTypeGeneratedType> fieldTypeMap)", "full_signature": "protected KiePMMLDroolsAST getKiePMMLDroolsASTCommon(final DataDictionary dataDictionary,\n                                                         final TransformationDictionary transformationDictionary,\n                                                         final T model,\n                                                         final Map<String, KiePMMLOriginalTypeGeneratedType> fieldTypeMap)", "class_method_signature": "DroolsModelProvider.getKiePMMLDroolsASTCommon(final DataDictionary dataDictionary,\n                                                         final TransformationDictionary transformationDictionary,\n                                                         final T model,\n                                                         final Map<String, KiePMMLOriginalTypeGeneratedType> fieldTypeMap)", "testcase": false, "constructor": false}, {"identifier": "addTransformationsDerivedFields", "parameters": "(final Map<String, KiePMMLOriginalTypeGeneratedType> fieldTypeMap, final TransformationDictionary transformationDictionary, final LocalTransformations localTransformations)", "modifiers": "protected", "return": "void", "signature": "void addTransformationsDerivedFields(final Map<String, KiePMMLOriginalTypeGeneratedType> fieldTypeMap, final TransformationDictionary transformationDictionary, final LocalTransformations localTransformations)", "full_signature": "protected void addTransformationsDerivedFields(final Map<String, KiePMMLOriginalTypeGeneratedType> fieldTypeMap, final TransformationDictionary transformationDictionary, final LocalTransformations localTransformations)", "class_method_signature": "DroolsModelProvider.addTransformationsDerivedFields(final Map<String, KiePMMLOriginalTypeGeneratedType> fieldTypeMap, final TransformationDictionary transformationDictionary, final LocalTransformations localTransformations)", "testcase": false, "constructor": false}], "file": "kie-pmml-trusty/kie-pmml-models/kie-pmml-models-drools/kie-pmml-models-drools-common/src/main/java/org/kie/pmml/models/drools/provider/DroolsModelProvider.java"}, "focal_method": {"identifier": "getKiePMMLModelFromPlugin", "parameters": "(final String packageName, final DataDictionary dataDictionary, final TransformationDictionary transformationDictionary, final T model, final Object kBuilder)", "modifiers": "@Override public", "return": "E", "body": "@Override\n    public E getKiePMMLModelFromPlugin(final String packageName, final DataDictionary dataDictionary, final TransformationDictionary transformationDictionary, final T model, final Object kBuilder) {\n        logger.trace(\"getKiePMMLModelFromPlugin {} {} {}\", dataDictionary, model, kBuilder);\n        if (!(kBuilder instanceof KnowledgeBuilder)) {\n            throw new KiePMMLException(String.format(\"Expecting KnowledgeBuilder, received %s\", kBuilder.getClass().getName()));\n        }\n        try {\n            final Map<String, KiePMMLOriginalTypeGeneratedType> fieldTypeMap = new HashMap<>();\n            KiePMMLDroolsAST kiePMMLDroolsAST = getKiePMMLDroolsASTCommon(dataDictionary, transformationDictionary, model, fieldTypeMap);\n            Map<String, String> sourcesMap = getKiePMMLDroolsModelSourcesMap(dataDictionary, transformationDictionary, model, fieldTypeMap, packageName);\n            PackageDescr packageDescr = getPackageDescr(kiePMMLDroolsAST, packageName);\n            String pkgUUID = getPkgUUID( ((KnowledgeBuilderImpl) kBuilder).getReleaseId(), packageName);\n            packageDescr.setPreferredPkgUUID(pkgUUID);\n            E toReturn = (E) new KiePMMLDroolsModelWithSources(model.getModelName(), packageName, sourcesMap, packageDescr);\n            ((KnowledgeBuilderImpl) kBuilder).addPackage(packageDescr);\n            return toReturn;\n        } catch (Exception e) {\n            throw new KiePMMLException(e);\n        }\n    }", "signature": "E getKiePMMLModelFromPlugin(final String packageName, final DataDictionary dataDictionary, final TransformationDictionary transformationDictionary, final T model, final Object kBuilder)", "full_signature": "@Override public E getKiePMMLModelFromPlugin(final String packageName, final DataDictionary dataDictionary, final TransformationDictionary transformationDictionary, final T model, final Object kBuilder)", "class_method_signature": "DroolsModelProvider.getKiePMMLModelFromPlugin(final String packageName, final DataDictionary dataDictionary, final TransformationDictionary transformationDictionary, final T model, final Object kBuilder)", "testcase": false, "constructor": false, "invocations": ["trace", "format", "getName", "getClass", "getKiePMMLDroolsASTCommon", "getKiePMMLDroolsModelSourcesMap", "getPackageDescr", "getPkgUUID", "getReleaseId", "setPreferredPkgUUID", "getModelName", "addPackage"]}, "repository": {"repo_id": 1381673, "url": "https://github.com/kiegroup/drools", "stars": 2733, "created": "2/18/2011 8:37:05 AM +00:00", "updates": "2020-01-27T13:12:15+00:00", "fork": "False", "license": "licensed"}}