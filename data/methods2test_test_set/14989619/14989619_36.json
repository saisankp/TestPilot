{"test_class": {"identifier": "SenderCacheTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "@Mocked private SenderFactory senderFactory;", "modifier": "@Mocked private", "type": "SenderFactory", "declarator": "senderFactory", "var_name": "senderFactory"}], "file": "server/src/test/java/org/jvalue/ods/notifications/sender/SenderCacheTest.java"}, "test_case": {"identifier": "testGetAndRelease", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n\tpublic void testGetAndRelease() {\n\t\tSenderCache cache = new SenderCache(senderFactory);\n\n\t\tfinal HttpClient httpClient = new HttpClient(\"someId\", \"someUrl\", false);\n\t\tfinal GcmClient gcmClient = new GcmClient(\"someId\", \"someDeviceId\");\n\t\tfinal DataSource source = new DataSource(\"someId\", null, null, null);\n\n\t\tcache.get(source, httpClient);\n\t\tcache.get(source, httpClient);\n\t\tcache.get(source, gcmClient);\n\t\tcache.get(source, gcmClient);\n\n\t\tnew Verifications() {{\n\t\t\tsenderFactory.createHttpSender(source, httpClient); times = 1;\n\t\t\tsenderFactory.createGcmSender(source, gcmClient); times = 1;\n\t\t}};\n\t}", "signature": "void testGetAndRelease()", "full_signature": "@Test public void testGetAndRelease()", "class_method_signature": "SenderCacheTest.testGetAndRelease()", "testcase": true, "constructor": false, "invocations": ["get", "get", "get", "get", "createHttpSender", "createGcmSender"]}, "focal_class": {"identifier": "SenderCache", "superclass": "", "interfaces": "", "fields": [{"original_string": "private final Map<SenderKey, Sender<?>> senderMap = new HashMap<>();", "modifier": "private final", "type": "Map<SenderKey, Sender<?>>", "declarator": "senderMap = new HashMap<>()", "var_name": "senderMap"}, {"original_string": "private final SenderCreatorVisitor senderCreatorVisitor;", "modifier": "private final", "type": "SenderCreatorVisitor", "declarator": "senderCreatorVisitor", "var_name": "senderCreatorVisitor"}], "methods": [{"identifier": "SenderCache", "parameters": "(SenderFactory senderFactory)", "modifiers": "@Inject public", "return": "", "signature": " SenderCache(SenderFactory senderFactory)", "full_signature": "@Inject public  SenderCache(SenderFactory senderFactory)", "class_method_signature": "SenderCache.SenderCache(SenderFactory senderFactory)", "testcase": false, "constructor": true}, {"identifier": "get", "parameters": "(DataSource source, T client)", "modifiers": "@SuppressWarnings(\"unchecked\") public", "return": "Sender<T>", "signature": "Sender<T> get(DataSource source, T client)", "full_signature": "@SuppressWarnings(\"unchecked\") public Sender<T> get(DataSource source, T client)", "class_method_signature": "SenderCache.get(DataSource source, T client)", "testcase": false, "constructor": false}, {"identifier": "release", "parameters": "(DataSource source, Client client)", "modifiers": "public", "return": "void", "signature": "void release(DataSource source, Client client)", "full_signature": "public void release(DataSource source, Client client)", "class_method_signature": "SenderCache.release(DataSource source, Client client)", "testcase": false, "constructor": false}], "file": "server/src/main/java/org/jvalue/ods/notifications/sender/SenderCache.java"}, "focal_method": {"identifier": "get", "parameters": "(DataSource source, T client)", "modifiers": "@SuppressWarnings(\"unchecked\") public", "return": "Sender<T>", "body": "@SuppressWarnings(\"unchecked\")\n\tpublic <T extends Client> Sender<T> get(DataSource source, T client) {\n\t\tSenderKey key = new SenderKey(source, client);\n\t\tif (!senderMap.containsKey(key)) senderMap.put(key, client.accept(senderCreatorVisitor, source));\n\t\treturn (Sender<T>) senderMap.get(key);\n\t}", "signature": "Sender<T> get(DataSource source, T client)", "full_signature": "@SuppressWarnings(\"unchecked\") public Sender<T> get(DataSource source, T client)", "class_method_signature": "SenderCache.get(DataSource source, T client)", "testcase": false, "constructor": false, "invocations": ["containsKey", "put", "accept", "get"]}, "repository": {"repo_id": 14989619, "url": "https://github.com/jvalue/open-data-service-v1", "language": "Java", "is_fork": false, "fork_count": 8, "stargazer_count": 6, "size": 4525, "license": "licensed"}}