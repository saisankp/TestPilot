{"test_class": {"identifier": "TestDatabusRequest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final ObjectMapper _objectMapper = new ObjectMapper();", "modifier": "private static final", "type": "ObjectMapper", "declarator": "_objectMapper = new ObjectMapper()", "var_name": "_objectMapper"}, {"original_string": "private final String reqName = \"RequestUnderTest\";", "modifier": "private final", "type": "String", "declarator": "reqName = \"RequestUnderTest\"", "var_name": "reqName"}, {"original_string": "private final HttpMethod method = HttpMethod.GET;", "modifier": "private final", "type": "HttpMethod", "declarator": "method = HttpMethod.GET", "var_name": "method"}, {"original_string": "private final String prop1 = \"a\";", "modifier": "private final", "type": "String", "declarator": "prop1 = \"a\"", "var_name": "prop1"}, {"original_string": "private final String prop2 = \"b\";", "modifier": "private final", "type": "String", "declarator": "prop2 = \"b\"", "var_name": "prop2"}, {"original_string": "private final String propval1 = \"aval\";", "modifier": "private final", "type": "String", "declarator": "propval1 = \"aval\"", "var_name": "propval1"}, {"original_string": "private final String propval2 = \"bval\";", "modifier": "private final", "type": "String", "declarator": "propval2 = \"bval\"", "var_name": "propval2"}, {"original_string": "private final byte[] ipAddr = {0x01, 0x02, 0x03, 0x04};", "modifier": "private final", "type": "byte[]", "declarator": "ipAddr = {0x01, 0x02, 0x03, 0x04}", "var_name": "ipAddr"}, {"original_string": "final int port = 666;", "modifier": "final", "type": "int", "declarator": "port = 666", "var_name": "port"}], "file": "databus-core/databus-core-container/src/test/java/com/linkedin/databus2/core/container/request/TestDatabusRequest.java"}, "test_case": {"identifier": "testToString", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n  public void testToString() throws Exception\n  {\n    DatabusRequest req = makeRequest();\n\n    // Coverage of toString().\n    String jsonStr = req.toString();\n    Map<String, String> jsonMap = _objectMapper.readValue(jsonStr.getBytes(Charset.defaultCharset()), new TypeReference<Map<String, String>>() {});\n    Assert.assertEquals(reqName, jsonMap.get(\"name\"));\n    Assert.assertEquals(method.toString(), jsonMap.get(\"method\"));\n    Assert.assertEquals(propval1, jsonMap.get(prop1));\n    Assert.assertEquals(propval2, jsonMap.get(prop2));\n    Assert.assertEquals(4, jsonMap.size());\n\n    // Coverage for null processor.\n    Assert.assertEquals(req, req.call());\n\n    // Coverqage for setCursorPartition\n    PhysicalPartition pp = new PhysicalPartition(15, \"SomePartition\");\n    req.setCursorPartition(pp);\n    Assert.assertEquals(pp, req.getCursorPartition());\n\n    Assert.assertFalse(req.cancel(true));\n    Assert.assertFalse(req.cancel(false));\n    Assert.assertEquals(req, req.get());\n    Assert.assertEquals(req, req.get(89L, TimeUnit.HOURS));\n    Assert.assertFalse(req.isCancelled());\n\n    InetSocketAddress remoteAddress = (InetSocketAddress)req.getRemoteAddress();\n    Assert.assertEquals(port, remoteAddress.getPort());\n    Assert.assertEquals(InetAddress.getByAddress(ipAddr), remoteAddress.getAddress());\n  }", "signature": "void testToString()", "full_signature": "@Test public void testToString()", "class_method_signature": "TestDatabusRequest.testToString()", "testcase": true, "constructor": false, "invocations": ["makeRequest", "toString", "readValue", "getBytes", "defaultCharset", "assertEquals", "get", "assertEquals", "toString", "get", "assertEquals", "get", "assertEquals", "get", "assertEquals", "size", "assertEquals", "call", "setCursorPartition", "assertEquals", "getCursorPartition", "assertFalse", "cancel", "assertFalse", "cancel", "assertEquals", "get", "assertEquals", "get", "assertFalse", "isCancelled", "getRemoteAddress", "assertEquals", "getPort", "assertEquals", "getByAddress", "getAddress"]}, "focal_class": {"identifier": "DatabusRequest", "superclass": "", "interfaces": "implements Callable<DatabusRequest>, Future<DatabusRequest>", "fields": [{"original_string": "public static final String MODULE = DatabusRequest.class.getName();", "modifier": "public static final", "type": "String", "declarator": "MODULE = DatabusRequest.class.getName()", "var_name": "MODULE"}, {"original_string": "public static final Logger LOG = Logger.getLogger(MODULE);", "modifier": "public static final", "type": "Logger", "declarator": "LOG = Logger.getLogger(MODULE)", "var_name": "LOG"}, {"original_string": "public static final String DATA_PARAM_NAME = \"reqdata\";", "modifier": "public static final", "type": "String", "declarator": "DATA_PARAM_NAME = \"reqdata\"", "var_name": "DATA_PARAM_NAME"}, {"original_string": "public static final String PATH_PARAM_NAME = \"reqpath\";", "modifier": "public static final", "type": "String", "declarator": "PATH_PARAM_NAME = \"reqpath\"", "var_name": "PATH_PARAM_NAME"}, {"original_string": "private final static String ERROR_MESSAGE_PREFIX = \"\";", "modifier": "private final static", "type": "String", "declarator": "ERROR_MESSAGE_PREFIX = \"\"", "var_name": "ERROR_MESSAGE_PREFIX"}, {"original_string": "private final static byte[] FALLBACK_ERROR_MESSAGE_BYTES = \"{\\\"class\\\":\\\"unknown\\\"}\".getBytes(Charset.defaultCharset());", "modifier": "private final static", "type": "byte[]", "declarator": "FALLBACK_ERROR_MESSAGE_BYTES = \"{\\\"class\\\":\\\"unknown\\\"}\".getBytes(Charset.defaultCharset())", "var_name": "FALLBACK_ERROR_MESSAGE_BYTES"}, {"original_string": "private final static String ERROR_MESSAGE_SUFFIX = \"\\r\\n\";", "modifier": "private final static", "type": "String", "declarator": "ERROR_MESSAGE_SUFFIX = \"\\r\\n\"", "var_name": "ERROR_MESSAGE_SUFFIX"}, {"original_string": "private final long _id;", "modifier": "private final", "type": "long", "declarator": "_id", "var_name": "_id"}, {"original_string": "private final String _name;", "modifier": "private final", "type": "String", "declarator": "_name", "var_name": "_name"}, {"original_string": "private final HttpMethod _requestType;", "modifier": "private final", "type": "HttpMethod", "declarator": "_requestType", "var_name": "_requestType"}, {"original_string": "private final Properties _params;", "modifier": "private final", "type": "Properties", "declarator": "_params", "var_name": "_params"}, {"original_string": "private final ServerContainer.RuntimeConfig _config;", "modifier": "private final", "type": "ServerContainer.RuntimeConfig", "declarator": "_config", "var_name": "_config"}, {"original_string": "private final long _createTimestampMs;", "modifier": "private final", "type": "long", "declarator": "_createTimestampMs", "var_name": "_createTimestampMs"}, {"original_string": "private final SocketAddress _remoteAddress;", "modifier": "private final", "type": "SocketAddress", "declarator": "_remoteAddress", "var_name": "_remoteAddress"}, {"original_string": "private PhysicalPartition _cursorPartition = null;", "modifier": "private", "type": "PhysicalPartition", "declarator": "_cursorPartition = null", "var_name": "_cursorPartition"}, {"original_string": "private ChunkedWritableByteChannel _responseContent = null;", "modifier": "private", "type": "ChunkedWritableByteChannel", "declarator": "_responseContent = null", "var_name": "_responseContent"}, {"original_string": "private Throwable _responseThrowable = null;", "modifier": "private", "type": "Throwable", "declarator": "_responseThrowable = null", "var_name": "_responseThrowable"}, {"original_string": "private RequestProcessor _processor = null;", "modifier": "private", "type": "RequestProcessor", "declarator": "_processor = null", "var_name": "_processor"}, {"original_string": "private static AtomicLong IdCounter = new AtomicLong(1);", "modifier": "private static", "type": "AtomicLong", "declarator": "IdCounter = new AtomicLong(1)", "var_name": "IdCounter"}], "methods": [{"identifier": "DatabusRequest", "parameters": "(String name, HttpMethod requestType, SocketAddress remoteAddress,\n                        Properties params, ServerContainer.RuntimeConfig config)", "modifiers": "public", "return": "", "signature": " DatabusRequest(String name, HttpMethod requestType, SocketAddress remoteAddress,\n                        Properties params, ServerContainer.RuntimeConfig config)", "full_signature": "public  DatabusRequest(String name, HttpMethod requestType, SocketAddress remoteAddress,\n                        Properties params, ServerContainer.RuntimeConfig config)", "class_method_signature": "DatabusRequest.DatabusRequest(String name, HttpMethod requestType, SocketAddress remoteAddress,\n                        Properties params, ServerContainer.RuntimeConfig config)", "testcase": false, "constructor": true}, {"identifier": "DatabusRequest", "parameters": "(String name, HttpMethod requestType, SocketAddress remoteAddress,\n                        ServerContainer.RuntimeConfig config)", "modifiers": "public", "return": "", "signature": " DatabusRequest(String name, HttpMethod requestType, SocketAddress remoteAddress,\n                        ServerContainer.RuntimeConfig config)", "full_signature": "public  DatabusRequest(String name, HttpMethod requestType, SocketAddress remoteAddress,\n                        ServerContainer.RuntimeConfig config)", "class_method_signature": "DatabusRequest.DatabusRequest(String name, HttpMethod requestType, SocketAddress remoteAddress,\n                        ServerContainer.RuntimeConfig config)", "testcase": false, "constructor": true}, {"identifier": "getName", "parameters": "()", "modifiers": "public", "return": "String", "signature": "String getName()", "full_signature": "public String getName()", "class_method_signature": "DatabusRequest.getName()", "testcase": false, "constructor": false}, {"identifier": "getParams", "parameters": "()", "modifiers": "public", "return": "Properties", "signature": "Properties getParams()", "full_signature": "public Properties getParams()", "class_method_signature": "DatabusRequest.getParams()", "testcase": false, "constructor": false}, {"identifier": "toString", "parameters": "()", "modifiers": "@Override public", "return": "String", "signature": "String toString()", "full_signature": "@Override public String toString()", "class_method_signature": "DatabusRequest.toString()", "testcase": false, "constructor": false}, {"identifier": "getResponseContent", "parameters": "()", "modifiers": "public", "return": "ChunkedWritableByteChannel", "signature": "ChunkedWritableByteChannel getResponseContent()", "full_signature": "public ChunkedWritableByteChannel getResponseContent()", "class_method_signature": "DatabusRequest.getResponseContent()", "testcase": false, "constructor": false}, {"identifier": "getResponseThrowable", "parameters": "()", "modifiers": "public", "return": "Throwable", "signature": "Throwable getResponseThrowable()", "full_signature": "public Throwable getResponseThrowable()", "class_method_signature": "DatabusRequest.getResponseThrowable()", "testcase": false, "constructor": false}, {"identifier": "call", "parameters": "()", "modifiers": "@Override public", "return": "DatabusRequest", "signature": "DatabusRequest call()", "full_signature": "@Override public DatabusRequest call()", "class_method_signature": "DatabusRequest.call()", "testcase": false, "constructor": false}, {"identifier": "getProcessor", "parameters": "()", "modifiers": "public", "return": "RequestProcessor", "signature": "RequestProcessor getProcessor()", "full_signature": "public RequestProcessor getProcessor()", "class_method_signature": "DatabusRequest.getProcessor()", "testcase": false, "constructor": false}, {"identifier": "setProcessor", "parameters": "(RequestProcessor processor)", "modifiers": "public", "return": "void", "signature": "void setProcessor(RequestProcessor processor)", "full_signature": "public void setProcessor(RequestProcessor processor)", "class_method_signature": "DatabusRequest.setProcessor(RequestProcessor processor)", "testcase": false, "constructor": false}, {"identifier": "setError", "parameters": "(Throwable throwable)", "modifiers": "public", "return": "void", "signature": "void setError(Throwable throwable)", "full_signature": "public void setError(Throwable throwable)", "class_method_signature": "DatabusRequest.setError(Throwable throwable)", "testcase": false, "constructor": false}, {"identifier": "getCursorPartition", "parameters": "()", "modifiers": "public", "return": "PhysicalPartition", "signature": "PhysicalPartition getCursorPartition()", "full_signature": "public PhysicalPartition getCursorPartition()", "class_method_signature": "DatabusRequest.getCursorPartition()", "testcase": false, "constructor": false}, {"identifier": "setCursorPartition", "parameters": "(PhysicalPartition cursorPartition)", "modifiers": "public", "return": "void", "signature": "void setCursorPartition(PhysicalPartition cursorPartition)", "full_signature": "public void setCursorPartition(PhysicalPartition cursorPartition)", "class_method_signature": "DatabusRequest.setCursorPartition(PhysicalPartition cursorPartition)", "testcase": false, "constructor": false}, {"identifier": "getRequestType", "parameters": "()", "modifiers": "public", "return": "HttpMethod", "signature": "HttpMethod getRequestType()", "full_signature": "public HttpMethod getRequestType()", "class_method_signature": "DatabusRequest.getRequestType()", "testcase": false, "constructor": false}, {"identifier": "getConfig", "parameters": "()", "modifiers": "public", "return": "ServerContainer.RuntimeConfig", "signature": "ServerContainer.RuntimeConfig getConfig()", "full_signature": "public ServerContainer.RuntimeConfig getConfig()", "class_method_signature": "DatabusRequest.getConfig()", "testcase": false, "constructor": false}, {"identifier": "getRequiredIntParam", "parameters": "(String paramName)", "modifiers": "public", "return": "int", "signature": "int getRequiredIntParam(String paramName)", "full_signature": "public int getRequiredIntParam(String paramName)", "class_method_signature": "DatabusRequest.getRequiredIntParam(String paramName)", "testcase": false, "constructor": false}, {"identifier": "getOptionalIntParam", "parameters": "(String paramName, int defaultValue)", "modifiers": "public", "return": "int", "signature": "int getOptionalIntParam(String paramName, int defaultValue)", "full_signature": "public int getOptionalIntParam(String paramName, int defaultValue)", "class_method_signature": "DatabusRequest.getOptionalIntParam(String paramName, int defaultValue)", "testcase": false, "constructor": false}, {"identifier": "getRequiredLongParam", "parameters": "(String paramName)", "modifiers": "public", "return": "long", "signature": "long getRequiredLongParam(String paramName)", "full_signature": "public long getRequiredLongParam(String paramName)", "class_method_signature": "DatabusRequest.getRequiredLongParam(String paramName)", "testcase": false, "constructor": false}, {"identifier": "getOptionalLongParam", "parameters": "(String paramName, long defaultValue)", "modifiers": "public", "return": "long", "signature": "long getOptionalLongParam(String paramName, long defaultValue)", "full_signature": "public long getOptionalLongParam(String paramName, long defaultValue)", "class_method_signature": "DatabusRequest.getOptionalLongParam(String paramName, long defaultValue)", "testcase": false, "constructor": false}, {"identifier": "getRequiredStringParam", "parameters": "(String paramName)", "modifiers": "public", "return": "String", "signature": "String getRequiredStringParam(String paramName)", "full_signature": "public String getRequiredStringParam(String paramName)", "class_method_signature": "DatabusRequest.getRequiredStringParam(String paramName)", "testcase": false, "constructor": false}, {"identifier": "cancel", "parameters": "(boolean arg0)", "modifiers": "@Override public", "return": "boolean", "signature": "boolean cancel(boolean arg0)", "full_signature": "@Override public boolean cancel(boolean arg0)", "class_method_signature": "DatabusRequest.cancel(boolean arg0)", "testcase": false, "constructor": false}, {"identifier": "get", "parameters": "()", "modifiers": "@Override public", "return": "DatabusRequest", "signature": "DatabusRequest get()", "full_signature": "@Override public DatabusRequest get()", "class_method_signature": "DatabusRequest.get()", "testcase": false, "constructor": false}, {"identifier": "get", "parameters": "(long arg0, TimeUnit arg1)", "modifiers": "@Override public", "return": "DatabusRequest", "signature": "DatabusRequest get(long arg0, TimeUnit arg1)", "full_signature": "@Override public DatabusRequest get(long arg0, TimeUnit arg1)", "class_method_signature": "DatabusRequest.get(long arg0, TimeUnit arg1)", "testcase": false, "constructor": false}, {"identifier": "isCancelled", "parameters": "()", "modifiers": "@Override public", "return": "boolean", "signature": "boolean isCancelled()", "full_signature": "@Override public boolean isCancelled()", "class_method_signature": "DatabusRequest.isCancelled()", "testcase": false, "constructor": false}, {"identifier": "isDone", "parameters": "()", "modifiers": "@Override public", "return": "boolean", "signature": "boolean isDone()", "full_signature": "@Override public boolean isDone()", "class_method_signature": "DatabusRequest.isDone()", "testcase": false, "constructor": false}, {"identifier": "setResponseContent", "parameters": "(ChunkedWritableByteChannel responseContent)", "modifiers": "public", "return": "void", "signature": "void setResponseContent(ChunkedWritableByteChannel responseContent)", "full_signature": "public void setResponseContent(ChunkedWritableByteChannel responseContent)", "class_method_signature": "DatabusRequest.setResponseContent(ChunkedWritableByteChannel responseContent)", "testcase": false, "constructor": false}, {"identifier": "getId", "parameters": "()", "modifiers": "public", "return": "long", "signature": "long getId()", "full_signature": "public long getId()", "class_method_signature": "DatabusRequest.getId()", "testcase": false, "constructor": false}, {"identifier": "getCreateTimestampMs", "parameters": "()", "modifiers": "public", "return": "long", "signature": "long getCreateTimestampMs()", "full_signature": "public long getCreateTimestampMs()", "class_method_signature": "DatabusRequest.getCreateTimestampMs()", "testcase": false, "constructor": false}, {"identifier": "getRemoteAddress", "parameters": "()", "modifiers": "public", "return": "SocketAddress", "signature": "SocketAddress getRemoteAddress()", "full_signature": "public SocketAddress getRemoteAddress()", "class_method_signature": "DatabusRequest.getRemoteAddress()", "testcase": false, "constructor": false}], "file": "databus-core/databus-core-container/src/main/java/com/linkedin/databus2/core/container/request/DatabusRequest.java"}, "focal_method": {"identifier": "toString", "parameters": "()", "modifiers": "@Override public", "return": "String", "body": "@Override\n  public String toString()\n  {\n    StringBuilder res = new StringBuilder();\n    res.append(\"{\\\"name\\\":\\\"\");\n    res.append(_name);\n    res.append(\"\\\", \\\"method\\\":\\\"\");\n    res.append(_requestType);\n    res.append(\"\\\" \");\n\n    for (Object key:_params.keySet())\n    {\n      Object value = _params.get(key);\n      res.append(\", \\\"\");\n      res.append(key.toString());\n      res.append(\"\\\":\\\"\");\n      res.append(null != value ? value.toString() : \"null\");\n      res.append(\"\\\"\");\n    }\n    res.append(\"}\");\n\n    return res.toString();\n  }", "signature": "String toString()", "full_signature": "@Override public String toString()", "class_method_signature": "DatabusRequest.toString()", "testcase": false, "constructor": false, "invocations": ["append", "append", "append", "append", "append", "keySet", "get", "append", "append", "toString", "append", "append", "toString", "append", "append", "toString"]}, "repository": {"repo_id": 7209229, "url": "https://github.com/linkedin/databus", "language": "Java", "is_fork": false, "fork_count": 653, "stargazer_count": 2899, "size": 51191, "license": "licensed"}}