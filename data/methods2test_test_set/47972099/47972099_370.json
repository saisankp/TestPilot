{"test_class": {"identifier": "InstanceManagerTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "static ActorSystem system;", "modifier": "static", "type": "ActorSystem", "declarator": "system", "var_name": "system"}, {"original_string": "static UUID leaderSessionID = UUID.randomUUID();", "modifier": "static", "type": "UUID", "declarator": "leaderSessionID = UUID.randomUUID()", "var_name": "leaderSessionID"}], "file": "flink-runtime/src/test/java/org/apache/flink/runtime/instance/InstanceManagerTest.java"}, "test_case": {"identifier": "testShutdown", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n\tpublic void testShutdown() {\n\t\ttry {\n\t\t\tInstanceManager cm = new InstanceManager();\n\t\t\tcm.shutdown();\n\t\t\t\n\t\t\ttry {\n\t\t\t\tHardwareDescription resources = HardwareDescription.extractFromSystem(4096);\n\t\t\t\tInetAddress address = InetAddress.getByName(\"127.0.0.1\");\n\t\t\t\tInstanceConnectionInfo ici = new InstanceConnectionInfo(address, 20000);\n\n\t\t\t\tJavaTestKit probe = new JavaTestKit(system);\n\t\t\t\tcm.registerTaskManager(probe.getRef(), ici, resources, 1, leaderSessionID);\n\t\t\t\tfail(\"Should raise exception in shutdown state\");\n\t\t\t}\n\t\t\tcatch (IllegalStateException e) {\n\t\t\t\t// expected\n\t\t\t}\n\t\t\t\n\t\t\tassertFalse(cm.reportHeartBeat(new InstanceID(), new byte[] {}));\n\t\t}\n\t\tcatch (Exception e) {\n\t\t\tSystem.err.println(e.getMessage());\n\t\t\te.printStackTrace();\n\t\t\tAssert.fail(\"Test erroneous: \" + e.getMessage());\n\t\t}\n\t}", "signature": "void testShutdown()", "full_signature": "@Test public void testShutdown()", "class_method_signature": "InstanceManagerTest.testShutdown()", "testcase": true, "constructor": false, "invocations": ["shutdown", "extractFromSystem", "getByName", "registerTaskManager", "getRef", "fail", "assertFalse", "reportHeartBeat", "println", "getMessage", "printStackTrace", "fail", "getMessage"]}, "focal_class": {"identifier": "InstanceManager", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final Logger LOG = LoggerFactory.getLogger(InstanceManager.class);", "modifier": "private static final", "type": "Logger", "declarator": "LOG = LoggerFactory.getLogger(InstanceManager.class)", "var_name": "LOG"}, {"original_string": "private final Object lock = new Object();", "modifier": "private final", "type": "Object", "declarator": "lock = new Object()", "var_name": "lock"}, {"original_string": "private final Map<InstanceID, Instance> registeredHostsById;", "modifier": "private final", "type": "Map<InstanceID, Instance>", "declarator": "registeredHostsById", "var_name": "registeredHostsById"}, {"original_string": "private final Map<ActorRef, Instance> registeredHostsByConnection;", "modifier": "private final", "type": "Map<ActorRef, Instance>", "declarator": "registeredHostsByConnection", "var_name": "registeredHostsByConnection"}, {"original_string": "private final Set<ActorRef> deadHosts;", "modifier": "private final", "type": "Set<ActorRef>", "declarator": "deadHosts", "var_name": "deadHosts"}, {"original_string": "private final List<InstanceListener> instanceListeners = new ArrayList<InstanceListener>();", "modifier": "private final", "type": "List<InstanceListener>", "declarator": "instanceListeners = new ArrayList<InstanceListener>()", "var_name": "instanceListeners"}, {"original_string": "private int totalNumberOfAliveTaskSlots;", "modifier": "private", "type": "int", "declarator": "totalNumberOfAliveTaskSlots", "var_name": "totalNumberOfAliveTaskSlots"}, {"original_string": "private volatile boolean isShutdown;", "modifier": "private volatile", "type": "boolean", "declarator": "isShutdown", "var_name": "isShutdown"}], "methods": [{"identifier": "InstanceManager", "parameters": "()", "modifiers": "public", "return": "", "signature": " InstanceManager()", "full_signature": "public  InstanceManager()", "class_method_signature": "InstanceManager.InstanceManager()", "testcase": false, "constructor": true}, {"identifier": "shutdown", "parameters": "()", "modifiers": "public", "return": "void", "signature": "void shutdown()", "full_signature": "public void shutdown()", "class_method_signature": "InstanceManager.shutdown()", "testcase": false, "constructor": false}, {"identifier": "reportHeartBeat", "parameters": "(InstanceID instanceId, byte[] lastMetricsReport)", "modifiers": "public", "return": "boolean", "signature": "boolean reportHeartBeat(InstanceID instanceId, byte[] lastMetricsReport)", "full_signature": "public boolean reportHeartBeat(InstanceID instanceId, byte[] lastMetricsReport)", "class_method_signature": "InstanceManager.reportHeartBeat(InstanceID instanceId, byte[] lastMetricsReport)", "testcase": false, "constructor": false}, {"identifier": "registerTaskManager", "parameters": "(\n\t\t\tActorRef taskManager,\n\t\t\tInstanceConnectionInfo connectionInfo,\n\t\t\tHardwareDescription resources,\n\t\t\tint numberOfSlots,\n\t\t\tUUID leaderSessionID)", "modifiers": "public", "return": "InstanceID", "signature": "InstanceID registerTaskManager(\n\t\t\tActorRef taskManager,\n\t\t\tInstanceConnectionInfo connectionInfo,\n\t\t\tHardwareDescription resources,\n\t\t\tint numberOfSlots,\n\t\t\tUUID leaderSessionID)", "full_signature": "public InstanceID registerTaskManager(\n\t\t\tActorRef taskManager,\n\t\t\tInstanceConnectionInfo connectionInfo,\n\t\t\tHardwareDescription resources,\n\t\t\tint numberOfSlots,\n\t\t\tUUID leaderSessionID)", "class_method_signature": "InstanceManager.registerTaskManager(\n\t\t\tActorRef taskManager,\n\t\t\tInstanceConnectionInfo connectionInfo,\n\t\t\tHardwareDescription resources,\n\t\t\tint numberOfSlots,\n\t\t\tUUID leaderSessionID)", "testcase": false, "constructor": false}, {"identifier": "unregisterTaskManager", "parameters": "(ActorRef taskManager, boolean terminated)", "modifiers": "public", "return": "void", "signature": "void unregisterTaskManager(ActorRef taskManager, boolean terminated)", "full_signature": "public void unregisterTaskManager(ActorRef taskManager, boolean terminated)", "class_method_signature": "InstanceManager.unregisterTaskManager(ActorRef taskManager, boolean terminated)", "testcase": false, "constructor": false}, {"identifier": "unregisterAllTaskManagers", "parameters": "()", "modifiers": "public", "return": "void", "signature": "void unregisterAllTaskManagers()", "full_signature": "public void unregisterAllTaskManagers()", "class_method_signature": "InstanceManager.unregisterAllTaskManagers()", "testcase": false, "constructor": false}, {"identifier": "isRegistered", "parameters": "(ActorRef taskManager)", "modifiers": "public", "return": "boolean", "signature": "boolean isRegistered(ActorRef taskManager)", "full_signature": "public boolean isRegistered(ActorRef taskManager)", "class_method_signature": "InstanceManager.isRegistered(ActorRef taskManager)", "testcase": false, "constructor": false}, {"identifier": "getNumberOfRegisteredTaskManagers", "parameters": "()", "modifiers": "public", "return": "int", "signature": "int getNumberOfRegisteredTaskManagers()", "full_signature": "public int getNumberOfRegisteredTaskManagers()", "class_method_signature": "InstanceManager.getNumberOfRegisteredTaskManagers()", "testcase": false, "constructor": false}, {"identifier": "getTotalNumberOfSlots", "parameters": "()", "modifiers": "public", "return": "int", "signature": "int getTotalNumberOfSlots()", "full_signature": "public int getTotalNumberOfSlots()", "class_method_signature": "InstanceManager.getTotalNumberOfSlots()", "testcase": false, "constructor": false}, {"identifier": "getNumberOfAvailableSlots", "parameters": "()", "modifiers": "public", "return": "int", "signature": "int getNumberOfAvailableSlots()", "full_signature": "public int getNumberOfAvailableSlots()", "class_method_signature": "InstanceManager.getNumberOfAvailableSlots()", "testcase": false, "constructor": false}, {"identifier": "getAllRegisteredInstances", "parameters": "()", "modifiers": "public", "return": "Collection<Instance>", "signature": "Collection<Instance> getAllRegisteredInstances()", "full_signature": "public Collection<Instance> getAllRegisteredInstances()", "class_method_signature": "InstanceManager.getAllRegisteredInstances()", "testcase": false, "constructor": false}, {"identifier": "getRegisteredInstanceById", "parameters": "(InstanceID instanceID)", "modifiers": "public", "return": "Instance", "signature": "Instance getRegisteredInstanceById(InstanceID instanceID)", "full_signature": "public Instance getRegisteredInstanceById(InstanceID instanceID)", "class_method_signature": "InstanceManager.getRegisteredInstanceById(InstanceID instanceID)", "testcase": false, "constructor": false}, {"identifier": "getRegisteredInstance", "parameters": "(ActorRef ref)", "modifiers": "public", "return": "Instance", "signature": "Instance getRegisteredInstance(ActorRef ref)", "full_signature": "public Instance getRegisteredInstance(ActorRef ref)", "class_method_signature": "InstanceManager.getRegisteredInstance(ActorRef ref)", "testcase": false, "constructor": false}, {"identifier": "addInstanceListener", "parameters": "(InstanceListener listener)", "modifiers": "public", "return": "void", "signature": "void addInstanceListener(InstanceListener listener)", "full_signature": "public void addInstanceListener(InstanceListener listener)", "class_method_signature": "InstanceManager.addInstanceListener(InstanceListener listener)", "testcase": false, "constructor": false}, {"identifier": "removeInstanceListener", "parameters": "(InstanceListener listener)", "modifiers": "public", "return": "void", "signature": "void removeInstanceListener(InstanceListener listener)", "full_signature": "public void removeInstanceListener(InstanceListener listener)", "class_method_signature": "InstanceManager.removeInstanceListener(InstanceListener listener)", "testcase": false, "constructor": false}, {"identifier": "notifyNewInstance", "parameters": "(Instance instance)", "modifiers": "private", "return": "void", "signature": "void notifyNewInstance(Instance instance)", "full_signature": "private void notifyNewInstance(Instance instance)", "class_method_signature": "InstanceManager.notifyNewInstance(Instance instance)", "testcase": false, "constructor": false}, {"identifier": "notifyDeadInstance", "parameters": "(Instance instance)", "modifiers": "private", "return": "void", "signature": "void notifyDeadInstance(Instance instance)", "full_signature": "private void notifyDeadInstance(Instance instance)", "class_method_signature": "InstanceManager.notifyDeadInstance(Instance instance)", "testcase": false, "constructor": false}], "file": "flink-runtime/src/main/java/org/apache/flink/runtime/instance/InstanceManager.java"}, "focal_method": {"identifier": "shutdown", "parameters": "()", "modifiers": "public", "return": "void", "body": "public void shutdown() {\n\t\tsynchronized (this.lock) {\n\t\t\tif (this.isShutdown) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.isShutdown = true;\n\n\t\t\tfor (Instance i : this.registeredHostsById.values()) {\n\t\t\t\ti.markDead();\n\t\t\t}\n\n\t\t\tthis.registeredHostsById.clear();\n\t\t\tthis.registeredHostsByConnection.clear();\n\t\t\tthis.deadHosts.clear();\n\t\t\tthis.totalNumberOfAliveTaskSlots = 0;\n\t\t}\n\t}", "signature": "void shutdown()", "full_signature": "public void shutdown()", "class_method_signature": "InstanceManager.shutdown()", "testcase": false, "constructor": false, "invocations": ["values", "markDead", "clear", "clear", "clear"]}, "repository": {"repo_id": 47972099, "url": "https://github.com/streamline-eu/ML-Pipelines", "language": "Java", "is_fork": false, "fork_count": 7, "stargazer_count": 7, "size": 85537, "license": "licensed"}}