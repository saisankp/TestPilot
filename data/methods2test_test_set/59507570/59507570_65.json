{"test_class": {"identifier": "CaseFormServiceImplTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final int MAX_RETRY_NUM = 3;", "modifier": "private static final", "type": "int", "declarator": "MAX_RETRY_NUM = 3", "var_name": "MAX_RETRY_NUM"}, {"original_string": "@Mock\n    CaseFormDao caseFormDao;", "modifier": "@Mock", "type": "CaseFormDao", "declarator": "caseFormDao", "var_name": "caseFormDao"}, {"original_string": "@InjectMocks\n    CaseFormServiceImpl caseFormService;", "modifier": "@InjectMocks", "type": "CaseFormServiceImpl", "declarator": "caseFormService", "var_name": "caseFormService"}, {"original_string": "private String formForm = \"{\\n\" +\n            \"  \\\"Children\\\": [\\n\" +\n            \"    {\\n\" +\n            \"      \\\"order\\\": 10,\\n\" +\n            \"      \\\"fields\\\": [\\n\" +\n            \"        {\\n\" +\n            \"          \\\"name\\\": \\\"case_id\\\",\\n\" +\n            \"          \\\"type\\\": \\\"text_field\\\",\\n\" +\n            \"          \\\"editable\\\": false,\\n\" +\n            \"          \\\"multi_select\\\": false,\\n\" +\n            \"          \\\"display_name\\\": {\\n\" +\n            \"            \\\"en\\\": \\\"Long ID\\\"\\n\" +\n            \"          },\\n\" +\n            \"          \\\"help_text\\\": {\\n\" +\n            \"            \\\"en\\\": \\\"\\\"\\n\" +\n            \"          },\\n\" +\n            \"          \\\"option_strings_text\\\": {\\n\" +\n            \"            \\\"en\\\": []\\n\" +\n            \"          }\\n\" +\n            \"        }\\n\" +\n            \"      ],\\n\" +\n            \"      \\\"base_language\\\": \\\"en\\\",\\n\" +\n            \"      \\\"name\\\": {\\n\" +\n            \"        \\\"en\\\": \\\"Basic Identity\\\"\\n\" +\n            \"      },\\n\" +\n            \"      \\\"help_text\\\": {\\n\" +\n            \"        \\\"en\\\": \\\"\\\"\\n\" +\n            \"      }\\n\" +\n            \"    }\\n\" +\n            \"  ]\\n\" +\n            \"}\";", "modifier": "private", "type": "String", "declarator": "formForm = \"{\\n\" +\n            \"  \\\"Children\\\": [\\n\" +\n            \"    {\\n\" +\n            \"      \\\"order\\\": 10,\\n\" +\n            \"      \\\"fields\\\": [\\n\" +\n            \"        {\\n\" +\n            \"          \\\"name\\\": \\\"case_id\\\",\\n\" +\n            \"          \\\"type\\\": \\\"text_field\\\",\\n\" +\n            \"          \\\"editable\\\": false,\\n\" +\n            \"          \\\"multi_select\\\": false,\\n\" +\n            \"          \\\"display_name\\\": {\\n\" +\n            \"            \\\"en\\\": \\\"Long ID\\\"\\n\" +\n            \"          },\\n\" +\n            \"          \\\"help_text\\\": {\\n\" +\n            \"            \\\"en\\\": \\\"\\\"\\n\" +\n            \"          },\\n\" +\n            \"          \\\"option_strings_text\\\": {\\n\" +\n            \"            \\\"en\\\": []\\n\" +\n            \"          }\\n\" +\n            \"        }\\n\" +\n            \"      ],\\n\" +\n            \"      \\\"base_language\\\": \\\"en\\\",\\n\" +\n            \"      \\\"name\\\": {\\n\" +\n            \"        \\\"en\\\": \\\"Basic Identity\\\"\\n\" +\n            \"      },\\n\" +\n            \"      \\\"help_text\\\": {\\n\" +\n            \"        \\\"en\\\": \\\"\\\"\\n\" +\n            \"      }\\n\" +\n            \"    }\\n\" +\n            \"  ]\\n\" +\n            \"}\"", "var_name": "formForm"}], "file": "app/src/test/java/org/unicef/rapidreg/service/impl/CaseFormServiceImplTest.java"}, "test_case": {"identifier": "should_return_true_if_form_is_ready", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void should_return_true_if_form_is_ready() throws Exception {\n        User user = new User();\n        user.setRole(User.Role.CP.getValue());\n        Mockito.when(PrimeroAppConfiguration.getCurrentUser()).thenReturn(user);\n\n        CaseForm cpCaseForm = createCPCaseForm();\n        when(caseFormDao.getCaseForm(PrimeroAppConfiguration.MODULE_ID_CP, PrimeroAppConfiguration.getApiBaseUrl()))\n                .thenReturn(cpCaseForm);\n\n        assertTrue(caseFormService.isReady());\n    }", "signature": "void should_return_true_if_form_is_ready()", "full_signature": "@Test public void should_return_true_if_form_is_ready()", "class_method_signature": "CaseFormServiceImplTest.should_return_true_if_form_is_ready()", "testcase": true, "constructor": false, "invocations": ["setRole", "getValue", "thenReturn", "when", "getCurrentUser", "createCPCaseForm", "thenReturn", "when", "getCaseForm", "getApiBaseUrl", "assertTrue", "isReady"]}, "focal_class": {"identifier": "CaseFormServiceImpl", "superclass": "", "interfaces": "implements CaseFormService", "fields": [{"original_string": "public static final String TAG = CaseFormService.class.getSimpleName();", "modifier": "public static final", "type": "String", "declarator": "TAG = CaseFormService.class.getSimpleName()", "var_name": "TAG"}, {"original_string": "private CaseFormDao caseFormDao;", "modifier": "private", "type": "CaseFormDao", "declarator": "caseFormDao", "var_name": "caseFormDao"}], "methods": [{"identifier": "CaseFormServiceImpl", "parameters": "(CaseFormDao caseFormDao)", "modifiers": "public", "return": "", "signature": " CaseFormServiceImpl(CaseFormDao caseFormDao)", "full_signature": "public  CaseFormServiceImpl(CaseFormDao caseFormDao)", "class_method_signature": "CaseFormServiceImpl.CaseFormServiceImpl(CaseFormDao caseFormDao)", "testcase": false, "constructor": true}, {"identifier": "isReady", "parameters": "()", "modifiers": "public", "return": "boolean", "signature": "boolean isReady()", "full_signature": "public boolean isReady()", "class_method_signature": "CaseFormServiceImpl.isReady()", "testcase": false, "constructor": false}, {"identifier": "getCPTemplate", "parameters": "()", "modifiers": "public", "return": "CaseTemplateForm", "signature": "CaseTemplateForm getCPTemplate()", "full_signature": "public CaseTemplateForm getCPTemplate()", "class_method_signature": "CaseFormServiceImpl.getCPTemplate()", "testcase": false, "constructor": false}, {"identifier": "getGBVTemplate", "parameters": "()", "modifiers": "@Override public", "return": "CaseTemplateForm", "signature": "CaseTemplateForm getGBVTemplate()", "full_signature": "@Override public CaseTemplateForm getGBVTemplate()", "class_method_signature": "CaseFormServiceImpl.getGBVTemplate()", "testcase": false, "constructor": false}, {"identifier": "getCaseTemplateForm", "parameters": "(Blob form)", "modifiers": "private", "return": "CaseTemplateForm", "signature": "CaseTemplateForm getCaseTemplateForm(Blob form)", "full_signature": "private CaseTemplateForm getCaseTemplateForm(Blob form)", "class_method_signature": "CaseFormServiceImpl.getCaseTemplateForm(Blob form)", "testcase": false, "constructor": false}, {"identifier": "saveOrUpdate", "parameters": "(CaseForm caseForm)", "modifiers": "public", "return": "void", "signature": "void saveOrUpdate(CaseForm caseForm)", "full_signature": "public void saveOrUpdate(CaseForm caseForm)", "class_method_signature": "CaseFormServiceImpl.saveOrUpdate(CaseForm caseForm)", "testcase": false, "constructor": false}], "file": "app/src/main/java/org/unicef/rapidreg/service/impl/CaseFormServiceImpl.java"}, "focal_method": {"identifier": "isReady", "parameters": "()", "modifiers": "public", "return": "boolean", "body": "public boolean isReady() {\n        User.Role roleType = PrimeroAppConfiguration.getCurrentUser().getRoleType();\n        if (roleType == User.Role.CP) {\n            return caseFormDao.getCaseForm(PrimeroAppConfiguration.MODULE_ID_CP, PrimeroAppConfiguration\n                    .getApiBaseUrl()) != null && caseFormDao\n                    .getCaseForm(PrimeroAppConfiguration.MODULE_ID_CP, PrimeroAppConfiguration.getApiBaseUrl())\n                    .getForm() != null;\n        }\n        if (roleType == User.Role.GBV) {\n            return caseFormDao.getCaseForm(PrimeroAppConfiguration.MODULE_ID_GBV, PrimeroAppConfiguration\n                    .getApiBaseUrl()) != null &&\n                    caseFormDao.getCaseForm(PrimeroAppConfiguration.MODULE_ID_GBV, PrimeroAppConfiguration\n                            .getApiBaseUrl()).getForm() != null;\n        }\n        return caseFormDao.getCaseForm(PrimeroAppConfiguration.MODULE_ID_CP, PrimeroAppConfiguration.getApiBaseUrl()) != null && caseFormDao\n                .getCaseForm(PrimeroAppConfiguration.MODULE_ID_CP, PrimeroAppConfiguration.getApiBaseUrl()).getForm() != null;\n    }", "signature": "boolean isReady()", "full_signature": "public boolean isReady()", "class_method_signature": "CaseFormServiceImpl.isReady()", "testcase": false, "constructor": false, "invocations": ["getRoleType", "getCurrentUser", "getCaseForm", "getApiBaseUrl", "getForm", "getCaseForm", "getApiBaseUrl", "getCaseForm", "getApiBaseUrl", "getForm", "getCaseForm", "getApiBaseUrl", "getCaseForm", "getApiBaseUrl", "getForm", "getCaseForm", "getApiBaseUrl"]}, "repository": {"repo_id": 59507570, "url": "https://github.com/UnicefNY/RapidReg", "language": "Java", "is_fork": false, "fork_count": 3, "stargazer_count": 7, "size": 10753, "license": "Other"}}