{"test_class": {"identifier": "HostResourcesServiceTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "@InjectMocks\n    private HostResourcesService hostResourcesService;", "modifier": "@InjectMocks\n    private", "type": "HostResourcesService", "declarator": "hostResourcesService", "var_name": "hostResourcesService"}, {"original_string": "@Mock\n    private ServiceOfferingDao serviceOfferingDao;", "modifier": "@Mock\n    private", "type": "ServiceOfferingDao", "declarator": "serviceOfferingDao", "var_name": "serviceOfferingDao"}, {"original_string": "@Mock\n    private ConfigurationDao configurationDao;", "modifier": "@Mock\n    private", "type": "ConfigurationDao", "declarator": "configurationDao", "var_name": "configurationDao"}, {"original_string": "@Mock\n    private VMInstanceDao vmInstanceDao;", "modifier": "@Mock\n    private", "type": "VMInstanceDao", "declarator": "vmInstanceDao", "var_name": "vmInstanceDao"}, {"original_string": "private Random random = new Random();", "modifier": "private", "type": "Random", "declarator": "random = new Random()", "var_name": "random"}, {"original_string": "private HostResourcesTestUtils hostResourcesUtils = new HostResourcesTestUtils();", "modifier": "private", "type": "HostResourcesTestUtils", "declarator": "hostResourcesUtils = new HostResourcesTestUtils()", "var_name": "hostResourcesUtils"}, {"original_string": "private VMInstanceVO vmInstance;", "modifier": "private", "type": "VMInstanceVO", "declarator": "vmInstance", "var_name": "vmInstance"}], "file": "autonomic-algorithms-commons/src/test/java/br/com/autonomiccs/autonomic/algorithms/commons/services/HostResourcesServiceTest.java"}, "test_case": {"identifier": "listVmsFromHostTest", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void listVmsFromHostTest() {\n        HostResources hostResources = Mockito.mock(HostResources.class);\n        Mockito.when(hostResources.getHostId()).thenReturn(1l);\n\n        ServiceOfferingVO serviceOfferingVO = new ServiceOfferingVO(\"name\", 1, 512, 1000, 1000, 1000, true, \"displayText\", ProvisioningType.THIN, true, true, \"tags\", true,\n                com.cloud.vm.VirtualMachine.Type.User, true);\n\n        List<VMInstanceVO> vmsInstanceVO = createRunningVmIistanceVo(2);\n        Mockito.when(vmInstanceDao.listByHostId(1l)).thenReturn(vmsInstanceVO);\n        Mockito.when(serviceOfferingDao.findById(1l)).thenReturn(serviceOfferingVO);\n\n        List<VmResources> vmResourcesList = hostResourcesService.listVmsFromHost(hostResources);\n\n        Assert.assertEquals(2, vmResourcesList.size());\n        Assert.assertEquals(1000l, vmResourcesList.get(0).getCpuSpeed());\n        Assert.assertEquals(512l, vmResourcesList.get(1).getMemoryInMegaBytes());\n        Assert.assertEquals(1, vmResourcesList.get(0).getNumberOfCpus());\n    }", "signature": "void listVmsFromHostTest()", "full_signature": "@Test public void listVmsFromHostTest()", "class_method_signature": "HostResourcesServiceTest.listVmsFromHostTest()", "testcase": true, "constructor": false, "invocations": ["mock", "thenReturn", "when", "getHostId", "createRunningVmIistanceVo", "thenReturn", "when", "listByHostId", "thenReturn", "when", "findById", "listVmsFromHost", "assertEquals", "size", "assertEquals", "getCpuSpeed", "get", "assertEquals", "getMemoryInMegaBytes", "get", "assertEquals", "getNumberOfCpus", "get"]}, "focal_class": {"identifier": "HostResourcesService", "superclass": "", "interfaces": "", "fields": [{"original_string": "private final static String CPU_OVERPROVISIONING_CONFIGURARTION_NAME = \"cpu.overprovisioning.factor\";", "modifier": "private final static", "type": "String", "declarator": "CPU_OVERPROVISIONING_CONFIGURARTION_NAME = \"cpu.overprovisioning.factor\"", "var_name": "CPU_OVERPROVISIONING_CONFIGURARTION_NAME"}, {"original_string": "private final static String MEMORY_OVERPROVISIONING_CONFIGURARTION_NAME = \"mem.overprovisioning.factor\";", "modifier": "private final static", "type": "String", "declarator": "MEMORY_OVERPROVISIONING_CONFIGURARTION_NAME = \"mem.overprovisioning.factor\"", "var_name": "MEMORY_OVERPROVISIONING_CONFIGURARTION_NAME"}, {"original_string": "@Inject\n    private ServiceOfferingDao serviceOfferingDao;", "modifier": "@Inject\n    private", "type": "ServiceOfferingDao", "declarator": "serviceOfferingDao", "var_name": "serviceOfferingDao"}, {"original_string": "@Inject\n    private ConfigurationDao configurationDao;", "modifier": "@Inject\n    private", "type": "ConfigurationDao", "declarator": "configurationDao", "var_name": "configurationDao"}, {"original_string": "@Inject\n    private VMInstanceDao vmInstanceDao;", "modifier": "@Inject\n    private", "type": "VMInstanceDao", "declarator": "vmInstanceDao", "var_name": "vmInstanceDao"}], "methods": [{"identifier": "createAndConfigureHostResources", "parameters": "(HostVO hostVo)", "modifiers": "public", "return": "HostResources", "signature": "HostResources createAndConfigureHostResources(HostVO hostVo)", "full_signature": "public HostResources createAndConfigureHostResources(HostVO hostVo)", "class_method_signature": "HostResourcesService.createAndConfigureHostResources(HostVO hostVo)", "testcase": false, "constructor": false}, {"identifier": "createHostResources", "parameters": "(HostVO hostVO)", "modifiers": "public", "return": "HostResources", "signature": "HostResources createHostResources(HostVO hostVO)", "full_signature": "public HostResources createHostResources(HostVO hostVO)", "class_method_signature": "HostResourcesService.createHostResources(HostVO hostVO)", "testcase": false, "constructor": false}, {"identifier": "listVmsFromHost", "parameters": "(HostResources host)", "modifiers": "protected", "return": "List<VmResources>", "signature": "List<VmResources> listVmsFromHost(HostResources host)", "full_signature": "protected List<VmResources> listVmsFromHost(HostResources host)", "class_method_signature": "HostResourcesService.listVmsFromHost(HostResources host)", "testcase": false, "constructor": false}, {"identifier": "isVmCurrentlyUsingHostResource", "parameters": "(VMInstanceVO vmInstance)", "modifiers": "protected", "return": "boolean", "signature": "boolean isVmCurrentlyUsingHostResource(VMInstanceVO vmInstance)", "full_signature": "protected boolean isVmCurrentlyUsingHostResource(VMInstanceVO vmInstance)", "class_method_signature": "HostResourcesService.isVmCurrentlyUsingHostResource(VMInstanceVO vmInstance)", "testcase": false, "constructor": false}, {"identifier": "calculateHostResourcesAllocated", "parameters": "(HostResources host)", "modifiers": "protected", "return": "void", "signature": "void calculateHostResourcesAllocated(HostResources host)", "full_signature": "protected void calculateHostResourcesAllocated(HostResources host)", "class_method_signature": "HostResourcesService.calculateHostResourcesAllocated(HostResources host)", "testcase": false, "constructor": false}, {"identifier": "loadHostOverprovisioningFactors", "parameters": "(HostResources host)", "modifiers": "protected", "return": "void", "signature": "void loadHostOverprovisioningFactors(HostResources host)", "full_signature": "protected void loadHostOverprovisioningFactors(HostResources host)", "class_method_signature": "HostResourcesService.loadHostOverprovisioningFactors(HostResources host)", "testcase": false, "constructor": false}], "file": "autonomic-algorithms-commons/src/main/java/br/com/autonomiccs/autonomic/algorithms/commons/services/HostResourcesService.java"}, "focal_method": {"identifier": "listVmsFromHost", "parameters": "(HostResources host)", "modifiers": "protected", "return": "List<VmResources>", "body": "protected List<VmResources> listVmsFromHost(HostResources host) {\n        List<VMInstanceVO> vmInstanceList = vmInstanceDao.listByHostId(host.getHostId());\n        List<VmResources> vmResourcesList = new ArrayList<>();\n\n        for (VMInstanceVO vmInstance : vmInstanceList) {\n            if (!isVmCurrentlyUsingHostResource(vmInstance)) {\n                continue;\n            }\n            ServiceOfferingVO serviceOffering = serviceOfferingDao.findById(vmInstance.getServiceOfferingId());\n            vmResourcesList.add(new VmResources(vmInstance.getId(), serviceOffering.getCpu(), serviceOffering.getSpeed(), serviceOffering.getRamSize()));\n        }\n        return vmResourcesList;\n    }", "signature": "List<VmResources> listVmsFromHost(HostResources host)", "full_signature": "protected List<VmResources> listVmsFromHost(HostResources host)", "class_method_signature": "HostResourcesService.listVmsFromHost(HostResources host)", "testcase": false, "constructor": false, "invocations": ["listByHostId", "getHostId", "isVmCurrentlyUsingHostResource", "findById", "getServiceOfferingId", "add", "getId", "getCpu", "getSpeed", "getRamSize"]}, "repository": {"repo_id": 56359101, "url": "https://github.com/Autonomiccs/autonomiccs-platform", "language": "Java", "is_fork": false, "fork_count": 7, "stargazer_count": 17, "size": 944, "license": "licensed"}}