{"test_class": {"identifier": "EnvironmentPropertySourceTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private final EnvironmentPropertySource envPropertySource = new EnvironmentPropertySource();", "modifier": "private final", "type": "EnvironmentPropertySource", "declarator": "envPropertySource = new EnvironmentPropertySource()", "var_name": "envPropertySource"}], "file": "code/spi-support/src/test/java/org/apache/tamaya/spisupport/propertysource/EnvironmentPropertySourceTest.java"}, "test_case": {"identifier": "testPrefixedGetProperties", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testPrefixedGetProperties() throws Exception {\n        EnvironmentPropertySource localEnvironmentPropertySource = new EnvironmentPropertySource(\"someprefix\");\n        Map<String, PropertyValue> props = localEnvironmentPropertySource.getProperties();\n        for (Map.Entry<String, PropertyValue> en : props.entrySet()) {\n            assertThat(en.getKey().startsWith(\"someprefix\")).isTrue();\n            String thisKey = en.getKey().replaceFirst(\"someprefix\", \"\");\n            if (!thisKey.startsWith(\"_\")) {\n                assertThat(en.getValue().getValue()).isEqualTo(System.getenv(thisKey));\n            }\n        }\n    }", "signature": "void testPrefixedGetProperties()", "full_signature": "@Test public void testPrefixedGetProperties()", "class_method_signature": "EnvironmentPropertySourceTest.testPrefixedGetProperties()", "testcase": true, "constructor": false, "invocations": ["getProperties", "entrySet", "isTrue", "assertThat", "startsWith", "getKey", "replaceFirst", "getKey", "startsWith", "isEqualTo", "assertThat", "getValue", "getValue", "getenv"]}, "focal_class": {"identifier": "EnvironmentPropertySource", "superclass": "extends BasePropertySource", "interfaces": "", "fields": [{"original_string": "private static final String TAMAYA_ENVPROPS_PREFIX = \"tamaya.envprops.prefix\";", "modifier": "private static final", "type": "String", "declarator": "TAMAYA_ENVPROPS_PREFIX = \"tamaya.envprops.prefix\"", "var_name": "TAMAYA_ENVPROPS_PREFIX"}, {"original_string": "private static final String TAMAYA_ENVPROPS_DISABLE = \"tamaya.envprops.disable\";", "modifier": "private static final", "type": "String", "declarator": "TAMAYA_ENVPROPS_DISABLE = \"tamaya.envprops.disable\"", "var_name": "TAMAYA_ENVPROPS_DISABLE"}, {"original_string": "private static final String TAMAYA_DEFAULT_DISABLE = \"tamaya.defaults.disable\";", "modifier": "private static final", "type": "String", "declarator": "TAMAYA_DEFAULT_DISABLE = \"tamaya.defaults.disable\"", "var_name": "TAMAYA_DEFAULT_DISABLE"}, {"original_string": "public static final int DEFAULT_ORDINAL = 300;", "modifier": "public static final", "type": "int", "declarator": "DEFAULT_ORDINAL = 300", "var_name": "DEFAULT_ORDINAL"}, {"original_string": "private String prefix;", "modifier": "private", "type": "String", "declarator": "prefix", "var_name": "prefix"}, {"original_string": "private boolean disabled = false;", "modifier": "private", "type": "boolean", "declarator": "disabled = false", "var_name": "disabled"}, {"original_string": "private SystemPropertiesProvider propertiesProvider = new SystemPropertiesProvider();", "modifier": "private", "type": "SystemPropertiesProvider", "declarator": "propertiesProvider = new SystemPropertiesProvider()", "var_name": "propertiesProvider"}], "methods": [{"identifier": "EnvironmentPropertySource", "parameters": "()", "modifiers": "public", "return": "", "signature": " EnvironmentPropertySource()", "full_signature": "public  EnvironmentPropertySource()", "class_method_signature": "EnvironmentPropertySource.EnvironmentPropertySource()", "testcase": false, "constructor": true}, {"identifier": "initFromSystemProperties", "parameters": "()", "modifiers": "private", "return": "void", "signature": "void initFromSystemProperties()", "full_signature": "private void initFromSystemProperties()", "class_method_signature": "EnvironmentPropertySource.initFromSystemProperties()", "testcase": false, "constructor": false}, {"identifier": "EnvironmentPropertySource", "parameters": "(int ordinal)", "modifiers": "public", "return": "", "signature": " EnvironmentPropertySource(int ordinal)", "full_signature": "public  EnvironmentPropertySource(int ordinal)", "class_method_signature": "EnvironmentPropertySource.EnvironmentPropertySource(int ordinal)", "testcase": false, "constructor": true}, {"identifier": "EnvironmentPropertySource", "parameters": "(String prefix, int ordinal)", "modifiers": "public", "return": "", "signature": " EnvironmentPropertySource(String prefix, int ordinal)", "full_signature": "public  EnvironmentPropertySource(String prefix, int ordinal)", "class_method_signature": "EnvironmentPropertySource.EnvironmentPropertySource(String prefix, int ordinal)", "testcase": false, "constructor": true}, {"identifier": "EnvironmentPropertySource", "parameters": "(String prefix)", "modifiers": "public", "return": "", "signature": " EnvironmentPropertySource(String prefix)", "full_signature": "public  EnvironmentPropertySource(String prefix)", "class_method_signature": "EnvironmentPropertySource.EnvironmentPropertySource(String prefix)", "testcase": false, "constructor": true}, {"identifier": "getDefaultOrdinal", "parameters": "()", "modifiers": "@Override public", "return": "int", "signature": "int getDefaultOrdinal()", "full_signature": "@Override public int getDefaultOrdinal()", "class_method_signature": "EnvironmentPropertySource.getDefaultOrdinal()", "testcase": false, "constructor": false}, {"identifier": "getName", "parameters": "()", "modifiers": "@Override public", "return": "String", "signature": "String getName()", "full_signature": "@Override public String getName()", "class_method_signature": "EnvironmentPropertySource.getName()", "testcase": false, "constructor": false}, {"identifier": "get", "parameters": "(String key)", "modifiers": "@Override public", "return": "PropertyValue", "signature": "PropertyValue get(String key)", "full_signature": "@Override public PropertyValue get(String key)", "class_method_signature": "EnvironmentPropertySource.get(String key)", "testcase": false, "constructor": false}, {"identifier": "hasPrefix", "parameters": "()", "modifiers": "private", "return": "boolean", "signature": "boolean hasPrefix()", "full_signature": "private boolean hasPrefix()", "class_method_signature": "EnvironmentPropertySource.hasPrefix()", "testcase": false, "constructor": false}, {"identifier": "getProperties", "parameters": "()", "modifiers": "@Override public", "return": "Map<String, PropertyValue>", "signature": "Map<String, PropertyValue> getProperties()", "full_signature": "@Override public Map<String, PropertyValue> getProperties()", "class_method_signature": "EnvironmentPropertySource.getProperties()", "testcase": false, "constructor": false}, {"identifier": "toStringValues", "parameters": "()", "modifiers": "@Override protected", "return": "String", "signature": "String toStringValues()", "full_signature": "@Override protected String toStringValues()", "class_method_signature": "EnvironmentPropertySource.toStringValues()", "testcase": false, "constructor": false}, {"identifier": "setPropertiesProvider", "parameters": "(SystemPropertiesProvider spp)", "modifiers": "", "return": "void", "signature": "void setPropertiesProvider(SystemPropertiesProvider spp)", "full_signature": " void setPropertiesProvider(SystemPropertiesProvider spp)", "class_method_signature": "EnvironmentPropertySource.setPropertiesProvider(SystemPropertiesProvider spp)", "testcase": false, "constructor": false}, {"identifier": "getPropertiesProvider", "parameters": "()", "modifiers": "", "return": "SystemPropertiesProvider", "signature": "SystemPropertiesProvider getPropertiesProvider()", "full_signature": " SystemPropertiesProvider getPropertiesProvider()", "class_method_signature": "EnvironmentPropertySource.getPropertiesProvider()", "testcase": false, "constructor": false}, {"identifier": "getPrefix", "parameters": "()", "modifiers": "public", "return": "String", "signature": "String getPrefix()", "full_signature": "public String getPrefix()", "class_method_signature": "EnvironmentPropertySource.getPrefix()", "testcase": false, "constructor": false}, {"identifier": "isDisabled", "parameters": "()", "modifiers": "public", "return": "boolean", "signature": "boolean isDisabled()", "full_signature": "public boolean isDisabled()", "class_method_signature": "EnvironmentPropertySource.isDisabled()", "testcase": false, "constructor": false}, {"identifier": "getChangeSupport", "parameters": "()", "modifiers": "@Override public", "return": "ChangeSupport", "signature": "ChangeSupport getChangeSupport()", "full_signature": "@Override public ChangeSupport getChangeSupport()", "class_method_signature": "EnvironmentPropertySource.getChangeSupport()", "testcase": false, "constructor": false}], "file": "code/spi-support/src/main/java/org/apache/tamaya/spisupport/propertysource/EnvironmentPropertySource.java"}, "focal_method": {"identifier": "getProperties", "parameters": "()", "modifiers": "@Override public", "return": "Map<String, PropertyValue>", "body": "@Override\n    public Map<String, PropertyValue> getProperties() {\n        if(disabled){\n            return Collections.emptyMap();\n        }\n        String prefix = this.prefix;\n        if(prefix==null) {\n            Map<String, PropertyValue> entries = new HashMap<>(System.getenv().size());\n            for (Map.Entry<String, String> entry : System.getenv().entrySet()) {\n                entries.put(entry.getKey(), PropertyValue.createValue(entry.getKey(), entry.getValue())\n                        .setMeta(\"source\", getName()));\n            }\n            return entries;\n        }else{\n            Map<String, PropertyValue> entries = new HashMap<>(System.getenv().size());\n            for (Map.Entry<String, String> entry : System.getenv().entrySet()) {\n                entries.put(prefix + entry.getKey(), PropertyValue.createValue(prefix + entry.getKey(), entry.getValue())\n                        .setMeta(\"source\", getName()));\n            }\n            return entries;\n        }\n    }", "signature": "Map<String, PropertyValue> getProperties()", "full_signature": "@Override public Map<String, PropertyValue> getProperties()", "class_method_signature": "EnvironmentPropertySource.getProperties()", "testcase": false, "constructor": false, "invocations": ["emptyMap", "size", "getenv", "entrySet", "getenv", "put", "getKey", "setMeta", "createValue", "getKey", "getValue", "getName", "size", "getenv", "entrySet", "getenv", "put", "getKey", "setMeta", "createValue", "getKey", "getValue", "getName"]}, "repository": {"repo_id": 26951044, "url": "https://github.com/apache/incubator-tamaya", "language": "Java", "is_fork": false, "fork_count": 33, "stargazer_count": 44, "size": 7630, "license": "licensed"}}