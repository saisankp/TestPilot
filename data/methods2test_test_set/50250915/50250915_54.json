{"test_class": {"identifier": "PipelineMetadataServiceTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "@Rule\n    public JenkinsRule j = new JenkinsRule();", "modifier": "@Rule\n    public", "type": "JenkinsRule", "declarator": "j = new JenkinsRule()", "var_name": "j"}], "file": "blueocean-pipeline-editor/src/test/java/io/blueocean/rest/pipeline/editor/PipelineMetadataServiceTest.java"}, "test_case": {"identifier": "verifyFunctionNames", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void verifyFunctionNames() throws Exception {\n        PipelineMetadataService svc = new PipelineMetadataService();\n\n        List<ExportedDescribableModel> steps = new ArrayList<>();\n\n        steps.addAll(Arrays.asList(svc.doPipelineStepMetadata()));\n\n        assertFalse(steps.isEmpty());\n\n        // Verify we have a Symbol-provided Builder or Publisher\n        assertThat(steps, hasItem(stepWithName(\"archiveArtifacts\")));\n\n        // Verify that we don't have steps blacklisted by Declarative\n        assertThat(steps, not(hasItem(stepWithName(\"properties\"))));\n\n        // Verify that we don't have advanced steps\n        assertThat(steps, not(hasItem(stepWithName(\"archive\"))));\n\n        // Verify that we *do* have advanced steps that are explicitly whitelisted in.\n        assertThat(steps, hasItem(stepWithName(\"catchError\")));\n\n        // Verify that we have a Symbol-provided SimpleBuildWrapper\n        assertThat(steps, hasItem(stepWithName(\"withSonarQubeEnv\")));\n    }", "signature": "void verifyFunctionNames()", "full_signature": "@Test public void verifyFunctionNames()", "class_method_signature": "PipelineMetadataServiceTest.verifyFunctionNames()", "testcase": true, "constructor": false, "invocations": ["addAll", "asList", "doPipelineStepMetadata", "assertFalse", "isEmpty", "assertThat", "hasItem", "stepWithName", "assertThat", "not", "hasItem", "stepWithName", "assertThat", "not", "hasItem", "stepWithName", "assertThat", "hasItem", "stepWithName", "assertThat", "hasItem", "stepWithName"]}, "focal_class": {"identifier": "PipelineMetadataService", "superclass": "", "interfaces": "implements ApiRoutable", "fields": [{"original_string": "final static List<String> INCLUDED_ADVANCED_STEPS = Collections.unmodifiableList(Arrays.asList(\"catchError\"));", "modifier": "final static", "type": "List<String>", "declarator": "INCLUDED_ADVANCED_STEPS = Collections.unmodifiableList(Arrays.asList(\"catchError\"))", "var_name": "INCLUDED_ADVANCED_STEPS"}], "methods": [{"identifier": "getUrlName", "parameters": "()", "modifiers": "@Override public", "return": "String", "signature": "String getUrlName()", "full_signature": "@Override public String getUrlName()", "class_method_signature": "PipelineMetadataService.getUrlName()", "testcase": false, "constructor": false}, {"identifier": "doCrumbInfo", "parameters": "()", "modifiers": "@GET public", "return": "String", "signature": "String doCrumbInfo()", "full_signature": "@GET public String doCrumbInfo()", "class_method_signature": "PipelineMetadataService.doCrumbInfo()", "testcase": false, "constructor": false}, {"identifier": "doAgentMetadata", "parameters": "()", "modifiers": "@GET @TreeResponse public", "return": "ExportedDescribableModel[]", "signature": "ExportedDescribableModel[] doAgentMetadata()", "full_signature": "@GET @TreeResponse public ExportedDescribableModel[] doAgentMetadata()", "class_method_signature": "PipelineMetadataService.doAgentMetadata()", "testcase": false, "constructor": false}, {"identifier": "doToolMetadata", "parameters": "()", "modifiers": "@GET @TreeResponse public", "return": "ExportedToolDescriptor[]", "signature": "ExportedToolDescriptor[] doToolMetadata()", "full_signature": "@GET @TreeResponse public ExportedToolDescriptor[] doToolMetadata()", "class_method_signature": "PipelineMetadataService.doToolMetadata()", "testcase": false, "constructor": false}, {"identifier": "doBuildConditions", "parameters": "()", "modifiers": "@GET @TreeResponse public", "return": "ExportedBuildCondition[]", "signature": "ExportedBuildCondition[] doBuildConditions()", "full_signature": "@GET @TreeResponse public ExportedBuildCondition[] doBuildConditions()", "class_method_signature": "PipelineMetadataService.doBuildConditions()", "testcase": false, "constructor": false}, {"identifier": "doWrapperMetadata", "parameters": "()", "modifiers": "@GET @TreeResponse public", "return": "ExportedPipelineStep[]", "signature": "ExportedPipelineStep[] doWrapperMetadata()", "full_signature": "@GET @TreeResponse public ExportedPipelineStep[] doWrapperMetadata()", "class_method_signature": "PipelineMetadataService.doWrapperMetadata()", "testcase": false, "constructor": false}, {"identifier": "doPipelineStepMetadata", "parameters": "()", "modifiers": "@GET @TreeResponse public", "return": "ExportedPipelineFunction[]", "signature": "ExportedPipelineFunction[] doPipelineStepMetadata()", "full_signature": "@GET @TreeResponse public ExportedPipelineFunction[] doPipelineStepMetadata()", "class_method_signature": "PipelineMetadataService.doPipelineStepMetadata()", "testcase": false, "constructor": false}, {"identifier": "isWrapper", "parameters": "(StepDescriptor d)", "modifiers": "private", "return": "boolean", "signature": "boolean isWrapper(StepDescriptor d)", "full_signature": "private boolean isWrapper(StepDescriptor d)", "class_method_signature": "PipelineMetadataService.isWrapper(StepDescriptor d)", "testcase": false, "constructor": false}, {"identifier": "includeStep", "parameters": "(StepDescriptor d)", "modifiers": "private", "return": "boolean", "signature": "boolean includeStep(StepDescriptor d)", "full_signature": "private boolean includeStep(StepDescriptor d)", "class_method_signature": "PipelineMetadataService.includeStep(StepDescriptor d)", "testcase": false, "constructor": false}, {"identifier": "populateMetaSteps", "parameters": "(List<Descriptor<?>> r, Class<T> c)", "modifiers": "private", "return": "void", "signature": "void populateMetaSteps(List<Descriptor<?>> r, Class<T> c)", "full_signature": "private void populateMetaSteps(List<Descriptor<?>> r, Class<T> c)", "class_method_signature": "PipelineMetadataService.populateMetaSteps(List<Descriptor<?>> r, Class<T> c)", "testcase": false, "constructor": false}, {"identifier": "symbolForObject", "parameters": "(Object d)", "modifiers": "private @CheckForNull", "return": "String", "signature": "String symbolForObject(Object d)", "full_signature": "private @CheckForNull String symbolForObject(Object d)", "class_method_signature": "PipelineMetadataService.symbolForObject(Object d)", "testcase": false, "constructor": false}, {"identifier": "getStepMetadata", "parameters": "(Descriptor<?> d)", "modifiers": "private @CheckForNull", "return": "ExportedPipelineFunction", "signature": "ExportedPipelineFunction getStepMetadata(Descriptor<?> d)", "full_signature": "private @CheckForNull ExportedPipelineFunction getStepMetadata(Descriptor<?> d)", "class_method_signature": "PipelineMetadataService.getStepMetadata(Descriptor<?> d)", "testcase": false, "constructor": false}, {"identifier": "getStepMetadata", "parameters": "(StepDescriptor d)", "modifiers": "private @CheckForNull", "return": "ExportedPipelineStep", "signature": "ExportedPipelineStep getStepMetadata(StepDescriptor d)", "full_signature": "private @CheckForNull ExportedPipelineStep getStepMetadata(StepDescriptor d)", "class_method_signature": "PipelineMetadataService.getStepMetadata(StepDescriptor d)", "testcase": false, "constructor": false}], "file": "blueocean-pipeline-editor/src/main/java/io/blueocean/rest/pipeline/editor/PipelineMetadataService.java"}, "focal_method": {"identifier": "doPipelineStepMetadata", "parameters": "()", "modifiers": "@GET @TreeResponse public", "return": "ExportedPipelineFunction[]", "body": "@GET\n    @TreeResponse\n    public ExportedPipelineFunction[] doPipelineStepMetadata() {\n        List<ExportedPipelineFunction> pd = new ArrayList<>();\n        // POST to this with parameter names\n        // e.g. json:{\"time\": \"1\", \"unit\": \"NANOSECONDS\", \"stapler-class\": \"org.jenkinsci.plugins.workflow.steps.TimeoutStep\", \"$class\": \"org.jenkinsci.plugins.workflow.steps.TimeoutStep\"}\n\n        for (StepDescriptor d : StepDescriptor.all()) {\n            if (includeStep(d)) {\n                ExportedPipelineStep step = getStepMetadata(d);\n                if (step != null) {\n                    pd.add(step);\n                }\n            }\n        }\n\n        List<Descriptor<?>> metaStepDescriptors = new ArrayList<Descriptor<?>>();\n        populateMetaSteps(metaStepDescriptors, Builder.class);\n        populateMetaSteps(metaStepDescriptors, Publisher.class);\n        populateMetaSteps(metaStepDescriptors, BuildWrapper.class);\n\n        for (Descriptor<?> d : metaStepDescriptors) {\n            ExportedPipelineFunction metaStep = getStepMetadata(d);\n            if (metaStep != null) {\n                pd.add(metaStep);\n            }\n        }\n\n        return pd.toArray(new ExportedPipelineFunction[pd.size()]);\n    }", "signature": "ExportedPipelineFunction[] doPipelineStepMetadata()", "full_signature": "@GET @TreeResponse public ExportedPipelineFunction[] doPipelineStepMetadata()", "class_method_signature": "PipelineMetadataService.doPipelineStepMetadata()", "testcase": false, "constructor": false, "invocations": ["all", "includeStep", "getStepMetadata", "add", "populateMetaSteps", "populateMetaSteps", "populateMetaSteps", "getStepMetadata", "add", "toArray", "size"]}, "repository": {"repo_id": 50250915, "url": "https://github.com/jenkinsci/blueocean-plugin", "stars": 2605, "created": "1/23/2016 6:02:45 PM +00:00", "updates": "2020-01-25T17:58:46+00:00", "fork": "False", "license": "licensed"}}