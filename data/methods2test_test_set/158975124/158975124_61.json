{"test_class": {"identifier": "MetadataIndexNodeTest", "superclass": "", "interfaces": "", "fields": [], "file": "tsfile/src/test/java/org/apache/iotdb/tsfile/file/metadata/MetadataIndexNodeTest.java"}, "test_case": {"identifier": "testBinarySearchInChildren", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n  public void testBinarySearchInChildren() {\n    List<MetadataIndexEntry> list = new ArrayList<>();\n    list.add(new MetadataIndexEntry(\"s0\", -1L));\n    list.add(new MetadataIndexEntry(\"s5\", -1L));\n    list.add(new MetadataIndexEntry(\"s10\", -1L));\n    list.add(new MetadataIndexEntry(\"s15\", -1L));\n    list.add(new MetadataIndexEntry(\"s20\", -1L));\n\n    MetadataIndexNode metadataIndexNode = new MetadataIndexNode(list, -1L,\n        MetadataIndexNodeType.LEAF_MEASUREMENT);\n    Assert.assertEquals(0, metadataIndexNode.binarySearchInChildren(\"s0\"));\n    Assert.assertEquals(2, metadataIndexNode.binarySearchInChildren(\"s10\"));\n    Assert.assertEquals(2, metadataIndexNode.binarySearchInChildren(\"s13\"));\n    Assert.assertEquals(4, metadataIndexNode.binarySearchInChildren(\"s23\"));\n  }", "signature": "void testBinarySearchInChildren()", "full_signature": "@Test public void testBinarySearchInChildren()", "class_method_signature": "MetadataIndexNodeTest.testBinarySearchInChildren()", "testcase": true, "constructor": false, "invocations": ["add", "add", "add", "add", "add", "assertEquals", "binarySearchInChildren", "assertEquals", "binarySearchInChildren", "assertEquals", "binarySearchInChildren", "assertEquals", "binarySearchInChildren"]}, "focal_class": {"identifier": "MetadataIndexNode", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final int MAX_DEGREE_OF_INDEX_NODE = TSFileDescriptor.getInstance().getConfig()\n      .getMaxDegreeOfIndexNode();", "modifier": "private static final", "type": "int", "declarator": "MAX_DEGREE_OF_INDEX_NODE = TSFileDescriptor.getInstance().getConfig()\n      .getMaxDegreeOfIndexNode()", "var_name": "MAX_DEGREE_OF_INDEX_NODE"}, {"original_string": "private List<MetadataIndexEntry> children;", "modifier": "private", "type": "List<MetadataIndexEntry>", "declarator": "children", "var_name": "children"}, {"original_string": "private long endOffset;", "modifier": "private", "type": "long", "declarator": "endOffset", "var_name": "endOffset"}, {"original_string": "private MetadataIndexNodeType nodeType;", "modifier": "private", "type": "MetadataIndexNodeType", "declarator": "nodeType", "var_name": "nodeType"}], "methods": [{"identifier": "MetadataIndexNode", "parameters": "(MetadataIndexNodeType nodeType)", "modifiers": "public", "return": "", "signature": " MetadataIndexNode(MetadataIndexNodeType nodeType)", "full_signature": "public  MetadataIndexNode(MetadataIndexNodeType nodeType)", "class_method_signature": "MetadataIndexNode.MetadataIndexNode(MetadataIndexNodeType nodeType)", "testcase": false, "constructor": true}, {"identifier": "MetadataIndexNode", "parameters": "(List<MetadataIndexEntry> children, long endOffset,\n      MetadataIndexNodeType nodeType)", "modifiers": "public", "return": "", "signature": " MetadataIndexNode(List<MetadataIndexEntry> children, long endOffset,\n      MetadataIndexNodeType nodeType)", "full_signature": "public  MetadataIndexNode(List<MetadataIndexEntry> children, long endOffset,\n      MetadataIndexNodeType nodeType)", "class_method_signature": "MetadataIndexNode.MetadataIndexNode(List<MetadataIndexEntry> children, long endOffset,\n      MetadataIndexNodeType nodeType)", "testcase": false, "constructor": true}, {"identifier": "getChildren", "parameters": "()", "modifiers": "public", "return": "List<MetadataIndexEntry>", "signature": "List<MetadataIndexEntry> getChildren()", "full_signature": "public List<MetadataIndexEntry> getChildren()", "class_method_signature": "MetadataIndexNode.getChildren()", "testcase": false, "constructor": false}, {"identifier": "getEndOffset", "parameters": "()", "modifiers": "public", "return": "long", "signature": "long getEndOffset()", "full_signature": "public long getEndOffset()", "class_method_signature": "MetadataIndexNode.getEndOffset()", "testcase": false, "constructor": false}, {"identifier": "setEndOffset", "parameters": "(long endOffset)", "modifiers": "public", "return": "void", "signature": "void setEndOffset(long endOffset)", "full_signature": "public void setEndOffset(long endOffset)", "class_method_signature": "MetadataIndexNode.setEndOffset(long endOffset)", "testcase": false, "constructor": false}, {"identifier": "getNodeType", "parameters": "()", "modifiers": "public", "return": "MetadataIndexNodeType", "signature": "MetadataIndexNodeType getNodeType()", "full_signature": "public MetadataIndexNodeType getNodeType()", "class_method_signature": "MetadataIndexNode.getNodeType()", "testcase": false, "constructor": false}, {"identifier": "addEntry", "parameters": "(MetadataIndexEntry metadataIndexEntry)", "modifiers": "public", "return": "void", "signature": "void addEntry(MetadataIndexEntry metadataIndexEntry)", "full_signature": "public void addEntry(MetadataIndexEntry metadataIndexEntry)", "class_method_signature": "MetadataIndexNode.addEntry(MetadataIndexEntry metadataIndexEntry)", "testcase": false, "constructor": false}, {"identifier": "isFull", "parameters": "()", "modifiers": "", "return": "boolean", "signature": "boolean isFull()", "full_signature": " boolean isFull()", "class_method_signature": "MetadataIndexNode.isFull()", "testcase": false, "constructor": false}, {"identifier": "peek", "parameters": "()", "modifiers": "", "return": "MetadataIndexEntry", "signature": "MetadataIndexEntry peek()", "full_signature": " MetadataIndexEntry peek()", "class_method_signature": "MetadataIndexNode.peek()", "testcase": false, "constructor": false}, {"identifier": "serializeTo", "parameters": "(OutputStream outputStream)", "modifiers": "public", "return": "int", "signature": "int serializeTo(OutputStream outputStream)", "full_signature": "public int serializeTo(OutputStream outputStream)", "class_method_signature": "MetadataIndexNode.serializeTo(OutputStream outputStream)", "testcase": false, "constructor": false}, {"identifier": "deserializeFrom", "parameters": "(ByteBuffer buffer)", "modifiers": "public static", "return": "MetadataIndexNode", "signature": "MetadataIndexNode deserializeFrom(ByteBuffer buffer)", "full_signature": "public static MetadataIndexNode deserializeFrom(ByteBuffer buffer)", "class_method_signature": "MetadataIndexNode.deserializeFrom(ByteBuffer buffer)", "testcase": false, "constructor": false}, {"identifier": "getChildIndexEntry", "parameters": "(String key)", "modifiers": "public", "return": "Pair<MetadataIndexEntry, Long>", "signature": "Pair<MetadataIndexEntry, Long> getChildIndexEntry(String key)", "full_signature": "public Pair<MetadataIndexEntry, Long> getChildIndexEntry(String key)", "class_method_signature": "MetadataIndexNode.getChildIndexEntry(String key)", "testcase": false, "constructor": false}, {"identifier": "binarySearchInChildren", "parameters": "(String key)", "modifiers": "", "return": "int", "signature": "int binarySearchInChildren(String key)", "full_signature": " int binarySearchInChildren(String key)", "class_method_signature": "MetadataIndexNode.binarySearchInChildren(String key)", "testcase": false, "constructor": false}], "file": "tsfile/src/main/java/org/apache/iotdb/tsfile/file/metadata/MetadataIndexNode.java"}, "focal_method": {"identifier": "binarySearchInChildren", "parameters": "(String key)", "modifiers": "", "return": "int", "body": "int binarySearchInChildren(String key) {\n    int low = 0;\n    int high = children.size() - 1;\n\n    while (low <= high) {\n      int mid = (low + high) >>> 1;\n      MetadataIndexEntry midVal = children.get(mid);\n      int cmp = midVal.getName().compareTo(key);\n\n      if (cmp < 0) {\n        low = mid + 1;\n      } else if (cmp > 0) {\n        high = mid - 1;\n      } else {\n        return mid; // key found\n      }\n    }\n    return low == 0 ? low : low - 1;  // key not found\n  }", "signature": "int binarySearchInChildren(String key)", "full_signature": " int binarySearchInChildren(String key)", "class_method_signature": "MetadataIndexNode.binarySearchInChildren(String key)", "testcase": false, "constructor": false, "invocations": ["size", "get", "compareTo", "getName"]}, "repository": {"repo_id": 158975124, "url": "https://github.com/apache/incubator-iotdb", "stars": 449, "created": "11/24/2018 9:29:17 PM +00:00", "updates": "2020-01-21T08:10:15+00:00", "fork": "False", "license": "licensed"}}