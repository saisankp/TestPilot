{"test_class": {"identifier": "GetSortBsonVisitorTest", "superclass": "", "interfaces": "", "fields": [], "file": "services/thingsearch/persistence/src/test/java/org/eclipse/ditto/services/thingsearch/persistence/read/expression/visitors/GetSortBsonVisitorTest.java"}, "test_case": {"identifier": "handlesNullValues", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void handlesNullValues() {\n        final SortFieldExpression expression = new AttributeExpressionImpl(\"a/b/c/d/e/f/g\");\n        final SortOption sortOption = new SortOption(expression, SortDirection.ASC);\n\n        GetSortBsonVisitor.sortValuesAsArray(new Document(), Collections.singletonList(sortOption));\n    }", "signature": "void handlesNullValues()", "full_signature": "@Test public void handlesNullValues()", "class_method_signature": "GetSortBsonVisitorTest.handlesNullValues()", "testcase": true, "constructor": false, "invocations": ["sortValuesAsArray", "singletonList"]}, "focal_class": {"identifier": "GetSortBsonVisitor", "superclass": "", "interfaces": "implements SortFieldExpressionVisitor<String>", "fields": [], "methods": [{"identifier": "GetSortBsonVisitor", "parameters": "()", "modifiers": "private", "return": "", "signature": " GetSortBsonVisitor()", "full_signature": "private  GetSortBsonVisitor()", "class_method_signature": "GetSortBsonVisitor.GetSortBsonVisitor()", "testcase": false, "constructor": true}, {"identifier": "apply", "parameters": "(final SortFieldExpression expression, final SortDirection sortDirection)", "modifiers": "public static", "return": "List<Bson>", "signature": "List<Bson> apply(final SortFieldExpression expression, final SortDirection sortDirection)", "full_signature": "public static List<Bson> apply(final SortFieldExpression expression, final SortDirection sortDirection)", "class_method_signature": "GetSortBsonVisitor.apply(final SortFieldExpression expression, final SortDirection sortDirection)", "testcase": false, "constructor": false}, {"identifier": "projections", "parameters": "(final List<SortOption> sortOptions)", "modifiers": "public static", "return": "Document", "signature": "Document projections(final List<SortOption> sortOptions)", "full_signature": "public static Document projections(final List<SortOption> sortOptions)", "class_method_signature": "GetSortBsonVisitor.projections(final List<SortOption> sortOptions)", "testcase": false, "constructor": false}, {"identifier": "sortValuesAsArray", "parameters": "(final Document document, final List<SortOption> sortOptions)", "modifiers": "public static", "return": "JsonArray", "signature": "JsonArray sortValuesAsArray(final Document document, final List<SortOption> sortOptions)", "full_signature": "public static JsonArray sortValuesAsArray(final Document document, final List<SortOption> sortOptions)", "class_method_signature": "GetSortBsonVisitor.sortValuesAsArray(final Document document, final List<SortOption> sortOptions)", "testcase": false, "constructor": false}, {"identifier": "path", "parameters": "(final SortFieldExpression expression)", "modifiers": "public static", "return": "String", "signature": "String path(final SortFieldExpression expression)", "full_signature": "public static String path(final SortFieldExpression expression)", "class_method_signature": "GetSortBsonVisitor.path(final SortFieldExpression expression)", "testcase": false, "constructor": false}, {"identifier": "visitAttribute", "parameters": "(final String key)", "modifiers": "@Override public", "return": "String", "signature": "String visitAttribute(final String key)", "full_signature": "@Override public String visitAttribute(final String key)", "class_method_signature": "GetSortBsonVisitor.visitAttribute(final String key)", "testcase": false, "constructor": false}, {"identifier": "visitFeatureIdProperty", "parameters": "(final String featureId, final String property)", "modifiers": "@Override public", "return": "String", "signature": "String visitFeatureIdProperty(final String featureId, final String property)", "full_signature": "@Override public String visitFeatureIdProperty(final String featureId, final String property)", "class_method_signature": "GetSortBsonVisitor.visitFeatureIdProperty(final String featureId, final String property)", "testcase": false, "constructor": false}, {"identifier": "visitSimple", "parameters": "(final String fieldName)", "modifiers": "@Override public", "return": "String", "signature": "String visitSimple(final String fieldName)", "full_signature": "@Override public String visitSimple(final String fieldName)", "class_method_signature": "GetSortBsonVisitor.visitSimple(final String fieldName)", "testcase": false, "constructor": false}, {"identifier": "getSortBson", "parameters": "(final SortDirection sortDirection, final String sortKey)", "modifiers": "private static", "return": "List<Bson>", "signature": "List<Bson> getSortBson(final SortDirection sortDirection, final String sortKey)", "full_signature": "private static List<Bson> getSortBson(final SortDirection sortDirection, final String sortKey)", "class_method_signature": "GetSortBsonVisitor.getSortBson(final SortDirection sortDirection, final String sortKey)", "testcase": false, "constructor": false}, {"identifier": "seekToPath", "parameters": "(final Document document)", "modifiers": "private static", "return": "Function<String, Object>", "signature": "Function<String, Object> seekToPath(final Document document)", "full_signature": "private static Function<String, Object> seekToPath(final Document document)", "class_method_signature": "GetSortBsonVisitor.seekToPath(final Document document)", "testcase": false, "constructor": false}, {"identifier": "seekToPathImpl", "parameters": "(final Document document, final String[] segments, final int i)", "modifiers": "private static", "return": "Object", "signature": "Object seekToPathImpl(final Document document, final String[] segments, final int i)", "full_signature": "private static Object seekToPathImpl(final Document document, final String[] segments, final int i)", "class_method_signature": "GetSortBsonVisitor.seekToPathImpl(final Document document, final String[] segments, final int i)", "testcase": false, "constructor": false}], "file": "services/thingsearch/persistence/src/main/java/org/eclipse/ditto/services/thingsearch/persistence/read/expression/visitors/GetSortBsonVisitor.java"}, "focal_method": {"identifier": "sortValuesAsArray", "parameters": "(final Document document, final List<SortOption> sortOptions)", "modifiers": "public static", "return": "JsonArray", "body": "public static JsonArray sortValuesAsArray(final Document document, final List<SortOption> sortOptions) {\n        final JsonArrayBuilder builder = JsonFactory.newArrayBuilder();\n        sortOptions.stream()\n                .map(SortOption::getSortExpression)\n                .map(GetSortBsonVisitor::path)\n                .map(seekToPath(document))\n                .forEach(value -> builder.add(JsonValue.of(value)));\n        return builder.build();\n    }", "signature": "JsonArray sortValuesAsArray(final Document document, final List<SortOption> sortOptions)", "full_signature": "public static JsonArray sortValuesAsArray(final Document document, final List<SortOption> sortOptions)", "class_method_signature": "GetSortBsonVisitor.sortValuesAsArray(final Document document, final List<SortOption> sortOptions)", "testcase": false, "constructor": false, "invocations": ["newArrayBuilder", "forEach", "map", "map", "map", "stream", "seekToPath", "add", "of", "build"]}, "repository": {"repo_id": 87849739, "url": "https://github.com/eclipse/ditto", "stars": 139, "created": "4/10/2017 7:29:57 PM +00:00", "updates": "2020-01-27T14:02:39+00:00", "fork": "False", "license": "licensed"}}