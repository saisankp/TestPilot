{"test_class": {"identifier": "XenonConfigurationTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static VerificationHost HOST;", "modifier": "private static", "type": "VerificationHost", "declarator": "HOST", "var_name": "HOST"}, {"original_string": "private String foundProperty = \"myPropName\";", "modifier": "private", "type": "String", "declarator": "foundProperty = \"myPropName\"", "var_name": "foundProperty"}, {"original_string": "private String undefined = \"undefinedPropName\";", "modifier": "private", "type": "String", "declarator": "undefined = \"undefinedPropName\"", "var_name": "undefined"}, {"original_string": "private XenonConfiguration config;", "modifier": "private", "type": "XenonConfiguration", "declarator": "config", "var_name": "config"}], "file": "xenon-common/src/test/java/com/vmware/xenon/common/config/XenonConfigurationTest.java"}, "test_case": {"identifier": "integerSuffix", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void integerSuffix() throws Exception {\n        prepareConfig(\"20K\");\n        assertEquals(20 * 1024, this.config.getInteger(XenonConfigurationTest.class, this.foundProperty, -1));\n        prepareConfig(\"20k\");\n        assertEquals(20 * 1024, this.config.getInteger(XenonConfigurationTest.class, this.foundProperty, -1));\n\n        prepareConfig(\"1M\");\n        assertEquals(1 * 1024 * 1024, this.config.getInteger(XenonConfigurationTest.class, this.foundProperty, -1));\n        prepareConfig(\"1m\");\n        assertEquals(1 * 1024 * 1024, this.config.getInteger(XenonConfigurationTest.class, this.foundProperty, -1));\n\n        prepareConfig(\"1G\");\n        assertEquals(1 * 1024 * 1024 * 1024,\n                this.config.getInteger(XenonConfigurationTest.class, this.foundProperty, -1));\n        prepareConfig(\"1g\");\n        assertEquals(1 * 1024 * 1024 * 1024,\n                this.config.getInteger(XenonConfigurationTest.class, this.foundProperty, -1));\n\n        // suffix but not a number\n        prepareConfig(\"hundredK\");\n        assertEquals(-1, this.config.getInteger(XenonConfigurationTest.class, this.foundProperty, -1));\n    }", "signature": "void integerSuffix()", "full_signature": "@Test public void integerSuffix()", "class_method_signature": "XenonConfigurationTest.integerSuffix()", "testcase": true, "constructor": false, "invocations": ["prepareConfig", "assertEquals", "getInteger", "prepareConfig", "assertEquals", "getInteger", "prepareConfig", "assertEquals", "getInteger", "prepareConfig", "assertEquals", "getInteger", "prepareConfig", "assertEquals", "getInteger", "prepareConfig", "assertEquals", "getInteger", "prepareConfig", "assertEquals", "getInteger"]}, "focal_class": {"identifier": "XenonConfiguration", "superclass": "", "interfaces": "", "fields": [{"original_string": "private final ConfigurationSource source;", "modifier": "private final", "type": "ConfigurationSource", "declarator": "source", "var_name": "source"}, {"original_string": "static final Logger logger = Logger.getLogger(XenonConfiguration.class.getName());", "modifier": "static final", "type": "Logger", "declarator": "logger = Logger.getLogger(XenonConfiguration.class.getName())", "var_name": "logger"}, {"original_string": "private static final XenonConfiguration INSTANCE = new XenonConfiguration(new ConfigurationSource());", "modifier": "private static final", "type": "XenonConfiguration", "declarator": "INSTANCE = new XenonConfiguration(new ConfigurationSource())", "var_name": "INSTANCE"}], "methods": [{"identifier": "XenonConfiguration", "parameters": "(ConfigurationSource source)", "modifiers": "", "return": "", "signature": " XenonConfiguration(ConfigurationSource source)", "full_signature": "  XenonConfiguration(ConfigurationSource source)", "class_method_signature": "XenonConfiguration.XenonConfiguration(ConfigurationSource source)", "testcase": false, "constructor": true}, {"identifier": "decimal", "parameters": "(Class<?> subsystem, String property, double defaultValue)", "modifiers": "public static", "return": "double", "signature": "double decimal(Class<?> subsystem, String property, double defaultValue)", "full_signature": "public static double decimal(Class<?> subsystem, String property, double defaultValue)", "class_method_signature": "XenonConfiguration.decimal(Class<?> subsystem, String property, double defaultValue)", "testcase": false, "constructor": false}, {"identifier": "number", "parameters": "(Class<?> subsystem, String property, long defaultValue)", "modifiers": "public static", "return": "long", "signature": "long number(Class<?> subsystem, String property, long defaultValue)", "full_signature": "public static long number(Class<?> subsystem, String property, long defaultValue)", "class_method_signature": "XenonConfiguration.number(Class<?> subsystem, String property, long defaultValue)", "testcase": false, "constructor": false}, {"identifier": "integer", "parameters": "(Class<?> subsystem, String property, long defaultValue)", "modifiers": "public static", "return": "int", "signature": "int integer(Class<?> subsystem, String property, long defaultValue)", "full_signature": "public static int integer(Class<?> subsystem, String property, long defaultValue)", "class_method_signature": "XenonConfiguration.integer(Class<?> subsystem, String property, long defaultValue)", "testcase": false, "constructor": false}, {"identifier": "duration", "parameters": "(Class<?> subsystem, String property, Duration defaultValue)", "modifiers": "public static", "return": "long", "signature": "long duration(Class<?> subsystem, String property, Duration defaultValue)", "full_signature": "public static long duration(Class<?> subsystem, String property, Duration defaultValue)", "class_method_signature": "XenonConfiguration.duration(Class<?> subsystem, String property, Duration defaultValue)", "testcase": false, "constructor": false}, {"identifier": "duration", "parameters": "(Class<?> subsystem, String property, TimeUnit unit, long duration)", "modifiers": "public static", "return": "long", "signature": "long duration(Class<?> subsystem, String property, TimeUnit unit, long duration)", "full_signature": "public static long duration(Class<?> subsystem, String property, TimeUnit unit, long duration)", "class_method_signature": "XenonConfiguration.duration(Class<?> subsystem, String property, TimeUnit unit, long duration)", "testcase": false, "constructor": false}, {"identifier": "string", "parameters": "(Class<?> subsystem, String property, String defaultValue)", "modifiers": "public static", "return": "String", "signature": "String string(Class<?> subsystem, String property, String defaultValue)", "full_signature": "public static String string(Class<?> subsystem, String property, String defaultValue)", "class_method_signature": "XenonConfiguration.string(Class<?> subsystem, String property, String defaultValue)", "testcase": false, "constructor": false}, {"identifier": "choice", "parameters": "(Class<?> subsystem, String property, Class<T> enumType,\n            T defaultValue)", "modifiers": "public static", "return": "T", "signature": "T choice(Class<?> subsystem, String property, Class<T> enumType,\n            T defaultValue)", "full_signature": "public static T choice(Class<?> subsystem, String property, Class<T> enumType,\n            T defaultValue)", "class_method_signature": "XenonConfiguration.choice(Class<?> subsystem, String property, Class<T> enumType,\n            T defaultValue)", "testcase": false, "constructor": false}, {"identifier": "secret", "parameters": "(Class<?> subsystem, String property, String defaultValue)", "modifiers": "public static", "return": "String", "signature": "String secret(Class<?> subsystem, String property, String defaultValue)", "full_signature": "public static String secret(Class<?> subsystem, String property, String defaultValue)", "class_method_signature": "XenonConfiguration.secret(Class<?> subsystem, String property, String defaultValue)", "testcase": false, "constructor": false}, {"identifier": "bool", "parameters": "(String subsystem, String property, boolean defaultValue)", "modifiers": "public static", "return": "boolean", "signature": "boolean bool(String subsystem, String property, boolean defaultValue)", "full_signature": "public static boolean bool(String subsystem, String property, boolean defaultValue)", "class_method_signature": "XenonConfiguration.bool(String subsystem, String property, boolean defaultValue)", "testcase": false, "constructor": false}, {"identifier": "bool", "parameters": "(Class<?> subsystem, String property, boolean defaultValue)", "modifiers": "public static", "return": "boolean", "signature": "boolean bool(Class<?> subsystem, String property, boolean defaultValue)", "full_signature": "public static boolean bool(Class<?> subsystem, String property, boolean defaultValue)", "class_method_signature": "XenonConfiguration.bool(Class<?> subsystem, String property, boolean defaultValue)", "testcase": false, "constructor": false}, {"identifier": "getString", "parameters": "(Class<?> subsystem, String property, String defaultValue)", "modifiers": "", "return": "String", "signature": "String getString(Class<?> subsystem, String property, String defaultValue)", "full_signature": " String getString(Class<?> subsystem, String property, String defaultValue)", "class_method_signature": "XenonConfiguration.getString(Class<?> subsystem, String property, String defaultValue)", "testcase": false, "constructor": false}, {"identifier": "getChoice", "parameters": "(Class<?> subsystem, String property, Class<T> enumType, T defaultValue)", "modifiers": "", "return": "T", "signature": "T getChoice(Class<?> subsystem, String property, Class<T> enumType, T defaultValue)", "full_signature": " T getChoice(Class<?> subsystem, String property, Class<T> enumType, T defaultValue)", "class_method_signature": "XenonConfiguration.getChoice(Class<?> subsystem, String property, Class<T> enumType, T defaultValue)", "testcase": false, "constructor": false}, {"identifier": "getBool", "parameters": "(String subsystem, String property, boolean defaultValue)", "modifiers": "", "return": "boolean", "signature": "boolean getBool(String subsystem, String property, boolean defaultValue)", "full_signature": " boolean getBool(String subsystem, String property, boolean defaultValue)", "class_method_signature": "XenonConfiguration.getBool(String subsystem, String property, boolean defaultValue)", "testcase": false, "constructor": false}, {"identifier": "getBool", "parameters": "(Class<?> subsystem, String property, boolean defaultValue)", "modifiers": "", "return": "boolean", "signature": "boolean getBool(Class<?> subsystem, String property, boolean defaultValue)", "full_signature": " boolean getBool(Class<?> subsystem, String property, boolean defaultValue)", "class_method_signature": "XenonConfiguration.getBool(Class<?> subsystem, String property, boolean defaultValue)", "testcase": false, "constructor": false}, {"identifier": "getSecret", "parameters": "(Class<?> subsystem, String property, String defaultValue)", "modifiers": "", "return": "String", "signature": "String getSecret(Class<?> subsystem, String property, String defaultValue)", "full_signature": " String getSecret(Class<?> subsystem, String property, String defaultValue)", "class_method_signature": "XenonConfiguration.getSecret(Class<?> subsystem, String property, String defaultValue)", "testcase": false, "constructor": false}, {"identifier": "getDuration", "parameters": "(Class<?> subsystem, String property, Duration defaultValue)", "modifiers": "", "return": "long", "signature": "long getDuration(Class<?> subsystem, String property, Duration defaultValue)", "full_signature": " long getDuration(Class<?> subsystem, String property, Duration defaultValue)", "class_method_signature": "XenonConfiguration.getDuration(Class<?> subsystem, String property, Duration defaultValue)", "testcase": false, "constructor": false}, {"identifier": "getDecimal", "parameters": "(Class<?> subsystem, String property, double defaultValue)", "modifiers": "", "return": "double", "signature": "double getDecimal(Class<?> subsystem, String property, double defaultValue)", "full_signature": " double getDecimal(Class<?> subsystem, String property, double defaultValue)", "class_method_signature": "XenonConfiguration.getDecimal(Class<?> subsystem, String property, double defaultValue)", "testcase": false, "constructor": false}, {"identifier": "getInteger", "parameters": "(Class<?> subsystem, String property, long defaultValue)", "modifiers": "", "return": "long", "signature": "long getInteger(Class<?> subsystem, String property, long defaultValue)", "full_signature": " long getInteger(Class<?> subsystem, String property, long defaultValue)", "class_method_signature": "XenonConfiguration.getInteger(Class<?> subsystem, String property, long defaultValue)", "testcase": false, "constructor": false}, {"identifier": "lastToUpper", "parameters": "(String v)", "modifiers": "private", "return": "char", "signature": "char lastToUpper(String v)", "full_signature": "private char lastToUpper(String v)", "class_method_signature": "XenonConfiguration.lastToUpper(String v)", "testcase": false, "constructor": false}, {"identifier": "logUsingDefaultBecauseUnset", "parameters": "(Object subsystem, String property, Object defaultValue,\n            boolean verboseLogValue)", "modifiers": "private", "return": "void", "signature": "void logUsingDefaultBecauseUnset(Object subsystem, String property, Object defaultValue,\n            boolean verboseLogValue)", "full_signature": "private void logUsingDefaultBecauseUnset(Object subsystem, String property, Object defaultValue,\n            boolean verboseLogValue)", "class_method_signature": "XenonConfiguration.logUsingDefaultBecauseUnset(Object subsystem, String property, Object defaultValue,\n            boolean verboseLogValue)", "testcase": false, "constructor": false}, {"identifier": "logUsingDefaultBecauseBadValue", "parameters": "(Object subsystem, String property, Object defaultValue,\n            String badValue)", "modifiers": "private", "return": "void", "signature": "void logUsingDefaultBecauseBadValue(Object subsystem, String property, Object defaultValue,\n            String badValue)", "full_signature": "private void logUsingDefaultBecauseBadValue(Object subsystem, String property, Object defaultValue,\n            String badValue)", "class_method_signature": "XenonConfiguration.logUsingDefaultBecauseBadValue(Object subsystem, String property, Object defaultValue,\n            String badValue)", "testcase": false, "constructor": false}, {"identifier": "stripSuffix", "parameters": "(String v, int suffixLen)", "modifiers": "private", "return": "String", "signature": "String stripSuffix(String v, int suffixLen)", "full_signature": "private String stripSuffix(String v, int suffixLen)", "class_method_signature": "XenonConfiguration.stripSuffix(String v, int suffixLen)", "testcase": false, "constructor": false}, {"identifier": "parseOr", "parameters": "(String v)", "modifiers": "private", "return": "Long", "signature": "Long parseOr(String v)", "full_signature": "private Long parseOr(String v)", "class_method_signature": "XenonConfiguration.parseOr(String v)", "testcase": false, "constructor": false}], "file": "xenon-common/src/main/java/com/vmware/xenon/common/config/XenonConfiguration.java"}, "focal_method": {"identifier": "getInteger", "parameters": "(Class<?> subsystem, String property, long defaultValue)", "modifiers": "", "return": "long", "body": "long getInteger(Class<?> subsystem, String property, long defaultValue) {\n        String v = this.source.get(subsystem, property, true);\n\n        if (v == null) {\n            logUsingDefaultBecauseUnset(subsystem, property, defaultValue, true);\n            return defaultValue;\n        }\n\n        try {\n            return Long.parseLong(v);\n        } catch (NumberFormatException e) {\n        }\n\n        if (lastToUpper(v) == 'K') {\n            Long res = parseOr(stripSuffix(v, 1));\n            if (res == null) {\n                logUsingDefaultBecauseBadValue(subsystem, property, defaultValue, v);\n                return defaultValue;\n            } else {\n                return 1024 * res;\n            }\n        }\n        if (lastToUpper(v) == 'M') {\n            Long res = parseOr(stripSuffix(v, 1));\n            if (res == null) {\n                logUsingDefaultBecauseBadValue(subsystem, property, defaultValue, v);\n                return defaultValue;\n            } else {\n                return 1024 * 1024 * res;\n            }\n        }\n        if (lastToUpper(v) == 'G') {\n            Long res = parseOr(stripSuffix(v, 1));\n            if (res == null) {\n                logUsingDefaultBecauseBadValue(subsystem, property, defaultValue, v);\n                return defaultValue;\n            } else {\n                return 1024 * 1024 * 1024 * res;\n            }\n        }\n\n        logUsingDefaultBecauseBadValue(subsystem, property, defaultValue, v);\n        return defaultValue;\n    }", "signature": "long getInteger(Class<?> subsystem, String property, long defaultValue)", "full_signature": " long getInteger(Class<?> subsystem, String property, long defaultValue)", "class_method_signature": "XenonConfiguration.getInteger(Class<?> subsystem, String property, long defaultValue)", "testcase": false, "constructor": false, "invocations": ["get", "logUsingDefaultBecauseUnset", "parseLong", "lastToUpper", "parseOr", "stripSuffix", "logUsingDefaultBecauseBadValue", "lastToUpper", "parseOr", "stripSuffix", "logUsingDefaultBecauseBadValue", "lastToUpper", "parseOr", "stripSuffix", "logUsingDefaultBecauseBadValue", "logUsingDefaultBecauseBadValue"]}, "repository": {"repo_id": 45276846, "url": "https://github.com/vmware-archive/xenon", "language": "Java", "is_fork": false, "fork_count": 97, "stargazer_count": 226, "size": 52010, "license": "licensed"}}