{"test_class": {"identifier": "JBossDetectorTest", "superclass": "extends BaseDetectorTest", "interfaces": "", "fields": [{"original_string": "private JBossDetector       detector;", "modifier": "private", "type": "JBossDetector", "declarator": "detector", "var_name": "detector"}, {"original_string": "private MBeanServer         server;", "modifier": "private", "type": "MBeanServer", "declarator": "server", "var_name": "server"}, {"original_string": "private MBeanServerExecutor servers;", "modifier": "private", "type": "MBeanServerExecutor", "declarator": "servers", "var_name": "servers"}], "file": "agent/core/src/test/java/org/jolokia/detector/JBossDetectorTest.java"}, "test_case": {"identifier": "verifyJvmAgentStartup", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void verifyJvmAgentStartup() throws MalformedURLException {\n        Instrumentation inst = createMock(Instrumentation.class);\n        expect(inst.getAllLoadedClasses()).andReturn(new Class[] {}).times(3);\n        expect(inst.getAllLoadedClasses()).andReturn(new Class[] {JBossDetectorTest.class}).atLeastOnce();\n        ClassLoader cl = createMock(ClassLoader.class);\n        expect(cl.getResource(\"org/jboss/modules/Main.class\")).andReturn(new URL(\"http\", \"dummy\", \"\")).anyTimes();\n        String prevPkgValue = System.setProperty(\"jboss.modules.system.pkgs\", \"blah\");\n        String prevLogValue = System.setProperty(\"java.util.logging.manager\", JBossDetectorTest.class.getName());\n        replay(inst,cl);\n\n        try {\n            detector.jvmAgentStartup(inst, cl);\n        } finally {\n            resetSysProp(prevLogValue, \"java.util.logging.manager\");\n            resetSysProp(prevPkgValue, \"jboss.modules.system.pkgs\");\n        }\n        verify(inst);\n    }", "signature": "void verifyJvmAgentStartup()", "full_signature": "@Test public void verifyJvmAgentStartup()", "class_method_signature": "JBossDetectorTest.verifyJvmAgentStartup()", "testcase": true, "constructor": false, "invocations": ["createMock", "times", "andReturn", "expect", "getAllLoadedClasses", "atLeastOnce", "andReturn", "expect", "getAllLoadedClasses", "createMock", "anyTimes", "andReturn", "expect", "getResource", "setProperty", "setProperty", "getName", "replay", "jvmAgentStartup", "resetSysProp", "resetSysProp", "verify"]}, "focal_class": {"identifier": "JBossDetector", "superclass": "extends AbstractServerDetector", "interfaces": "", "fields": [{"original_string": "public static final String JBOSS_AS_MANAGEMENT_ROOT_SERVER = \"jboss.as:management-root=server\";", "modifier": "public static final", "type": "String", "declarator": "JBOSS_AS_MANAGEMENT_ROOT_SERVER = \"jboss.as:management-root=server\"", "var_name": "JBOSS_AS_MANAGEMENT_ROOT_SERVER"}, {"original_string": "public static final int LOGGING_DETECT_TIMEOUT = 5 * 60 * 1000;", "modifier": "public static final", "type": "int", "declarator": "LOGGING_DETECT_TIMEOUT = 5 * 60 * 1000", "var_name": "LOGGING_DETECT_TIMEOUT"}, {"original_string": "public static final int LOGGING_DETECT_INTERVAL = 200;", "modifier": "public static final", "type": "int", "declarator": "LOGGING_DETECT_INTERVAL = 200", "var_name": "LOGGING_DETECT_INTERVAL"}], "methods": [{"identifier": "detect", "parameters": "(MBeanServerExecutor pMBeanServerExecutor)", "modifiers": "public", "return": "ServerHandle", "signature": "ServerHandle detect(MBeanServerExecutor pMBeanServerExecutor)", "full_signature": "public ServerHandle detect(MBeanServerExecutor pMBeanServerExecutor)", "class_method_signature": "JBossDetector.detect(MBeanServerExecutor pMBeanServerExecutor)", "testcase": false, "constructor": false}, {"identifier": "checkForWildflySwarm", "parameters": "()", "modifiers": "private", "return": "ServerHandle", "signature": "ServerHandle checkForWildflySwarm()", "full_signature": "private ServerHandle checkForWildflySwarm()", "class_method_signature": "JBossDetector.checkForWildflySwarm()", "testcase": false, "constructor": false}, {"identifier": "jvmAgentStartup", "parameters": "(Instrumentation instrumentation)", "modifiers": "@Override public", "return": "void", "signature": "void jvmAgentStartup(Instrumentation instrumentation)", "full_signature": "@Override public void jvmAgentStartup(Instrumentation instrumentation)", "class_method_signature": "JBossDetector.jvmAgentStartup(Instrumentation instrumentation)", "testcase": false, "constructor": false}, {"identifier": "jvmAgentStartup", "parameters": "(Instrumentation instrumentation, ClassLoader classLoader)", "modifiers": "", "return": "void", "signature": "void jvmAgentStartup(Instrumentation instrumentation, ClassLoader classLoader)", "full_signature": " void jvmAgentStartup(Instrumentation instrumentation, ClassLoader classLoader)", "class_method_signature": "JBossDetector.jvmAgentStartup(Instrumentation instrumentation, ClassLoader classLoader)", "testcase": false, "constructor": false}, {"identifier": "isJBossModulesBasedContainer", "parameters": "(ClassLoader classLoader)", "modifiers": "protected", "return": "boolean", "signature": "boolean isJBossModulesBasedContainer(ClassLoader classLoader)", "full_signature": "protected boolean isJBossModulesBasedContainer(ClassLoader classLoader)", "class_method_signature": "JBossDetector.isJBossModulesBasedContainer(ClassLoader classLoader)", "testcase": false, "constructor": false}, {"identifier": "hasWildflyProperties", "parameters": "()", "modifiers": "private", "return": "boolean", "signature": "boolean hasWildflyProperties()", "full_signature": "private boolean hasWildflyProperties()", "class_method_signature": "JBossDetector.hasWildflyProperties()", "testcase": false, "constructor": false}, {"identifier": "awaitServerInitializationForJBossModulesBasedContainer", "parameters": "(Instrumentation instrumentation)", "modifiers": "private", "return": "void", "signature": "void awaitServerInitializationForJBossModulesBasedContainer(Instrumentation instrumentation)", "full_signature": "private void awaitServerInitializationForJBossModulesBasedContainer(Instrumentation instrumentation)", "class_method_signature": "JBossDetector.awaitServerInitializationForJBossModulesBasedContainer(Instrumentation instrumentation)", "testcase": false, "constructor": false}, {"identifier": "checkFromJSR77", "parameters": "(MBeanServerExecutor pMBeanServerExecutor)", "modifiers": "private", "return": "ServerHandle", "signature": "ServerHandle checkFromJSR77(MBeanServerExecutor pMBeanServerExecutor)", "full_signature": "private ServerHandle checkFromJSR77(MBeanServerExecutor pMBeanServerExecutor)", "class_method_signature": "JBossDetector.checkFromJSR77(MBeanServerExecutor pMBeanServerExecutor)", "testcase": false, "constructor": false}, {"identifier": "checkFor5viaJMX", "parameters": "(MBeanServerExecutor pMBeanServerExecutor)", "modifiers": "private", "return": "ServerHandle", "signature": "ServerHandle checkFor5viaJMX(MBeanServerExecutor pMBeanServerExecutor)", "full_signature": "private ServerHandle checkFor5viaJMX(MBeanServerExecutor pMBeanServerExecutor)", "class_method_signature": "JBossDetector.checkFor5viaJMX(MBeanServerExecutor pMBeanServerExecutor)", "testcase": false, "constructor": false}, {"identifier": "checkForManagementRootServerViaJMX", "parameters": "(MBeanServerExecutor pMBeanServerExecutor)", "modifiers": "private", "return": "ServerHandle", "signature": "ServerHandle checkForManagementRootServerViaJMX(MBeanServerExecutor pMBeanServerExecutor)", "full_signature": "private ServerHandle checkForManagementRootServerViaJMX(MBeanServerExecutor pMBeanServerExecutor)", "class_method_signature": "JBossDetector.checkForManagementRootServerViaJMX(MBeanServerExecutor pMBeanServerExecutor)", "testcase": false, "constructor": false}, {"identifier": "fallbackForVersion7Check", "parameters": "(MBeanServerExecutor pMBeanServerExecutor)", "modifiers": "private", "return": "ServerHandle", "signature": "ServerHandle fallbackForVersion7Check(MBeanServerExecutor pMBeanServerExecutor)", "full_signature": "private ServerHandle fallbackForVersion7Check(MBeanServerExecutor pMBeanServerExecutor)", "class_method_signature": "JBossDetector.fallbackForVersion7Check(MBeanServerExecutor pMBeanServerExecutor)", "testcase": false, "constructor": false}, {"identifier": "addMBeanServers", "parameters": "(Set<MBeanServerConnection> servers)", "modifiers": "@Override /** {@inheritDoc} */ public", "return": "void", "signature": "void addMBeanServers(Set<MBeanServerConnection> servers)", "full_signature": "@Override /** {@inheritDoc} */ public void addMBeanServers(Set<MBeanServerConnection> servers)", "class_method_signature": "JBossDetector.addMBeanServers(Set<MBeanServerConnection> servers)", "testcase": false, "constructor": false}], "file": "agent/core/src/main/java/org/jolokia/detector/JBossDetector.java"}, "focal_method": {"identifier": "jvmAgentStartup", "parameters": "(Instrumentation instrumentation)", "modifiers": "@Override public", "return": "void", "body": "@Override\n    public void jvmAgentStartup(Instrumentation instrumentation) {\n        jvmAgentStartup(instrumentation, this.getClass().getClassLoader());\n    }", "signature": "void jvmAgentStartup(Instrumentation instrumentation)", "full_signature": "@Override public void jvmAgentStartup(Instrumentation instrumentation)", "class_method_signature": "JBossDetector.jvmAgentStartup(Instrumentation instrumentation)", "testcase": false, "constructor": false, "invocations": ["jvmAgentStartup", "getClassLoader", "getClass"]}, "repository": {"repo_id": 777444, "url": "https://github.com/rhuss/jolokia", "language": "Java", "is_fork": false, "fork_count": 187, "stargazer_count": 682, "size": 20451, "license": "licensed"}}