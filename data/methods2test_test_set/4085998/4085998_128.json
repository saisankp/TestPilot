{"test_class": {"identifier": "urn_perun_user_attribute_def_virt_eduPersonORCIDTest", "superclass": "", "interfaces": "", "fields": [], "file": "perun-core/src/test/java/cz/metacentrum/perun/core/impl/modules/attributes/urn_perun_user_attribute_def_virt_eduPersonORCIDTest.java"}, "test_case": {"identifier": "getAttributeValue", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n\tpublic void getAttributeValue() throws Exception {\n\t\turn_perun_user_attribute_def_virt_eduPersonORCID classInstance = new urn_perun_user_attribute_def_virt_eduPersonORCID();\n\t\tPerunSessionImpl session = mock(PerunSessionImpl.class, RETURNS_DEEP_STUBS);\n\t\tUser user = new User();\n\t\tuser.setId(1);\n\t\tUserExtSource ues1 = new UserExtSource(10, new ExtSource(100, \"name1\", \"type1\"), \"login1\");\n\t\tUserExtSource ues2 = new UserExtSource(20, new ExtSource(200, \"name2\", \"type2\"), \"login2\");\n\t\tAttribute att1 = new Attribute();\n\t\tString orcidAddress = \"http://orcid.org/\";\n\t\tString VALUE1 = orcidAddress + \"0000-0002-0305-7446\";\n\t\tString VALUE2 = orcidAddress + \"0000-0002-1111-2222\";\n\t\tatt1.setValue(VALUE1 + \";\" + VALUE2);\n\t\tAttribute att2 = new Attribute();\n\t\tString VALUE3 = orcidAddress + \"0000-0002-1111-3333\";\n\t\tatt2.setValue(VALUE3);\n\n\t\twhen(session.getPerunBl().getUsersManagerBl().getUserExtSources(session, user)).thenReturn(\n\t\t\t\tArrays.asList(ues1, ues2)\n\t\t);\n\n\t\tString attributeName = classInstance.getSourceAttributeName();\n\t\twhen(session.getPerunBl().getAttributesManagerBl().getAttribute(session, ues1, attributeName)).thenReturn(\n\t\t\t\tatt1\n\t\t);\n\t\twhen(session.getPerunBl().getAttributesManagerBl().getAttribute(session, ues2, attributeName)).thenReturn(\n\t\t\t\tatt2\n\t\t);\n\n\t\tAttribute receivedAttr = classInstance.getAttributeValue(session, user, classInstance.getAttributeDefinition());\n\t\tassertTrue(receivedAttr.getValue() instanceof List);\n\t\tassertEquals(\"destination attribute name wrong\",classInstance.getDestinationAttributeFriendlyName(),receivedAttr.getFriendlyName());\n\n\t\t@SuppressWarnings(\"unchecked\")\n\t\tList<String> actual = (List<String>) receivedAttr.getValue();\n\t\tCollections.sort(actual);\n\t\tList<String> expected = Arrays.asList(VALUE1, VALUE2, VALUE3);\n\t\tCollections.sort(expected);\n\t\tassertEquals(\"collected values are incorrect\",expected,actual);\n\t}", "signature": "void getAttributeValue()", "full_signature": "@Test public void getAttributeValue()", "class_method_signature": "urn_perun_user_attribute_def_virt_eduPersonORCIDTest.getAttributeValue()", "testcase": true, "constructor": false, "invocations": ["mock", "setId", "setValue", "setValue", "thenReturn", "when", "getUserExtSources", "getUsersManagerBl", "getPerunBl", "asList", "getSourceAttributeName", "thenReturn", "when", "getAttribute", "getAttributesManagerBl", "getPerunBl", "thenReturn", "when", "getAttribute", "getAttributesManagerBl", "getPerunBl", "getAttributeValue", "getAttributeDefinition", "assertTrue", "getValue", "assertEquals", "getDestinationAttributeFriendlyName", "getFriendlyName", "getValue", "sort", "asList", "sort", "assertEquals"]}, "focal_class": {"identifier": "urn_perun_user_attribute_def_virt_eduPersonORCID", "superclass": "extends UserVirtualAttributeCollectedFromUserExtSource", "interfaces": "", "fields": [], "methods": [{"identifier": "getSourceAttributeFriendlyName", "parameters": "()", "modifiers": "@Override public", "return": "String", "signature": "String getSourceAttributeFriendlyName()", "full_signature": "@Override public String getSourceAttributeFriendlyName()", "class_method_signature": "urn_perun_user_attribute_def_virt_eduPersonORCID.getSourceAttributeFriendlyName()", "testcase": false, "constructor": false}, {"identifier": "getDestinationAttributeFriendlyName", "parameters": "()", "modifiers": "@Override public", "return": "String", "signature": "String getDestinationAttributeFriendlyName()", "full_signature": "@Override public String getDestinationAttributeFriendlyName()", "class_method_signature": "urn_perun_user_attribute_def_virt_eduPersonORCID.getDestinationAttributeFriendlyName()", "testcase": false, "constructor": false}, {"identifier": "getDestinationAttributeDescription", "parameters": "()", "modifiers": "@Override public", "return": "String", "signature": "String getDestinationAttributeDescription()", "full_signature": "@Override public String getDestinationAttributeDescription()", "class_method_signature": "urn_perun_user_attribute_def_virt_eduPersonORCID.getDestinationAttributeDescription()", "testcase": false, "constructor": false}], "file": "perun-core/src/main/java/cz/metacentrum/perun/core/impl/modules/attributes/urn_perun_user_attribute_def_virt_eduPersonORCID.java"}, "focal_method": {"identifier": "getDestinationAttributeFriendlyName", "parameters": "()", "modifiers": "@Override public", "return": "String", "body": "@Override\n\tpublic String getDestinationAttributeFriendlyName() {\n\t\treturn \"eduPersonORCID\";\n\t}", "signature": "String getDestinationAttributeFriendlyName()", "full_signature": "@Override public String getDestinationAttributeFriendlyName()", "class_method_signature": "urn_perun_user_attribute_def_virt_eduPersonORCID.getDestinationAttributeFriendlyName()", "testcase": false, "constructor": false, "invocations": []}, "repository": {"repo_id": 4085998, "url": "https://github.com/CESNET/perun", "stars": 38, "created": "4/20/2012 11:55:38 AM +00:00", "updates": "2020-01-27T09:51:13+00:00", "fork": "False", "license": "licensed"}}