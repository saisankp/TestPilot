{"test_class": {"identifier": "OutboundMessageHandlerTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private Mockery mockery;", "modifier": "private", "type": "Mockery", "declarator": "mockery", "var_name": "mockery"}, {"original_string": "private WritableByteChannel writableByteChannel;", "modifier": "private", "type": "WritableByteChannel", "declarator": "writableByteChannel", "var_name": "writableByteChannel"}, {"original_string": "private OutboundMessageHandler handler;", "modifier": "private", "type": "OutboundMessageHandler", "declarator": "handler", "var_name": "handler"}, {"original_string": "private ConnectionObserver connectionObserver;", "modifier": "private", "type": "ConnectionObserver", "declarator": "connectionObserver", "var_name": "connectionObserver"}], "file": "nanofix-client/src/test/java/com/lmax/nanofix/outgoing/OutboundMessageHandlerTest.java"}, "test_case": {"identifier": "shouldNotifyTransportObserverIfAnClosedChannelExceptionIsThrownWhileWritingACollection", "parameters": "()", "modifiers": "@Test(expected = TransportClosedException.class) public", "return": "void", "body": "@Test(expected = TransportClosedException.class)\n    public void shouldNotifyTransportObserverIfAnClosedChannelExceptionIsThrownWhileWritingACollection() throws Exception\n    {\n        mockery.checking(new Expectations()\n        {\n            {\n                //when\n                one(writableByteChannel).write(with(any(ByteBuffer.class)));\n                will(throwException(new ClosedChannelException()));\n\n                //then\n                one(connectionObserver).connectionClosed();\n            }\n        });\n\n        handler.send(Arrays.asList(new FixMessageBuilder().build()));\n\n    }", "signature": "void shouldNotifyTransportObserverIfAnClosedChannelExceptionIsThrownWhileWritingACollection()", "full_signature": "@Test(expected = TransportClosedException.class) public void shouldNotifyTransportObserverIfAnClosedChannelExceptionIsThrownWhileWritingACollection()", "class_method_signature": "OutboundMessageHandlerTest.shouldNotifyTransportObserverIfAnClosedChannelExceptionIsThrownWhileWritingACollection()", "testcase": true, "constructor": false, "invocations": ["checking", "write", "one", "with", "any", "will", "throwException", "connectionClosed", "one", "send", "asList", "build"]}, "focal_class": {"identifier": "OutboundMessageHandler", "superclass": "", "interfaces": "", "fields": [{"original_string": "private final ConnectionObserver connectionObserver;", "modifier": "private final", "type": "ConnectionObserver", "declarator": "connectionObserver", "var_name": "connectionObserver"}, {"original_string": "private volatile WritableByteChannel writableByteChannel;", "modifier": "private volatile", "type": "WritableByteChannel", "declarator": "writableByteChannel", "var_name": "writableByteChannel"}], "methods": [{"identifier": "OutboundMessageHandler", "parameters": "(final ConnectionObserver connectionObserver)", "modifiers": "public", "return": "", "signature": " OutboundMessageHandler(final ConnectionObserver connectionObserver)", "full_signature": "public  OutboundMessageHandler(final ConnectionObserver connectionObserver)", "class_method_signature": "OutboundMessageHandler.OutboundMessageHandler(final ConnectionObserver connectionObserver)", "testcase": false, "constructor": true}, {"identifier": "send", "parameters": "(FixMessage message)", "modifiers": "public", "return": "void", "signature": "void send(FixMessage message)", "full_signature": "public void send(FixMessage message)", "class_method_signature": "OutboundMessageHandler.send(FixMessage message)", "testcase": false, "constructor": false}, {"identifier": "send", "parameters": "(Collection<FixMessage> messages)", "modifiers": "public", "return": "void", "signature": "void send(Collection<FixMessage> messages)", "full_signature": "public void send(Collection<FixMessage> messages)", "class_method_signature": "OutboundMessageHandler.send(Collection<FixMessage> messages)", "testcase": false, "constructor": false}, {"identifier": "send", "parameters": "(final String message)", "modifiers": "public", "return": "void", "signature": "void send(final String message)", "full_signature": "public void send(final String message)", "class_method_signature": "OutboundMessageHandler.send(final String message)", "testcase": false, "constructor": false}, {"identifier": "sendBytes", "parameters": "(final byte[] bytes)", "modifiers": "public", "return": "void", "signature": "void sendBytes(final byte[] bytes)", "full_signature": "public void sendBytes(final byte[] bytes)", "class_method_signature": "OutboundMessageHandler.sendBytes(final byte[] bytes)", "testcase": false, "constructor": false}, {"identifier": "initialiseOutboundChannel", "parameters": "(final WritableByteChannel writableByteChannel)", "modifiers": "public", "return": "void", "signature": "void initialiseOutboundChannel(final WritableByteChannel writableByteChannel)", "full_signature": "public void initialiseOutboundChannel(final WritableByteChannel writableByteChannel)", "class_method_signature": "OutboundMessageHandler.initialiseOutboundChannel(final WritableByteChannel writableByteChannel)", "testcase": false, "constructor": false}], "file": "nanofix-client/src/main/java/com/lmax/nanofix/outgoing/OutboundMessageHandler.java"}, "focal_method": {"identifier": "send", "parameters": "(FixMessage message)", "modifiers": "public", "return": "void", "body": "public void send(FixMessage message)\n    {\n        final byte[] bytes = message.toFixString().getBytes();\n        sendBytes(bytes);\n    }", "signature": "void send(FixMessage message)", "full_signature": "public void send(FixMessage message)", "class_method_signature": "OutboundMessageHandler.send(FixMessage message)", "testcase": false, "constructor": false, "invocations": ["getBytes", "toFixString", "sendBytes"]}, "repository": {"repo_id": 30593072, "url": "https://github.com/LMAX-Exchange/nanofix", "language": "Java", "is_fork": false, "fork_count": 18, "stargazer_count": 24, "size": 193, "license": "licensed"}}