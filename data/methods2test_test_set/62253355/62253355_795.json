{"test_class": {"identifier": "SimpleProvenanceServiceTest", "superclass": "extends OrmEnabledTestCase", "interfaces": "", "fields": [{"original_string": "private Repository repo;", "modifier": "private", "type": "Repository", "declarator": "repo", "var_name": "repo"}, {"original_string": "private SimpleProvenanceService service;", "modifier": "private", "type": "SimpleProvenanceService", "declarator": "service", "var_name": "service"}, {"original_string": "private OrmFactory<User> userFactory = getRequiredOrmFactory(User.class);", "modifier": "private", "type": "OrmFactory<User>", "declarator": "userFactory = getRequiredOrmFactory(User.class)", "var_name": "userFactory"}, {"original_string": "private OrmFactory<Activity> activityFactory = getRequiredOrmFactory(Activity.class);", "modifier": "private", "type": "OrmFactory<Activity>", "declarator": "activityFactory = getRequiredOrmFactory(Activity.class)", "var_name": "activityFactory"}, {"original_string": "private OrmFactory<Entity> entityFactory = getRequiredOrmFactory(Entity.class);", "modifier": "private", "type": "OrmFactory<Entity>", "declarator": "entityFactory = getRequiredOrmFactory(Entity.class)", "var_name": "entityFactory"}, {"original_string": "private IRI activityIRI;", "modifier": "private", "type": "IRI", "declarator": "activityIRI", "var_name": "activityIRI"}, {"original_string": "@Mock\n    private OrmFactoryRegistry registry;", "modifier": "@Mock\n    private", "type": "OrmFactoryRegistry", "declarator": "registry", "var_name": "registry"}], "file": "com.mobi.prov.impl/src/test/java/com/mobi/prov/impl/SimpleProvenanceServiceTest.java"}, "test_case": {"identifier": "getActivityThatDoesNotExistTest", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void getActivityThatDoesNotExistTest() throws Exception {\n        Optional<Activity> result = service.getActivity(activityIRI);\n        assertFalse(result.isPresent());\n    }", "signature": "void getActivityThatDoesNotExistTest()", "full_signature": "@Test public void getActivityThatDoesNotExistTest()", "class_method_signature": "SimpleProvenanceServiceTest.getActivityThatDoesNotExistTest()", "testcase": true, "constructor": false, "invocations": ["getActivity", "assertFalse", "isPresent"]}, "focal_class": {"identifier": "SimpleProvenanceService", "superclass": "", "interfaces": "implements ProvenanceService", "fields": [{"original_string": "private Repository repo;", "modifier": "private", "type": "Repository", "declarator": "repo", "var_name": "repo"}, {"original_string": "private OrmFactoryRegistry factoryRegistry;", "modifier": "private", "type": "OrmFactoryRegistry", "declarator": "factoryRegistry", "var_name": "factoryRegistry"}, {"original_string": "private ValueFactory vf;", "modifier": "private", "type": "ValueFactory", "declarator": "vf", "var_name": "vf"}, {"original_string": "private ModelFactory mf;", "modifier": "private", "type": "ModelFactory", "declarator": "mf", "var_name": "mf"}, {"original_string": "private ActivityFactory activityFactory;", "modifier": "private", "type": "ActivityFactory", "declarator": "activityFactory", "var_name": "activityFactory"}, {"original_string": "private static String ACTIVITY_NAMESPACE = \"http://mobi.com/activities/\";", "modifier": "private static", "type": "String", "declarator": "ACTIVITY_NAMESPACE = \"http://mobi.com/activities/\"", "var_name": "ACTIVITY_NAMESPACE"}], "methods": [{"identifier": "setRepo", "parameters": "(Repository repo)", "modifiers": "@Reference(target = \"(id=prov)\")", "return": "void", "signature": "void setRepo(Repository repo)", "full_signature": "@Reference(target = \"(id=prov)\") void setRepo(Repository repo)", "class_method_signature": "SimpleProvenanceService.setRepo(Repository repo)", "testcase": false, "constructor": false}, {"identifier": "setFactoryRegistry", "parameters": "(OrmFactoryRegistry factoryRegistry)", "modifiers": "@Reference", "return": "void", "signature": "void setFactoryRegistry(OrmFactoryRegistry factoryRegistry)", "full_signature": "@Reference void setFactoryRegistry(OrmFactoryRegistry factoryRegistry)", "class_method_signature": "SimpleProvenanceService.setFactoryRegistry(OrmFactoryRegistry factoryRegistry)", "testcase": false, "constructor": false}, {"identifier": "setVf", "parameters": "(ValueFactory vf)", "modifiers": "@Reference", "return": "void", "signature": "void setVf(ValueFactory vf)", "full_signature": "@Reference void setVf(ValueFactory vf)", "class_method_signature": "SimpleProvenanceService.setVf(ValueFactory vf)", "testcase": false, "constructor": false}, {"identifier": "setMf", "parameters": "(ModelFactory mf)", "modifiers": "@Reference", "return": "void", "signature": "void setMf(ModelFactory mf)", "full_signature": "@Reference void setMf(ModelFactory mf)", "class_method_signature": "SimpleProvenanceService.setMf(ModelFactory mf)", "testcase": false, "constructor": false}, {"identifier": "setActivityFactory", "parameters": "(ActivityFactory activityFactory)", "modifiers": "@Reference", "return": "void", "signature": "void setActivityFactory(ActivityFactory activityFactory)", "full_signature": "@Reference void setActivityFactory(ActivityFactory activityFactory)", "class_method_signature": "SimpleProvenanceService.setActivityFactory(ActivityFactory activityFactory)", "testcase": false, "constructor": false}, {"identifier": "getConnection", "parameters": "()", "modifiers": "@Override public", "return": "RepositoryConnection", "signature": "RepositoryConnection getConnection()", "full_signature": "@Override public RepositoryConnection getConnection()", "class_method_signature": "SimpleProvenanceService.getConnection()", "testcase": false, "constructor": false}, {"identifier": "createActivity", "parameters": "(ActivityConfig config)", "modifiers": "@Override public", "return": "Activity", "signature": "Activity createActivity(ActivityConfig config)", "full_signature": "@Override public Activity createActivity(ActivityConfig config)", "class_method_signature": "SimpleProvenanceService.createActivity(ActivityConfig config)", "testcase": false, "constructor": false}, {"identifier": "addActivity", "parameters": "(Activity activity)", "modifiers": "@Override public", "return": "void", "signature": "void addActivity(Activity activity)", "full_signature": "@Override public void addActivity(Activity activity)", "class_method_signature": "SimpleProvenanceService.addActivity(Activity activity)", "testcase": false, "constructor": false}, {"identifier": "getActivity", "parameters": "(Resource activityIRI)", "modifiers": "@Override public", "return": "Optional<Activity>", "signature": "Optional<Activity> getActivity(Resource activityIRI)", "full_signature": "@Override public Optional<Activity> getActivity(Resource activityIRI)", "class_method_signature": "SimpleProvenanceService.getActivity(Resource activityIRI)", "testcase": false, "constructor": false}, {"identifier": "updateActivity", "parameters": "(Activity newActivity)", "modifiers": "@Override public", "return": "void", "signature": "void updateActivity(Activity newActivity)", "full_signature": "@Override public void updateActivity(Activity newActivity)", "class_method_signature": "SimpleProvenanceService.updateActivity(Activity newActivity)", "testcase": false, "constructor": false}, {"identifier": "deleteActivity", "parameters": "(Resource activityIRI)", "modifiers": "@Override public", "return": "void", "signature": "void deleteActivity(Resource activityIRI)", "full_signature": "@Override public void deleteActivity(Resource activityIRI)", "class_method_signature": "SimpleProvenanceService.deleteActivity(Resource activityIRI)", "testcase": false, "constructor": false}, {"identifier": "removeIfNotReferenced", "parameters": "(Resource iri, RepositoryConnection conn)", "modifiers": "private", "return": "void", "signature": "void removeIfNotReferenced(Resource iri, RepositoryConnection conn)", "full_signature": "private void removeIfNotReferenced(Resource iri, RepositoryConnection conn)", "class_method_signature": "SimpleProvenanceService.removeIfNotReferenced(Resource iri, RepositoryConnection conn)", "testcase": false, "constructor": false}, {"identifier": "getReferencedEntityIRIs", "parameters": "(Resource activityIRI, String propIRI, RepositoryConnection conn)", "modifiers": "private", "return": "List<Resource>", "signature": "List<Resource> getReferencedEntityIRIs(Resource activityIRI, String propIRI, RepositoryConnection conn)", "full_signature": "private List<Resource> getReferencedEntityIRIs(Resource activityIRI, String propIRI, RepositoryConnection conn)", "class_method_signature": "SimpleProvenanceService.getReferencedEntityIRIs(Resource activityIRI, String propIRI, RepositoryConnection conn)", "testcase": false, "constructor": false}, {"identifier": "getActivityFactories", "parameters": "()", "modifiers": "private", "return": "Map<Class<? extends Activity>, OrmFactory<? extends Activity>>", "signature": "Map<Class<? extends Activity>, OrmFactory<? extends Activity>> getActivityFactories()", "full_signature": "private Map<Class<? extends Activity>, OrmFactory<? extends Activity>> getActivityFactories()", "class_method_signature": "SimpleProvenanceService.getActivityFactories()", "testcase": false, "constructor": false}, {"identifier": "addEntitiesToModel", "parameters": "(Set<Resource> entityIRIs, Model model, RepositoryConnection conn)", "modifiers": "private", "return": "void", "signature": "void addEntitiesToModel(Set<Resource> entityIRIs, Model model, RepositoryConnection conn)", "full_signature": "private void addEntitiesToModel(Set<Resource> entityIRIs, Model model, RepositoryConnection conn)", "class_method_signature": "SimpleProvenanceService.addEntitiesToModel(Set<Resource> entityIRIs, Model model, RepositoryConnection conn)", "testcase": false, "constructor": false}, {"identifier": "addEntitiesToModel", "parameters": "(Set<Entity> entities, Model model)", "modifiers": "private", "return": "void", "signature": "void addEntitiesToModel(Set<Entity> entities, Model model)", "full_signature": "private void addEntitiesToModel(Set<Entity> entities, Model model)", "class_method_signature": "SimpleProvenanceService.addEntitiesToModel(Set<Entity> entities, Model model)", "testcase": false, "constructor": false}], "file": "com.mobi.prov.impl/src/main/java/com/mobi/prov/impl/SimpleProvenanceService.java"}, "focal_method": {"identifier": "getActivity", "parameters": "(Resource activityIRI)", "modifiers": "@Override public", "return": "Optional<Activity>", "body": "@Override\n    public Optional<Activity> getActivity(Resource activityIRI) {\n        try (RepositoryConnection conn = repo.getConnection()) {\n            Model activityModel = RepositoryResults.asModel(conn.getStatements(activityIRI, null, null), mf);\n            return activityFactory.getExisting(activityIRI, activityModel).flatMap(activity -> {\n                addEntitiesToModel(activity.getGenerated_resource(), activityModel, conn);\n                addEntitiesToModel(activity.getInvalidated_resource(), activityModel, conn);\n                addEntitiesToModel(activity.getUsed_resource(), activityModel, conn);\n                return Optional.of(activity);\n            });\n        }\n    }", "signature": "Optional<Activity> getActivity(Resource activityIRI)", "full_signature": "@Override public Optional<Activity> getActivity(Resource activityIRI)", "class_method_signature": "SimpleProvenanceService.getActivity(Resource activityIRI)", "testcase": false, "constructor": false, "invocations": ["getConnection", "asModel", "getStatements", "flatMap", "getExisting", "addEntitiesToModel", "getGenerated_resource", "addEntitiesToModel", "getInvalidated_resource", "addEntitiesToModel", "getUsed_resource", "of"]}, "repository": {"repo_id": 62253355, "url": "https://github.com/inovexcorp/mobi", "language": "Java", "is_fork": false, "fork_count": 7, "stargazer_count": 30, "size": 54070, "license": "licensed"}}