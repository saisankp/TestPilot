{"test_class": {"identifier": "DocumentTranslatorTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final ObjectMapper mapper = new ObjectMapper();", "modifier": "private static final", "type": "ObjectMapper", "declarator": "mapper = new ObjectMapper()", "var_name": "mapper"}, {"original_string": "private static final String NAME = \"rishabh\";", "modifier": "private static final", "type": "String", "declarator": "NAME = \"rishabh\"", "var_name": "NAME"}], "file": "foxtrot-translator/src/test/java/com/foxtrot/flipkart/translator/DocumentTranslatorTest.java"}, "test_case": {"identifier": "testTranslationWithRawKeyVersion1", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testTranslationWithRawKeyVersion1() {\n        DocumentTranslator translator = new DocumentTranslator(TestUtils.createTranslatorConfigWithRawKeyV1());\n        Table table = new Table();\n        table.setName(UUID.randomUUID()\n                              .toString());\n\n        Document document = new Document();\n        document.setId(UUID.randomUUID()\n                               .toString());\n        document.setTimestamp(System.currentTimeMillis());\n        document.setData(mapper.createObjectNode()\n                                 .put(\"name\", NAME));\n\n        Document translatedDocument = translator.translate(table, document);\n\n        assertEquals(translatedDocument.getId(), document.getId());\n        assertNotNull(translatedDocument.getMetadata());\n        assertEquals(translatedDocument.getMetadata()\n                             .getId(), document.getId());\n        assertEquals(translatedDocument.getMetadata()\n                             .getRawStorageId(), document.getId() + \":\" + table.getName());\n    }", "signature": "void testTranslationWithRawKeyVersion1()", "full_signature": "@Test public void testTranslationWithRawKeyVersion1()", "class_method_signature": "DocumentTranslatorTest.testTranslationWithRawKeyVersion1()", "testcase": true, "constructor": false, "invocations": ["createTranslatorConfigWithRawKeyV1", "setName", "toString", "randomUUID", "setId", "toString", "randomUUID", "setTimestamp", "currentTimeMillis", "setData", "put", "createObjectNode", "translate", "assertEquals", "getId", "getId", "assertNotNull", "getMetadata", "assertEquals", "getId", "getMetadata", "getId", "assertEquals", "getRawStorageId", "getMetadata", "getId", "getName"]}, "focal_class": {"identifier": "DocumentTranslator", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final String EXCEPTION_MESSAGE = \"rawKeyVersion not supported version=[%s]\";", "modifier": "private static final", "type": "String", "declarator": "EXCEPTION_MESSAGE = \"rawKeyVersion not supported version=[%s]\"", "var_name": "EXCEPTION_MESSAGE"}, {"original_string": "private final AbstractRowKeyDistributor keyDistributor;", "modifier": "private final", "type": "AbstractRowKeyDistributor", "declarator": "keyDistributor", "var_name": "keyDistributor"}, {"original_string": "private String rawKeyVersion;", "modifier": "private", "type": "String", "declarator": "rawKeyVersion", "var_name": "rawKeyVersion"}], "methods": [{"identifier": "DocumentTranslator", "parameters": "(TranslatorConfig translatorConfig)", "modifiers": "@Inject public", "return": "", "signature": " DocumentTranslator(TranslatorConfig translatorConfig)", "full_signature": "@Inject public  DocumentTranslator(TranslatorConfig translatorConfig)", "class_method_signature": "DocumentTranslator.DocumentTranslator(TranslatorConfig translatorConfig)", "testcase": false, "constructor": true}, {"identifier": "translate", "parameters": "(final Table table, final List<Document> inDocuments)", "modifiers": "public", "return": "List<Document>", "signature": "List<Document> translate(final Table table, final List<Document> inDocuments)", "full_signature": "public List<Document> translate(final Table table, final List<Document> inDocuments)", "class_method_signature": "DocumentTranslator.translate(final Table table, final List<Document> inDocuments)", "testcase": false, "constructor": false}, {"identifier": "translate", "parameters": "(final Table table, final Document inDocument)", "modifiers": "public", "return": "Document", "signature": "Document translate(final Table table, final Document inDocument)", "full_signature": "public Document translate(final Table table, final Document inDocument)", "class_method_signature": "DocumentTranslator.translate(final Table table, final Document inDocument)", "testcase": false, "constructor": false}, {"identifier": "translateBack", "parameters": "(final Document inDocument)", "modifiers": "public", "return": "Document", "signature": "Document translateBack(final Document inDocument)", "full_signature": "public Document translateBack(final Document inDocument)", "class_method_signature": "DocumentTranslator.translateBack(final Document inDocument)", "testcase": false, "constructor": false}, {"identifier": "metadata", "parameters": "(final Table table, final Document inDocument)", "modifiers": "private", "return": "DocumentMetadata", "signature": "DocumentMetadata metadata(final Table table, final Document inDocument)", "full_signature": "private DocumentMetadata metadata(final Table table, final Document inDocument)", "class_method_signature": "DocumentTranslator.metadata(final Table table, final Document inDocument)", "testcase": false, "constructor": false}, {"identifier": "rawStorageIdFromDocument", "parameters": "(final Table table, final Document document)", "modifiers": "private", "return": "String", "signature": "String rawStorageIdFromDocument(final Table table, final Document document)", "full_signature": "private String rawStorageIdFromDocument(final Table table, final Document document)", "class_method_signature": "DocumentTranslator.rawStorageIdFromDocument(final Table table, final Document document)", "testcase": false, "constructor": false}, {"identifier": "generateScalableKey", "parameters": "(String id)", "modifiers": "@VisibleForTesting public", "return": "String", "signature": "String generateScalableKey(String id)", "full_signature": "@VisibleForTesting public String generateScalableKey(String id)", "class_method_signature": "DocumentTranslator.generateScalableKey(String id)", "testcase": false, "constructor": false}, {"identifier": "rawStorageIdFromDocumentId", "parameters": "(Table table, String id)", "modifiers": "public", "return": "String", "signature": "String rawStorageIdFromDocumentId(Table table, String id)", "full_signature": "public String rawStorageIdFromDocumentId(Table table, String id)", "class_method_signature": "DocumentTranslator.rawStorageIdFromDocumentId(Table table, String id)", "testcase": false, "constructor": false}], "file": "foxtrot-translator/src/main/java/com/foxtrot/flipkart/translator/DocumentTranslator.java"}, "focal_method": {"identifier": "translate", "parameters": "(final Table table, final List<Document> inDocuments)", "modifiers": "public", "return": "List<Document>", "body": "public List<Document> translate(final Table table, final List<Document> inDocuments) {\n        ImmutableList.Builder<Document> docListBuilder = ImmutableList.builder();\n        for (Document document : inDocuments) {\n            docListBuilder.add(translate(table, document));\n        }\n        return docListBuilder.build();\n    }", "signature": "List<Document> translate(final Table table, final List<Document> inDocuments)", "full_signature": "public List<Document> translate(final Table table, final List<Document> inDocuments)", "class_method_signature": "DocumentTranslator.translate(final Table table, final List<Document> inDocuments)", "testcase": false, "constructor": false, "invocations": ["builder", "add", "translate", "build"]}, "repository": {"repo_id": 19980663, "url": "https://github.com/Flipkart/foxtrot", "stars": 22, "created": "5/20/2014 12:52:55 PM +00:00", "updates": "2020-01-07T07:05:03+00:00", "fork": "False", "license": "licensed"}}