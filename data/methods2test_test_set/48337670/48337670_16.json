{"test_class": {"identifier": "AutomaticInboxProcessorTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final String DEVICE_ID = \"deviceId\";", "modifier": "private static final", "type": "String", "declarator": "DEVICE_ID = \"deviceId\"", "var_name": "DEVICE_ID"}, {"original_string": "private static final String DEVICE_ID_KEY = \"deviceIdKey\";", "modifier": "private static final", "type": "String", "declarator": "DEVICE_ID_KEY = \"deviceIdKey\"", "var_name": "DEVICE_ID_KEY"}, {"original_string": "private static final String OTHER_KEY = \"otherKey\";", "modifier": "private static final", "type": "String", "declarator": "OTHER_KEY = \"otherKey\"", "var_name": "OTHER_KEY"}, {"original_string": "private static final String OTHER_VALUE = \"deviceId\";", "modifier": "private static final", "type": "String", "declarator": "OTHER_VALUE = \"deviceId\"", "var_name": "OTHER_VALUE"}, {"original_string": "private static final String CONFIG_KEY = \"configKey\";", "modifier": "private static final", "type": "String", "declarator": "CONFIG_KEY = \"configKey\"", "var_name": "CONFIG_KEY"}, {"original_string": "private static final String CONFIG_VALUE = \"configValue\";", "modifier": "private static final", "type": "String", "declarator": "CONFIG_VALUE = \"configValue\"", "var_name": "CONFIG_VALUE"}, {"original_string": "private static final ThingTypeUID THING_TYPE_UID = new ThingTypeUID(\"test\", \"test\");", "modifier": "private static final", "type": "ThingTypeUID", "declarator": "THING_TYPE_UID = new ThingTypeUID(\"test\", \"test\")", "var_name": "THING_TYPE_UID"}, {"original_string": "private static final ThingTypeUID THING_TYPE_UID2 = new ThingTypeUID(\"test2\", \"test2\");", "modifier": "private static final", "type": "ThingTypeUID", "declarator": "THING_TYPE_UID2 = new ThingTypeUID(\"test2\", \"test2\")", "var_name": "THING_TYPE_UID2"}, {"original_string": "private static final ThingTypeUID THING_TYPE_UID3 = new ThingTypeUID(\"test3\", \"test3\");", "modifier": "private static final", "type": "ThingTypeUID", "declarator": "THING_TYPE_UID3 = new ThingTypeUID(\"test3\", \"test3\")", "var_name": "THING_TYPE_UID3"}, {"original_string": "private static final ThingUID THING_UID = new ThingUID(THING_TYPE_UID, \"test\");", "modifier": "private static final", "type": "ThingUID", "declarator": "THING_UID = new ThingUID(THING_TYPE_UID, \"test\")", "var_name": "THING_UID"}, {"original_string": "private static final ThingUID THING_UID2 = new ThingUID(THING_TYPE_UID, \"test2\");", "modifier": "private static final", "type": "ThingUID", "declarator": "THING_UID2 = new ThingUID(THING_TYPE_UID, \"test2\")", "var_name": "THING_UID2"}, {"original_string": "private static final ThingUID THING_UID3 = new ThingUID(THING_TYPE_UID3, \"test3\");", "modifier": "private static final", "type": "ThingUID", "declarator": "THING_UID3 = new ThingUID(THING_TYPE_UID3, \"test3\")", "var_name": "THING_UID3"}, {"original_string": "private static final ThingType THING_TYPE = ThingTypeBuilder.instance(THING_TYPE_UID, \"label\").isListed(true)\n            .withRepresentationProperty(DEVICE_ID_KEY).build();", "modifier": "private static final", "type": "ThingType", "declarator": "THING_TYPE = ThingTypeBuilder.instance(THING_TYPE_UID, \"label\").isListed(true)\n            .withRepresentationProperty(DEVICE_ID_KEY).build()", "var_name": "THING_TYPE"}, {"original_string": "private static final ThingType THING_TYPE2 = ThingTypeBuilder.instance(THING_TYPE_UID2, \"label\").isListed(true)\n            .withRepresentationProperty(CONFIG_KEY).build();", "modifier": "private static final", "type": "ThingType", "declarator": "THING_TYPE2 = ThingTypeBuilder.instance(THING_TYPE_UID2, \"label\").isListed(true)\n            .withRepresentationProperty(CONFIG_KEY).build()", "var_name": "THING_TYPE2"}, {"original_string": "private static final ThingType THING_TYPE3 = ThingTypeBuilder.instance(THING_TYPE_UID3, \"label\").isListed(true)\n            .withRepresentationProperty(OTHER_KEY).build();", "modifier": "private static final", "type": "ThingType", "declarator": "THING_TYPE3 = ThingTypeBuilder.instance(THING_TYPE_UID3, \"label\").isListed(true)\n            .withRepresentationProperty(OTHER_KEY).build()", "var_name": "THING_TYPE3"}, {"original_string": "private static final Map<String, String> THING_PROPERTIES = Map.of(DEVICE_ID_KEY, DEVICE_ID);", "modifier": "private static final", "type": "Map<String, String>", "declarator": "THING_PROPERTIES = Map.of(DEVICE_ID_KEY, DEVICE_ID)", "var_name": "THING_PROPERTIES"}, {"original_string": "private static final Map<String, String> OTHER_THING_PROPERTIES = Map.of(OTHER_KEY, OTHER_VALUE);", "modifier": "private static final", "type": "Map<String, String>", "declarator": "OTHER_THING_PROPERTIES = Map.of(OTHER_KEY, OTHER_VALUE)", "var_name": "OTHER_THING_PROPERTIES"}, {"original_string": "private static final Configuration CONFIG = new Configuration(Map.of(CONFIG_KEY, CONFIG_VALUE));", "modifier": "private static final", "type": "Configuration", "declarator": "CONFIG = new Configuration(Map.of(CONFIG_KEY, CONFIG_VALUE))", "var_name": "CONFIG"}, {"original_string": "private AutomaticInboxProcessor automaticInboxProcessor;", "modifier": "private", "type": "AutomaticInboxProcessor", "declarator": "automaticInboxProcessor", "var_name": "automaticInboxProcessor"}, {"original_string": "private PersistentInbox inbox;", "modifier": "private", "type": "PersistentInbox", "declarator": "inbox", "var_name": "inbox"}, {"original_string": "private @Mock ThingRegistry thingRegistry;", "modifier": "private @Mock", "type": "ThingRegistry", "declarator": "thingRegistry", "var_name": "thingRegistry"}, {"original_string": "private @Mock ThingTypeRegistry thingTypeRegistry;", "modifier": "private @Mock", "type": "ThingTypeRegistry", "declarator": "thingTypeRegistry", "var_name": "thingTypeRegistry"}, {"original_string": "private @Mock Thing thing;", "modifier": "private @Mock", "type": "Thing", "declarator": "thing", "var_name": "thing"}, {"original_string": "private @Mock Thing thing2;", "modifier": "private @Mock", "type": "Thing", "declarator": "thing2", "var_name": "thing2"}, {"original_string": "private @Mock Thing thing3;", "modifier": "private @Mock", "type": "Thing", "declarator": "thing3", "var_name": "thing3"}, {"original_string": "private @Mock ThingStatusInfoChangedEvent thingStatusInfoChangedEvent;", "modifier": "private @Mock", "type": "ThingStatusInfoChangedEvent", "declarator": "thingStatusInfoChangedEvent", "var_name": "thingStatusInfoChangedEvent"}, {"original_string": "private @Mock ConfigDescriptionRegistry configDescriptionRegistry;", "modifier": "private @Mock", "type": "ConfigDescriptionRegistry", "declarator": "configDescriptionRegistry", "var_name": "configDescriptionRegistry"}, {"original_string": "private @Mock ThingHandlerFactory thingHandlerFactory;", "modifier": "private @Mock", "type": "ThingHandlerFactory", "declarator": "thingHandlerFactory", "var_name": "thingHandlerFactory"}, {"original_string": "private @Mock ManagedThingProvider thingProvider;", "modifier": "private @Mock", "type": "ManagedThingProvider", "declarator": "thingProvider", "var_name": "thingProvider"}], "file": "bundles/org.openhab.core.config.discovery/src/test/java/org/openhab/core/config/discovery/internal/AutomaticInboxProcessorTest.java"}, "test_case": {"identifier": "testThingIsBeingRemoved", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testThingIsBeingRemoved() {\n        inbox.add(DiscoveryResultBuilder.create(THING_UID).withProperty(DEVICE_ID_KEY, DEVICE_ID)\n                .withRepresentationProperty(DEVICE_ID_KEY).build());\n\n        inbox.setFlag(THING_UID, DiscoveryResultFlag.IGNORED);\n        List<DiscoveryResult> results = inbox.stream().filter(withFlag(DiscoveryResultFlag.IGNORED))\n                .collect(Collectors.toList());\n        assertThat(results.size(), is(1));\n        assertThat(results.get(0).getThingUID(), is(equalTo(THING_UID)));\n\n        automaticInboxProcessor.removed(thing);\n\n        results = inbox.getAll();\n        assertThat(results.size(), is(0));\n    }", "signature": "void testThingIsBeingRemoved()", "full_signature": "@Test public void testThingIsBeingRemoved()", "class_method_signature": "AutomaticInboxProcessorTest.testThingIsBeingRemoved()", "testcase": true, "constructor": false, "invocations": ["add", "build", "withRepresentationProperty", "withProperty", "create", "setFlag", "collect", "filter", "stream", "withFlag", "toList", "assertThat", "size", "is", "assertThat", "getThingUID", "get", "is", "equalTo", "removed", "getAll", "assertThat", "size", "is"]}, "focal_class": {"identifier": "AutomaticInboxProcessor", "superclass": "extends AbstractTypedEventSubscriber<ThingStatusInfoChangedEvent>", "interfaces": "implements InboxListener, RegistryChangeListener<Thing>", "fields": [{"original_string": "public static final String AUTO_IGNORE_CONFIG_PROPERTY = \"autoIgnore\";", "modifier": "public static final", "type": "String", "declarator": "AUTO_IGNORE_CONFIG_PROPERTY = \"autoIgnore\"", "var_name": "AUTO_IGNORE_CONFIG_PROPERTY"}, {"original_string": "public static final String ALWAYS_AUTO_APPROVE_CONFIG_PROPERTY = \"autoApprove\";", "modifier": "public static final", "type": "String", "declarator": "ALWAYS_AUTO_APPROVE_CONFIG_PROPERTY = \"autoApprove\"", "var_name": "ALWAYS_AUTO_APPROVE_CONFIG_PROPERTY"}, {"original_string": "protected static final String CONFIG_URI = \"system:inbox\";", "modifier": "protected static final", "type": "String", "declarator": "CONFIG_URI = \"system:inbox\"", "var_name": "CONFIG_URI"}, {"original_string": "private final Logger logger = LoggerFactory.getLogger(AutomaticInboxProcessor.class);", "modifier": "private final", "type": "Logger", "declarator": "logger = LoggerFactory.getLogger(AutomaticInboxProcessor.class)", "var_name": "logger"}, {"original_string": "private final ThingRegistry thingRegistry;", "modifier": "private final", "type": "ThingRegistry", "declarator": "thingRegistry", "var_name": "thingRegistry"}, {"original_string": "private final ThingTypeRegistry thingTypeRegistry;", "modifier": "private final", "type": "ThingTypeRegistry", "declarator": "thingTypeRegistry", "var_name": "thingTypeRegistry"}, {"original_string": "private final Inbox inbox;", "modifier": "private final", "type": "Inbox", "declarator": "inbox", "var_name": "inbox"}, {"original_string": "private boolean autoIgnore = true;", "modifier": "private", "type": "boolean", "declarator": "autoIgnore = true", "var_name": "autoIgnore"}, {"original_string": "private boolean alwaysAutoApprove = false;", "modifier": "private", "type": "boolean", "declarator": "alwaysAutoApprove = false", "var_name": "alwaysAutoApprove"}, {"original_string": "private final Set<InboxAutoApprovePredicate> inboxAutoApprovePredicates = new CopyOnWriteArraySet<>();", "modifier": "private final", "type": "Set<InboxAutoApprovePredicate>", "declarator": "inboxAutoApprovePredicates = new CopyOnWriteArraySet<>()", "var_name": "inboxAutoApprovePredicates"}], "methods": [{"identifier": "AutomaticInboxProcessor", "parameters": "(final @Reference ThingTypeRegistry thingTypeRegistry,\n            final @Reference ThingRegistry thingRegistry, final @Reference Inbox inbox)", "modifiers": "@Activate public", "return": "", "signature": " AutomaticInboxProcessor(final @Reference ThingTypeRegistry thingTypeRegistry,\n            final @Reference ThingRegistry thingRegistry, final @Reference Inbox inbox)", "full_signature": "@Activate public  AutomaticInboxProcessor(final @Reference ThingTypeRegistry thingTypeRegistry,\n            final @Reference ThingRegistry thingRegistry, final @Reference Inbox inbox)", "class_method_signature": "AutomaticInboxProcessor.AutomaticInboxProcessor(final @Reference ThingTypeRegistry thingTypeRegistry,\n            final @Reference ThingRegistry thingRegistry, final @Reference Inbox inbox)", "testcase": false, "constructor": true}, {"identifier": "activate", "parameters": "(@Nullable Map<String, @Nullable Object> properties)", "modifiers": "@Activate protected", "return": "void", "signature": "void activate(@Nullable Map<String, @Nullable Object> properties)", "full_signature": "@Activate protected void activate(@Nullable Map<String, @Nullable Object> properties)", "class_method_signature": "AutomaticInboxProcessor.activate(@Nullable Map<String, @Nullable Object> properties)", "testcase": false, "constructor": false}, {"identifier": "modified", "parameters": "(@Nullable Map<String, @Nullable Object> properties)", "modifiers": "@Modified protected", "return": "void", "signature": "void modified(@Nullable Map<String, @Nullable Object> properties)", "full_signature": "@Modified protected void modified(@Nullable Map<String, @Nullable Object> properties)", "class_method_signature": "AutomaticInboxProcessor.modified(@Nullable Map<String, @Nullable Object> properties)", "testcase": false, "constructor": false}, {"identifier": "deactivate", "parameters": "()", "modifiers": "@Deactivate protected", "return": "void", "signature": "void deactivate()", "full_signature": "@Deactivate protected void deactivate()", "class_method_signature": "AutomaticInboxProcessor.deactivate()", "testcase": false, "constructor": false}, {"identifier": "receiveTypedEvent", "parameters": "(ThingStatusInfoChangedEvent event)", "modifiers": "@Override public", "return": "void", "signature": "void receiveTypedEvent(ThingStatusInfoChangedEvent event)", "full_signature": "@Override public void receiveTypedEvent(ThingStatusInfoChangedEvent event)", "class_method_signature": "AutomaticInboxProcessor.receiveTypedEvent(ThingStatusInfoChangedEvent event)", "testcase": false, "constructor": false}, {"identifier": "thingAdded", "parameters": "(Inbox inbox, DiscoveryResult result)", "modifiers": "@Override public", "return": "void", "signature": "void thingAdded(Inbox inbox, DiscoveryResult result)", "full_signature": "@Override public void thingAdded(Inbox inbox, DiscoveryResult result)", "class_method_signature": "AutomaticInboxProcessor.thingAdded(Inbox inbox, DiscoveryResult result)", "testcase": false, "constructor": false}, {"identifier": "thingUpdated", "parameters": "(Inbox inbox, DiscoveryResult result)", "modifiers": "@Override public", "return": "void", "signature": "void thingUpdated(Inbox inbox, DiscoveryResult result)", "full_signature": "@Override public void thingUpdated(Inbox inbox, DiscoveryResult result)", "class_method_signature": "AutomaticInboxProcessor.thingUpdated(Inbox inbox, DiscoveryResult result)", "testcase": false, "constructor": false}, {"identifier": "thingRemoved", "parameters": "(Inbox inbox, DiscoveryResult result)", "modifiers": "@Override public", "return": "void", "signature": "void thingRemoved(Inbox inbox, DiscoveryResult result)", "full_signature": "@Override public void thingRemoved(Inbox inbox, DiscoveryResult result)", "class_method_signature": "AutomaticInboxProcessor.thingRemoved(Inbox inbox, DiscoveryResult result)", "testcase": false, "constructor": false}, {"identifier": "added", "parameters": "(Thing element)", "modifiers": "@Override public", "return": "void", "signature": "void added(Thing element)", "full_signature": "@Override public void added(Thing element)", "class_method_signature": "AutomaticInboxProcessor.added(Thing element)", "testcase": false, "constructor": false}, {"identifier": "removed", "parameters": "(Thing element)", "modifiers": "@Override public", "return": "void", "signature": "void removed(Thing element)", "full_signature": "@Override public void removed(Thing element)", "class_method_signature": "AutomaticInboxProcessor.removed(Thing element)", "testcase": false, "constructor": false}, {"identifier": "updated", "parameters": "(Thing oldElement, Thing element)", "modifiers": "@Override public", "return": "void", "signature": "void updated(Thing oldElement, Thing element)", "full_signature": "@Override public void updated(Thing oldElement, Thing element)", "class_method_signature": "AutomaticInboxProcessor.updated(Thing oldElement, Thing element)", "testcase": false, "constructor": false}, {"identifier": "getRepresentationValue", "parameters": "(DiscoveryResult result)", "modifiers": "private @Nullable", "return": "String", "signature": "String getRepresentationValue(DiscoveryResult result)", "full_signature": "private @Nullable String getRepresentationValue(DiscoveryResult result)", "class_method_signature": "AutomaticInboxProcessor.getRepresentationValue(DiscoveryResult result)", "testcase": false, "constructor": false}, {"identifier": "autoIgnore", "parameters": "(@Nullable Thing thing, ThingStatus thingStatus)", "modifiers": "private", "return": "void", "signature": "void autoIgnore(@Nullable Thing thing, ThingStatus thingStatus)", "full_signature": "private void autoIgnore(@Nullable Thing thing, ThingStatus thingStatus)", "class_method_signature": "AutomaticInboxProcessor.autoIgnore(@Nullable Thing thing, ThingStatus thingStatus)", "testcase": false, "constructor": false}, {"identifier": "checkAndIgnoreInInbox", "parameters": "(@Nullable Thing thing)", "modifiers": "private", "return": "void", "signature": "void checkAndIgnoreInInbox(@Nullable Thing thing)", "full_signature": "private void checkAndIgnoreInInbox(@Nullable Thing thing)", "class_method_signature": "AutomaticInboxProcessor.checkAndIgnoreInInbox(@Nullable Thing thing)", "testcase": false, "constructor": false}, {"identifier": "ignoreInInbox", "parameters": "(ThingTypeUID thingtypeUID, String representationValue)", "modifiers": "private", "return": "void", "signature": "void ignoreInInbox(ThingTypeUID thingtypeUID, String representationValue)", "full_signature": "private void ignoreInInbox(ThingTypeUID thingtypeUID, String representationValue)", "class_method_signature": "AutomaticInboxProcessor.ignoreInInbox(ThingTypeUID thingtypeUID, String representationValue)", "testcase": false, "constructor": false}, {"identifier": "removePossiblyIgnoredResultInInbox", "parameters": "(@Nullable Thing thing)", "modifiers": "private", "return": "void", "signature": "void removePossiblyIgnoredResultInInbox(@Nullable Thing thing)", "full_signature": "private void removePossiblyIgnoredResultInInbox(@Nullable Thing thing)", "class_method_signature": "AutomaticInboxProcessor.removePossiblyIgnoredResultInInbox(@Nullable Thing thing)", "testcase": false, "constructor": false}, {"identifier": "getRepresentationPropertyValueForThing", "parameters": "(Thing thing)", "modifiers": "private @Nullable", "return": "String", "signature": "String getRepresentationPropertyValueForThing(Thing thing)", "full_signature": "private @Nullable String getRepresentationPropertyValueForThing(Thing thing)", "class_method_signature": "AutomaticInboxProcessor.getRepresentationPropertyValueForThing(Thing thing)", "testcase": false, "constructor": false}, {"identifier": "removeFromInbox", "parameters": "(ThingTypeUID thingtypeUID, String representationValue)", "modifiers": "private", "return": "void", "signature": "void removeFromInbox(ThingTypeUID thingtypeUID, String representationValue)", "full_signature": "private void removeFromInbox(ThingTypeUID thingtypeUID, String representationValue)", "class_method_signature": "AutomaticInboxProcessor.removeFromInbox(ThingTypeUID thingtypeUID, String representationValue)", "testcase": false, "constructor": false}, {"identifier": "autoApproveInboxEntries", "parameters": "()", "modifiers": "private", "return": "void", "signature": "void autoApproveInboxEntries()", "full_signature": "private void autoApproveInboxEntries()", "class_method_signature": "AutomaticInboxProcessor.autoApproveInboxEntries()", "testcase": false, "constructor": false}, {"identifier": "isToBeAutoApproved", "parameters": "(DiscoveryResult result)", "modifiers": "private", "return": "boolean", "signature": "boolean isToBeAutoApproved(DiscoveryResult result)", "full_signature": "private boolean isToBeAutoApproved(DiscoveryResult result)", "class_method_signature": "AutomaticInboxProcessor.isToBeAutoApproved(DiscoveryResult result)", "testcase": false, "constructor": false}, {"identifier": "addInboxAutoApprovePredicate", "parameters": "(InboxAutoApprovePredicate inboxAutoApprovePredicate)", "modifiers": "@Reference(cardinality = ReferenceCardinality.MULTIPLE, policy = ReferencePolicy.DYNAMIC) protected", "return": "void", "signature": "void addInboxAutoApprovePredicate(InboxAutoApprovePredicate inboxAutoApprovePredicate)", "full_signature": "@Reference(cardinality = ReferenceCardinality.MULTIPLE, policy = ReferencePolicy.DYNAMIC) protected void addInboxAutoApprovePredicate(InboxAutoApprovePredicate inboxAutoApprovePredicate)", "class_method_signature": "AutomaticInboxProcessor.addInboxAutoApprovePredicate(InboxAutoApprovePredicate inboxAutoApprovePredicate)", "testcase": false, "constructor": false}, {"identifier": "removeInboxAutoApprovePredicate", "parameters": "(InboxAutoApprovePredicate inboxAutoApprovePredicate)", "modifiers": "protected", "return": "void", "signature": "void removeInboxAutoApprovePredicate(InboxAutoApprovePredicate inboxAutoApprovePredicate)", "full_signature": "protected void removeInboxAutoApprovePredicate(InboxAutoApprovePredicate inboxAutoApprovePredicate)", "class_method_signature": "AutomaticInboxProcessor.removeInboxAutoApprovePredicate(InboxAutoApprovePredicate inboxAutoApprovePredicate)", "testcase": false, "constructor": false}], "file": "bundles/org.openhab.core.config.discovery/src/main/java/org/openhab/core/config/discovery/internal/AutomaticInboxProcessor.java"}, "focal_method": {"identifier": "removed", "parameters": "(Thing element)", "modifiers": "@Override public", "return": "void", "body": "@Override\n    public void removed(Thing element) {\n        removePossiblyIgnoredResultInInbox(element);\n    }", "signature": "void removed(Thing element)", "full_signature": "@Override public void removed(Thing element)", "class_method_signature": "AutomaticInboxProcessor.removed(Thing element)", "testcase": false, "constructor": false, "invocations": ["removePossiblyIgnoredResultInInbox"]}, "repository": {"repo_id": 48337670, "url": "https://github.com/openhab/openhab-core", "stars": 241, "created": "12/20/2015 9:23:20 PM +00:00", "updates": "2020-01-27T16:55:53+00:00", "fork": "False", "license": "licensed"}}