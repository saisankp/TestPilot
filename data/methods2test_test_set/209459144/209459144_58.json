{"test_class": {"identifier": "TensorFlowWorkerComponentTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "@Rule\n  public ExpectedException expectedException = ExpectedException.none();", "modifier": "@Rule\n  public", "type": "ExpectedException", "declarator": "expectedException = ExpectedException.none()", "var_name": "expectedException"}, {"original_string": "private ComponentTestCommons testCommons =\n      new ComponentTestCommons(TensorFlowRole.TENSORBOARD);", "modifier": "private", "type": "ComponentTestCommons", "declarator": "testCommons =\n      new ComponentTestCommons(TensorFlowRole.TENSORBOARD)", "var_name": "testCommons"}], "file": "submarine-server/server-submitter/submitter-yarnservice/src/test/java/org/apache/submarine/server/submitter/yarnservice/tensorflow/component/TensorFlowWorkerComponentTest.java"}, "test_case": {"identifier": "testPrimaryWorkerComponentNumWorkersIsTwo", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n  public void testPrimaryWorkerComponentNumWorkersIsTwo() throws IOException {\n    testCommons.yarnConfig.set(\"hadoop.registry.dns.domain-name\", \"testDomain\");\n    testCommons = new ComponentTestCommons(TensorFlowRole.PRIMARY_WORKER);\n    testCommons.setupTensorFlow();\n\n    TensorFlowRunJobParameters parameters = new TensorFlowRunJobParameters();\n    parameters.setWorkerResource(testCommons.resource);\n    parameters.setName(\"testJobName\");\n    parameters.setNumWorkers(2);\n    parameters.setWorkerDockerImage(\"testWorkerDockerImage\");\n\n    TensorFlowWorkerComponent workerComponent =\n        createWorkerComponent(parameters);\n\n    Component component = workerComponent.createComponent();\n\n    assertEquals(1L, (long) component.getNumberOfContainers());\n    // If the dependencies are upgraded to hadoop 3.3.0.\n    // yarn.service.container-state-report-as-service-state can be replaced\n    // with CONTAINER_STATE_REPORT_AS_SERVICE_STATE\n    verifyCommons(component, ImmutableMap.of(\n        \"yarn.service.container-state-report-as-service-state\", \"true\"));\n  }", "signature": "void testPrimaryWorkerComponentNumWorkersIsTwo()", "full_signature": "@Test public void testPrimaryWorkerComponentNumWorkersIsTwo()", "class_method_signature": "TensorFlowWorkerComponentTest.testPrimaryWorkerComponentNumWorkersIsTwo()", "testcase": true, "constructor": false, "invocations": ["set", "setupTensorFlow", "setWorkerResource", "setName", "setNumWorkers", "setWorkerDockerImage", "createWorkerComponent", "createComponent", "assertEquals", "getNumberOfContainers", "verifyCommons", "of"]}, "focal_class": {"identifier": "TensorFlowWorkerComponent", "superclass": "extends AbstractComponent", "interfaces": "", "fields": [], "methods": [{"identifier": "TensorFlowWorkerComponent", "parameters": "(FileSystemOperations fsOperations,\n                                   RemoteDirectoryManager remoteDirectoryManager,\n                                   TensorFlowRunJobParameters parameters, Role role,\n                                   TensorFlowLaunchCommandFactory launchCommandFactory,\n                                   Configuration yarnConfig)", "modifiers": "public", "return": "", "signature": " TensorFlowWorkerComponent(FileSystemOperations fsOperations,\n                                   RemoteDirectoryManager remoteDirectoryManager,\n                                   TensorFlowRunJobParameters parameters, Role role,\n                                   TensorFlowLaunchCommandFactory launchCommandFactory,\n                                   Configuration yarnConfig)", "full_signature": "public  TensorFlowWorkerComponent(FileSystemOperations fsOperations,\n                                   RemoteDirectoryManager remoteDirectoryManager,\n                                   TensorFlowRunJobParameters parameters, Role role,\n                                   TensorFlowLaunchCommandFactory launchCommandFactory,\n                                   Configuration yarnConfig)", "class_method_signature": "TensorFlowWorkerComponent.TensorFlowWorkerComponent(FileSystemOperations fsOperations,\n                                   RemoteDirectoryManager remoteDirectoryManager,\n                                   TensorFlowRunJobParameters parameters, Role role,\n                                   TensorFlowLaunchCommandFactory launchCommandFactory,\n                                   Configuration yarnConfig)", "testcase": false, "constructor": true}, {"identifier": "createComponent", "parameters": "()", "modifiers": "@Override public", "return": "Component", "signature": "Component createComponent()", "full_signature": "@Override public Component createComponent()", "class_method_signature": "TensorFlowWorkerComponent.createComponent()", "testcase": false, "constructor": false}], "file": "submarine-server/server-submitter/submitter-yarnservice/src/main/java/org/apache/submarine/server/submitter/yarnservice/tensorflow/component/TensorFlowWorkerComponent.java"}, "focal_method": {"identifier": "createComponent", "parameters": "()", "modifiers": "@Override public", "return": "Component", "body": "@Override\n  public Component createComponent() throws IOException {\n    return createComponentInternal();\n  }", "signature": "Component createComponent()", "full_signature": "@Override public Component createComponent()", "class_method_signature": "TensorFlowWorkerComponent.createComponent()", "testcase": false, "constructor": false, "invocations": ["createComponentInternal"]}, "repository": {"repo_id": 209459144, "url": "https://github.com/apache/submarine", "stars": 185, "created": "9/19/2019 4:00:17 AM +00:00", "updates": "2020-01-27T15:27:05+00:00", "fork": "False", "license": "licensed"}}