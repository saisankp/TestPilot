{"test_class": {"identifier": "DynamoDBJSONRootWorkerTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final String ROOT_JSON_FILE = WorkerTestUtils.getPath(\"JSON_ROOT.json\");", "modifier": "private static final", "type": "String", "declarator": "ROOT_JSON_FILE = WorkerTestUtils.getPath(\"JSON_ROOT.json\")", "var_name": "ROOT_JSON_FILE"}, {"original_string": "private static final String EMPTY_MISSION_BODY_FILE = WorkerTestUtils.getPath(\"JSON_ROOT_empty_mission_body.json\");", "modifier": "private static final", "type": "String", "declarator": "EMPTY_MISSION_BODY_FILE = WorkerTestUtils.getPath(\"JSON_ROOT_empty_mission_body.json\")", "var_name": "EMPTY_MISSION_BODY_FILE"}, {"original_string": "private static final Map<String, String> EXPECTED_MAP;", "modifier": "private static final", "type": "Map<String, String>", "declarator": "EXPECTED_MAP", "var_name": "EXPECTED_MAP"}], "file": "ingester/src/test/java/com/amazonaws/services/dynamodbv2/json/demo/mars/worker/DynamoDBJSONRootWorkerTest.java"}, "test_case": {"identifier": "testGetMissionToManifestMap", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testGetMissionToManifestMap() {\n        final URL url = PowerMock.createMock(URL.class);\n        PowerMock.mockStatic(JSONUtils.class);\n        PowerMock.mockStatic(NetworkUtils.class);\n        String manifest = null;\n        try {\n            manifest = WorkerTestUtils.readFile(ROOT_JSON_FILE);\n        } catch (final IOException e1) {\n            fail(\"Could not read file: \" + ROOT_JSON_FILE);\n        }\n        try {\n            NetworkUtils.getDataFromURL(url, null, ImageIngester.DEFAULT_CONNECT_TIMEOUT);\n            PowerMock.expectLastCall().andReturn(manifest.getBytes());\n            PowerMock.replayAll();\n            final Map<String, String> missionMap = DynamoDBJSONRootWorker.getMissionToManifestMap(url, ImageIngester.DEFAULT_CONNECT_TIMEOUT);\n            assertEquals(EXPECTED_MAP, missionMap);\n        } catch (final IOException e) {\n            fail(e.getMessage());\n        }\n\n    }", "signature": "void testGetMissionToManifestMap()", "full_signature": "@Test public void testGetMissionToManifestMap()", "class_method_signature": "DynamoDBJSONRootWorkerTest.testGetMissionToManifestMap()", "testcase": true, "constructor": false, "invocations": ["createMock", "mockStatic", "mockStatic", "readFile", "fail", "getDataFromURL", "andReturn", "expectLastCall", "getBytes", "replayAll", "getMissionToManifestMap", "assertEquals", "fail", "getMessage"]}, "focal_class": {"identifier": "DynamoDBJSONRootWorker", "superclass": "", "interfaces": "implements Callable<Map<String, String>>", "fields": [{"original_string": "private static final Logger LOGGER = Logger.getLogger(DynamoDBJSONRootWorker.class.getName());", "modifier": "private static final", "type": "Logger", "declarator": "LOGGER = Logger.getLogger(DynamoDBJSONRootWorker.class.getName())", "var_name": "LOGGER"}, {"original_string": "private static final String IMAGE_RESOURCE_KEY = \"image_manifest\";", "modifier": "private static final", "type": "String", "declarator": "IMAGE_RESOURCE_KEY = \"image_manifest\"", "var_name": "IMAGE_RESOURCE_KEY"}, {"original_string": "private final String rootURL;", "modifier": "private final", "type": "String", "declarator": "rootURL", "var_name": "rootURL"}, {"original_string": "private final int connectTimeout;", "modifier": "private final", "type": "int", "declarator": "connectTimeout", "var_name": "connectTimeout"}], "methods": [{"identifier": "getMissionToManifestMap", "parameters": "(final URL rootJsonUrl, final int connectTimeout)", "modifiers": "public static", "return": "Map<String, String>", "signature": "Map<String, String> getMissionToManifestMap(final URL rootJsonUrl, final int connectTimeout)", "full_signature": "public static Map<String, String> getMissionToManifestMap(final URL rootJsonUrl, final int connectTimeout)", "class_method_signature": "DynamoDBJSONRootWorker.getMissionToManifestMap(final URL rootJsonUrl, final int connectTimeout)", "testcase": false, "constructor": false}, {"identifier": "DynamoDBJSONRootWorker", "parameters": "(final String rootURL, final int connectTimeout)", "modifiers": "public", "return": "", "signature": " DynamoDBJSONRootWorker(final String rootURL, final int connectTimeout)", "full_signature": "public  DynamoDBJSONRootWorker(final String rootURL, final int connectTimeout)", "class_method_signature": "DynamoDBJSONRootWorker.DynamoDBJSONRootWorker(final String rootURL, final int connectTimeout)", "testcase": false, "constructor": true}, {"identifier": "call", "parameters": "()", "modifiers": "@Override public", "return": "Map<String, String>", "signature": "Map<String, String> call()", "full_signature": "@Override public Map<String, String> call()", "class_method_signature": "DynamoDBJSONRootWorker.call()", "testcase": false, "constructor": false}], "file": "ingester/src/main/java/com/amazonaws/services/dynamodbv2/json/demo/mars/worker/DynamoDBJSONRootWorker.java"}, "focal_method": {"identifier": "getMissionToManifestMap", "parameters": "(final URL rootJsonUrl, final int connectTimeout)", "modifiers": "public static", "return": "Map<String, String>", "body": "public static Map<String, String> getMissionToManifestMap(final URL rootJsonUrl, final int connectTimeout)\n        throws IOException {\n        final Map<String, String> map = new HashMap<String, String>();\n        // Retrieve JSON\n        final JsonNode root = JSONParser.getJSONFromURL(rootJsonUrl, connectTimeout);\n        final Iterator<Entry<String, JsonNode>> it = root.fields();\n        // Top level is array of mission names\n        while (it.hasNext()) {\n            final Entry<String, JsonNode> pair = it.next();\n            final String mission = pair.getKey();\n            if (pair.getKey() == null) {\n                // Log error and skip mission\n                LOGGER.warning(\"Null mission name\");\n                continue;\n            }\n            final JsonNode missionObject = pair.getValue();\n            if (missionObject == null) {\n                // Log error and skip mission\n                LOGGER.warning(\"Null mission object for: \" + mission);\n                continue;\n            }\n            if (!missionObject.has(IMAGE_RESOURCE_KEY)) {\n                // Log error and skip mission\n                LOGGER.warning(\"Missing mission manifest for \" + mission + \": \" + missionObject.toString());\n                continue;\n            }\n            // Image manifest key has URL\n            final String manifestValue = missionObject.get(IMAGE_RESOURCE_KEY).asText();\n            map.put(mission, manifestValue);\n        }\n        return map;\n    }", "signature": "Map<String, String> getMissionToManifestMap(final URL rootJsonUrl, final int connectTimeout)", "full_signature": "public static Map<String, String> getMissionToManifestMap(final URL rootJsonUrl, final int connectTimeout)", "class_method_signature": "DynamoDBJSONRootWorker.getMissionToManifestMap(final URL rootJsonUrl, final int connectTimeout)", "testcase": false, "constructor": false, "invocations": ["getJSONFromURL", "fields", "hasNext", "next", "getKey", "getKey", "warning", "getValue", "warning", "has", "warning", "toString", "asText", "get", "put"]}, "repository": {"repo_id": 24917019, "url": "https://github.com/aws-samples/aws-dynamodb-mars-json-demo", "language": "Java", "is_fork": false, "fork_count": 19, "stargazer_count": 48, "size": 1648, "license": "licensed"}}