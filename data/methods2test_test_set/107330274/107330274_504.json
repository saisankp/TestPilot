{"test_class": {"identifier": "AutoScalingSpringResourceTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final GetPolicyResult GET_POLICY_RESULT = GetPolicyResult.newBuilder().build();", "modifier": "private static final", "type": "GetPolicyResult", "declarator": "GET_POLICY_RESULT = GetPolicyResult.newBuilder().build()", "var_name": "GET_POLICY_RESULT"}, {"original_string": "private static final ScalingPolicyID SCALING_POLICY_ID = ScalingPolicyID.newBuilder().setId(\"myPolicyId\").build();", "modifier": "private static final", "type": "ScalingPolicyID", "declarator": "SCALING_POLICY_ID = ScalingPolicyID.newBuilder().setId(\"myPolicyId\").build()", "var_name": "SCALING_POLICY_ID"}, {"original_string": "@MockBean\n    private AutoScalingService serviceMock;", "modifier": "@MockBean\n    private", "type": "AutoScalingService", "declarator": "serviceMock", "var_name": "serviceMock"}, {"original_string": "@Autowired\n    private MockMvc mockMvc;", "modifier": "@Autowired\n    private", "type": "MockMvc", "declarator": "mockMvc", "var_name": "mockMvc"}], "file": "titus-server-runtime/src/test/java/com/netflix/titus/runtime/endpoint/v3/rest/AutoScalingSpringResourceTest.java"}, "test_case": {"identifier": "testSetScalingPolicy", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testSetScalingPolicy() throws Exception {\n        PutPolicyRequest request = PutPolicyRequest.newBuilder().build();\n\n        when(serviceMock.setAutoScalingPolicy(request, JUNIT_REST_CALL_METADATA)).thenReturn(Observable.just(SCALING_POLICY_ID));\n        ScalingPolicyID entity = SpringMockMvcUtil.doPost(mockMvc, \"/api/v3/autoscaling/scalingPolicy\", request, ScalingPolicyID.class);\n        assertThat(entity).isEqualTo(SCALING_POLICY_ID);\n\n        verify(serviceMock, times(1)).setAutoScalingPolicy(request, JUNIT_REST_CALL_METADATA);\n    }", "signature": "void testSetScalingPolicy()", "full_signature": "@Test public void testSetScalingPolicy()", "class_method_signature": "AutoScalingSpringResourceTest.testSetScalingPolicy()", "testcase": true, "constructor": false, "invocations": ["build", "newBuilder", "thenReturn", "when", "setAutoScalingPolicy", "just", "doPost", "isEqualTo", "assertThat", "setAutoScalingPolicy", "verify", "times"]}, "focal_class": {"identifier": "AutoScalingSpringResource", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static Logger log = LoggerFactory.getLogger(AutoScalingResource.class);", "modifier": "private static", "type": "Logger", "declarator": "log = LoggerFactory.getLogger(AutoScalingResource.class)", "var_name": "log"}, {"original_string": "private AutoScalingService autoScalingService;", "modifier": "private", "type": "AutoScalingService", "declarator": "autoScalingService", "var_name": "autoScalingService"}], "methods": [{"identifier": "AutoScalingSpringResource", "parameters": "(AutoScalingService autoScalingService)", "modifiers": "@Inject public", "return": "", "signature": " AutoScalingSpringResource(AutoScalingService autoScalingService)", "full_signature": "@Inject public  AutoScalingSpringResource(AutoScalingService autoScalingService)", "class_method_signature": "AutoScalingSpringResource.AutoScalingSpringResource(AutoScalingService autoScalingService)", "testcase": false, "constructor": true}, {"identifier": "getAllScalingPolicies", "parameters": "(CallMetadataAuthentication authentication)", "modifiers": "@ApiOperation(\"Find scaling policies for a job\") @GetMapping(path = \"/scalingPolicies\") public", "return": "GetPolicyResult", "signature": "GetPolicyResult getAllScalingPolicies(CallMetadataAuthentication authentication)", "full_signature": "@ApiOperation(\"Find scaling policies for a job\") @GetMapping(path = \"/scalingPolicies\") public GetPolicyResult getAllScalingPolicies(CallMetadataAuthentication authentication)", "class_method_signature": "AutoScalingSpringResource.getAllScalingPolicies(CallMetadataAuthentication authentication)", "testcase": false, "constructor": false}, {"identifier": "getScalingPolicyForJob", "parameters": "(@PathVariable(\"jobId\") String jobId, CallMetadataAuthentication authentication)", "modifiers": "@ApiOperation(\"Find scaling policies for a job\") @GetMapping(path = \"/scalingPolicies/{jobId}\") public", "return": "GetPolicyResult", "signature": "GetPolicyResult getScalingPolicyForJob(@PathVariable(\"jobId\") String jobId, CallMetadataAuthentication authentication)", "full_signature": "@ApiOperation(\"Find scaling policies for a job\") @GetMapping(path = \"/scalingPolicies/{jobId}\") public GetPolicyResult getScalingPolicyForJob(@PathVariable(\"jobId\") String jobId, CallMetadataAuthentication authentication)", "class_method_signature": "AutoScalingSpringResource.getScalingPolicyForJob(@PathVariable(\"jobId\") String jobId, CallMetadataAuthentication authentication)", "testcase": false, "constructor": false}, {"identifier": "setScalingPolicy", "parameters": "(@RequestBody PutPolicyRequest putPolicyRequest, CallMetadataAuthentication authentication)", "modifiers": "@ApiOperation(\"Create or Update scaling policy\") @PostMapping(path = \"/scalingPolicy\") public", "return": "ScalingPolicyID", "signature": "ScalingPolicyID setScalingPolicy(@RequestBody PutPolicyRequest putPolicyRequest, CallMetadataAuthentication authentication)", "full_signature": "@ApiOperation(\"Create or Update scaling policy\") @PostMapping(path = \"/scalingPolicy\") public ScalingPolicyID setScalingPolicy(@RequestBody PutPolicyRequest putPolicyRequest, CallMetadataAuthentication authentication)", "class_method_signature": "AutoScalingSpringResource.setScalingPolicy(@RequestBody PutPolicyRequest putPolicyRequest, CallMetadataAuthentication authentication)", "testcase": false, "constructor": false}, {"identifier": "getScalingPolicy", "parameters": "(@PathVariable(\"policyId\") String policyId, CallMetadataAuthentication authentication)", "modifiers": "@ApiOperation(\"Find scaling policy for a policy Id\") @GetMapping(path = \"scalingPolicy/{policyId}\") public", "return": "GetPolicyResult", "signature": "GetPolicyResult getScalingPolicy(@PathVariable(\"policyId\") String policyId, CallMetadataAuthentication authentication)", "full_signature": "@ApiOperation(\"Find scaling policy for a policy Id\") @GetMapping(path = \"scalingPolicy/{policyId}\") public GetPolicyResult getScalingPolicy(@PathVariable(\"policyId\") String policyId, CallMetadataAuthentication authentication)", "class_method_signature": "AutoScalingSpringResource.getScalingPolicy(@PathVariable(\"policyId\") String policyId, CallMetadataAuthentication authentication)", "testcase": false, "constructor": false}, {"identifier": "removePolicy", "parameters": "(@PathVariable(\"policyId\") String policyId, CallMetadataAuthentication authentication)", "modifiers": "@ApiOperation(\"Delete scaling policy\") @DeleteMapping(path = \"scalingPolicy/{policyId}\") public", "return": "ResponseEntity<Void>", "signature": "ResponseEntity<Void> removePolicy(@PathVariable(\"policyId\") String policyId, CallMetadataAuthentication authentication)", "full_signature": "@ApiOperation(\"Delete scaling policy\") @DeleteMapping(path = \"scalingPolicy/{policyId}\") public ResponseEntity<Void> removePolicy(@PathVariable(\"policyId\") String policyId, CallMetadataAuthentication authentication)", "class_method_signature": "AutoScalingSpringResource.removePolicy(@PathVariable(\"policyId\") String policyId, CallMetadataAuthentication authentication)", "testcase": false, "constructor": false}, {"identifier": "updateScalingPolicy", "parameters": "(@RequestBody UpdatePolicyRequest updatePolicyRequest, CallMetadataAuthentication authentication)", "modifiers": "@ApiOperation(\"Update scaling policy\") @PutMapping(\"scalingPolicy\") public", "return": "ResponseEntity<Void>", "signature": "ResponseEntity<Void> updateScalingPolicy(@RequestBody UpdatePolicyRequest updatePolicyRequest, CallMetadataAuthentication authentication)", "full_signature": "@ApiOperation(\"Update scaling policy\") @PutMapping(\"scalingPolicy\") public ResponseEntity<Void> updateScalingPolicy(@RequestBody UpdatePolicyRequest updatePolicyRequest, CallMetadataAuthentication authentication)", "class_method_signature": "AutoScalingSpringResource.updateScalingPolicy(@RequestBody UpdatePolicyRequest updatePolicyRequest, CallMetadataAuthentication authentication)", "testcase": false, "constructor": false}], "file": "titus-server-runtime/src/main/java/com/netflix/titus/runtime/endpoint/v3/rest/AutoScalingSpringResource.java"}, "focal_method": {"identifier": "setScalingPolicy", "parameters": "(@RequestBody PutPolicyRequest putPolicyRequest, CallMetadataAuthentication authentication)", "modifiers": "@ApiOperation(\"Create or Update scaling policy\") @PostMapping(path = \"/scalingPolicy\") public", "return": "ScalingPolicyID", "body": "@ApiOperation(\"Create or Update scaling policy\")\n    @PostMapping(path = \"/scalingPolicy\")\n    public ScalingPolicyID setScalingPolicy(@RequestBody PutPolicyRequest putPolicyRequest, CallMetadataAuthentication authentication) {\n        Observable<ScalingPolicyID> putPolicyResult = autoScalingService.setAutoScalingPolicy(putPolicyRequest, authentication.getCallMetadata());\n        ScalingPolicyID policyId = Responses.fromSingleValueObservable(putPolicyResult);\n        log.info(\"New policy created {}\", policyId);\n        return policyId;\n    }", "signature": "ScalingPolicyID setScalingPolicy(@RequestBody PutPolicyRequest putPolicyRequest, CallMetadataAuthentication authentication)", "full_signature": "@ApiOperation(\"Create or Update scaling policy\") @PostMapping(path = \"/scalingPolicy\") public ScalingPolicyID setScalingPolicy(@RequestBody PutPolicyRequest putPolicyRequest, CallMetadataAuthentication authentication)", "class_method_signature": "AutoScalingSpringResource.setScalingPolicy(@RequestBody PutPolicyRequest putPolicyRequest, CallMetadataAuthentication authentication)", "testcase": false, "constructor": false, "invocations": ["setAutoScalingPolicy", "getCallMetadata", "fromSingleValueObservable", "info"]}, "repository": {"repo_id": 107330274, "url": "https://github.com/Netflix/titus-control-plane", "stars": 241, "created": "10/17/2017 10:20:55 PM +00:00", "updates": "2020-01-25T13:01:05+00:00", "fork": "False", "license": "licensed"}}