{"test_class": {"identifier": "SequencesStoreTest", "superclass": "extends GenericStorageTest", "interfaces": "", "fields": [], "file": "rpki-validator/src/test/java/net/ripe/rpki/validator3/storage/stores/impl/SequencesStoreTest.java"}, "test_case": {"identifier": "testNext", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testNext() {\n        assertEquals(new Long(1L), wtx(tx -> getSequences().next(tx, \"seq1\")));\n        assertEquals(new Long(2L), wtx(tx -> getSequences().next(tx, \"seq1\")));\n        assertEquals(new Long(1L), wtx(tx -> getSequences().next(tx, \"seq2\")));\n        assertEquals(new Long(2L), wtx(tx -> getSequences().next(tx, \"seq2\")));\n        assertEquals(new Long(3L), wtx(tx -> getSequences().next(tx, \"seq2\")));\n    }", "signature": "void testNext()", "full_signature": "@Test public void testNext()", "class_method_signature": "SequencesStoreTest.testNext()", "testcase": true, "constructor": false, "invocations": ["assertEquals", "wtx", "next", "getSequences", "assertEquals", "wtx", "next", "getSequences", "assertEquals", "wtx", "next", "getSequences", "assertEquals", "wtx", "next", "getSequences", "assertEquals", "wtx", "next", "getSequences"]}, "focal_class": {"identifier": "SequencesStore", "superclass": "extends GenericStoreImpl<Long>", "interfaces": "", "fields": [{"original_string": "private final String SEQUENCES = \"sequences\";", "modifier": "private final", "type": "String", "declarator": "SEQUENCES = \"sequences\"", "var_name": "SEQUENCES"}, {"original_string": "private final IxMap<Long> ixMap;", "modifier": "private final", "type": "IxMap<Long>", "declarator": "ixMap", "var_name": "ixMap"}], "methods": [{"identifier": "SequencesStore", "parameters": "(Storage storage)", "modifiers": "@Autowired public", "return": "", "signature": " SequencesStore(Storage storage)", "full_signature": "@Autowired public  SequencesStore(Storage storage)", "class_method_signature": "SequencesStore.SequencesStore(Storage storage)", "testcase": false, "constructor": true}, {"identifier": "next", "parameters": "(Tx.Write tx, String name)", "modifiers": "public", "return": "long", "signature": "long next(Tx.Write tx, String name)", "full_signature": "public long next(Tx.Write tx, String name)", "class_method_signature": "SequencesStore.next(Tx.Write tx, String name)", "testcase": false, "constructor": false}, {"identifier": "ixMap", "parameters": "()", "modifiers": "@Override protected", "return": "IxMap<Long>", "signature": "IxMap<Long> ixMap()", "full_signature": "@Override protected IxMap<Long> ixMap()", "class_method_signature": "SequencesStore.ixMap()", "testcase": false, "constructor": false}], "file": "rpki-validator/src/main/java/net/ripe/rpki/validator3/storage/stores/impl/SequencesStore.java"}, "focal_method": {"identifier": "next", "parameters": "(Tx.Write tx, String name)", "modifiers": "public", "return": "long", "body": "public long next(Tx.Write tx, String name) {\n        final Key key = Key.of(name);\n        final Optional<Long> seqValue = ixMap.get(tx, key);\n        if (seqValue.isPresent()) {\n            final long nextValue = seqValue.get() + 1;\n            ixMap.put(tx, key, nextValue);\n            return nextValue;\n        }\n        ixMap.put(tx, key, 1L);\n        return 1L;\n    }", "signature": "long next(Tx.Write tx, String name)", "full_signature": "public long next(Tx.Write tx, String name)", "class_method_signature": "SequencesStore.next(Tx.Write tx, String name)", "testcase": false, "constructor": false, "invocations": ["of", "get", "isPresent", "get", "put", "put"]}, "repository": {"repo_id": 104217624, "url": "https://github.com/RIPE-NCC/rpki-validator-3", "stars": 32, "created": "9/20/2017 1:15:05 PM +00:00", "updates": "2020-01-27T10:48:38+00:00", "fork": "False", "license": "licensed"}}