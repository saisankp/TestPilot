{"test_class": {"identifier": "JmsConnectionHandlingActorTest", "superclass": "extends WithMockServers", "interfaces": "", "fields": [{"original_string": "@SuppressWarnings(\"NullableProblems\") private static ActorSystem actorSystem;", "modifier": "@SuppressWarnings(\"NullableProblems\") private static", "type": "ActorSystem", "declarator": "actorSystem", "var_name": "actorSystem"}, {"original_string": "private static final ConnectionId connectionId = TestConstants.createRandomConnectionId();", "modifier": "private static final", "type": "ConnectionId", "declarator": "connectionId = TestConstants.createRandomConnectionId()", "var_name": "connectionId"}, {"original_string": "private static Connection connection;", "modifier": "private static", "type": "Connection", "declarator": "connection", "var_name": "connection"}, {"original_string": "@Mock private final Session mockSession = Mockito.mock(Session.class);", "modifier": "@Mock private final", "type": "Session", "declarator": "mockSession = Mockito.mock(Session.class)", "var_name": "mockSession"}, {"original_string": "@Mock private final JmsConnection mockConnection = Mockito.mock(JmsConnection.class);", "modifier": "@Mock private final", "type": "JmsConnection", "declarator": "mockConnection = Mockito.mock(JmsConnection.class)", "var_name": "mockConnection"}, {"original_string": "private final JmsConnectionFactory jmsConnectionFactory = (connection1, exceptionListener) -> mockConnection;", "modifier": "private final", "type": "JmsConnectionFactory", "declarator": "jmsConnectionFactory = (connection1, exceptionListener) -> mockConnection", "var_name": "jmsConnectionFactory"}], "file": "services/connectivity/messaging/src/test/java/org/eclipse/ditto/services/connectivity/messaging/amqp/JmsConnectionHandlingActorTest.java"}, "test_case": {"identifier": "handleJmsConnect", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void handleJmsConnect() throws JMSException {\n        new TestKit(actorSystem) {{\n\n            final Props props = JMSConnectionHandlingActor.props(connection, e -> {}, jmsConnectionFactory);\n            final ActorRef connectionHandlingActor = watch(actorSystem.actorOf(props));\n\n            final TestProbe origin = TestProbe.apply(actorSystem);\n\n            connectionHandlingActor.tell(new AmqpClientActor.JmsConnect(origin.ref()), getRef());\n\n            final ClientConnected connected = expectMsgClass(ClientConnected.class);\n            assertThat(connected.getOrigin()).contains(origin.ref());\n\n            verify(mockConnection).start();\n            verify(mockSession, times(connection.getSources()\n                    .stream()\n                    .mapToInt(s -> s.getAddresses().size() * s.getConsumerCount())\n                    .sum())).createConsumer(any());\n        }};\n    }", "signature": "void handleJmsConnect()", "full_signature": "@Test public void handleJmsConnect()", "class_method_signature": "JmsConnectionHandlingActorTest.handleJmsConnect()", "testcase": true, "constructor": false, "invocations": ["props", "watch", "actorOf", "apply", "tell", "ref", "getRef", "expectMsgClass", "contains", "assertThat", "getOrigin", "ref", "start", "verify", "createConsumer", "verify", "times", "sum", "mapToInt", "stream", "getSources", "size", "getAddresses", "getConsumerCount", "any"]}, "focal_class": {"identifier": "JMSConnectionHandlingActor", "superclass": "extends AbstractActor", "interfaces": "", "fields": [{"original_string": "private static final int JMS_INDIVIDUAL_ACKNOWLEDGE_MODE_MAGIC_NUMBER = 101;", "modifier": "private static final", "type": "int", "declarator": "JMS_INDIVIDUAL_ACKNOWLEDGE_MODE_MAGIC_NUMBER = 101", "var_name": "JMS_INDIVIDUAL_ACKNOWLEDGE_MODE_MAGIC_NUMBER"}, {"original_string": "static final String ACTOR_NAME_PREFIX = \"jmsConnectionHandling-\";", "modifier": "static final", "type": "String", "declarator": "ACTOR_NAME_PREFIX = \"jmsConnectionHandling-\"", "var_name": "ACTOR_NAME_PREFIX"}, {"original_string": "private static final String DISPATCHER_NAME = \"jms-connection-handling-dispatcher\";", "modifier": "private static final", "type": "String", "declarator": "DISPATCHER_NAME = \"jms-connection-handling-dispatcher\"", "var_name": "DISPATCHER_NAME"}, {"original_string": "private final DiagnosticLoggingAdapter log = LogUtil.obtain(this);", "modifier": "private final", "type": "DiagnosticLoggingAdapter", "declarator": "log = LogUtil.obtain(this)", "var_name": "log"}, {"original_string": "private final Connection connection;", "modifier": "private final", "type": "Connection", "declarator": "connection", "var_name": "connection"}, {"original_string": "private final ExceptionListener exceptionListener;", "modifier": "private final", "type": "ExceptionListener", "declarator": "exceptionListener", "var_name": "exceptionListener"}, {"original_string": "private final JmsConnectionFactory jmsConnectionFactory;", "modifier": "private final", "type": "JmsConnectionFactory", "declarator": "jmsConnectionFactory", "var_name": "jmsConnectionFactory"}, {"original_string": "@Nullable private Session currentSession = null;", "modifier": "@Nullable private", "type": "Session", "declarator": "currentSession = null", "var_name": "currentSession"}], "methods": [{"identifier": "JMSConnectionHandlingActor", "parameters": "(final Connection connection, final ExceptionListener exceptionListener,\n            final JmsConnectionFactory jmsConnectionFactory)", "modifiers": "@SuppressWarnings(\"unused\") private", "return": "", "signature": " JMSConnectionHandlingActor(final Connection connection, final ExceptionListener exceptionListener,\n            final JmsConnectionFactory jmsConnectionFactory)", "full_signature": "@SuppressWarnings(\"unused\") private  JMSConnectionHandlingActor(final Connection connection, final ExceptionListener exceptionListener,\n            final JmsConnectionFactory jmsConnectionFactory)", "class_method_signature": "JMSConnectionHandlingActor.JMSConnectionHandlingActor(final Connection connection, final ExceptionListener exceptionListener,\n            final JmsConnectionFactory jmsConnectionFactory)", "testcase": false, "constructor": true}, {"identifier": "props", "parameters": "(final Connection connection, final ExceptionListener exceptionListener,\n            final JmsConnectionFactory jmsConnectionFactory)", "modifiers": "static", "return": "Props", "signature": "Props props(final Connection connection, final ExceptionListener exceptionListener,\n            final JmsConnectionFactory jmsConnectionFactory)", "full_signature": "static Props props(final Connection connection, final ExceptionListener exceptionListener,\n            final JmsConnectionFactory jmsConnectionFactory)", "class_method_signature": "JMSConnectionHandlingActor.props(final Connection connection, final ExceptionListener exceptionListener,\n            final JmsConnectionFactory jmsConnectionFactory)", "testcase": false, "constructor": false}, {"identifier": "propsWithOwnDispatcher", "parameters": "(final Connection connection, final ExceptionListener exceptionListener,\n            final JmsConnectionFactory jmsConnectionFactory)", "modifiers": "static", "return": "Props", "signature": "Props propsWithOwnDispatcher(final Connection connection, final ExceptionListener exceptionListener,\n            final JmsConnectionFactory jmsConnectionFactory)", "full_signature": "static Props propsWithOwnDispatcher(final Connection connection, final ExceptionListener exceptionListener,\n            final JmsConnectionFactory jmsConnectionFactory)", "class_method_signature": "JMSConnectionHandlingActor.propsWithOwnDispatcher(final Connection connection, final ExceptionListener exceptionListener,\n            final JmsConnectionFactory jmsConnectionFactory)", "testcase": false, "constructor": false}, {"identifier": "getOwnDispatcher", "parameters": "(final ActorSystem actorSystem)", "modifiers": "static", "return": "MessageDispatcher", "signature": "MessageDispatcher getOwnDispatcher(final ActorSystem actorSystem)", "full_signature": "static MessageDispatcher getOwnDispatcher(final ActorSystem actorSystem)", "class_method_signature": "JMSConnectionHandlingActor.getOwnDispatcher(final ActorSystem actorSystem)", "testcase": false, "constructor": false}, {"identifier": "createReceive", "parameters": "()", "modifiers": "@Override public", "return": "Receive", "signature": "Receive createReceive()", "full_signature": "@Override public Receive createReceive()", "class_method_signature": "JMSConnectionHandlingActor.createReceive()", "testcase": false, "constructor": false}, {"identifier": "createMessageConsumer", "parameters": "(final AmqpConsumerActor.CreateMessageConsumer command)", "modifiers": "private", "return": "void", "signature": "void createMessageConsumer(final AmqpConsumerActor.CreateMessageConsumer command)", "full_signature": "private void createMessageConsumer(final AmqpConsumerActor.CreateMessageConsumer command)", "class_method_signature": "JMSConnectionHandlingActor.createMessageConsumer(final AmqpConsumerActor.CreateMessageConsumer command)", "testcase": false, "constructor": false}, {"identifier": "handleCloseSession", "parameters": "(final AmqpClientActor.JmsCloseSession closeSession)", "modifiers": "private", "return": "void", "signature": "void handleCloseSession(final AmqpClientActor.JmsCloseSession closeSession)", "full_signature": "private void handleCloseSession(final AmqpClientActor.JmsCloseSession closeSession)", "class_method_signature": "JMSConnectionHandlingActor.handleCloseSession(final AmqpClientActor.JmsCloseSession closeSession)", "testcase": false, "constructor": false}, {"identifier": "handleRecoverSession", "parameters": "(final AmqpClientActor.JmsRecoverSession recoverSession)", "modifiers": "private", "return": "void", "signature": "void handleRecoverSession(final AmqpClientActor.JmsRecoverSession recoverSession)", "full_signature": "private void handleRecoverSession(final AmqpClientActor.JmsRecoverSession recoverSession)", "class_method_signature": "JMSConnectionHandlingActor.handleRecoverSession(final AmqpClientActor.JmsRecoverSession recoverSession)", "testcase": false, "constructor": false}, {"identifier": "handleConnect", "parameters": "(final AmqpClientActor.JmsConnect connect)", "modifiers": "private", "return": "void", "signature": "void handleConnect(final AmqpClientActor.JmsConnect connect)", "full_signature": "private void handleConnect(final AmqpClientActor.JmsConnect connect)", "class_method_signature": "JMSConnectionHandlingActor.handleConnect(final AmqpClientActor.JmsConnect connect)", "testcase": false, "constructor": false}, {"identifier": "handleDisconnect", "parameters": "(final AmqpClientActor.JmsDisconnect disconnect)", "modifiers": "private", "return": "void", "signature": "void handleDisconnect(final AmqpClientActor.JmsDisconnect disconnect)", "full_signature": "private void handleDisconnect(final AmqpClientActor.JmsDisconnect disconnect)", "class_method_signature": "JMSConnectionHandlingActor.handleDisconnect(final AmqpClientActor.JmsDisconnect disconnect)", "testcase": false, "constructor": false}, {"identifier": "maybeConnectAndTell", "parameters": "(final ActorRef sender, @Nullable final ActorRef origin)", "modifiers": "private", "return": "void", "signature": "void maybeConnectAndTell(final ActorRef sender, @Nullable final ActorRef origin)", "full_signature": "private void maybeConnectAndTell(final ActorRef sender, @Nullable final ActorRef origin)", "class_method_signature": "JMSConnectionHandlingActor.maybeConnectAndTell(final ActorRef sender, @Nullable final ActorRef origin)", "testcase": false, "constructor": false}, {"identifier": "tryConnect", "parameters": "(@Nullable final ActorRef origin)", "modifiers": "private", "return": "AmqpClientActor.JmsConnected", "signature": "AmqpClientActor.JmsConnected tryConnect(@Nullable final ActorRef origin)", "full_signature": "private AmqpClientActor.JmsConnected tryConnect(@Nullable final ActorRef origin)", "class_method_signature": "JMSConnectionHandlingActor.tryConnect(@Nullable final ActorRef origin)", "testcase": false, "constructor": false}, {"identifier": "startConnection", "parameters": "(final JmsConnection jmsConnection)", "modifiers": "private", "return": "void", "signature": "void startConnection(final JmsConnection jmsConnection)", "full_signature": "private void startConnection(final JmsConnection jmsConnection)", "class_method_signature": "JMSConnectionHandlingActor.startConnection(final JmsConnection jmsConnection)", "testcase": false, "constructor": false}, {"identifier": "createSession", "parameters": "(final JmsConnection jmsConnection)", "modifiers": "private", "return": "Session", "signature": "Session createSession(final JmsConnection jmsConnection)", "full_signature": "private Session createSession(final JmsConnection jmsConnection)", "class_method_signature": "JMSConnectionHandlingActor.createSession(final JmsConnection jmsConnection)", "testcase": false, "constructor": false}, {"identifier": "safelyExecuteJmsOperation", "parameters": "(@Nullable final JmsConnection jmsConnection,\n            final String task, final ThrowingSupplier<T> jmsOperation)", "modifiers": "private", "return": "T", "signature": "T safelyExecuteJmsOperation(@Nullable final JmsConnection jmsConnection,\n            final String task, final ThrowingSupplier<T> jmsOperation)", "full_signature": "private T safelyExecuteJmsOperation(@Nullable final JmsConnection jmsConnection,\n            final String task, final ThrowingSupplier<T> jmsOperation)", "class_method_signature": "JMSConnectionHandlingActor.safelyExecuteJmsOperation(@Nullable final JmsConnection jmsConnection,\n            final String task, final ThrowingSupplier<T> jmsOperation)", "testcase": false, "constructor": false}, {"identifier": "createConsumers", "parameters": "(final Session session)", "modifiers": "private", "return": "List<ConsumerData>", "signature": "List<ConsumerData> createConsumers(final Session session)", "full_signature": "private List<ConsumerData> createConsumers(final Session session)", "class_method_signature": "JMSConnectionHandlingActor.createConsumers(final Session session)", "testcase": false, "constructor": false}, {"identifier": "createJmsConsumer", "parameters": "(final Session session,\n            final Map<String, Exception> failedSources,\n            final Source source,\n            final String sourceAddress,\n            final String addressWithIndex)", "modifiers": "@Nullable private", "return": "ConsumerData", "signature": "ConsumerData createJmsConsumer(final Session session,\n            final Map<String, Exception> failedSources,\n            final Source source,\n            final String sourceAddress,\n            final String addressWithIndex)", "full_signature": "@Nullable private ConsumerData createJmsConsumer(final Session session,\n            final Map<String, Exception> failedSources,\n            final Source source,\n            final String sourceAddress,\n            final String addressWithIndex)", "class_method_signature": "JMSConnectionHandlingActor.createJmsConsumer(final Session session,\n            final Map<String, Exception> failedSources,\n            final Source source,\n            final String sourceAddress,\n            final String addressWithIndex)", "testcase": false, "constructor": false}, {"identifier": "createJmsConnection", "parameters": "()", "modifiers": "private", "return": "JmsConnection", "signature": "JmsConnection createJmsConnection()", "full_signature": "private JmsConnection createJmsConnection()", "class_method_signature": "JMSConnectionHandlingActor.createJmsConnection()", "testcase": false, "constructor": false}, {"identifier": "buildConnectionFailedException", "parameters": "(final Map<String, Exception> failedSources)", "modifiers": "private", "return": "ConnectionFailedException", "signature": "ConnectionFailedException buildConnectionFailedException(final Map<String, Exception> failedSources)", "full_signature": "private ConnectionFailedException buildConnectionFailedException(final Map<String, Exception> failedSources)", "class_method_signature": "JMSConnectionHandlingActor.buildConnectionFailedException(final Map<String, Exception> failedSources)", "testcase": false, "constructor": false}, {"identifier": "terminateConnection", "parameters": "(@Nullable final javax.jms.Connection jmsConnection)", "modifiers": "private", "return": "void", "signature": "void terminateConnection(@Nullable final javax.jms.Connection jmsConnection)", "full_signature": "private void terminateConnection(@Nullable final javax.jms.Connection jmsConnection)", "class_method_signature": "JMSConnectionHandlingActor.terminateConnection(@Nullable final javax.jms.Connection jmsConnection)", "testcase": false, "constructor": false}, {"identifier": "disconnectAndTell", "parameters": "(final javax.jms.Connection connection, @Nullable final ActorRef origin)", "modifiers": "private", "return": "void", "signature": "void disconnectAndTell(final javax.jms.Connection connection, @Nullable final ActorRef origin)", "full_signature": "private void disconnectAndTell(final javax.jms.Connection connection, @Nullable final ActorRef origin)", "class_method_signature": "JMSConnectionHandlingActor.disconnectAndTell(final javax.jms.Connection connection, @Nullable final ActorRef origin)", "testcase": false, "constructor": false}], "file": "services/connectivity/messaging/src/main/java/org/eclipse/ditto/services/connectivity/messaging/amqp/JMSConnectionHandlingActor.java"}, "focal_method": {"identifier": "props", "parameters": "(final Connection connection, final ExceptionListener exceptionListener,\n            final JmsConnectionFactory jmsConnectionFactory)", "modifiers": "static", "return": "Props", "body": "static Props props(final Connection connection, final ExceptionListener exceptionListener,\n            final JmsConnectionFactory jmsConnectionFactory) {\n\n        return Props.create(JMSConnectionHandlingActor.class, connection, exceptionListener, jmsConnectionFactory);\n    }", "signature": "Props props(final Connection connection, final ExceptionListener exceptionListener,\n            final JmsConnectionFactory jmsConnectionFactory)", "full_signature": "static Props props(final Connection connection, final ExceptionListener exceptionListener,\n            final JmsConnectionFactory jmsConnectionFactory)", "class_method_signature": "JMSConnectionHandlingActor.props(final Connection connection, final ExceptionListener exceptionListener,\n            final JmsConnectionFactory jmsConnectionFactory)", "testcase": false, "constructor": false, "invocations": ["create"]}, "repository": {"repo_id": 87849739, "url": "https://github.com/eclipse/ditto", "stars": 139, "created": "4/10/2017 7:29:57 PM +00:00", "updates": "2020-01-27T14:02:39+00:00", "fork": "False", "license": "licensed"}}