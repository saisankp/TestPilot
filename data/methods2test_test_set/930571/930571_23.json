{"test_class": {"identifier": "IdentityProviderAwareProcessListenerTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "@Mock\n    Environment environment;", "modifier": "@Mock", "type": "Environment", "declarator": "environment", "var_name": "environment"}, {"original_string": "@Mock\n    KieSession kSession;", "modifier": "@Mock", "type": "KieSession", "declarator": "kSession", "var_name": "kSession"}, {"original_string": "@InjectMocks\n    IdentityProviderAwareProcessListener listener;", "modifier": "@InjectMocks", "type": "IdentityProviderAwareProcessListener", "declarator": "listener", "var_name": "listener"}], "file": "jbpm-services/jbpm-kie-services/src/test/java/org/jbpm/kie/services/impl/IdentityProviderAwareProcessListenerTest.java"}, "test_case": {"identifier": "testUserNotSet", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testUserNotSet() {\n        final WorkflowProcessInstance processInstance = mock(WorkflowProcessInstance.class);\n        final HashMap<String, Object> metaData = new HashMap<>();\n        when(processInstance.getMetaData()).thenReturn(metaData);\n        final ProcessStartedEvent event = new ProcessStartedEventImpl(processInstance, mock(KieRuntime.class));\n\n        listener.beforeProcessStarted(event);\n\n        assertTrue(metaData.isEmpty());\n        verify(processInstance, never()).setVariable(anyString(), anyString());\n    }", "signature": "void testUserNotSet()", "full_signature": "@Test public void testUserNotSet()", "class_method_signature": "IdentityProviderAwareProcessListenerTest.testUserNotSet()", "testcase": true, "constructor": false, "invocations": ["mock", "thenReturn", "when", "getMetaData", "mock", "beforeProcessStarted", "assertTrue", "isEmpty", "setVariable", "verify", "never", "anyString", "anyString"]}, "focal_class": {"identifier": "IdentityProviderAwareProcessListener", "superclass": "extends DefaultProcessEventListener", "interfaces": "", "fields": [{"original_string": "private KieSession kieSession;", "modifier": "private", "type": "KieSession", "declarator": "kieSession", "var_name": "kieSession"}, {"original_string": "private IdentityProvider identityProvider;", "modifier": "private", "type": "IdentityProvider", "declarator": "identityProvider", "var_name": "identityProvider"}], "methods": [{"identifier": "IdentityProviderAwareProcessListener", "parameters": "(final KieSession kieSession)", "modifiers": "public", "return": "", "signature": " IdentityProviderAwareProcessListener(final KieSession kieSession)", "full_signature": "public  IdentityProviderAwareProcessListener(final KieSession kieSession)", "class_method_signature": "IdentityProviderAwareProcessListener.IdentityProviderAwareProcessListener(final KieSession kieSession)", "testcase": false, "constructor": true}, {"identifier": "resolveIdentityProvider", "parameters": "()", "modifiers": "protected", "return": "void", "signature": "void resolveIdentityProvider()", "full_signature": "protected void resolveIdentityProvider()", "class_method_signature": "IdentityProviderAwareProcessListener.resolveIdentityProvider()", "testcase": false, "constructor": false}, {"identifier": "beforeProcessStarted", "parameters": "(final ProcessStartedEvent event)", "modifiers": "public", "return": "void", "signature": "void beforeProcessStarted(final ProcessStartedEvent event)", "full_signature": "public void beforeProcessStarted(final ProcessStartedEvent event)", "class_method_signature": "IdentityProviderAwareProcessListener.beforeProcessStarted(final ProcessStartedEvent event)", "testcase": false, "constructor": false}], "file": "jbpm-services/jbpm-kie-services/src/main/java/org/jbpm/kie/services/impl/IdentityProviderAwareProcessListener.java"}, "focal_method": {"identifier": "beforeProcessStarted", "parameters": "(final ProcessStartedEvent event)", "modifiers": "public", "return": "void", "body": "public void beforeProcessStarted(final ProcessStartedEvent event) {\n        resolveIdentityProvider();\n        if (identityProvider != null) {\n            final WorkflowProcessInstance wpi = (WorkflowProcessInstance) event.getProcessInstance();\n            final String name = identityProvider.getName();\n            wpi.setVariable(\"initiator\", name);\n            wpi.getMetaData().put(\"OwnerId\", name);\n        }\n    }", "signature": "void beforeProcessStarted(final ProcessStartedEvent event)", "full_signature": "public void beforeProcessStarted(final ProcessStartedEvent event)", "class_method_signature": "IdentityProviderAwareProcessListener.beforeProcessStarted(final ProcessStartedEvent event)", "testcase": false, "constructor": false, "invocations": ["resolveIdentityProvider", "getProcessInstance", "getName", "setVariable", "put", "getMetaData"]}, "repository": {"repo_id": 930571, "url": "https://github.com/kiegroup/jbpm", "stars": 1035, "created": "9/22/2010 1:19:52 PM +00:00", "updates": "2020-01-22T03:39:57+00:00", "fork": "False", "license": "licensed"}}