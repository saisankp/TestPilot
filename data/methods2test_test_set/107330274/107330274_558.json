{"test_class": {"identifier": "CassandraSchedulerStoreTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final long STARTUP_TIMEOUT = 30_000L;", "modifier": "private static final", "type": "long", "declarator": "STARTUP_TIMEOUT = 30_000L", "var_name": "STARTUP_TIMEOUT"}, {"original_string": "private static final String CONFIGURATION_FILE_NAME = \"relocated-cassandra.yaml\";", "modifier": "private static final", "type": "String", "declarator": "CONFIGURATION_FILE_NAME = \"relocated-cassandra.yaml\"", "var_name": "CONFIGURATION_FILE_NAME"}, {"original_string": "@Rule\n    public CassandraCQLUnit cassandraCQLUnit = new CassandraCQLUnit(\n            new ClassPathCQLDataSet(\"tables.cql\", \"titus_integration_tests\"),\n            CONFIGURATION_FILE_NAME,\n            STARTUP_TIMEOUT\n    );", "modifier": "@Rule\n    public", "type": "CassandraCQLUnit", "declarator": "cassandraCQLUnit = new CassandraCQLUnit(\n            new ClassPathCQLDataSet(\"tables.cql\", \"titus_integration_tests\"),\n            CONFIGURATION_FILE_NAME,\n            STARTUP_TIMEOUT\n    )", "var_name": "cassandraCQLUnit"}, {"original_string": "private final CassandraStoreConfiguration configuration = mock(CassandraStoreConfiguration.class);", "modifier": "private final", "type": "CassandraStoreConfiguration", "declarator": "configuration = mock(CassandraStoreConfiguration.class)", "var_name": "configuration"}, {"original_string": "private final EntitySanitizer entitySanitizer = mock(EntitySanitizer.class);", "modifier": "private final", "type": "EntitySanitizer", "declarator": "entitySanitizer = mock(EntitySanitizer.class)", "var_name": "entitySanitizer"}, {"original_string": "private Session session;", "modifier": "private", "type": "Session", "declarator": "session", "var_name": "session"}], "file": "titus-ext/cassandra/src/test/java/com/netflix/titus/ext/cassandra/store/CassandraSchedulerStoreTest.java"}, "test_case": {"identifier": "testDeleteSystemSelector", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testDeleteSystemSelector() {\n        List<SystemSelector> systemSelectors = CollectionsExt.merge(\n                SchedulerGenerator.shouldSystemSelectors().toList(4),\n                SchedulerGenerator.mustSystemSelectors().toList(3)\n        );\n\n        SchedulerStore schedulerStore = createSchedulerStore();\n        systemSelectors.forEach(systemSelector -> schedulerStore.storeSystemSelector(systemSelector).await());\n\n        assertThat(schedulerStore.retrieveSystemSelectors().toList().toBlocking().first()).hasSize(7);\n        String idToDelete = systemSelectors.get(0).getId();\n        schedulerStore.deleteSystemSelector(idToDelete).await();\n        assertThat(schedulerStore.retrieveSystemSelectors().toList().toBlocking().first()).hasSize(6);\n    }", "signature": "void testDeleteSystemSelector()", "full_signature": "@Test public void testDeleteSystemSelector()", "class_method_signature": "CassandraSchedulerStoreTest.testDeleteSystemSelector()", "testcase": true, "constructor": false, "invocations": ["merge", "toList", "shouldSystemSelectors", "toList", "mustSystemSelectors", "createSchedulerStore", "forEach", "await", "storeSystemSelector", "hasSize", "assertThat", "first", "toBlocking", "toList", "retrieveSystemSelectors", "getId", "get", "await", "deleteSystemSelector", "hasSize", "assertThat", "first", "toBlocking", "toList", "retrieveSystemSelectors"]}, "focal_class": {"identifier": "CassandraSchedulerStore", "superclass": "", "interfaces": "implements SchedulerStore", "fields": [{"original_string": "private static final long TIMEOUT_MS = 60_000;", "modifier": "private static final", "type": "long", "declarator": "TIMEOUT_MS = 60_000", "var_name": "TIMEOUT_MS"}, {"original_string": "private static final String RETRIEVE_SYSTEM_SELECTORS_STRING = \"SELECT value FROM system_selectors;\";", "modifier": "private static final", "type": "String", "declarator": "RETRIEVE_SYSTEM_SELECTORS_STRING = \"SELECT value FROM system_selectors;\"", "var_name": "RETRIEVE_SYSTEM_SELECTORS_STRING"}, {"original_string": "private static final String INSERT_SYSTEM_SELECTOR_STRING = \"INSERT INTO system_selectors (id, value) VALUES (?, ?);\";", "modifier": "private static final", "type": "String", "declarator": "INSERT_SYSTEM_SELECTOR_STRING = \"INSERT INTO system_selectors (id, value) VALUES (?, ?);\"", "var_name": "INSERT_SYSTEM_SELECTOR_STRING"}, {"original_string": "private static final String DELETE_SYSTEM_SELECTOR_STRING = \"DELETE FROM system_selectors WHERE id = ?\";", "modifier": "private static final", "type": "String", "declarator": "DELETE_SYSTEM_SELECTOR_STRING = \"DELETE FROM system_selectors WHERE id = ?\"", "var_name": "DELETE_SYSTEM_SELECTOR_STRING"}, {"original_string": "private final PreparedStatement retrieveSystemSelectorsStatement;", "modifier": "private final", "type": "PreparedStatement", "declarator": "retrieveSystemSelectorsStatement", "var_name": "retrieveSystemSelectorsStatement"}, {"original_string": "private final PreparedStatement insertSystemSelectorStatement;", "modifier": "private final", "type": "PreparedStatement", "declarator": "insertSystemSelectorStatement", "var_name": "insertSystemSelectorStatement"}, {"original_string": "private final PreparedStatement deleteSystemSelectorStatement;", "modifier": "private final", "type": "PreparedStatement", "declarator": "deleteSystemSelectorStatement", "var_name": "deleteSystemSelectorStatement"}, {"original_string": "private final CassandraStoreConfiguration configuration;", "modifier": "private final", "type": "CassandraStoreConfiguration", "declarator": "configuration", "var_name": "configuration"}, {"original_string": "private final EntitySanitizer entitySanitizer;", "modifier": "private final", "type": "EntitySanitizer", "declarator": "entitySanitizer", "var_name": "entitySanitizer"}, {"original_string": "private final Session session;", "modifier": "private final", "type": "Session", "declarator": "session", "var_name": "session"}, {"original_string": "private final ObjectMapper mapper;", "modifier": "private final", "type": "ObjectMapper", "declarator": "mapper", "var_name": "mapper"}], "methods": [{"identifier": "CassandraSchedulerStore", "parameters": "(CassandraStoreConfiguration configuration,\n                                   @Named(SCHEDULER_SANITIZER) EntitySanitizer entitySanitizer,\n                                   Session session)", "modifiers": "@Inject public", "return": "", "signature": " CassandraSchedulerStore(CassandraStoreConfiguration configuration,\n                                   @Named(SCHEDULER_SANITIZER) EntitySanitizer entitySanitizer,\n                                   Session session)", "full_signature": "@Inject public  CassandraSchedulerStore(CassandraStoreConfiguration configuration,\n                                   @Named(SCHEDULER_SANITIZER) EntitySanitizer entitySanitizer,\n                                   Session session)", "class_method_signature": "CassandraSchedulerStore.CassandraSchedulerStore(CassandraStoreConfiguration configuration,\n                                   @Named(SCHEDULER_SANITIZER) EntitySanitizer entitySanitizer,\n                                   Session session)", "testcase": false, "constructor": true}, {"identifier": "CassandraSchedulerStore", "parameters": "(CassandraStoreConfiguration configuration,\n                                   @Named(SCHEDULER_SANITIZER) EntitySanitizer entitySanitizer,\n                                   Session session,\n                                   ObjectMapper mapper)", "modifiers": "public", "return": "", "signature": " CassandraSchedulerStore(CassandraStoreConfiguration configuration,\n                                   @Named(SCHEDULER_SANITIZER) EntitySanitizer entitySanitizer,\n                                   Session session,\n                                   ObjectMapper mapper)", "full_signature": "public  CassandraSchedulerStore(CassandraStoreConfiguration configuration,\n                                   @Named(SCHEDULER_SANITIZER) EntitySanitizer entitySanitizer,\n                                   Session session,\n                                   ObjectMapper mapper)", "class_method_signature": "CassandraSchedulerStore.CassandraSchedulerStore(CassandraStoreConfiguration configuration,\n                                   @Named(SCHEDULER_SANITIZER) EntitySanitizer entitySanitizer,\n                                   Session session,\n                                   ObjectMapper mapper)", "testcase": false, "constructor": true}, {"identifier": "enterActiveMode", "parameters": "()", "modifiers": "@Activator public", "return": "void", "signature": "void enterActiveMode()", "full_signature": "@Activator public void enterActiveMode()", "class_method_signature": "CassandraSchedulerStore.enterActiveMode()", "testcase": false, "constructor": false}, {"identifier": "retrieveSystemSelectors", "parameters": "()", "modifiers": "@Override public", "return": "Observable<SystemSelector>", "signature": "Observable<SystemSelector> retrieveSystemSelectors()", "full_signature": "@Override public Observable<SystemSelector> retrieveSystemSelectors()", "class_method_signature": "CassandraSchedulerStore.retrieveSystemSelectors()", "testcase": false, "constructor": false}, {"identifier": "storeSystemSelector", "parameters": "(SystemSelector systemSelector)", "modifiers": "@Override public", "return": "Completable", "signature": "Completable storeSystemSelector(SystemSelector systemSelector)", "full_signature": "@Override public Completable storeSystemSelector(SystemSelector systemSelector)", "class_method_signature": "CassandraSchedulerStore.storeSystemSelector(SystemSelector systemSelector)", "testcase": false, "constructor": false}, {"identifier": "deleteSystemSelector", "parameters": "(String id)", "modifiers": "@Override public", "return": "Completable", "signature": "Completable deleteSystemSelector(String id)", "full_signature": "@Override public Completable deleteSystemSelector(String id)", "class_method_signature": "CassandraSchedulerStore.deleteSystemSelector(String id)", "testcase": false, "constructor": false}], "file": "titus-ext/cassandra/src/main/java/com/netflix/titus/ext/cassandra/store/CassandraSchedulerStore.java"}, "focal_method": {"identifier": "deleteSystemSelector", "parameters": "(String id)", "modifiers": "@Override public", "return": "Completable", "body": "@Override\n    public Completable deleteSystemSelector(String id) {\n        return StoreUtils.remove(\n                session, deleteSystemSelectorStatement, id\n        ).timeout(TIMEOUT_MS, TimeUnit.MILLISECONDS);\n    }", "signature": "Completable deleteSystemSelector(String id)", "full_signature": "@Override public Completable deleteSystemSelector(String id)", "class_method_signature": "CassandraSchedulerStore.deleteSystemSelector(String id)", "testcase": false, "constructor": false, "invocations": ["timeout", "remove"]}, "repository": {"repo_id": 107330274, "url": "https://github.com/Netflix/titus-control-plane", "stars": 241, "created": "10/17/2017 10:20:55 PM +00:00", "updates": "2020-01-25T13:01:05+00:00", "fork": "False", "license": "licensed"}}