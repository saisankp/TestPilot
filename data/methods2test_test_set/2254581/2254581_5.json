{"test_class": {"identifier": "DMZSyncServiceImplTest", "superclass": "extends AbstractJUnit4SpringContextTests", "interfaces": "", "fields": [{"original_string": "private MyDMZSyncServiceImpl instance  = null;", "modifier": "private", "type": "MyDMZSyncServiceImpl", "declarator": "instance  = null", "var_name": "instance"}, {"original_string": "private StandardizedPatient currentSP  = null;", "modifier": "private", "type": "StandardizedPatient", "declarator": "currentSP  = null", "var_name": "currentSP"}, {"original_string": "private String dataFromDMZ  = null;", "modifier": "private", "type": "String", "declarator": "dataFromDMZ  = null", "var_name": "dataFromDMZ"}, {"original_string": "private String expectedURL = null;", "modifier": "private", "type": "String", "declarator": "expectedURL = null", "var_name": "expectedURL"}, {"original_string": "private String locale = null;", "modifier": "private", "type": "String", "declarator": "locale = null", "var_name": "locale"}, {"original_string": "private StandardizedPatient testData = null;", "modifier": "private", "type": "StandardizedPatient", "declarator": "testData = null", "var_name": "testData"}, {"original_string": "private StandardizedPatient patient1 = null;", "modifier": "private", "type": "StandardizedPatient", "declarator": "patient1 = null", "var_name": "patient1"}, {"original_string": "private StandardizedPatient patient2 = null;", "modifier": "private", "type": "StandardizedPatient", "declarator": "patient2 = null", "var_name": "patient2"}, {"original_string": "private String returnData = null;", "modifier": "private", "type": "String", "declarator": "returnData = null", "var_name": "returnData"}], "file": "OsceManager/src/test/java/ch/unibas/medizin/osce/server/DMZSyncServiceImplTest.java"}, "test_case": {"identifier": "testPullErrorJsonFromDMZ", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test \n    public void testPullErrorJsonFromDMZ() {\n        testData =  new StandardizedPatient();\n        testData.setName(\"patient\");\n        testData.persist();\n        testData.merge();\n\n\t\tdataFromDMZ  = \"abc\"; \n        try {\n\t\t\tinstance.pullFromDMZ(testData.getId());\n\t\t\tAssert.fail(\"Pull StandardizedPatient from DMZ by error json data without throws Exception!\");\n\t\t} catch (Exception e) {\t\n\t\t}\n\t\t\n    }", "signature": "void testPullErrorJsonFromDMZ()", "full_signature": "@Test public void testPullErrorJsonFromDMZ()", "class_method_signature": "DMZSyncServiceImplTest.testPullErrorJsonFromDMZ()", "testcase": true, "constructor": false, "invocations": ["setName", "persist", "merge", "pullFromDMZ", "getId", "fail"]}, "focal_class": {"identifier": "DMZSyncServiceImpl", "superclass": "extends RemoteServiceServlet", "interfaces": "implements\n\t\tDMZSyncService", "fields": [{"original_string": "private static final long serialVersionUID = 1L;", "modifier": "private static final", "type": "long", "declarator": "serialVersionUID = 1L", "var_name": "serialVersionUID"}, {"original_string": "private static Logger Log = Logger.getLogger(DMZSyncServiceImpl.class);", "modifier": "private static", "type": "Logger", "declarator": "Log = Logger.getLogger(DMZSyncServiceImpl.class)", "var_name": "Log"}, {"original_string": "private static String dmzSyncExceptionType = \"\";", "modifier": "private static", "type": "String", "declarator": "dmzSyncExceptionType = \"\"", "var_name": "dmzSyncExceptionType"}, {"original_string": "private static String errorMsg = \"\";", "modifier": "private static", "type": "String", "declarator": "errorMsg = \"\"", "var_name": "errorMsg"}], "methods": [{"identifier": "pushToDMZ", "parameters": "(Long standardizedPatientId,String locale)", "modifiers": "@Override public", "return": "List<String>", "signature": "List<String> pushToDMZ(Long standardizedPatientId,String locale)", "full_signature": "@Override public List<String> pushToDMZ(Long standardizedPatientId,String locale)", "class_method_signature": "DMZSyncServiceImpl.pushToDMZ(Long standardizedPatientId,String locale)", "testcase": false, "constructor": false}, {"identifier": "processSendJson", "parameters": "(String json,String locale)", "modifiers": "private", "return": "String", "signature": "String processSendJson(String json,String locale)", "full_signature": "private String processSendJson(String json,String locale)", "class_method_signature": "DMZSyncServiceImpl.processSendJson(String json,String locale)", "testcase": false, "constructor": false}, {"identifier": "getSendReturnErrorMessage", "parameters": "(String json)", "modifiers": "protected", "return": "List<String>", "signature": "List<String> getSendReturnErrorMessage(String json)", "full_signature": "protected List<String> getSendReturnErrorMessage(String json)", "class_method_signature": "DMZSyncServiceImpl.getSendReturnErrorMessage(String json)", "testcase": false, "constructor": false}, {"identifier": "pullFromDMZ", "parameters": "(Long standardizedPatientId)", "modifiers": "@Override public", "return": "void", "signature": "void pullFromDMZ(Long standardizedPatientId)", "full_signature": "@Override public void pullFromDMZ(Long standardizedPatientId)", "class_method_signature": "DMZSyncServiceImpl.pullFromDMZ(Long standardizedPatientId)", "testcase": false, "constructor": false}, {"identifier": "sendSync", "parameters": "(String locale)", "modifiers": "@Override public", "return": "String", "signature": "String sendSync(String locale)", "full_signature": "@Override public String sendSync(String locale)", "class_method_signature": "DMZSyncServiceImpl.sendSync(String locale)", "testcase": false, "constructor": false}, {"identifier": "getSync", "parameters": "(String locale)", "modifiers": "@Override public", "return": "void", "signature": "void getSync(String locale)", "full_signature": "@Override public void getSync(String locale)", "class_method_signature": "DMZSyncServiceImpl.getSync(String locale)", "testcase": false, "constructor": false}, {"identifier": "getReturnMessage", "parameters": "(JSONObject myjson)", "modifiers": "private", "return": "String", "signature": "String getReturnMessage(JSONObject myjson)", "full_signature": "private String getReturnMessage(JSONObject myjson)", "class_method_signature": "DMZSyncServiceImpl.getReturnMessage(JSONObject myjson)", "testcase": false, "constructor": false}, {"identifier": "syncOsceDayAndTraining", "parameters": "(JSONObject myjson)", "modifiers": "private", "return": "void", "signature": "void syncOsceDayAndTraining(JSONObject myjson)", "full_signature": "private void syncOsceDayAndTraining(JSONObject myjson)", "class_method_signature": "DMZSyncServiceImpl.syncOsceDayAndTraining(JSONObject myjson)", "testcase": false, "constructor": false}, {"identifier": "syncOsceDay", "parameters": "(JSONObject myjson)", "modifiers": "private", "return": "void", "signature": "void syncOsceDay(JSONObject myjson)", "full_signature": "private void syncOsceDay(JSONObject myjson)", "class_method_signature": "DMZSyncServiceImpl.syncOsceDay(JSONObject myjson)", "testcase": false, "constructor": false}, {"identifier": "syncPatientInSemester", "parameters": "(JSONObject myjson)", "modifiers": "private", "return": "void", "signature": "void syncPatientInSemester(JSONObject myjson)", "full_signature": "private void syncPatientInSemester(JSONObject myjson)", "class_method_signature": "DMZSyncServiceImpl.syncPatientInSemester(JSONObject myjson)", "testcase": false, "constructor": false}, {"identifier": "setOsceDays", "parameters": "(JSONObject jsonObject,PatientInSemester semester)", "modifiers": "private", "return": "void", "signature": "void setOsceDays(JSONObject jsonObject,PatientInSemester semester)", "full_signature": "private void setOsceDays(JSONObject jsonObject,PatientInSemester semester)", "class_method_signature": "DMZSyncServiceImpl.setOsceDays(JSONObject jsonObject,PatientInSemester semester)", "testcase": false, "constructor": false}, {"identifier": "getSyncJsonData", "parameters": "(String locale)", "modifiers": "protected", "return": "String", "signature": "String getSyncJsonData(String locale)", "full_signature": "protected String getSyncJsonData(String locale)", "class_method_signature": "DMZSyncServiceImpl.getSyncJsonData(String locale)", "testcase": false, "constructor": false}, {"identifier": "getOsceDayJsonStr", "parameters": "(OsceDay osceDay)", "modifiers": "private", "return": "String", "signature": "String getOsceDayJsonStr(OsceDay osceDay)", "full_signature": "private String getOsceDayJsonStr(OsceDay osceDay)", "class_method_signature": "DMZSyncServiceImpl.getOsceDayJsonStr(OsceDay osceDay)", "testcase": false, "constructor": false}, {"identifier": "getSemesterJsonStr", "parameters": "(Semester semester)", "modifiers": "private", "return": "String", "signature": "String getSemesterJsonStr(Semester semester)", "full_signature": "private String getSemesterJsonStr(Semester semester)", "class_method_signature": "DMZSyncServiceImpl.getSemesterJsonStr(Semester semester)", "testcase": false, "constructor": false}, {"identifier": "getPatientInSemester", "parameters": "(PatientInSemester pis)", "modifiers": "private", "return": "String", "signature": "String getPatientInSemester(PatientInSemester pis)", "full_signature": "private String getPatientInSemester(PatientInSemester pis)", "class_method_signature": "DMZSyncServiceImpl.getPatientInSemester(PatientInSemester pis)", "testcase": false, "constructor": false}, {"identifier": "getOscesJsonStr", "parameters": "(Osce osce)", "modifiers": "private", "return": "String", "signature": "String getOscesJsonStr(Osce osce)", "full_signature": "private String getOscesJsonStr(Osce osce)", "class_method_signature": "DMZSyncServiceImpl.getOscesJsonStr(Osce osce)", "testcase": false, "constructor": false}, {"identifier": "getStandardizedPatientJsonStr", "parameters": "(PatientInSemester patient)", "modifiers": "private", "return": "String", "signature": "String getStandardizedPatientJsonStr(PatientInSemester patient)", "full_signature": "private String getStandardizedPatientJsonStr(PatientInSemester patient)", "class_method_signature": "DMZSyncServiceImpl.getStandardizedPatientJsonStr(PatientInSemester patient)", "testcase": false, "constructor": false}, {"identifier": "convertToString", "parameters": "(Date date)", "modifiers": "private", "return": "String", "signature": "String convertToString(Date date)", "full_signature": "private String convertToString(Date date)", "class_method_signature": "DMZSyncServiceImpl.convertToString(Date date)", "testcase": false, "constructor": false}, {"identifier": "convertToDate", "parameters": "(String dateStr)", "modifiers": "private", "return": "Date", "signature": "Date convertToDate(String dateStr)", "full_signature": "private Date convertToDate(String dateStr)", "class_method_signature": "DMZSyncServiceImpl.convertToDate(String dateStr)", "testcase": false, "constructor": false}, {"identifier": "setDMZSyncExceptionTypeAndErrorMsg", "parameters": "(String type,String msg)", "modifiers": "private", "return": "void", "signature": "void setDMZSyncExceptionTypeAndErrorMsg(String type,String msg)", "full_signature": "private void setDMZSyncExceptionTypeAndErrorMsg(String type,String msg)", "class_method_signature": "DMZSyncServiceImpl.setDMZSyncExceptionTypeAndErrorMsg(String type,String msg)", "testcase": false, "constructor": false}, {"identifier": "updatePatient", "parameters": "(StandardizedPatient patient,StandardizedPatient newPatient)", "modifiers": "private", "return": "void", "signature": "void updatePatient(StandardizedPatient patient,StandardizedPatient newPatient)", "full_signature": "private void updatePatient(StandardizedPatient patient,StandardizedPatient newPatient)", "class_method_signature": "DMZSyncServiceImpl.updatePatient(StandardizedPatient patient,StandardizedPatient newPatient)", "testcase": false, "constructor": false}, {"identifier": "updateChecksValue", "parameters": "(AnamnesisChecksValue checksValue,AnamnesisChecksValue newChecksValue,AnamnesisForm anamnesisForm)", "modifiers": "private", "return": "void", "signature": "void updateChecksValue(AnamnesisChecksValue checksValue,AnamnesisChecksValue newChecksValue,AnamnesisForm anamnesisForm)", "full_signature": "private void updateChecksValue(AnamnesisChecksValue checksValue,AnamnesisChecksValue newChecksValue,AnamnesisForm anamnesisForm)", "class_method_signature": "DMZSyncServiceImpl.updateChecksValue(AnamnesisChecksValue checksValue,AnamnesisChecksValue newChecksValue,AnamnesisForm anamnesisForm)", "testcase": false, "constructor": false}, {"identifier": "saveChecksValue", "parameters": "(AnamnesisChecksValue newChecksValue,AnamnesisForm anamnesisForm)", "modifiers": "private", "return": "void", "signature": "void saveChecksValue(AnamnesisChecksValue newChecksValue,AnamnesisForm anamnesisForm)", "full_signature": "private void saveChecksValue(AnamnesisChecksValue newChecksValue,AnamnesisForm anamnesisForm)", "class_method_signature": "DMZSyncServiceImpl.saveChecksValue(AnamnesisChecksValue newChecksValue,AnamnesisForm anamnesisForm)", "testcase": false, "constructor": false}, {"identifier": "preProcessData", "parameters": "(String data)", "modifiers": "public", "return": "String", "signature": "String preProcessData(String data)", "full_signature": "public String preProcessData(String data)", "class_method_signature": "DMZSyncServiceImpl.preProcessData(String data)", "testcase": false, "constructor": false}, {"identifier": "findPatient", "parameters": "(Long objectId)", "modifiers": "protected", "return": "StandardizedPatient", "signature": "StandardizedPatient findPatient(Long objectId)", "full_signature": "protected StandardizedPatient findPatient(Long objectId)", "class_method_signature": "DMZSyncServiceImpl.findPatient(Long objectId)", "testcase": false, "constructor": false}, {"identifier": "sendData", "parameters": "(String json,String url)", "modifiers": "protected", "return": "String", "signature": "String sendData(String json,String url)", "full_signature": "protected String sendData(String json,String url)", "class_method_signature": "DMZSyncServiceImpl.sendData(String json,String url)", "testcase": false, "constructor": false}, {"identifier": "getDMZData", "parameters": "(String url)", "modifiers": "protected", "return": "String", "signature": "String getDMZData(String url)", "full_signature": "protected String getDMZData(String url)", "class_method_signature": "DMZSyncServiceImpl.getDMZData(String url)", "testcase": false, "constructor": false}, {"identifier": "getHostAddress", "parameters": "()", "modifiers": "protected", "return": "String", "signature": "String getHostAddress()", "full_signature": "protected String getHostAddress()", "class_method_signature": "DMZSyncServiceImpl.getHostAddress()", "testcase": false, "constructor": false}, {"identifier": "authenticate", "parameters": "(HttpClient client, HttpMethodBase method)", "modifiers": "private", "return": "void", "signature": "void authenticate(HttpClient client, HttpMethodBase method)", "full_signature": "private void authenticate(HttpClient client, HttpMethodBase method)", "class_method_signature": "DMZSyncServiceImpl.authenticate(HttpClient client, HttpMethodBase method)", "testcase": false, "constructor": false}, {"identifier": "savePatient", "parameters": "(StandardizedPatient patient)", "modifiers": "protected", "return": "void", "signature": "void savePatient(StandardizedPatient patient)", "full_signature": "protected void savePatient(StandardizedPatient patient)", "class_method_signature": "DMZSyncServiceImpl.savePatient(StandardizedPatient patient)", "testcase": false, "constructor": false}, {"identifier": "getRequest", "parameters": "()", "modifiers": "", "return": "HttpServletRequest", "signature": "HttpServletRequest getRequest()", "full_signature": " HttpServletRequest getRequest()", "class_method_signature": "DMZSyncServiceImpl.getRequest()", "testcase": false, "constructor": false}], "file": "OsceManager/src/main/java/ch/unibas/medizin/osce/server/DMZSyncServiceImpl.java"}, "focal_method": {"identifier": "pullFromDMZ", "parameters": "(Long standardizedPatientId)", "modifiers": "@Override public", "return": "void", "body": "@Override\n\tpublic void pullFromDMZ(Long standardizedPatientId)  throws DMZSyncException {\n\t\tString url = getHostAddress() + \"/DataImportExport/exportSP?id=\"\t+ standardizedPatientId;\n\t\tString data = getDMZData(url);\n\t\t\n\t\tdata =preProcessData(data);\n\t\tJSONDeserializer deserializer = new JSONDeserializer()\n\t\t\t\t.use(\"anamnesisForm.createDate\",\n\t\t\t\t\t\tnew DateTransformer(\"yyyy-MM-dd'T'HH:mm:ss'Z'\"))\n\t\t\t\t.use(\"birthday\",\n\t\t\t\t\t\tnew DateTransformer(\"yyyy-MM-dd\"))\n\t\t\t\t.use(\"gender\", new GenderTransformer())\n\t\t\t\t.use(\"maritalStatus\", new MaritalStatusTransformer())\n\t\t\t\t.use(\"status\",new SPStatusTransformer())\n\t\t\t\t.use(\"workPermission\", new WorkPermissionTransformer())\n\t\t\t\t.use(\"anamnesisForm.anamnesischecksvalues.values.anamnesischeck.title.type\", new AnamnesisChecksTypeTransformet())\n\t\t\t\t.use(\"anamnesisForm.scars.values.traitType\", new TraitTypeTransformet())\n\t\t\t\t.use(\"anamnesisForm.anamnesischecksvalues.values.anamnesischeck.type\", new AnamnesisChecksTypeTransformet());\n\t\t\n\t\tString unExpectedData=standardizedPatientId+\"not found\";\n\t\tStandardizedPatient newPatient = null;\n\t\tif(!data.equals(unExpectedData)){\n\t\t\ttry{\n\t\t\t\tnewPatient = (StandardizedPatient) (deserializer\n\t\t\t\t\t\t.use(null, StandardizedPatient.class).deserialize(data));\n\t\t\t}catch(flexjson.JSONException e){\n\t\t\t\tLog.error(\"Error deserialize json data: \"+e.getMessage());\n\t\t\t\tthrow new DMZSyncException(DMZSyncExceptionType.SYNC_PATIENT_EXCEPTION,\"Error json data.\");\n\t\t\t}\n\t\t}else{\n\t\t\tthrow new DMZSyncException(DMZSyncExceptionType.PATIENT_EXIST_EXCEPTION,\"\");\n\t\t}\n\n\t\t\n\t\t\n\t\tStandardizedPatient patient = StandardizedPatient.findStandardizedPatient(standardizedPatientId);\n\t\n\t\tif( patient != null){\n\t\t\tif(newPatient!=null){\n\t\t\t\tupdatePatient(patient,newPatient);\n\t\t\t}\n\t\t}else{\n//\t\t\tthrow new DMZSyncException(DMZSyncExceptionType.PATIENT_EXIST_EXCEPTION,\"\");\n//\t\t\tsavePatient(newPatient);\n\t\t}\n\n\t}", "signature": "void pullFromDMZ(Long standardizedPatientId)", "full_signature": "@Override public void pullFromDMZ(Long standardizedPatientId)", "class_method_signature": "DMZSyncServiceImpl.pullFromDMZ(Long standardizedPatientId)", "testcase": false, "constructor": false, "invocations": ["getHostAddress", "getDMZData", "preProcessData", "use", "use", "use", "use", "use", "use", "use", "use", "use", "equals", "deserialize", "use", "error", "getMessage", "findStandardizedPatient", "updatePatient"]}, "repository": {"repo_id": 2254581, "url": "https://github.com/nikotsunami/osce", "language": "Java", "is_fork": false, "fork_count": 4, "stargazer_count": 8, "size": 56026, "license": "licensed"}}