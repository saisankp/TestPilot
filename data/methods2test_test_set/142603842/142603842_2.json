{"test_class": {"identifier": "SolverManagerTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private final VehicleRoutingSolution solution = SolutionFactory.emptySolution();", "modifier": "private final", "type": "VehicleRoutingSolution", "declarator": "solution = SolutionFactory.emptySolution()", "var_name": "solution"}, {"original_string": "private final PlanningVehicle testVehicle = PlanningVehicleFactory.testVehicle(1);", "modifier": "private final", "type": "PlanningVehicle", "declarator": "testVehicle = PlanningVehicleFactory.testVehicle(1)", "var_name": "testVehicle"}, {"original_string": "private final PlanningVisit testVisit = PlanningVisitFactory.testVisit(1);", "modifier": "private final", "type": "PlanningVisit", "declarator": "testVisit = PlanningVisitFactory.testVisit(1)", "var_name": "testVisit"}, {"original_string": "@Captor\n    private ArgumentCaptor<VehicleRoutingSolution> solutionArgumentCaptor;", "modifier": "@Captor\n    private", "type": "ArgumentCaptor<VehicleRoutingSolution>", "declarator": "solutionArgumentCaptor", "var_name": "solutionArgumentCaptor"}, {"original_string": "@Mock\n    private BestSolutionChangedEvent<VehicleRoutingSolution> bestSolutionChangedEvent;", "modifier": "@Mock\n    private", "type": "BestSolutionChangedEvent<VehicleRoutingSolution>", "declarator": "bestSolutionChangedEvent", "var_name": "bestSolutionChangedEvent"}, {"original_string": "@Mock\n    private ListenableFuture<VehicleRoutingSolution> solverFuture;", "modifier": "@Mock\n    private", "type": "ListenableFuture<VehicleRoutingSolution>", "declarator": "solverFuture", "var_name": "solverFuture"}, {"original_string": "@Mock\n    private Solver<VehicleRoutingSolution> solver;", "modifier": "@Mock\n    private", "type": "Solver<VehicleRoutingSolution>", "declarator": "solver", "var_name": "solver"}, {"original_string": "@Mock\n    private AsyncListenableTaskExecutor executor;", "modifier": "@Mock\n    private", "type": "AsyncListenableTaskExecutor", "declarator": "executor", "var_name": "executor"}, {"original_string": "@Mock\n    private RouteChangedEventPublisher routeChangedEventPublisher;", "modifier": "@Mock\n    private", "type": "RouteChangedEventPublisher", "declarator": "routeChangedEventPublisher", "var_name": "routeChangedEventPublisher"}, {"original_string": "@InjectMocks\n    private SolverManager solverManager;", "modifier": "@InjectMocks\n    private", "type": "SolverManager", "declarator": "solverManager", "var_name": "solverManager"}], "file": "optaweb-vehicle-routing-backend/src/test/java/org/optaweb/vehiclerouting/plugin/planner/SolverManagerTest.java"}, "test_case": {"identifier": "startSolver_should_start_solver", "parameters": "()", "modifiers": "@Test", "return": "void", "body": "@Test\n    void startSolver_should_start_solver() {\n        returnSolverFutureWhenSolverIsStarted();\n        solverManager.startSolver(solution);\n        verify(solver).solve(solution);\n\n        // cannot start solver that is already solving\n        assertThatIllegalStateException()\n                .isThrownBy(() -> solverManager.startSolver(solution));\n    }", "signature": "void startSolver_should_start_solver()", "full_signature": "@Test void startSolver_should_start_solver()", "class_method_signature": "SolverManagerTest.startSolver_should_start_solver()", "testcase": true, "constructor": false, "invocations": ["returnSolverFutureWhenSolverIsStarted", "startSolver", "solve", "verify", "isThrownBy", "assertThatIllegalStateException", "startSolver"]}, "focal_class": {"identifier": "SolverManager", "superclass": "", "interfaces": "implements SolverEventListener<VehicleRoutingSolution>", "fields": [{"original_string": "private static final Logger logger = LoggerFactory.getLogger(SolverManager.class);", "modifier": "private static final", "type": "Logger", "declarator": "logger = LoggerFactory.getLogger(SolverManager.class)", "var_name": "logger"}, {"original_string": "private final Solver<VehicleRoutingSolution> solver;", "modifier": "private final", "type": "Solver<VehicleRoutingSolution>", "declarator": "solver", "var_name": "solver"}, {"original_string": "private final AsyncListenableTaskExecutor executor;", "modifier": "private final", "type": "AsyncListenableTaskExecutor", "declarator": "executor", "var_name": "executor"}, {"original_string": "private final RouteChangedEventPublisher routeChangedEventPublisher;", "modifier": "private final", "type": "RouteChangedEventPublisher", "declarator": "routeChangedEventPublisher", "var_name": "routeChangedEventPublisher"}, {"original_string": "private final ApplicationEventPublisher eventPublisher;", "modifier": "private final", "type": "ApplicationEventPublisher", "declarator": "eventPublisher", "var_name": "eventPublisher"}, {"original_string": "private ListenableFuture<VehicleRoutingSolution> solverFuture;", "modifier": "private", "type": "ListenableFuture<VehicleRoutingSolution>", "declarator": "solverFuture", "var_name": "solverFuture"}], "methods": [{"identifier": "SolverManager", "parameters": "(\n            Solver<VehicleRoutingSolution> solver,\n            AsyncListenableTaskExecutor executor,\n            RouteChangedEventPublisher routeChangedEventPublisher,\n            ApplicationEventPublisher eventPublisher)", "modifiers": "@Autowired", "return": "", "signature": " SolverManager(\n            Solver<VehicleRoutingSolution> solver,\n            AsyncListenableTaskExecutor executor,\n            RouteChangedEventPublisher routeChangedEventPublisher,\n            ApplicationEventPublisher eventPublisher)", "full_signature": "@Autowired  SolverManager(\n            Solver<VehicleRoutingSolution> solver,\n            AsyncListenableTaskExecutor executor,\n            RouteChangedEventPublisher routeChangedEventPublisher,\n            ApplicationEventPublisher eventPublisher)", "class_method_signature": "SolverManager.SolverManager(\n            Solver<VehicleRoutingSolution> solver,\n            AsyncListenableTaskExecutor executor,\n            RouteChangedEventPublisher routeChangedEventPublisher,\n            ApplicationEventPublisher eventPublisher)", "testcase": false, "constructor": true}, {"identifier": "bestSolutionChanged", "parameters": "(BestSolutionChangedEvent<VehicleRoutingSolution> bestSolutionChangedEvent)", "modifiers": "@Override public", "return": "void", "signature": "void bestSolutionChanged(BestSolutionChangedEvent<VehicleRoutingSolution> bestSolutionChangedEvent)", "full_signature": "@Override public void bestSolutionChanged(BestSolutionChangedEvent<VehicleRoutingSolution> bestSolutionChangedEvent)", "class_method_signature": "SolverManager.bestSolutionChanged(BestSolutionChangedEvent<VehicleRoutingSolution> bestSolutionChangedEvent)", "testcase": false, "constructor": false}, {"identifier": "startSolver", "parameters": "(VehicleRoutingSolution solution)", "modifiers": "", "return": "void", "signature": "void startSolver(VehicleRoutingSolution solution)", "full_signature": " void startSolver(VehicleRoutingSolution solution)", "class_method_signature": "SolverManager.startSolver(VehicleRoutingSolution solution)", "testcase": false, "constructor": false}, {"identifier": "stopSolver", "parameters": "()", "modifiers": "", "return": "void", "signature": "void stopSolver()", "full_signature": " void stopSolver()", "class_method_signature": "SolverManager.stopSolver()", "testcase": false, "constructor": false}, {"identifier": "assertSolverIsAlive", "parameters": "()", "modifiers": "private", "return": "void", "signature": "void assertSolverIsAlive()", "full_signature": "private void assertSolverIsAlive()", "class_method_signature": "SolverManager.assertSolverIsAlive()", "testcase": false, "constructor": false}, {"identifier": "addVisit", "parameters": "(PlanningVisit visit)", "modifiers": "", "return": "void", "signature": "void addVisit(PlanningVisit visit)", "full_signature": " void addVisit(PlanningVisit visit)", "class_method_signature": "SolverManager.addVisit(PlanningVisit visit)", "testcase": false, "constructor": false}, {"identifier": "removeVisit", "parameters": "(PlanningVisit visit)", "modifiers": "", "return": "void", "signature": "void removeVisit(PlanningVisit visit)", "full_signature": " void removeVisit(PlanningVisit visit)", "class_method_signature": "SolverManager.removeVisit(PlanningVisit visit)", "testcase": false, "constructor": false}, {"identifier": "addVehicle", "parameters": "(PlanningVehicle vehicle)", "modifiers": "", "return": "void", "signature": "void addVehicle(PlanningVehicle vehicle)", "full_signature": " void addVehicle(PlanningVehicle vehicle)", "class_method_signature": "SolverManager.addVehicle(PlanningVehicle vehicle)", "testcase": false, "constructor": false}, {"identifier": "removeVehicle", "parameters": "(PlanningVehicle vehicle)", "modifiers": "", "return": "void", "signature": "void removeVehicle(PlanningVehicle vehicle)", "full_signature": " void removeVehicle(PlanningVehicle vehicle)", "class_method_signature": "SolverManager.removeVehicle(PlanningVehicle vehicle)", "testcase": false, "constructor": false}, {"identifier": "changeCapacity", "parameters": "(PlanningVehicle vehicle)", "modifiers": "", "return": "void", "signature": "void changeCapacity(PlanningVehicle vehicle)", "full_signature": " void changeCapacity(PlanningVehicle vehicle)", "class_method_signature": "SolverManager.changeCapacity(PlanningVehicle vehicle)", "testcase": false, "constructor": false}], "file": "optaweb-vehicle-routing-backend/src/main/java/org/optaweb/vehiclerouting/plugin/planner/SolverManager.java"}, "focal_method": {"identifier": "startSolver", "parameters": "(VehicleRoutingSolution solution)", "modifiers": "", "return": "void", "body": "void startSolver(VehicleRoutingSolution solution) {\n        if (solverFuture != null) {\n            throw new IllegalStateException(\"Solver start has already been requested\");\n        }\n        solverFuture = executor.submitListenable((SolvingTask) () -> solver.solve(solution));\n        solverFuture.addCallback(\n                // IMPORTANT: This is happening on the solver thread.\n                // TODO in both cases restart or somehow recover?\n                result -> {\n                    if (!solver.isTerminateEarly()) {\n                        // This is impossible. Solver in daemon mode can't return from solve() unless it has been\n                        // terminated (see #stopSolver()) or throws an exception.\n                        logger.error(\"Solver stopped solving but that shouldn't happen in daemon mode.\");\n                        eventPublisher.publishEvent(new ErrorEvent(this, \"Solver stopped solving unexpectedly.\"));\n                    }\n                },\n                exception -> {\n                    logger.error(\"Solver failed\", exception);\n                    eventPublisher.publishEvent(new ErrorEvent(this, exception.toString()));\n                });\n    }", "signature": "void startSolver(VehicleRoutingSolution solution)", "full_signature": " void startSolver(VehicleRoutingSolution solution)", "class_method_signature": "SolverManager.startSolver(VehicleRoutingSolution solution)", "testcase": false, "constructor": false, "invocations": ["submitListenable", "solve", "addCallback", "isTerminateEarly", "error", "publishEvent", "error", "publishEvent", "toString"]}, "repository": {"repo_id": 142603842, "url": "https://github.com/kiegroup/optaweb-vehicle-routing", "stars": 42, "created": "7/27/2018 5:08:08 PM +00:00", "updates": "2020-01-27T22:19:48+00:00", "fork": "False", "license": "licensed"}}