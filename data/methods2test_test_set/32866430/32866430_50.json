{"test_class": {"identifier": "ClientResourceTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final ObjectMapper mapper = KeywhizService.customizeObjectMapper(Jackson.newObjectMapper());", "modifier": "private static final", "type": "ObjectMapper", "declarator": "mapper = KeywhizService.customizeObjectMapper(Jackson.newObjectMapper())", "var_name": "mapper"}, {"original_string": "OkHttpClient mutualSslClient;", "modifier": "", "type": "OkHttpClient", "declarator": "mutualSslClient", "var_name": "mutualSslClient"}, {"original_string": "@ClassRule public static final RuleChain chain = IntegrationTestRule.rule();", "modifier": "@ClassRule public static final", "type": "RuleChain", "declarator": "chain = IntegrationTestRule.rule()", "var_name": "chain"}], "file": "server/src/test/java/keywhiz/service/resources/automation/v2/ClientResourceTest.java"}, "test_case": {"identifier": "clientListing", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test public void clientListing() throws Exception {\n    Set<String> clientsBefore = listing();\n    Set<String> expected = ImmutableSet.<String>builder()\n        .addAll(clientsBefore)\n        .add(\"client4\")\n        .build();\n\n    create(CreateClientRequestV2.builder().name(\"client4\").build());\n    assertThat(listing()).containsAll(expected);\n  }", "signature": "void clientListing()", "full_signature": "@Test public void clientListing()", "class_method_signature": "ClientResourceTest.clientListing()", "testcase": true, "constructor": false, "invocations": ["listing", "build", "add", "addAll", "builder", "create", "build", "name", "builder", "containsAll", "assertThat", "listing"]}, "focal_class": {"identifier": "ClientResource", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final Logger logger = LoggerFactory.getLogger(ClientResource.class);", "modifier": "private static final", "type": "Logger", "declarator": "logger = LoggerFactory.getLogger(ClientResource.class)", "var_name": "logger"}, {"original_string": "private final AclDAO aclDAOReadOnly;", "modifier": "private final", "type": "AclDAO", "declarator": "aclDAOReadOnly", "var_name": "aclDAOReadOnly"}, {"original_string": "private final AclDAO aclDAOReadWrite;", "modifier": "private final", "type": "AclDAO", "declarator": "aclDAOReadWrite", "var_name": "aclDAOReadWrite"}, {"original_string": "private final ClientDAO clientDAOReadOnly;", "modifier": "private final", "type": "ClientDAO", "declarator": "clientDAOReadOnly", "var_name": "clientDAOReadOnly"}, {"original_string": "private final ClientDAO clientDAOReadWrite;", "modifier": "private final", "type": "ClientDAO", "declarator": "clientDAOReadWrite", "var_name": "clientDAOReadWrite"}, {"original_string": "private final GroupDAO groupDAOReadWrite;", "modifier": "private final", "type": "GroupDAO", "declarator": "groupDAOReadWrite", "var_name": "groupDAOReadWrite"}, {"original_string": "private final AuditLog auditLog;", "modifier": "private final", "type": "AuditLog", "declarator": "auditLog", "var_name": "auditLog"}], "methods": [{"identifier": "ClientResource", "parameters": "(AclDAOFactory aclDAOFactory, ClientDAOFactory clientDAOFactory,\n      GroupDAOFactory groupDAOFactory, AuditLog auditLog)", "modifiers": "@Inject public", "return": "", "signature": " ClientResource(AclDAOFactory aclDAOFactory, ClientDAOFactory clientDAOFactory,\n      GroupDAOFactory groupDAOFactory, AuditLog auditLog)", "full_signature": "@Inject public  ClientResource(AclDAOFactory aclDAOFactory, ClientDAOFactory clientDAOFactory,\n      GroupDAOFactory groupDAOFactory, AuditLog auditLog)", "class_method_signature": "ClientResource.ClientResource(AclDAOFactory aclDAOFactory, ClientDAOFactory clientDAOFactory,\n      GroupDAOFactory groupDAOFactory, AuditLog auditLog)", "testcase": false, "constructor": true}, {"identifier": "createClient", "parameters": "(@Auth AutomationClient automationClient,\n      @Valid CreateClientRequestV2 request)", "modifiers": "@Timed @ExceptionMetered @POST @Consumes(APPLICATION_JSON) public", "return": "Response", "signature": "Response createClient(@Auth AutomationClient automationClient,\n      @Valid CreateClientRequestV2 request)", "full_signature": "@Timed @ExceptionMetered @POST @Consumes(APPLICATION_JSON) public Response createClient(@Auth AutomationClient automationClient,\n      @Valid CreateClientRequestV2 request)", "class_method_signature": "ClientResource.createClient(@Auth AutomationClient automationClient,\n      @Valid CreateClientRequestV2 request)", "testcase": false, "constructor": false}, {"identifier": "clientListing", "parameters": "(@Auth AutomationClient automationClient)", "modifiers": "@Timed @ExceptionMetered @GET @Produces(APPLICATION_JSON) public", "return": "Iterable<String>", "signature": "Iterable<String> clientListing(@Auth AutomationClient automationClient)", "full_signature": "@Timed @ExceptionMetered @GET @Produces(APPLICATION_JSON) public Iterable<String> clientListing(@Auth AutomationClient automationClient)", "class_method_signature": "ClientResource.clientListing(@Auth AutomationClient automationClient)", "testcase": false, "constructor": false}, {"identifier": "clientInfo", "parameters": "(@Auth AutomationClient automationClient,\n      @PathParam(\"name\") String name)", "modifiers": "@Timed @ExceptionMetered @GET @Path(\"{name}\") @Produces(APPLICATION_JSON) public", "return": "ClientDetailResponseV2", "signature": "ClientDetailResponseV2 clientInfo(@Auth AutomationClient automationClient,\n      @PathParam(\"name\") String name)", "full_signature": "@Timed @ExceptionMetered @GET @Path(\"{name}\") @Produces(APPLICATION_JSON) public ClientDetailResponseV2 clientInfo(@Auth AutomationClient automationClient,\n      @PathParam(\"name\") String name)", "class_method_signature": "ClientResource.clientInfo(@Auth AutomationClient automationClient,\n      @PathParam(\"name\") String name)", "testcase": false, "constructor": false}, {"identifier": "clientGroupsListing", "parameters": "(@Auth AutomationClient automationClient,\n      @PathParam(\"name\") String name)", "modifiers": "@Timed @ExceptionMetered @GET @Path(\"{name}/groups\") @Produces(APPLICATION_JSON) public", "return": "Iterable<String>", "signature": "Iterable<String> clientGroupsListing(@Auth AutomationClient automationClient,\n      @PathParam(\"name\") String name)", "full_signature": "@Timed @ExceptionMetered @GET @Path(\"{name}/groups\") @Produces(APPLICATION_JSON) public Iterable<String> clientGroupsListing(@Auth AutomationClient automationClient,\n      @PathParam(\"name\") String name)", "class_method_signature": "ClientResource.clientGroupsListing(@Auth AutomationClient automationClient,\n      @PathParam(\"name\") String name)", "testcase": false, "constructor": false}, {"identifier": "modifyClientGroups", "parameters": "(@Auth AutomationClient automationClient,\n      @PathParam(\"name\") String name, @Valid ModifyGroupsRequestV2 request)", "modifiers": "@Timed @ExceptionMetered @PUT @Path(\"{name}/groups\") @Produces(APPLICATION_JSON) public", "return": "Iterable<String>", "signature": "Iterable<String> modifyClientGroups(@Auth AutomationClient automationClient,\n      @PathParam(\"name\") String name, @Valid ModifyGroupsRequestV2 request)", "full_signature": "@Timed @ExceptionMetered @PUT @Path(\"{name}/groups\") @Produces(APPLICATION_JSON) public Iterable<String> modifyClientGroups(@Auth AutomationClient automationClient,\n      @PathParam(\"name\") String name, @Valid ModifyGroupsRequestV2 request)", "class_method_signature": "ClientResource.modifyClientGroups(@Auth AutomationClient automationClient,\n      @PathParam(\"name\") String name, @Valid ModifyGroupsRequestV2 request)", "testcase": false, "constructor": false}, {"identifier": "clientSecretsListing", "parameters": "(@Auth AutomationClient automationClient,\n      @PathParam(\"name\") String name)", "modifiers": "@Timed @ExceptionMetered @GET @Path(\"{name}/secrets\") @Produces(APPLICATION_JSON) public", "return": "Iterable<String>", "signature": "Iterable<String> clientSecretsListing(@Auth AutomationClient automationClient,\n      @PathParam(\"name\") String name)", "full_signature": "@Timed @ExceptionMetered @GET @Path(\"{name}/secrets\") @Produces(APPLICATION_JSON) public Iterable<String> clientSecretsListing(@Auth AutomationClient automationClient,\n      @PathParam(\"name\") String name)", "class_method_signature": "ClientResource.clientSecretsListing(@Auth AutomationClient automationClient,\n      @PathParam(\"name\") String name)", "testcase": false, "constructor": false}, {"identifier": "deleteClient", "parameters": "(@Auth AutomationClient automationClient,\n      @PathParam(\"name\") String name)", "modifiers": "@Timed @ExceptionMetered @DELETE @Path(\"{name}\") public", "return": "Response", "signature": "Response deleteClient(@Auth AutomationClient automationClient,\n      @PathParam(\"name\") String name)", "full_signature": "@Timed @ExceptionMetered @DELETE @Path(\"{name}\") public Response deleteClient(@Auth AutomationClient automationClient,\n      @PathParam(\"name\") String name)", "class_method_signature": "ClientResource.deleteClient(@Auth AutomationClient automationClient,\n      @PathParam(\"name\") String name)", "testcase": false, "constructor": false}, {"identifier": "modifyClient", "parameters": "(@Auth AutomationClient automationClient,\n      @PathParam(\"name\") String currentName, @Valid ModifyClientRequestV2 request)", "modifiers": "@Timed @ExceptionMetered @POST @Path(\"{name}\") @Consumes(APPLICATION_JSON) @Produces(APPLICATION_JSON) public", "return": "ClientDetailResponseV2", "signature": "ClientDetailResponseV2 modifyClient(@Auth AutomationClient automationClient,\n      @PathParam(\"name\") String currentName, @Valid ModifyClientRequestV2 request)", "full_signature": "@Timed @ExceptionMetered @POST @Path(\"{name}\") @Consumes(APPLICATION_JSON) @Produces(APPLICATION_JSON) public ClientDetailResponseV2 modifyClient(@Auth AutomationClient automationClient,\n      @PathParam(\"name\") String currentName, @Valid ModifyClientRequestV2 request)", "class_method_signature": "ClientResource.modifyClient(@Auth AutomationClient automationClient,\n      @PathParam(\"name\") String currentName, @Valid ModifyClientRequestV2 request)", "testcase": false, "constructor": false}, {"identifier": "groupsToGroupIds", "parameters": "(Set<String> groupNames)", "modifiers": "private", "return": "Stream<Optional<Long>>", "signature": "Stream<Optional<Long>> groupsToGroupIds(Set<String> groupNames)", "full_signature": "private Stream<Optional<Long>> groupsToGroupIds(Set<String> groupNames)", "class_method_signature": "ClientResource.groupsToGroupIds(Set<String> groupNames)", "testcase": false, "constructor": false}], "file": "server/src/main/java/keywhiz/service/resources/automation/v2/ClientResource.java"}, "focal_method": {"identifier": "clientListing", "parameters": "(@Auth AutomationClient automationClient)", "modifiers": "@Timed @ExceptionMetered @GET @Produces(APPLICATION_JSON) public", "return": "Iterable<String>", "body": "@Timed @ExceptionMetered\n  @GET\n  @Produces(APPLICATION_JSON)\n  public Iterable<String> clientListing(@Auth AutomationClient automationClient) {\n    return clientDAOReadOnly.getClients().stream()\n        .map(Client::getName)\n        .collect(toSet());\n  }", "signature": "Iterable<String> clientListing(@Auth AutomationClient automationClient)", "full_signature": "@Timed @ExceptionMetered @GET @Produces(APPLICATION_JSON) public Iterable<String> clientListing(@Auth AutomationClient automationClient)", "class_method_signature": "ClientResource.clientListing(@Auth AutomationClient automationClient)", "testcase": false, "constructor": false, "invocations": ["collect", "map", "stream", "getClients", "toSet"]}, "repository": {"repo_id": 32866430, "url": "https://github.com/square/keywhiz", "stars": 2186, "created": "3/25/2015 1:31:39 PM +00:00", "updates": "2020-01-24T18:57:02+00:00", "fork": "False", "license": "licensed"}}