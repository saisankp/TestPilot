{"test_class": {"identifier": "VelocityHelperTest", "superclass": "extends AbstractServiceTest", "interfaces": "", "fields": [], "file": "herd-code/herd-service/src/test/java/org/finra/herd/service/helper/VelocityHelperTest.java"}, "test_case": {"identifier": "testEvaluateReflection", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testEvaluateReflection()\n    {\n        String template = \"$foo.getClass().forName(\\\"java.lang.Runtime\\\").getRuntime().exec(\\\"cmd dir\\\")\";\n        Map<String, Object> variables = new HashMap<>();\n        variables.put(\"foo\", \"bar\");\n        String logTag = \"test\";\n        try\n        {\n            velocityHelper.evaluate(template, variables, logTag);\n            fail();\n        }\n        catch (MethodInvocationException methodInvocationException)\n        {\n            Assert.assertEquals(\"Exception message not equal.\",\n                \"Object 'java.lang.Class' does not contain method forName(java.lang.String) at test[line 1, column 17]\",\n                methodInvocationException.getMessage());\n        }\n    }", "signature": "void testEvaluateReflection()", "full_signature": "@Test public void testEvaluateReflection()", "class_method_signature": "VelocityHelperTest.testEvaluateReflection()", "testcase": true, "constructor": false, "invocations": ["put", "evaluate", "fail", "assertEquals", "getMessage"]}, "focal_class": {"identifier": "VelocityHelper", "superclass": "", "interfaces": "", "fields": [], "methods": [{"identifier": "VelocityHelper", "parameters": "()", "modifiers": "public", "return": "", "signature": " VelocityHelper()", "full_signature": "public  VelocityHelper()", "class_method_signature": "VelocityHelper.VelocityHelper()", "testcase": false, "constructor": true}, {"identifier": "evaluate", "parameters": "(Reader templateReader, Map<String, Object> variables, String logTag)", "modifiers": "public", "return": "String", "signature": "String evaluate(Reader templateReader, Map<String, Object> variables, String logTag)", "full_signature": "public String evaluate(Reader templateReader, Map<String, Object> variables, String logTag)", "class_method_signature": "VelocityHelper.evaluate(Reader templateReader, Map<String, Object> variables, String logTag)", "testcase": false, "constructor": false}, {"identifier": "evaluate", "parameters": "(String template, Map<String, Object> variables, String logTag)", "modifiers": "public", "return": "String", "signature": "String evaluate(String template, Map<String, Object> variables, String logTag)", "full_signature": "public String evaluate(String template, Map<String, Object> variables, String logTag)", "class_method_signature": "VelocityHelper.evaluate(String template, Map<String, Object> variables, String logTag)", "testcase": false, "constructor": false}], "file": "herd-code/herd-service/src/main/java/org/finra/herd/service/helper/VelocityHelper.java"}, "focal_method": {"identifier": "evaluate", "parameters": "(Reader templateReader, Map<String, Object> variables, String logTag)", "modifiers": "public", "return": "String", "body": "public String evaluate(Reader templateReader, Map<String, Object> variables, String logTag)\n    {\n        VelocityContext velocityContext = new VelocityContext(variables);\n        StringWriter writer = new StringWriter();\n        if (!Velocity.evaluate(velocityContext, writer, logTag, templateReader))\n        {\n            // Although the Velocity.evaluate method's Javadoc states that it will return false to indicate a failure when the template couldn't be\n            // processed and to see the Velocity log messages for more details, upon examining the method's implementation, it doesn't look like\n            // it will ever return false. Instead, other RuntimeExceptions will be thrown (e.g. ParseErrorException).\n            // Nonetheless, we'll leave this checking here to honor the method's contract in case the implementation changes in the future.\n            // Having said that, there will be no way to JUnit test this flow.\n            throw new IllegalStateException(\"Error evaluating velocity template. See velocity log message for more details.\");\n        }\n        return writer.toString();\n    }", "signature": "String evaluate(Reader templateReader, Map<String, Object> variables, String logTag)", "full_signature": "public String evaluate(Reader templateReader, Map<String, Object> variables, String logTag)", "class_method_signature": "VelocityHelper.evaluate(Reader templateReader, Map<String, Object> variables, String logTag)", "testcase": false, "constructor": false, "invocations": ["evaluate", "toString"]}, "repository": {"repo_id": 42949039, "url": "https://github.com/FINRAOS/herd", "language": "Java", "is_fork": false, "fork_count": 36, "stargazer_count": 120, "size": 205797, "license": "licensed"}}