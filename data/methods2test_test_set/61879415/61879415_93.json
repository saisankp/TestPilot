{"test_class": {"identifier": "DefaultSysSystemMappingServiceTest", "superclass": "extends AbstractIntegrationTest", "interfaces": "", "fields": [{"original_string": "@Autowired\n\tprivate SysSystemMappingService mappingService;", "modifier": "@Autowired\n\tprivate", "type": "SysSystemMappingService", "declarator": "mappingService", "var_name": "mappingService"}, {"original_string": "@Autowired\n\tprivate SysSystemAttributeMappingService mappingAttributeService;", "modifier": "@Autowired\n\tprivate", "type": "SysSystemAttributeMappingService", "declarator": "mappingAttributeService", "var_name": "mappingAttributeService"}, {"original_string": "@Autowired\n\tprivate SysSystemService systemService;", "modifier": "@Autowired\n\tprivate", "type": "SysSystemService", "declarator": "systemService", "var_name": "systemService"}, {"original_string": "@Autowired\n\tprivate SysSchemaObjectClassService schemaObjectClassService;", "modifier": "@Autowired\n\tprivate", "type": "SysSchemaObjectClassService", "declarator": "schemaObjectClassService", "var_name": "schemaObjectClassService"}, {"original_string": "@Autowired\n\tprivate SysSchemaAttributeService schemaAttributeService;", "modifier": "@Autowired\n\tprivate", "type": "SysSchemaAttributeService", "declarator": "schemaAttributeService", "var_name": "schemaAttributeService"}, {"original_string": "@Autowired\n\tprivate IdmTreeTypeService treeTypeService;", "modifier": "@Autowired\n\tprivate", "type": "IdmTreeTypeService", "declarator": "treeTypeService", "var_name": "treeTypeService"}, {"original_string": "@Autowired\n\tprivate TestHelper testHelper;", "modifier": "@Autowired\n\tprivate", "type": "TestHelper", "declarator": "testHelper", "var_name": "testHelper"}], "file": "Realization/backend/acc/src/test/java/eu/bcvsolutions/idm/acc/service/impl/DefaultSysSystemMappingServiceTest.java"}, "test_case": {"identifier": "textFilterTest", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n\tpublic void textFilterTest() {\n\t\tIdmBasePermission permission = IdmBasePermission.ADMIN;\n\t\tSystemEntityType entityType = SystemEntityType.IDENTITY;\n\n\t\tSysSystemDto system = createSystem();\n\t\tSysSchemaObjectClassDto objectClass = createObjectClass(system);\n\n\t\tSysSystemMappingDto mappingSystem1 = testHelper.createMappingSystem(entityType, objectClass);\n\t\tmappingSystem1.setName(\"SomeName01\");\n\t\tmappingService.save(mappingSystem1);\n\t\tSysSystemMappingDto mappingSystem2 = testHelper.createMappingSystem(entityType, objectClass);\n\t\tmappingSystem2.setName(\"SomeName02\");\n\t\tmappingService.save(mappingSystem2);\n\t\tSysSystemMappingDto mappingSystem3 = testHelper.createMappingSystem(entityType, objectClass);\n\t\tmappingSystem3.setName(\"SomeName22\");\n\t\tmappingService.save(mappingSystem3);\n\n\t\tSysSystemMappingFilter filter = new SysSystemMappingFilter();\n\t\tfilter.setText(\"SomeName0\");\n\n\t\tPage<SysSystemMappingDto> result = mappingService.find(filter, null, permission);\n\t\tassertEquals(2, result.getTotalElements());\n\t\tassertTrue(result.getContent().contains(mappingSystem1));\n\t\tassertTrue(result.getContent().contains(mappingSystem2));\n\t}", "signature": "void textFilterTest()", "full_signature": "@Test public void textFilterTest()", "class_method_signature": "DefaultSysSystemMappingServiceTest.textFilterTest()", "testcase": true, "constructor": false, "invocations": ["createSystem", "createObjectClass", "createMappingSystem", "setName", "save", "createMappingSystem", "setName", "save", "createMappingSystem", "setName", "save", "setText", "find", "assertEquals", "getTotalElements", "assertTrue", "contains", "getContent", "assertTrue", "contains", "getContent"]}, "focal_class": {"identifier": "DefaultSysSystemMappingService", "superclass": "extends AbstractEventableDtoService<SysSystemMappingDto, SysSystemMapping, SysSystemMappingFilter>", "interfaces": "implements SysSystemMappingService", "fields": [{"original_string": "private static final String SYSTEM_MISSING_IDENTIFIER = \"systemMissingIdentifier\";", "modifier": "private static final", "type": "String", "declarator": "SYSTEM_MISSING_IDENTIFIER = \"systemMissingIdentifier\"", "var_name": "SYSTEM_MISSING_IDENTIFIER"}, {"original_string": "private static final String SYSTEM_MISSING_OWNER = \"systemMissingOwner\";", "modifier": "private static final", "type": "String", "declarator": "SYSTEM_MISSING_OWNER = \"systemMissingOwner\"", "var_name": "SYSTEM_MISSING_OWNER"}, {"original_string": "private final SysSystemMappingRepository repository;", "modifier": "private final", "type": "SysSystemMappingRepository", "declarator": "repository", "var_name": "repository"}, {"original_string": "private final GroovyScriptService groovyScriptService;", "modifier": "private final", "type": "GroovyScriptService", "declarator": "groovyScriptService", "var_name": "groovyScriptService"}, {"original_string": "private final PluginRegistry<AbstractScriptEvaluator, IdmScriptCategory> pluginExecutors;", "modifier": "private final", "type": "PluginRegistry<AbstractScriptEvaluator, IdmScriptCategory>", "declarator": "pluginExecutors", "var_name": "pluginExecutors"}, {"original_string": "private final ApplicationContext applicationContext;", "modifier": "private final", "type": "ApplicationContext", "declarator": "applicationContext", "var_name": "applicationContext"}, {"original_string": "private SysSystemAttributeMappingService attributeMappingService;", "modifier": "private", "type": "SysSystemAttributeMappingService", "declarator": "attributeMappingService", "var_name": "attributeMappingService"}, {"original_string": "@Autowired\n\t@Lazy\n\tprivate SysSchemaAttributeService attributeService;", "modifier": "@Autowired\n\t@Lazy\n\tprivate", "type": "SysSchemaAttributeService", "declarator": "attributeService", "var_name": "attributeService"}, {"original_string": "@Lazy\n\t@Autowired\n\tprivate IdmIdentityRoleService identityRoleService;", "modifier": "@Lazy\n\t@Autowired\n\tprivate", "type": "IdmIdentityRoleService", "declarator": "identityRoleService", "var_name": "identityRoleService"}, {"original_string": "@Lazy\n\t@Autowired\n\tprivate IdmIdentityContractService identityContractService;", "modifier": "@Lazy\n\t@Autowired\n\tprivate", "type": "IdmIdentityContractService", "declarator": "identityContractService", "var_name": "identityContractService"}, {"original_string": "@Lazy\n\t@Autowired\n\tprivate IdmTreeTypeService treeTypeService;", "modifier": "@Lazy\n\t@Autowired\n\tprivate", "type": "IdmTreeTypeService", "declarator": "treeTypeService", "var_name": "treeTypeService"}, {"original_string": "@Lazy\n\t@Autowired\n\tprivate AccIdentityAccountService identityAccountService;", "modifier": "@Lazy\n\t@Autowired\n\tprivate", "type": "AccIdentityAccountService", "declarator": "identityAccountService", "var_name": "identityAccountService"}, {"original_string": "@Lazy\n\t@Autowired\n\tprivate SysSystemEntityService systemEntityService;", "modifier": "@Lazy\n\t@Autowired\n\tprivate", "type": "SysSystemEntityService", "declarator": "systemEntityService", "var_name": "systemEntityService"}], "methods": [{"identifier": "DefaultSysSystemMappingService", "parameters": "(SysSystemMappingRepository repository, EntityEventManager entityEventManager,\n\t\t\tGroovyScriptService groovyScriptService, List<AbstractScriptEvaluator> evaluators,\n\t\t\tApplicationContext applicationContext)", "modifiers": "@Autowired public", "return": "", "signature": " DefaultSysSystemMappingService(SysSystemMappingRepository repository, EntityEventManager entityEventManager,\n\t\t\tGroovyScriptService groovyScriptService, List<AbstractScriptEvaluator> evaluators,\n\t\t\tApplicationContext applicationContext)", "full_signature": "@Autowired public  DefaultSysSystemMappingService(SysSystemMappingRepository repository, EntityEventManager entityEventManager,\n\t\t\tGroovyScriptService groovyScriptService, List<AbstractScriptEvaluator> evaluators,\n\t\t\tApplicationContext applicationContext)", "class_method_signature": "DefaultSysSystemMappingService.DefaultSysSystemMappingService(SysSystemMappingRepository repository, EntityEventManager entityEventManager,\n\t\t\tGroovyScriptService groovyScriptService, List<AbstractScriptEvaluator> evaluators,\n\t\t\tApplicationContext applicationContext)", "testcase": false, "constructor": true}, {"identifier": "save", "parameters": "(SysSystemMappingDto dto, BasePermission... permission)", "modifiers": "@Override public", "return": "SysSystemMappingDto", "signature": "SysSystemMappingDto save(SysSystemMappingDto dto, BasePermission... permission)", "full_signature": "@Override public SysSystemMappingDto save(SysSystemMappingDto dto, BasePermission... permission)", "class_method_signature": "DefaultSysSystemMappingService.save(SysSystemMappingDto dto, BasePermission... permission)", "testcase": false, "constructor": false}, {"identifier": "findEntities", "parameters": "(SysSystemMappingFilter filter, Pageable pageable,\n\t\t\tBasePermission... permission)", "modifiers": "@Override protected", "return": "Page<SysSystemMapping>", "signature": "Page<SysSystemMapping> findEntities(SysSystemMappingFilter filter, Pageable pageable,\n\t\t\tBasePermission... permission)", "full_signature": "@Override protected Page<SysSystemMapping> findEntities(SysSystemMappingFilter filter, Pageable pageable,\n\t\t\tBasePermission... permission)", "class_method_signature": "DefaultSysSystemMappingService.findEntities(SysSystemMappingFilter filter, Pageable pageable,\n\t\t\tBasePermission... permission)", "testcase": false, "constructor": false}, {"identifier": "findIds", "parameters": "(SysSystemMappingFilter filter, Pageable pageable, BasePermission... permission)", "modifiers": "@Override public", "return": "Page<UUID>", "signature": "Page<UUID> findIds(SysSystemMappingFilter filter, Pageable pageable, BasePermission... permission)", "full_signature": "@Override public Page<UUID> findIds(SysSystemMappingFilter filter, Pageable pageable, BasePermission... permission)", "class_method_signature": "DefaultSysSystemMappingService.findIds(SysSystemMappingFilter filter, Pageable pageable, BasePermission... permission)", "testcase": false, "constructor": false}, {"identifier": "findBySystem", "parameters": "(SysSystemDto system, SystemOperationType operation,\n\t\t\tSystemEntityType entityType)", "modifiers": "@Override public", "return": "List<SysSystemMappingDto>", "signature": "List<SysSystemMappingDto> findBySystem(SysSystemDto system, SystemOperationType operation,\n\t\t\tSystemEntityType entityType)", "full_signature": "@Override public List<SysSystemMappingDto> findBySystem(SysSystemDto system, SystemOperationType operation,\n\t\t\tSystemEntityType entityType)", "class_method_signature": "DefaultSysSystemMappingService.findBySystem(SysSystemDto system, SystemOperationType operation,\n\t\t\tSystemEntityType entityType)", "testcase": false, "constructor": false}, {"identifier": "findBySystemId", "parameters": "(UUID systemId, SystemOperationType operation,\n\t\t\tSystemEntityType entityType)", "modifiers": "@Override public", "return": "List<SysSystemMappingDto>", "signature": "List<SysSystemMappingDto> findBySystemId(UUID systemId, SystemOperationType operation,\n\t\t\tSystemEntityType entityType)", "full_signature": "@Override public List<SysSystemMappingDto> findBySystemId(UUID systemId, SystemOperationType operation,\n\t\t\tSystemEntityType entityType)", "class_method_signature": "DefaultSysSystemMappingService.findBySystemId(UUID systemId, SystemOperationType operation,\n\t\t\tSystemEntityType entityType)", "testcase": false, "constructor": false}, {"identifier": "findByObjectClass", "parameters": "(SysSchemaObjectClassDto objectClass,\n\t\t\tSystemOperationType operation, SystemEntityType entityType)", "modifiers": "@Override public", "return": "List<SysSystemMappingDto>", "signature": "List<SysSystemMappingDto> findByObjectClass(SysSchemaObjectClassDto objectClass,\n\t\t\tSystemOperationType operation, SystemEntityType entityType)", "full_signature": "@Override public List<SysSystemMappingDto> findByObjectClass(SysSchemaObjectClassDto objectClass,\n\t\t\tSystemOperationType operation, SystemEntityType entityType)", "class_method_signature": "DefaultSysSystemMappingService.findByObjectClass(SysSchemaObjectClassDto objectClass,\n\t\t\tSystemOperationType operation, SystemEntityType entityType)", "testcase": false, "constructor": false}, {"identifier": "isEnabledProtection", "parameters": "(AccAccountDto account)", "modifiers": "@Override public", "return": "boolean", "signature": "boolean isEnabledProtection(AccAccountDto account)", "full_signature": "@Override public boolean isEnabledProtection(AccAccountDto account)", "class_method_signature": "DefaultSysSystemMappingService.isEnabledProtection(AccAccountDto account)", "testcase": false, "constructor": false}, {"identifier": "getProtectionInterval", "parameters": "(AccAccountDto account)", "modifiers": "@Override public", "return": "Integer", "signature": "Integer getProtectionInterval(AccAccountDto account)", "full_signature": "@Override public Integer getProtectionInterval(AccAccountDto account)", "class_method_signature": "DefaultSysSystemMappingService.getProtectionInterval(AccAccountDto account)", "testcase": false, "constructor": false}, {"identifier": "clone", "parameters": "(UUID id)", "modifiers": "@Override public", "return": "SysSystemMappingDto", "signature": "SysSystemMappingDto clone(UUID id)", "full_signature": "@Override public SysSystemMappingDto clone(UUID id)", "class_method_signature": "DefaultSysSystemMappingService.clone(UUID id)", "testcase": false, "constructor": false}, {"identifier": "internalExport", "parameters": "(UUID id)", "modifiers": "@Override protected", "return": "SysSystemMappingDto", "signature": "SysSystemMappingDto internalExport(UUID id)", "full_signature": "@Override protected SysSystemMappingDto internalExport(UUID id)", "class_method_signature": "DefaultSysSystemMappingService.internalExport(UUID id)", "testcase": false, "constructor": false}, {"identifier": "export", "parameters": "(UUID id, IdmExportImportDto batch)", "modifiers": "@Override public", "return": "void", "signature": "void export(UUID id, IdmExportImportDto batch)", "full_signature": "@Override public void export(UUID id, IdmExportImportDto batch)", "class_method_signature": "DefaultSysSystemMappingService.export(UUID id, IdmExportImportDto batch)", "testcase": false, "constructor": false}, {"identifier": "validate", "parameters": "(UUID id)", "modifiers": "@Override public", "return": "void", "signature": "void validate(UUID id)", "full_signature": "@Override public void validate(UUID id)", "class_method_signature": "DefaultSysSystemMappingService.validate(UUID id)", "testcase": false, "constructor": false}, {"identifier": "validateIdentifier", "parameters": "(Map<String, Object> errors, SysSystemMappingDto systemMapping,\n\t\t\tList<SysSystemAttributeMappingDto> attributesList)", "modifiers": "private", "return": "Map<String, Object>", "signature": "Map<String, Object> validateIdentifier(Map<String, Object> errors, SysSystemMappingDto systemMapping,\n\t\t\tList<SysSystemAttributeMappingDto> attributesList)", "full_signature": "private Map<String, Object> validateIdentifier(Map<String, Object> errors, SysSystemMappingDto systemMapping,\n\t\t\tList<SysSystemAttributeMappingDto> attributesList)", "class_method_signature": "DefaultSysSystemMappingService.validateIdentifier(Map<String, Object> errors, SysSystemMappingDto systemMapping,\n\t\t\tList<SysSystemAttributeMappingDto> attributesList)", "testcase": false, "constructor": false}, {"identifier": "validateSynchronizationContracts", "parameters": "(Map<String, Object> errors,\n\t\t\tSysSystemMappingDto systemMapping, List<SysSystemAttributeMappingDto> attributesList)", "modifiers": "private", "return": "Map<String, Object>", "signature": "Map<String, Object> validateSynchronizationContracts(Map<String, Object> errors,\n\t\t\tSysSystemMappingDto systemMapping, List<SysSystemAttributeMappingDto> attributesList)", "full_signature": "private Map<String, Object> validateSynchronizationContracts(Map<String, Object> errors,\n\t\t\tSysSystemMappingDto systemMapping, List<SysSystemAttributeMappingDto> attributesList)", "class_method_signature": "DefaultSysSystemMappingService.validateSynchronizationContracts(Map<String, Object> errors,\n\t\t\tSysSystemMappingDto systemMapping, List<SysSystemAttributeMappingDto> attributesList)", "testcase": false, "constructor": false}, {"identifier": "canBeAccountCreated", "parameters": "(String uid, AbstractDto dto, String script, SysSystemDto system)", "modifiers": "@Override public", "return": "boolean", "signature": "boolean canBeAccountCreated(String uid, AbstractDto dto, String script, SysSystemDto system)", "full_signature": "@Override public boolean canBeAccountCreated(String uid, AbstractDto dto, String script, SysSystemDto system)", "class_method_signature": "DefaultSysSystemMappingService.canBeAccountCreated(String uid, AbstractDto dto, String script, SysSystemDto system)", "testcase": false, "constructor": false}, {"identifier": "findProvisioningMapping", "parameters": "(UUID systemId, SystemEntityType entityType)", "modifiers": "@Override public", "return": "SysSystemMappingDto", "signature": "SysSystemMappingDto findProvisioningMapping(UUID systemId, SystemEntityType entityType)", "full_signature": "@Override public SysSystemMappingDto findProvisioningMapping(UUID systemId, SystemEntityType entityType)", "class_method_signature": "DefaultSysSystemMappingService.findProvisioningMapping(UUID systemId, SystemEntityType entityType)", "testcase": false, "constructor": false}, {"identifier": "getProtectionInterval", "parameters": "(SysSystemMappingDto systemMapping)", "modifiers": "private", "return": "Integer", "signature": "Integer getProtectionInterval(SysSystemMappingDto systemMapping)", "full_signature": "private Integer getProtectionInterval(SysSystemMappingDto systemMapping)", "class_method_signature": "DefaultSysSystemMappingService.getProtectionInterval(SysSystemMappingDto systemMapping)", "testcase": false, "constructor": false}, {"identifier": "isEnabledProtection", "parameters": "(SysSystemMappingDto systemMapping)", "modifiers": "private", "return": "boolean", "signature": "boolean isEnabledProtection(SysSystemMappingDto systemMapping)", "full_signature": "private boolean isEnabledProtection(SysSystemMappingDto systemMapping)", "class_method_signature": "DefaultSysSystemMappingService.isEnabledProtection(SysSystemMappingDto systemMapping)", "testcase": false, "constructor": false}, {"identifier": "getAttributeMappingService", "parameters": "()", "modifiers": "private", "return": "SysSystemAttributeMappingService", "signature": "SysSystemAttributeMappingService getAttributeMappingService()", "full_signature": "private SysSystemAttributeMappingService getAttributeMappingService()", "class_method_signature": "DefaultSysSystemMappingService.getAttributeMappingService()", "testcase": false, "constructor": false}, {"identifier": "getMappingContext", "parameters": "(SysSystemMappingDto mapping, SysSystemEntityDto systemEntity, AbstractDto dto, SysSystemDto system)", "modifiers": "@Override public", "return": "MappingContext", "signature": "MappingContext getMappingContext(SysSystemMappingDto mapping, SysSystemEntityDto systemEntity, AbstractDto dto, SysSystemDto system)", "full_signature": "@Override public MappingContext getMappingContext(SysSystemMappingDto mapping, SysSystemEntityDto systemEntity, AbstractDto dto, SysSystemDto system)", "class_method_signature": "DefaultSysSystemMappingService.getMappingContext(SysSystemMappingDto mapping, SysSystemEntityDto systemEntity, AbstractDto dto, SysSystemDto system)", "testcase": false, "constructor": false}, {"identifier": "duplicateMapping", "parameters": "(UUID id, SysSchemaObjectClassDto schema,\n\t\t\tMap<UUID, UUID> schemaAttributesIds, Map<UUID, UUID> mappedAttributesIds, boolean usedInSameSystem)", "modifiers": "@Override @Transactional public", "return": "SysSystemMappingDto", "signature": "SysSystemMappingDto duplicateMapping(UUID id, SysSchemaObjectClassDto schema,\n\t\t\tMap<UUID, UUID> schemaAttributesIds, Map<UUID, UUID> mappedAttributesIds, boolean usedInSameSystem)", "full_signature": "@Override @Transactional public SysSystemMappingDto duplicateMapping(UUID id, SysSchemaObjectClassDto schema,\n\t\t\tMap<UUID, UUID> schemaAttributesIds, Map<UUID, UUID> mappedAttributesIds, boolean usedInSameSystem)", "class_method_signature": "DefaultSysSystemMappingService.duplicateMapping(UUID id, SysSchemaObjectClassDto schema,\n\t\t\tMap<UUID, UUID> schemaAttributesIds, Map<UUID, UUID> mappedAttributesIds, boolean usedInSameSystem)", "testcase": false, "constructor": false}, {"identifier": "duplicateName", "parameters": "(String name)", "modifiers": "private", "return": "String", "signature": "String duplicateName(String name)", "full_signature": "private String duplicateName(String name)", "class_method_signature": "DefaultSysSystemMappingService.duplicateName(String name)", "testcase": false, "constructor": false}], "file": "Realization/backend/acc/src/main/java/eu/bcvsolutions/idm/acc/service/impl/DefaultSysSystemMappingService.java"}, "focal_method": {"identifier": "save", "parameters": "(SysSystemMappingDto dto, BasePermission... permission)", "modifiers": "@Override public", "return": "SysSystemMappingDto", "body": "@Override\n\tpublic SysSystemMappingDto save(SysSystemMappingDto dto, BasePermission... permission) {\n\t\tSystemEntityType entityType = dto.getEntityType();\n\t\tif (SystemOperationType.PROVISIONING == dto.getOperationType() && !entityType.isSupportsProvisioning()) {\n\t\t\tthrow new ResultCodeException(AccResultCode.PROVISIONING_NOT_SUPPORTS_ENTITY_TYPE, ImmutableMap.of(\"entityType\", entityType));\n\t\t}\n\n\t\t// Validate all sub attributes\n\t\tgetAttributeMappingService()\n\t\t\t\t.findBySystemMapping(dto).forEach(attribute -> {\n\t\t\t\t\tgetAttributeMappingService().validate(attribute, dto);\n\t\t\t\t});\n\t\treturn super.save(dto, permission);\n\t}", "signature": "SysSystemMappingDto save(SysSystemMappingDto dto, BasePermission... permission)", "full_signature": "@Override public SysSystemMappingDto save(SysSystemMappingDto dto, BasePermission... permission)", "class_method_signature": "DefaultSysSystemMappingService.save(SysSystemMappingDto dto, BasePermission... permission)", "testcase": false, "constructor": false, "invocations": ["getEntityType", "getOperationType", "isSupportsProvisioning", "of", "forEach", "findBySystemMapping", "getAttributeMappingService", "validate", "getAttributeMappingService", "save"]}, "repository": {"repo_id": 61879415, "url": "https://github.com/bcvsolutions/CzechIdMng", "stars": 25, "created": "6/24/2016 11:18:23 AM +00:00", "updates": "2020-01-27T15:14:40+00:00", "fork": "False", "license": "licensed"}}