{"test_class": {"identifier": "PersistenceUnitDescriptorLoaderTest", "superclass": "", "interfaces": "", "fields": [], "file": "core/src/test/java/eu/drus/jpa/unit/core/PersistenceUnitDescriptorLoaderTest.java"}, "test_case": {"identifier": "testPersistenceUnitDescriptorLoader", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testPersistenceUnitDescriptorLoader() throws IOException {\n        // GIVEN\n        final PersistenceUnitDescriptorLoader loader = new PersistenceUnitDescriptorLoader();\n\n        // WHEN\n        final List<PersistenceUnitDescriptor> descriptors = loader.loadPersistenceUnitDescriptors(Collections.emptyMap());\n\n        // THEN\n        assertThat(descriptors, notNullValue());\n        assertThat(descriptors.size(), equalTo(4));\n        assertThat(descriptors, not(hasItem(nullValue())));\n    }", "signature": "void testPersistenceUnitDescriptorLoader()", "full_signature": "@Test public void testPersistenceUnitDescriptorLoader()", "class_method_signature": "PersistenceUnitDescriptorLoaderTest.testPersistenceUnitDescriptorLoader()", "testcase": true, "constructor": false, "invocations": ["loadPersistenceUnitDescriptors", "emptyMap", "assertThat", "notNullValue", "assertThat", "size", "equalTo", "assertThat", "not", "hasItem", "nullValue"]}, "focal_class": {"identifier": "PersistenceUnitDescriptorLoader", "superclass": "", "interfaces": "", "fields": [{"original_string": "private DocumentBuilderFactory documentBuilderFactory;", "modifier": "private", "type": "DocumentBuilderFactory", "declarator": "documentBuilderFactory", "var_name": "documentBuilderFactory"}], "methods": [{"identifier": "loadPersistenceUnitDescriptors", "parameters": "(final Map<String, Object> properties)", "modifiers": "public", "return": "List<PersistenceUnitDescriptor>", "signature": "List<PersistenceUnitDescriptor> loadPersistenceUnitDescriptors(final Map<String, Object> properties)", "full_signature": "public List<PersistenceUnitDescriptor> loadPersistenceUnitDescriptors(final Map<String, Object> properties)", "class_method_signature": "PersistenceUnitDescriptorLoader.loadPersistenceUnitDescriptors(final Map<String, Object> properties)", "testcase": false, "constructor": false}, {"identifier": "loadDocument", "parameters": "(final URL url)", "modifiers": "private", "return": "Document", "signature": "Document loadDocument(final URL url)", "full_signature": "private Document loadDocument(final URL url)", "class_method_signature": "PersistenceUnitDescriptorLoader.loadDocument(final URL url)", "testcase": false, "constructor": false}, {"identifier": "getDocumentBuilderFactory", "parameters": "()", "modifiers": "private", "return": "DocumentBuilderFactory", "signature": "DocumentBuilderFactory getDocumentBuilderFactory()", "full_signature": "private DocumentBuilderFactory getDocumentBuilderFactory()", "class_method_signature": "PersistenceUnitDescriptorLoader.getDocumentBuilderFactory()", "testcase": false, "constructor": false}], "file": "core/src/main/java/eu/drus/jpa/unit/core/PersistenceUnitDescriptorLoader.java"}, "focal_method": {"identifier": "loadPersistenceUnitDescriptors", "parameters": "(final Map<String, Object> properties)", "modifiers": "public", "return": "List<PersistenceUnitDescriptor>", "body": "public List<PersistenceUnitDescriptor> loadPersistenceUnitDescriptors(final Map<String, Object> properties) throws IOException {\n        final Enumeration<URL> resources = Thread.currentThread().getContextClassLoader().getResources(\"META-INF/persistence.xml\");\n\n        final List<PersistenceUnitDescriptor> units = new ArrayList<>();\n        while (resources.hasMoreElements()) {\n            final Document doc = loadDocument(resources.nextElement());\n\n            final NodeList children = doc.getDocumentElement().getChildNodes();\n            for (int i = 0; i < children.getLength(); i++) {\n                final Node node = children.item(i);\n                if (node.getNodeType() == Node.ELEMENT_NODE && \"persistence-unit\".equals(((Element) node).getTagName())) {\n                    units.add(new PersistenceUnitDescriptorImpl((Element) node, properties));\n                }\n            }\n        }\n\n        return units;\n\n    }", "signature": "List<PersistenceUnitDescriptor> loadPersistenceUnitDescriptors(final Map<String, Object> properties)", "full_signature": "public List<PersistenceUnitDescriptor> loadPersistenceUnitDescriptors(final Map<String, Object> properties)", "class_method_signature": "PersistenceUnitDescriptorLoader.loadPersistenceUnitDescriptors(final Map<String, Object> properties)", "testcase": false, "constructor": false, "invocations": ["getResources", "getContextClassLoader", "currentThread", "hasMoreElements", "loadDocument", "nextElement", "getChildNodes", "getDocumentElement", "getLength", "item", "getNodeType", "equals", "getTagName", "add"]}, "repository": {"repo_id": 52435170, "url": "https://github.com/dadrus/jpa-unit", "language": "Java", "is_fork": false, "fork_count": 7, "stargazer_count": 24, "size": 1190, "license": "licensed"}}