{"test_class": {"identifier": "ReportsServiceTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private final TransactionsService transactionsService = mock(TransactionsService.class);", "modifier": "private final", "type": "TransactionsService", "declarator": "transactionsService = mock(TransactionsService.class)", "var_name": "transactionsService"}, {"original_string": "private final ReportsService service = new ReportsService(transactionsService);", "modifier": "private final", "type": "ReportsService", "declarator": "service = new ReportsService(transactionsService)", "var_name": "service"}, {"original_string": "private Transactions transactions = createTransactions();", "modifier": "private", "type": "Transactions", "declarator": "transactions = createTransactions()", "var_name": "transactions"}], "file": "services/src/test/java/com/greensopinion/finance/services/reports/ReportsServiceTest.java"}, "test_case": {"identifier": "incomeVersusExpenses", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n\tpublic void incomeVersusExpenses() {\n\t\tIncomeVersusExpensesReport report = service.incomeVersusExpenses();\n\t\tList<Month> months = report.getMonths();\n\t\tassertNotNull(months);\n\t\tassertEquals(2, months.size());\n\t\tassertMonth(\"January 2015\", 102300, 1500, months.get(0));\n\t\tassertMonth(\"February 2015\", 0, 12345, months.get(1));\n\t}", "signature": "void incomeVersusExpenses()", "full_signature": "@Test public void incomeVersusExpenses()", "class_method_signature": "ReportsServiceTest.incomeVersusExpenses()", "testcase": true, "constructor": false, "invocations": ["incomeVersusExpenses", "getMonths", "assertNotNull", "assertEquals", "size", "assertMonth", "get", "assertMonth", "get"]}, "focal_class": {"identifier": "ReportsService", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final ThreadLocal<DateFormat> yearMonthFormat = new ThreadLocal<DateFormat>() {\n\t\t@Override\n\t\tprotected DateFormat initialValue() {\n\t\t\treturn new SimpleDateFormat(\"yyyyMM\");\n\t\t}\n\t};", "modifier": "private static final", "type": "ThreadLocal<DateFormat>", "declarator": "yearMonthFormat = new ThreadLocal<DateFormat>() {\n\t\t@Override\n\t\tprotected DateFormat initialValue() {\n\t\t\treturn new SimpleDateFormat(\"yyyyMM\");\n\t\t}\n\t}", "var_name": "yearMonthFormat"}, {"original_string": "private static final ThreadLocal<DateFormat> readableYearMonthFormat = new ThreadLocal<DateFormat>() {\n\t\t@Override\n\t\tprotected DateFormat initialValue() {\n\t\t\treturn new SimpleDateFormat(\"MMMMMMMMMMM yyyy\");\n\t\t}\n\t};", "modifier": "private static final", "type": "ThreadLocal<DateFormat>", "declarator": "readableYearMonthFormat = new ThreadLocal<DateFormat>() {\n\t\t@Override\n\t\tprotected DateFormat initialValue() {\n\t\t\treturn new SimpleDateFormat(\"MMMMMMMMMMM yyyy\");\n\t\t}\n\t}", "var_name": "readableYearMonthFormat"}, {"original_string": "private final TransactionsService transactionsService;", "modifier": "private final", "type": "TransactionsService", "declarator": "transactionsService", "var_name": "transactionsService"}], "methods": [{"identifier": "ReportsService", "parameters": "(TransactionsService transactionsService)", "modifiers": "@Inject", "return": "", "signature": " ReportsService(TransactionsService transactionsService)", "full_signature": "@Inject  ReportsService(TransactionsService transactionsService)", "class_method_signature": "ReportsService.ReportsService(TransactionsService transactionsService)", "testcase": false, "constructor": true}, {"identifier": "incomeVersusExpenses", "parameters": "()", "modifiers": "public", "return": "IncomeVersusExpensesReport", "signature": "IncomeVersusExpensesReport incomeVersusExpenses()", "full_signature": "public IncomeVersusExpensesReport incomeVersusExpenses()", "class_method_signature": "ReportsService.incomeVersusExpenses()", "testcase": false, "constructor": false}, {"identifier": "expensesByCategory", "parameters": "()", "modifiers": "public", "return": "ExpensesByCategoryReport", "signature": "ExpensesByCategoryReport expensesByCategory()", "full_signature": "public ExpensesByCategoryReport expensesByCategory()", "class_method_signature": "ReportsService.expensesByCategory()", "testcase": false, "constructor": false}, {"identifier": "transactionsForMonth", "parameters": "(long yearMonth)", "modifiers": "public", "return": "PeriodTransactions", "signature": "PeriodTransactions transactionsForMonth(long yearMonth)", "full_signature": "public PeriodTransactions transactionsForMonth(long yearMonth)", "class_method_signature": "ReportsService.transactionsForMonth(long yearMonth)", "testcase": false, "constructor": false}, {"identifier": "detailsForMonth", "parameters": "(long yearMonth)", "modifiers": "public", "return": "PeriodDetails", "signature": "PeriodDetails detailsForMonth(long yearMonth)", "full_signature": "public PeriodDetails detailsForMonth(long yearMonth)", "class_method_signature": "ReportsService.detailsForMonth(long yearMonth)", "testcase": false, "constructor": false}, {"identifier": "transactions", "parameters": "(long yearMonth)", "modifiers": "private", "return": "List<Transaction>", "signature": "List<Transaction> transactions(long yearMonth)", "full_signature": "private List<Transaction> transactions(long yearMonth)", "class_method_signature": "ReportsService.transactions(long yearMonth)", "testcase": false, "constructor": false}, {"identifier": "monthName", "parameters": "(final Long yearMonth)", "modifiers": "private", "return": "String", "signature": "String monthName(final Long yearMonth)", "full_signature": "private String monthName(final Long yearMonth)", "class_method_signature": "ReportsService.monthName(final Long yearMonth)", "testcase": false, "constructor": false}, {"identifier": "yearMonth", "parameters": "(Date date)", "modifiers": "private", "return": "Long", "signature": "Long yearMonth(Date date)", "full_signature": "private Long yearMonth(Date date)", "class_method_signature": "ReportsService.yearMonth(Date date)", "testcase": false, "constructor": false}, {"identifier": "yearMonthFormat", "parameters": "()", "modifiers": "private", "return": "DateFormat", "signature": "DateFormat yearMonthFormat()", "full_signature": "private DateFormat yearMonthFormat()", "class_method_signature": "ReportsService.yearMonthFormat()", "testcase": false, "constructor": false}, {"identifier": "readableYearMonthFormat", "parameters": "()", "modifiers": "private", "return": "DateFormat", "signature": "DateFormat readableYearMonthFormat()", "full_signature": "private DateFormat readableYearMonthFormat()", "class_method_signature": "ReportsService.readableYearMonthFormat()", "testcase": false, "constructor": false}], "file": "services/src/main/java/com/greensopinion/finance/services/reports/ReportsService.java"}, "focal_method": {"identifier": "incomeVersusExpenses", "parameters": "()", "modifiers": "public", "return": "IncomeVersusExpensesReport", "body": "public IncomeVersusExpensesReport incomeVersusExpenses() {\n\t\tIncomeVersusExpensesReport report = new IncomeVersusExpensesReport();\n\n\t\tTransactions transactions = transactionsService.retrieve();\n\n\t\tListMultimap<Long, Transaction> transactionsByMonth = ArrayListMultimap.create();\n\t\tfor (Transaction transaction : transactions.getTransactions()) {\n\t\t\tLong yearMonth = yearMonth(transaction.getDate());\n\t\t\ttransactionsByMonth.put(yearMonth, transaction);\n\t\t}\n\t\tList<Long> sortedMonths = new ArrayList<>(transactionsByMonth.keySet());\n\t\tCollections.sort(sortedMonths);\n\t\tfor (final Long yearMonth : sortedMonths) {\n\t\t\tString name = monthName(yearMonth);\n\t\t\treport.addMonth(new Month(yearMonth, name, transactionsByMonth.get(yearMonth)));\n\t\t}\n\t\treturn report;\n\t}", "signature": "IncomeVersusExpensesReport incomeVersusExpenses()", "full_signature": "public IncomeVersusExpensesReport incomeVersusExpenses()", "class_method_signature": "ReportsService.incomeVersusExpenses()", "testcase": false, "constructor": false, "invocations": ["retrieve", "create", "getTransactions", "yearMonth", "getDate", "put", "keySet", "sort", "monthName", "addMonth", "get"]}, "repository": {"repo_id": 54854741, "url": "https://github.com/greensopinion/greenbeans", "language": "Java", "is_fork": false, "fork_count": 13, "stargazer_count": 30, "size": 1684, "license": "licensed"}}