{"test_class": {"identifier": "CashFlowValidatorTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private CashFlowValidator cashFlowValidator;", "modifier": "private", "type": "CashFlowValidator", "declarator": "cashFlowValidator", "var_name": "cashFlowValidator"}, {"original_string": "@Mock\n    private ValidationContext validationContext;", "modifier": "@Mock\n    private", "type": "ValidationContext", "declarator": "validationContext", "var_name": "validationContext"}, {"original_string": "@Mock\n    private MessageContext messageContext;", "modifier": "@Mock\n    private", "type": "MessageContext", "declarator": "messageContext", "var_name": "messageContext"}], "file": "cashflow/src/test/java/org/mifos/platform/cashflow/ui/model/CashFlowValidatorTest.java"}, "test_case": {"identifier": "cumulativeCashFlowShouldBeGreaterThanZero", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void cumulativeCashFlowShouldBeGreaterThanZero() {\n        when(validationContext.getMessageContext()).thenReturn(messageContext);\n        when(messageContext.hasErrorMessages()).thenReturn(false);\n        DateTime may = new DateTime(2001, 5, 12, 0, 0, 0, 0);\n        DateTime june = new DateTime(2001, 6, 12, 0, 0, 0, 0);\n        DateTime july = new DateTime(2001, 7, 12, 0, 0, 0, 0);\n        MonthlyCashFlowDetail cashFlowDetail1 = new MonthlyCashFlowDetail(may, new BigDecimal(12), new BigDecimal(13), \"notes\");\n        MonthlyCashFlowDetail cashFlowDetail2 = new MonthlyCashFlowDetail(june, new BigDecimal(120), new BigDecimal(12), \"notes\");\n        MonthlyCashFlowDetail cashFlowDetail3 = new MonthlyCashFlowDetail(july, new BigDecimal(1), new BigDecimal(108), \"notes\");\n        CashFlowDetail cashFlowDetail = new CashFlowDetail(asList(cashFlowDetail1, cashFlowDetail2, cashFlowDetail3));\n        CashFlowForm cashFlowForm = new CashFlowForm(cashFlowDetail, false, new BigDecimal(1000), 10d);\n        assertEquals(new BigDecimal(\"-1\"), cashFlowForm.getMonthlyCashFlows().get(0).getCumulativeCashFlow());\n        assertEquals(new BigDecimal(\"107\"), cashFlowForm.getMonthlyCashFlows().get(1).getCumulativeCashFlow());\n        assertEquals(new BigDecimal(\"0\"), cashFlowForm.getMonthlyCashFlows().get(2).getCumulativeCashFlow());\n        cashFlowValidator.validateCaptureCashFlow(cashFlowForm, validationContext);\n        verify(messageContext, times(2)).hasErrorMessages();\n        verify(validationContext).getMessageContext();\n        verify(messageContext, times(2)).addMessage(argThat(new MessageMatcher(CashFlowConstants.CUMULATIVE_CASH_FLOW_FOR_MONTH_SHOULD_BE_GREATER_THAN_ZERO)));\n    }", "signature": "void cumulativeCashFlowShouldBeGreaterThanZero()", "full_signature": "@Test public void cumulativeCashFlowShouldBeGreaterThanZero()", "class_method_signature": "CashFlowValidatorTest.cumulativeCashFlowShouldBeGreaterThanZero()", "testcase": true, "constructor": false, "invocations": ["thenReturn", "when", "getMessageContext", "thenReturn", "when", "hasErrorMessages", "asList", "assertEquals", "getCumulativeCashFlow", "get", "getMonthlyCashFlows", "assertEquals", "getCumulativeCashFlow", "get", "getMonthlyCashFlows", "assertEquals", "getCumulativeCashFlow", "get", "getMonthlyCashFlows", "validateCaptureCashFlow", "hasErrorMessages", "verify", "times", "getMessageContext", "verify", "addMessage", "verify", "times", "argThat"]}, "focal_class": {"identifier": "CashFlowValidator", "superclass": "", "interfaces": "", "fields": [], "methods": [{"identifier": "validateCaptureCashFlow", "parameters": "(CashFlowForm cashFlow, ValidationContext context)", "modifiers": "public", "return": "void", "signature": "void validateCaptureCashFlow(CashFlowForm cashFlow, ValidationContext context)", "full_signature": "public void validateCaptureCashFlow(CashFlowForm cashFlow, ValidationContext context)", "class_method_signature": "CashFlowValidator.validateCaptureCashFlow(CashFlowForm cashFlow, ValidationContext context)", "testcase": false, "constructor": false}, {"identifier": "validateCumulativeCashFlow", "parameters": "(CashFlowForm cashFlow, MessageContext messageContext)", "modifiers": "private", "return": "void", "signature": "void validateCumulativeCashFlow(CashFlowForm cashFlow, MessageContext messageContext)", "full_signature": "private void validateCumulativeCashFlow(CashFlowForm cashFlow, MessageContext messageContext)", "class_method_signature": "CashFlowValidator.validateCumulativeCashFlow(CashFlowForm cashFlow, MessageContext messageContext)", "testcase": false, "constructor": false}, {"identifier": "validateCumulativeCashFlow", "parameters": "(MessageContext messageContext, MonthlyCashFlowForm monthlyCashFlowForm)", "modifiers": "private", "return": "void", "signature": "void validateCumulativeCashFlow(MessageContext messageContext, MonthlyCashFlowForm monthlyCashFlowForm)", "full_signature": "private void validateCumulativeCashFlow(MessageContext messageContext, MonthlyCashFlowForm monthlyCashFlowForm)", "class_method_signature": "CashFlowValidator.validateCumulativeCashFlow(MessageContext messageContext, MonthlyCashFlowForm monthlyCashFlowForm)", "testcase": false, "constructor": false}, {"identifier": "setTotalsOnCashFlowForm", "parameters": "(CashFlowForm cashFlowForm, MessageContext messageContext)", "modifiers": "private", "return": "void", "signature": "void setTotalsOnCashFlowForm(CashFlowForm cashFlowForm, MessageContext messageContext)", "full_signature": "private void setTotalsOnCashFlowForm(CashFlowForm cashFlowForm, MessageContext messageContext)", "class_method_signature": "CashFlowValidator.setTotalsOnCashFlowForm(CashFlowForm cashFlowForm, MessageContext messageContext)", "testcase": false, "constructor": false}, {"identifier": "validateTotalCapitalAndLiability", "parameters": "(CashFlowForm cashFlow, MessageContext messageContext)", "modifiers": "private", "return": "void", "signature": "void validateTotalCapitalAndLiability(CashFlowForm cashFlow, MessageContext messageContext)", "full_signature": "private void validateTotalCapitalAndLiability(CashFlowForm cashFlow, MessageContext messageContext)", "class_method_signature": "CashFlowValidator.validateTotalCapitalAndLiability(CashFlowForm cashFlow, MessageContext messageContext)", "testcase": false, "constructor": false}, {"identifier": "validateIndebtednessRatio", "parameters": "(CashFlowForm cashFlowForm, MessageContext messageContext)", "modifiers": "private", "return": "void", "signature": "void validateIndebtednessRatio(CashFlowForm cashFlowForm, MessageContext messageContext)", "full_signature": "private void validateIndebtednessRatio(CashFlowForm cashFlowForm, MessageContext messageContext)", "class_method_signature": "CashFlowValidator.validateIndebtednessRatio(CashFlowForm cashFlowForm, MessageContext messageContext)", "testcase": false, "constructor": false}, {"identifier": "validateTotalCapital", "parameters": "(MessageContext messageContext, BigDecimal totalCapital)", "modifiers": "private", "return": "void", "signature": "void validateTotalCapital(MessageContext messageContext, BigDecimal totalCapital)", "full_signature": "private void validateTotalCapital(MessageContext messageContext, BigDecimal totalCapital)", "class_method_signature": "CashFlowValidator.validateTotalCapital(MessageContext messageContext, BigDecimal totalCapital)", "testcase": false, "constructor": false}, {"identifier": "validateTotalLiability", "parameters": "(MessageContext messageContext, BigDecimal totalLiability)", "modifiers": "private", "return": "void", "signature": "void validateTotalLiability(MessageContext messageContext, BigDecimal totalLiability)", "full_signature": "private void validateTotalLiability(MessageContext messageContext, BigDecimal totalLiability)", "class_method_signature": "CashFlowValidator.validateTotalLiability(MessageContext messageContext, BigDecimal totalLiability)", "testcase": false, "constructor": false}, {"identifier": "validateExpense", "parameters": "(MessageContext messageContext, MonthlyCashFlowForm monthlyCashFlowForm)", "modifiers": "private", "return": "void", "signature": "void validateExpense(MessageContext messageContext, MonthlyCashFlowForm monthlyCashFlowForm)", "full_signature": "private void validateExpense(MessageContext messageContext, MonthlyCashFlowForm monthlyCashFlowForm)", "class_method_signature": "CashFlowValidator.validateExpense(MessageContext messageContext, MonthlyCashFlowForm monthlyCashFlowForm)", "testcase": false, "constructor": false}, {"identifier": "validateRevenue", "parameters": "(MessageContext messageContext, MonthlyCashFlowForm monthlyCashFlowForm)", "modifiers": "private", "return": "void", "signature": "void validateRevenue(MessageContext messageContext, MonthlyCashFlowForm monthlyCashFlowForm)", "full_signature": "private void validateRevenue(MessageContext messageContext, MonthlyCashFlowForm monthlyCashFlowForm)", "class_method_signature": "CashFlowValidator.validateRevenue(MessageContext messageContext, MonthlyCashFlowForm monthlyCashFlowForm)", "testcase": false, "constructor": false}, {"identifier": "validateNotes", "parameters": "(MessageContext messageContext, MonthlyCashFlowForm monthlyCashFlowForm)", "modifiers": "private", "return": "void", "signature": "void validateNotes(MessageContext messageContext, MonthlyCashFlowForm monthlyCashFlowForm)", "full_signature": "private void validateNotes(MessageContext messageContext, MonthlyCashFlowForm monthlyCashFlowForm)", "class_method_signature": "CashFlowValidator.validateNotes(MessageContext messageContext, MonthlyCashFlowForm monthlyCashFlowForm)", "testcase": false, "constructor": false}, {"identifier": "isNull", "parameters": "(BigDecimal value)", "modifiers": "private", "return": "boolean", "signature": "boolean isNull(BigDecimal value)", "full_signature": "private boolean isNull(BigDecimal value)", "class_method_signature": "CashFlowValidator.isNull(BigDecimal value)", "testcase": false, "constructor": false}, {"identifier": "constructErrorMessage", "parameters": "(String code, String message, MessageContext context, Object... args)", "modifiers": "", "return": "void", "signature": "void constructErrorMessage(String code, String message, MessageContext context, Object... args)", "full_signature": " void constructErrorMessage(String code, String message, MessageContext context, Object... args)", "class_method_signature": "CashFlowValidator.constructErrorMessage(String code, String message, MessageContext context, Object... args)", "testcase": false, "constructor": false}], "file": "cashflow/src/main/java/org/mifos/platform/cashflow/ui/model/CashFlowValidator.java"}, "focal_method": {"identifier": "validateCaptureCashFlow", "parameters": "(CashFlowForm cashFlow, ValidationContext context)", "modifiers": "public", "return": "void", "body": "public void validateCaptureCashFlow(CashFlowForm cashFlow, ValidationContext context) {\n        MessageContext messageContext = context.getMessageContext();\n        for (MonthlyCashFlowForm monthlyCashFlowForm : cashFlow.getMonthlyCashFlows()) {\n            validateExpense(messageContext, monthlyCashFlowForm);\n            validateRevenue(messageContext, monthlyCashFlowForm);\n            validateNotes(messageContext, monthlyCashFlowForm);\n        }\n        validateCumulativeCashFlow(cashFlow, messageContext);\n        validateTotalCapitalAndLiability(cashFlow, messageContext);\n        validateIndebtednessRatio(cashFlow, messageContext);\n        setTotalsOnCashFlowForm(cashFlow, messageContext);\n    }", "signature": "void validateCaptureCashFlow(CashFlowForm cashFlow, ValidationContext context)", "full_signature": "public void validateCaptureCashFlow(CashFlowForm cashFlow, ValidationContext context)", "class_method_signature": "CashFlowValidator.validateCaptureCashFlow(CashFlowForm cashFlow, ValidationContext context)", "testcase": false, "constructor": false, "invocations": ["getMessageContext", "getMonthlyCashFlows", "validateExpense", "validateRevenue", "validateNotes", "validateCumulativeCashFlow", "validateTotalCapitalAndLiability", "validateIndebtednessRatio", "setTotalsOnCashFlowForm"]}, "repository": {"repo_id": 1348716, "url": "https://github.com/mifos/head", "language": "Java", "is_fork": false, "fork_count": 91, "stargazer_count": 55, "size": 532732, "license": "licensed"}}