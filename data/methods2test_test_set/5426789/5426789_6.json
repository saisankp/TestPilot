{"test_class": {"identifier": "CrescentSearchRequestWrapperTest", "superclass": "extends CrescentTestCaseUtil", "interfaces": "", "fields": [{"original_string": "private static SearchRequest searchRequest;", "modifier": "private static", "type": "SearchRequest", "declarator": "searchRequest", "var_name": "searchRequest"}], "file": "crescent_core_web/src/test/java/com/tistory/devyongsik/crescent/query/CrescentSearchRequestWrapperTest.java"}, "test_case": {"identifier": "getQuery", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n\tpublic void getQuery() throws CrescentInvalidRequestException {\n\t\tSearchRequest searchRequest = new SearchRequest();\n\t\tsearchRequest.setCollectionName(\"sample\");\n\t\tsearchRequest.setCustomQuery(\"title:\\\"\ud30c\uc774\uc36c \ud504\ub85c\uadf8\ub798\ubc0d \uacf5\ubd80\\\" +dscr:\\\"\uc790\ubc14 \ubcd1\ub82c \ud504\ub85c\uadf8\ub798\ubc0d\\\"\");\n\t\t\n\t\tCrescentSearchRequestWrapper csrw \n\t\t\t= new CrescentSearchRequestWrapper(searchRequest);\n\t\t\n\t\tQuery query = csrw.getQuery();\n\t\t\n\t\tSystem.out.println(query);\n\t\t\n\t\tAssert.assertEquals(\"title:\ud30c\uc774\uc36c^2.0 title:\ud30c\uc774^2.0 title:\ud504\ub85c\uadf8\ub798\ubc0d^2.0 title:\uacf5\ubd80^2.0 +dscr:\uc790\ubc14 +dscr:\ubcd1\ub82c +dscr:\ud504\ub85c\uadf8\ub798\ubc0d\", query.toString());\n\t}", "signature": "void getQuery()", "full_signature": "@Test public void getQuery()", "class_method_signature": "CrescentSearchRequestWrapperTest.getQuery()", "testcase": true, "constructor": false, "invocations": ["setCollectionName", "setCustomQuery", "getQuery", "println", "assertEquals", ""]}, "focal_class": {"identifier": "CrescentSearchRequestWrapper", "superclass": "", "interfaces": "", "fields": [{"original_string": "private Logger logger = LoggerFactory.getLogger(CrescentSearchRequestWrapper.class);", "modifier": "private", "type": "Logger", "declarator": "logger = LoggerFactory.getLogger(CrescentSearchRequestWrapper.class)", "var_name": "logger"}, {"original_string": "private SearchRequest searchRequest = null;", "modifier": "private", "type": "SearchRequest", "declarator": "searchRequest = null", "var_name": "searchRequest"}, {"original_string": "private final int DEFAULT_HITS_FOR_PAGE = 20;", "modifier": "private final", "type": "int", "declarator": "DEFAULT_HITS_FOR_PAGE = 20", "var_name": "DEFAULT_HITS_FOR_PAGE"}, {"original_string": "private final int DEFAULT_PAGE_NUM = 1;", "modifier": "private final", "type": "int", "declarator": "DEFAULT_PAGE_NUM = 1", "var_name": "DEFAULT_PAGE_NUM"}, {"original_string": "private final int DEFAULT_HITS_PAGE = 5;", "modifier": "private final", "type": "int", "declarator": "DEFAULT_HITS_PAGE = 5", "var_name": "DEFAULT_HITS_PAGE"}, {"original_string": "private List<CrescentCollectionField> searchFields = new ArrayList<CrescentCollectionField>();", "modifier": "private", "type": "List<CrescentCollectionField>", "declarator": "searchFields = new ArrayList<CrescentCollectionField>()", "var_name": "searchFields"}, {"original_string": "private List<CrescentCollectionField> indexedFields = new ArrayList<CrescentCollectionField>();", "modifier": "private", "type": "List<CrescentCollectionField>", "declarator": "indexedFields = new ArrayList<CrescentCollectionField>()", "var_name": "indexedFields"}, {"original_string": "private CrescentCollection collection = null;", "modifier": "private", "type": "CrescentCollection", "declarator": "collection = null", "var_name": "collection"}, {"original_string": "private Map<String, CrescentCollectionField> collectionFieldsMap = null;", "modifier": "private", "type": "Map<String, CrescentCollectionField>", "declarator": "collectionFieldsMap = null", "var_name": "collectionFieldsMap"}], "methods": [{"identifier": "CrescentSearchRequestWrapper", "parameters": "(SearchRequest searchRequest)", "modifiers": "public", "return": "", "signature": " CrescentSearchRequestWrapper(SearchRequest searchRequest)", "full_signature": "public  CrescentSearchRequestWrapper(SearchRequest searchRequest)", "class_method_signature": "CrescentSearchRequestWrapper.CrescentSearchRequestWrapper(SearchRequest searchRequest)", "testcase": false, "constructor": true}, {"identifier": "getKeyword", "parameters": "()", "modifiers": "public", "return": "String", "signature": "String getKeyword()", "full_signature": "public String getKeyword()", "class_method_signature": "CrescentSearchRequestWrapper.getKeyword()", "testcase": false, "constructor": false}, {"identifier": "getCollectionName", "parameters": "()", "modifiers": "public", "return": "String", "signature": "String getCollectionName()", "full_signature": "public String getCollectionName()", "class_method_signature": "CrescentSearchRequestWrapper.getCollectionName()", "testcase": false, "constructor": false}, {"identifier": "getDefaultHitsPage", "parameters": "()", "modifiers": "public", "return": "int", "signature": "int getDefaultHitsPage()", "full_signature": "public int getDefaultHitsPage()", "class_method_signature": "CrescentSearchRequestWrapper.getDefaultHitsPage()", "testcase": false, "constructor": false}, {"identifier": "getPageNum", "parameters": "()", "modifiers": "public", "return": "int", "signature": "int getPageNum()", "full_signature": "public int getPageNum()", "class_method_signature": "CrescentSearchRequestWrapper.getPageNum()", "testcase": false, "constructor": false}, {"identifier": "getStartOffSet", "parameters": "()", "modifiers": "public", "return": "int", "signature": "int getStartOffSet()", "full_signature": "public int getStartOffSet()", "class_method_signature": "CrescentSearchRequestWrapper.getStartOffSet()", "testcase": false, "constructor": false}, {"identifier": "getHitsForPage", "parameters": "()", "modifiers": "public", "return": "int", "signature": "int getHitsForPage()", "full_signature": "public int getHitsForPage()", "class_method_signature": "CrescentSearchRequestWrapper.getHitsForPage()", "testcase": false, "constructor": false}, {"identifier": "getSort", "parameters": "()", "modifiers": "public", "return": "Sort", "signature": "Sort getSort()", "full_signature": "public Sort getSort()", "class_method_signature": "CrescentSearchRequestWrapper.getSort()", "testcase": false, "constructor": false}, {"identifier": "getQuery", "parameters": "()", "modifiers": "public", "return": "Query", "signature": "Query getQuery()", "full_signature": "public Query getQuery()", "class_method_signature": "CrescentSearchRequestWrapper.getQuery()", "testcase": false, "constructor": false}, {"identifier": "getFilter", "parameters": "()", "modifiers": "public", "return": "Filter", "signature": "Filter getFilter()", "full_signature": "public Filter getFilter()", "class_method_signature": "CrescentSearchRequestWrapper.getFilter()", "testcase": false, "constructor": false}, {"identifier": "getTargetSearchFields", "parameters": "()", "modifiers": "public", "return": "List<CrescentCollectionField>", "signature": "List<CrescentCollectionField> getTargetSearchFields()", "full_signature": "public List<CrescentCollectionField> getTargetSearchFields()", "class_method_signature": "CrescentSearchRequestWrapper.getTargetSearchFields()", "testcase": false, "constructor": false}, {"identifier": "getIndexedFields", "parameters": "()", "modifiers": "public", "return": "List<CrescentCollectionField>", "signature": "List<CrescentCollectionField> getIndexedFields()", "full_signature": "public List<CrescentCollectionField> getIndexedFields()", "class_method_signature": "CrescentSearchRequestWrapper.getIndexedFields()", "testcase": false, "constructor": false}, {"identifier": "getUserIp", "parameters": "()", "modifiers": "public", "return": "String", "signature": "String getUserIp()", "full_signature": "public String getUserIp()", "class_method_signature": "CrescentSearchRequestWrapper.getUserIp()", "testcase": false, "constructor": false}, {"identifier": "getUserId", "parameters": "()", "modifiers": "public", "return": "String", "signature": "String getUserId()", "full_signature": "public String getUserId()", "class_method_signature": "CrescentSearchRequestWrapper.getUserId()", "testcase": false, "constructor": false}, {"identifier": "getPcId", "parameters": "()", "modifiers": "public", "return": "String", "signature": "String getPcId()", "full_signature": "public String getPcId()", "class_method_signature": "CrescentSearchRequestWrapper.getPcId()", "testcase": false, "constructor": false}], "file": "crescent_core_web/src/main/java/com/tistory/devyongsik/crescent/query/CrescentSearchRequestWrapper.java"}, "focal_method": {"identifier": "getQuery", "parameters": "()", "modifiers": "public", "return": "Query", "body": "public Query getQuery() throws CrescentInvalidRequestException {\n\t\t\n\t\tQuery resultQuery = null;\n\t\t\n\t\tString customQueryString = searchRequest.getCustomQuery();\n\t\tString regexQueryString = searchRequest.getRegexQuery();\n\t\t\n\t\tif((customQueryString != null && customQueryString.length() > 0) || (regexQueryString != null && regexQueryString.length() > 0)) {\n\t\t\tCustomQueryStringParser queryParser = new CustomQueryStringParser();\n\t\t\t\n\t\t\ttry {\n\t\t\t\t\n\t\t\t\tresultQuery = queryParser.getQuery(getIndexedFields(), customQueryString, collection.getSearchModeAnalyzer(), regexQueryString);\n\t\t\t\n\t\t\t} catch (Exception e) {\n\t\t\t\tlogger.error(\"Error In getQuery \", e);\n\t\t\t\tthrow new CrescentInvalidRequestException(e.getMessage());\n\t\t\t}\n\t\t\t\n\t\t} else {\n\t\t\t\n\t\t\tif (getKeyword() == null || getKeyword().length() == 0) {\n\t\t\t\tresultQuery = new MatchAllDocsQuery();\n\t\t\t\treturn resultQuery;\n\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tDefaultKeywordParser queryParser = new DefaultKeywordParser();\n\t\t\tresultQuery = queryParser.parse(getTargetSearchFields(), getKeyword(), collection.getSearchModeAnalyzer());\n\t\t\n\t\t}\n\t\t\n\t\treturn resultQuery;\n\t}", "signature": "Query getQuery()", "full_signature": "public Query getQuery()", "class_method_signature": "CrescentSearchRequestWrapper.getQuery()", "testcase": false, "constructor": false, "invocations": ["getCustomQuery", "getRegexQuery", "length", "length", "getQuery", "getIndexedFields", "getSearchModeAnalyzer", "error", "getMessage", "getKeyword", "length", "getKeyword", "parse", "getTargetSearchFields", "getKeyword", "getSearchModeAnalyzer"]}, "repository": {"repo_id": 5426789, "url": "https://github.com/need4spd/crescent", "language": "Java", "is_fork": false, "fork_count": 10, "stargazer_count": 15, "size": 50982, "license": "licensed"}}