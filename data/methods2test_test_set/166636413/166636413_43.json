{"test_class": {"identifier": "GoogleAccountsManagerTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final String EXPECTED_ACCOUNT = \"abcd@xyz.com\";", "modifier": "private static final", "type": "String", "declarator": "EXPECTED_ACCOUNT = \"abcd@xyz.com\"", "var_name": "EXPECTED_ACCOUNT"}, {"original_string": "@Mock\n    private GoogleAccountCredential mockedCredential;", "modifier": "@Mock\n    private", "type": "GoogleAccountCredential", "declarator": "mockedCredential", "var_name": "mockedCredential"}, {"original_string": "@Mock\n    private GeneralSharedPreferences mockPreferences;", "modifier": "@Mock\n    private", "type": "GeneralSharedPreferences", "declarator": "mockPreferences", "var_name": "mockPreferences"}, {"original_string": "@Mock\n    private Intent mockIntent;", "modifier": "@Mock\n    private", "type": "Intent", "declarator": "mockIntent", "var_name": "mockIntent"}, {"original_string": "@Mock\n    private ThemeUtils mockThemeUtils;", "modifier": "@Mock\n    private", "type": "ThemeUtils", "declarator": "mockThemeUtils", "var_name": "mockThemeUtils"}, {"original_string": "private String currentAccount;", "modifier": "private", "type": "String", "declarator": "currentAccount", "var_name": "currentAccount"}, {"original_string": "private String savedAccount;", "modifier": "private", "type": "String", "declarator": "savedAccount", "var_name": "savedAccount"}, {"original_string": "private GoogleAccountsManager googleAccountsManager;", "modifier": "private", "type": "GoogleAccountsManager", "declarator": "googleAccountsManager", "var_name": "googleAccountsManager"}], "file": "collect_app/src/test/java/org/odk/collect/android/utilities/gdrive/GoogleAccountsManagerTest.java"}, "test_case": {"identifier": "returnNullWhenAccountIsDeleted", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void returnNullWhenAccountIsDeleted() {\n        //asserting that account exists.\n        stubSavedAccount(EXPECTED_ACCOUNT);\n        assertEquals(EXPECTED_ACCOUNT, googleAccountsManager.getLastSelectedAccountIfValid());\n\n        //removing the account simulates the deletion of the account via Google account settings.\n        removeAccounts();\n\n        assertEquals(googleAccountsManager.getLastSelectedAccountIfValid(), \"\");\n        assertNull(savedAccount);\n    }", "signature": "void returnNullWhenAccountIsDeleted()", "full_signature": "@Test public void returnNullWhenAccountIsDeleted()", "class_method_signature": "GoogleAccountsManagerTest.returnNullWhenAccountIsDeleted()", "testcase": true, "constructor": false, "invocations": ["stubSavedAccount", "assertEquals", "getLastSelectedAccountIfValid", "removeAccounts", "assertEquals", "getLastSelectedAccountIfValid", "assertNull"]}, "focal_class": {"identifier": "GoogleAccountsManager", "superclass": "", "interfaces": "", "fields": [{"original_string": "@Nullable\n    private HttpTransport transport;", "modifier": "@Nullable\n    private", "type": "HttpTransport", "declarator": "transport", "var_name": "transport"}, {"original_string": "@Nullable\n    private JsonFactory jsonFactory;", "modifier": "@Nullable\n    private", "type": "JsonFactory", "declarator": "jsonFactory", "var_name": "jsonFactory"}, {"original_string": "private Intent intentChooseAccount;", "modifier": "private", "type": "Intent", "declarator": "intentChooseAccount", "var_name": "intentChooseAccount"}, {"original_string": "private Context context;", "modifier": "private", "type": "Context", "declarator": "context", "var_name": "context"}, {"original_string": "private DriveHelper driveHelper;", "modifier": "private", "type": "DriveHelper", "declarator": "driveHelper", "var_name": "driveHelper"}, {"original_string": "private SheetsHelper sheetsHelper;", "modifier": "private", "type": "SheetsHelper", "declarator": "sheetsHelper", "var_name": "sheetsHelper"}, {"original_string": "private GoogleAccountCredential credential;", "modifier": "private", "type": "GoogleAccountCredential", "declarator": "credential", "var_name": "credential"}, {"original_string": "private GeneralSharedPreferences preferences;", "modifier": "private", "type": "GeneralSharedPreferences", "declarator": "preferences", "var_name": "preferences"}, {"original_string": "private ThemeUtils themeUtils;", "modifier": "private", "type": "ThemeUtils", "declarator": "themeUtils", "var_name": "themeUtils"}], "methods": [{"identifier": "GoogleAccountsManager", "parameters": "(@NonNull Context context)", "modifiers": "@Inject public", "return": "", "signature": " GoogleAccountsManager(@NonNull Context context)", "full_signature": "@Inject public  GoogleAccountsManager(@NonNull Context context)", "class_method_signature": "GoogleAccountsManager.GoogleAccountsManager(@NonNull Context context)", "testcase": false, "constructor": true}, {"identifier": "GoogleAccountsManager", "parameters": "(@NonNull GoogleAccountCredential credential,\n                                 @NonNull GeneralSharedPreferences preferences,\n                                 @NonNull Intent intentChooseAccount,\n                                 @NonNull ThemeUtils themeUtils\n    )", "modifiers": "public", "return": "", "signature": " GoogleAccountsManager(@NonNull GoogleAccountCredential credential,\n                                 @NonNull GeneralSharedPreferences preferences,\n                                 @NonNull Intent intentChooseAccount,\n                                 @NonNull ThemeUtils themeUtils\n    )", "full_signature": "public  GoogleAccountsManager(@NonNull GoogleAccountCredential credential,\n                                 @NonNull GeneralSharedPreferences preferences,\n                                 @NonNull Intent intentChooseAccount,\n                                 @NonNull ThemeUtils themeUtils\n    )", "class_method_signature": "GoogleAccountsManager.GoogleAccountsManager(@NonNull GoogleAccountCredential credential,\n                                 @NonNull GeneralSharedPreferences preferences,\n                                 @NonNull Intent intentChooseAccount,\n                                 @NonNull ThemeUtils themeUtils\n    )", "testcase": false, "constructor": true}, {"identifier": "initCredential", "parameters": "(@NonNull Context context)", "modifiers": "private", "return": "void", "signature": "void initCredential(@NonNull Context context)", "full_signature": "private void initCredential(@NonNull Context context)", "class_method_signature": "GoogleAccountsManager.initCredential(@NonNull Context context)", "testcase": false, "constructor": false}, {"identifier": "showSettingsDialog", "parameters": "(Activity activity)", "modifiers": "public static", "return": "void", "signature": "void showSettingsDialog(Activity activity)", "full_signature": "public static void showSettingsDialog(Activity activity)", "class_method_signature": "GoogleAccountsManager.showSettingsDialog(Activity activity)", "testcase": false, "constructor": false}, {"identifier": "isAccountSelected", "parameters": "()", "modifiers": "public", "return": "boolean", "signature": "boolean isAccountSelected()", "full_signature": "public boolean isAccountSelected()", "class_method_signature": "GoogleAccountsManager.isAccountSelected()", "testcase": false, "constructor": false}, {"identifier": "getLastSelectedAccountIfValid", "parameters": "()", "modifiers": "@NonNull public", "return": "String", "signature": "String getLastSelectedAccountIfValid()", "full_signature": "@NonNull public String getLastSelectedAccountIfValid()", "class_method_signature": "GoogleAccountsManager.getLastSelectedAccountIfValid()", "testcase": false, "constructor": false}, {"identifier": "selectAccount", "parameters": "(String accountName)", "modifiers": "public", "return": "void", "signature": "void selectAccount(String accountName)", "full_signature": "public void selectAccount(String accountName)", "class_method_signature": "GoogleAccountsManager.selectAccount(String accountName)", "testcase": false, "constructor": false}, {"identifier": "getAccountPickerCurrentAccount", "parameters": "()", "modifiers": "private", "return": "Account", "signature": "Account getAccountPickerCurrentAccount()", "full_signature": "private Account getAccountPickerCurrentAccount()", "class_method_signature": "GoogleAccountsManager.getAccountPickerCurrentAccount()", "testcase": false, "constructor": false}, {"identifier": "getDriveHelper", "parameters": "()", "modifiers": "public", "return": "DriveHelper", "signature": "DriveHelper getDriveHelper()", "full_signature": "public DriveHelper getDriveHelper()", "class_method_signature": "GoogleAccountsManager.getDriveHelper()", "testcase": false, "constructor": false}, {"identifier": "getSheetsHelper", "parameters": "()", "modifiers": "public", "return": "SheetsHelper", "signature": "SheetsHelper getSheetsHelper()", "full_signature": "public SheetsHelper getSheetsHelper()", "class_method_signature": "GoogleAccountsManager.getSheetsHelper()", "testcase": false, "constructor": false}, {"identifier": "getToken", "parameters": "()", "modifiers": "public", "return": "String", "signature": "String getToken()", "full_signature": "public String getToken()", "class_method_signature": "GoogleAccountsManager.getToken()", "testcase": false, "constructor": false}, {"identifier": "getAccountChooserIntent", "parameters": "()", "modifiers": "public", "return": "Intent", "signature": "Intent getAccountChooserIntent()", "full_signature": "public Intent getAccountChooserIntent()", "class_method_signature": "GoogleAccountsManager.getAccountChooserIntent()", "testcase": false, "constructor": false}], "file": "collect_app/src/main/java/org/odk/collect/android/utilities/gdrive/GoogleAccountsManager.java"}, "focal_method": {"identifier": "getLastSelectedAccountIfValid", "parameters": "()", "modifiers": "@NonNull public", "return": "String", "body": "@NonNull\n    public String getLastSelectedAccountIfValid() {\n        Account[] googleAccounts = credential.getAllAccounts();\n        String account = (String) preferences.get(GeneralKeys.KEY_SELECTED_GOOGLE_ACCOUNT);\n\n        if (googleAccounts != null && googleAccounts.length > 0) {\n            for (Account googleAccount : googleAccounts) {\n                if (googleAccount.name.equals(account)) {\n                    return account;\n                }\n            }\n\n            preferences.reset(GeneralKeys.KEY_SELECTED_GOOGLE_ACCOUNT);\n        }\n\n        return \"\";\n    }", "signature": "String getLastSelectedAccountIfValid()", "full_signature": "@NonNull public String getLastSelectedAccountIfValid()", "class_method_signature": "GoogleAccountsManager.getLastSelectedAccountIfValid()", "testcase": false, "constructor": false, "invocations": ["getAllAccounts", "get", "equals", "reset"]}, "repository": {"repo_id": 166636413, "url": "https://github.com/fieldsight/fieldsight-mobile", "language": "Java", "is_fork": false, "fork_count": 4, "stargazer_count": 14, "size": 41030, "license": "licensed"}}