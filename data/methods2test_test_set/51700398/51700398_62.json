{"test_class": {"identifier": "AdminServiceTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "@Autowired\n\tprivate PairService pairService;", "modifier": "@Autowired\n\tprivate", "type": "PairService", "declarator": "pairService", "var_name": "pairService"}, {"original_string": "@Autowired\n\tprivate RateService rateService;", "modifier": "@Autowired\n\tprivate", "type": "RateService", "declarator": "rateService", "var_name": "rateService"}, {"original_string": "@MockBean\n\tprivate LookupService lookupService;", "modifier": "@MockBean\n\tprivate", "type": "LookupService", "declarator": "lookupService", "var_name": "lookupService"}, {"original_string": "@MockBean\n\tprivate RateProviderService rateProviderService;", "modifier": "@MockBean\n\tprivate", "type": "RateProviderService", "declarator": "rateProviderService", "var_name": "rateProviderService"}, {"original_string": "@Autowired\n\tprivate AdminService adminService;", "modifier": "@Autowired\n\tprivate", "type": "AdminService", "declarator": "adminService", "var_name": "adminService"}, {"original_string": "@Autowired\n\tprivate HistoricalRateRepository hRateRepo;", "modifier": "@Autowired\n\tprivate", "type": "HistoricalRateRepository", "declarator": "hRateRepo", "var_name": "hRateRepo"}, {"original_string": "@Mock\n\tprivate HistoricalRateProvider hrp;", "modifier": "@Mock\n\tprivate", "type": "HistoricalRateProvider", "declarator": "hrp", "var_name": "hrp"}, {"original_string": "@Mock\n\tprivate LatestRateProvider lrp;", "modifier": "@Mock\n\tprivate", "type": "LatestRateProvider", "declarator": "lrp", "var_name": "lrp"}], "file": "trading-common/src/test/java/fr/ymanvieu/trading/common/admin/AdminServiceTest.java"}, "test_case": {"identifier": "testSearch", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n\tpublic void testSearch() throws Exception {\n\t\t// given\n\t\tString symbolOrNameToSearch = \"\";\n\t\tString symbol = \"UBI.PA\";\n\t\tString name = \"Ubi\";\n\t\tString provider = \"Provider\";\n\t\t\t\t\n\t\twhen(lookupService.search(provider)).thenReturn(asList(new LookupInfo(symbol, name, \"Paris\", \"Titres\", provider)));\n\t\twhen(lookupService.getDetails(symbol, provider)).thenReturn(new LookupDetails(symbol, name, \"UBI\", \"EUR\", \"EPA\", provider));\n\n\t\t// when\n\t\tadminService.search(symbolOrNameToSearch);\n\t}", "signature": "void testSearch()", "full_signature": "@Test public void testSearch()", "class_method_signature": "AdminServiceTest.testSearch()", "testcase": true, "constructor": false, "invocations": ["thenReturn", "when", "search", "asList", "thenReturn", "when", "getDetails", "search"]}, "focal_class": {"identifier": "AdminService", "superclass": "", "interfaces": "", "fields": [{"original_string": "@Autowired\n\tprivate SymbolService symbolService;", "modifier": "@Autowired\n\tprivate", "type": "SymbolService", "declarator": "symbolService", "var_name": "symbolService"}, {"original_string": "@Autowired\n\tprivate PairService pairService;", "modifier": "@Autowired\n\tprivate", "type": "PairService", "declarator": "pairService", "var_name": "pairService"}, {"original_string": "@Autowired\n\tprivate RateService rateService;", "modifier": "@Autowired\n\tprivate", "type": "RateService", "declarator": "rateService", "var_name": "rateService"}, {"original_string": "@Autowired\n\tprivate RateProviderService rateProviderService;", "modifier": "@Autowired\n\tprivate", "type": "RateProviderService", "declarator": "rateProviderService", "var_name": "rateProviderService"}, {"original_string": "@Autowired\n\tprivate LookupService lookupService;", "modifier": "@Autowired\n\tprivate", "type": "LookupService", "declarator": "lookupService", "var_name": "lookupService"}], "methods": [{"identifier": "add", "parameters": "(String code, String provider)", "modifiers": "public", "return": "SymbolInfo", "signature": "SymbolInfo add(String code, String provider)", "full_signature": "public SymbolInfo add(String code, String provider)", "class_method_signature": "AdminService.add(String code, String provider)", "testcase": false, "constructor": false}, {"identifier": "delete", "parameters": "(String code, String provider)", "modifiers": "public", "return": "void", "signature": "void delete(String code, String provider)", "full_signature": "public void delete(String code, String provider)", "class_method_signature": "AdminService.delete(String code, String provider)", "testcase": false, "constructor": false}, {"identifier": "search", "parameters": "(String symbolOrName)", "modifiers": "public", "return": "SearchResult", "signature": "SearchResult search(String symbolOrName)", "full_signature": "public SearchResult search(String symbolOrName)", "class_method_signature": "AdminService.search(String symbolOrName)", "testcase": false, "constructor": false}, {"identifier": "removeDuplicates", "parameters": "(List<LookupInfo> availableSymbols, List<UpdatedPair> existingSymbols)", "modifiers": "private", "return": "void", "signature": "void removeDuplicates(List<LookupInfo> availableSymbols, List<UpdatedPair> existingSymbols)", "full_signature": "private void removeDuplicates(List<LookupInfo> availableSymbols, List<UpdatedPair> existingSymbols)", "class_method_signature": "AdminService.removeDuplicates(List<LookupInfo> availableSymbols, List<UpdatedPair> existingSymbols)", "testcase": false, "constructor": false}], "file": "trading-common/src/main/java/fr/ymanvieu/trading/common/admin/AdminService.java"}, "focal_method": {"identifier": "search", "parameters": "(String symbolOrName)", "modifiers": "public", "return": "SearchResult", "body": "public SearchResult search(String symbolOrName) throws IOException {\n\t\tfinal List<UpdatedPair> existingSymbols;\n\t\tfinal List<LookupInfo> availableSymbols;\n\n\t\tif (Strings.isNullOrEmpty(symbolOrName)) {\n\t\t\texistingSymbols = pairService.getAll();\n\t\t\tavailableSymbols = new ArrayList<>();\n\t\t} else {\n\t\t\texistingSymbols = pairService.getAllWithSymbolOrNameContaining(symbolOrName);\n\t\t\tavailableSymbols = lookupService.search(symbolOrName);\n\t\t\tremoveDuplicates(availableSymbols, existingSymbols);\n\t\t}\n\t\t\n\t\treturn new SearchResult(existingSymbols, availableSymbols);\n\t}", "signature": "SearchResult search(String symbolOrName)", "full_signature": "public SearchResult search(String symbolOrName)", "class_method_signature": "AdminService.search(String symbolOrName)", "testcase": false, "constructor": false, "invocations": ["isNullOrEmpty", "getAll", "getAllWithSymbolOrNameContaining", "search", "removeDuplicates"]}, "repository": {"repo_id": 51700398, "url": "https://github.com/ymanvieu/trading", "language": "Java", "is_fork": false, "fork_count": 0, "stargazer_count": 5, "size": 988, "license": "licensed"}}