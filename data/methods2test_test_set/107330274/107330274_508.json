{"test_class": {"identifier": "MachineSpringResourceTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final Machine MACHINE_1 = Machine.newBuilder().setId(\"machine1\").build();", "modifier": "private static final", "type": "Machine", "declarator": "MACHINE_1 = Machine.newBuilder().setId(\"machine1\").build()", "var_name": "MACHINE_1"}, {"original_string": "private static final Machine MACHINE_2 = Machine.newBuilder().setId(\"machine2\").build();", "modifier": "private static final", "type": "Machine", "declarator": "MACHINE_2 = Machine.newBuilder().setId(\"machine2\").build()", "var_name": "MACHINE_2"}, {"original_string": "@MockBean\n    protected ReactorMachineServiceStub serviceMock;", "modifier": "@MockBean\n    protected", "type": "ReactorMachineServiceStub", "declarator": "serviceMock", "var_name": "serviceMock"}, {"original_string": "@Autowired\n    private MockMvc mockMvc;", "modifier": "@Autowired\n    private", "type": "MockMvc", "declarator": "mockMvc", "var_name": "mockMvc"}], "file": "titus-server-runtime/src/test/java/com/netflix/titus/runtime/machine/MachineSpringResourceTest.java"}, "test_case": {"identifier": "tetGetMachines", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void tetGetMachines() throws Exception {\n        MachineQueryResult mockResponse = MachineQueryResult.newBuilder()\n                .setPagination(SpringMockMvcUtil.paginationOf(NEXT_PAGE_OF_1))\n                .addAllItems(asList(MACHINE_1, MACHINE_2))\n                .build();\n\n        QueryRequest stubRequest = QueryRequest.newBuilder()\n                .setPage(NEXT_PAGE_OF_1)\n                .build();\n        when(serviceMock.getMachines(stubRequest)).thenReturn(Mono.just(mockResponse));\n\n        MachineQueryResult entity = SpringMockMvcUtil.doPaginatedGet(mockMvc, \"/api/v4/machines\", MachineQueryResult.class, NEXT_PAGE_OF_1);\n        assertThat(entity).isEqualTo(mockResponse);\n    }", "signature": "void tetGetMachines()", "full_signature": "@Test public void tetGetMachines()", "class_method_signature": "MachineSpringResourceTest.tetGetMachines()", "testcase": true, "constructor": false, "invocations": ["build", "addAllItems", "setPagination", "newBuilder", "paginationOf", "asList", "build", "setPage", "newBuilder", "thenReturn", "when", "getMachines", "just", "doPaginatedGet", "isEqualTo", "assertThat"]}, "focal_class": {"identifier": "MachineSpringResource", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final Duration TIMEOUT = Duration.ofSeconds(10);", "modifier": "private static final", "type": "Duration", "declarator": "TIMEOUT = Duration.ofSeconds(10)", "var_name": "TIMEOUT"}, {"original_string": "private final ReactorMachineServiceStub machineServiceStub;", "modifier": "private final", "type": "ReactorMachineServiceStub", "declarator": "machineServiceStub", "var_name": "machineServiceStub"}], "methods": [{"identifier": "MachineSpringResource", "parameters": "(ReactorMachineServiceStub machineServiceStub)", "modifiers": "@Inject public", "return": "", "signature": " MachineSpringResource(ReactorMachineServiceStub machineServiceStub)", "full_signature": "@Inject public  MachineSpringResource(ReactorMachineServiceStub machineServiceStub)", "class_method_signature": "MachineSpringResource.MachineSpringResource(ReactorMachineServiceStub machineServiceStub)", "testcase": false, "constructor": true}, {"identifier": "getMachines", "parameters": "(@RequestParam MultiValueMap<String, String> queryParameters)", "modifiers": "@ApiOperation(\"Get all machines\") @GetMapping public", "return": "MachineQueryResult", "signature": "MachineQueryResult getMachines(@RequestParam MultiValueMap<String, String> queryParameters)", "full_signature": "@ApiOperation(\"Get all machines\") @GetMapping public MachineQueryResult getMachines(@RequestParam MultiValueMap<String, String> queryParameters)", "class_method_signature": "MachineSpringResource.getMachines(@RequestParam MultiValueMap<String, String> queryParameters)", "testcase": false, "constructor": false}, {"identifier": "getMachine", "parameters": "(@PathVariable(\"machineId\") String machineId)", "modifiers": "@GetMapping(path = \"/{machineId}\") @ApiOperation(\"Get single machine\") public", "return": "Machine", "signature": "Machine getMachine(@PathVariable(\"machineId\") String machineId)", "full_signature": "@GetMapping(path = \"/{machineId}\") @ApiOperation(\"Get single machine\") public Machine getMachine(@PathVariable(\"machineId\") String machineId)", "class_method_signature": "MachineSpringResource.getMachine(@PathVariable(\"machineId\") String machineId)", "testcase": false, "constructor": false}], "file": "titus-server-runtime/src/main/java/com/netflix/titus/runtime/machine/MachineSpringResource.java"}, "focal_method": {"identifier": "getMachines", "parameters": "(@RequestParam MultiValueMap<String, String> queryParameters)", "modifiers": "@ApiOperation(\"Get all machines\") @GetMapping public", "return": "MachineQueryResult", "body": "@ApiOperation(\"Get all machines\")\n    @GetMapping\n    public MachineQueryResult getMachines(@RequestParam MultiValueMap<String, String> queryParameters) {\n        QueryRequest.Builder queryBuilder = QueryRequest.newBuilder();\n        Page page = RestUtil.createPage(queryParameters);\n\n        queryBuilder.setPage(page);\n        queryBuilder.putAllFilteringCriteria(RestUtil.getFilteringCriteria(queryParameters));\n        queryBuilder.addAllFields(RestUtil.getFieldsParameter(queryParameters));\n\n        return machineServiceStub.getMachines(queryBuilder.build()).block(TIMEOUT);\n    }", "signature": "MachineQueryResult getMachines(@RequestParam MultiValueMap<String, String> queryParameters)", "full_signature": "@ApiOperation(\"Get all machines\") @GetMapping public MachineQueryResult getMachines(@RequestParam MultiValueMap<String, String> queryParameters)", "class_method_signature": "MachineSpringResource.getMachines(@RequestParam MultiValueMap<String, String> queryParameters)", "testcase": false, "constructor": false, "invocations": ["newBuilder", "createPage", "setPage", "putAllFilteringCriteria", "getFilteringCriteria", "addAllFields", "getFieldsParameter", "block", "getMachines", "build"]}, "repository": {"repo_id": 107330274, "url": "https://github.com/Netflix/titus-control-plane", "stars": 241, "created": "10/17/2017 10:20:55 PM +00:00", "updates": "2020-01-25T13:01:05+00:00", "fork": "False", "license": "licensed"}}