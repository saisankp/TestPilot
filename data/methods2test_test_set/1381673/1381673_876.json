{"test_class": {"identifier": "MaterializedLambdaConsequenceTest", "superclass": "", "interfaces": "", "fields": [], "file": "drools-model/drools-model-compiler/src/test/java/org/drools/modelcompiler/util/lambdareplace/MaterializedLambdaConsequenceTest.java"}, "test_case": {"identifier": "createConsequence", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void createConsequence() {\n        CreatedClass aClass = new MaterializedLambdaConsequence(\"org.drools.modelcompiler.util.lambdareplace\", \"rulename\", new ArrayList<>())\n                .create(\"(org.drools.modelcompiler.domain.Person p1, org.drools.modelcompiler.domain.Person p2) -> result.setValue( p1.getName() + \\\" is older than \\\" + p2.getName())\", new ArrayList<>(), new ArrayList<>());\n\n        //language=JAVA\n        String expectedResult = \"\" +\n                \"package org.drools.modelcompiler.util.lambdareplace.PF2;\\n\" +\n                \"import static rulename.*; \" +\n                \"import org.drools.modelcompiler.dsl.pattern.D; \" +\n                \"\\n\"+\n                \"@org.drools.compiler.kie.builder.MaterializedLambda() \" +\n                \"public enum LambdaConsequenceF23B77D6BCFA8D6EB3EC2C02BACF2BEA implements org.drools.model.functions.Block2<org.drools.modelcompiler.domain.Person, org.drools.modelcompiler.domain.Person>  {\\n\" +\n                \"INSTANCE;\\n\" +\n                \"public static final String EXPRESSION_HASH = \\\"8305FF24AC76CB49E7AAE2C10356A105\\\";\" +\n                \"        @Override()\\n\" +\n                \"        public void execute(org.drools.modelcompiler.domain.Person p1, org.drools.modelcompiler.domain.Person p2) throws java.lang.Exception {\\n\" +\n                \"            result.setValue(p1.getName() + \\\" is older than \\\" + p2.getName());\\n\" +\n                \"        }\\n\" +\n                \"    }\\n\";\n\n        assertThat(aClass.getCompilationUnitAsString(), equalToIgnoringWhiteSpace(expectedResult));\n\n    }", "signature": "void createConsequence()", "full_signature": "@Test public void createConsequence()", "class_method_signature": "MaterializedLambdaConsequenceTest.createConsequence()", "testcase": true, "constructor": false, "invocations": ["create", "assertThat", "getCompilationUnitAsString", "equalToIgnoringWhiteSpace"]}, "focal_class": {"identifier": "MaterializedLambdaConsequence", "superclass": "extends MaterializedLambda", "interfaces": "", "fields": [{"original_string": "private final static String CLASS_NAME_PREFIX = \"LambdaConsequence\";", "modifier": "private final static", "type": "String", "declarator": "CLASS_NAME_PREFIX = \"LambdaConsequence\"", "var_name": "CLASS_NAME_PREFIX"}, {"original_string": "private final List<BitMaskVariable> bitMaskVariables;", "modifier": "private final", "type": "List<BitMaskVariable>", "declarator": "bitMaskVariables", "var_name": "bitMaskVariables"}], "methods": [{"identifier": "MaterializedLambdaConsequence", "parameters": "(String packageName, String ruleClassName, List<BitMaskVariable> bitMaskVariables)", "modifiers": "", "return": "", "signature": " MaterializedLambdaConsequence(String packageName, String ruleClassName, List<BitMaskVariable> bitMaskVariables)", "full_signature": "  MaterializedLambdaConsequence(String packageName, String ruleClassName, List<BitMaskVariable> bitMaskVariables)", "class_method_signature": "MaterializedLambdaConsequence.MaterializedLambdaConsequence(String packageName, String ruleClassName, List<BitMaskVariable> bitMaskVariables)", "testcase": false, "constructor": true}, {"identifier": "createMethodDeclaration", "parameters": "(EnumDeclaration classDeclaration)", "modifiers": "@Override", "return": "void", "signature": "void createMethodDeclaration(EnumDeclaration classDeclaration)", "full_signature": "@Override void createMethodDeclaration(EnumDeclaration classDeclaration)", "class_method_signature": "MaterializedLambdaConsequence.createMethodDeclaration(EnumDeclaration classDeclaration)", "testcase": false, "constructor": false}, {"identifier": "getPrefix", "parameters": "()", "modifiers": "@Override", "return": "String", "signature": "String getPrefix()", "full_signature": "@Override String getPrefix()", "class_method_signature": "MaterializedLambdaConsequence.getPrefix()", "testcase": false, "constructor": false}, {"identifier": "create", "parameters": "(CompilationUnit compilationUnit)", "modifiers": "@Override protected", "return": "EnumDeclaration", "signature": "EnumDeclaration create(CompilationUnit compilationUnit)", "full_signature": "@Override protected EnumDeclaration create(CompilationUnit compilationUnit)", "class_method_signature": "MaterializedLambdaConsequence.create(CompilationUnit compilationUnit)", "testcase": false, "constructor": false}, {"identifier": "isDroolsParameter", "parameters": "(LambdaParameter p)", "modifiers": "private", "return": "boolean", "signature": "boolean isDroolsParameter(LambdaParameter p)", "full_signature": "private boolean isDroolsParameter(LambdaParameter p)", "class_method_signature": "MaterializedLambdaConsequence.isDroolsParameter(LambdaParameter p)", "testcase": false, "constructor": false}, {"identifier": "functionType", "parameters": "()", "modifiers": "@Override protected", "return": "ClassOrInterfaceType", "signature": "ClassOrInterfaceType functionType()", "full_signature": "@Override protected ClassOrInterfaceType functionType()", "class_method_signature": "MaterializedLambdaConsequence.functionType()", "testcase": false, "constructor": false}], "file": "drools-model/drools-model-compiler/src/main/java/org/drools/modelcompiler/util/lambdareplace/MaterializedLambdaConsequence.java"}, "focal_method": {"identifier": "create", "parameters": "(CompilationUnit compilationUnit)", "modifiers": "@Override protected", "return": "EnumDeclaration", "body": "@Override\n    protected EnumDeclaration create(CompilationUnit compilationUnit) {\n        EnumDeclaration lambdaClass = super.create(compilationUnit);\n\n        boolean hasDroolsParameter = lambdaParameters.stream().anyMatch(this::isDroolsParameter);\n        if (hasDroolsParameter) {\n            bitMaskVariables.forEach(vd -> vd.generateBitMaskField(lambdaClass));\n        }\n        return lambdaClass;\n    }", "signature": "EnumDeclaration create(CompilationUnit compilationUnit)", "full_signature": "@Override protected EnumDeclaration create(CompilationUnit compilationUnit)", "class_method_signature": "MaterializedLambdaConsequence.create(CompilationUnit compilationUnit)", "testcase": false, "constructor": false, "invocations": ["create", "anyMatch", "stream", "forEach", "generateBitMaskField"]}, "repository": {"repo_id": 1381673, "url": "https://github.com/kiegroup/drools", "stars": 2733, "created": "2/18/2011 8:37:05 AM +00:00", "updates": "2020-01-27T13:12:15+00:00", "fork": "False", "license": "licensed"}}