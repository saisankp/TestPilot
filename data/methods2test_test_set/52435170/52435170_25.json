{"test_class": {"identifier": "DeleteOperationTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final String COLLECTION_NAME_1 = \"some_collection_1\";", "modifier": "private static final", "type": "String", "declarator": "COLLECTION_NAME_1 = \"some_collection_1\"", "var_name": "COLLECTION_NAME_1"}, {"original_string": "private static final String COLLECTION_NAME_2 = \"some_collection_2\";", "modifier": "private static final", "type": "String", "declarator": "COLLECTION_NAME_2 = \"some_collection_2\"", "var_name": "COLLECTION_NAME_2"}, {"original_string": "private static final Document DOCUMENT_1 = new Document().append(\"a\", \"A\");", "modifier": "private static final", "type": "Document", "declarator": "DOCUMENT_1 = new Document().append(\"a\", \"A\")", "var_name": "DOCUMENT_1"}, {"original_string": "private static final Document DOCUMENT_2 = new Document().append(\"b\", \"B\");", "modifier": "private static final", "type": "Document", "declarator": "DOCUMENT_2 = new Document().append(\"b\", \"B\")", "var_name": "DOCUMENT_2"}, {"original_string": "@Mock\n    private MongoDatabase connection;", "modifier": "@Mock\n    private", "type": "MongoDatabase", "declarator": "connection", "var_name": "connection"}, {"original_string": "@Mock\n    private MongoCollection<Document> collection;", "modifier": "@Mock\n    private", "type": "MongoCollection<Document>", "declarator": "collection", "var_name": "collection"}, {"original_string": "private DeleteOperation operation = new DeleteOperation();", "modifier": "private", "type": "DeleteOperation", "declarator": "operation = new DeleteOperation()", "var_name": "operation"}], "file": "mongodb/src/test/java/eu/drus/jpa/unit/mongodb/operation/DeleteOperationTest.java"}, "test_case": {"identifier": "testOperationExecution", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testOperationExecution() {\n        // GIVEN\n        final List<Document> values1 = Arrays.asList(DOCUMENT_1);\n        final List<Document> values2 = Arrays.asList(DOCUMENT_2);\n        final Document data = new Document().append(COLLECTION_NAME_1, values1).append(COLLECTION_NAME_2, values2);\n\n        // WHEN\n        operation.execute(connection, data);\n\n        // THEN\n        final ArgumentCaptor<String> collectionNameCaptor = ArgumentCaptor.forClass(String.class);\n        verify(connection, times(2)).getCollection(collectionNameCaptor.capture());\n\n        final List<String> capturedCollectionNames = collectionNameCaptor.getAllValues();\n        assertThat(capturedCollectionNames.size(), equalTo(2));\n        assertThat(capturedCollectionNames, hasItems(COLLECTION_NAME_1, COLLECTION_NAME_2));\n\n        final ArgumentCaptor<Document> documentCaptor = ArgumentCaptor.forClass(Document.class);\n        verify(collection, times(2)).deleteOne(documentCaptor.capture());\n\n        final List<Document> capturedDocuments = documentCaptor.getAllValues();\n        assertThat(capturedDocuments.size(), equalTo(2));\n        assertThat(capturedDocuments, hasItems(DOCUMENT_1, DOCUMENT_2));\n    }", "signature": "void testOperationExecution()", "full_signature": "@Test public void testOperationExecution()", "class_method_signature": "DeleteOperationTest.testOperationExecution()", "testcase": true, "constructor": false, "invocations": ["asList", "asList", "append", "append", "execute", "forClass", "getCollection", "verify", "times", "capture", "getAllValues", "assertThat", "size", "equalTo", "assertThat", "hasItems", "forClass", "deleteOne", "verify", "times", "capture", "getAllValues", "assertThat", "size", "equalTo", "assertThat", "hasItems"]}, "focal_class": {"identifier": "DeleteOperation", "superclass": "", "interfaces": "implements MongoDbOperation", "fields": [], "methods": [{"identifier": "execute", "parameters": "(final MongoDatabase connection, final Document data)", "modifiers": "@Override public", "return": "void", "signature": "void execute(final MongoDatabase connection, final Document data)", "full_signature": "@Override public void execute(final MongoDatabase connection, final Document data)", "class_method_signature": "DeleteOperation.execute(final MongoDatabase connection, final Document data)", "testcase": false, "constructor": false}], "file": "mongodb/src/main/java/eu/drus/jpa/unit/mongodb/operation/DeleteOperation.java"}, "focal_method": {"identifier": "execute", "parameters": "(final MongoDatabase connection, final Document data)", "modifiers": "@Override public", "return": "void", "body": "@Override\n    public void execute(final MongoDatabase connection, final Document data) {\n        for (final String collectionName : data.keySet()) {\n            @SuppressWarnings(\"unchecked\")\n            final List<Document> entry = data.get(collectionName, List.class);\n\n            final MongoCollection<Document> collection = connection.getCollection(collectionName);\n            entry.forEach(collection::deleteOne);\n        }\n    }", "signature": "void execute(final MongoDatabase connection, final Document data)", "full_signature": "@Override public void execute(final MongoDatabase connection, final Document data)", "class_method_signature": "DeleteOperation.execute(final MongoDatabase connection, final Document data)", "testcase": false, "constructor": false, "invocations": ["keySet", "get", "getCollection", "forEach"]}, "repository": {"repo_id": 52435170, "url": "https://github.com/dadrus/jpa-unit", "language": "Java", "is_fork": false, "fork_count": 7, "stargazer_count": 24, "size": 1190, "license": "licensed"}}