{"test_class": {"identifier": "TraceTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private Trace utilUnderTest;", "modifier": "private", "type": "Trace", "declarator": "utilUnderTest", "var_name": "utilUnderTest"}, {"original_string": "private Tracer tracer = Mockito.mock(Tracer.class);", "modifier": "private", "type": "Tracer", "declarator": "tracer = Mockito.mock(Tracer.class)", "var_name": "tracer"}, {"original_string": "private Tracer noOpsTracer;", "modifier": "private", "type": "Tracer", "declarator": "noOpsTracer", "var_name": "noOpsTracer"}, {"original_string": "private UUID traceId;", "modifier": "private", "type": "UUID", "declarator": "traceId", "var_name": "traceId"}, {"original_string": "private UUID spanId;", "modifier": "private", "type": "UUID", "declarator": "spanId", "var_name": "spanId"}, {"original_string": "private UUID parentSpanId;", "modifier": "private", "type": "UUID", "declarator": "parentSpanId", "var_name": "parentSpanId"}, {"original_string": "private Dispatcher dispatcher;", "modifier": "private", "type": "Dispatcher", "declarator": "dispatcher", "var_name": "dispatcher"}, {"original_string": "private MetricsRegistry metrics;", "modifier": "private", "type": "MetricsRegistry", "declarator": "metrics", "var_name": "metrics"}, {"original_string": "private SpanContext testSpanContext;", "modifier": "private", "type": "SpanContext", "declarator": "testSpanContext", "var_name": "testSpanContext"}], "file": "modelservice/src/test/java/com/expedia/adaptivealerting/modelservice/tracing/TraceTest.java"}, "test_case": {"identifier": "testExtractSpanContext", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testExtractSpanContext() {\n        HttpHeaders testHttpHeaders = new HttpHeaders();\n        testHttpHeaders.add(\"test-header-key\", \"test-header-value\");\n        final HashMap<String, String> mapHeaders = new HashMap<>();\n        testHttpHeaders.forEach((key, value) -> {\n            mapHeaders.put(key, value.get(0));\n        });\n        when(tracer.extract(eq(Format.Builtin.HTTP_HEADERS), ArgumentMatchers.any(TextMapAdapter.class))).thenReturn(testSpanContext);\n        io.opentracing.SpanContext resultSpanContext = utilUnderTest.extractParentSpan(testHttpHeaders);\n        Assert.assertEquals(resultSpanContext.toTraceId(), traceId.toString());\n        Assert.assertEquals(resultSpanContext.toSpanId(), spanId.toString());\n    }", "signature": "void testExtractSpanContext()", "full_signature": "@Test public void testExtractSpanContext()", "class_method_signature": "TraceTest.testExtractSpanContext()", "testcase": true, "constructor": false, "invocations": ["add", "forEach", "put", "get", "thenReturn", "when", "extract", "eq", "any", "extractParentSpan", "assertEquals", "toTraceId", "toString", "assertEquals", "toSpanId", "toString"]}, "focal_class": {"identifier": "Trace", "superclass": "", "interfaces": "", "fields": [{"original_string": "private final Tracer modelServiceApiTracer;", "modifier": "private final", "type": "Tracer", "declarator": "modelServiceApiTracer", "var_name": "modelServiceApiTracer"}], "methods": [{"identifier": "Trace", "parameters": "(Tracer tracer)", "modifiers": "@Autowired public", "return": "", "signature": " Trace(Tracer tracer)", "full_signature": "@Autowired public  Trace(Tracer tracer)", "class_method_signature": "Trace.Trace(Tracer tracer)", "testcase": false, "constructor": true}, {"identifier": "startSpan", "parameters": "(String operationName, SpanContext spnContext)", "modifiers": "public", "return": "Span", "signature": "Span startSpan(String operationName, SpanContext spnContext)", "full_signature": "public Span startSpan(String operationName, SpanContext spnContext)", "class_method_signature": "Trace.startSpan(String operationName, SpanContext spnContext)", "testcase": false, "constructor": false}, {"identifier": "extractParentSpan", "parameters": "(HttpHeaders headers)", "modifiers": "public", "return": "SpanContext", "signature": "SpanContext extractParentSpan(HttpHeaders headers)", "full_signature": "public SpanContext extractParentSpan(HttpHeaders headers)", "class_method_signature": "Trace.extractParentSpan(HttpHeaders headers)", "testcase": false, "constructor": false}], "file": "modelservice/src/main/java/com/expedia/adaptivealerting/modelservice/tracing/Trace.java"}, "focal_method": {"identifier": "extractParentSpan", "parameters": "(HttpHeaders headers)", "modifiers": "public", "return": "SpanContext", "body": "public SpanContext extractParentSpan(HttpHeaders headers){\n        final HashMap<String, String> mapHeaders = new HashMap<>();\n        headers.forEach((key, value) -> {\n            mapHeaders.put(key, value.get(0));\n        });\n\n        try {\n            SpanContext parentSpan = modelServiceApiTracer.extract(Format.Builtin.HTTP_HEADERS, new TextMapAdapter(mapHeaders));\n            return parentSpan;\n        } catch (IllegalArgumentException e) {\n            log.error(\"Exception during extracting parentSpan\", e);\n        }\n        return null;\n\n    }", "signature": "SpanContext extractParentSpan(HttpHeaders headers)", "full_signature": "public SpanContext extractParentSpan(HttpHeaders headers)", "class_method_signature": "Trace.extractParentSpan(HttpHeaders headers)", "testcase": false, "constructor": false, "invocations": ["forEach", "put", "get", "extract", "error"]}, "repository": {"repo_id": 129125498, "url": "https://github.com/ExpediaDotCom/adaptive-alerting", "stars": 104, "created": "4/11/2018 4:51:18 PM +00:00", "updates": "2020-01-24T16:20:26+00:00", "fork": "False", "license": "licensed"}}