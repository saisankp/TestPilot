{"test_class": {"identifier": "QueueingStrategyFactoryTest", "superclass": "", "interfaces": "", "fields": [], "file": "gateleen-hook/src/test/java/org/swisspush/gateleen/hook/queueingstrategy/QueueingStrategyFactoryTest.java"}, "test_case": {"identifier": "testDiscardPayloadQueueingStrategy", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testDiscardPayloadQueueingStrategy(){\n        // valid DiscardPayloadQueueingStrategy config\n        assertThat(QueueingStrategyFactory.buildQueueStrategy(buildHookConfig(new JsonObject().put(\"type\", \"discardPayload\"))),\n                instanceOf(DiscardPayloadQueueingStrategy.class));\n        assertThat(QueueingStrategyFactory.buildQueueStrategy(buildHookConfig(new JsonObject().put(\"type\", \"discardpayload\"))),\n                instanceOf(DiscardPayloadQueueingStrategy.class));\n        assertThat(QueueingStrategyFactory.buildQueueStrategy(buildHookConfig(new JsonObject().put(\"type\", \"DISCARDPAYLOAD\"))),\n                instanceOf(DiscardPayloadQueueingStrategy.class));\n\n        // invalid DiscardPayloadQueueingStrategy config\n        assertThat(QueueingStrategyFactory.buildQueueStrategy(buildHookConfig(new JsonObject().put(\"typeXX\", \"discardPayload\"))),\n                instanceOf(DefaultQueueingStrategy.class));\n    }", "signature": "void testDiscardPayloadQueueingStrategy()", "full_signature": "@Test public void testDiscardPayloadQueueingStrategy()", "class_method_signature": "QueueingStrategyFactoryTest.testDiscardPayloadQueueingStrategy()", "testcase": true, "constructor": false, "invocations": ["assertThat", "buildQueueStrategy", "buildHookConfig", "put", "instanceOf", "assertThat", "buildQueueStrategy", "buildHookConfig", "put", "instanceOf", "assertThat", "buildQueueStrategy", "buildHookConfig", "put", "instanceOf", "assertThat", "buildQueueStrategy", "buildHookConfig", "put", "instanceOf"]}, "focal_class": {"identifier": "QueueingStrategyFactory", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final String QUEUEING_STRATEGY_PROPERTY = \"queueingStrategy\";", "modifier": "private static final", "type": "String", "declarator": "QUEUEING_STRATEGY_PROPERTY = \"queueingStrategy\"", "var_name": "QUEUEING_STRATEGY_PROPERTY"}, {"original_string": "private static final String INTERVAL_PROPERTY = \"intervalMs\";", "modifier": "private static final", "type": "String", "declarator": "INTERVAL_PROPERTY = \"intervalMs\"", "var_name": "INTERVAL_PROPERTY"}, {"original_string": "private static Logger LOG = LoggerFactory.getLogger(QueueingStrategyFactory.class);", "modifier": "private static", "type": "Logger", "declarator": "LOG = LoggerFactory.getLogger(QueueingStrategyFactory.class)", "var_name": "LOG"}], "methods": [{"identifier": "QueueingStrategyFactory", "parameters": "()", "modifiers": "private", "return": "", "signature": " QueueingStrategyFactory()", "full_signature": "private  QueueingStrategyFactory()", "class_method_signature": "QueueingStrategyFactory.QueueingStrategyFactory()", "testcase": false, "constructor": true}, {"identifier": "buildQueueStrategy", "parameters": "(JsonObject hookConfiguration)", "modifiers": "public static", "return": "QueueingStrategy", "signature": "QueueingStrategy buildQueueStrategy(JsonObject hookConfiguration)", "full_signature": "public static QueueingStrategy buildQueueStrategy(JsonObject hookConfiguration)", "class_method_signature": "QueueingStrategyFactory.buildQueueStrategy(JsonObject hookConfiguration)", "testcase": false, "constructor": false}, {"identifier": "buildReducedPropagationQueueingStrategy", "parameters": "(JsonObject queueingStrategyConfig)", "modifiers": "private static", "return": "QueueingStrategy", "signature": "QueueingStrategy buildReducedPropagationQueueingStrategy(JsonObject queueingStrategyConfig)", "full_signature": "private static QueueingStrategy buildReducedPropagationQueueingStrategy(JsonObject queueingStrategyConfig)", "class_method_signature": "QueueingStrategyFactory.buildReducedPropagationQueueingStrategy(JsonObject queueingStrategyConfig)", "testcase": false, "constructor": false}], "file": "gateleen-hook/src/main/java/org/swisspush/gateleen/hook/queueingstrategy/QueueingStrategyFactory.java"}, "focal_method": {"identifier": "buildQueueStrategy", "parameters": "(JsonObject hookConfiguration)", "modifiers": "public static", "return": "QueueingStrategy", "body": "public static QueueingStrategy buildQueueStrategy(JsonObject hookConfiguration) {\n        QueueingStrategy queueingStrategy = new DefaultQueueingStrategy();\n        if(hookConfiguration == null || !hookConfiguration.containsKey(QUEUEING_STRATEGY_PROPERTY)){\n            return queueingStrategy;\n        }\n\n        Object queueingStrategyConfigObj = hookConfiguration.getValue(QUEUEING_STRATEGY_PROPERTY);\n        if(!(queueingStrategyConfigObj instanceof JsonObject)){\n            LOG.warn(\"Invalid 'queueingStrategy' configuration found: \" + queueingStrategyConfigObj + \". Using DefaultQueueingStrategy instead\");\n            return queueingStrategy;\n        }\n\n        JsonObject queueingStrategyConfig = (JsonObject) queueingStrategyConfigObj;\n        Strategy strategy = Strategy.fromString(queueingStrategyConfig.getString(\"type\"));\n\n        if(strategy == null){\n            LOG.warn(\"Invalid 'queueingStrategy' configuration found: \" + queueingStrategyConfig.encode() + \". Using DefaultQueueingStrategy instead\");\n            return queueingStrategy;\n        }\n\n        switch (strategy){\n            case DISCARD_PAYLOAD:\n                queueingStrategy = new DiscardPayloadQueueingStrategy();\n                break;\n            case REDUCED_PROPAGATION:\n                queueingStrategy = buildReducedPropagationQueueingStrategy(queueingStrategyConfig);\n                break;\n            default:\n            LOG.warn(\"Unknown strategy '\"+strategy+\"'. Using DefaultQueueingStrategy instead\");\n        }\n\n        return queueingStrategy;\n    }", "signature": "QueueingStrategy buildQueueStrategy(JsonObject hookConfiguration)", "full_signature": "public static QueueingStrategy buildQueueStrategy(JsonObject hookConfiguration)", "class_method_signature": "QueueingStrategyFactory.buildQueueStrategy(JsonObject hookConfiguration)", "testcase": false, "constructor": false, "invocations": ["containsKey", "getValue", "warn", "fromString", "getString", "warn", "encode", "buildReducedPropagationQueueingStrategy", "warn"]}, "repository": {"repo_id": 52609528, "url": "https://github.com/swisspush/gateleen", "language": "Java", "is_fork": false, "fork_count": 28, "stargazer_count": 63, "size": 2919, "license": "licensed"}}