{"test_class": {"identifier": "BuildOutputParserTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final String NEWLINE = SystemProperties.getLineSeparator();", "modifier": "private static final", "type": "String", "declarator": "NEWLINE = SystemProperties.getLineSeparator()", "var_name": "NEWLINE"}, {"original_string": "private static final String CWD_PATH = new File(\"\").getAbsolutePath();", "modifier": "private static final", "type": "String", "declarator": "CWD_PATH = new File(\"\").getAbsolutePath()", "var_name": "CWD_PATH"}, {"original_string": "private File sourceFile;", "modifier": "private", "type": "File", "declarator": "sourceFile", "var_name": "sourceFile"}, {"original_string": "private String sourceFilePath;", "modifier": "private", "type": "String", "declarator": "sourceFilePath", "var_name": "sourceFilePath"}, {"original_string": "private BuildOutputParser parser;", "modifier": "private", "type": "BuildOutputParser", "declarator": "parser", "var_name": "parser"}, {"original_string": "private static final String WINDOWS_PATH_DRIVE_LETTER = \"C:\";", "modifier": "private static final", "type": "String", "declarator": "WINDOWS_PATH_DRIVE_LETTER = \"C:\"", "var_name": "WINDOWS_PATH_DRIVE_LETTER"}, {"original_string": "private static final String WINDOWS_PATH_UNDER_UNIX = new File(WINDOWS_PATH_DRIVE_LETTER).getAbsolutePath();", "modifier": "private static final", "type": "String", "declarator": "WINDOWS_PATH_UNDER_UNIX = new File(WINDOWS_PATH_DRIVE_LETTER).getAbsolutePath()", "var_name": "WINDOWS_PATH_UNDER_UNIX"}, {"original_string": "private static final int WINDOWS_PATH_UNIX_PREFIX_LENGTH = WINDOWS_PATH_UNDER_UNIX.length() - WINDOWS_PATH_DRIVE_LETTER.length();", "modifier": "private static final", "type": "int", "declarator": "WINDOWS_PATH_UNIX_PREFIX_LENGTH = WINDOWS_PATH_UNDER_UNIX.length() - WINDOWS_PATH_DRIVE_LETTER.length()", "var_name": "WINDOWS_PATH_UNIX_PREFIX_LENGTH"}], "file": "build-common/testSrc/com/android/tools/idea/gradle/output/parser/BuildOutputParserTest.java"}, "test_case": {"identifier": "redirectValueLinksOutput", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n  public void redirectValueLinksOutput() throws Exception {\n    // Do not run tests on Windows (see http://b.android.com/222904)\n    assumeFalse(SystemInfo.isWindows);\n\n    TestResources.getFileInDirectory(\n      getClass(), \"/values.xml\", \"src/test/resources/testData/resources/baseSet/values/values.xml\");\n\n    // Need file to be named (exactly) values.xml\n    File tempDir = Files.createTempDir();\n    File valueDir = new File(tempDir, \"values-en\");\n    valueDir.mkdirs();\n    sourceFile = new File(valueDir, \"values.xml\"); // Keep in sync with MergedResourceWriter.FN_VALUES_XML\n    sourceFilePath = sourceFile.getAbsolutePath();\n\n    writeToFile(\n      \"<?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?>\\n\" +\n      \"<resources xmlns:ns1=\\\"urn:oasis:names:tc:xliff:document:1.2\\\"\\n\" +\n      \"           xmlns:tools=\\\"http://schemas.android.com/tools\\\"\\n\" +\n      \"           xmlns:alias_for_tools=\\\"http://schemas.android.com/tools\\\">\\n\" +\n      \"\\n\" +\n      \"    <!-- From: src/test/resources/testData/resources/baseSet/values/values.xml -->\\n\" +\n      \"    <string-array name=\\\"string_array\\\" translatable=\\\"false\\\">\\n\" +\n      \"        <item/> <!-- 0 -->\\n\" +\n      \"        <item/> <!-- 1 -->\\n\" +\n      \"        <item>ABC</item> <!-- 2 -->\\n\" +\n      \"        <item>DEF</item> <!-- 3 -->\\n\" +\n      \"        <item>GHI</item> <!-- 4 -->\\n\" +\n      \"        <item>JKL</item> <!-- 5 -->\\n\" +\n      \"        <item>MNO</item> <!-- 6 -->\\n\" +\n      \"        <item>PQRS</item> <!-- 7 -->\\n\" +\n      \"        <item>TUV</item> <!-- 8 -->\\n\" +\n      \"        <item>WXYZ</item> <!-- 9 -->\\n\" +\n      \"    </string-array>\\n\" +\n      \"\\n\" +\n      \"    <attr name=\\\"dimen_attr\\\" format=\\\"dimension\\\" />\\n\" +\n      \"    <attr name=\\\"enum_attr\\\">\\n\" +\n      \"        <enum name=\\\"normal\\\" value=\\\"0\\\" />\\n\" +\n      \"        <enum name=\\\"sans\\\" value=\\\"1\\\" />\\n\" +\n      \"        <enum name=\\\"serif\\\" value=\\\"2\\\" />\\n\" +\n      \"        <enum name=\\\"monospace\\\" value=\\\"3\\\" />\\n\" +\n      \"    </attr>\\n\" +\n      \"    <attr name=\\\"flag_attr\\\">\\n\" +\n      \"        <flag name=\\\"normal\\\" value=\\\"0\\\" />\\n\" +\n      \"        <flag name=\\\"bold\\\" value=\\\"1\\\" />\\n\" +\n      \"        <flag name=\\\"italic\\\" value=\\\"2\\\" />\\n\" +\n      \"    </attr>\\n\" +\n      \"    <attr name=\\\"string_attr\\\" format=\\\"string\\\" />\\n\" +\n      \"    <!-- From: src/test/resources/testData/resources/baseMerge/overlay/values/values.xml -->\\n\" +\n      \"    <color name=\\\"color\\\">#FFFFFFFF</color>\\n\" +\n      \"    <!-- From: src/test/resources/testData/resources/baseSet/values/values.xml -->\\n\" +\n      \"    <declare-styleable name=\\\"declare_styleable\\\">\\n\" +\n      \"\\n\" +\n      \"        <!-- ============== -->\\n\" +\n      \"        <!-- Generic styles -->\\n\" +\n      \"        <!-- ============== -->\\n\" +\n      \"        <eat-comment />\\n\" +\n      \"\\n\" +\n      \"        <!-- Default color of foreground imagery. -->\\n\" +\n      \"        <attr name=\\\"blah\\\" format=\\\"color\\\" />\\n\" +\n      \"        <!-- Default color of foreground imagery on an inverted background. -->\\n\" +\n      \"        <attr name=\\\"android:colorForegroundInverse\\\" />\\n\" +\n      \"    </declare-styleable>\\n\" +\n      \"\\n\" +\n      \"    <dimen name=\\\"dimen\\\">164dp</dimen>\\n\" +\n      \"\\n\" +\n      \"    <drawable name=\\\"color_drawable\\\">#ffffffff</drawable>\\n\" +\n      \"    <drawable name=\\\"drawable_ref\\\">@drawable/stat_notify_sync_anim0</drawable>\\n\" +\n      \"\\n\" +\n      \"    <item name=\\\"item_id\\\" type=\\\"id\\\"/>\\n\" +\n      \"\\n\" +\n      \"    <integer name=\\\"integer\\\">75</integer>\\n\" +\n      \"    <!-- From: src/test/resources/testData/resources/baseMerge/overlay/values/values.xml -->\\n\" +\n      \"    <item name=\\\"file_replaced_by_alias\\\" type=\\\"layout\\\">@layout/ref</item>\\n\" +\n      \"    <!-- From: src/test/resources/testData/resources/baseSet/values/values.xml -->\\n\" +\n      \"    <item name=\\\"layout_ref\\\" type=\\\"layout\\\">@layout/ref</item>\\n\" +\n      \"    <!-- From: src/test/resources/testData/resources/baseMerge/overlay/values/values.xml -->\\n\" +\n      \"    <string name=\\\"basic_string\\\">overlay_string</string>\\n\" +\n      \"    <!-- From: src/test/resources/testData/resources/baseSet/values/values.xml -->\\n\" +\n      \"    <string name=\\\"styled_string\\\">Forgot your username or password\\\\?\\\\nVisit <b>google.com/accounts/recovery</b>.</string>\\n\" +\n      \"    <string name=\\\"xliff_string\\\"><ns1:g id=\\\"number\\\" example=\\\"123\\\">%1$s</ns1:g><ns1:g id=\\\"unit\\\" example=\\\"KB\\\">%2$s</ns1:g></string>\\n\" +\n      \"\\n\" +\n      \"    <style name=\\\"style\\\" parent=\\\"@android:style/Holo.Light\\\">\\n\" +\n      \"        <item name=\\\"android:singleLine\\\">true</item>\\n\" +\n      \"        <item name=\\\"android:textAppearance\\\">@style/TextAppearance.WindowTitle</item>\\n\" +\n      \"        <item name=\\\"android:shadowColor\\\">#BB000000</item>\\n\" +\n      \"        <item name=\\\"android:shadowRadius\\\">2.75</item>\\n\" +\n      \"        <item name=\\\"foo\\\">foo</item>\\n\" +\n      \"    </style>\\n\" +\n      \"\\n\" +\n      \"</resources>\\n\");\n\n    String messageText = \"String types not allowed (at 'drawable_ref' with value '@drawable/stat_notify_sync_anim0').\";\n    String err = sourceFilePath + \":46: error: Error: \" + messageText;\n    Collection<Message> messages = parser.parseGradleOutput(err);\n    assertEquals(1, messages.size());\n\n    assertEquals(\"[message count]\", 1, messages.size());\n    Message message = ContainerUtil.getFirstItem(messages);\n    assertNotNull(message);\n\n    // NOT sourceFilePath; should be translated back from source comment\n    assertEquals(\"[file path]\", \"src/test/resources/testData/resources/baseSet/values/values.xml\", getSystemIndependentSourcePath(message));\n\n    assertEquals(\"[message severity]\", Message.Kind.ERROR, message.getKind());\n    assertEquals(\"[message text]\", messageText, message.getText());\n    assertEquals(\"[position line]\", 11, message.getLineNumber());\n    assertEquals(\"[position column]\", 35, message.getColumn());\n  }", "signature": "void redirectValueLinksOutput()", "full_signature": "@Test public void redirectValueLinksOutput()", "class_method_signature": "BuildOutputParserTest.redirectValueLinksOutput()", "testcase": true, "constructor": false, "invocations": ["assumeFalse", "getFileInDirectory", "getClass", "createTempDir", "mkdirs", "getAbsolutePath", "writeToFile", "parseGradleOutput", "assertEquals", "size", "assertEquals", "size", "getFirstItem", "assertNotNull", "assertEquals", "getSystemIndependentSourcePath", "assertEquals", "getKind", "assertEquals", "getText", "assertEquals", "getLineNumber", "assertEquals", "getColumn"]}, "focal_class": {"identifier": "BuildOutputParser", "superclass": "", "interfaces": "", "fields": [{"original_string": "private final ToolOutputParser parser;", "modifier": "private final", "type": "ToolOutputParser", "declarator": "parser", "var_name": "parser"}], "methods": [{"identifier": "BuildOutputParser", "parameters": "(@NotNull Iterable<PatternAwareOutputParser> parsers)", "modifiers": "public", "return": "", "signature": " BuildOutputParser(@NotNull Iterable<PatternAwareOutputParser> parsers)", "full_signature": "public  BuildOutputParser(@NotNull Iterable<PatternAwareOutputParser> parsers)", "class_method_signature": "BuildOutputParser.BuildOutputParser(@NotNull Iterable<PatternAwareOutputParser> parsers)", "testcase": false, "constructor": true}, {"identifier": "parseGradleOutput", "parameters": "(@NotNull String output)", "modifiers": "@NotNull public", "return": "List<Message>", "signature": "List<Message> parseGradleOutput(@NotNull String output)", "full_signature": "@NotNull public List<Message> parseGradleOutput(@NotNull String output)", "class_method_signature": "BuildOutputParser.parseGradleOutput(@NotNull String output)", "testcase": false, "constructor": false}, {"identifier": "parseGradleOutput", "parameters": "(@NotNull String output, boolean ignoreUnrecognizedText)", "modifiers": "@NotNull public", "return": "List<Message>", "signature": "List<Message> parseGradleOutput(@NotNull String output, boolean ignoreUnrecognizedText)", "full_signature": "@NotNull public List<Message> parseGradleOutput(@NotNull String output, boolean ignoreUnrecognizedText)", "class_method_signature": "BuildOutputParser.parseGradleOutput(@NotNull String output, boolean ignoreUnrecognizedText)", "testcase": false, "constructor": false}], "file": "build-common/src/com/android/tools/idea/gradle/output/parser/BuildOutputParser.java"}, "focal_method": {"identifier": "parseGradleOutput", "parameters": "(@NotNull String output)", "modifiers": "@NotNull public", "return": "List<Message>", "body": "@NotNull\n  public List<Message> parseGradleOutput(@NotNull String output) {\n    return parser.parseToolOutput(output);\n  }", "signature": "List<Message> parseGradleOutput(@NotNull String output)", "full_signature": "@NotNull public List<Message> parseGradleOutput(@NotNull String output)", "class_method_signature": "BuildOutputParser.parseGradleOutput(@NotNull String output)", "testcase": false, "constructor": false, "invocations": ["parseToolOutput"]}, "repository": {"repo_id": 60701247, "url": "https://github.com/JetBrains/android", "stars": 486, "created": "6/8/2016 1:46:48 PM +00:00", "updates": "2020-01-27T16:45:40+00:00", "fork": "False", "license": "licensed"}}