{"test_class": {"identifier": "PeopleAssignmentHelperTest", "superclass": "extends AbstractBaseTest", "interfaces": "", "fields": [{"original_string": "private PeopleAssignmentHelper peopleAssignmentHelper;", "modifier": "private", "type": "PeopleAssignmentHelper", "declarator": "peopleAssignmentHelper", "var_name": "peopleAssignmentHelper"}], "file": "jbpm-human-task/jbpm-human-task-workitems/src/test/java/org/jbpm/services/task/wih/util/PeopleAssignmentHelperTest.java"}, "test_case": {"identifier": "testHandlePeopleAssignments", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n\tpublic void testHandlePeopleAssignments() {\n\t\t\n\t\tInternalTask task = (InternalTask) TaskModelProvider.getFactory().newTask();\n\t\tInternalTaskData taskData = (InternalTaskData) TaskModelProvider.getFactory().newTaskData();\n\t\tInternalPeopleAssignments peopleAssignment = peopleAssignmentHelper.getNullSafePeopleAssignments(task);\n\t\tassertNotNull(peopleAssignment);\n\t\tassertEquals(0, peopleAssignment.getPotentialOwners().size());\n\t\tassertEquals(0, peopleAssignment.getBusinessAdministrators().size());\n\t\tassertEquals(0, peopleAssignment.getTaskStakeholders().size());\n\t\t\n\t\tString actorId = \"espiegelberg\";\n\t\tString taskStakeholderId = \"drmary\";\n\t\tString businessAdministratorId = \"drbug\";\n        String businessAdministratorGroupId = \"Super users\";\n        String excludedOwnerId = \"john\";\n        String recipientId = \"mary\";\n\t\t\n\t\tWorkItem workItem = new WorkItemImpl();\t\t\n\t\tworkItem.setParameter(PeopleAssignmentHelper.ACTOR_ID, actorId);\n\t\tworkItem.setParameter(PeopleAssignmentHelper.TASKSTAKEHOLDER_ID, taskStakeholderId);\n\t\tworkItem.setParameter(PeopleAssignmentHelper.BUSINESSADMINISTRATOR_ID, businessAdministratorId);\n        workItem.setParameter(PeopleAssignmentHelper.BUSINESSADMINISTRATOR_GROUP_ID, businessAdministratorGroupId);\n        workItem.setParameter(PeopleAssignmentHelper.EXCLUDED_OWNER_ID, excludedOwnerId);\n        workItem.setParameter(PeopleAssignmentHelper.RECIPIENT_ID, recipientId);\n\t\t\n\t\tpeopleAssignmentHelper.handlePeopleAssignments(workItem, task, taskData);\n\t\t\n\t\tList<OrganizationalEntity> potentialOwners = task.getPeopleAssignments().getPotentialOwners();\n\t\tassertEquals(1, potentialOwners.size());\n\t\tassertEquals(actorId, potentialOwners.get(0).getId());\n\t\t\n\t\tList<OrganizationalEntity> businessAdministrators = task.getPeopleAssignments().getBusinessAdministrators();\n\t\tassertEquals(4, businessAdministrators.size());\n\t\tassertEquals(\"Administrator\", businessAdministrators.get(0).getId());\n\t\t// Admin group\n\t\tassertEquals(\"Administrators\", businessAdministrators.get(1).getId());\n\t\tassertEquals(businessAdministratorId, businessAdministrators.get(2).getId());\n        assertEquals(businessAdministratorGroupId, businessAdministrators.get(3).getId());\n\t\t\n\t\t\n\t\tList<OrganizationalEntity> taskStakehoders = ((InternalPeopleAssignments) task.getPeopleAssignments()).getTaskStakeholders();\n\t\tassertEquals(1, taskStakehoders.size());\n\t\tassertEquals(taskStakeholderId, taskStakehoders.get(0).getId());\n\n        List<OrganizationalEntity> excludedOwners = ((InternalPeopleAssignments) task.getPeopleAssignments()).getExcludedOwners();\n        assertEquals(1, excludedOwners.size());\n        assertEquals(excludedOwnerId, excludedOwners.get(0).getId());\n\n        List<OrganizationalEntity> recipients = ((InternalPeopleAssignments) task.getPeopleAssignments()).getRecipients();\n        assertEquals(1, recipients.size());\n        assertEquals(recipientId, recipients.get(0).getId());\n\t\t\n\t}", "signature": "void testHandlePeopleAssignments()", "full_signature": "@Test public void testHandlePeopleAssignments()", "class_method_signature": "PeopleAssignmentHelperTest.testHandlePeopleAssignments()", "testcase": true, "constructor": false, "invocations": ["newTask", "getFactory", "newTaskData", "getFactory", "getNullSafePeopleAssignments", "assertNotNull", "assertEquals", "size", "getPotentialOwners", "assertEquals", "size", "getBusinessAdministrators", "assertEquals", "size", "getTaskStakeholders", "setParameter", "setParameter", "setParameter", "setParameter", "setParameter", "setParameter", "handlePeopleAssignments", "getPotentialOwners", "getPeopleAssignments", "assertEquals", "size", "assertEquals", "getId", "get", "getBusinessAdministrators", "getPeopleAssignments", "assertEquals", "size", "assertEquals", "getId", "get", "assertEquals", "getId", "get", "assertEquals", "getId", "get", "assertEquals", "getId", "get", "getTaskStakeholders", "getPeopleAssignments", "assertEquals", "size", "assertEquals", "getId", "get", "getExcludedOwners", "getPeopleAssignments", "assertEquals", "size", "assertEquals", "getId", "get", "getRecipients", "getPeopleAssignments", "assertEquals", "size", "assertEquals", "getId", "get"]}, "focal_class": {"identifier": "PeopleAssignmentHelper", "superclass": "", "interfaces": "", "fields": [{"original_string": "public static final String ACTOR_ID = \"ActorId\";", "modifier": "public static final", "type": "String", "declarator": "ACTOR_ID = \"ActorId\"", "var_name": "ACTOR_ID"}, {"original_string": "public static final String GROUP_ID = \"GroupId\";", "modifier": "public static final", "type": "String", "declarator": "GROUP_ID = \"GroupId\"", "var_name": "GROUP_ID"}, {"original_string": "public static final String BUSINESSADMINISTRATOR_ID = \"BusinessAdministratorId\";", "modifier": "public static final", "type": "String", "declarator": "BUSINESSADMINISTRATOR_ID = \"BusinessAdministratorId\"", "var_name": "BUSINESSADMINISTRATOR_ID"}, {"original_string": "public static final String BUSINESSADMINISTRATOR_GROUP_ID = \"BusinessAdministratorGroupId\";", "modifier": "public static final", "type": "String", "declarator": "BUSINESSADMINISTRATOR_GROUP_ID = \"BusinessAdministratorGroupId\"", "var_name": "BUSINESSADMINISTRATOR_GROUP_ID"}, {"original_string": "public static final String TASKSTAKEHOLDER_ID = \"TaskStakeholderId\";", "modifier": "public static final", "type": "String", "declarator": "TASKSTAKEHOLDER_ID = \"TaskStakeholderId\"", "var_name": "TASKSTAKEHOLDER_ID"}, {"original_string": "public static final String EXCLUDED_OWNER_ID = \"ExcludedOwnerId\";", "modifier": "public static final", "type": "String", "declarator": "EXCLUDED_OWNER_ID = \"ExcludedOwnerId\"", "var_name": "EXCLUDED_OWNER_ID"}, {"original_string": "public static final String RECIPIENT_ID = \"RecipientId\";", "modifier": "public static final", "type": "String", "declarator": "RECIPIENT_ID = \"RecipientId\"", "var_name": "RECIPIENT_ID"}, {"original_string": "public static final String DEFAULT_ADMIN_USER = System.getProperty(\"org.jbpm.ht.admin.user\", \"Administrator\");", "modifier": "public static final", "type": "String", "declarator": "DEFAULT_ADMIN_USER = System.getProperty(\"org.jbpm.ht.admin.user\", \"Administrator\")", "var_name": "DEFAULT_ADMIN_USER"}, {"original_string": "public static final String DEFAULT_ADMIN_GROUP = System.getProperty(\"org.jbpm.ht.admin.group\", \"Administrators\");", "modifier": "public static final", "type": "String", "declarator": "DEFAULT_ADMIN_GROUP = System.getProperty(\"org.jbpm.ht.admin.group\", \"Administrators\")", "var_name": "DEFAULT_ADMIN_GROUP"}, {"original_string": "private String separator;", "modifier": "private", "type": "String", "declarator": "separator", "var_name": "separator"}, {"original_string": "private CaseData caseFile;", "modifier": "private", "type": "CaseData", "declarator": "caseFile", "var_name": "caseFile"}, {"original_string": "private String administratorUser = DEFAULT_ADMIN_USER;", "modifier": "private", "type": "String", "declarator": "administratorUser = DEFAULT_ADMIN_USER", "var_name": "administratorUser"}, {"original_string": "private String administratorGroup = DEFAULT_ADMIN_GROUP;", "modifier": "private", "type": "String", "declarator": "administratorGroup = DEFAULT_ADMIN_GROUP", "var_name": "administratorGroup"}, {"original_string": "private Predicate<? super OrganizationalEntity> userFilter = (OrganizationalEntity oe) -> { return oe instanceof User;};", "modifier": "private", "type": "Predicate<? super OrganizationalEntity>", "declarator": "userFilter = (OrganizationalEntity oe) -> { return oe instanceof User;}", "var_name": "userFilter"}, {"original_string": "private Predicate<? super OrganizationalEntity> groupFilter = (OrganizationalEntity oe) -> { return oe instanceof Group;};", "modifier": "private", "type": "Predicate<? super OrganizationalEntity>", "declarator": "groupFilter = (OrganizationalEntity oe) -> { return oe instanceof Group;}", "var_name": "groupFilter"}, {"original_string": "private Predicate<? super OrganizationalEntity> noFilter = (OrganizationalEntity oe) -> { return true;};", "modifier": "private", "type": "Predicate<? super OrganizationalEntity>", "declarator": "noFilter = (OrganizationalEntity oe) -> { return true;}", "var_name": "noFilter"}], "methods": [{"identifier": "PeopleAssignmentHelper", "parameters": "()", "modifiers": "public", "return": "", "signature": " PeopleAssignmentHelper()", "full_signature": "public  PeopleAssignmentHelper()", "class_method_signature": "PeopleAssignmentHelper.PeopleAssignmentHelper()", "testcase": false, "constructor": true}, {"identifier": "PeopleAssignmentHelper", "parameters": "(String separator)", "modifiers": "public", "return": "", "signature": " PeopleAssignmentHelper(String separator)", "full_signature": "public  PeopleAssignmentHelper(String separator)", "class_method_signature": "PeopleAssignmentHelper.PeopleAssignmentHelper(String separator)", "testcase": false, "constructor": true}, {"identifier": "PeopleAssignmentHelper", "parameters": "(String adminUser, String adminGroup)", "modifiers": "public", "return": "", "signature": " PeopleAssignmentHelper(String adminUser, String adminGroup)", "full_signature": "public  PeopleAssignmentHelper(String adminUser, String adminGroup)", "class_method_signature": "PeopleAssignmentHelper.PeopleAssignmentHelper(String adminUser, String adminGroup)", "testcase": false, "constructor": true}, {"identifier": "PeopleAssignmentHelper", "parameters": "(CaseData caseFile)", "modifiers": "public", "return": "", "signature": " PeopleAssignmentHelper(CaseData caseFile)", "full_signature": "public  PeopleAssignmentHelper(CaseData caseFile)", "class_method_signature": "PeopleAssignmentHelper.PeopleAssignmentHelper(CaseData caseFile)", "testcase": false, "constructor": true}, {"identifier": "handlePeopleAssignments", "parameters": "(WorkItem workItem, InternalTask task, InternalTaskData taskData)", "modifiers": "public", "return": "void", "signature": "void handlePeopleAssignments(WorkItem workItem, InternalTask task, InternalTaskData taskData)", "full_signature": "public void handlePeopleAssignments(WorkItem workItem, InternalTask task, InternalTaskData taskData)", "class_method_signature": "PeopleAssignmentHelper.handlePeopleAssignments(WorkItem workItem, InternalTask task, InternalTaskData taskData)", "testcase": false, "constructor": false}, {"identifier": "assignActors", "parameters": "(WorkItem workItem, PeopleAssignments peopleAssignments, InternalTaskData taskData)", "modifiers": "@SuppressWarnings(\"unchecked\") protected", "return": "void", "signature": "void assignActors(WorkItem workItem, PeopleAssignments peopleAssignments, InternalTaskData taskData)", "full_signature": "@SuppressWarnings(\"unchecked\") protected void assignActors(WorkItem workItem, PeopleAssignments peopleAssignments, InternalTaskData taskData)", "class_method_signature": "PeopleAssignmentHelper.assignActors(WorkItem workItem, PeopleAssignments peopleAssignments, InternalTaskData taskData)", "testcase": false, "constructor": false}, {"identifier": "assignGroups", "parameters": "(WorkItem workItem, PeopleAssignments peopleAssignments)", "modifiers": "@SuppressWarnings(\"unchecked\") protected", "return": "void", "signature": "void assignGroups(WorkItem workItem, PeopleAssignments peopleAssignments)", "full_signature": "@SuppressWarnings(\"unchecked\") protected void assignGroups(WorkItem workItem, PeopleAssignments peopleAssignments)", "class_method_signature": "PeopleAssignmentHelper.assignGroups(WorkItem workItem, PeopleAssignments peopleAssignments)", "testcase": false, "constructor": false}, {"identifier": "assignBusinessAdministrators", "parameters": "(WorkItem workItem, PeopleAssignments peopleAssignments)", "modifiers": "@SuppressWarnings(\"unchecked\") protected", "return": "void", "signature": "void assignBusinessAdministrators(WorkItem workItem, PeopleAssignments peopleAssignments)", "full_signature": "@SuppressWarnings(\"unchecked\") protected void assignBusinessAdministrators(WorkItem workItem, PeopleAssignments peopleAssignments)", "class_method_signature": "PeopleAssignmentHelper.assignBusinessAdministrators(WorkItem workItem, PeopleAssignments peopleAssignments)", "testcase": false, "constructor": false}, {"identifier": "assignTaskStakeholders", "parameters": "(WorkItem workItem, InternalPeopleAssignments peopleAssignments)", "modifiers": "@SuppressWarnings(\"unchecked\") protected", "return": "void", "signature": "void assignTaskStakeholders(WorkItem workItem, InternalPeopleAssignments peopleAssignments)", "full_signature": "@SuppressWarnings(\"unchecked\") protected void assignTaskStakeholders(WorkItem workItem, InternalPeopleAssignments peopleAssignments)", "class_method_signature": "PeopleAssignmentHelper.assignTaskStakeholders(WorkItem workItem, InternalPeopleAssignments peopleAssignments)", "testcase": false, "constructor": false}, {"identifier": "assignExcludedOwners", "parameters": "(WorkItem workItem, InternalPeopleAssignments peopleAssignments)", "modifiers": "@SuppressWarnings(\"unchecked\") protected", "return": "void", "signature": "void assignExcludedOwners(WorkItem workItem, InternalPeopleAssignments peopleAssignments)", "full_signature": "@SuppressWarnings(\"unchecked\") protected void assignExcludedOwners(WorkItem workItem, InternalPeopleAssignments peopleAssignments)", "class_method_signature": "PeopleAssignmentHelper.assignExcludedOwners(WorkItem workItem, InternalPeopleAssignments peopleAssignments)", "testcase": false, "constructor": false}, {"identifier": "assignRecipients", "parameters": "(WorkItem workItem, InternalPeopleAssignments peopleAssignments)", "modifiers": "@SuppressWarnings(\"unchecked\") protected", "return": "void", "signature": "void assignRecipients(WorkItem workItem, InternalPeopleAssignments peopleAssignments)", "full_signature": "@SuppressWarnings(\"unchecked\") protected void assignRecipients(WorkItem workItem, InternalPeopleAssignments peopleAssignments)", "class_method_signature": "PeopleAssignmentHelper.assignRecipients(WorkItem workItem, InternalPeopleAssignments peopleAssignments)", "testcase": false, "constructor": false}, {"identifier": "processPeopleAssignments", "parameters": "(String peopleAssignmentIds, List<OrganizationalEntity> organizationalEntities, boolean user)", "modifiers": "protected", "return": "void", "signature": "void processPeopleAssignments(String peopleAssignmentIds, List<OrganizationalEntity> organizationalEntities, boolean user)", "full_signature": "protected void processPeopleAssignments(String peopleAssignmentIds, List<OrganizationalEntity> organizationalEntities, boolean user)", "class_method_signature": "PeopleAssignmentHelper.processPeopleAssignments(String peopleAssignmentIds, List<OrganizationalEntity> organizationalEntities, boolean user)", "testcase": false, "constructor": false}, {"identifier": "processPeopleAssignments", "parameters": "(Collection<OrganizationalEntity> peopleAssignmentIds, List<OrganizationalEntity> organizationalEntities)", "modifiers": "protected", "return": "void", "signature": "void processPeopleAssignments(Collection<OrganizationalEntity> peopleAssignmentIds, List<OrganizationalEntity> organizationalEntities)", "full_signature": "protected void processPeopleAssignments(Collection<OrganizationalEntity> peopleAssignmentIds, List<OrganizationalEntity> organizationalEntities)", "class_method_signature": "PeopleAssignmentHelper.processPeopleAssignments(Collection<OrganizationalEntity> peopleAssignmentIds, List<OrganizationalEntity> organizationalEntities)", "testcase": false, "constructor": false}, {"identifier": "getNullSafePeopleAssignments", "parameters": "(Task task)", "modifiers": "protected", "return": "InternalPeopleAssignments", "signature": "InternalPeopleAssignments getNullSafePeopleAssignments(Task task)", "full_signature": "protected InternalPeopleAssignments getNullSafePeopleAssignments(Task task)", "class_method_signature": "PeopleAssignmentHelper.getNullSafePeopleAssignments(Task task)", "testcase": false, "constructor": false}, {"identifier": "hasAdminAssigned", "parameters": "(Collection<OrganizationalEntity> businessAdmins)", "modifiers": "protected", "return": "boolean", "signature": "boolean hasAdminAssigned(Collection<OrganizationalEntity> businessAdmins)", "full_signature": "protected boolean hasAdminAssigned(Collection<OrganizationalEntity> businessAdmins)", "class_method_signature": "PeopleAssignmentHelper.hasAdminAssigned(Collection<OrganizationalEntity> businessAdmins)", "testcase": false, "constructor": false}, {"identifier": "adjustParam", "parameters": "(Object currentValue, Predicate<? super OrganizationalEntity> filter)", "modifiers": "protected", "return": "Object", "signature": "Object adjustParam(Object currentValue, Predicate<? super OrganizationalEntity> filter)", "full_signature": "protected Object adjustParam(Object currentValue, Predicate<? super OrganizationalEntity> filter)", "class_method_signature": "PeopleAssignmentHelper.adjustParam(Object currentValue, Predicate<? super OrganizationalEntity> filter)", "testcase": false, "constructor": false}], "file": "jbpm-human-task/jbpm-human-task-workitems/src/main/java/org/jbpm/services/task/wih/util/PeopleAssignmentHelper.java"}, "focal_method": {"identifier": "handlePeopleAssignments", "parameters": "(WorkItem workItem, InternalTask task, InternalTaskData taskData)", "modifiers": "public", "return": "void", "body": "public void handlePeopleAssignments(WorkItem workItem, InternalTask task, InternalTaskData taskData) {\n\t\t\n\t\tInternalPeopleAssignments peopleAssignments = getNullSafePeopleAssignments(task);\n        \n\t\tassignActors(workItem, peopleAssignments, taskData);\n\t\tassignGroups(workItem, peopleAssignments);\t\t\n\t\tassignBusinessAdministrators(workItem, peopleAssignments);\n\t\tassignTaskStakeholders(workItem, peopleAssignments);\n        assignExcludedOwners(workItem, peopleAssignments);\n        assignRecipients(workItem, peopleAssignments);\n\t\t\n\t\ttask.setPeopleAssignments(peopleAssignments);\n        \n\t}", "signature": "void handlePeopleAssignments(WorkItem workItem, InternalTask task, InternalTaskData taskData)", "full_signature": "public void handlePeopleAssignments(WorkItem workItem, InternalTask task, InternalTaskData taskData)", "class_method_signature": "PeopleAssignmentHelper.handlePeopleAssignments(WorkItem workItem, InternalTask task, InternalTaskData taskData)", "testcase": false, "constructor": false, "invocations": ["getNullSafePeopleAssignments", "assignActors", "assignGroups", "assignBusinessAdministrators", "assignTaskStakeholders", "assignExcludedOwners", "assignRecipients", "setPeopleAssignments"]}, "repository": {"repo_id": 930571, "url": "https://github.com/kiegroup/jbpm", "stars": 1035, "created": "9/22/2010 1:19:52 PM +00:00", "updates": "2020-01-22T03:39:57+00:00", "fork": "False", "license": "licensed"}}