{"test_class": {"identifier": "CheckpointRegularRepeatStrategyTest", "superclass": "extends PluginsLoadingTestBase", "interfaces": "", "fields": [{"original_string": "private ISchedulerEntry entryMock;", "modifier": "private", "type": "ISchedulerEntry", "declarator": "entryMock", "var_name": "entryMock"}, {"original_string": "private IObject entryState;", "modifier": "private", "type": "IObject", "declarator": "entryState", "var_name": "entryState"}], "file": "CoreFeatures/Checkpoint/CheckpointSchedulingStrategies/src/test/java/info/smart_tools/smartactors/checkpoint/scheduling_strategies/CheckpointRegularRepeatStrategyTest.java"}, "test_case": {"identifier": "Should_copyArgumentsToEntryState", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void Should_copyArgumentsToEntryState()\n            throws Exception {\n        ISchedulingStrategy strategy = new CheckpointRegularRepeatStrategy();\n\n        makeEntry(\"{}\");\n\n        strategy.init(entryMock, makeArgs(\"{\" +\n                \"'times':2,\" +\n                \"'interval':'PT3H'\" +\n                \"}\"));\n\n        verify(entryMock).save();\n        verify(entryMock).scheduleNext(anyLong());\n\n        assertEquals(\"PT3H\", entryState.getValue(IOC.resolve(Keys.getOrAdd(\"info.smart_tools.smartactors.iobject.ifield_name.IFieldName\"), \"interval\")));\n        assertEquals(\"PT3H\", entryState.getValue(IOC.resolve(Keys.getOrAdd(\"info.smart_tools.smartactors.iobject.ifield_name.IFieldName\"), \"postRestoreDelay\")));\n        assertEquals(\"PT3H\", entryState.getValue(IOC.resolve(Keys.getOrAdd(\"info.smart_tools.smartactors.iobject.ifield_name.IFieldName\"), \"postCompletionDelay\")));\n        assertEquals(2, entryState.getValue(IOC.resolve(Keys.getOrAdd(\"info.smart_tools.smartactors.iobject.ifield_name.IFieldName\"), \"times\")));\n        assertEquals(1, entryState.getValue(IOC.resolve(Keys.getOrAdd(\"info.smart_tools.smartactors.iobject.ifield_name.IFieldName\"), \"remainingTimes\")));\n\n        //\n        makeEntry(\"{}\");\n\n        strategy.init(entryMock, makeArgs(\"{\" +\n                \"'times':3,\" +\n                \"'interval':'PT2H',\" +\n                \"'postRestoreDelay':'PT3H',\" +\n                \"'postCompletionDelay':'PT4H'\" +\n                \"}\"));\n\n        verify(entryMock).save();\n        verify(entryMock).scheduleNext(anyLong());\n\n        assertEquals(\"PT2H\", entryState.getValue(IOC.resolve(Keys.getOrAdd(\"info.smart_tools.smartactors.iobject.ifield_name.IFieldName\"), \"interval\")));\n        assertEquals(\"PT3H\", entryState.getValue(IOC.resolve(Keys.getOrAdd(\"info.smart_tools.smartactors.iobject.ifield_name.IFieldName\"), \"postRestoreDelay\")));\n        assertEquals(\"PT4H\", entryState.getValue(IOC.resolve(Keys.getOrAdd(\"info.smart_tools.smartactors.iobject.ifield_name.IFieldName\"), \"postCompletionDelay\")));\n        assertEquals(3, entryState.getValue(IOC.resolve(Keys.getOrAdd(\"info.smart_tools.smartactors.iobject.ifield_name.IFieldName\"), \"times\")));\n        assertEquals(2, entryState.getValue(IOC.resolve(Keys.getOrAdd(\"info.smart_tools.smartactors.iobject.ifield_name.IFieldName\"), \"remainingTimes\")));\n    }", "signature": "void Should_copyArgumentsToEntryState()", "full_signature": "@Test public void Should_copyArgumentsToEntryState()", "class_method_signature": "CheckpointRegularRepeatStrategyTest.Should_copyArgumentsToEntryState()", "testcase": true, "constructor": false, "invocations": ["makeEntry", "init", "makeArgs", "save", "verify", "scheduleNext", "verify", "anyLong", "assertEquals", "getValue", "resolve", "getOrAdd", "assertEquals", "getValue", "resolve", "getOrAdd", "assertEquals", "getValue", "resolve", "getOrAdd", "assertEquals", "getValue", "resolve", "getOrAdd", "assertEquals", "getValue", "resolve", "getOrAdd", "makeEntry", "init", "makeArgs", "save", "verify", "scheduleNext", "verify", "anyLong", "assertEquals", "getValue", "resolve", "getOrAdd", "assertEquals", "getValue", "resolve", "getOrAdd", "assertEquals", "getValue", "resolve", "getOrAdd", "assertEquals", "getValue", "resolve", "getOrAdd", "assertEquals", "getValue", "resolve", "getOrAdd"]}, "focal_class": {"identifier": "CheckpointRegularRepeatStrategy", "superclass": "extends CheckpointRepeatStrategy", "interfaces": "", "fields": [{"original_string": "private final IFieldName intervalFieldName;", "modifier": "private final", "type": "IFieldName", "declarator": "intervalFieldName", "var_name": "intervalFieldName"}], "methods": [{"identifier": "CheckpointRegularRepeatStrategy", "parameters": "()", "modifiers": "public", "return": "", "signature": " CheckpointRegularRepeatStrategy()", "full_signature": "public  CheckpointRegularRepeatStrategy()", "class_method_signature": "CheckpointRegularRepeatStrategy.CheckpointRegularRepeatStrategy()", "testcase": false, "constructor": true}, {"identifier": "calculateNextInterval", "parameters": "(final ISchedulerEntry entry)", "modifiers": "@Override protected", "return": "long", "signature": "long calculateNextInterval(final ISchedulerEntry entry)", "full_signature": "@Override protected long calculateNextInterval(final ISchedulerEntry entry)", "class_method_signature": "CheckpointRegularRepeatStrategy.calculateNextInterval(final ISchedulerEntry entry)", "testcase": false, "constructor": false}, {"identifier": "defaultPostRestoreDelay", "parameters": "(final ISchedulerEntry entry)", "modifiers": "@Override protected", "return": "Duration", "signature": "Duration defaultPostRestoreDelay(final ISchedulerEntry entry)", "full_signature": "@Override protected Duration defaultPostRestoreDelay(final ISchedulerEntry entry)", "class_method_signature": "CheckpointRegularRepeatStrategy.defaultPostRestoreDelay(final ISchedulerEntry entry)", "testcase": false, "constructor": false}, {"identifier": "defaultPostCompletionDelay", "parameters": "(final ISchedulerEntry entry)", "modifiers": "@Override protected", "return": "Duration", "signature": "Duration defaultPostCompletionDelay(final ISchedulerEntry entry)", "full_signature": "@Override protected Duration defaultPostCompletionDelay(final ISchedulerEntry entry)", "class_method_signature": "CheckpointRegularRepeatStrategy.defaultPostCompletionDelay(final ISchedulerEntry entry)", "testcase": false, "constructor": false}, {"identifier": "init", "parameters": "(final ISchedulerEntry entry, final IObject args)", "modifiers": "@Override public", "return": "void", "signature": "void init(final ISchedulerEntry entry, final IObject args)", "full_signature": "@Override public void init(final ISchedulerEntry entry, final IObject args)", "class_method_signature": "CheckpointRegularRepeatStrategy.init(final ISchedulerEntry entry, final IObject args)", "testcase": false, "constructor": false}], "file": "CoreFeatures/Checkpoint/CheckpointSchedulingStrategies/src/main/java/info/smart_tools/smartactors/checkpoint/scheduling_strategies/CheckpointRegularRepeatStrategy.java"}, "focal_method": {"identifier": "init", "parameters": "(final ISchedulerEntry entry, final IObject args)", "modifiers": "@Override public", "return": "void", "body": "@Override\n    public void init(final ISchedulerEntry entry, final IObject args) throws SchedulingStrategyExecutionException {\n        try {\n            Duration interval = Duration.parse((String) args.getValue(intervalFieldName));\n            entry.getState().setValue(intervalFieldName, interval.toString());\n        } catch (ReadValueException | ChangeValueException | InvalidArgumentException e) {\n            throw new SchedulingStrategyExecutionException(\"Error occurred initializing scheduling strategy.\", e);\n        }\n\n        super.init(entry, args);\n    }", "signature": "void init(final ISchedulerEntry entry, final IObject args)", "full_signature": "@Override public void init(final ISchedulerEntry entry, final IObject args)", "class_method_signature": "CheckpointRegularRepeatStrategy.init(final ISchedulerEntry entry, final IObject args)", "testcase": false, "constructor": false, "invocations": ["parse", "getValue", "setValue", "getState", "toString", "init"]}, "repository": {"repo_id": 52972024, "url": "https://github.com/SmartTools/smartactors-core", "language": "Java", "is_fork": false, "fork_count": 7, "stargazer_count": 17, "size": 58816, "license": "licensed"}}