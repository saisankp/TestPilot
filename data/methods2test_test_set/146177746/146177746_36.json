{"test_class": {"identifier": "SwaggerBasePathRewritingFilterTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private SwaggerBasePathRewritingFilter filter = new SwaggerBasePathRewritingFilter();", "modifier": "private", "type": "SwaggerBasePathRewritingFilter", "declarator": "filter = new SwaggerBasePathRewritingFilter()", "var_name": "filter"}], "file": "v5.1.0/gateway/src/test/java/com/mycompany/appstack/gateway/responserewriting/SwaggerBasePathRewritingFilterTest.java"}, "test_case": {"identifier": "run_on_valid_response", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void run_on_valid_response() throws Exception {\n        MockHttpServletRequest request = new MockHttpServletRequest(\"GET\", \"/service1\" + DEFAULT_URL);\n        RequestContext context = RequestContext.getCurrentContext();\n        context.setRequest(request);\n\n        MockHttpServletResponse response = new MockHttpServletResponse();\n        context.setResponseGZipped(false);\n        context.setResponse(response);\n\n        InputStream in = IOUtils.toInputStream(\"{\\\"basePath\\\":\\\"/\\\"}\", StandardCharsets.UTF_8);\n        context.setResponseDataStream(in);\n\n        filter.run();\n\n        assertEquals(\"UTF-8\", response.getCharacterEncoding());\n        assertEquals(\"{\\\"basePath\\\":\\\"/service1\\\"}\", context.getResponseBody());\n    }", "signature": "void run_on_valid_response()", "full_signature": "@Test public void run_on_valid_response()", "class_method_signature": "SwaggerBasePathRewritingFilterTest.run_on_valid_response()", "testcase": true, "constructor": false, "invocations": ["getCurrentContext", "setRequest", "setResponseGZipped", "setResponse", "toInputStream", "setResponseDataStream", "run", "assertEquals", "getCharacterEncoding", "assertEquals", "getResponseBody"]}, "focal_class": {"identifier": "SwaggerBasePathRewritingFilter", "superclass": "extends SendResponseFilter", "interfaces": "", "fields": [{"original_string": "private final Logger log = LoggerFactory.getLogger(SwaggerBasePathRewritingFilter.class);", "modifier": "private final", "type": "Logger", "declarator": "log = LoggerFactory.getLogger(SwaggerBasePathRewritingFilter.class)", "var_name": "log"}, {"original_string": "private ObjectMapper mapper = new ObjectMapper();", "modifier": "private", "type": "ObjectMapper", "declarator": "mapper = new ObjectMapper()", "var_name": "mapper"}], "methods": [{"identifier": "SwaggerBasePathRewritingFilter", "parameters": "()", "modifiers": "public", "return": "", "signature": " SwaggerBasePathRewritingFilter()", "full_signature": "public  SwaggerBasePathRewritingFilter()", "class_method_signature": "SwaggerBasePathRewritingFilter.SwaggerBasePathRewritingFilter()", "testcase": false, "constructor": true}, {"identifier": "filterType", "parameters": "()", "modifiers": "@Override public", "return": "String", "signature": "String filterType()", "full_signature": "@Override public String filterType()", "class_method_signature": "SwaggerBasePathRewritingFilter.filterType()", "testcase": false, "constructor": false}, {"identifier": "filterOrder", "parameters": "()", "modifiers": "@Override public", "return": "int", "signature": "int filterOrder()", "full_signature": "@Override public int filterOrder()", "class_method_signature": "SwaggerBasePathRewritingFilter.filterOrder()", "testcase": false, "constructor": false}, {"identifier": "shouldFilter", "parameters": "()", "modifiers": "@Override public", "return": "boolean", "signature": "boolean shouldFilter()", "full_signature": "@Override public boolean shouldFilter()", "class_method_signature": "SwaggerBasePathRewritingFilter.shouldFilter()", "testcase": false, "constructor": false}, {"identifier": "run", "parameters": "()", "modifiers": "@Override public", "return": "Object", "signature": "Object run()", "full_signature": "@Override public Object run()", "class_method_signature": "SwaggerBasePathRewritingFilter.run()", "testcase": false, "constructor": false}, {"identifier": "rewriteBasePath", "parameters": "(RequestContext context)", "modifiers": "@SuppressWarnings(\"unchecked\") private", "return": "String", "signature": "String rewriteBasePath(RequestContext context)", "full_signature": "@SuppressWarnings(\"unchecked\") private String rewriteBasePath(RequestContext context)", "class_method_signature": "SwaggerBasePathRewritingFilter.rewriteBasePath(RequestContext context)", "testcase": false, "constructor": false}], "file": "v5.1.0/gateway/src/main/java/com/mycompany/appstack/gateway/responserewriting/SwaggerBasePathRewritingFilter.java"}, "focal_method": {"identifier": "run", "parameters": "()", "modifiers": "@Override public", "return": "Object", "body": "@Override\n    public Object run() {\n        RequestContext context = RequestContext.getCurrentContext();\n\n        if (!context.getResponseGZipped()) {\n            context.getResponse().setCharacterEncoding(\"UTF-8\");\n        }\n\n        String rewrittenResponse = rewriteBasePath(context);\n        context.setResponseBody(rewrittenResponse);\n        return null;\n    }", "signature": "Object run()", "full_signature": "@Override public Object run()", "class_method_signature": "SwaggerBasePathRewritingFilter.run()", "testcase": false, "constructor": false, "invocations": ["getCurrentContext", "getResponseGZipped", "setCharacterEncoding", "getResponse", "rewriteBasePath", "setResponseBody"]}, "repository": {"repo_id": 146177746, "url": "https://github.com/yorkwu1977/jhi-example-appstack", "language": "Java", "is_fork": false, "fork_count": 1, "stargazer_count": 8, "size": 1017, "license": "licensed"}}