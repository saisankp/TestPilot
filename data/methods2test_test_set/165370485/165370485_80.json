{"test_class": {"identifier": "AdminConsoleControllerTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final String ENTITY = \"test@vysper.org\";", "modifier": "private static final", "type": "String", "declarator": "ENTITY = \"test@vysper.org\"", "var_name": "ENTITY"}, {"original_string": "private static final String PASSWORD = \"password\";", "modifier": "private static final", "type": "String", "declarator": "PASSWORD = \"password\"", "var_name": "PASSWORD"}, {"original_string": "private ExtendedXMPPConnection connection = mock(ExtendedXMPPConnection.class);", "modifier": "private", "type": "ExtendedXMPPConnection", "declarator": "connection = mock(ExtendedXMPPConnection.class)", "var_name": "connection"}, {"original_string": "private AdminConsoleController controller = new AdminConsoleController(null) {\n        @Override\n        protected ExtendedXMPPConnection createXMPPConnection() {\n            return connection;\n        }\n    };", "modifier": "private", "type": "AdminConsoleController", "declarator": "controller = new AdminConsoleController(null) {\n        @Override\n        protected ExtendedXMPPConnection createXMPPConnection() {\n            return connection;\n        }\n    }", "var_name": "controller"}, {"original_string": "private HttpServletRequest request = mock(HttpServletRequest.class);", "modifier": "private", "type": "HttpServletRequest", "declarator": "request = mock(HttpServletRequest.class)", "var_name": "request"}, {"original_string": "private MockHttpSession session = new MockHttpSession();", "modifier": "private", "type": "MockHttpSession", "declarator": "session = new MockHttpSession()", "var_name": "session"}], "file": "server/admin-console/src/test/java/org/apache/vysper/console/AdminConsoleControllerTest.java"}, "test_case": {"identifier": "submitCommandNotAuthenticated", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void submitCommandNotAuthenticated() throws XMPPException {\n        ModelAndView mav = controller.submitCommand(\"foo\", request, session);\n        \n        Assert.assertEquals(\"index\", mav.getViewName());\n        Assert.assertNull(mav.getModel().get(\"authenticated\"));\n    }", "signature": "void submitCommandNotAuthenticated()", "full_signature": "@Test public void submitCommandNotAuthenticated()", "class_method_signature": "AdminConsoleControllerTest.submitCommandNotAuthenticated()", "testcase": true, "constructor": false, "invocations": ["submitCommand", "assertEquals", "getViewName", "assertNull", "get", "getModel"]}, "focal_class": {"identifier": "AdminConsoleController", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final String MODEL_AUTHENTICATED = \"authenticated\";", "modifier": "private static final", "type": "String", "declarator": "MODEL_AUTHENTICATED = \"authenticated\"", "var_name": "MODEL_AUTHENTICATED"}, {"original_string": "public static final String SESSION_ATTRIBUTE = \"smack.client\";", "modifier": "public static final", "type": "String", "declarator": "SESSION_ATTRIBUTE = \"smack.client\"", "var_name": "SESSION_ATTRIBUTE"}, {"original_string": "public static final String SESSION_FIELD = \"vysper-admingui-sessionid\";", "modifier": "public static final", "type": "String", "declarator": "SESSION_FIELD = \"vysper-admingui-sessionid\"", "var_name": "SESSION_FIELD"}, {"original_string": "public static final Map<String, String> COMMANDS = new HashMap<String, String>();", "modifier": "public static final", "type": "Map<String, String>", "declarator": "COMMANDS = new HashMap<String, String>()", "var_name": "COMMANDS"}, {"original_string": "private XMPPTCPConnectionConfiguration connectionConfiguration;", "modifier": "private", "type": "XMPPTCPConnectionConfiguration", "declarator": "connectionConfiguration", "var_name": "connectionConfiguration"}, {"original_string": "private AdHocCommandDataBuilder adHocCommandDataBuilder = new AdHocCommandDataBuilder();", "modifier": "private", "type": "AdHocCommandDataBuilder", "declarator": "adHocCommandDataBuilder = new AdHocCommandDataBuilder()", "var_name": "adHocCommandDataBuilder"}, {"original_string": "private HtmlFormBuilder htmlFormBuilder = new HtmlFormBuilder();", "modifier": "private", "type": "HtmlFormBuilder", "declarator": "htmlFormBuilder = new HtmlFormBuilder()", "var_name": "htmlFormBuilder"}], "methods": [{"identifier": "AdminConsoleController", "parameters": "(XMPPTCPConnectionConfiguration connectionConfiguration)", "modifiers": "@Autowired public", "return": "", "signature": " AdminConsoleController(XMPPTCPConnectionConfiguration connectionConfiguration)", "full_signature": "@Autowired public  AdminConsoleController(XMPPTCPConnectionConfiguration connectionConfiguration)", "class_method_signature": "AdminConsoleController.AdminConsoleController(XMPPTCPConnectionConfiguration connectionConfiguration)", "testcase": false, "constructor": true}, {"identifier": "index", "parameters": "(HttpSession session)", "modifiers": "@RequestMapping(\"/\") public", "return": "ModelAndView", "signature": "ModelAndView index(HttpSession session)", "full_signature": "@RequestMapping(\"/\") public ModelAndView index(HttpSession session)", "class_method_signature": "AdminConsoleController.index(HttpSession session)", "testcase": false, "constructor": false}, {"identifier": "getUserName", "parameters": "(XMPPConnection client)", "modifiers": "private", "return": "String", "signature": "String getUserName(XMPPConnection client)", "full_signature": "private String getUserName(XMPPConnection client)", "class_method_signature": "AdminConsoleController.getUserName(XMPPConnection client)", "testcase": false, "constructor": false}, {"identifier": "command", "parameters": "(@PathVariable(\"command\") String command, HttpSession session)", "modifiers": "@RequestMapping(value = \"/{command}\", method = RequestMethod.GET) public", "return": "ModelAndView", "signature": "ModelAndView command(@PathVariable(\"command\") String command, HttpSession session)", "full_signature": "@RequestMapping(value = \"/{command}\", method = RequestMethod.GET) public ModelAndView command(@PathVariable(\"command\") String command, HttpSession session)", "class_method_signature": "AdminConsoleController.command(@PathVariable(\"command\") String command, HttpSession session)", "testcase": false, "constructor": false}, {"identifier": "submitCommand", "parameters": "(@PathVariable(\"command\") String command, HttpServletRequest request,\n            HttpSession session)", "modifiers": "@RequestMapping(value = \"/{command}\", method = RequestMethod.POST) public", "return": "ModelAndView", "signature": "ModelAndView submitCommand(@PathVariable(\"command\") String command, HttpServletRequest request,\n            HttpSession session)", "full_signature": "@RequestMapping(value = \"/{command}\", method = RequestMethod.POST) public ModelAndView submitCommand(@PathVariable(\"command\") String command, HttpServletRequest request,\n            HttpSession session)", "class_method_signature": "AdminConsoleController.submitCommand(@PathVariable(\"command\") String command, HttpServletRequest request,\n            HttpSession session)", "testcase": false, "constructor": false}, {"identifier": "sendRequestAndGenerateForm", "parameters": "(String command, ExtendedXMPPConnection client,\n            AdHocCommandData requestCommand)", "modifiers": "private", "return": "ModelAndView", "signature": "ModelAndView sendRequestAndGenerateForm(String command, ExtendedXMPPConnection client,\n            AdHocCommandData requestCommand)", "full_signature": "private ModelAndView sendRequestAndGenerateForm(String command, ExtendedXMPPConnection client,\n            AdHocCommandData requestCommand)", "class_method_signature": "AdminConsoleController.sendRequestAndGenerateForm(String command, ExtendedXMPPConnection client,\n            AdHocCommandData requestCommand)", "testcase": false, "constructor": false}, {"identifier": "login", "parameters": "()", "modifiers": "private", "return": "ModelAndView", "signature": "ModelAndView login()", "full_signature": "private ModelAndView login()", "class_method_signature": "AdminConsoleController.login()", "testcase": false, "constructor": false}, {"identifier": "login", "parameters": "(String msg)", "modifiers": "private", "return": "ModelAndView", "signature": "ModelAndView login(String msg)", "full_signature": "private ModelAndView login(String msg)", "class_method_signature": "AdminConsoleController.login(String msg)", "testcase": false, "constructor": false}, {"identifier": "createXMPPConnection", "parameters": "()", "modifiers": "protected", "return": "ExtendedXMPPConnection", "signature": "ExtendedXMPPConnection createXMPPConnection()", "full_signature": "protected ExtendedXMPPConnection createXMPPConnection()", "class_method_signature": "AdminConsoleController.createXMPPConnection()", "testcase": false, "constructor": false}, {"identifier": "login", "parameters": "(@RequestParam(\"username\") String username, @RequestParam(\"password\") String password,\n            HttpSession session)", "modifiers": "@RequestMapping(value = \"/login\", method = RequestMethod.POST) public", "return": "ModelAndView", "signature": "ModelAndView login(@RequestParam(\"username\") String username, @RequestParam(\"password\") String password,\n            HttpSession session)", "full_signature": "@RequestMapping(value = \"/login\", method = RequestMethod.POST) public ModelAndView login(@RequestParam(\"username\") String username, @RequestParam(\"password\") String password,\n            HttpSession session)", "class_method_signature": "AdminConsoleController.login(@RequestParam(\"username\") String username, @RequestParam(\"password\") String password,\n            HttpSession session)", "testcase": false, "constructor": false}, {"identifier": "logout", "parameters": "(HttpSession session)", "modifiers": "@RequestMapping(value = \"/logout\") public", "return": "ModelAndView", "signature": "ModelAndView logout(HttpSession session)", "full_signature": "@RequestMapping(value = \"/logout\") public ModelAndView logout(HttpSession session)", "class_method_signature": "AdminConsoleController.logout(HttpSession session)", "testcase": false, "constructor": false}], "file": "server/admin-console/src/main/java/org/apache/vysper/console/AdminConsoleController.java"}, "focal_method": {"identifier": "submitCommand", "parameters": "(@PathVariable(\"command\") String command, HttpServletRequest request,\n            HttpSession session)", "modifiers": "@RequestMapping(value = \"/{command}\", method = RequestMethod.POST) public", "return": "ModelAndView", "body": "@RequestMapping(value = \"/{command}\", method = RequestMethod.POST)\n    public ModelAndView submitCommand(@PathVariable(\"command\") String command, HttpServletRequest request,\n            HttpSession session) throws XMPPException {\n        ExtendedXMPPConnection client = (ExtendedXMPPConnection) session.getAttribute(SESSION_ATTRIBUTE);\n        if (client == null) {\n            // login\n            return login();\n        } else if (!client.isConnected()) {\n            return login(\"Disconnected from XMPP server, please log in again\");\n        } else {\n            @SuppressWarnings(\"unchecked\")\n            AdHocCommandData requestCommand = adHocCommandDataBuilder.build(request.getParameterMap());\n            requestCommand.setType(Type.set);\n            requestCommand.setFrom(client.getUser());\n            requestCommand.setTo(client.getXMPPServiceDomain());\n            requestCommand.setNode(\"http://jabber.org/protocol/admin#\" + command);\n\n            return sendRequestAndGenerateForm(command, client, requestCommand);\n        }\n    }", "signature": "ModelAndView submitCommand(@PathVariable(\"command\") String command, HttpServletRequest request,\n            HttpSession session)", "full_signature": "@RequestMapping(value = \"/{command}\", method = RequestMethod.POST) public ModelAndView submitCommand(@PathVariable(\"command\") String command, HttpServletRequest request,\n            HttpSession session)", "class_method_signature": "AdminConsoleController.submitCommand(@PathVariable(\"command\") String command, HttpServletRequest request,\n            HttpSession session)", "testcase": false, "constructor": false, "invocations": ["getAttribute", "login", "isConnected", "login", "build", "getParameterMap", "setType", "setFrom", "getUser", "setTo", "getXMPPServiceDomain", "setNode", "sendRequestAndGenerateForm"]}, "repository": {"repo_id": 165370485, "url": "https://github.com/apache/mina-vysper", "language": "Java", "is_fork": false, "fork_count": 6, "stargazer_count": 8, "size": 29305, "license": "licensed"}}