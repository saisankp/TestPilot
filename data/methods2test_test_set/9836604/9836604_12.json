{"test_class": {"identifier": "DefaultUserLoggedStatusStoreTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private DefaultUserLoggedStatusStore defaultUserLoggedStatusStore;", "modifier": "private", "type": "DefaultUserLoggedStatusStore", "declarator": "defaultUserLoggedStatusStore", "var_name": "defaultUserLoggedStatusStore"}], "file": "ki4so-core/src/test/java/com/github/ebnew/ki4so/core/authentication/status/DefaultUserLoggedStatusStoreTest.java"}, "test_case": {"identifier": "testAddUserLoggedStatus", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n\tpublic void testAddUserLoggedStatus() {\n\t\t//\u6d4b\u8bd5\u52a0\u5165\u7a7a\u5bf9\u8c61\u7684\u60c5\u51b5\u3002\n\t\tdefaultUserLoggedStatusStore.addUserLoggedStatus(null);\n\t\t//\u6821\u9a8c\u7ed3\u679c\u3002\n\t\t//\u6ca1\u6709\u6570\u636e\u3002\n\t\tAssert.assertEquals(0, defaultUserLoggedStatusStore.getLoggedStatus().size());\n\t\t//\u6ca1\u6709\u6570\u636e\u3002\n\t\tAssert.assertEquals(0, defaultUserLoggedStatusStore.getUserIdIndexMap().size());\n\t\t\n\t\t//\u6d4b\u8bd5\u52a0\u5165\u5bf9\u8c61\u4e2d\u6709\u4e0d\u5408\u6cd5\u7684\u5c5e\u6027\u503c\u7684\u60c5\u51b5\u3002\n\t\tString userId= \"test\";\n\t\tUserLoggedStatus userLoggedStatus = new UserLoggedStatus(userId, \"\");\n\t\tdefaultUserLoggedStatusStore.addUserLoggedStatus(userLoggedStatus);\n\t\t//\u6821\u9a8c\u7ed3\u679c\u3002\n\t\t//\u6ca1\u6709\u6570\u636e\u3002\n\t\tAssert.assertEquals(0, defaultUserLoggedStatusStore.getLoggedStatus().size());\n\t\t//\u6ca1\u6709\u6570\u636e\u3002\n\t\tAssert.assertEquals(0, defaultUserLoggedStatusStore.getUserIdIndexMap().size());\n\t\t\n\t\tuserLoggedStatus = new UserLoggedStatus(\"\", \"\");\n\t\tdefaultUserLoggedStatusStore.addUserLoggedStatus(userLoggedStatus);\n\t\t//\u6821\u9a8c\u7ed3\u679c\u3002\n\t\t//\u6ca1\u6709\u6570\u636e\u3002\n\t\tAssert.assertEquals(0, defaultUserLoggedStatusStore.getLoggedStatus().size());\n\t\t//\u6ca1\u6709\u6570\u636e\u3002\n\t\tAssert.assertEquals(0, defaultUserLoggedStatusStore.getUserIdIndexMap().size());\n\t\t\n\t\t//\u6d4b\u8bd5\u6b63\u5e38\u6570\u636e\u7684\u60c5\u51b5\u3002\n\t\tString appId = \"1001\";\n\t\tuserLoggedStatus = new UserLoggedStatus(userId, appId);\n\t\tdefaultUserLoggedStatusStore.addUserLoggedStatus(userLoggedStatus);\n\t\t//\u6821\u9a8c\u7ed3\u679c\u3002\n\t\t//\u6709\u6570\u636e\u3002\n\t\tAssert.assertEquals(1, defaultUserLoggedStatusStore.getLoggedStatus().size());\n\t\t//\u6709\u6570\u636e\u3002\n\t\tAssert.assertEquals(1, defaultUserLoggedStatusStore.getUserIdIndexMap().size());\n\t\tAssert.assertEquals(userId, defaultUserLoggedStatusStore.findUserLoggedStatus(userId).get(0).getUserId());\n\t\t\n\t}", "signature": "void testAddUserLoggedStatus()", "full_signature": "@Test public void testAddUserLoggedStatus()", "class_method_signature": "DefaultUserLoggedStatusStoreTest.testAddUserLoggedStatus()", "testcase": true, "constructor": false, "invocations": ["addUserLoggedStatus", "assertEquals", "size", "getLoggedStatus", "assertEquals", "size", "getUserIdIndexMap", "addUserLoggedStatus", "assertEquals", "size", "getLoggedStatus", "assertEquals", "size", "getUserIdIndexMap", "addUserLoggedStatus", "assertEquals", "size", "getLoggedStatus", "assertEquals", "size", "getUserIdIndexMap", "addUserLoggedStatus", "assertEquals", "size", "getLoggedStatus", "assertEquals", "size", "getUserIdIndexMap", "assertEquals", "getUserId", "get", "findUserLoggedStatus"]}, "focal_class": {"identifier": "DefaultUserLoggedStatusStore", "superclass": "", "interfaces": "implements UserLoggedStatusStore", "fields": [{"original_string": "private Set<UserLoggedStatus> loggedStatus = new HashSet<UserLoggedStatus>();", "modifier": "private", "type": "Set<UserLoggedStatus>", "declarator": "loggedStatus = new HashSet<UserLoggedStatus>()", "var_name": "loggedStatus"}, {"original_string": "private Map<String, List<UserLoggedStatus>> userIdIndexMap = new HashMap<String, List<UserLoggedStatus>>();", "modifier": "private", "type": "Map<String, List<UserLoggedStatus>>", "declarator": "userIdIndexMap = new HashMap<String, List<UserLoggedStatus>>()", "var_name": "userIdIndexMap"}], "methods": [{"identifier": "getLoggedStatus", "parameters": "()", "modifiers": "public", "return": "Set<UserLoggedStatus>", "signature": "Set<UserLoggedStatus> getLoggedStatus()", "full_signature": "public Set<UserLoggedStatus> getLoggedStatus()", "class_method_signature": "DefaultUserLoggedStatusStore.getLoggedStatus()", "testcase": false, "constructor": false}, {"identifier": "getUserIdIndexMap", "parameters": "()", "modifiers": "public", "return": "Map<String, List<UserLoggedStatus>>", "signature": "Map<String, List<UserLoggedStatus>> getUserIdIndexMap()", "full_signature": "public Map<String, List<UserLoggedStatus>> getUserIdIndexMap()", "class_method_signature": "DefaultUserLoggedStatusStore.getUserIdIndexMap()", "testcase": false, "constructor": false}, {"identifier": "addUserLoggedStatus", "parameters": "(UserLoggedStatus userLoggedStatus)", "modifiers": "@Override public synchronized", "return": "void", "signature": "void addUserLoggedStatus(UserLoggedStatus userLoggedStatus)", "full_signature": "@Override public synchronized void addUserLoggedStatus(UserLoggedStatus userLoggedStatus)", "class_method_signature": "DefaultUserLoggedStatusStore.addUserLoggedStatus(UserLoggedStatus userLoggedStatus)", "testcase": false, "constructor": false}, {"identifier": "deleteUserLoggedStatus", "parameters": "(String userId, String appId)", "modifiers": "@Override public synchronized", "return": "void", "signature": "void deleteUserLoggedStatus(String userId, String appId)", "full_signature": "@Override public synchronized void deleteUserLoggedStatus(String userId, String appId)", "class_method_signature": "DefaultUserLoggedStatusStore.deleteUserLoggedStatus(String userId, String appId)", "testcase": false, "constructor": false}, {"identifier": "clearUpUserLoggedStatus", "parameters": "(String userId)", "modifiers": "@Override public synchronized", "return": "void", "signature": "void clearUpUserLoggedStatus(String userId)", "full_signature": "@Override public synchronized void clearUpUserLoggedStatus(String userId)", "class_method_signature": "DefaultUserLoggedStatusStore.clearUpUserLoggedStatus(String userId)", "testcase": false, "constructor": false}, {"identifier": "findUserLoggedStatus", "parameters": "(String userId)", "modifiers": "@Override public", "return": "List<UserLoggedStatus>", "signature": "List<UserLoggedStatus> findUserLoggedStatus(String userId)", "full_signature": "@Override public List<UserLoggedStatus> findUserLoggedStatus(String userId)", "class_method_signature": "DefaultUserLoggedStatusStore.findUserLoggedStatus(String userId)", "testcase": false, "constructor": false}], "file": "ki4so-core/src/main/java/com/github/ebnew/ki4so/core/authentication/status/DefaultUserLoggedStatusStore.java"}, "focal_method": {"identifier": "addUserLoggedStatus", "parameters": "(UserLoggedStatus userLoggedStatus)", "modifiers": "@Override public synchronized", "return": "void", "body": "@Override\n\tpublic synchronized void addUserLoggedStatus(UserLoggedStatus userLoggedStatus) {\n\t\t//\u68c0\u67e5\u6570\u636e\u7684\u5408\u6cd5\u6027\u3002\n\t\tif(userLoggedStatus!=null \n\t\t\t\t&& !StringUtils.isEmpty(userLoggedStatus.getAppId())\n\t\t\t\t&& !StringUtils.isEmpty(userLoggedStatus.getUserId())\n\t\t\t\t){\n\t\t\t//\u907f\u514d\u6570\u636e\u4e3a\u7a7a\u3002\n\t\t\tif(userLoggedStatus.getLoggedDate()==null){\n\t\t\t\tuserLoggedStatus.setLoggedDate(new Date());\n\t\t\t}\n\t\t\tthis.loggedStatus.add(userLoggedStatus);\n\t\t\tList<UserLoggedStatus> list = this.userIdIndexMap.get(userLoggedStatus.getUserId());\n\t\t\tif(list==null){\n\t\t\t\tlist = new ArrayList<UserLoggedStatus>();\n\t\t\t\tthis.userIdIndexMap.put(userLoggedStatus.getUserId(), list);\n\t\t\t}\n\t\t\tlist.add(userLoggedStatus);\n\t\t}\n\t}", "signature": "void addUserLoggedStatus(UserLoggedStatus userLoggedStatus)", "full_signature": "@Override public synchronized void addUserLoggedStatus(UserLoggedStatus userLoggedStatus)", "class_method_signature": "DefaultUserLoggedStatusStore.addUserLoggedStatus(UserLoggedStatus userLoggedStatus)", "testcase": false, "constructor": false, "invocations": ["isEmpty", "getAppId", "isEmpty", "getUserId", "getLoggedDate", "setLoggedDate", "add", "get", "getUserId", "put", "getUserId", "add"]}, "repository": {"repo_id": 9836604, "url": "https://github.com/ebnew/ki4so", "language": "Java", "is_fork": false, "fork_count": 84, "stargazer_count": 100, "size": 4421, "license": "licensed"}}