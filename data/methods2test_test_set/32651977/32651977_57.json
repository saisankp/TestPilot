{"test_class": {"identifier": "JsonMessageGeneratorTest", "superclass": "extends AbstractJsonGeneratorTest", "interfaces": "", "fields": [{"original_string": "JsonMessageGenerator messageGenerator;", "modifier": "", "type": "JsonMessageGenerator", "declarator": "messageGenerator", "var_name": "messageGenerator"}], "file": "protostuff-generator/src/test/java/io/protostuff/generator/html/json/message/JsonMessageGeneratorTest.java"}, "test_case": {"identifier": "map", "parameters": "()", "modifiers": "@Test", "return": "void", "body": "@Test\n    void map() {\n        compile(messageGenerator, \"protostuff_unittest/map.proto\");\n        Assertions.assertEquals(2, json.size());\n        Assertions.assertEquals(ImmutableMessageDescriptor.builder()\n                .name(\"A\")\n                .type(NodeType.MESSAGE)\n                .canonicalName(\"protostuff_unittest.A\")\n                .description(\"\")\n                .addFields(ImmutableMessageField.builder()\n                        .name(\"map\")\n                        .typeId(\"protostuff_unittest.A.map_entry\")\n                        .modifier(MessageFieldModifier.REPEATED)\n                        .tag(1)\n                        .map(true)\n                        .mapKeyTypeId(\"int32\")\n                        .mapValueTypeId(\"int32\")\n                        .description(\"\")\n                        .build())\n                .build(), json.get(0));\n        Assertions.assertEquals(ImmutableMessageDescriptor.builder()\n                .name(\"map_entry\")\n                .type(NodeType.MESSAGE)\n                .canonicalName(\"protostuff_unittest.A.map_entry\")\n                .description(\"\")\n                .addFields(ImmutableMessageField.builder()\n                        .name(\"key\")\n                        .typeId(\"int32\")\n                        .modifier(MessageFieldModifier.OPTIONAL)\n                        .tag(1)\n                        .map(false)\n                        .description(\"\")\n                        .build())\n                .addFields(ImmutableMessageField.builder()\n                        .name(\"value\")\n                        .typeId(\"int32\")\n                        .modifier(MessageFieldModifier.OPTIONAL)\n                        .tag(2)\n                        .map(false)\n                        .description(\"\")\n                        .build())\n                .putOptions(\"map_entry\", true)\n                .addUsages(ImmutableUsageItem.builder()\n                        .ref(\"protostuff_unittest.A\")\n                        .type(UsageType.MESSAGE)\n                        .build())\n                .build(), json.get(1));\n    }", "signature": "void map()", "full_signature": "@Test void map()", "class_method_signature": "JsonMessageGeneratorTest.map()", "testcase": true, "constructor": false, "invocations": ["compile", "assertEquals", "size", "assertEquals", "build", "addFields", "description", "canonicalName", "type", "name", "builder", "build", "description", "mapValueTypeId", "mapKeyTypeId", "map", "tag", "modifier", "typeId", "name", "builder", "get", "assertEquals", "build", "addUsages", "putOptions", "addFields", "addFields", "description", "canonicalName", "type", "name", "builder", "build", "description", "map", "tag", "modifier", "typeId", "name", "builder", "build", "description", "map", "tag", "modifier", "typeId", "name", "builder", "build", "type", "ref", "builder", "get"]}, "focal_class": {"identifier": "JsonMessageGenerator", "superclass": "extends AbstractJsonGenerator", "interfaces": "", "fields": [{"original_string": "private final MarkdownProcessor markdownProcessor;", "modifier": "private final", "type": "MarkdownProcessor", "declarator": "markdownProcessor", "var_name": "markdownProcessor"}], "methods": [{"identifier": "JsonMessageGenerator", "parameters": "(OutputStreamFactory outputStreamFactory, MarkdownProcessor markdownProcessor)", "modifiers": "@Inject public", "return": "", "signature": " JsonMessageGenerator(OutputStreamFactory outputStreamFactory, MarkdownProcessor markdownProcessor)", "full_signature": "@Inject public  JsonMessageGenerator(OutputStreamFactory outputStreamFactory, MarkdownProcessor markdownProcessor)", "class_method_signature": "JsonMessageGenerator.JsonMessageGenerator(OutputStreamFactory outputStreamFactory, MarkdownProcessor markdownProcessor)", "testcase": false, "constructor": true}, {"identifier": "compile", "parameters": "(Module module)", "modifiers": "@Override public", "return": "void", "signature": "void compile(Module module)", "full_signature": "@Override public void compile(Module module)", "class_method_signature": "JsonMessageGenerator.compile(Module module)", "testcase": false, "constructor": false}, {"identifier": "rec", "parameters": "(Module module, UserTypeContainer container)", "modifiers": "private", "return": "void", "signature": "void rec(Module module, UserTypeContainer container)", "full_signature": "private void rec(Module module, UserTypeContainer container)", "class_method_signature": "JsonMessageGenerator.rec(Module module, UserTypeContainer container)", "testcase": false, "constructor": false}, {"identifier": "process", "parameters": "(Module module, Message message)", "modifiers": "private", "return": "void", "signature": "void process(Module module, Message message)", "full_signature": "private void process(Module module, Message message)", "class_method_signature": "JsonMessageGenerator.process(Module module, Message message)", "testcase": false, "constructor": false}, {"identifier": "createFieldDescription", "parameters": "(Field field)", "modifiers": "private", "return": "String", "signature": "String createFieldDescription(Field field)", "full_signature": "private String createFieldDescription(Field field)", "class_method_signature": "JsonMessageGenerator.createFieldDescription(Field field)", "testcase": false, "constructor": false}, {"identifier": "copyDescriptionFromFieldType", "parameters": "(Field field)", "modifiers": "private", "return": "String", "signature": "String copyDescriptionFromFieldType(Field field)", "full_signature": "private String copyDescriptionFromFieldType(Field field)", "class_method_signature": "JsonMessageGenerator.copyDescriptionFromFieldType(Field field)", "testcase": false, "constructor": false}, {"identifier": "getMapKeyType", "parameters": "(Field field)", "modifiers": "private", "return": "String", "signature": "String getMapKeyType(Field field)", "full_signature": "private String getMapKeyType(Field field)", "class_method_signature": "JsonMessageGenerator.getMapKeyType(Field field)", "testcase": false, "constructor": false}, {"identifier": "getMapValueType", "parameters": "(Field field)", "modifiers": "private", "return": "String", "signature": "String getMapValueType(Field field)", "full_signature": "private String getMapValueType(Field field)", "class_method_signature": "JsonMessageGenerator.getMapValueType(Field field)", "testcase": false, "constructor": false}, {"identifier": "getModifier", "parameters": "(Field field)", "modifiers": "private", "return": "MessageFieldModifier", "signature": "MessageFieldModifier getModifier(Field field)", "full_signature": "private MessageFieldModifier getModifier(Field field)", "class_method_signature": "JsonMessageGenerator.getModifier(Field field)", "testcase": false, "constructor": false}], "file": "protostuff-generator/src/main/java/io/protostuff/generator/html/json/message/JsonMessageGenerator.java"}, "focal_method": {"identifier": "compile", "parameters": "(Module module)", "modifiers": "@Override public", "return": "void", "body": "@Override\n    public void compile(Module module) {\n        module.getProtos()\n                .forEach(proto -> rec(module, proto));\n    }", "signature": "void compile(Module module)", "full_signature": "@Override public void compile(Module module)", "class_method_signature": "JsonMessageGenerator.compile(Module module)", "testcase": false, "constructor": false, "invocations": ["forEach", "getProtos", "rec"]}, "repository": {"repo_id": 32651977, "url": "https://github.com/protostuff/protostuff-compiler", "language": "Java", "is_fork": false, "fork_count": 20, "stargazer_count": 30, "size": 1539, "license": "licensed"}}