{"test_class": {"identifier": "StorageUnitStatusChangeMessageBuilderTest", "superclass": "extends AbstractNotificationMessageBuilderTestHelper", "interfaces": "", "fields": [{"original_string": "@Autowired\n    private StorageUnitStatusChangeMessageBuilder storageUnitStatusChangeMessageBuilder;", "modifier": "@Autowired\n    private", "type": "StorageUnitStatusChangeMessageBuilder", "declarator": "storageUnitStatusChangeMessageBuilder", "var_name": "storageUnitStatusChangeMessageBuilder"}], "file": "herd-code/herd-service/src/test/java/org/finra/herd/service/helper/notification/StorageUnitStatusChangeMessageBuilderTest.java"}, "test_case": {"identifier": "testGetStorageUnitStatusChangeMessageVelocityContextMap", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testGetStorageUnitStatusChangeMessageVelocityContextMap()\n    {\n        // Create a business object data key with values that require JSON and XML escaping.\n        BusinessObjectDataKey businessObjectDataKey =\n            new BusinessObjectDataKey(BDEF_NAMESPACE + SUFFIX_UNESCAPED, BDEF_NAME + SUFFIX_UNESCAPED, FORMAT_USAGE_CODE + SUFFIX_UNESCAPED,\n                FORMAT_FILE_TYPE_CODE + SUFFIX_UNESCAPED, FORMAT_VERSION, PARTITION_VALUE + SUFFIX_UNESCAPED, Lists\n                .newArrayList(SUBPARTITION_VALUES.get(0) + SUFFIX_UNESCAPED, SUBPARTITION_VALUES.get(1) + SUFFIX_UNESCAPED,\n                    SUBPARTITION_VALUES.get(2) + SUFFIX_UNESCAPED, SUBPARTITION_VALUES.get(3) + SUFFIX_UNESCAPED), DATA_VERSION);\n\n        // Call the method under test.\n        Map<String, Object> result = storageUnitStatusChangeMessageBuilder.getNotificationMessageVelocityContextMap(\n            new StorageUnitStatusChangeNotificationEvent(businessObjectDataKey, STORAGE_NAME + SUFFIX_UNESCAPED, STORAGE_UNIT_STATUS_2 + SUFFIX_UNESCAPED,\n                STORAGE_UNIT_STATUS + SUFFIX_UNESCAPED));\n\n        // Create an expected JSON escaped business object data key.\n        BusinessObjectDataKey expectedBusinessObjectDataKeyWithJson =\n            new BusinessObjectDataKey(BDEF_NAMESPACE + SUFFIX_ESCAPED_JSON, BDEF_NAME + SUFFIX_ESCAPED_JSON, FORMAT_USAGE_CODE + SUFFIX_ESCAPED_JSON,\n                FORMAT_FILE_TYPE_CODE + SUFFIX_ESCAPED_JSON, FORMAT_VERSION, PARTITION_VALUE + SUFFIX_ESCAPED_JSON, Lists\n                .newArrayList(SUBPARTITION_VALUES.get(0) + SUFFIX_ESCAPED_JSON, SUBPARTITION_VALUES.get(1) + SUFFIX_ESCAPED_JSON,\n                    SUBPARTITION_VALUES.get(2) + SUFFIX_ESCAPED_JSON, SUBPARTITION_VALUES.get(3) + SUFFIX_ESCAPED_JSON), DATA_VERSION);\n\n        // Create an expected XML escaped business object data key.\n        BusinessObjectDataKey expectedBusinessObjectDataKeyWithXml =\n            new BusinessObjectDataKey(BDEF_NAMESPACE + SUFFIX_ESCAPED_XML, BDEF_NAME + SUFFIX_ESCAPED_XML, FORMAT_USAGE_CODE + SUFFIX_ESCAPED_XML,\n                FORMAT_FILE_TYPE_CODE + SUFFIX_ESCAPED_XML, FORMAT_VERSION, PARTITION_VALUE + SUFFIX_ESCAPED_XML, Lists\n                .newArrayList(SUBPARTITION_VALUES.get(0) + SUFFIX_ESCAPED_XML, SUBPARTITION_VALUES.get(1) + SUFFIX_ESCAPED_XML,\n                    SUBPARTITION_VALUES.get(2) + SUFFIX_ESCAPED_XML, SUBPARTITION_VALUES.get(3) + SUFFIX_ESCAPED_XML), DATA_VERSION);\n\n        // Validate the results.\n        assertEquals(15, CollectionUtils.size(result));\n\n        assertEquals(businessObjectDataKey, result.get(\"businessObjectDataKey\"));\n        assertEquals(expectedBusinessObjectDataKeyWithJson, result.get(\"businessObjectDataKeyWithJson\"));\n        assertEquals(expectedBusinessObjectDataKeyWithXml, result.get(\"businessObjectDataKeyWithXml\"));\n\n        assertEquals(STORAGE_NAME + SUFFIX_UNESCAPED, result.get(\"storageName\"));\n        assertEquals(STORAGE_NAME + SUFFIX_ESCAPED_JSON, result.get(\"storageNameWithJson\"));\n        assertEquals(STORAGE_NAME + SUFFIX_ESCAPED_XML, result.get(\"storageNameWithXml\"));\n\n        assertEquals(STORAGE_UNIT_STATUS_2 + SUFFIX_UNESCAPED, result.get(\"newStorageUnitStatus\"));\n        assertEquals(STORAGE_UNIT_STATUS_2 + SUFFIX_ESCAPED_JSON, result.get(\"newStorageUnitStatusWithJson\"));\n        assertEquals(STORAGE_UNIT_STATUS_2 + SUFFIX_ESCAPED_XML, result.get(\"newStorageUnitStatusWithXml\"));\n\n        assertEquals(STORAGE_UNIT_STATUS + SUFFIX_UNESCAPED, result.get(\"oldStorageUnitStatus\"));\n        assertEquals(STORAGE_UNIT_STATUS + SUFFIX_ESCAPED_JSON, result.get(\"oldStorageUnitStatusWithJson\"));\n        assertEquals(STORAGE_UNIT_STATUS + SUFFIX_ESCAPED_XML, result.get(\"oldStorageUnitStatusWithXml\"));\n\n        assertEquals(BDEF_NAMESPACE + SUFFIX_UNESCAPED, result.get(\"namespace\"));\n        assertEquals(BDEF_NAMESPACE + SUFFIX_ESCAPED_JSON, result.get(\"namespaceWithJson\"));\n        assertEquals(BDEF_NAMESPACE + SUFFIX_ESCAPED_XML, result.get(\"namespaceWithXml\"));\n    }", "signature": "void testGetStorageUnitStatusChangeMessageVelocityContextMap()", "full_signature": "@Test public void testGetStorageUnitStatusChangeMessageVelocityContextMap()", "class_method_signature": "StorageUnitStatusChangeMessageBuilderTest.testGetStorageUnitStatusChangeMessageVelocityContextMap()", "testcase": true, "constructor": false, "invocations": ["newArrayList", "get", "get", "get", "get", "getNotificationMessageVelocityContextMap", "newArrayList", "get", "get", "get", "get", "newArrayList", "get", "get", "get", "get", "assertEquals", "size", "assertEquals", "get", "assertEquals", "get", "assertEquals", "get", "assertEquals", "get", "assertEquals", "get", "assertEquals", "get", "assertEquals", "get", "assertEquals", "get", "assertEquals", "get", "assertEquals", "get", "assertEquals", "get", "assertEquals", "get", "assertEquals", "get", "assertEquals", "get", "assertEquals", "get"]}, "focal_class": {"identifier": "StorageUnitStatusChangeMessageBuilder", "superclass": "extends AbstractNotificationMessageBuilder", "interfaces": "implements NotificationMessageBuilder", "fields": [], "methods": [{"identifier": "getNotificationMessageVelocityContextMap", "parameters": "(NotificationEvent notificationEvent)", "modifiers": "@Override @SuppressFBWarnings(value = \"BC_UNCONFIRMED_CAST\", justification = \"The NotificationEvent is cast to a StorageUnitStatusChangeNotificationEvent which is always the case since\" + \" we manage the event type to a builder in a map defined in NotificationMessageManager\") public", "return": "Map<String, Object>", "signature": "Map<String, Object> getNotificationMessageVelocityContextMap(NotificationEvent notificationEvent)", "full_signature": "@Override @SuppressFBWarnings(value = \"BC_UNCONFIRMED_CAST\", justification = \"The NotificationEvent is cast to a StorageUnitStatusChangeNotificationEvent which is always the case since\" + \" we manage the event type to a builder in a map defined in NotificationMessageManager\") public Map<String, Object> getNotificationMessageVelocityContextMap(NotificationEvent notificationEvent)", "class_method_signature": "StorageUnitStatusChangeMessageBuilder.getNotificationMessageVelocityContextMap(NotificationEvent notificationEvent)", "testcase": false, "constructor": false}, {"identifier": "escapeJsonBusinessObjectDataKey", "parameters": "(final BusinessObjectDataKey businessObjectDataKey)", "modifiers": "private", "return": "BusinessObjectDataKey", "signature": "BusinessObjectDataKey escapeJsonBusinessObjectDataKey(final BusinessObjectDataKey businessObjectDataKey)", "full_signature": "private BusinessObjectDataKey escapeJsonBusinessObjectDataKey(final BusinessObjectDataKey businessObjectDataKey)", "class_method_signature": "StorageUnitStatusChangeMessageBuilder.escapeJsonBusinessObjectDataKey(final BusinessObjectDataKey businessObjectDataKey)", "testcase": false, "constructor": false}, {"identifier": "escapeXmlBusinessObjectDataKey", "parameters": "(final BusinessObjectDataKey businessObjectDataKey)", "modifiers": "private", "return": "BusinessObjectDataKey", "signature": "BusinessObjectDataKey escapeXmlBusinessObjectDataKey(final BusinessObjectDataKey businessObjectDataKey)", "full_signature": "private BusinessObjectDataKey escapeXmlBusinessObjectDataKey(final BusinessObjectDataKey businessObjectDataKey)", "class_method_signature": "StorageUnitStatusChangeMessageBuilder.escapeXmlBusinessObjectDataKey(final BusinessObjectDataKey businessObjectDataKey)", "testcase": false, "constructor": false}], "file": "herd-code/herd-service/src/main/java/org/finra/herd/service/helper/notification/StorageUnitStatusChangeMessageBuilder.java"}, "focal_method": {"identifier": "getNotificationMessageVelocityContextMap", "parameters": "(NotificationEvent notificationEvent)", "modifiers": "@Override @SuppressFBWarnings(value = \"BC_UNCONFIRMED_CAST\", justification = \"The NotificationEvent is cast to a StorageUnitStatusChangeNotificationEvent which is always the case since\" + \" we manage the event type to a builder in a map defined in NotificationMessageManager\") public", "return": "Map<String, Object>", "body": "@Override\n    @SuppressFBWarnings(value = \"BC_UNCONFIRMED_CAST\", justification =\n        \"The NotificationEvent is cast to a StorageUnitStatusChangeNotificationEvent which is always the case since\" +\n            \" we manage the event type to a builder in a map defined in NotificationMessageManager\")\n    public Map<String, Object> getNotificationMessageVelocityContextMap(NotificationEvent notificationEvent)\n    {\n        StorageUnitStatusChangeNotificationEvent event = (StorageUnitStatusChangeNotificationEvent) notificationEvent;\n        Map<String, Object> velocityContextMap = new HashMap<>();\n\n        addObjectPropertyToContext(velocityContextMap, \"businessObjectDataKey\", event.getBusinessObjectDataKey(),\n            escapeJsonBusinessObjectDataKey(event.getBusinessObjectDataKey()), escapeXmlBusinessObjectDataKey(event.getBusinessObjectDataKey()));\n        addStringPropertyToContext(velocityContextMap, \"storageName\", event.getStorageName());\n        addStringPropertyToContext(velocityContextMap, \"newStorageUnitStatus\", event.getNewStorageUnitStatus());\n        addStringPropertyToContext(velocityContextMap, \"oldStorageUnitStatus\", event.getOldStorageUnitStatus());\n        addStringPropertyToContext(velocityContextMap, \"namespace\", event.getBusinessObjectDataKey().getNamespace());\n\n        return velocityContextMap;\n    }", "signature": "Map<String, Object> getNotificationMessageVelocityContextMap(NotificationEvent notificationEvent)", "full_signature": "@Override @SuppressFBWarnings(value = \"BC_UNCONFIRMED_CAST\", justification = \"The NotificationEvent is cast to a StorageUnitStatusChangeNotificationEvent which is always the case since\" + \" we manage the event type to a builder in a map defined in NotificationMessageManager\") public Map<String, Object> getNotificationMessageVelocityContextMap(NotificationEvent notificationEvent)", "class_method_signature": "StorageUnitStatusChangeMessageBuilder.getNotificationMessageVelocityContextMap(NotificationEvent notificationEvent)", "testcase": false, "constructor": false, "invocations": ["addObjectPropertyToContext", "getBusinessObjectDataKey", "escapeJsonBusinessObjectDataKey", "getBusinessObjectDataKey", "escapeXmlBusinessObjectDataKey", "getBusinessObjectDataKey", "addStringPropertyToContext", "getStorageName", "addStringPropertyToContext", "getNewStorageUnitStatus", "addStringPropertyToContext", "getOldStorageUnitStatus", "addStringPropertyToContext", "getNamespace", "getBusinessObjectDataKey"]}, "repository": {"repo_id": 42949039, "url": "https://github.com/FINRAOS/herd", "language": "Java", "is_fork": false, "fork_count": 36, "stargazer_count": 120, "size": 205797, "license": "licensed"}}