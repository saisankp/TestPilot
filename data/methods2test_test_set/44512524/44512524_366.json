{"test_class": {"identifier": "RegressionQueryTest", "superclass": "", "interfaces": "", "fields": [], "file": "storm/trident-ml/src/test/java/com/github/pmerienne/trident/ml/regression/RegressionQueryTest.java"}, "test_case": {"identifier": "should_classify_instance_without_classifier", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n\tpublic void should_classify_instance_without_classifier() {\n\t\t// Given\n\t\tString regressorName = \"TestLearner\";\n\t\tRegressionQuery query = new RegressionQuery(regressorName);\n\n\t\tTridentTuple tuple1 = mock(TridentTuple.class);\n\t\tTridentTuple tuple2 = mock(TridentTuple.class);\n\t\tList<TridentTuple> tuples = Arrays.asList(tuple1, tuple2);\n\n\t\tList<List<Object>> expectedKeys = asList(asList((Object) regressorName));\n\t\tMapState<Regressor> state = mock(MapState.class);\n\t\tgiven(state.multiGet(expectedKeys)).willReturn(EMPTY_LIST);\n\n\t\t// When\n\t\tList<Double> actualPredictions = query.batchRetrieve(state, tuples);\n\n\t\tassertEquals(2, actualPredictions.size());\n\t\tassertNull(actualPredictions.get(0));\n\t\tassertNull(actualPredictions.get(1));\n\t}", "signature": "void should_classify_instance_without_classifier()", "full_signature": "@Test public void should_classify_instance_without_classifier()", "class_method_signature": "RegressionQueryTest.should_classify_instance_without_classifier()", "testcase": true, "constructor": false, "invocations": ["mock", "mock", "asList", "asList", "asList", "mock", "willReturn", "given", "multiGet", "batchRetrieve", "assertEquals", "size", "assertNull", "get", "assertNull", "get"]}, "focal_class": {"identifier": "RegressionQuery", "superclass": "extends BaseQueryFunction<MapState<Regressor>, Double>", "interfaces": "", "fields": [{"original_string": "private static final long serialVersionUID = 582183815675337782L;", "modifier": "private static final", "type": "long", "declarator": "serialVersionUID = 582183815675337782L", "var_name": "serialVersionUID"}, {"original_string": "private String regressorName;", "modifier": "private", "type": "String", "declarator": "regressorName", "var_name": "regressorName"}], "methods": [{"identifier": "RegressionQuery", "parameters": "(String regressorName)", "modifiers": "public", "return": "", "signature": " RegressionQuery(String regressorName)", "full_signature": "public  RegressionQuery(String regressorName)", "class_method_signature": "RegressionQuery.RegressionQuery(String regressorName)", "testcase": false, "constructor": true}, {"identifier": "batchRetrieve", "parameters": "(MapState<Regressor> state, List<TridentTuple> tuples)", "modifiers": "@SuppressWarnings(\"unchecked\") @Override public", "return": "List<Double>", "signature": "List<Double> batchRetrieve(MapState<Regressor> state, List<TridentTuple> tuples)", "full_signature": "@SuppressWarnings(\"unchecked\") @Override public List<Double> batchRetrieve(MapState<Regressor> state, List<TridentTuple> tuples)", "class_method_signature": "RegressionQuery.batchRetrieve(MapState<Regressor> state, List<TridentTuple> tuples)", "testcase": false, "constructor": false}, {"identifier": "execute", "parameters": "(TridentTuple tuple, Double result, TridentCollector collector)", "modifiers": "public", "return": "void", "signature": "void execute(TridentTuple tuple, Double result, TridentCollector collector)", "full_signature": "public void execute(TridentTuple tuple, Double result, TridentCollector collector)", "class_method_signature": "RegressionQuery.execute(TridentTuple tuple, Double result, TridentCollector collector)", "testcase": false, "constructor": false}], "file": "storm/trident-ml/src/main/java/com/github/pmerienne/trident/ml/regression/RegressionQuery.java"}, "focal_method": {"identifier": "batchRetrieve", "parameters": "(MapState<Regressor> state, List<TridentTuple> tuples)", "modifiers": "@SuppressWarnings(\"unchecked\") @Override public", "return": "List<Double>", "body": "@SuppressWarnings(\"unchecked\")\n\t@Override\n\tpublic List<Double> batchRetrieve(MapState<Regressor> state, List<TridentTuple> tuples) {\n\t\tList<Double> labels = new ArrayList<Double>();\n\n\t\tList<Regressor> regressors = state.multiGet(KeysUtil.toKeys(this.regressorName));\n\t\tif (regressors != null && !regressors.isEmpty()) {\n\t\t\tRegressor regressor = regressors.get(0);\n\t\t\tif (regressor == null) {\n\t\t\t\tfor (int i = 0; i < tuples.size(); i++) {\n\t\t\t\t\tlabels.add(null);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tDouble label;\n\t\t\t\tInstance<Double> instance;\n\t\t\t\tfor (TridentTuple tuple : tuples) {\n\t\t\t\t\tinstance = (Instance<Double>) tuple.get(0);\n\t\t\t\t\tlabel = regressor.predict(instance.features);\n\t\t\t\t\tlabels.add(label);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor (int i = 0; i < tuples.size(); i++) {\n\t\t\t\tlabels.add(null);\n\t\t\t}\n\t\t}\n\n\t\treturn labels;\n\t}", "signature": "List<Double> batchRetrieve(MapState<Regressor> state, List<TridentTuple> tuples)", "full_signature": "@SuppressWarnings(\"unchecked\") @Override public List<Double> batchRetrieve(MapState<Regressor> state, List<TridentTuple> tuples)", "class_method_signature": "RegressionQuery.batchRetrieve(MapState<Regressor> state, List<TridentTuple> tuples)", "testcase": false, "constructor": false, "invocations": ["multiGet", "toKeys", "isEmpty", "get", "size", "add", "get", "predict", "add", "size", "add"]}, "repository": {"repo_id": 44512524, "url": "https://github.com/zqhxuyuan/bigdata", "language": "Java", "is_fork": false, "fork_count": 6, "stargazer_count": 8, "size": 91550, "license": "licensed"}}