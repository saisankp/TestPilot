{"test_class": {"identifier": "StockOpTest", "superclass": "", "interfaces": "", "fields": [], "file": "example-thundergate/src/test/java/com/example/business/operator/StockOpTest.java"}, "test_case": {"identifier": "testCutoff_race", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testCutoff_race() {\n        StockOpImpl operator = new StockOpImpl();\n\n        List<Stock> stocks = new ArrayList<Stock>();\n        List<Shipment> shipments = new ArrayList<Shipment>();\n\n        MockResult<Stock> newStocks = new MockResult<Stock>();\n        MockResult<Shipment> newShipments = new MockResult<Shipment>();\n\n        operator.cutoff(stocks, shipments, newStocks, newShipments);\n\n        assertThat(newStocks.getResults().size(), is(0));\n        assertThat(newShipments.getResults().size(), is(0));\n    }", "signature": "void testCutoff_race()", "full_signature": "@Test public void testCutoff_race()", "class_method_signature": "StockOpTest.testCutoff_race()", "testcase": true, "constructor": false, "invocations": ["cutoff", "assertThat", "size", "getResults", "is", "assertThat", "size", "getResults", "is"]}, "focal_class": {"identifier": "StockOp", "superclass": "", "interfaces": "", "fields": [], "methods": [{"identifier": "checkShipment", "parameters": "(Shipment shipment)", "modifiers": "@Branch public", "return": "ShipmentStatus", "signature": "ShipmentStatus checkShipment(Shipment shipment)", "full_signature": "@Branch public ShipmentStatus checkShipment(Shipment shipment)", "class_method_signature": "StockOp.checkShipment(Shipment shipment)", "testcase": false, "constructor": false}, {"identifier": "cutoff", "parameters": "(\n            // \u5728\u5eab\u306f\u5546\u54c1\u3054\u3068\u306b\u30b0\u30eb\u30fc\u30d4\u30f3\u30b0\u3057\u3066\u3001\u3055\u3089\u306b\u5165\u8377\u9806\u306b\u4e26\u3079\u308b\n            @Key(group = \"ITEM_CODE\", order = \"PURCHASED_DATE ASC\") List<Stock> stocks,\n            // \u6ce8\u6587\u3082\u5546\u54c1\u3054\u3068\u306b\u30b0\u30eb\u30fc\u30d4\u30f3\u30b0\u3057\u3066\u3001\u3055\u3089\u306b\u51fa\u8377\u9806\u306b\u4e26\u3079\u308b\n            @Key(group = \"ITEM_CODE\", order = \"SHIPPED_DATE ASC\") List<Shipment> shipments,\n            Result<Stock> newStocks,\n            Result<Shipment> newShipments)", "modifiers": "@CoGroup public", "return": "void", "signature": "void cutoff(\n            // \u5728\u5eab\u306f\u5546\u54c1\u3054\u3068\u306b\u30b0\u30eb\u30fc\u30d4\u30f3\u30b0\u3057\u3066\u3001\u3055\u3089\u306b\u5165\u8377\u9806\u306b\u4e26\u3079\u308b\n            @Key(group = \"ITEM_CODE\", order = \"PURCHASED_DATE ASC\") List<Stock> stocks,\n            // \u6ce8\u6587\u3082\u5546\u54c1\u3054\u3068\u306b\u30b0\u30eb\u30fc\u30d4\u30f3\u30b0\u3057\u3066\u3001\u3055\u3089\u306b\u51fa\u8377\u9806\u306b\u4e26\u3079\u308b\n            @Key(group = \"ITEM_CODE\", order = \"SHIPPED_DATE ASC\") List<Shipment> shipments,\n            Result<Stock> newStocks,\n            Result<Shipment> newShipments)", "full_signature": "@CoGroup public void cutoff(\n            // \u5728\u5eab\u306f\u5546\u54c1\u3054\u3068\u306b\u30b0\u30eb\u30fc\u30d4\u30f3\u30b0\u3057\u3066\u3001\u3055\u3089\u306b\u5165\u8377\u9806\u306b\u4e26\u3079\u308b\n            @Key(group = \"ITEM_CODE\", order = \"PURCHASED_DATE ASC\") List<Stock> stocks,\n            // \u6ce8\u6587\u3082\u5546\u54c1\u3054\u3068\u306b\u30b0\u30eb\u30fc\u30d4\u30f3\u30b0\u3057\u3066\u3001\u3055\u3089\u306b\u51fa\u8377\u9806\u306b\u4e26\u3079\u308b\n            @Key(group = \"ITEM_CODE\", order = \"SHIPPED_DATE ASC\") List<Shipment> shipments,\n            Result<Stock> newStocks,\n            Result<Shipment> newShipments)", "class_method_signature": "StockOp.cutoff(\n            // \u5728\u5eab\u306f\u5546\u54c1\u3054\u3068\u306b\u30b0\u30eb\u30fc\u30d4\u30f3\u30b0\u3057\u3066\u3001\u3055\u3089\u306b\u5165\u8377\u9806\u306b\u4e26\u3079\u308b\n            @Key(group = \"ITEM_CODE\", order = \"PURCHASED_DATE ASC\") List<Stock> stocks,\n            // \u6ce8\u6587\u3082\u5546\u54c1\u3054\u3068\u306b\u30b0\u30eb\u30fc\u30d4\u30f3\u30b0\u3057\u3066\u3001\u3055\u3089\u306b\u51fa\u8377\u9806\u306b\u4e26\u3079\u308b\n            @Key(group = \"ITEM_CODE\", order = \"SHIPPED_DATE ASC\") List<Shipment> shipments,\n            Result<Stock> newStocks,\n            Result<Shipment> newShipments)", "testcase": false, "constructor": false}], "file": "example-thundergate/src/main/java/com/example/business/operator/StockOp.java"}, "focal_method": {"identifier": "cutoff", "parameters": "(\n            // \u5728\u5eab\u306f\u5546\u54c1\u3054\u3068\u306b\u30b0\u30eb\u30fc\u30d4\u30f3\u30b0\u3057\u3066\u3001\u3055\u3089\u306b\u5165\u8377\u9806\u306b\u4e26\u3079\u308b\n            @Key(group = \"ITEM_CODE\", order = \"PURCHASED_DATE ASC\") List<Stock> stocks,\n            // \u6ce8\u6587\u3082\u5546\u54c1\u3054\u3068\u306b\u30b0\u30eb\u30fc\u30d4\u30f3\u30b0\u3057\u3066\u3001\u3055\u3089\u306b\u51fa\u8377\u9806\u306b\u4e26\u3079\u308b\n            @Key(group = \"ITEM_CODE\", order = \"SHIPPED_DATE ASC\") List<Shipment> shipments,\n            Result<Stock> newStocks,\n            Result<Shipment> newShipments)", "modifiers": "@CoGroup public", "return": "void", "body": "@CoGroup\n    public void cutoff(\n            // \u5728\u5eab\u306f\u5546\u54c1\u3054\u3068\u306b\u30b0\u30eb\u30fc\u30d4\u30f3\u30b0\u3057\u3066\u3001\u3055\u3089\u306b\u5165\u8377\u9806\u306b\u4e26\u3079\u308b\n            @Key(group = \"ITEM_CODE\", order = \"PURCHASED_DATE ASC\") List<Stock> stocks,\n            // \u6ce8\u6587\u3082\u5546\u54c1\u3054\u3068\u306b\u30b0\u30eb\u30fc\u30d4\u30f3\u30b0\u3057\u3066\u3001\u3055\u3089\u306b\u51fa\u8377\u9806\u306b\u4e26\u3079\u308b\n            @Key(group = \"ITEM_CODE\", order = \"SHIPPED_DATE ASC\") List<Shipment> shipments,\n            Result<Stock> newStocks,\n            Result<Shipment> newShipments) {\n        Iterator<Stock> eachStock = stocks.iterator();\n        Iterator<Shipment> eachShipment = shipments.iterator();\n        \n        // \u5728\u5eab\u304c\u7a7a\u306b\u306a\u308b\u307e\u3067\n        while (eachStock.hasNext()) {\n            Stock stock = eachStock.next();\n            \n            // \u6ce8\u6587\u3092\u51e6\u7406\u3057\u304d\u308b\u307e\u3067\n            while (eachShipment.hasNext()) {\n                // \u3053\u306e\u5728\u5eab\u30ec\u30b3\u30fc\u30c9\u304c\u7d42\u308f\u3063\u305f\u3089\u6b21\u3078\n                if (stock.getQuantity() == 0) {\n                    break;\n                }\n                // \u6ce8\u6587\u3092\u3072\u3068\u3064\u53d6\u308a\u51fa\u3057\u3066\u51e6\u7406\n                Shipment shipment = eachShipment.next();\n                shipment.setCost(stock.getCost());\n                newShipments.add(shipment);\n                \n                // \u5728\u5eab\u3092\u6e1b\u3089\u3059\n                stock.getQuantityOption().add(-1);\n            }\n            \n            // \u73fe\u5728\u306e\u5728\u5eab\u60c5\u5831\u3092\u51fa\u529b\n            newStocks.add(stock);\n        }\n        \n        // \u51fa\u8377\u3057\u305f\u306f\u305a\u304c\u5728\u5eab\u304c\u8db3\u308a\u3066\u306a\u3044\u3067\u3059\u3088...\n        // (\u66f8\u304d\u623b\u3055\u306a\u304f\u3066\u3082\u3088\u304f\u3001\u305d\u306e\u5834\u5408\u306f\u66f4\u65b0\u3055\u308c\u306a\u3044\u3060\u3051)\n        while (eachShipment.hasNext()) {\n            Shipment shipment = eachShipment.next();\n            newShipments.add(shipment);\n        }\n    }", "signature": "void cutoff(\n            // \u5728\u5eab\u306f\u5546\u54c1\u3054\u3068\u306b\u30b0\u30eb\u30fc\u30d4\u30f3\u30b0\u3057\u3066\u3001\u3055\u3089\u306b\u5165\u8377\u9806\u306b\u4e26\u3079\u308b\n            @Key(group = \"ITEM_CODE\", order = \"PURCHASED_DATE ASC\") List<Stock> stocks,\n            // \u6ce8\u6587\u3082\u5546\u54c1\u3054\u3068\u306b\u30b0\u30eb\u30fc\u30d4\u30f3\u30b0\u3057\u3066\u3001\u3055\u3089\u306b\u51fa\u8377\u9806\u306b\u4e26\u3079\u308b\n            @Key(group = \"ITEM_CODE\", order = \"SHIPPED_DATE ASC\") List<Shipment> shipments,\n            Result<Stock> newStocks,\n            Result<Shipment> newShipments)", "full_signature": "@CoGroup public void cutoff(\n            // \u5728\u5eab\u306f\u5546\u54c1\u3054\u3068\u306b\u30b0\u30eb\u30fc\u30d4\u30f3\u30b0\u3057\u3066\u3001\u3055\u3089\u306b\u5165\u8377\u9806\u306b\u4e26\u3079\u308b\n            @Key(group = \"ITEM_CODE\", order = \"PURCHASED_DATE ASC\") List<Stock> stocks,\n            // \u6ce8\u6587\u3082\u5546\u54c1\u3054\u3068\u306b\u30b0\u30eb\u30fc\u30d4\u30f3\u30b0\u3057\u3066\u3001\u3055\u3089\u306b\u51fa\u8377\u9806\u306b\u4e26\u3079\u308b\n            @Key(group = \"ITEM_CODE\", order = \"SHIPPED_DATE ASC\") List<Shipment> shipments,\n            Result<Stock> newStocks,\n            Result<Shipment> newShipments)", "class_method_signature": "StockOp.cutoff(\n            // \u5728\u5eab\u306f\u5546\u54c1\u3054\u3068\u306b\u30b0\u30eb\u30fc\u30d4\u30f3\u30b0\u3057\u3066\u3001\u3055\u3089\u306b\u5165\u8377\u9806\u306b\u4e26\u3079\u308b\n            @Key(group = \"ITEM_CODE\", order = \"PURCHASED_DATE ASC\") List<Stock> stocks,\n            // \u6ce8\u6587\u3082\u5546\u54c1\u3054\u3068\u306b\u30b0\u30eb\u30fc\u30d4\u30f3\u30b0\u3057\u3066\u3001\u3055\u3089\u306b\u51fa\u8377\u9806\u306b\u4e26\u3079\u308b\n            @Key(group = \"ITEM_CODE\", order = \"SHIPPED_DATE ASC\") List<Shipment> shipments,\n            Result<Stock> newStocks,\n            Result<Shipment> newShipments)", "testcase": false, "constructor": false, "invocations": ["iterator", "iterator", "hasNext", "next", "hasNext", "getQuantity", "next", "setCost", "getCost", "add", "add", "getQuantityOption", "add", "hasNext", "next", "add"]}, "repository": {"repo_id": 1547148, "url": "https://github.com/asakusafw/asakusafw-examples", "language": "Java", "is_fork": false, "fork_count": 6, "stargazer_count": 25, "size": 1520, "license": "licensed"}}