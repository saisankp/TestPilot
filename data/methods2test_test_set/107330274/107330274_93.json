{"test_class": {"identifier": "DefaultTokenBucketTest", "superclass": "", "interfaces": "", "fields": [], "file": "titus-common/src/test/java/com/netflix/titus/common/util/limiter/tokenbucket/internal/DefaultTokenBucketTest.java"}, "test_case": {"identifier": "tryTakeShouldGetToken", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void tryTakeShouldGetToken() {\n        TestRefillStrategy testRefillStrategy = createTestRefillStrategy();\n        TokenBucket tokenBucket = createTokenBucket(10, testRefillStrategy, 0);\n        testRefillStrategy.setAmountToRefill(1);\n        boolean gotToken = tokenBucket.tryTake();\n        assertTrue(gotToken);\n\n        testRefillStrategy.setAmountToRefill(10);\n        gotToken = tokenBucket.tryTake(10);\n        assertTrue(gotToken);\n    }", "signature": "void tryTakeShouldGetToken()", "full_signature": "@Test public void tryTakeShouldGetToken()", "class_method_signature": "DefaultTokenBucketTest.tryTakeShouldGetToken()", "testcase": true, "constructor": false, "invocations": ["createTestRefillStrategy", "createTokenBucket", "setAmountToRefill", "tryTake", "assertTrue", "setAmountToRefill", "tryTake", "assertTrue"]}, "focal_class": {"identifier": "DefaultTokenBucket", "superclass": "", "interfaces": "implements TokenBucket", "fields": [{"original_string": "private final Object mutex = new Object();", "modifier": "private final", "type": "Object", "declarator": "mutex = new Object()", "var_name": "mutex"}, {"original_string": "private final String name;", "modifier": "private final", "type": "String", "declarator": "name", "var_name": "name"}, {"original_string": "private final long capacity;", "modifier": "private final", "type": "long", "declarator": "capacity", "var_name": "capacity"}, {"original_string": "private final RefillStrategy refillStrategy;", "modifier": "private final", "type": "RefillStrategy", "declarator": "refillStrategy", "var_name": "refillStrategy"}, {"original_string": "private volatile long numberOfTokens;", "modifier": "private volatile", "type": "long", "declarator": "numberOfTokens", "var_name": "numberOfTokens"}], "methods": [{"identifier": "DefaultTokenBucket", "parameters": "(String name, long capacity, RefillStrategy refillStrategy, long initialNumberOfTokens)", "modifiers": "public", "return": "", "signature": " DefaultTokenBucket(String name, long capacity, RefillStrategy refillStrategy, long initialNumberOfTokens)", "full_signature": "public  DefaultTokenBucket(String name, long capacity, RefillStrategy refillStrategy, long initialNumberOfTokens)", "class_method_signature": "DefaultTokenBucket.DefaultTokenBucket(String name, long capacity, RefillStrategy refillStrategy, long initialNumberOfTokens)", "testcase": false, "constructor": true}, {"identifier": "getName", "parameters": "()", "modifiers": "@Override public", "return": "String", "signature": "String getName()", "full_signature": "@Override public String getName()", "class_method_signature": "DefaultTokenBucket.getName()", "testcase": false, "constructor": false}, {"identifier": "getCapacity", "parameters": "()", "modifiers": "@Override public", "return": "long", "signature": "long getCapacity()", "full_signature": "@Override public long getCapacity()", "class_method_signature": "DefaultTokenBucket.getCapacity()", "testcase": false, "constructor": false}, {"identifier": "getNumberOfTokens", "parameters": "()", "modifiers": "@Override public", "return": "long", "signature": "long getNumberOfTokens()", "full_signature": "@Override public long getNumberOfTokens()", "class_method_signature": "DefaultTokenBucket.getNumberOfTokens()", "testcase": false, "constructor": false}, {"identifier": "tryTake", "parameters": "()", "modifiers": "@Override public", "return": "boolean", "signature": "boolean tryTake()", "full_signature": "@Override public boolean tryTake()", "class_method_signature": "DefaultTokenBucket.tryTake()", "testcase": false, "constructor": false}, {"identifier": "tryTake", "parameters": "(long numberOfTokens)", "modifiers": "@Override public", "return": "boolean", "signature": "boolean tryTake(long numberOfTokens)", "full_signature": "@Override public boolean tryTake(long numberOfTokens)", "class_method_signature": "DefaultTokenBucket.tryTake(long numberOfTokens)", "testcase": false, "constructor": false}, {"identifier": "take", "parameters": "()", "modifiers": "@Override public", "return": "void", "signature": "void take()", "full_signature": "@Override public void take()", "class_method_signature": "DefaultTokenBucket.take()", "testcase": false, "constructor": false}, {"identifier": "take", "parameters": "(long numberOfTokens)", "modifiers": "@Override public", "return": "void", "signature": "void take(long numberOfTokens)", "full_signature": "@Override public void take(long numberOfTokens)", "class_method_signature": "DefaultTokenBucket.take(long numberOfTokens)", "testcase": false, "constructor": false}, {"identifier": "refill", "parameters": "(long numberOfTokens)", "modifiers": "@Override public", "return": "void", "signature": "void refill(long numberOfTokens)", "full_signature": "@Override public void refill(long numberOfTokens)", "class_method_signature": "DefaultTokenBucket.refill(long numberOfTokens)", "testcase": false, "constructor": false}, {"identifier": "getRefillStrategy", "parameters": "()", "modifiers": "@Override public", "return": "RefillStrategy", "signature": "RefillStrategy getRefillStrategy()", "full_signature": "@Override public RefillStrategy getRefillStrategy()", "class_method_signature": "DefaultTokenBucket.getRefillStrategy()", "testcase": false, "constructor": false}, {"identifier": "toString", "parameters": "()", "modifiers": "@Override public", "return": "String", "signature": "String toString()", "full_signature": "@Override public String toString()", "class_method_signature": "DefaultTokenBucket.toString()", "testcase": false, "constructor": false}], "file": "titus-common/src/main/java/com/netflix/titus/common/util/limiter/tokenbucket/internal/DefaultTokenBucket.java"}, "focal_method": {"identifier": "tryTake", "parameters": "()", "modifiers": "@Override public", "return": "boolean", "body": "@Override\n    public boolean tryTake() {\n        return tryTake(1);\n    }", "signature": "boolean tryTake()", "full_signature": "@Override public boolean tryTake()", "class_method_signature": "DefaultTokenBucket.tryTake()", "testcase": false, "constructor": false, "invocations": ["tryTake"]}, "repository": {"repo_id": 107330274, "url": "https://github.com/Netflix/titus-control-plane", "stars": 241, "created": "10/17/2017 10:20:55 PM +00:00", "updates": "2020-01-25T13:01:05+00:00", "fork": "False", "license": "licensed"}}