{"test_class": {"identifier": "FeedServiceImplTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private ElasticSearchService esUtil;", "modifier": "private", "type": "ElasticSearchService", "declarator": "esUtil", "var_name": "esUtil"}, {"original_string": "private static CassandraOperation cassandraOperation = null;", "modifier": "private static", "type": "CassandraOperation", "declarator": "cassandraOperation = null", "var_name": "cassandraOperation"}, {"original_string": "private static IFeedService feedService = FeedFactory.getInstance();", "modifier": "private static", "type": "IFeedService", "declarator": "feedService = FeedFactory.getInstance()", "var_name": "feedService"}, {"original_string": "private static SearchDTO search = new SearchDTO();", "modifier": "private static", "type": "SearchDTO", "declarator": "search = new SearchDTO()", "var_name": "search"}, {"original_string": "private static Map<String, Object> esResponse = new HashMap<>();", "modifier": "private static", "type": "Map<String, Object>", "declarator": "esResponse = new HashMap<>()", "var_name": "esResponse"}, {"original_string": "private static Promise<Map<String, Object>> promise;", "modifier": "private static", "type": "Promise<Map<String, Object>>", "declarator": "promise", "var_name": "promise"}], "file": "actors/common/src/test/java/org/sunbird/feed/impl/FeedServiceImplTest.java"}, "test_case": {"identifier": "testGetRecordsByProperties", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testGetRecordsByProperties() {\n        Map<String, Object> props = new HashMap<>();\n        props.put(JsonKey.USER_ID, \"123-456-789\");\n        List<Feed> res = feedService.getRecordsByProperties(props);\n        Assert.assertTrue(res != null);\n    }", "signature": "void testGetRecordsByProperties()", "full_signature": "@Test public void testGetRecordsByProperties()", "class_method_signature": "FeedServiceImplTest.testGetRecordsByProperties()", "testcase": true, "constructor": false, "invocations": ["put", "getRecordsByProperties", "assertTrue"]}, "focal_class": {"identifier": "FeedServiceImpl", "superclass": "", "interfaces": "implements IFeedService", "fields": [{"original_string": "private Util.DbInfo usrFeedDbInfo = Util.dbInfoMap.get(JsonKey.USER_FEED_DB);", "modifier": "private", "type": "Util.DbInfo", "declarator": "usrFeedDbInfo = Util.dbInfoMap.get(JsonKey.USER_FEED_DB)", "var_name": "usrFeedDbInfo"}, {"original_string": "private ObjectMapper mapper = new ObjectMapper();", "modifier": "private", "type": "ObjectMapper", "declarator": "mapper = new ObjectMapper()", "var_name": "mapper"}], "methods": [{"identifier": "getCassandraInstance", "parameters": "()", "modifiers": "public static", "return": "CassandraOperation", "signature": "CassandraOperation getCassandraInstance()", "full_signature": "public static CassandraOperation getCassandraInstance()", "class_method_signature": "FeedServiceImpl.getCassandraInstance()", "testcase": false, "constructor": false}, {"identifier": "getESInstance", "parameters": "()", "modifiers": "public static", "return": "ElasticSearchService", "signature": "ElasticSearchService getESInstance()", "full_signature": "public static ElasticSearchService getESInstance()", "class_method_signature": "FeedServiceImpl.getESInstance()", "testcase": false, "constructor": false}, {"identifier": "insert", "parameters": "(Feed feed)", "modifiers": "@Override public", "return": "Response", "signature": "Response insert(Feed feed)", "full_signature": "@Override public Response insert(Feed feed)", "class_method_signature": "FeedServiceImpl.insert(Feed feed)", "testcase": false, "constructor": false}, {"identifier": "update", "parameters": "(Feed feed)", "modifiers": "@Override public", "return": "Response", "signature": "Response update(Feed feed)", "full_signature": "@Override public Response update(Feed feed)", "class_method_signature": "FeedServiceImpl.update(Feed feed)", "testcase": false, "constructor": false}, {"identifier": "getRecordsByProperties", "parameters": "(Map<String, Object> properties)", "modifiers": "@Override public", "return": "List<Feed>", "signature": "List<Feed> getRecordsByProperties(Map<String, Object> properties)", "full_signature": "@Override public List<Feed> getRecordsByProperties(Map<String, Object> properties)", "class_method_signature": "FeedServiceImpl.getRecordsByProperties(Map<String, Object> properties)", "testcase": false, "constructor": false}, {"identifier": "search", "parameters": "(SearchDTO searchDTO)", "modifiers": "@Override public", "return": "Response", "signature": "Response search(SearchDTO searchDTO)", "full_signature": "@Override public Response search(SearchDTO searchDTO)", "class_method_signature": "FeedServiceImpl.search(SearchDTO searchDTO)", "testcase": false, "constructor": false}, {"identifier": "delete", "parameters": "(String id)", "modifiers": "@Override public", "return": "void", "signature": "void delete(String id)", "full_signature": "@Override public void delete(String id)", "class_method_signature": "FeedServiceImpl.delete(String id)", "testcase": false, "constructor": false}, {"identifier": "saveFeed", "parameters": "(Map<String, Object> feed)", "modifiers": "private", "return": "Response", "signature": "Response saveFeed(Map<String, Object> feed)", "full_signature": "private Response saveFeed(Map<String, Object> feed)", "class_method_signature": "FeedServiceImpl.saveFeed(Map<String, Object> feed)", "testcase": false, "constructor": false}], "file": "actors/common/src/main/java/org/sunbird/feed/impl/FeedServiceImpl.java"}, "focal_method": {"identifier": "getRecordsByProperties", "parameters": "(Map<String, Object> properties)", "modifiers": "@Override public", "return": "List<Feed>", "body": "@Override\n  public List<Feed> getRecordsByProperties(Map<String, Object> properties) {\n    ProjectLogger.log(\n        \"FeedServiceImpl:getRecordsByProperties method called : \", LoggerEnum.INFO.name());\n    Response dbResponse =\n        getCassandraInstance()\n            .getRecordsByProperties(\n                usrFeedDbInfo.getKeySpace(), usrFeedDbInfo.getTableName(), properties);\n    List<Map<String, Object>> responseList = null;\n    List<Feed> feedList = new ArrayList<>();\n    if (null != dbResponse && null != dbResponse.getResult()) {\n      responseList = (List<Map<String, Object>>) dbResponse.getResult().get(JsonKey.RESPONSE);\n      if (CollectionUtils.isNotEmpty(responseList)) {\n        responseList.forEach(\n            s -> {\n              try {\n                String data = (String) s.get(JsonKey.FEED_DATA);\n                if (StringUtils.isNotBlank(data)) {\n                  s.put(\n                      JsonKey.FEED_DATA,\n                      mapper.readValue(data, new TypeReference<Map<String, Object>>() {}));\n                } else {\n                  s.put(JsonKey.FEED_DATA, Collections.emptyMap());\n                }\n                feedList.add(mapper.convertValue(s, Feed.class));\n              } catch (Exception ex) {\n                ProjectLogger.log(\n                    \"FeedServiceImpl:getRecordsByProperties :Exception occurred while mapping feed data.\",\n                    ex);\n              }\n            });\n      }\n    }\n    return feedList;\n  }", "signature": "List<Feed> getRecordsByProperties(Map<String, Object> properties)", "full_signature": "@Override public List<Feed> getRecordsByProperties(Map<String, Object> properties)", "class_method_signature": "FeedServiceImpl.getRecordsByProperties(Map<String, Object> properties)", "testcase": false, "constructor": false, "invocations": ["log", "name", "getRecordsByProperties", "getCassandraInstance", "getKeySpace", "getTableName", "getResult", "get", "getResult", "isNotEmpty", "forEach", "get", "isNotBlank", "put", "readValue", "put", "emptyMap", "add", "convertValue", "log"]}, "repository": {"repo_id": 96122408, "url": "https://github.com/project-sunbird/sunbird-lms-mw", "language": "Java", "is_fork": false, "fork_count": 36, "stargazer_count": 5, "size": 15380, "license": "licensed"}}