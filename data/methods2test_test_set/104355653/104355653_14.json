{"test_class": {"identifier": "DrawControllerTest", "superclass": "extends BaseTest", "interfaces": "", "fields": [], "file": "service/settlement-service/src/test/java/com/meiduimall/service/settlement/api/DrawControllerTest.java"}, "test_case": {"identifier": "testRejectDrawCashById", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n\tpublic void testRejectDrawCashById() throws Exception {\n\t\tResultActions results = mockMvc\n\t\t\t\t.perform(MockMvcRequestBuilders.post(\"/settlementservice/drawservice/v1/rejectdrawcashbyid\")\n\t\t\t\t\t\t.param(\"drawCode\", \"QZ187147764266217033101\").param(\"remark\", \"\u9a73\u56de\u539f\u56e0\").param(\"verifyId\", \"1\")\n\t\t\t\t\t\t.param(\"drawName\", \"\u4eba\u5de5\"))\n\t\t\t\t.andExpect(status().isOk());\n\t\t\n\t\tresults.andDo(new ResultHandler() {\n\t\t\t@Override\n\t\t\tpublic void handle(MvcResult result) throws Exception {\n\t\t\t\tSystem.out.println(\"*********\" + result.getResponse().getContentAsString());\n\t\t\t}\n\t\t});\n\t}", "signature": "void testRejectDrawCashById()", "full_signature": "@Test public void testRejectDrawCashById()", "class_method_signature": "DrawControllerTest.testRejectDrawCashById()", "testcase": true, "constructor": false, "invocations": ["andExpect", "perform", "param", "erify", "param", "param", "post", "isOk", "status", "andDo", "println", "getContentAsString", "getResponse"]}, "focal_class": {"identifier": "DrawController", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final Logger log = LoggerFactory.getLogger(DrawController.class);", "modifier": "private static final", "type": "Logger", "declarator": "log = LoggerFactory.getLogger(DrawController.class)", "var_name": "log"}, {"original_string": "private static final String BALANCE = \"balance\";", "modifier": "private static final", "type": "String", "declarator": "BALANCE = \"balance\"", "var_name": "BALANCE"}, {"original_string": "private static final String ADMIN = \"admin\";", "modifier": "private static final", "type": "String", "declarator": "ADMIN = \"admin\"", "var_name": "ADMIN"}, {"original_string": "@Autowired\n\tprivate DrawService drawService;", "modifier": "@Autowired\n\tprivate", "type": "DrawService", "declarator": "drawService", "var_name": "drawService"}, {"original_string": "@Autowired\n\tprivate AgentService agentService;", "modifier": "@Autowired\n\tprivate", "type": "AgentService", "declarator": "agentService", "var_name": "agentService"}], "methods": [{"identifier": "queryAccoutBalance", "parameters": "(String code)", "modifiers": "@PostMapping(value=\"/queryaccoutbalance\") public", "return": "ResBodyData", "signature": "ResBodyData queryAccoutBalance(String code)", "full_signature": "@PostMapping(value=\"/queryaccoutbalance\") public ResBodyData queryAccoutBalance(String code)", "class_method_signature": "DrawController.queryAccoutBalance(String code)", "testcase": false, "constructor": false}, {"identifier": "drawCash", "parameters": "(@Validated EcmMzfDraw ecmMzfDraw)", "modifiers": "@PostMapping(value = \"/drawcash\") public", "return": "ResBodyData", "signature": "ResBodyData drawCash(@Validated EcmMzfDraw ecmMzfDraw)", "full_signature": "@PostMapping(value = \"/drawcash\") public ResBodyData drawCash(@Validated EcmMzfDraw ecmMzfDraw)", "class_method_signature": "DrawController.drawCash(@Validated EcmMzfDraw ecmMzfDraw)", "testcase": false, "constructor": false}, {"identifier": "queryDrawCash", "parameters": "(\n\t\t\t@RequestParam(value = \"pageNumber\", defaultValue = \"1\") int pageNumber,\n\t\t\t@RequestParam(value = \"pageSize\", defaultValue = \"20\") int pageSize,\n\t\t\t@RequestParam(value = \"type\", defaultValue = \"list\") String type,\n\t\t\t@RequestParam Map<String, Object> params)", "modifiers": "@PostMapping(value = \"/querydrawcash\") public", "return": "ResBodyData", "signature": "ResBodyData queryDrawCash(\n\t\t\t@RequestParam(value = \"pageNumber\", defaultValue = \"1\") int pageNumber,\n\t\t\t@RequestParam(value = \"pageSize\", defaultValue = \"20\") int pageSize,\n\t\t\t@RequestParam(value = \"type\", defaultValue = \"list\") String type,\n\t\t\t@RequestParam Map<String, Object> params)", "full_signature": "@PostMapping(value = \"/querydrawcash\") public ResBodyData queryDrawCash(\n\t\t\t@RequestParam(value = \"pageNumber\", defaultValue = \"1\") int pageNumber,\n\t\t\t@RequestParam(value = \"pageSize\", defaultValue = \"20\") int pageSize,\n\t\t\t@RequestParam(value = \"type\", defaultValue = \"list\") String type,\n\t\t\t@RequestParam Map<String, Object> params)", "class_method_signature": "DrawController.queryDrawCash(\n\t\t\t@RequestParam(value = \"pageNumber\", defaultValue = \"1\") int pageNumber,\n\t\t\t@RequestParam(value = \"pageSize\", defaultValue = \"20\") int pageSize,\n\t\t\t@RequestParam(value = \"type\", defaultValue = \"list\") String type,\n\t\t\t@RequestParam Map<String, Object> params)", "testcase": false, "constructor": false}, {"identifier": "queryDrawCashById", "parameters": "(String drawCode)", "modifiers": "@PostMapping(value=\"/querydrawcashbyid\") public", "return": "ResBodyData", "signature": "ResBodyData queryDrawCashById(String drawCode)", "full_signature": "@PostMapping(value=\"/querydrawcashbyid\") public ResBodyData queryDrawCashById(String drawCode)", "class_method_signature": "DrawController.queryDrawCashById(String drawCode)", "testcase": false, "constructor": false}, {"identifier": "verifyDrawCashById", "parameters": "(EcmMzfDraw ecmmzfdraw)", "modifiers": "@PostMapping(value=\"/verifydrawcashbyid\") public", "return": "ResBodyData", "signature": "ResBodyData verifyDrawCashById(EcmMzfDraw ecmmzfdraw)", "full_signature": "@PostMapping(value=\"/verifydrawcashbyid\") public ResBodyData verifyDrawCashById(EcmMzfDraw ecmmzfdraw)", "class_method_signature": "DrawController.verifyDrawCashById(EcmMzfDraw ecmmzfdraw)", "testcase": false, "constructor": false}, {"identifier": "rejectDrawCashById", "parameters": "(EcmMzfDraw ecmmzfdraw)", "modifiers": "@PostMapping(value=\"/rejectdrawcashbyid\") public", "return": "ResBodyData", "signature": "ResBodyData rejectDrawCashById(EcmMzfDraw ecmmzfdraw)", "full_signature": "@PostMapping(value=\"/rejectdrawcashbyid\") public ResBodyData rejectDrawCashById(EcmMzfDraw ecmmzfdraw)", "class_method_signature": "DrawController.rejectDrawCashById(EcmMzfDraw ecmmzfdraw)", "testcase": false, "constructor": false}, {"identifier": "confirmDrawCashByIdByType", "parameters": "(EcmMzfDraw ecmmzfdraw)", "modifiers": "@PostMapping(value=\"/confirmdrawcashbyidbytype\") public", "return": "ResBodyData", "signature": "ResBodyData confirmDrawCashByIdByType(EcmMzfDraw ecmmzfdraw)", "full_signature": "@PostMapping(value=\"/confirmdrawcashbyidbytype\") public ResBodyData confirmDrawCashByIdByType(EcmMzfDraw ecmmzfdraw)", "class_method_signature": "DrawController.confirmDrawCashByIdByType(EcmMzfDraw ecmmzfdraw)", "testcase": false, "constructor": false}], "file": "service/settlement-service/src/main/java/com/meiduimall/service/settlement/api/DrawController.java"}, "focal_method": {"identifier": "rejectDrawCashById", "parameters": "(EcmMzfDraw ecmmzfdraw)", "modifiers": "@PostMapping(value=\"/rejectdrawcashbyid\") public", "return": "ResBodyData", "body": "@PostMapping(value=\"/rejectdrawcashbyid\")\n\tpublic ResBodyData rejectDrawCashById(EcmMzfDraw ecmmzfdraw) {\n\t\t\n\t\tif(StringUtil.isEmpty(ecmmzfdraw.getDrawCode()) || StringUtil.isEmpty(ecmmzfdraw.getRemark())){\n\t\t\tthrow new ServiceException(SettlementApiCode.REJECT_DRAWCODE_REMARK_ISNULL, BaseApiCode.getZhMsg(SettlementApiCode.REJECT_DRAWCODE_REMARK_ISNULL));\n\t\t}\n\t\t\n\t\tecmmzfdraw.setStatus(DrawCashConstants.STATUS_VERIFIED_REJECTED);\n\t\tecmmzfdraw.setVerifyName(StringUtil.isEmpty(ecmmzfdraw.getVerifyName())?ADMIN:ecmmzfdraw.getVerifyName());\n\t\tecmmzfdraw.setVerifyStatus(DrawCashConstants.STATUS_VERIFIED_REJECTED);\n\t\tecmmzfdraw.setVerifyTime(DateUtil.getCurrentTimeSec());\n\t\t\n\t\tMap<String, Object> hashMap = drawService.rejectDrawCashById(ecmmzfdraw);\n\t\treturn SettlementUtil.success(hashMap);\n\t\t\n\t}", "signature": "ResBodyData rejectDrawCashById(EcmMzfDraw ecmmzfdraw)", "full_signature": "@PostMapping(value=\"/rejectdrawcashbyid\") public ResBodyData rejectDrawCashById(EcmMzfDraw ecmmzfdraw)", "class_method_signature": "DrawController.rejectDrawCashById(EcmMzfDraw ecmmzfdraw)", "testcase": false, "constructor": false, "invocations": ["isEmpty", "getDrawCode", "isEmpty", "getRemark", "getZhMsg", "setStatus", "setVerifyName", "isEmpty", "getVerifyName", "getVerifyName", "setVerifyStatus", "setVerifyTime", "getCurrentTimeSec", "rejectDrawCashById", "success"]}, "repository": {"repo_id": 104355653, "url": "https://github.com/chenjy16/mall", "language": "Java", "is_fork": false, "fork_count": 4, "stargazer_count": 5, "size": 403, "license": "licensed"}}