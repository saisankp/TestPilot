{"test_class": {"identifier": "SmallRyeReactiveMessagingLivenessCheckTest", "superclass": "", "interfaces": "", "fields": [], "file": "smallrye-reactive-messaging-health/src/test/java/io/smallrye/reactive/messaging/health/SmallRyeReactiveMessagingLivenessCheckTest.java"}, "test_case": {"identifier": "testWithTwoConnectors", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testWithTwoConnectors() {\n        SeContainerInitializer initializer = SeContainerInitializer.newInstance().disableDiscovery();\n        initializer.addBeanClasses(HealthCenter.class, MyReporterA.class, MyReporterB.class,\n                SmallRyeReactiveMessagingLivenessCheck.class);\n        SeContainer container = initializer.initialize();\n        SmallRyeReactiveMessagingLivenessCheck check = container.getBeanManager().createInstance()\n                .select(SmallRyeReactiveMessagingLivenessCheck.class, Liveness.Literal.INSTANCE).get();\n\n        assertThat(check.call().getState()).isEqualTo(HealthCheckResponse.State.UP);\n        assertThat(check.call().getData().orElse(null)).containsExactly(entry(\"my-channel\", \"[OK]\"));\n\n        MyReporterA a = container.getBeanManager().createInstance()\n                .select(MyReporterA.class, ConnectorLiteral.of(\"connector-a\")).get();\n\n        MyReporterB b = container.getBeanManager().createInstance()\n                .select(MyReporterB.class, ConnectorLiteral.of(\"connector-b\")).get();\n\n        a.toggle();\n\n        assertThat(check.call().getState()).isEqualTo(HealthCheckResponse.State.UP);\n\n        b.toggle();\n\n        assertThat(check.call().getState()).isEqualTo(HealthCheckResponse.State.DOWN);\n        assertThat(check.call().getData().orElse(null)).containsExactly(entry(\"my-channel\", \"[KO]\"));\n    }", "signature": "void testWithTwoConnectors()", "full_signature": "@Test public void testWithTwoConnectors()", "class_method_signature": "SmallRyeReactiveMessagingLivenessCheckTest.testWithTwoConnectors()", "testcase": true, "constructor": false, "invocations": ["disableDiscovery", "newInstance", "addBeanClasses", "initialize", "get", "select", "createInstance", "getBeanManager", "isEqualTo", "assertThat", "getState", "call", "containsExactly", "assertThat", "orElse", "getData", "call", "entry", "get", "select", "createInstance", "getBeanManager", "of", "get", "select", "createInstance", "getBeanManager", "of", "toggle", "isEqualTo", "assertThat", "getState", "call", "toggle", "isEqualTo", "assertThat", "getState", "call", "containsExactly", "assertThat", "orElse", "getData", "call", "entry"]}, "focal_class": {"identifier": "SmallRyeReactiveMessagingLivenessCheck", "superclass": "", "interfaces": "implements HealthCheck", "fields": [{"original_string": "@Inject\n    HealthCenter health;", "modifier": "@Inject", "type": "HealthCenter", "declarator": "health", "var_name": "health"}], "methods": [{"identifier": "call", "parameters": "()", "modifiers": "@Override public", "return": "HealthCheckResponse", "signature": "HealthCheckResponse call()", "full_signature": "@Override public HealthCheckResponse call()", "class_method_signature": "SmallRyeReactiveMessagingLivenessCheck.call()", "testcase": false, "constructor": false}], "file": "smallrye-reactive-messaging-health/src/main/java/io/smallrye/reactive/messaging/health/SmallRyeReactiveMessagingLivenessCheck.java"}, "focal_method": {"identifier": "call", "parameters": "()", "modifiers": "@Override public", "return": "HealthCheckResponse", "body": "@Override\n    public HealthCheckResponse call() {\n        HealthReport report = health.getLiveness();\n        return HealthChecks.getHealthCheck(report, \"liveness check\");\n    }", "signature": "HealthCheckResponse call()", "full_signature": "@Override public HealthCheckResponse call()", "class_method_signature": "SmallRyeReactiveMessagingLivenessCheck.call()", "testcase": false, "constructor": false, "invocations": ["getLiveness", "getHealthCheck"]}, "repository": {"repo_id": 153155267, "url": "https://github.com/smallrye/smallrye-reactive-messaging", "stars": 45, "created": "10/15/2018 5:36:05 PM +00:00", "updates": "2020-01-26T16:55:44+00:00", "fork": "False", "license": "licensed"}}