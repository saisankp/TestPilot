{"test_class": {"identifier": "KubeApiClientsTest", "superclass": "", "interfaces": "", "fields": [], "file": "titus-common-runtime/src/test/java/com/netflix/titus/runtime/connector/kubernetes/KubeApiClientsTest.java"}, "test_case": {"identifier": "testMapUri", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testMapUri() {\n        String uuid = UUID.randomUUID().toString();\n        String instanceId = \"i-07d1b67286b43458e\";\n        String path = \"/segment1_\" + uuid + \"/segment2_\" + instanceId;\n        assertThat(KubeApiClients.mapUri(newRequest(path))).isEqualTo(\"/segment1_/segment2_\");\n    }", "signature": "void testMapUri()", "full_signature": "@Test public void testMapUri()", "class_method_signature": "KubeApiClientsTest.testMapUri()", "testcase": true, "constructor": false, "invocations": ["toString", "randomUUID", "isEqualTo", "assertThat", "mapUri", "newRequest"]}, "focal_class": {"identifier": "KubeApiClients", "superclass": "", "interfaces": "", "fields": [{"original_string": "public static final Pattern UUID_PATTERN = Pattern.compile(\"[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}\");", "modifier": "public static final", "type": "Pattern", "declarator": "UUID_PATTERN = Pattern.compile(\"[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}\")", "var_name": "UUID_PATTERN"}, {"original_string": "public static final Pattern INSTANCE_ID_PATTERN = Pattern.compile(\"i-(\\\\p{Alnum}){17}+\");", "modifier": "public static final", "type": "Pattern", "declarator": "INSTANCE_ID_PATTERN = Pattern.compile(\"i-(\\\\p{Alnum}){17}+\")", "var_name": "INSTANCE_ID_PATTERN"}], "methods": [{"identifier": "createApiClient", "parameters": "(String metricsNamePrefix,\n                                            TitusRuntime titusRuntime,\n                                            long readTimeoutMs)", "modifiers": "public static", "return": "ApiClient", "signature": "ApiClient createApiClient(String metricsNamePrefix,\n                                            TitusRuntime titusRuntime,\n                                            long readTimeoutMs)", "full_signature": "public static ApiClient createApiClient(String metricsNamePrefix,\n                                            TitusRuntime titusRuntime,\n                                            long readTimeoutMs)", "class_method_signature": "KubeApiClients.createApiClient(String metricsNamePrefix,\n                                            TitusRuntime titusRuntime,\n                                            long readTimeoutMs)", "testcase": false, "constructor": false}, {"identifier": "createApiClient", "parameters": "(String kubeApiServerUrl,\n                                            String kubeConfigPath,\n                                            String metricsNamePrefix,\n                                            TitusRuntime titusRuntime,\n                                            long readTimeoutMs)", "modifiers": "public static", "return": "ApiClient", "signature": "ApiClient createApiClient(String kubeApiServerUrl,\n                                            String kubeConfigPath,\n                                            String metricsNamePrefix,\n                                            TitusRuntime titusRuntime,\n                                            long readTimeoutMs)", "full_signature": "public static ApiClient createApiClient(String kubeApiServerUrl,\n                                            String kubeConfigPath,\n                                            String metricsNamePrefix,\n                                            TitusRuntime titusRuntime,\n                                            long readTimeoutMs)", "class_method_signature": "KubeApiClients.createApiClient(String kubeApiServerUrl,\n                                            String kubeConfigPath,\n                                            String metricsNamePrefix,\n                                            TitusRuntime titusRuntime,\n                                            long readTimeoutMs)", "testcase": false, "constructor": false}, {"identifier": "createApiClient", "parameters": "(String kubeApiServerUrl,\n                                            String kubeConfigPath,\n                                            String metricsNamePrefix,\n                                            TitusRuntime titusRuntime,\n                                            Function<Request, String> uriMapper,\n                                            long readTimeoutMs)", "modifiers": "public static", "return": "ApiClient", "signature": "ApiClient createApiClient(String kubeApiServerUrl,\n                                            String kubeConfigPath,\n                                            String metricsNamePrefix,\n                                            TitusRuntime titusRuntime,\n                                            Function<Request, String> uriMapper,\n                                            long readTimeoutMs)", "full_signature": "public static ApiClient createApiClient(String kubeApiServerUrl,\n                                            String kubeConfigPath,\n                                            String metricsNamePrefix,\n                                            TitusRuntime titusRuntime,\n                                            Function<Request, String> uriMapper,\n                                            long readTimeoutMs)", "class_method_signature": "KubeApiClients.createApiClient(String kubeApiServerUrl,\n                                            String kubeConfigPath,\n                                            String metricsNamePrefix,\n                                            TitusRuntime titusRuntime,\n                                            Function<Request, String> uriMapper,\n                                            long readTimeoutMs)", "testcase": false, "constructor": false}, {"identifier": "checkKubeConnectivity", "parameters": "(ApiClient apiClient)", "modifiers": "public static", "return": "Optional<Throwable>", "signature": "Optional<Throwable> checkKubeConnectivity(ApiClient apiClient)", "full_signature": "public static Optional<Throwable> checkKubeConnectivity(ApiClient apiClient)", "class_method_signature": "KubeApiClients.checkKubeConnectivity(ApiClient apiClient)", "testcase": false, "constructor": false}, {"identifier": "mustHaveKubeConnectivity", "parameters": "(ApiClient apiClient)", "modifiers": "public static", "return": "ApiClient", "signature": "ApiClient mustHaveKubeConnectivity(ApiClient apiClient)", "full_signature": "public static ApiClient mustHaveKubeConnectivity(ApiClient apiClient)", "class_method_signature": "KubeApiClients.mustHaveKubeConnectivity(ApiClient apiClient)", "testcase": false, "constructor": false}, {"identifier": "createSharedInformerFactory", "parameters": "(String threadNamePrefix, ApiClient apiClient, TitusRuntime titusRuntime)", "modifiers": "public static", "return": "SharedInformerFactory", "signature": "SharedInformerFactory createSharedInformerFactory(String threadNamePrefix, ApiClient apiClient, TitusRuntime titusRuntime)", "full_signature": "public static SharedInformerFactory createSharedInformerFactory(String threadNamePrefix, ApiClient apiClient, TitusRuntime titusRuntime)", "class_method_signature": "KubeApiClients.createSharedInformerFactory(String threadNamePrefix, ApiClient apiClient, TitusRuntime titusRuntime)", "testcase": false, "constructor": false}, {"identifier": "mapUri", "parameters": "(Request r)", "modifiers": "static", "return": "String", "signature": "String mapUri(Request r)", "full_signature": "static String mapUri(Request r)", "class_method_signature": "KubeApiClients.mapUri(Request r)", "testcase": false, "constructor": false}, {"identifier": "removeAll", "parameters": "(Pattern pattern, String text)", "modifiers": "static", "return": "String", "signature": "String removeAll(Pattern pattern, String text)", "full_signature": "static String removeAll(Pattern pattern, String text)", "class_method_signature": "KubeApiClients.removeAll(Pattern pattern, String text)", "testcase": false, "constructor": false}], "file": "titus-common-runtime/src/main/java/com/netflix/titus/runtime/connector/kubernetes/KubeApiClients.java"}, "focal_method": {"identifier": "mapUri", "parameters": "(Request r)", "modifiers": "static", "return": "String", "body": "static String mapUri(Request r) {\n        String path = '/' + String.join(\"/\", r.url().pathSegments());\n        return removeAll(INSTANCE_ID_PATTERN, removeAll(UUID_PATTERN, path));\n    }", "signature": "String mapUri(Request r)", "full_signature": "static String mapUri(Request r)", "class_method_signature": "KubeApiClients.mapUri(Request r)", "testcase": false, "constructor": false, "invocations": ["join", "pathSegments", "url", "removeAll", "removeAll"]}, "repository": {"repo_id": 107330274, "url": "https://github.com/Netflix/titus-control-plane", "stars": 241, "created": "10/17/2017 10:20:55 PM +00:00", "updates": "2020-01-25T13:01:05+00:00", "fork": "False", "license": "licensed"}}