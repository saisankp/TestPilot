{"test_class": {"identifier": "PMMLRuleMappersFactoryTest", "superclass": "", "interfaces": "", "fields": [], "file": "kie-pmml-trusty/kie-pmml-evaluator/kie-pmml-evaluator-assembler/src/test/java/org/kie/pmml/evaluator/assembler/factories/PMMLRuleMappersFactoryTest.java"}, "test_case": {"identifier": "getPredictionRuleMapperSource", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void getPredictionRuleMapperSource() {\n        final String pmmlRuleMapper = \"PMMLRuleMapperImpl\";\n        final String packageName = \"PACKAGE\";\n        final List<String> generatedRuleMappers = IntStream.range(0, 4).mapToObj(index -> packageName + \".\" +\n                \"subPack\" + index + \".\" + pmmlRuleMapper).collect(Collectors.toList());\n        String retrieved = PMMLRuleMappersFactory.getPMMLRuleMappersSource(packageName,\n                                                                           generatedRuleMappers);\n        assertNotNull(retrieved);\n        String expected = String.format(\"package %s;\", packageName);\n        assertTrue(retrieved.contains(expected));\n        List<String> mod = generatedRuleMappers.stream().map(gen -> \"new \" + gen + \"()\").collect(Collectors.toList());\n        expected = \"Arrays.asList(\" + String.join(\", \", mod) + \");\";\n        assertTrue(retrieved.contains(expected));\n    }", "signature": "void getPredictionRuleMapperSource()", "full_signature": "@Test public void getPredictionRuleMapperSource()", "class_method_signature": "PMMLRuleMappersFactoryTest.getPredictionRuleMapperSource()", "testcase": true, "constructor": false, "invocations": ["collect", "mapToObj", "range", "toList", "getPMMLRuleMappersSource", "assertNotNull", "format", "assertTrue", "contains", "collect", "map", "stream", "toList", "join", "assertTrue", "contains"]}, "focal_class": {"identifier": "PMMLRuleMappersFactory", "superclass": "", "interfaces": "", "fields": [{"original_string": "public static final String KIE_PMML_RULE_MAPPERS_CLASS_NAME = \"PMMLRuleMappersImpl\";", "modifier": "public static final", "type": "String", "declarator": "KIE_PMML_RULE_MAPPERS_CLASS_NAME = \"PMMLRuleMappersImpl\"", "var_name": "KIE_PMML_RULE_MAPPERS_CLASS_NAME"}, {"original_string": "static final String KIE_PMML_RULE_MAPPERS_TEMPLATE_JAVA = \"PMMLRuleMappersTemplate.tmpl\";", "modifier": "static final", "type": "String", "declarator": "KIE_PMML_RULE_MAPPERS_TEMPLATE_JAVA = \"PMMLRuleMappersTemplate.tmpl\"", "var_name": "KIE_PMML_RULE_MAPPERS_TEMPLATE_JAVA"}], "methods": [{"identifier": "PMMLRuleMappersFactory", "parameters": "()", "modifiers": "private", "return": "", "signature": " PMMLRuleMappersFactory()", "full_signature": "private  PMMLRuleMappersFactory()", "class_method_signature": "PMMLRuleMappersFactory.PMMLRuleMappersFactory()", "testcase": false, "constructor": true}, {"identifier": "getPMMLRuleMappersSource", "parameters": "(final String packageName, final List<String> generatedRuleMappers)", "modifiers": "public static", "return": "String", "signature": "String getPMMLRuleMappersSource(final String packageName, final List<String> generatedRuleMappers)", "full_signature": "public static String getPMMLRuleMappersSource(final String packageName, final List<String> generatedRuleMappers)", "class_method_signature": "PMMLRuleMappersFactory.getPMMLRuleMappersSource(final String packageName, final List<String> generatedRuleMappers)", "testcase": false, "constructor": false}], "file": "kie-pmml-trusty/kie-pmml-evaluator/kie-pmml-evaluator-assembler/src/main/java/org/kie/pmml/evaluator/assembler/factories/PMMLRuleMappersFactory.java"}, "focal_method": {"identifier": "getPMMLRuleMappersSource", "parameters": "(final String packageName, final List<String> generatedRuleMappers)", "modifiers": "public static", "return": "String", "body": "public static String getPMMLRuleMappersSource(final String packageName, final List<String> generatedRuleMappers) {\n        CompilationUnit cloneCU = JavaParserUtils.getKiePMMLModelCompilationUnit(KIE_PMML_RULE_MAPPERS_CLASS_NAME, packageName, KIE_PMML_RULE_MAPPERS_TEMPLATE_JAVA, KIE_PMML_RULE_MAPPERS_CLASS_NAME);\n        ClassOrInterfaceDeclaration typeDeclaration = (ClassOrInterfaceDeclaration) cloneCU.getTypes().get(0);\n        FieldDeclaration ruleNameField =\n                typeDeclaration.getFieldByName(\"pmmlRuleMappers\").orElseThrow(() -> new RuntimeException(\"The template \" + KIE_PMML_RULE_MAPPERS_TEMPLATE_JAVA + \" has been modified.\"));\n        final List<Expression> nodeList = generatedRuleMappers.stream()\n                .map(generatedRuleMapper -> {\n                    ObjectCreationExpr objectCreationExpr = new ObjectCreationExpr();\n                    objectCreationExpr.setType(generatedRuleMapper);\n                    return objectCreationExpr;\n                })\n                .collect(Collectors.toList());\n        NodeList<Expression> expressions = NodeList.nodeList(nodeList);\n        MethodCallExpr methodCallExpr = new MethodCallExpr(new NameExpr(\"Arrays\"), \"asList\", expressions);\n        ruleNameField.getVariables().get(0).setInitializer(methodCallExpr);\n        return cloneCU.toString();\n    }", "signature": "String getPMMLRuleMappersSource(final String packageName, final List<String> generatedRuleMappers)", "full_signature": "public static String getPMMLRuleMappersSource(final String packageName, final List<String> generatedRuleMappers)", "class_method_signature": "PMMLRuleMappersFactory.getPMMLRuleMappersSource(final String packageName, final List<String> generatedRuleMappers)", "testcase": false, "constructor": false, "invocations": ["getKiePMMLModelCompilationUnit", "get", "getTypes", "orElseThrow", "getFieldByName", "collect", "map", "stream", "setType", "toList", "nodeList", "setInitializer", "get", "getVariables", "toString"]}, "repository": {"repo_id": 1381673, "url": "https://github.com/kiegroup/drools", "stars": 2733, "created": "2/18/2011 8:37:05 AM +00:00", "updates": "2020-01-27T13:12:15+00:00", "fork": "False", "license": "licensed"}}