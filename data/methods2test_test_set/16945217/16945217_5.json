{"test_class": {"identifier": "RuleCompatibleHelperTest", "superclass": "", "interfaces": "", "fields": [], "file": "tddl-rule/src/test/java/com/taobao/tddl/rule/RuleCompatibleHelperTest.java"}, "test_case": {"identifier": "testCompatible_le", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testCompatible_le() {\n        try {\n            Resource resource = new PathMatchingResourcePatternResolver().getResource(\"classpath:compatible/le-spring-context.xml\");\n            String ruleStr = StringUtils.join(IOUtils.readLines(resource.getInputStream()), SystemUtils.LINE_SEPARATOR);\n            ApplicationContext context = new StringXmlApplicationContext(RuleCompatibleHelper.compatibleRule(ruleStr));\n            VirtualTableRoot vtr1 = (VirtualTableRoot) context.getBean(\"vtabroot\");\n            Assert.assertNotNull(vtr1);\n        } catch (IOException e) {\n            Assert.fail(ExceptionUtils.getFullStackTrace(e));\n        }\n    }", "signature": "void testCompatible_le()", "full_signature": "@Test public void testCompatible_le()", "class_method_signature": "RuleCompatibleHelperTest.testCompatible_le()", "testcase": true, "constructor": false, "invocations": ["getResource", "join", "readLines", "getInputStream", "compatibleRule", "getBean", "assertNotNull", "fail", "getFullStackTrace"]}, "focal_class": {"identifier": "RuleCompatibleHelper", "superclass": "", "interfaces": "", "fields": [{"original_string": "public static final String RULE_CURRENT_ROOT_NAME   = \"com.taobao.tddl.rule.VirtualTableRoot\";", "modifier": "public static final", "type": "String", "declarator": "RULE_CURRENT_ROOT_NAME   = \"com.taobao.tddl.rule.VirtualTableRoot\"", "var_name": "RULE_CURRENT_ROOT_NAME"}, {"original_string": "public static final String RULE_CURRENT_TABLE_NAME  = \"com.taobao.tddl.rule.TableRule\";", "modifier": "public static final", "type": "String", "declarator": "RULE_CURRENT_TABLE_NAME  = \"com.taobao.tddl.rule.TableRule\"", "var_name": "RULE_CURRENT_TABLE_NAME"}, {"original_string": "public static final String RULE_INTERACT_ROOT_NAME  = \"com.taobao.tddl.interact.rule.VirtualTableRoot\";", "modifier": "public static final", "type": "String", "declarator": "RULE_INTERACT_ROOT_NAME  = \"com.taobao.tddl.interact.rule.VirtualTableRoot\"", "var_name": "RULE_INTERACT_ROOT_NAME"}, {"original_string": "public static final String RULE_INTERACT_TABLE_NAME = \"com.taobao.tddl.interact.rule.TableRule\";", "modifier": "public static final", "type": "String", "declarator": "RULE_INTERACT_TABLE_NAME = \"com.taobao.tddl.interact.rule.TableRule\"", "var_name": "RULE_INTERACT_TABLE_NAME"}, {"original_string": "public static final String RULE_LE_ROOT_NAME        = \"com.taobao.tddl.rule.le.VirtualTableRoot\";", "modifier": "public static final", "type": "String", "declarator": "RULE_LE_ROOT_NAME        = \"com.taobao.tddl.rule.le.VirtualTableRoot\"", "var_name": "RULE_LE_ROOT_NAME"}, {"original_string": "public static final String RULE_LE_TABLE_NAME       = \"com.taobao.tddl.rule.le.TableRule\";", "modifier": "public static final", "type": "String", "declarator": "RULE_LE_TABLE_NAME       = \"com.taobao.tddl.rule.le.TableRule\"", "var_name": "RULE_LE_TABLE_NAME"}, {"original_string": "public static final String RULE_LE2_ROOT_NAME       = \"com.taobao.tddl.rule.VirtualTableRoot\";", "modifier": "public static final", "type": "String", "declarator": "RULE_LE2_ROOT_NAME       = \"com.taobao.tddl.rule.VirtualTableRoot\"", "var_name": "RULE_LE2_ROOT_NAME"}, {"original_string": "public static final String RULE_LE2_TABLE_NAME      = \"com.taobao.tddl.rule.config.TableRule\";", "modifier": "public static final", "type": "String", "declarator": "RULE_LE2_TABLE_NAME      = \"com.taobao.tddl.rule.config.TableRule\"", "var_name": "RULE_LE2_TABLE_NAME"}], "methods": [{"identifier": "compatibleRule", "parameters": "(String ruleStr)", "modifiers": "public static", "return": "String", "signature": "String compatibleRule(String ruleStr)", "full_signature": "public static String compatibleRule(String ruleStr)", "class_method_signature": "RuleCompatibleHelper.compatibleRule(String ruleStr)", "testcase": false, "constructor": false}], "file": "tddl-rule/src/main/java/com/taobao/tddl/rule/RuleCompatibleHelper.java"}, "focal_method": {"identifier": "compatibleRule", "parameters": "(String ruleStr)", "modifiers": "public static", "return": "String", "body": "public static String compatibleRule(String ruleStr) {\n        ruleStr = StringUtils.replace(ruleStr, RULE_INTERACT_ROOT_NAME, RULE_CURRENT_ROOT_NAME);\n        ruleStr = StringUtils.replace(ruleStr, RULE_INTERACT_TABLE_NAME, RULE_CURRENT_TABLE_NAME);\n\n        ruleStr = StringUtils.replace(ruleStr, RULE_LE_ROOT_NAME, RULE_CURRENT_ROOT_NAME);\n        ruleStr = StringUtils.replace(ruleStr, RULE_LE_TABLE_NAME, RULE_CURRENT_TABLE_NAME);\n\n        // ruleStr = StringUtils.replace(ruleStr, RULE_LE2_ROOT_NAME,\n        // RULE_CURRENT_ROOT_NAME);\n        ruleStr = StringUtils.replace(ruleStr, RULE_LE2_TABLE_NAME, RULE_CURRENT_TABLE_NAME);\n        return ruleStr;\n    }", "signature": "String compatibleRule(String ruleStr)", "full_signature": "public static String compatibleRule(String ruleStr)", "class_method_signature": "RuleCompatibleHelper.compatibleRule(String ruleStr)", "testcase": false, "constructor": false, "invocations": ["replace", "replace", "replace", "replace", "replace"]}, "repository": {"repo_id": 16945217, "url": "https://github.com/cpsing/tddl", "language": "Java", "is_fork": false, "fork_count": 126, "stargazer_count": 31, "size": 3247, "license": "licensed"}}