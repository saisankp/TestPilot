{"test_class": {"identifier": "CompositeFormatDetectorTest", "superclass": "extends AbstractSchemaTestUtils", "interfaces": "", "fields": [{"original_string": "@Autowired\n    CompositeFormatDetector formatDetector;", "modifier": "@Autowired", "type": "CompositeFormatDetector", "declarator": "formatDetector", "var_name": "formatDetector"}], "file": "dataprep-backend-service/src/test/java/org/talend/dataprep/schema/CompositeFormatDetectorTest.java"}, "test_case": {"identifier": "read_xls_that_can_be_parsed_as_csv_TDP_375", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void read_xls_that_can_be_parsed_as_csv_TDP_375() throws Exception {\n\n        String fileName = \"xls/TDP-375_xsl_read_as_csv.xls\";\n\n        try (InputStream inputStream = this.getClass().getResourceAsStream(fileName)) {\n            Format actual = formatDetector.detect(inputStream);\n            Assert.assertNotNull(actual);\n            assertTrue(actual.getFormatFamily() instanceof XlsFormatFamily);\n            assertEquals(XlsFormatFamily.MEDIA_TYPE, actual.getFormatFamily().getMediaType());\n            assertEquals(\"UTF-8\", actual.getEncoding());\n        }\n\n    }", "signature": "void read_xls_that_can_be_parsed_as_csv_TDP_375()", "full_signature": "@Test public void read_xls_that_can_be_parsed_as_csv_TDP_375()", "class_method_signature": "CompositeFormatDetectorTest.read_xls_that_can_be_parsed_as_csv_TDP_375()", "testcase": true, "constructor": false, "invocations": ["getResourceAsStream", "getClass", "detect", "assertNotNull", "assertTrue", "getFormatFamily", "assertEquals", "getMediaType", "getFormatFamily", "assertEquals", "getEncoding"]}, "focal_class": {"identifier": "CompositeFormatDetector", "superclass": "", "interfaces": "implements Detector", "fields": [{"original_string": "@Autowired\n    private UnsupportedFormatFamily unsupportedFormatFamily;", "modifier": "@Autowired\n    private", "type": "UnsupportedFormatFamily", "declarator": "unsupportedFormatFamily", "var_name": "unsupportedFormatFamily"}, {"original_string": "@Autowired\n    private List<Detector> detectors;", "modifier": "@Autowired\n    private", "type": "List<Detector>", "declarator": "detectors", "var_name": "detectors"}], "methods": [{"identifier": "detect", "parameters": "(Metadata metadata, TikaInputStream inputStream)", "modifiers": "@Override public", "return": "Format", "signature": "Format detect(Metadata metadata, TikaInputStream inputStream)", "full_signature": "@Override public Format detect(Metadata metadata, TikaInputStream inputStream)", "class_method_signature": "CompositeFormatDetector.detect(Metadata metadata, TikaInputStream inputStream)", "testcase": false, "constructor": false}], "file": "dataprep-backend-service/src/main/java/org/talend/dataprep/schema/CompositeFormatDetector.java"}, "focal_method": {"identifier": "detect", "parameters": "(Metadata metadata, TikaInputStream inputStream)", "modifiers": "@Override public", "return": "Format", "body": "@Override\n    public Format detect(Metadata metadata, TikaInputStream inputStream) throws IOException {\n\n        Format result = null;\n        for (Detector detector : detectors) {\n            result = detector.detect(metadata, inputStream);\n            if (result != null)\n                break;\n        }\n        if (result == null) {\n            result = new Format(unsupportedFormatFamily, FormatUtils.DEFAULT_ENCODING);\n        }\n        return result;\n    }", "signature": "Format detect(Metadata metadata, TikaInputStream inputStream)", "full_signature": "@Override public Format detect(Metadata metadata, TikaInputStream inputStream)", "class_method_signature": "CompositeFormatDetector.detect(Metadata metadata, TikaInputStream inputStream)", "testcase": false, "constructor": false, "invocations": ["detect"]}, "repository": {"repo_id": 26644682, "url": "https://github.com/Talend/data-prep", "language": "Java", "is_fork": false, "fork_count": 29, "stargazer_count": 53, "size": 70450, "license": "licensed"}}