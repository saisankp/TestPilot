{"test_class": {"identifier": "FileNetworkerTest", "superclass": "", "interfaces": "", "fields": [], "file": "dubbo-remoting/dubbo-remoting-p2p/src/test/java/org/apache/dubbo/remoting/p2p/support/FileNetworkerTest.java"}, "test_case": {"identifier": "testJoin", "parameters": "(@TempDir Path folder)", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testJoin(@TempDir Path folder) throws RemotingException, InterruptedException {\n        final String groupURL = \"file:///\" + folder.getFileName().toAbsolutePath();\n\n        FileNetworker networker = new FileNetworker();\n        Group group = networker.lookup(URL.valueOf(groupURL));\n\n        final CountDownLatch countDownLatch = new CountDownLatch(1);\n        Peer peer1 = group.join(URL.valueOf(\"exchange://0.0.0.0:\" + NetUtils.getAvailablePort() + \"?exchanger=header\"), new ChannelHandlerAdapter() {\n            @Override\n            public void received(Channel channel, Object message) {\n                countDownLatch.countDown();\n            }\n        });\n        Peer peer2 = group.join(URL.valueOf(\"exchange://0.0.0.0:\" + NetUtils.getAvailablePort() + \"?exchanger=header\"),\n                mock(ChannelHandlerAdapter.class));\n\n        while (true) {\n            long count = countDownLatch.getCount();\n            if (count > 0) {\n                break;\n            }\n            for (Channel channel : peer1.getChannels()) {\n                channel.send(0, false);\n                channel.send(\"hello world!\");\n            }\n            TimeUnit.MILLISECONDS.sleep(50);\n        }\n\n\n        peer2.close();\n        peer1.close();\n    }", "signature": "void testJoin(@TempDir Path folder)", "full_signature": "@Test public void testJoin(@TempDir Path folder)", "class_method_signature": "FileNetworkerTest.testJoin(@TempDir Path folder)", "testcase": true, "constructor": false, "invocations": ["toAbsolutePath", "getFileName", "lookup", "valueOf", "join", "valueOf", "getAvailablePort", "countDown", "join", "valueOf", "getAvailablePort", "mock", "getCount", "getChannels", "send", "send", "sleep", "close", "close"]}, "focal_class": {"identifier": "FileNetworker", "superclass": "", "interfaces": "implements Networker", "fields": [], "methods": [{"identifier": "lookup", "parameters": "(URL url)", "modifiers": "@Override public", "return": "Group", "signature": "Group lookup(URL url)", "full_signature": "@Override public Group lookup(URL url)", "class_method_signature": "FileNetworker.lookup(URL url)", "testcase": false, "constructor": false}], "file": "dubbo-remoting/dubbo-remoting-p2p/src/main/java/org/apache/dubbo/remoting/p2p/support/FileNetworker.java"}, "focal_method": {"identifier": "lookup", "parameters": "(URL url)", "modifiers": "@Override public", "return": "Group", "body": "@Override\n    public Group lookup(URL url) throws RemotingException {\n        return new FileGroup(url);\n    }", "signature": "Group lookup(URL url)", "full_signature": "@Override public Group lookup(URL url)", "class_method_signature": "FileNetworker.lookup(URL url)", "testcase": false, "constructor": false, "invocations": []}, "repository": {"repo_id": 4710920, "url": "https://github.com/apache/dubbo", "stars": 30960, "created": "6/19/2012 7:56:02 AM +00:00", "updates": "2020-01-27T14:21:03+00:00", "fork": "False", "license": "licensed"}}