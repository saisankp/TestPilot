{"test_class": {"identifier": "UserResourceEndpointControllerTest", "superclass": "extends AbstractSCIMTest", "interfaces": "", "fields": [{"original_string": "private UserResourceEndpointController controller;", "modifier": "private", "type": "UserResourceEndpointController", "declarator": "controller", "var_name": "controller"}, {"original_string": "private ObjectMapper mapper;", "modifier": "private", "type": "ObjectMapper", "declarator": "mapper", "var_name": "mapper"}], "file": "perun-scim/src/test/java/cz/metacentrum/perun/scim/api/endpoints/UserResourceEndpointControllerTest.java"}, "test_case": {"identifier": "testGetUser", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n\tpublic void testGetUser() throws Exception {\n\t\tUserSCIM user = prepareExpectedResult();\n\t\tString expectedJson = mapper.writeValueAsString(user);\n\t\tResponse expectedResponse = Response.ok(expectedJson).build();\n\n\t\tResponse result = controller.getUser(user.getId().toString());\n\n\t\tif (result.getStatus() != 200) {\n\t\t\tfail();\n\t\t}\n\t\tassertEquals(\"expected user should equal with result obtained from SCIM REST API\",\n\t\t\t\texpectedResponse.getEntity(), result.getEntity());\n\t}", "signature": "void testGetUser()", "full_signature": "@Test public void testGetUser()", "class_method_signature": "UserResourceEndpointControllerTest.testGetUser()", "testcase": true, "constructor": false, "invocations": ["prepareExpectedResult", "writeValueAsString", "build", "ok", "getUser", "toString", "getId", "getStatus", "fail", "assertEquals", "getEntity", "getEntity"]}, "focal_class": {"identifier": "UserResourceEndpointController", "superclass": "", "interfaces": "", "fields": [{"original_string": "private final Logger log = LoggerFactory.getLogger(UserResourceEndpointController.class);", "modifier": "private final", "type": "Logger", "declarator": "log = LoggerFactory.getLogger(UserResourceEndpointController.class)", "var_name": "log"}, {"original_string": "private final PerunSession session;", "modifier": "private final", "type": "PerunSession", "declarator": "session", "var_name": "session"}, {"original_string": "private final PerunBl perunBl;", "modifier": "private final", "type": "PerunBl", "declarator": "perunBl", "var_name": "perunBl"}], "methods": [{"identifier": "UserResourceEndpointController", "parameters": "(PerunSession session)", "modifiers": "public", "return": "", "signature": " UserResourceEndpointController(PerunSession session)", "full_signature": "public  UserResourceEndpointController(PerunSession session)", "class_method_signature": "UserResourceEndpointController.UserResourceEndpointController(PerunSession session)", "testcase": false, "constructor": true}, {"identifier": "getUser", "parameters": "(String identifier)", "modifiers": "public", "return": "Response", "signature": "Response getUser(String identifier)", "full_signature": "public Response getUser(String identifier)", "class_method_signature": "UserResourceEndpointController.getUser(String identifier)", "testcase": false, "constructor": false}, {"identifier": "mapPerunUserToScimUser", "parameters": "(User perunUser)", "modifiers": "private", "return": "UserSCIM", "signature": "UserSCIM mapPerunUserToScimUser(User perunUser)", "full_signature": "private UserSCIM mapPerunUserToScimUser(User perunUser)", "class_method_signature": "UserResourceEndpointController.mapPerunUserToScimUser(User perunUser)", "testcase": false, "constructor": false}, {"identifier": "getEmail", "parameters": "(User perunUser)", "modifiers": "private", "return": "EmailSCIM", "signature": "EmailSCIM getEmail(User perunUser)", "full_signature": "private EmailSCIM getEmail(User perunUser)", "class_method_signature": "UserResourceEndpointController.getEmail(User perunUser)", "testcase": false, "constructor": false}], "file": "perun-scim/src/main/java/cz/metacentrum/perun/scim/api/endpoints/UserResourceEndpointController.java"}, "focal_method": {"identifier": "getUser", "parameters": "(String identifier)", "modifiers": "public", "return": "Response", "body": "public Response getUser(String identifier) throws SCIMException {\n\t\tlog.debug(\"Calling SCIM REST method  getUser by id {}\", identifier);\n\t\tif (identifier == null) {\n\t\t\tthrow new NullPointerException(\"identifier is null\");\n\t\t}\n\t\ttry {\n\t\t\tUser perunUser = perunBl.getUsersManagerBl().getUserById(session, Integer.parseInt(identifier));\n\t\t\tObjectMapper mapper = new ObjectMapper();\n\t\t\treturn Response.ok(mapper.writeValueAsString(mapPerunUserToScimUser(perunUser))).build();\n\t\t} catch (InternalErrorException ex) {\n\t\t\tlog.warn(\"Internal exception occured while getting user with id {}.\", identifier);\n\t\t\treturn Response.status(Response.Status.INTERNAL_SERVER_ERROR).build();\n\t\t} catch (UserNotExistsException ex) {\n\t\t\tlog.warn(\"User with id {} does not exists.\", identifier);\n\t\t\treturn Response.status(Response.Status.NOT_FOUND).build();\n\t\t} catch (IOException ex) {\n\t\t\tthrow new SCIMException(\"Cannot convert user resource to json string\", ex);\n\t\t}\n\t}", "signature": "Response getUser(String identifier)", "full_signature": "public Response getUser(String identifier)", "class_method_signature": "UserResourceEndpointController.getUser(String identifier)", "testcase": false, "constructor": false, "invocations": ["debug", "getUserById", "getUsersManagerBl", "parseInt", "build", "ok", "writeValueAsString", "mapPerunUserToScimUser", "warn", "build", "status", "warn", "build", "status"]}, "repository": {"repo_id": 4085998, "url": "https://github.com/CESNET/perun", "stars": 38, "created": "4/20/2012 11:55:38 AM +00:00", "updates": "2020-01-27T09:51:13+00:00", "fork": "False", "license": "licensed"}}