{"test_class": {"identifier": "GrapesClientTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "public static final String PROPERTY_PORT = \"server.mock.http.port\";", "modifier": "public static final", "type": "String", "declarator": "PROPERTY_PORT = \"server.mock.http.port\"", "var_name": "PROPERTY_PORT"}, {"original_string": "private static final String DEFAULT_PORT = \"8074\";", "modifier": "private static final", "type": "String", "declarator": "DEFAULT_PORT = \"8074\"", "var_name": "DEFAULT_PORT"}, {"original_string": "@Rule\n    public ExpectedException exc = ExpectedException.none();", "modifier": "@Rule\n    public", "type": "ExpectedException", "declarator": "exc = ExpectedException.none()", "var_name": "exc"}, {"original_string": "@ClassRule\n    public static WireMockRule wireMockRule = new WireMockRule(Integer.valueOf(System.getProperty(PROPERTY_PORT, DEFAULT_PORT)));", "modifier": "@ClassRule\n    public static", "type": "WireMockRule", "declarator": "wireMockRule = new WireMockRule(Integer.valueOf(System.getProperty(PROPERTY_PORT, DEFAULT_PORT)))", "var_name": "wireMockRule"}, {"original_string": "private static GrapesClient client;", "modifier": "private static", "type": "GrapesClient", "declarator": "client", "var_name": "client"}, {"original_string": "private static String serverPort;", "modifier": "private static", "type": "String", "declarator": "serverPort", "var_name": "serverPort"}], "file": "utils/src/test/java/org/axway/grapes/utils/client/GrapesClientTest.java"}, "test_case": {"identifier": "getArtifactsNotFound", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void getArtifactsNotFound() throws IOException{\n        stubFor(get(urlEqualTo(\"/\" + ServerAPI.ARTIFACT_RESOURCE + ServerAPI.GET_ALL + \"?hasLicense=false\"))\n                .willReturn(aResponse().withStatus(Status.NOT_FOUND.getStatusCode())));\n\n        Exception exception = null;\n\n        try{\n            client.getArtifacts(false);\n\n        }catch (Exception e) {\n            exception = e;\n        }\n        assertNotNull(exception);\n    }", "signature": "void getArtifactsNotFound()", "full_signature": "@Test public void getArtifactsNotFound()", "class_method_signature": "GrapesClientTest.getArtifactsNotFound()", "testcase": true, "constructor": false, "invocations": ["stubFor", "willReturn", "get", "urlEqualTo", "withStatus", "aResponse", "getStatusCode", "getArtifacts", "assertNotNull"]}, "focal_class": {"identifier": "GrapesClient", "superclass": "", "interfaces": "", "fields": [{"original_string": "public static final String FAILED_TO_GET_CORPORATE_FILTERS = \"Failed to get Corporate filters\";", "modifier": "public static final", "type": "String", "declarator": "FAILED_TO_GET_CORPORATE_FILTERS = \"Failed to get Corporate filters\"", "var_name": "FAILED_TO_GET_CORPORATE_FILTERS"}, {"original_string": "public static final String FAILED_TO_GET_MODULE = \"Failed to %s module %s, version %s\";", "modifier": "public static final", "type": "String", "declarator": "FAILED_TO_GET_MODULE = \"Failed to %s module %s, version %s\"", "var_name": "FAILED_TO_GET_MODULE"}, {"original_string": "private static final Logger LOG = LoggerFactory.getLogger(GrapesClient.class);", "modifier": "private static final", "type": "Logger", "declarator": "LOG = LoggerFactory.getLogger(GrapesClient.class)", "var_name": "LOG"}, {"original_string": "private static final String HTTP_STATUS_TEMPLATE_MSG = \"%s. Http status: %s\";", "modifier": "private static final", "type": "String", "declarator": "HTTP_STATUS_TEMPLATE_MSG = \"%s. Http status: %s\"", "var_name": "HTTP_STATUS_TEMPLATE_MSG"}, {"original_string": "private final String serverURL;", "modifier": "private final", "type": "String", "declarator": "serverURL", "var_name": "serverURL"}, {"original_string": "private Integer timeout = 60000;", "modifier": "private", "type": "Integer", "declarator": "timeout = 60000", "var_name": "timeout"}], "methods": [{"identifier": "GrapesClient", "parameters": "(final String host, final String port)", "modifiers": "public", "return": "", "signature": " GrapesClient(final String host, final String port)", "full_signature": "public  GrapesClient(final String host, final String port)", "class_method_signature": "GrapesClient.GrapesClient(final String host, final String port)", "testcase": false, "constructor": true}, {"identifier": "setTimeout", "parameters": "(final Integer timeout)", "modifiers": "public", "return": "void", "signature": "void setTimeout(final Integer timeout)", "full_signature": "public void setTimeout(final Integer timeout)", "class_method_signature": "GrapesClient.setTimeout(final Integer timeout)", "testcase": false, "constructor": false}, {"identifier": "getServerURL", "parameters": "()", "modifiers": "public", "return": "String", "signature": "String getServerURL()", "full_signature": "public String getServerURL()", "class_method_signature": "GrapesClient.getServerURL()", "testcase": false, "constructor": false}, {"identifier": "getClient", "parameters": "()", "modifiers": "private", "return": "Client", "signature": "Client getClient()", "full_signature": "private Client getClient()", "class_method_signature": "GrapesClient.getClient()", "testcase": false, "constructor": false}, {"identifier": "getClient", "parameters": "(final String user, final String password)", "modifiers": "private", "return": "Client", "signature": "Client getClient(final String user, final String password)", "full_signature": "private Client getClient(final String user, final String password)", "class_method_signature": "GrapesClient.getClient(final String user, final String password)", "testcase": false, "constructor": false}, {"identifier": "isServerAvailable", "parameters": "()", "modifiers": "public", "return": "boolean", "signature": "boolean isServerAvailable()", "full_signature": "public boolean isServerAvailable()", "class_method_signature": "GrapesClient.isServerAvailable()", "testcase": false, "constructor": false}, {"identifier": "postBuildInfo", "parameters": "(final String moduleName, final String moduleVersion, final Map<String, String> buildInfo, final String user, final String password)", "modifiers": "public", "return": "void", "signature": "void postBuildInfo(final String moduleName, final String moduleVersion, final Map<String, String> buildInfo, final String user, final String password)", "full_signature": "public void postBuildInfo(final String moduleName, final String moduleVersion, final Map<String, String> buildInfo, final String user, final String password)", "class_method_signature": "GrapesClient.postBuildInfo(final String moduleName, final String moduleVersion, final Map<String, String> buildInfo, final String user, final String password)", "testcase": false, "constructor": false}, {"identifier": "getBuildInfo", "parameters": "(final String moduleName, final String moduleVersion)", "modifiers": "public", "return": "Map<String, String>", "signature": "Map<String, String> getBuildInfo(final String moduleName, final String moduleVersion)", "full_signature": "public Map<String, String> getBuildInfo(final String moduleName, final String moduleVersion)", "class_method_signature": "GrapesClient.getBuildInfo(final String moduleName, final String moduleVersion)", "testcase": false, "constructor": false}, {"identifier": "postModule", "parameters": "(final Module module, final String user, final String password)", "modifiers": "public", "return": "void", "signature": "void postModule(final Module module, final String user, final String password)", "full_signature": "public void postModule(final Module module, final String user, final String password)", "class_method_signature": "GrapesClient.postModule(final Module module, final String user, final String password)", "testcase": false, "constructor": false}, {"identifier": "deleteModule", "parameters": "(final String name, final String version, final String user, final String password)", "modifiers": "public", "return": "void", "signature": "void deleteModule(final String name, final String version, final String user, final String password)", "full_signature": "public void deleteModule(final String name, final String version, final String user, final String password)", "class_method_signature": "GrapesClient.deleteModule(final String name, final String version, final String user, final String password)", "testcase": false, "constructor": false}, {"identifier": "getModule", "parameters": "(final String name, final String version)", "modifiers": "public", "return": "Module", "signature": "Module getModule(final String name, final String version)", "full_signature": "public Module getModule(final String name, final String version)", "class_method_signature": "GrapesClient.getModule(final String name, final String version)", "testcase": false, "constructor": false}, {"identifier": "getModules", "parameters": "(final Map<String, String> filters)", "modifiers": "public", "return": "List<Module>", "signature": "List<Module> getModules(final Map<String, String> filters)", "full_signature": "public List<Module> getModules(final Map<String, String> filters)", "class_method_signature": "GrapesClient.getModules(final Map<String, String> filters)", "testcase": false, "constructor": false}, {"identifier": "getModuleVersions", "parameters": "(final String name)", "modifiers": "public", "return": "List<String>", "signature": "List<String> getModuleVersions(final String name)", "full_signature": "public List<String> getModuleVersions(final String name)", "class_method_signature": "GrapesClient.getModuleVersions(final String name)", "testcase": false, "constructor": false}, {"identifier": "getModulePromotionStatus", "parameters": "(final String name, final String version)", "modifiers": "public", "return": "Boolean", "signature": "Boolean getModulePromotionStatus(final String name, final String version)", "full_signature": "public Boolean getModulePromotionStatus(final String name, final String version)", "class_method_signature": "GrapesClient.getModulePromotionStatus(final String name, final String version)", "testcase": false, "constructor": false}, {"identifier": "promoteModule", "parameters": "(final String name, final String version, final String user, final String password)", "modifiers": "public", "return": "void", "signature": "void promoteModule(final String name, final String version, final String user, final String password)", "full_signature": "public void promoteModule(final String name, final String version, final String user, final String password)", "class_method_signature": "GrapesClient.promoteModule(final String name, final String version, final String user, final String password)", "testcase": false, "constructor": false}, {"identifier": "moduleCanBePromoted", "parameters": "(final String name, final String version)", "modifiers": "public", "return": "Boolean", "signature": "Boolean moduleCanBePromoted(final String name, final String version)", "full_signature": "public Boolean moduleCanBePromoted(final String name, final String version)", "class_method_signature": "GrapesClient.moduleCanBePromoted(final String name, final String version)", "testcase": false, "constructor": false}, {"identifier": "getModulePromotionReportRaw", "parameters": "(final String name,\n                                             final String version,\n                                             final boolean excludeSnapshotValidation,\n                                             final Class<T> entityClass)", "modifiers": "public", "return": "T", "signature": "T getModulePromotionReportRaw(final String name,\n                                             final String version,\n                                             final boolean excludeSnapshotValidation,\n                                             final Class<T> entityClass)", "full_signature": "public T getModulePromotionReportRaw(final String name,\n                                             final String version,\n                                             final boolean excludeSnapshotValidation,\n                                             final Class<T> entityClass)", "class_method_signature": "GrapesClient.getModulePromotionReportRaw(final String name,\n                                             final String version,\n                                             final boolean excludeSnapshotValidation,\n                                             final Class<T> entityClass)", "testcase": false, "constructor": false}, {"identifier": "getModulePromotionReport", "parameters": "(final String name, final String version)", "modifiers": "public", "return": "PromotionEvaluationReport", "signature": "PromotionEvaluationReport getModulePromotionReport(final String name, final String version)", "full_signature": "public PromotionEvaluationReport getModulePromotionReport(final String name, final String version)", "class_method_signature": "GrapesClient.getModulePromotionReport(final String name, final String version)", "testcase": false, "constructor": false}, {"identifier": "postArtifact", "parameters": "(final Artifact artifact, final String user, final String password)", "modifiers": "public", "return": "void", "signature": "void postArtifact(final Artifact artifact, final String user, final String password)", "full_signature": "public void postArtifact(final Artifact artifact, final String user, final String password)", "class_method_signature": "GrapesClient.postArtifact(final Artifact artifact, final String user, final String password)", "testcase": false, "constructor": false}, {"identifier": "deleteArtifact", "parameters": "(final String gavc, final String user, final String password)", "modifiers": "public", "return": "void", "signature": "void deleteArtifact(final String gavc, final String user, final String password)", "full_signature": "public void deleteArtifact(final String gavc, final String user, final String password)", "class_method_signature": "GrapesClient.deleteArtifact(final String gavc, final String user, final String password)", "testcase": false, "constructor": false}, {"identifier": "getArtifact", "parameters": "(final String gavc)", "modifiers": "public", "return": "Artifact", "signature": "Artifact getArtifact(final String gavc)", "full_signature": "public Artifact getArtifact(final String gavc)", "class_method_signature": "GrapesClient.getArtifact(final String gavc)", "testcase": false, "constructor": false}, {"identifier": "getArtifacts", "parameters": "(final Boolean hasLicense)", "modifiers": "public", "return": "List<Artifact>", "signature": "List<Artifact> getArtifacts(final Boolean hasLicense)", "full_signature": "public List<Artifact> getArtifacts(final Boolean hasLicense)", "class_method_signature": "GrapesClient.getArtifacts(final Boolean hasLicense)", "testcase": false, "constructor": false}, {"identifier": "postDoNotUseArtifact", "parameters": "(final String gavc, final Boolean doNotUse, final String user, final String password)", "modifiers": "public", "return": "void", "signature": "void postDoNotUseArtifact(final String gavc, final Boolean doNotUse, final String user, final String password)", "full_signature": "public void postDoNotUseArtifact(final String gavc, final Boolean doNotUse, final String user, final String password)", "class_method_signature": "GrapesClient.postDoNotUseArtifact(final String gavc, final Boolean doNotUse, final String user, final String password)", "testcase": false, "constructor": false}, {"identifier": "isMarkedAsDoNotUse", "parameters": "(final String gavc)", "modifiers": "public", "return": "Boolean", "signature": "Boolean isMarkedAsDoNotUse(final String gavc)", "full_signature": "public Boolean isMarkedAsDoNotUse(final String gavc)", "class_method_signature": "GrapesClient.isMarkedAsDoNotUse(final String gavc)", "testcase": false, "constructor": false}, {"identifier": "getArtifactVersions", "parameters": "(final String gavc)", "modifiers": "public", "return": "List<String>", "signature": "List<String> getArtifactVersions(final String gavc)", "full_signature": "public List<String> getArtifactVersions(final String gavc)", "class_method_signature": "GrapesClient.getArtifactVersions(final String gavc)", "testcase": false, "constructor": false}, {"identifier": "getArtifactLastVersion", "parameters": "(final String gavc)", "modifiers": "public", "return": "String", "signature": "String getArtifactLastVersion(final String gavc)", "full_signature": "public String getArtifactLastVersion(final String gavc)", "class_method_signature": "GrapesClient.getArtifactLastVersion(final String gavc)", "testcase": false, "constructor": false}, {"identifier": "getArtifactModule", "parameters": "(final String gavc)", "modifiers": "public", "return": "Module", "signature": "Module getArtifactModule(final String gavc)", "full_signature": "public Module getArtifactModule(final String gavc)", "class_method_signature": "GrapesClient.getArtifactModule(final String gavc)", "testcase": false, "constructor": false}, {"identifier": "addLicense", "parameters": "(final String gavc, final String licenseId, final String user, final String password)", "modifiers": "public", "return": "void", "signature": "void addLicense(final String gavc, final String licenseId, final String user, final String password)", "full_signature": "public void addLicense(final String gavc, final String licenseId, final String user, final String password)", "class_method_signature": "GrapesClient.addLicense(final String gavc, final String licenseId, final String user, final String password)", "testcase": false, "constructor": false}, {"identifier": "postLicense", "parameters": "(final License license, final String user, final String password)", "modifiers": "public", "return": "void", "signature": "void postLicense(final License license, final String user, final String password)", "full_signature": "public void postLicense(final License license, final String user, final String password)", "class_method_signature": "GrapesClient.postLicense(final License license, final String user, final String password)", "testcase": false, "constructor": false}, {"identifier": "deleteLicense", "parameters": "(final String licenseId, final String user, final String password)", "modifiers": "public", "return": "void", "signature": "void deleteLicense(final String licenseId, final String user, final String password)", "full_signature": "public void deleteLicense(final String licenseId, final String user, final String password)", "class_method_signature": "GrapesClient.deleteLicense(final String licenseId, final String user, final String password)", "testcase": false, "constructor": false}, {"identifier": "getLicense", "parameters": "(final String licenseId)", "modifiers": "public", "return": "License", "signature": "License getLicense(final String licenseId)", "full_signature": "public License getLicense(final String licenseId)", "class_method_signature": "GrapesClient.getLicense(final String licenseId)", "testcase": false, "constructor": false}, {"identifier": "approveLicense", "parameters": "(final String licenseId, final Boolean approve, final String user, final String password)", "modifiers": "public", "return": "void", "signature": "void approveLicense(final String licenseId, final Boolean approve, final String user, final String password)", "full_signature": "public void approveLicense(final String licenseId, final Boolean approve, final String user, final String password)", "class_method_signature": "GrapesClient.approveLicense(final String licenseId, final Boolean approve, final String user, final String password)", "testcase": false, "constructor": false}, {"identifier": "getModuleAncestors", "parameters": "(final String moduleName, final String moduleVersion)", "modifiers": "public", "return": "List<Dependency>", "signature": "List<Dependency> getModuleAncestors(final String moduleName, final String moduleVersion)", "full_signature": "public List<Dependency> getModuleAncestors(final String moduleName, final String moduleVersion)", "class_method_signature": "GrapesClient.getModuleAncestors(final String moduleName, final String moduleVersion)", "testcase": false, "constructor": false}, {"identifier": "getModuleDependencies", "parameters": "(final String moduleName, final String moduleVersion, final Boolean fullRecursive, final Boolean corporate, final Boolean thirdParty)", "modifiers": "public", "return": "List<Dependency>", "signature": "List<Dependency> getModuleDependencies(final String moduleName, final String moduleVersion, final Boolean fullRecursive, final Boolean corporate, final Boolean thirdParty)", "full_signature": "public List<Dependency> getModuleDependencies(final String moduleName, final String moduleVersion, final Boolean fullRecursive, final Boolean corporate, final Boolean thirdParty)", "class_method_signature": "GrapesClient.getModuleDependencies(final String moduleName, final String moduleVersion, final Boolean fullRecursive, final Boolean corporate, final Boolean thirdParty)", "testcase": false, "constructor": false}, {"identifier": "getModuleOrganization", "parameters": "(final String moduleName, final String moduleVersion)", "modifiers": "public", "return": "Organization", "signature": "Organization getModuleOrganization(final String moduleName, final String moduleVersion)", "full_signature": "public Organization getModuleOrganization(final String moduleName, final String moduleVersion)", "class_method_signature": "GrapesClient.getModuleOrganization(final String moduleName, final String moduleVersion)", "testcase": false, "constructor": false}, {"identifier": "getProductModuleNames", "parameters": "(final String projectId)", "modifiers": "public", "return": "List<String>", "signature": "List<String> getProductModuleNames(final String projectId)", "full_signature": "public List<String> getProductModuleNames(final String projectId)", "class_method_signature": "GrapesClient.getProductModuleNames(final String projectId)", "testcase": false, "constructor": false}, {"identifier": "getAllProductNames", "parameters": "()", "modifiers": "public", "return": "List<String>", "signature": "List<String> getAllProductNames()", "full_signature": "public List<String> getAllProductNames()", "class_method_signature": "GrapesClient.getAllProductNames()", "testcase": false, "constructor": false}, {"identifier": "getProductDelivery", "parameters": "(final String productLogicalName, final String commercialName, final String commercialVersion)", "modifiers": "public", "return": "Delivery", "signature": "Delivery getProductDelivery(final String productLogicalName, final String commercialName, final String commercialVersion)", "full_signature": "public Delivery getProductDelivery(final String productLogicalName, final String commercialName, final String commercialVersion)", "class_method_signature": "GrapesClient.getProductDelivery(final String productLogicalName, final String commercialName, final String commercialVersion)", "testcase": false, "constructor": false}, {"identifier": "getProductDeliveries", "parameters": "(final String productLogicalName)", "modifiers": "public", "return": "List<Delivery>", "signature": "List<Delivery> getProductDeliveries(final String productLogicalName)", "full_signature": "public List<Delivery> getProductDeliveries(final String productLogicalName)", "class_method_signature": "GrapesClient.getProductDeliveries(final String productLogicalName)", "testcase": false, "constructor": false}, {"identifier": "createProductDelivery", "parameters": "(final String productLogicalName, final Delivery delivery, final String user, final String password)", "modifiers": "public", "return": "void", "signature": "void createProductDelivery(final String productLogicalName, final Delivery delivery, final String user, final String password)", "full_signature": "public void createProductDelivery(final String productLogicalName, final Delivery delivery, final String user, final String password)", "class_method_signature": "GrapesClient.createProductDelivery(final String productLogicalName, final Delivery delivery, final String user, final String password)", "testcase": false, "constructor": false}], "file": "utils/src/main/java/org/axway/grapes/utils/client/GrapesClient.java"}, "focal_method": {"identifier": "getArtifacts", "parameters": "(final Boolean hasLicense)", "modifiers": "public", "return": "List<Artifact>", "body": "public List<Artifact> getArtifacts(final Boolean hasLicense) throws GrapesCommunicationException {\n        final Client client = getClient();\n        final WebResource resource = client.resource(serverURL).path(RequestUtils.getArtifactsPath());\n        final ClientResponse response = resource.queryParam(ServerAPI.HAS_LICENSE_PARAM, hasLicense.toString())\n                .accept(MediaType.APPLICATION_JSON).get(ClientResponse.class);\n\n        client.destroy();\n        if(ClientResponse.Status.OK.getStatusCode() != response.getStatus()){\n            final String message = \"Failed to get artifacts\";\n            if(LOG.isErrorEnabled()) {\n                LOG.error(String.format(HTTP_STATUS_TEMPLATE_MSG, message, response.getStatus()));\n            }\n            throw new GrapesCommunicationException(message, response.getStatus());\n        }\n\n        return response.getEntity(ArtifactList.class);\n    }", "signature": "List<Artifact> getArtifacts(final Boolean hasLicense)", "full_signature": "public List<Artifact> getArtifacts(final Boolean hasLicense)", "class_method_signature": "GrapesClient.getArtifacts(final Boolean hasLicense)", "testcase": false, "constructor": false, "invocations": ["getClient", "path", "resource", "getArtifactsPath", "get", "accept", "queryParam", "toString", "destroy", "getStatusCode", "getStatus", "isErrorEnabled", "error", "format", "getStatus", "getStatus", "getEntity"]}, "repository": {"repo_id": 14858974, "url": "https://github.com/Axway/Grapes", "language": "Java", "is_fork": false, "fork_count": 9, "stargazer_count": 8, "size": 3620, "license": "licensed"}}