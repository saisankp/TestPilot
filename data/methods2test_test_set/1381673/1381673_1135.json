{"test_class": {"identifier": "KiePMMLSegmentFactoryTest", "superclass": "extends AbstractKiePMMLFactoryTest", "interfaces": "", "fields": [{"original_string": "private static CompilationUnit COMPILATION_UNIT;", "modifier": "private static", "type": "CompilationUnit", "declarator": "COMPILATION_UNIT", "var_name": "COMPILATION_UNIT"}, {"original_string": "private static ClassOrInterfaceDeclaration MODEL_TEMPLATE;", "modifier": "private static", "type": "ClassOrInterfaceDeclaration", "declarator": "MODEL_TEMPLATE", "var_name": "MODEL_TEMPLATE"}], "file": "kie-pmml-trusty/kie-pmml-models/kie-pmml-models-mining/kie-pmml-models-mining-compiler/src/test/java/org/kie/pmml/models/mining/compiler/factories/KiePMMLSegmentFactoryTest.java"}, "test_case": {"identifier": "setConstructor", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void setConstructor() {\n        ConstructorDeclaration constructorDeclaration = MODEL_TEMPLATE.getDefaultConstructor().get();\n        String segmentName = \"SEGMENTNAME\";\n        String generatedClassName = \"GENERATEDCLASSNAME\";\n        String predicateClassName = \"PREDICATECLASSNAME\";\n        String kiePMMLModelClass = \"KIEPMMLMODELCLASS\";\n        double weight = 12.22;\n        KiePMMLSegmentFactory.setConstructor(segmentName,\n                                             generatedClassName,\n                                             constructorDeclaration,\n                                             predicateClassName,\n                                             kiePMMLModelClass,\n                                             weight);\n        Map<Integer, Expression> superInvocationExpressionsMap = new HashMap<>();\n        superInvocationExpressionsMap.put(0, new NameExpr(String.format(\"\\\"%s\\\"\", segmentName)));\n        ClassOrInterfaceType classOrInterfaceType = parseClassOrInterfaceType(predicateClassName);\n        ObjectCreationExpr objectCreationExpr = new ObjectCreationExpr();\n        objectCreationExpr.setType(classOrInterfaceType);\n        superInvocationExpressionsMap.put(2, new NameExpr(objectCreationExpr.toString()));\n        classOrInterfaceType = parseClassOrInterfaceType(kiePMMLModelClass);\n        objectCreationExpr = new ObjectCreationExpr();\n        objectCreationExpr.setType(classOrInterfaceType);\n        superInvocationExpressionsMap.put(3, new NameExpr(objectCreationExpr.toString()));\n        Map<String, Expression> assignExpressionMap = new HashMap<>();\n        assignExpressionMap.put(\"weight\", new DoubleLiteralExpr(weight));\n        assignExpressionMap.put(\"id\", new StringLiteralExpr(segmentName));\n        assertTrue(commonEvaluateConstructor(constructorDeclaration, generatedClassName,\n                                             superInvocationExpressionsMap, assignExpressionMap));\n    }", "signature": "void setConstructor()", "full_signature": "@Test public void setConstructor()", "class_method_signature": "KiePMMLSegmentFactoryTest.setConstructor()", "testcase": true, "constructor": false, "invocations": ["get", "getDefaultConstructor", "setConstructor", "put", "format", "parseClassOrInterfaceType", "setType", "put", "toString", "parseClassOrInterfaceType", "setType", "put", "toString", "put", "put", "assertTrue", "commonEvaluateConstructor"]}, "focal_class": {"identifier": "KiePMMLSegmentFactory", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final Logger logger = LoggerFactory.getLogger(KiePMMLSegmentFactory.class.getName());", "modifier": "private static final", "type": "Logger", "declarator": "logger = LoggerFactory.getLogger(KiePMMLSegmentFactory.class.getName())", "var_name": "logger"}, {"original_string": "static final String KIE_PMML_SEGMENT_TEMPLATE_JAVA = \"KiePMMLSegmentTemplate.tmpl\";", "modifier": "static final", "type": "String", "declarator": "KIE_PMML_SEGMENT_TEMPLATE_JAVA = \"KiePMMLSegmentTemplate.tmpl\"", "var_name": "KIE_PMML_SEGMENT_TEMPLATE_JAVA"}, {"original_string": "static final String KIE_PMML_SEGMENT_TEMPLATE = \"KiePMMLSegmentTemplate\";", "modifier": "static final", "type": "String", "declarator": "KIE_PMML_SEGMENT_TEMPLATE = \"KiePMMLSegmentTemplate\"", "var_name": "KIE_PMML_SEGMENT_TEMPLATE"}, {"original_string": "private static final String GET_SEGMENTS= \"getSegments {}\";", "modifier": "private static final", "type": "String", "declarator": "GET_SEGMENTS= \"getSegments {}\"", "var_name": "GET_SEGMENTS"}, {"original_string": "private static final String GET_SEGMENT= \"getSegment {}\";", "modifier": "private static final", "type": "String", "declarator": "GET_SEGMENT= \"getSegment {}\"", "var_name": "GET_SEGMENT"}], "methods": [{"identifier": "KiePMMLSegmentFactory", "parameters": "()", "modifiers": "private", "return": "", "signature": " KiePMMLSegmentFactory()", "full_signature": "private  KiePMMLSegmentFactory()", "class_method_signature": "KiePMMLSegmentFactory.KiePMMLSegmentFactory()", "testcase": false, "constructor": true}, {"identifier": "getSegments", "parameters": "(final DataDictionary dataDictionary,\n                                                   final TransformationDictionary transformationDictionary,\n                                                   final List<Segment> segments,\n                                                   final KnowledgeBuilder kBuilder)", "modifiers": "public static", "return": "List<KiePMMLSegment>", "signature": "List<KiePMMLSegment> getSegments(final DataDictionary dataDictionary,\n                                                   final TransformationDictionary transformationDictionary,\n                                                   final List<Segment> segments,\n                                                   final KnowledgeBuilder kBuilder)", "full_signature": "public static List<KiePMMLSegment> getSegments(final DataDictionary dataDictionary,\n                                                   final TransformationDictionary transformationDictionary,\n                                                   final List<Segment> segments,\n                                                   final KnowledgeBuilder kBuilder)", "class_method_signature": "KiePMMLSegmentFactory.getSegments(final DataDictionary dataDictionary,\n                                                   final TransformationDictionary transformationDictionary,\n                                                   final List<Segment> segments,\n                                                   final KnowledgeBuilder kBuilder)", "testcase": false, "constructor": false}, {"identifier": "getSegment", "parameters": "(final DataDictionary dataDictionary,\n                                            final TransformationDictionary transformationDictionary,\n                                            final Segment segment,\n                                            final KnowledgeBuilder kBuilder)", "modifiers": "public static", "return": "KiePMMLSegment", "signature": "KiePMMLSegment getSegment(final DataDictionary dataDictionary,\n                                            final TransformationDictionary transformationDictionary,\n                                            final Segment segment,\n                                            final KnowledgeBuilder kBuilder)", "full_signature": "public static KiePMMLSegment getSegment(final DataDictionary dataDictionary,\n                                            final TransformationDictionary transformationDictionary,\n                                            final Segment segment,\n                                            final KnowledgeBuilder kBuilder)", "class_method_signature": "KiePMMLSegmentFactory.getSegment(final DataDictionary dataDictionary,\n                                            final TransformationDictionary transformationDictionary,\n                                            final Segment segment,\n                                            final KnowledgeBuilder kBuilder)", "testcase": false, "constructor": false}, {"identifier": "getSegmentsSourcesMap", "parameters": "(final String parentPackageName,\n                                                            final DataDictionary dataDictionary,\n                                                            final TransformationDictionary transformationDictionary,\n                                                            final List<Segment> segments,\n                                                            final KnowledgeBuilder kBuilder,\n                                                            final List<KiePMMLModel> nestedModels)", "modifiers": "public static", "return": "Map<String, String>", "signature": "Map<String, String> getSegmentsSourcesMap(final String parentPackageName,\n                                                            final DataDictionary dataDictionary,\n                                                            final TransformationDictionary transformationDictionary,\n                                                            final List<Segment> segments,\n                                                            final KnowledgeBuilder kBuilder,\n                                                            final List<KiePMMLModel> nestedModels)", "full_signature": "public static Map<String, String> getSegmentsSourcesMap(final String parentPackageName,\n                                                            final DataDictionary dataDictionary,\n                                                            final TransformationDictionary transformationDictionary,\n                                                            final List<Segment> segments,\n                                                            final KnowledgeBuilder kBuilder,\n                                                            final List<KiePMMLModel> nestedModels)", "class_method_signature": "KiePMMLSegmentFactory.getSegmentsSourcesMap(final String parentPackageName,\n                                                            final DataDictionary dataDictionary,\n                                                            final TransformationDictionary transformationDictionary,\n                                                            final List<Segment> segments,\n                                                            final KnowledgeBuilder kBuilder,\n                                                            final List<KiePMMLModel> nestedModels)", "testcase": false, "constructor": false}, {"identifier": "getSegmentSourcesMap", "parameters": "(\n            final String parentPackageName,\n            final DataDictionary dataDictionary,\n            final TransformationDictionary transformationDictionary,\n            final Segment segment,\n            final KnowledgeBuilder kBuilder,\n            final List<KiePMMLModel> nestedModels)", "modifiers": "public static", "return": "Map<String, String>", "signature": "Map<String, String> getSegmentSourcesMap(\n            final String parentPackageName,\n            final DataDictionary dataDictionary,\n            final TransformationDictionary transformationDictionary,\n            final Segment segment,\n            final KnowledgeBuilder kBuilder,\n            final List<KiePMMLModel> nestedModels)", "full_signature": "public static Map<String, String> getSegmentSourcesMap(\n            final String parentPackageName,\n            final DataDictionary dataDictionary,\n            final TransformationDictionary transformationDictionary,\n            final Segment segment,\n            final KnowledgeBuilder kBuilder,\n            final List<KiePMMLModel> nestedModels)", "class_method_signature": "KiePMMLSegmentFactory.getSegmentSourcesMap(\n            final String parentPackageName,\n            final DataDictionary dataDictionary,\n            final TransformationDictionary transformationDictionary,\n            final Segment segment,\n            final KnowledgeBuilder kBuilder,\n            final List<KiePMMLModel> nestedModels)", "testcase": false, "constructor": false}, {"identifier": "getSegmentSourcesMap", "parameters": "(\n            final String packageName,\n            final DataDictionary dataDictionary,\n            final Segment segment)", "modifiers": "public static", "return": "Map<String, String>", "signature": "Map<String, String> getSegmentSourcesMap(\n            final String packageName,\n            final DataDictionary dataDictionary,\n            final Segment segment)", "full_signature": "public static Map<String, String> getSegmentSourcesMap(\n            final String packageName,\n            final DataDictionary dataDictionary,\n            final Segment segment)", "class_method_signature": "KiePMMLSegmentFactory.getSegmentSourcesMap(\n            final String packageName,\n            final DataDictionary dataDictionary,\n            final Segment segment)", "testcase": false, "constructor": false}, {"identifier": "setConstructor", "parameters": "(final String segmentName,\n                               final String generatedClassName,\n                               final ConstructorDeclaration constructorDeclaration,\n                               final String predicateClassName,\n                               final String kiePMMLModelClass,\n                               final double weight)", "modifiers": "static", "return": "void", "signature": "void setConstructor(final String segmentName,\n                               final String generatedClassName,\n                               final ConstructorDeclaration constructorDeclaration,\n                               final String predicateClassName,\n                               final String kiePMMLModelClass,\n                               final double weight)", "full_signature": "static void setConstructor(final String segmentName,\n                               final String generatedClassName,\n                               final ConstructorDeclaration constructorDeclaration,\n                               final String predicateClassName,\n                               final String kiePMMLModelClass,\n                               final double weight)", "class_method_signature": "KiePMMLSegmentFactory.setConstructor(final String segmentName,\n                               final String generatedClassName,\n                               final ConstructorDeclaration constructorDeclaration,\n                               final String predicateClassName,\n                               final String kiePMMLModelClass,\n                               final double weight)", "testcase": false, "constructor": false}], "file": "kie-pmml-trusty/kie-pmml-models/kie-pmml-models-mining/kie-pmml-models-mining-compiler/src/main/java/org/kie/pmml/models/mining/compiler/factories/KiePMMLSegmentFactory.java"}, "focal_method": {"identifier": "setConstructor", "parameters": "(final String segmentName,\n                               final String generatedClassName,\n                               final ConstructorDeclaration constructorDeclaration,\n                               final String predicateClassName,\n                               final String kiePMMLModelClass,\n                               final double weight)", "modifiers": "static", "return": "void", "body": "static void setConstructor(final String segmentName,\n                               final String generatedClassName,\n                               final ConstructorDeclaration constructorDeclaration,\n                               final String predicateClassName,\n                               final String kiePMMLModelClass,\n                               final double weight) {\n        setConstructorSuperNameInvocation(generatedClassName, constructorDeclaration, segmentName);\n        final BlockStmt body = constructorDeclaration.getBody();\n        final ExplicitConstructorInvocationStmt superStatement = CommonCodegenUtils.getExplicitConstructorInvocationStmt(body)\n                .orElseThrow(() -> new KiePMMLException(String.format(MISSING_CONSTRUCTOR_IN_BODY, body)));\n        ClassOrInterfaceType classOrInterfaceType = parseClassOrInterfaceType(predicateClassName);\n        ObjectCreationExpr objectCreationExpr = new ObjectCreationExpr();\n        objectCreationExpr.setType(classOrInterfaceType);\n        CommonCodegenUtils.setExplicitConstructorInvocationArgument(superStatement, \"kiePMMLPredicate\", objectCreationExpr.toString());\n        classOrInterfaceType = parseClassOrInterfaceType(kiePMMLModelClass);\n        objectCreationExpr = new ObjectCreationExpr();\n        objectCreationExpr.setType(classOrInterfaceType);\n        CommonCodegenUtils.setExplicitConstructorInvocationArgument(superStatement, \"model\", objectCreationExpr.toString());\n        CommonCodegenUtils.setAssignExpressionValue(body, \"weight\", new DoubleLiteralExpr(weight));\n        CommonCodegenUtils.setAssignExpressionValue(body, \"id\", new StringLiteralExpr(segmentName));\n    }", "signature": "void setConstructor(final String segmentName,\n                               final String generatedClassName,\n                               final ConstructorDeclaration constructorDeclaration,\n                               final String predicateClassName,\n                               final String kiePMMLModelClass,\n                               final double weight)", "full_signature": "static void setConstructor(final String segmentName,\n                               final String generatedClassName,\n                               final ConstructorDeclaration constructorDeclaration,\n                               final String predicateClassName,\n                               final String kiePMMLModelClass,\n                               final double weight)", "class_method_signature": "KiePMMLSegmentFactory.setConstructor(final String segmentName,\n                               final String generatedClassName,\n                               final ConstructorDeclaration constructorDeclaration,\n                               final String predicateClassName,\n                               final String kiePMMLModelClass,\n                               final double weight)", "testcase": false, "constructor": false, "invocations": ["setConstructorSuperNameInvocation", "getBody", "orElseThrow", "getExplicitConstructorInvocationStmt", "format", "parseClassOrInterfaceType", "setType", "setExplicitConstructorInvocationArgument", "toString", "parseClassOrInterfaceType", "setType", "setExplicitConstructorInvocationArgument", "toString", "setAssignExpressionValue", "setAssignExpressionValue"]}, "repository": {"repo_id": 1381673, "url": "https://github.com/kiegroup/drools", "stars": 2733, "created": "2/18/2011 8:37:05 AM +00:00", "updates": "2020-01-27T13:12:15+00:00", "fork": "False", "license": "licensed"}}