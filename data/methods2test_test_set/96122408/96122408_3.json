{"test_class": {"identifier": "MigrationUtilsTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static Response response;", "modifier": "private static", "type": "Response", "declarator": "response", "var_name": "response"}, {"original_string": "public static CassandraOperationImpl cassandraOperationImpl;", "modifier": "public static", "type": "CassandraOperationImpl", "declarator": "cassandraOperationImpl", "var_name": "cassandraOperationImpl"}], "file": "actors/user/src/test/java/org/sunbird/user/util/MigrationUtilsTest.java"}, "test_case": {"identifier": "testmarkUserAsRejected", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n  public void testmarkUserAsRejected() {\n    ShadowUser shadowUser =\n        new ShadowUser.ShadowUserBuilder()\n            .setChannel(\"anyChannel\")\n            .setUserExtId(\"anyUserExtId\")\n            .build();\n    Map<String, Object> compositeKeysMap = new HashMap<>();\n    compositeKeysMap.put(JsonKey.USER_EXT_ID, \"anyUserExtId\");\n    compositeKeysMap.put(JsonKey.CHANNEL, \"anyChannel\");\n    when(cassandraOperationImpl.updateRecord(\n            JsonKey.SUNBIRD, JsonKey.SHADOW_USER, new HashMap<>(), compositeKeysMap))\n        .thenReturn(response);\n    boolean isRecordUpdated = MigrationUtils.markUserAsRejected(shadowUser);\n    Assert.assertEquals(true, isRecordUpdated);\n  }", "signature": "void testmarkUserAsRejected()", "full_signature": "@Test public void testmarkUserAsRejected()", "class_method_signature": "MigrationUtilsTest.testmarkUserAsRejected()", "testcase": true, "constructor": false, "invocations": ["build", "setUserExtId", "setChannel", "put", "put", "thenReturn", "when", "updateRecord", "markUserAsRejected", "assertEquals"]}, "focal_class": {"identifier": "MigrationUtils", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static CassandraOperation cassandraOperation = ServiceFactory.getInstance();", "modifier": "private static", "type": "CassandraOperation", "declarator": "cassandraOperation = ServiceFactory.getInstance()", "var_name": "cassandraOperation"}, {"original_string": "private static ObjectMapper mapper = new ObjectMapper();", "modifier": "private static", "type": "ObjectMapper", "declarator": "mapper = new ObjectMapper()", "var_name": "mapper"}], "methods": [{"identifier": "getRecordByUserId", "parameters": "(String userId)", "modifiers": "public static", "return": "ShadowUser", "signature": "ShadowUser getRecordByUserId(String userId)", "full_signature": "public static ShadowUser getRecordByUserId(String userId)", "class_method_signature": "MigrationUtils.getRecordByUserId(String userId)", "testcase": false, "constructor": false}, {"identifier": "updateRecord", "parameters": "(Map<String, Object> propertiesMap, String channel, String userExtId)", "modifiers": "public static", "return": "boolean", "signature": "boolean updateRecord(Map<String, Object> propertiesMap, String channel, String userExtId)", "full_signature": "public static boolean updateRecord(Map<String, Object> propertiesMap, String channel, String userExtId)", "class_method_signature": "MigrationUtils.updateRecord(Map<String, Object> propertiesMap, String channel, String userExtId)", "testcase": false, "constructor": false}, {"identifier": "markUserAsRejected", "parameters": "(ShadowUser shadowUser)", "modifiers": "public static", "return": "boolean", "signature": "boolean markUserAsRejected(ShadowUser shadowUser)", "full_signature": "public static boolean markUserAsRejected(ShadowUser shadowUser)", "class_method_signature": "MigrationUtils.markUserAsRejected(ShadowUser shadowUser)", "testcase": false, "constructor": false}, {"identifier": "updateClaimStatus", "parameters": "(ShadowUser shadowUser,int claimStatus)", "modifiers": "public static", "return": "boolean", "signature": "boolean updateClaimStatus(ShadowUser shadowUser,int claimStatus)", "full_signature": "public static boolean updateClaimStatus(ShadowUser shadowUser,int claimStatus)", "class_method_signature": "MigrationUtils.updateClaimStatus(ShadowUser shadowUser,int claimStatus)", "testcase": false, "constructor": false}, {"identifier": "getEligibleUsersById", "parameters": "(String userId,Map<String, Object> propsMap)", "modifiers": "public static", "return": "List<ShadowUser>", "signature": "List<ShadowUser> getEligibleUsersById(String userId,Map<String, Object> propsMap)", "full_signature": "public static List<ShadowUser> getEligibleUsersById(String userId,Map<String, Object> propsMap)", "class_method_signature": "MigrationUtils.getEligibleUsersById(String userId,Map<String, Object> propsMap)", "testcase": false, "constructor": false}, {"identifier": "getEligibleUsersById", "parameters": "(String userId)", "modifiers": "public static", "return": "List<ShadowUser>", "signature": "List<ShadowUser> getEligibleUsersById(String userId)", "full_signature": "public static List<ShadowUser> getEligibleUsersById(String userId)", "class_method_signature": "MigrationUtils.getEligibleUsersById(String userId)", "testcase": false, "constructor": false}], "file": "actors/user/src/main/java/org/sunbird/user/util/MigrationUtils.java"}, "focal_method": {"identifier": "markUserAsRejected", "parameters": "(ShadowUser shadowUser)", "modifiers": "public static", "return": "boolean", "body": "public static boolean markUserAsRejected(ShadowUser shadowUser) {\n        Map<String, Object> propertiesMap = new HashMap<>();\n        propertiesMap.put(JsonKey.CLAIM_STATUS, ClaimStatus.REJECTED.getValue());\n        propertiesMap.put(JsonKey.UPDATED_ON, new Timestamp(System.currentTimeMillis()));\n        boolean isRecordUpdated=updateRecord(propertiesMap, shadowUser.getChannel(), shadowUser.getUserExtId());\n        ProjectLogger.log(\"MigrationUtils:markUserAsRejected:update in cassandra  with userExtId\" + shadowUser.getUserExtId(),LoggerEnum.INFO.name());\n        return isRecordUpdated;\n    }", "signature": "boolean markUserAsRejected(ShadowUser shadowUser)", "full_signature": "public static boolean markUserAsRejected(ShadowUser shadowUser)", "class_method_signature": "MigrationUtils.markUserAsRejected(ShadowUser shadowUser)", "testcase": false, "constructor": false, "invocations": ["put", "getValue", "put", "currentTimeMillis", "updateRecord", "getChannel", "getUserExtId", "log", "getUserExtId", "name"]}, "repository": {"repo_id": 96122408, "url": "https://github.com/project-sunbird/sunbird-lms-mw", "language": "Java", "is_fork": false, "fork_count": 36, "stargazer_count": 5, "size": 15380, "license": "licensed"}}