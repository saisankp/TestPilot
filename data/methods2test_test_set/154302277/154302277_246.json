{"test_class": {"identifier": "ConnectRequestMessageProcessorTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final String DEVICE_IDENTIFICATION = \"LIGHT_MEASUREMENT_GATEWAY_001\";", "modifier": "private static final", "type": "String", "declarator": "DEVICE_IDENTIFICATION = \"LIGHT_MEASUREMENT_GATEWAY_001\"", "var_name": "DEVICE_IDENTIFICATION"}, {"original_string": "@InjectMocks\n    private ConnectRequestMessageProcessor connectRequestMessageProcessor;", "modifier": "@InjectMocks\n    private", "type": "ConnectRequestMessageProcessor", "declarator": "connectRequestMessageProcessor", "var_name": "connectRequestMessageProcessor"}, {"original_string": "@Mock\n    private Connection connection;", "modifier": "@Mock\n    private", "type": "Connection", "declarator": "connection", "var_name": "connection"}, {"original_string": "@Mock\n    private GeneralInterrogationService generalInterrogationService;", "modifier": "@Mock\n    private", "type": "GeneralInterrogationService", "declarator": "generalInterrogationService", "var_name": "generalInterrogationService"}], "file": "osgp/protocol-adapter-iec60870/osgp-protocol-adapter-iec60870/src/test/java/org/opensmartgridplatform/adapter/protocol/iec60870/infra/messaging/processors/ConnectRequestMessageProcessorTest.java"}, "test_case": {"identifier": "testProcessShouldSendGeneralInInterrogation", "parameters": "()", "modifiers": "@Test", "return": "void", "body": "@Test\n    void testProcessShouldSendGeneralInInterrogation() throws Exception {\n        // Arrange\n        final ConnectionParameters connectionParameters = ConnectionParameters.newBuilder()\n                .deviceIdentification(DEVICE_IDENTIFICATION)\n                .build();\n        final DeviceConnection deviceConnection = new DeviceConnection(this.connection, connectionParameters);\n        final RequestMetadata requestMetadata = RequestMetadataFactory.forDevice(DEVICE_IDENTIFICATION);\n\n        // Act\n        this.connectRequestMessageProcessor.process(deviceConnection, requestMetadata);\n\n        // Assert\n        verify(this.generalInterrogationService).sendGeneralInterrogation(deviceConnection, requestMetadata);\n    }", "signature": "void testProcessShouldSendGeneralInInterrogation()", "full_signature": "@Test void testProcessShouldSendGeneralInInterrogation()", "class_method_signature": "ConnectRequestMessageProcessorTest.testProcessShouldSendGeneralInInterrogation()", "testcase": true, "constructor": false, "invocations": ["build", "deviceIdentification", "newBuilder", "forDevice", "process", "sendGeneralInterrogation", "verify"]}, "focal_class": {"identifier": "ConnectRequestMessageProcessor", "superclass": "extends AbstractMessageProcessor", "interfaces": "", "fields": [{"original_string": "private static final Logger LOGGER = LoggerFactory.getLogger(ConnectRequestMessageProcessor.class);", "modifier": "private static final", "type": "Logger", "declarator": "LOGGER = LoggerFactory.getLogger(ConnectRequestMessageProcessor.class)", "var_name": "LOGGER"}, {"original_string": "@Autowired\n    private GeneralInterrogationService generalInterrogationService;", "modifier": "@Autowired\n    private", "type": "GeneralInterrogationService", "declarator": "generalInterrogationService", "var_name": "generalInterrogationService"}], "methods": [{"identifier": "ConnectRequestMessageProcessor", "parameters": "()", "modifiers": "public", "return": "", "signature": " ConnectRequestMessageProcessor()", "full_signature": "public  ConnectRequestMessageProcessor()", "class_method_signature": "ConnectRequestMessageProcessor.ConnectRequestMessageProcessor()", "testcase": false, "constructor": true}, {"identifier": "process", "parameters": "(final ClientConnection deviceConnection, final RequestMetadata requestMetadata)", "modifiers": "@Override public", "return": "void", "signature": "void process(final ClientConnection deviceConnection, final RequestMetadata requestMetadata)", "full_signature": "@Override public void process(final ClientConnection deviceConnection, final RequestMetadata requestMetadata)", "class_method_signature": "ConnectRequestMessageProcessor.process(final ClientConnection deviceConnection, final RequestMetadata requestMetadata)", "testcase": false, "constructor": false}], "file": "osgp/protocol-adapter-iec60870/osgp-protocol-adapter-iec60870/src/main/java/org/opensmartgridplatform/adapter/protocol/iec60870/infra/messaging/processors/ConnectRequestMessageProcessor.java"}, "focal_method": {"identifier": "process", "parameters": "(final ClientConnection deviceConnection, final RequestMetadata requestMetadata)", "modifiers": "@Override public", "return": "void", "body": "@Override\n    public void process(final ClientConnection deviceConnection, final RequestMetadata requestMetadata)\n            throws ProtocolAdapterException {\n\n        final String deviceIdentification = requestMetadata.getDeviceIdentification();\n        final String organisationIdentification = requestMetadata.getOrganisationIdentification();\n\n        LOGGER.info(\"Connect request for IEC60870 device {} for organisation {}\", deviceIdentification,\n                organisationIdentification);\n        LOGGER.info(\"Starting general interrogation for IEC60870 device {}\", deviceIdentification);\n\n        try {\n            this.generalInterrogationService.sendGeneralInterrogation(deviceConnection, requestMetadata);\n\n        } catch (final IOException | RuntimeException e) {\n            final String message = String.format(\"Interrogation after connect request for device %s failed.\",\n                    deviceIdentification);\n            throw new ProtocolAdapterException(ComponentType.PROTOCOL_IEC60870, message, e);\n        }\n    }", "signature": "void process(final ClientConnection deviceConnection, final RequestMetadata requestMetadata)", "full_signature": "@Override public void process(final ClientConnection deviceConnection, final RequestMetadata requestMetadata)", "class_method_signature": "ConnectRequestMessageProcessor.process(final ClientConnection deviceConnection, final RequestMetadata requestMetadata)", "testcase": false, "constructor": false, "invocations": ["getDeviceIdentification", "getOrganisationIdentification", "info", "info", "sendGeneralInterrogation", "format"]}, "repository": {"repo_id": 154302277, "url": "https://github.com/OSGP/open-smart-grid-platform", "stars": 30, "created": "10/23/2018 9:41:12 AM +00:00", "updates": "2020-01-26T20:15:09+00:00", "fork": "False", "license": "licensed"}}