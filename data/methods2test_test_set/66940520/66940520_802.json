{"test_class": {"identifier": "DataItemServiceFacadeTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "@Mock\n    private QueryService queryService;", "modifier": "@Mock\n    private", "type": "QueryService", "declarator": "queryService", "var_name": "queryService"}, {"original_string": "@Rule\n    public MockitoRule mockitoRule = rule();", "modifier": "@Rule\n    public", "type": "MockitoRule", "declarator": "mockitoRule = rule()", "var_name": "mockitoRule"}, {"original_string": "@Rule\n    public ExpectedException expectedException = none();", "modifier": "@Rule\n    public", "type": "ExpectedException", "declarator": "expectedException = none()", "var_name": "expectedException"}, {"original_string": "private DataItemServiceFacade dataItemServiceFacade;", "modifier": "private", "type": "DataItemServiceFacade", "declarator": "dataItemServiceFacade", "var_name": "dataItemServiceFacade"}], "file": "dhis-2/dhis-web/dhis-web-api/src/test/java/org/hisp/dhis/webapi/controller/dataitem/DataItemServiceFacadeTest.java"}, "test_case": {"identifier": "testRetrieveDataItemEntitiesWhenTargetEntitiesIsEmpty", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testRetrieveDataItemEntitiesWhenTargetEntitiesIsEmpty()\n    {\n        // Given\n        final Set<Class<? extends BaseDimensionalItemObject>> anyTargetEntities = emptySet();\n        final List<BaseDimensionalItemObject> expectedItemsFound = asList( new Indicator(), new Indicator() );\n        final List<String> anyFilters = asList( \"anyFilter\" );\n        final WebOptions anyWebOptions = mockWebOptions( 10, 1 );\n        final Set<String> anyOrdering = new HashSet<>( asList( \"name:desc\" ) );\n        final OrderParams anyOrderParams = new OrderParams( anyOrdering );\n        final Query anyQuery = from( new Schema( Indicator.class, \"indicator\", \"indicators\" ) );\n\n        // When\n        when( queryService.getQueryFromUrl( any(), anyList(), anyList(),\n            any( Pagination.class ), any( Type.class ) ) ).thenReturn( anyQuery );\n        when( (List<BaseDimensionalItemObject>) queryService.query( any( Query.class ) ) )\n            .thenReturn( expectedItemsFound );\n        final List<BaseDimensionalItemObject> actualDimensionalItems = dataItemServiceFacade\n            .retrieveDataItemEntities( anyTargetEntities, anyFilters, anyWebOptions, anyOrderParams );\n\n        // Then\n        assertThat( actualDimensionalItems, is( empty() ) );\n    }", "signature": "void testRetrieveDataItemEntitiesWhenTargetEntitiesIsEmpty()", "full_signature": "@Test public void testRetrieveDataItemEntitiesWhenTargetEntitiesIsEmpty()", "class_method_signature": "DataItemServiceFacadeTest.testRetrieveDataItemEntitiesWhenTargetEntitiesIsEmpty()", "testcase": true, "constructor": false, "invocations": ["emptySet", "asList", "asList", "mockWebOptions", "asList", "from", "thenReturn", "when", "getQueryFromUrl", "any", "anyList", "anyList", "any", "any", "thenReturn", "when", "query", "any", "retrieveDataItemEntities", "assertThat", "is", "empty"]}, "focal_class": {"identifier": "DataItemServiceFacade", "superclass": "", "interfaces": "", "fields": [{"original_string": "private final int PAGINATION_FIRST_RESULT = 0;", "modifier": "private final", "type": "int", "declarator": "PAGINATION_FIRST_RESULT = 0", "var_name": "PAGINATION_FIRST_RESULT"}, {"original_string": "private final QueryService queryService;", "modifier": "private final", "type": "QueryService", "declarator": "queryService", "var_name": "queryService"}, {"original_string": "public static final Map<String, Class<? extends BaseDimensionalItemObject>> DATA_TYPE_ENTITY_MAP = ImmutableMap\n        .<String, Class<? extends BaseDimensionalItemObject>> builder()\n            .put( \"INDICATOR\", Indicator.class )\n            .put( \"DATA_ELEMENT\", DataElement.class )\n            .put( \"DATA_ELEMENT_OPERAND\", DataElementOperand.class )\n            .put( \"DATA_SET\", DataSet.class )\n            .put( \"PROGRAM_INDICATOR\", ProgramIndicator.class )\n            .put( \"PROGRAM_DATA_ELEMENT\", ProgramDataElementDimensionItem.class )\n            .put( \"PROGRAM_ATTRIBUTE\", ProgramTrackedEntityAttributeDimensionItem.class )\n            .build();", "modifier": "public static final", "type": "Map<String, Class<? extends BaseDimensionalItemObject>>", "declarator": "DATA_TYPE_ENTITY_MAP = ImmutableMap\n        .<String, Class<? extends BaseDimensionalItemObject>> builder()\n            .put( \"INDICATOR\", Indicator.class )\n            .put( \"DATA_ELEMENT\", DataElement.class )\n            .put( \"DATA_ELEMENT_OPERAND\", DataElementOperand.class )\n            .put( \"DATA_SET\", DataSet.class )\n            .put( \"PROGRAM_INDICATOR\", ProgramIndicator.class )\n            .put( \"PROGRAM_DATA_ELEMENT\", ProgramDataElementDimensionItem.class )\n            .put( \"PROGRAM_ATTRIBUTE\", ProgramTrackedEntityAttributeDimensionItem.class )\n            .build()", "var_name": "DATA_TYPE_ENTITY_MAP"}], "methods": [{"identifier": "DataItemServiceFacade", "parameters": "( final QueryService queryService )", "modifiers": "", "return": "", "signature": " DataItemServiceFacade( final QueryService queryService )", "full_signature": "  DataItemServiceFacade( final QueryService queryService )", "class_method_signature": "DataItemServiceFacade.DataItemServiceFacade( final QueryService queryService )", "testcase": false, "constructor": true}, {"identifier": "retrieveDataItemEntities", "parameters": "(\n        final Set<Class<? extends BaseDimensionalItemObject>> targetEntities, final List<String> filters,\n        final WebOptions options, final OrderParams orderParams )", "modifiers": "", "return": "List<BaseDimensionalItemObject>", "signature": "List<BaseDimensionalItemObject> retrieveDataItemEntities(\n        final Set<Class<? extends BaseDimensionalItemObject>> targetEntities, final List<String> filters,\n        final WebOptions options, final OrderParams orderParams )", "full_signature": " List<BaseDimensionalItemObject> retrieveDataItemEntities(\n        final Set<Class<? extends BaseDimensionalItemObject>> targetEntities, final List<String> filters,\n        final WebOptions options, final OrderParams orderParams )", "class_method_signature": "DataItemServiceFacade.retrieveDataItemEntities(\n        final Set<Class<? extends BaseDimensionalItemObject>> targetEntities, final List<String> filters,\n        final WebOptions options, final OrderParams orderParams )", "testcase": false, "constructor": false}, {"identifier": "extractTargetEntities", "parameters": "( final List<String> filters )", "modifiers": "", "return": "Set<Class<? extends BaseDimensionalItemObject>>", "signature": "Set<Class<? extends BaseDimensionalItemObject>> extractTargetEntities( final List<String> filters )", "full_signature": " Set<Class<? extends BaseDimensionalItemObject>> extractTargetEntities( final List<String> filters )", "class_method_signature": "DataItemServiceFacade.extractTargetEntities( final List<String> filters )", "testcase": false, "constructor": false}, {"identifier": "executeQuery", "parameters": "( final Query query )", "modifiers": "private", "return": "List<BaseDimensionalItemObject>", "signature": "List<BaseDimensionalItemObject> executeQuery( final Query query )", "full_signature": "private List<BaseDimensionalItemObject> executeQuery( final Query query )", "class_method_signature": "DataItemServiceFacade.executeQuery( final Query query )", "testcase": false, "constructor": false}, {"identifier": "buildQueryForEntity", "parameters": "( final Class<? extends BaseDimensionalItemObject> entity,\n        final List<String> filters, final WebOptions options )", "modifiers": "private", "return": "Query", "signature": "Query buildQueryForEntity( final Class<? extends BaseDimensionalItemObject> entity,\n        final List<String> filters, final WebOptions options )", "full_signature": "private Query buildQueryForEntity( final Class<? extends BaseDimensionalItemObject> entity,\n        final List<String> filters, final WebOptions options )", "class_method_signature": "DataItemServiceFacade.buildQueryForEntity( final Class<? extends BaseDimensionalItemObject> entity,\n        final List<String> filters, final WebOptions options )", "testcase": false, "constructor": false}], "file": "dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/dataitem/DataItemServiceFacade.java"}, "focal_method": {"identifier": "retrieveDataItemEntities", "parameters": "(\n        final Set<Class<? extends BaseDimensionalItemObject>> targetEntities, final List<String> filters,\n        final WebOptions options, final OrderParams orderParams )", "modifiers": "", "return": "List<BaseDimensionalItemObject>", "body": "List<BaseDimensionalItemObject> retrieveDataItemEntities(\n        final Set<Class<? extends BaseDimensionalItemObject>> targetEntities, final List<String> filters,\n        final WebOptions options, final OrderParams orderParams )\n    {\n        List<BaseDimensionalItemObject> dimensionalItems = new ArrayList<>( 0 );\n\n        if ( isNotEmpty( targetEntities ) )\n        {\n            // Retrieving all items for each entity type.\n            for ( final Class<? extends BaseDimensionalItemObject> entity : targetEntities )\n            {\n                final Query query = buildQueryForEntity( entity, filters, options );\n                dimensionalItems.addAll( executeQuery( query ) );\n            }\n\n            // In memory sorting\n            sort( dimensionalItems, orderParams );\n\n            // In memory pagination.\n            dimensionalItems = slice( options, dimensionalItems );\n        }\n\n        return dimensionalItems;\n    }", "signature": "List<BaseDimensionalItemObject> retrieveDataItemEntities(\n        final Set<Class<? extends BaseDimensionalItemObject>> targetEntities, final List<String> filters,\n        final WebOptions options, final OrderParams orderParams )", "full_signature": " List<BaseDimensionalItemObject> retrieveDataItemEntities(\n        final Set<Class<? extends BaseDimensionalItemObject>> targetEntities, final List<String> filters,\n        final WebOptions options, final OrderParams orderParams )", "class_method_signature": "DataItemServiceFacade.retrieveDataItemEntities(\n        final Set<Class<? extends BaseDimensionalItemObject>> targetEntities, final List<String> filters,\n        final WebOptions options, final OrderParams orderParams )", "testcase": false, "constructor": false, "invocations": ["isNotEmpty", "buildQueryForEntity", "addAll", "executeQuery", "sort", "slice"]}, "repository": {"repo_id": 66940520, "url": "https://github.com/dhis2/dhis2-core", "stars": 151, "created": "8/30/2016 12:57:05 PM +00:00", "updates": "2020-01-24T18:06:36+00:00", "fork": "False", "license": "licensed"}}