{"test_class": {"identifier": "PodOnUnknownNodeGcControllerTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final String NODE_NAME = \"node-name\";", "modifier": "private static final", "type": "String", "declarator": "NODE_NAME = \"node-name\"", "var_name": "NODE_NAME"}, {"original_string": "private static final String POD_NAME = \"pod-name\";", "modifier": "private static final", "type": "String", "declarator": "POD_NAME = \"pod-name\"", "var_name": "POD_NAME"}, {"original_string": "private static final TestClock clock = new DefaultTestClock();", "modifier": "private static final", "type": "TestClock", "declarator": "clock = new DefaultTestClock()", "var_name": "clock"}, {"original_string": "private final TitusRuntime titusRuntime = TitusRuntimes.test(clock);", "modifier": "private final", "type": "TitusRuntime", "declarator": "titusRuntime = TitusRuntimes.test(clock)", "var_name": "titusRuntime"}, {"original_string": "private final FixedIntervalTokenBucketConfiguration tokenBucketConfiguration = mock(FixedIntervalTokenBucketConfiguration.class);", "modifier": "private final", "type": "FixedIntervalTokenBucketConfiguration", "declarator": "tokenBucketConfiguration = mock(FixedIntervalTokenBucketConfiguration.class)", "var_name": "tokenBucketConfiguration"}, {"original_string": "private final ControllerConfiguration controllerConfiguration = mock(ControllerConfiguration.class);", "modifier": "private final", "type": "ControllerConfiguration", "declarator": "controllerConfiguration = mock(ControllerConfiguration.class)", "var_name": "controllerConfiguration"}, {"original_string": "private final KubeApiFacade kubeApiFacade = mock(KubeApiFacade.class);", "modifier": "private final", "type": "KubeApiFacade", "declarator": "kubeApiFacade = mock(KubeApiFacade.class)", "var_name": "kubeApiFacade"}, {"original_string": "private final LocalScheduler scheduler = mock(LocalScheduler.class);", "modifier": "private final", "type": "LocalScheduler", "declarator": "scheduler = mock(LocalScheduler.class)", "var_name": "scheduler"}, {"original_string": "private final PodOnUnknownNodeGcController podGcController = new PodOnUnknownNodeGcController(\n            titusRuntime,\n            scheduler,\n            tokenBucketConfiguration,\n            controllerConfiguration,\n            kubeApiFacade\n    );", "modifier": "private final", "type": "PodOnUnknownNodeGcController", "declarator": "podGcController = new PodOnUnknownNodeGcController(\n            titusRuntime,\n            scheduler,\n            tokenBucketConfiguration,\n            controllerConfiguration,\n            kubeApiFacade\n    )", "var_name": "podGcController"}], "file": "titus-server-master/src/test/java/com/netflix/titus/master/kubernetes/controller/PodOnUnknownNodeGcControllerTest.java"}, "test_case": {"identifier": "podIsOnKnownNode", "parameters": "()", "modifiers": "@Test", "return": "void", "body": "@Test\n    void podIsOnKnownNode() {\n        V1Pod pod = new V1Pod()\n                .metadata(new V1ObjectMeta().name(POD_NAME))\n                .spec(new V1PodSpec().nodeName(NODE_NAME))\n                .status(null);\n\n        Assertions.assertThat(podGcController.isPodOnUnknownNode(pod, Collections.singleton(NODE_NAME))).isFalse();\n    }", "signature": "void podIsOnKnownNode()", "full_signature": "@Test void podIsOnKnownNode()", "class_method_signature": "PodOnUnknownNodeGcControllerTest.podIsOnKnownNode()", "testcase": true, "constructor": false, "invocations": ["status", "spec", "metadata", "name", "nodeName", "isFalse", "assertThat", "isPodOnUnknownNode", "singleton"]}, "focal_class": {"identifier": "PodOnUnknownNodeGcController", "superclass": "extends BaseGcController<V1Pod>", "interfaces": "", "fields": [{"original_string": "public static final String POD_ON_UNKNOWN_NODE_GC_CONTROLLER = \"podOnUnknownNodeGcController\";", "modifier": "public static final", "type": "String", "declarator": "POD_ON_UNKNOWN_NODE_GC_CONTROLLER = \"podOnUnknownNodeGcController\"", "var_name": "POD_ON_UNKNOWN_NODE_GC_CONTROLLER"}, {"original_string": "public static final String POD_ON_UNKNOWN_NODE_GC_CONTROLLER_DESCRIPTION = \"GC pods on unknown nodes.\";", "modifier": "public static final", "type": "String", "declarator": "POD_ON_UNKNOWN_NODE_GC_CONTROLLER_DESCRIPTION = \"GC pods on unknown nodes.\"", "var_name": "POD_ON_UNKNOWN_NODE_GC_CONTROLLER_DESCRIPTION"}, {"original_string": "private static final Logger logger = LoggerFactory.getLogger(PodOnUnknownNodeGcController.class);", "modifier": "private static final", "type": "Logger", "declarator": "logger = LoggerFactory.getLogger(PodOnUnknownNodeGcController.class)", "var_name": "logger"}, {"original_string": "private final KubeApiFacade kubeApiFacade;", "modifier": "private final", "type": "KubeApiFacade", "declarator": "kubeApiFacade", "var_name": "kubeApiFacade"}], "methods": [{"identifier": "PodOnUnknownNodeGcController", "parameters": "(\n            TitusRuntime titusRuntime,\n            LocalScheduler scheduler,\n            @Named(POD_ON_UNKNOWN_NODE_GC_CONTROLLER) FixedIntervalTokenBucketConfiguration tokenBucketConfiguration,\n            @Named(POD_ON_UNKNOWN_NODE_GC_CONTROLLER) ControllerConfiguration controllerConfiguration,\n            KubeApiFacade kubeApiFacade\n    )", "modifiers": "@Inject public", "return": "", "signature": " PodOnUnknownNodeGcController(\n            TitusRuntime titusRuntime,\n            LocalScheduler scheduler,\n            @Named(POD_ON_UNKNOWN_NODE_GC_CONTROLLER) FixedIntervalTokenBucketConfiguration tokenBucketConfiguration,\n            @Named(POD_ON_UNKNOWN_NODE_GC_CONTROLLER) ControllerConfiguration controllerConfiguration,\n            KubeApiFacade kubeApiFacade\n    )", "full_signature": "@Inject public  PodOnUnknownNodeGcController(\n            TitusRuntime titusRuntime,\n            LocalScheduler scheduler,\n            @Named(POD_ON_UNKNOWN_NODE_GC_CONTROLLER) FixedIntervalTokenBucketConfiguration tokenBucketConfiguration,\n            @Named(POD_ON_UNKNOWN_NODE_GC_CONTROLLER) ControllerConfiguration controllerConfiguration,\n            KubeApiFacade kubeApiFacade\n    )", "class_method_signature": "PodOnUnknownNodeGcController.PodOnUnknownNodeGcController(\n            TitusRuntime titusRuntime,\n            LocalScheduler scheduler,\n            @Named(POD_ON_UNKNOWN_NODE_GC_CONTROLLER) FixedIntervalTokenBucketConfiguration tokenBucketConfiguration,\n            @Named(POD_ON_UNKNOWN_NODE_GC_CONTROLLER) ControllerConfiguration controllerConfiguration,\n            KubeApiFacade kubeApiFacade\n    )", "testcase": false, "constructor": true}, {"identifier": "shouldGc", "parameters": "()", "modifiers": "@Override public", "return": "boolean", "signature": "boolean shouldGc()", "full_signature": "@Override public boolean shouldGc()", "class_method_signature": "PodOnUnknownNodeGcController.shouldGc()", "testcase": false, "constructor": false}, {"identifier": "getItemsToGc", "parameters": "()", "modifiers": "@Override public", "return": "List<V1Pod>", "signature": "List<V1Pod> getItemsToGc()", "full_signature": "@Override public List<V1Pod> getItemsToGc()", "class_method_signature": "PodOnUnknownNodeGcController.getItemsToGc()", "testcase": false, "constructor": false}, {"identifier": "gcItem", "parameters": "(V1Pod item)", "modifiers": "@Override public", "return": "boolean", "signature": "boolean gcItem(V1Pod item)", "full_signature": "@Override public boolean gcItem(V1Pod item)", "class_method_signature": "PodOnUnknownNodeGcController.gcItem(V1Pod item)", "testcase": false, "constructor": false}, {"identifier": "isPodOnUnknownNode", "parameters": "(V1Pod pod, Set<String> knownNodeNames)", "modifiers": "@VisibleForTesting", "return": "boolean", "signature": "boolean isPodOnUnknownNode(V1Pod pod, Set<String> knownNodeNames)", "full_signature": "@VisibleForTesting boolean isPodOnUnknownNode(V1Pod pod, Set<String> knownNodeNames)", "class_method_signature": "PodOnUnknownNodeGcController.isPodOnUnknownNode(V1Pod pod, Set<String> knownNodeNames)", "testcase": false, "constructor": false}], "file": "titus-server-master/src/main/java/com/netflix/titus/master/kubernetes/controller/PodOnUnknownNodeGcController.java"}, "focal_method": {"identifier": "isPodOnUnknownNode", "parameters": "(V1Pod pod, Set<String> knownNodeNames)", "modifiers": "@VisibleForTesting", "return": "boolean", "body": "@VisibleForTesting\n    boolean isPodOnUnknownNode(V1Pod pod, Set<String> knownNodeNames) {\n        if (pod == null || pod.getSpec() == null) {\n            return false;\n        }\n\n        String nodeName = pod.getSpec().getNodeName();\n        return StringExt.isNotEmpty(nodeName) && !knownNodeNames.contains(nodeName);\n    }", "signature": "boolean isPodOnUnknownNode(V1Pod pod, Set<String> knownNodeNames)", "full_signature": "@VisibleForTesting boolean isPodOnUnknownNode(V1Pod pod, Set<String> knownNodeNames)", "class_method_signature": "PodOnUnknownNodeGcController.isPodOnUnknownNode(V1Pod pod, Set<String> knownNodeNames)", "testcase": false, "constructor": false, "invocations": ["getSpec", "getNodeName", "getSpec", "isNotEmpty", "contains"]}, "repository": {"repo_id": 107330274, "url": "https://github.com/Netflix/titus-control-plane", "stars": 241, "created": "10/17/2017 10:20:55 PM +00:00", "updates": "2020-01-25T13:01:05+00:00", "fork": "False", "license": "licensed"}}