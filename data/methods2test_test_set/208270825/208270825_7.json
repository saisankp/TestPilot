{"test_class": {"identifier": "SolrControllerTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "@Autowired\n    private SolrService solrService;", "modifier": "@Autowired\n    private", "type": "SolrService", "declarator": "solrService", "var_name": "solrService"}, {"original_string": "@Autowired\n    private SolrClient solrClient;", "modifier": "@Autowired\n    private", "type": "SolrClient", "declarator": "solrClient", "var_name": "solrClient"}], "file": "13/Solr/src/test/java/com/example/demo/controller/SolrControllerTest.java"}, "test_case": {"identifier": "queryAll", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void queryAll() throws IOException, SolrServerException {\n\n\n        //\u7b2c\u4e8c\u79cd\u65b9\u5f0f\n        SolrQuery solrQuery = new SolrQuery();\n        // \u8bbe\u7f6e\u9ed8\u8ba4\u641c\u7d22\u57df\n        solrQuery.setQuery(\"*:*\");\n//        solrQuery.addField(\"*\");\n        solrQuery.set(\"q\", \"\u77e5\u7136\");\n        solrQuery.add(\"q\", \"name:\u7136\");\n        // \u8bbe\u7f6e\u8fd4\u56de\u7ed3\u679c\u7684\u6392\u5e8f\u89c4\u5219\n        solrQuery.setSort(\"id\", SolrQuery.ORDER.asc);\n        //\u8bbe\u7f6e\u67e5\u8be2\u7684\u6761\u6570\n        solrQuery.setRows(50);\n        //\u8bbe\u7f6e\u67e5\u8be2\u7684\u5f00\u59cb\n        solrQuery.setStart(0);\n        // \u8bbe\u7f6e\u5206\u9875\u53c2\u6570\n        solrQuery.setStart(0);\n        solrQuery.setRows(20);\n        //\u8bbe\u7f6e\u9ad8\u4eae\n        solrQuery.setHighlight(true);\n        //\u8bbe\u7f6e\u9ad8\u4eae\u7684\u5b57\u6bb5\n        solrQuery.addHighlightField(\"name\");\n        //\u8bbe\u7f6e\u9ad8\u4eae\u7684\u6837\u5f0f\n        solrQuery.setHighlightSimplePre(\"<font color='red'>\");\n        solrQuery.setHighlightSimplePost(\"</font>\");\n        System.out.println(solrQuery);\n        QueryResponse response = solrClient.query(solrQuery);\n        //\u8fd4\u56de\u9ad8\u4eae\u663e\u793a\u7ed3\u679c\n        Map<String, Map<String, List<String>>> highlighting = response.getHighlighting();\n        //response.getResults();\u67e5\u8be2\u8fd4\u56de\u7684\u7ed3\u679c\n\n        SolrDocumentList documentList = response.getResults();\n        long numFound = documentList.getNumFound();\n        System.out.println(\"\u603b\u5171\u67e5\u8be2\u5230\u7684\u6587\u6863\u6570\u91cf\uff1a \" + numFound);\n        for (SolrDocument solrDocument : documentList) {\n            System.out.println(solrDocument);\n            System.out.println(solrDocument.get(\"name\"));\n        }\n        System.out.println(highlighting);\n    }", "signature": "void queryAll()", "full_signature": "@Test public void queryAll()", "class_method_signature": "SolrControllerTest.queryAll()", "testcase": true, "constructor": false, "invocations": ["setQuery", "set", "add", "setSort", "setRows", "setStart", "setStart", "setRows", "setHighlight", "addHighlightField", "setHighlightSimplePre", "setHighlightSimplePost", "println", "query", "getHighlighting", "getResults", "getNumFound", "println", "println", "println", "get", "println"]}, "focal_class": {"identifier": "SolrController", "superclass": "", "interfaces": "", "fields": [{"original_string": "@Autowired\n    private SolrService solrService;", "modifier": "@Autowired\n    private", "type": "SolrService", "declarator": "solrService", "var_name": "solrService"}, {"original_string": "@Autowired\n    private SolrClient solrClient;", "modifier": "@Autowired\n    private", "type": "SolrClient", "declarator": "solrClient", "var_name": "solrClient"}], "methods": [{"identifier": "addUsers", "parameters": "()", "modifiers": "@RequestMapping(\"/addUsers\") public", "return": "void", "signature": "void addUsers()", "full_signature": "@RequestMapping(\"/addUsers\") public void addUsers()", "class_method_signature": "SolrController.addUsers()", "testcase": false, "constructor": false}, {"identifier": "addUser", "parameters": "()", "modifiers": "@RequestMapping(\"/addUser\") public", "return": "void", "signature": "void addUser()", "full_signature": "@RequestMapping(\"/addUser\") public void addUser()", "class_method_signature": "SolrController.addUser()", "testcase": false, "constructor": false}, {"identifier": "getByIdFromSolr", "parameters": "(@PathVariable(\"id\") String id)", "modifiers": "@RequestMapping(\"/getById/{id}\") public", "return": "String", "signature": "String getByIdFromSolr(@PathVariable(\"id\") String id)", "full_signature": "@RequestMapping(\"/getById/{id}\") public String getByIdFromSolr(@PathVariable(\"id\") String id)", "class_method_signature": "SolrController.getByIdFromSolr(@PathVariable(\"id\") String id)", "testcase": false, "constructor": false}, {"identifier": "updateUser", "parameters": "()", "modifiers": "@RequestMapping(\"/updateUser\") public", "return": "void", "signature": "void updateUser()", "full_signature": "@RequestMapping(\"/updateUser\") public void updateUser()", "class_method_signature": "SolrController.updateUser()", "testcase": false, "constructor": false}, {"identifier": "delById", "parameters": "(@PathVariable(\"id\") String id)", "modifiers": "@RequestMapping(\"/delById/{id}\") public", "return": "String", "signature": "String delById(@PathVariable(\"id\") String id)", "full_signature": "@RequestMapping(\"/delById/{id}\") public String delById(@PathVariable(\"id\") String id)", "class_method_signature": "SolrController.delById(@PathVariable(\"id\") String id)", "testcase": false, "constructor": false}, {"identifier": "delAll", "parameters": "()", "modifiers": "@RequestMapping(\"/delAll\") public", "return": "void", "signature": "void delAll()", "full_signature": "@RequestMapping(\"/delAll\") public void delAll()", "class_method_signature": "SolrController.delAll()", "testcase": false, "constructor": false}, {"identifier": "queryAllOne", "parameters": "()", "modifiers": "@RequestMapping(\"/queryAllOne\") public", "return": "String", "signature": "String queryAllOne()", "full_signature": "@RequestMapping(\"/queryAllOne\") public String queryAllOne()", "class_method_signature": "SolrController.queryAllOne()", "testcase": false, "constructor": false}, {"identifier": "queryAll", "parameters": "()", "modifiers": "@RequestMapping(\"/queryAll\") public", "return": "Object", "signature": "Object queryAll()", "full_signature": "@RequestMapping(\"/queryAll\") public Object queryAll()", "class_method_signature": "SolrController.queryAll()", "testcase": false, "constructor": false}], "file": "13/Solr/src/main/java/com/example/demo/controller/SolrController.java"}, "focal_method": {"identifier": "queryAll", "parameters": "()", "modifiers": "@RequestMapping(\"/queryAll\") public", "return": "Object", "body": "@RequestMapping(\"/queryAll\")\n    public Object queryAll() throws IOException, SolrServerException {\n\n\n        //\u7b2c\u4e8c\u79cd\u65b9\u5f0f\n        SolrQuery solrQuery = new SolrQuery();\n        // \u8bbe\u7f6e\u9ed8\u8ba4\u641c\u7d22\u57df\n        solrQuery.setQuery(\"*:*\");\n//        solrQuery.addField(\"*\");\n        solrQuery.set(\"q\", \"\u77e5\u7136\");\n        solrQuery.add(\"q\", \"name:\u7136\");\n        // \u8bbe\u7f6e\u8fd4\u56de\u7ed3\u679c\u7684\u6392\u5e8f\u89c4\u5219\n        solrQuery.setSort(\"id\", SolrQuery.ORDER.asc);\n        //\u8bbe\u7f6e\u67e5\u8be2\u7684\u6761\u6570\n        solrQuery.setRows(50);\n        //\u8bbe\u7f6e\u67e5\u8be2\u7684\u5f00\u59cb\n        solrQuery.setStart(0);\n        // \u8bbe\u7f6e\u5206\u9875\u53c2\u6570\n        solrQuery.setStart(0);\n        solrQuery.setRows(20);\n        //\u8bbe\u7f6e\u9ad8\u4eae\n        solrQuery.setHighlight(true);\n        //\u8bbe\u7f6e\u9ad8\u4eae\u7684\u5b57\u6bb5\n        solrQuery.addHighlightField(\"name\");\n        //\u8bbe\u7f6e\u9ad8\u4eae\u7684\u6837\u5f0f\n        solrQuery.setHighlightSimplePre(\"<font color='red'>\");\n        solrQuery.setHighlightSimplePost(\"</font>\");\n        System.out.println(solrQuery);\n        QueryResponse response = solrClient.query(solrQuery);\n        //\u8fd4\u56de\u9ad8\u4eae\u663e\u793a\u7ed3\u679c\n        Map<String, Map<String, List<String>>> highlighting = response.getHighlighting();\n        //response.getResults();\u67e5\u8be2\u8fd4\u56de\u7684\u7ed3\u679c\n\n        SolrDocumentList documentList = response.getResults();\n        long numFound = documentList.getNumFound();\n        System.out.println(\"\u603b\u5171\u67e5\u8be2\u5230\u7684\u6587\u6863\u6570\u91cf\uff1a \" + numFound);\n        for (SolrDocument solrDocument : documentList) {\n            System.out.println(\"solrDocument==============\" + solrDocument);\n            System.out.println(\"solrDocument==============\" + solrDocument.get(\"name\"));\n        }\n        return highlighting;\n    }", "signature": "Object queryAll()", "full_signature": "@RequestMapping(\"/queryAll\") public Object queryAll()", "class_method_signature": "SolrController.queryAll()", "testcase": false, "constructor": false, "invocations": ["setQuery", "set", "add", "setSort", "setRows", "setStart", "setStart", "setRows", "setHighlight", "addHighlightField", "setHighlightSimplePre", "setHighlightSimplePost", "println", "query", "getHighlighting", "getResults", "getNumFound", "println", "println", "println", "get"]}, "repository": {"repo_id": 208270825, "url": "https://github.com/xiuhuai/Spring-Boot-Book", "language": "Java", "is_fork": false, "fork_count": 39, "stargazer_count": 56, "size": 2704, "license": "licensed"}}