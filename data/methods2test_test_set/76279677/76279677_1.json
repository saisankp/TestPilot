{"test_class": {"identifier": "VarDependenciesTest", "superclass": "extends BaseVarTests", "interfaces": "", "fields": [], "file": "cypher2sql/src/test/java/org/cytosm/cypher2sql/lowering/typeck/VarDependenciesTest.java"}, "test_case": {"identifier": "testVariablesMatchCommaReturn", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testVariablesMatchCommaReturn() {\n        String cypher = \"\" +\n                \"MATCH (a), (b)\\n\" +\n                \"RETURN a.firstName\";\n        Statement st = PassAvailables.parseCypher(cypher);\n        SingleQuery sq = (SingleQuery) st.query.part;\n        VarDependencies dependencies = new VarDependencies(st);\n        Match match = ((Match) sq.clauses.iterator().next());\n        Iterator<PatternPart> iter = this.getPatternPart(match);\n        List<Var> match0 = dependencies.getUsedVars(this.genClauseForASTNode(iter.next()));\n        List<Var> comma1 = dependencies.getUsedVars(this.genClauseForASTNode(iter.next()));\n\n        // Make sure we have collected something.\n        Assert.assertEquals(match0.size(), 1);\n        Assert.assertEquals(comma1.size(), 1);\n        Assert.assertEquals(match0.get(0).name, \"a\");\n        Assert.assertEquals(comma1.get(0).name, \"b\");\n    }", "signature": "void testVariablesMatchCommaReturn()", "full_signature": "@Test public void testVariablesMatchCommaReturn()", "class_method_signature": "VarDependenciesTest.testVariablesMatchCommaReturn()", "testcase": true, "constructor": false, "invocations": ["parseCypher", "next", "iterator", "getPatternPart", "getUsedVars", "genClauseForASTNode", "next", "getUsedVars", "genClauseForASTNode", "next", "assertEquals", "size", "assertEquals", "size", "assertEquals", "get", "assertEquals", "get"]}, "focal_class": {"identifier": "VarDependencies", "superclass": "", "interfaces": "", "fields": [{"original_string": "private Map<ClauseId, List<Var>> usedVariablesInClause = new HashMap<>();", "modifier": "private", "type": "Map<ClauseId, List<Var>>", "declarator": "usedVariablesInClause = new HashMap<>()", "var_name": "usedVariablesInClause"}, {"original_string": "private Map<ClauseId, AvailableVariables> reachableVariables = new HashMap<>();", "modifier": "private", "type": "Map<ClauseId, AvailableVariables>", "declarator": "reachableVariables = new HashMap<>()", "var_name": "reachableVariables"}, {"original_string": "private Map<ClauseId, List<Relationship>> relationships = new HashMap<>();", "modifier": "private", "type": "Map<ClauseId, List<Relationship>>", "declarator": "relationships = new HashMap<>()", "var_name": "relationships"}, {"original_string": "private List<Expr> returnExprs = new ArrayList<>();", "modifier": "private", "type": "List<Expr>", "declarator": "returnExprs = new ArrayList<>()", "var_name": "returnExprs"}], "methods": [{"identifier": "VarDependencies", "parameters": "(final Statement statement)", "modifiers": "public", "return": "", "signature": " VarDependencies(final Statement statement)", "full_signature": "public  VarDependencies(final Statement statement)", "class_method_signature": "VarDependencies.VarDependencies(final Statement statement)", "testcase": false, "constructor": true}, {"identifier": "getUsedVars", "parameters": "(ClauseId clauseId)", "modifiers": "public", "return": "List<Var>", "signature": "List<Var> getUsedVars(ClauseId clauseId)", "full_signature": "public List<Var> getUsedVars(ClauseId clauseId)", "class_method_signature": "VarDependencies.getUsedVars(ClauseId clauseId)", "testcase": false, "constructor": false}, {"identifier": "getAllVariables", "parameters": "()", "modifiers": "public", "return": "Set<Var>", "signature": "Set<Var> getAllVariables()", "full_signature": "public Set<Var> getAllVariables()", "class_method_signature": "VarDependencies.getAllVariables()", "testcase": false, "constructor": false}, {"identifier": "getUsedAndIndirectUsedVars", "parameters": "(ClauseId clauseId)", "modifiers": "public", "return": "List<Var>", "signature": "List<Var> getUsedAndIndirectUsedVars(ClauseId clauseId)", "full_signature": "public List<Var> getUsedAndIndirectUsedVars(ClauseId clauseId)", "class_method_signature": "VarDependencies.getUsedAndIndirectUsedVars(ClauseId clauseId)", "testcase": false, "constructor": false}, {"identifier": "getReachableVars", "parameters": "(ClauseId clauseId)", "modifiers": "public", "return": "AvailableVariables", "signature": "AvailableVariables getReachableVars(ClauseId clauseId)", "full_signature": "public AvailableVariables getReachableVars(ClauseId clauseId)", "class_method_signature": "VarDependencies.getReachableVars(ClauseId clauseId)", "testcase": false, "constructor": false}, {"identifier": "getRelationships", "parameters": "(ClauseId clauseId)", "modifiers": "public", "return": "List<Relationship>", "signature": "List<Relationship> getRelationships(ClauseId clauseId)", "full_signature": "public List<Relationship> getRelationships(ClauseId clauseId)", "class_method_signature": "VarDependencies.getRelationships(ClauseId clauseId)", "testcase": false, "constructor": false}, {"identifier": "getReturnExprs", "parameters": "()", "modifiers": "public", "return": "List<Expr>", "signature": "List<Expr> getReturnExprs()", "full_signature": "public List<Expr> getReturnExprs()", "class_method_signature": "VarDependencies.getReturnExprs()", "testcase": false, "constructor": false}], "file": "cypher2sql/src/main/java/org/cytosm/cypher2sql/lowering/typeck/VarDependencies.java"}, "focal_method": {"identifier": "getUsedVars", "parameters": "(ClauseId clauseId)", "modifiers": "public", "return": "List<Var>", "body": "public List<Var> getUsedVars(ClauseId clauseId) {\n        return Collections.unmodifiableList(this.usedVariablesInClause.get(clauseId));\n    }", "signature": "List<Var> getUsedVars(ClauseId clauseId)", "full_signature": "public List<Var> getUsedVars(ClauseId clauseId)", "class_method_signature": "VarDependencies.getUsedVars(ClauseId clauseId)", "testcase": false, "constructor": false, "invocations": ["unmodifiableList", "get"]}, "repository": {"repo_id": 76279677, "url": "https://github.com/cytosm/cytosm", "language": "Java", "is_fork": false, "fork_count": 14, "stargazer_count": 41, "size": 1250, "license": "licensed"}}