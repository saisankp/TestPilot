{"test_class": {"identifier": "LocalSchedulerTransactionLoggerTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final Logger logger = LoggerFactory.getLogger(LocalSchedulerTransactionLoggerTest.class);", "modifier": "private static final", "type": "Logger", "declarator": "logger = LoggerFactory.getLogger(LocalSchedulerTransactionLoggerTest.class)", "var_name": "logger"}, {"original_string": "private static final Schedule REFERENCE_SCHEDULE = Schedule.newBuilder()\n            .withId(\"reference\")\n            .withDescriptor(ScheduleDescriptor.newBuilder()\n                    .withName(\"testSchedule\")\n                    .withDescription(\"Testing...\")\n                    .withTimeout(Duration.ofSeconds(1))\n                    .withInterval(Duration.ofSeconds(5))\n                    .build()\n            )\n            .withCurrentAction(ScheduledAction.newBuilder()\n                    .withId(\"reference\")\n                    .withStatus(newSchedulingStatus(SchedulingState.Waiting))\n                    .withIteration(ExecutionId.initial())\n                    .build()\n            )\n            .build();", "modifier": "private static final", "type": "Schedule", "declarator": "REFERENCE_SCHEDULE = Schedule.newBuilder()\n            .withId(\"reference\")\n            .withDescriptor(ScheduleDescriptor.newBuilder()\n                    .withName(\"testSchedule\")\n                    .withDescription(\"Testing...\")\n                    .withTimeout(Duration.ofSeconds(1))\n                    .withInterval(Duration.ofSeconds(5))\n                    .build()\n            )\n            .withCurrentAction(ScheduledAction.newBuilder()\n                    .withId(\"reference\")\n                    .withStatus(newSchedulingStatus(SchedulingState.Waiting))\n                    .withIteration(ExecutionId.initial())\n                    .build()\n            )\n            .build()", "var_name": "REFERENCE_SCHEDULE"}], "file": "titus-common/src/test/java/com/netflix/titus/common/framework/scheduler/internal/LocalSchedulerTransactionLoggerTest.java"}, "test_case": {"identifier": "testDoFormatNewAction", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testDoFormatNewAction() {\n        Schedule firstCompleted = updateStatus(REFERENCE_SCHEDULE, newSchedulingStatus(SchedulingState.Succeeded));\n        Schedule nextAction = firstCompleted.toBuilder()\n                .withCurrentAction(ScheduledAction.newBuilder()\n                        .withId(\"reference\")\n                        .withStatus(newSchedulingStatus(SchedulingState.Waiting))\n                        .withIteration(ExecutionId.initial())\n                        .build()\n                )\n                .withCompletedActions(Collections.singletonList(firstCompleted.getCurrentAction()))\n                .build();\n        verify(LocalSchedulerTransactionLogger.doFormat(new ScheduleUpdateEvent(nextAction)));\n    }", "signature": "void testDoFormatNewAction()", "full_signature": "@Test public void testDoFormatNewAction()", "class_method_signature": "LocalSchedulerTransactionLoggerTest.testDoFormatNewAction()", "testcase": true, "constructor": false, "invocations": ["updateStatus", "newSchedulingStatus", "build", "withCompletedActions", "withCurrentAction", "toBuilder", "build", "withIteration", "withStatus", "withId", "newBuilder", "newSchedulingStatus", "initial", "singletonList", "getCurrentAction", "verify", "doFormat"]}, "focal_class": {"identifier": "LocalSchedulerTransactionLogger", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final Logger logger = LoggerFactory.getLogger(\"LocalSchedulerTransactionLogger\");", "modifier": "private static final", "type": "Logger", "declarator": "logger = LoggerFactory.getLogger(\"LocalSchedulerTransactionLogger\")", "var_name": "logger"}, {"original_string": "private static final Duration RETRY_DELAY = Duration.ofSeconds(1);", "modifier": "private static final", "type": "Duration", "declarator": "RETRY_DELAY = Duration.ofSeconds(1)", "var_name": "RETRY_DELAY"}], "methods": [{"identifier": "logEvents", "parameters": "(LocalScheduler localScheduler)", "modifiers": "static", "return": "Disposable", "signature": "Disposable logEvents(LocalScheduler localScheduler)", "full_signature": "static Disposable logEvents(LocalScheduler localScheduler)", "class_method_signature": "LocalSchedulerTransactionLogger.logEvents(LocalScheduler localScheduler)", "testcase": false, "constructor": false}, {"identifier": "doFormat", "parameters": "(LocalSchedulerEvent event)", "modifiers": "@VisibleForTesting static", "return": "String", "signature": "String doFormat(LocalSchedulerEvent event)", "full_signature": "@VisibleForTesting static String doFormat(LocalSchedulerEvent event)", "class_method_signature": "LocalSchedulerTransactionLogger.doFormat(LocalSchedulerEvent event)", "testcase": false, "constructor": false}, {"identifier": "logScheduleAddedEvent", "parameters": "(ScheduleAddedEvent event)", "modifiers": "private static", "return": "String", "signature": "String logScheduleAddedEvent(ScheduleAddedEvent event)", "full_signature": "private static String logScheduleAddedEvent(ScheduleAddedEvent event)", "class_method_signature": "LocalSchedulerTransactionLogger.logScheduleAddedEvent(ScheduleAddedEvent event)", "testcase": false, "constructor": false}, {"identifier": "logScheduleRemovedEvent", "parameters": "(ScheduleRemovedEvent event)", "modifiers": "private static", "return": "String", "signature": "String logScheduleRemovedEvent(ScheduleRemovedEvent event)", "full_signature": "private static String logScheduleRemovedEvent(ScheduleRemovedEvent event)", "class_method_signature": "LocalSchedulerTransactionLogger.logScheduleRemovedEvent(ScheduleRemovedEvent event)", "testcase": false, "constructor": false}, {"identifier": "logScheduleUpdateEvent", "parameters": "(ScheduleUpdateEvent event)", "modifiers": "private static", "return": "String", "signature": "String logScheduleUpdateEvent(ScheduleUpdateEvent event)", "full_signature": "private static String logScheduleUpdateEvent(ScheduleUpdateEvent event)", "class_method_signature": "LocalSchedulerTransactionLogger.logScheduleUpdateEvent(ScheduleUpdateEvent event)", "testcase": false, "constructor": false}, {"identifier": "doFormat", "parameters": "(Schedule schedule,\n                                   String eventKind,\n                                   String summary)", "modifiers": "private static", "return": "String", "signature": "String doFormat(Schedule schedule,\n                                   String eventKind,\n                                   String summary)", "full_signature": "private static String doFormat(Schedule schedule,\n                                   String eventKind,\n                                   String summary)", "class_method_signature": "LocalSchedulerTransactionLogger.doFormat(Schedule schedule,\n                                   String eventKind,\n                                   String summary)", "testcase": false, "constructor": false}, {"identifier": "toElapsedMs", "parameters": "(Schedule schedule)", "modifiers": "private static", "return": "long", "signature": "long toElapsedMs(Schedule schedule)", "full_signature": "private static long toElapsedMs(Schedule schedule)", "class_method_signature": "LocalSchedulerTransactionLogger.toElapsedMs(Schedule schedule)", "testcase": false, "constructor": false}], "file": "titus-common/src/main/java/com/netflix/titus/common/framework/scheduler/internal/LocalSchedulerTransactionLogger.java"}, "focal_method": {"identifier": "doFormat", "parameters": "(LocalSchedulerEvent event)", "modifiers": "@VisibleForTesting static", "return": "String", "body": "@VisibleForTesting\n    static String doFormat(LocalSchedulerEvent event) {\n        if (event instanceof ScheduleAddedEvent) {\n            return logScheduleAddedEvent((ScheduleAddedEvent) event);\n        } else if (event instanceof ScheduleRemovedEvent) {\n            return logScheduleRemovedEvent((ScheduleRemovedEvent) event);\n        }\n        if (event instanceof ScheduleUpdateEvent) {\n            return logScheduleUpdateEvent((ScheduleUpdateEvent) event);\n        }\n        return \"Unknown event type: \" + event.getClass();\n    }", "signature": "String doFormat(LocalSchedulerEvent event)", "full_signature": "@VisibleForTesting static String doFormat(LocalSchedulerEvent event)", "class_method_signature": "LocalSchedulerTransactionLogger.doFormat(LocalSchedulerEvent event)", "testcase": false, "constructor": false, "invocations": ["logScheduleAddedEvent", "logScheduleRemovedEvent", "logScheduleUpdateEvent", "getClass"]}, "repository": {"repo_id": 107330274, "url": "https://github.com/Netflix/titus-control-plane", "stars": 241, "created": "10/17/2017 10:20:55 PM +00:00", "updates": "2020-01-25T13:01:05+00:00", "fork": "False", "license": "licensed"}}