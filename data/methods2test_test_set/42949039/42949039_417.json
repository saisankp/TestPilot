{"test_class": {"identifier": "NotificationMessageManagerTest", "superclass": "extends AbstractServiceTest", "interfaces": "", "fields": [{"original_string": "@Rule\n    public ExpectedException expectedException = ExpectedException.none();", "modifier": "@Rule\n    public", "type": "ExpectedException", "declarator": "expectedException = ExpectedException.none()", "var_name": "expectedException"}, {"original_string": "@Autowired\n    private NotificationMessageManager notificationMessageManager;", "modifier": "@Autowired\n    private", "type": "NotificationMessageManager", "declarator": "notificationMessageManager", "var_name": "notificationMessageManager"}, {"original_string": "@Autowired\n    private BusinessObjectDataStatusChangeMessageBuilder businessObjectDataStatusChangeMessageBuilder;", "modifier": "@Autowired\n    private", "type": "BusinessObjectDataStatusChangeMessageBuilder", "declarator": "businessObjectDataStatusChangeMessageBuilder", "var_name": "businessObjectDataStatusChangeMessageBuilder"}, {"original_string": "@Autowired\n    private BusinessObjectDefinitionDescriptionSuggestionChangeMessageBuilder businessObjectDefinitionDescriptionSuggestionChangeMessageBuilder;", "modifier": "@Autowired\n    private", "type": "BusinessObjectDefinitionDescriptionSuggestionChangeMessageBuilder", "declarator": "businessObjectDefinitionDescriptionSuggestionChangeMessageBuilder", "var_name": "businessObjectDefinitionDescriptionSuggestionChangeMessageBuilder"}, {"original_string": "@Autowired\n    private BusinessObjectFormatVersionChangeMessageBuilder businessObjectFormatVersionChangeMessageBuilder;", "modifier": "@Autowired\n    private", "type": "BusinessObjectFormatVersionChangeMessageBuilder", "declarator": "businessObjectFormatVersionChangeMessageBuilder", "var_name": "businessObjectFormatVersionChangeMessageBuilder"}, {"original_string": "@Autowired\n    private StorageUnitStatusChangeMessageBuilder storageUnitStatusChangeMessageBuilder;", "modifier": "@Autowired\n    private", "type": "StorageUnitStatusChangeMessageBuilder", "declarator": "storageUnitStatusChangeMessageBuilder", "var_name": "storageUnitStatusChangeMessageBuilder"}, {"original_string": "@Autowired\n    private UserNamespaceAuthorizationChangeMessageBuilder userNamespaceAuthorizationChangeMessageBuilder;", "modifier": "@Autowired\n    private", "type": "UserNamespaceAuthorizationChangeMessageBuilder", "declarator": "userNamespaceAuthorizationChangeMessageBuilder", "var_name": "userNamespaceAuthorizationChangeMessageBuilder"}], "file": "herd-code/herd-service/src/test/java/org/finra/herd/service/helper/notification/NotificationMessageManagerTest.java"}, "test_case": {"identifier": "testBuildNotificationMessagesHappyPath", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testBuildNotificationMessagesHappyPath() throws Exception\n    {\n        // Create a business object data entity.\n        BusinessObjectDataEntity businessObjectDataEntity = businessObjectDataServiceTestHelper\n            .createTestValidBusinessObjectData(SUBPARTITION_VALUES, businessObjectFormatServiceTestHelper.getTestAttributeDefinitions(),\n                businessObjectDefinitionServiceTestHelper.getNewAttributes());\n\n        // Get a business object data key.\n        BusinessObjectDataKey businessObjectDataKey = businessObjectDataHelper.getBusinessObjectDataKey(businessObjectDataEntity);\n\n        // Override configuration.\n        ConfigurationEntity configurationEntity = new ConfigurationEntity();\n        configurationEntity.setKey(ConfigurationValue.HERD_NOTIFICATION_BUSINESS_OBJECT_DATA_STATUS_CHANGE_MESSAGE_DEFINITIONS.getKey());\n        configurationEntity.setValueClob(xmlHelper.objectToXml(new NotificationMessageDefinitions(Collections.singletonList(\n            new NotificationMessageDefinition(MESSAGE_TYPE_SNS, MESSAGE_DESTINATION,\n                BUSINESS_OBJECT_DATA_STATUS_CHANGE_NOTIFICATION_MESSAGE_VELOCITY_TEMPLATE_XML, NO_MESSAGE_HEADER_DEFINITIONS)))));\n        configurationDao.saveAndRefresh(configurationEntity);\n\n        // Trigger the notification.\n        List<NotificationMessage> result = notificationMessageManager.buildNotificationMessages(\n            new BusinessObjectDataStatusChangeNotificationEvent(businessObjectDataKey, BusinessObjectDataStatusEntity.VALID,\n                BusinessObjectDataStatusEntity.INVALID));\n\n        // Validate the results.\n        assertEquals(1, CollectionUtils.size(result));\n        businessObjectDataServiceTestHelper\n            .validateBusinessObjectDataStatusChangeMessageWithXmlPayload(MESSAGE_TYPE_SNS, MESSAGE_DESTINATION, businessObjectDataKey,\n                businessObjectDataEntity.getId(), HerdDaoSecurityHelper.SYSTEM_USER, BusinessObjectDataStatusEntity.VALID,\n                BusinessObjectDataStatusEntity.INVALID, Collections.singletonList(new Attribute(ATTRIBUTE_NAME_3_MIXED_CASE, ATTRIBUTE_VALUE_3)),\n                NO_MESSAGE_HEADERS, result.get(0));\n    }", "signature": "void testBuildNotificationMessagesHappyPath()", "full_signature": "@Test public void testBuildNotificationMessagesHappyPath()", "class_method_signature": "NotificationMessageManagerTest.testBuildNotificationMessagesHappyPath()", "testcase": true, "constructor": false, "invocations": ["createTestValidBusinessObjectData", "getTestAttributeDefinitions", "getNewAttributes", "getBusinessObjectDataKey", "setKey", "getKey", "setValueClob", "objectToXml", "singletonList", "saveAndRefresh", "buildNotificationMessages", "assertEquals", "size", "validateBusinessObjectDataStatusChangeMessageWithXmlPayload", "getId", "singletonList", "get"]}, "focal_class": {"identifier": "NotificationMessageManager", "superclass": "", "interfaces": "", "fields": [{"original_string": "@Autowired\n    private BusinessObjectDataStatusChangeMessageBuilder businessObjectDataStatusChangeMessageBuilder;", "modifier": "@Autowired\n    private", "type": "BusinessObjectDataStatusChangeMessageBuilder", "declarator": "businessObjectDataStatusChangeMessageBuilder", "var_name": "businessObjectDataStatusChangeMessageBuilder"}, {"original_string": "@Autowired\n    private BusinessObjectDefinitionDescriptionSuggestionChangeMessageBuilder businessObjectDefinitionDescriptionSuggestionChangeMessageBuilder;", "modifier": "@Autowired\n    private", "type": "BusinessObjectDefinitionDescriptionSuggestionChangeMessageBuilder", "declarator": "businessObjectDefinitionDescriptionSuggestionChangeMessageBuilder", "var_name": "businessObjectDefinitionDescriptionSuggestionChangeMessageBuilder"}, {"original_string": "@Autowired\n    private BusinessObjectFormatVersionChangeMessageBuilder businessObjectFormatVersionChangeMessageBuilder;", "modifier": "@Autowired\n    private", "type": "BusinessObjectFormatVersionChangeMessageBuilder", "declarator": "businessObjectFormatVersionChangeMessageBuilder", "var_name": "businessObjectFormatVersionChangeMessageBuilder"}, {"original_string": "@Autowired\n    private StorageUnitStatusChangeMessageBuilder storageUnitStatusChangeMessageBuilder;", "modifier": "@Autowired\n    private", "type": "StorageUnitStatusChangeMessageBuilder", "declarator": "storageUnitStatusChangeMessageBuilder", "var_name": "storageUnitStatusChangeMessageBuilder"}, {"original_string": "@Autowired\n    private UserNamespaceAuthorizationChangeMessageBuilder userNamespaceAuthorizationChangeMessageBuilder;", "modifier": "@Autowired\n    private", "type": "UserNamespaceAuthorizationChangeMessageBuilder", "declarator": "userNamespaceAuthorizationChangeMessageBuilder", "var_name": "userNamespaceAuthorizationChangeMessageBuilder"}, {"original_string": "private Map<Class<?>, NotificationMessageBuilder> eventTypeNotificationMessageBuilderMap = new HashMap<>();", "modifier": "private", "type": "Map<Class<?>, NotificationMessageBuilder>", "declarator": "eventTypeNotificationMessageBuilderMap = new HashMap<>()", "var_name": "eventTypeNotificationMessageBuilderMap"}], "methods": [{"identifier": "populateEventTypeNotificationMessageBuilderMap", "parameters": "()", "modifiers": "@PostConstruct public", "return": "void", "signature": "void populateEventTypeNotificationMessageBuilderMap()", "full_signature": "@PostConstruct public void populateEventTypeNotificationMessageBuilderMap()", "class_method_signature": "NotificationMessageManager.populateEventTypeNotificationMessageBuilderMap()", "testcase": false, "constructor": false}, {"identifier": "getEventTypeNotificationMessageBuilderMap", "parameters": "()", "modifiers": "public", "return": "Map<Class<?>, NotificationMessageBuilder>", "signature": "Map<Class<?>, NotificationMessageBuilder> getEventTypeNotificationMessageBuilderMap()", "full_signature": "public Map<Class<?>, NotificationMessageBuilder> getEventTypeNotificationMessageBuilderMap()", "class_method_signature": "NotificationMessageManager.getEventTypeNotificationMessageBuilderMap()", "testcase": false, "constructor": false}, {"identifier": "buildNotificationMessages", "parameters": "(NotificationEvent notificationEvent)", "modifiers": "public", "return": "List<NotificationMessage>", "signature": "List<NotificationMessage> buildNotificationMessages(NotificationEvent notificationEvent)", "full_signature": "public List<NotificationMessage> buildNotificationMessages(NotificationEvent notificationEvent)", "class_method_signature": "NotificationMessageManager.buildNotificationMessages(NotificationEvent notificationEvent)", "testcase": false, "constructor": false}], "file": "herd-code/herd-service/src/main/java/org/finra/herd/service/helper/notification/NotificationMessageManager.java"}, "focal_method": {"identifier": "buildNotificationMessages", "parameters": "(NotificationEvent notificationEvent)", "modifiers": "public", "return": "List<NotificationMessage>", "body": "public List<NotificationMessage> buildNotificationMessages(NotificationEvent notificationEvent)\n    {\n        Assert.notNull(notificationEvent, \"Parameter \\\"notificationEvent\\\" must not be null\");\n\n        return eventTypeNotificationMessageBuilderMap.get(notificationEvent.getClass()).buildNotificationMessages(notificationEvent);\n    }", "signature": "List<NotificationMessage> buildNotificationMessages(NotificationEvent notificationEvent)", "full_signature": "public List<NotificationMessage> buildNotificationMessages(NotificationEvent notificationEvent)", "class_method_signature": "NotificationMessageManager.buildNotificationMessages(NotificationEvent notificationEvent)", "testcase": false, "constructor": false, "invocations": ["notNull", "buildNotificationMessages", "get", "getClass"]}, "repository": {"repo_id": 42949039, "url": "https://github.com/FINRAOS/herd", "language": "Java", "is_fork": false, "fork_count": 36, "stargazer_count": 120, "size": 205797, "license": "licensed"}}