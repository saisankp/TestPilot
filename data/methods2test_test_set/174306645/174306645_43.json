{"test_class": {"identifier": "DefaultAggregatorTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static DMNModel model;", "modifier": "private static", "type": "DMNModel", "declarator": "model", "var_name": "model"}, {"original_string": "private static StaticConfigBean configBean;", "modifier": "private static", "type": "StaticConfigBean", "declarator": "configBean", "var_name": "configBean"}], "file": "addons/tracing/tracing-decision-common/src/test/java/org/kie/kogito/tracing/decision/aggregator/DefaultAggregatorTest.java"}, "test_case": {"identifier": "test_Aggregate_EvaluateAll_ListWithMissingLastAfterEvaluateDecisionEvent_NoExecutionStepHierarchy", "parameters": "()", "modifiers": "@Test", "return": "void", "body": "@Test\n    void test_Aggregate_EvaluateAll_ListWithMissingLastAfterEvaluateDecisionEvent_NoExecutionStepHierarchy() throws IOException {\n        final DefaultAggregator aggregator = new DefaultAggregator();\n        final List<EvaluateEvent> events = DecisionTestUtils.readEvaluateEventsFromJsonResource(EVALUATE_ALL_JSON_RESOURCE).stream()\n                .filter(e -> !(e.getType() == EvaluateEventType.AFTER_EVALUATE_DECISION && LAST_DECISION_NODE_ID.equals(e.getNodeId())))\n                .collect(Collectors.toList());\n        CloudEvent cloudEvent = aggregator.aggregate(model, EVALUATE_ALL_EXECUTION_ID, events, configBean);\n        TraceEvent traceEvent = assertValidCloudEventAndGetData(cloudEvent, EVALUATE_ALL_EXECUTION_ID);\n        assertTraceEventWithNoExecutionStepsHierarchy(traceEvent, 2, 2, 5);\n    }", "signature": "void test_Aggregate_EvaluateAll_ListWithMissingLastAfterEvaluateDecisionEvent_NoExecutionStepHierarchy()", "full_signature": "@Test void test_Aggregate_EvaluateAll_ListWithMissingLastAfterEvaluateDecisionEvent_NoExecutionStepHierarchy()", "class_method_signature": "DefaultAggregatorTest.test_Aggregate_EvaluateAll_ListWithMissingLastAfterEvaluateDecisionEvent_NoExecutionStepHierarchy()", "testcase": true, "constructor": false, "invocations": ["collect", "filter", "stream", "readEvaluateEventsFromJsonResource", "getType", "equals", "getNodeId", "toList", "aggregate", "assertValidCloudEventAndGetData", "assertTraceEventWithNoExecutionStepsHierarchy"]}, "focal_class": {"identifier": "DefaultAggregator", "superclass": "", "interfaces": "implements Aggregator", "fields": [{"original_string": "private static final Logger LOG = LoggerFactory.getLogger(DefaultAggregator.class);", "modifier": "private static final", "type": "Logger", "declarator": "LOG = LoggerFactory.getLogger(DefaultAggregator.class)", "var_name": "LOG"}, {"original_string": "private static final String UNKNOWN_SOURCE_URL = \"__UNKNOWN_SOURCE__\";", "modifier": "private static final", "type": "String", "declarator": "UNKNOWN_SOURCE_URL = \"__UNKNOWN_SOURCE__\"", "var_name": "UNKNOWN_SOURCE_URL"}, {"original_string": "private static final String EXPRESSION_ID_KEY = \"expressionId\";", "modifier": "private static final", "type": "String", "declarator": "EXPRESSION_ID_KEY = \"expressionId\"", "var_name": "EXPRESSION_ID_KEY"}, {"original_string": "private static final String MATCHES_KEY = \"matches\";", "modifier": "private static final", "type": "String", "declarator": "MATCHES_KEY = \"matches\"", "var_name": "MATCHES_KEY"}, {"original_string": "private static final String NODE_ID_KEY = \"nodeId\";", "modifier": "private static final", "type": "String", "declarator": "NODE_ID_KEY = \"nodeId\"", "var_name": "NODE_ID_KEY"}, {"original_string": "private static final String NODE_NAME_KEY = \"nodeName\";", "modifier": "private static final", "type": "String", "declarator": "NODE_NAME_KEY = \"nodeName\"", "var_name": "NODE_NAME_KEY"}, {"original_string": "private static final String SELECTED_KEY = \"selected\";", "modifier": "private static final", "type": "String", "declarator": "SELECTED_KEY = \"selected\"", "var_name": "SELECTED_KEY"}, {"original_string": "private static final String VARIABLE_ID_KEY = \"variableId\";", "modifier": "private static final", "type": "String", "declarator": "VARIABLE_ID_KEY = \"variableId\"", "var_name": "VARIABLE_ID_KEY"}], "methods": [{"identifier": "aggregate", "parameters": "(DMNModel model, String executionId, List<EvaluateEvent> events, ConfigBean configBean)", "modifiers": "@Override public", "return": "CloudEvent", "signature": "CloudEvent aggregate(DMNModel model, String executionId, List<EvaluateEvent> events, ConfigBean configBean)", "full_signature": "@Override public CloudEvent aggregate(DMNModel model, String executionId, List<EvaluateEvent> events, ConfigBean configBean)", "class_method_signature": "DefaultAggregator.aggregate(DMNModel model, String executionId, List<EvaluateEvent> events, ConfigBean configBean)", "testcase": false, "constructor": false}, {"identifier": "buildNotEnoughDataCloudEvent", "parameters": "(DMNModel model, String executionId, ConfigBean configBean)", "modifiers": "private static", "return": "CloudEvent", "signature": "CloudEvent buildNotEnoughDataCloudEvent(DMNModel model, String executionId, ConfigBean configBean)", "full_signature": "private static CloudEvent buildNotEnoughDataCloudEvent(DMNModel model, String executionId, ConfigBean configBean)", "class_method_signature": "DefaultAggregator.buildNotEnoughDataCloudEvent(DMNModel model, String executionId, ConfigBean configBean)", "testcase": false, "constructor": false}, {"identifier": "buildDefaultCloudEvent", "parameters": "(DMNModel model, String executionId, List<EvaluateEvent> events, ConfigBean configBean)", "modifiers": "private static", "return": "CloudEvent", "signature": "CloudEvent buildDefaultCloudEvent(DMNModel model, String executionId, List<EvaluateEvent> events, ConfigBean configBean)", "full_signature": "private static CloudEvent buildDefaultCloudEvent(DMNModel model, String executionId, List<EvaluateEvent> events, ConfigBean configBean)", "class_method_signature": "DefaultAggregator.buildDefaultCloudEvent(DMNModel model, String executionId, List<EvaluateEvent> events, ConfigBean configBean)", "testcase": false, "constructor": false}, {"identifier": "buildSource", "parameters": "(String serviceUrl, EvaluateEvent event)", "modifiers": "private static", "return": "URI", "signature": "URI buildSource(String serviceUrl, EvaluateEvent event)", "full_signature": "private static URI buildSource(String serviceUrl, EvaluateEvent event)", "class_method_signature": "DefaultAggregator.buildSource(String serviceUrl, EvaluateEvent event)", "testcase": false, "constructor": false}, {"identifier": "buildTraceInputValues", "parameters": "(DMNModel model, EvaluateEvent firstEvent)", "modifiers": "private static", "return": "List<TraceInputValue>", "signature": "List<TraceInputValue> buildTraceInputValues(DMNModel model, EvaluateEvent firstEvent)", "full_signature": "private static List<TraceInputValue> buildTraceInputValues(DMNModel model, EvaluateEvent firstEvent)", "class_method_signature": "DefaultAggregator.buildTraceInputValues(DMNModel model, EvaluateEvent firstEvent)", "testcase": false, "constructor": false}, {"identifier": "inputDataNodesFromFirstEvent", "parameters": "(DMNModel model, EvaluateEvent firstEvent)", "modifiers": "private static", "return": "Collection<InputDataNode>", "signature": "Collection<InputDataNode> inputDataNodesFromFirstEvent(DMNModel model, EvaluateEvent firstEvent)", "full_signature": "private static Collection<InputDataNode> inputDataNodesFromFirstEvent(DMNModel model, EvaluateEvent firstEvent)", "class_method_signature": "DefaultAggregator.inputDataNodesFromFirstEvent(DMNModel model, EvaluateEvent firstEvent)", "testcase": false, "constructor": false}, {"identifier": "streamInputsFromInitialContext", "parameters": "(EvaluateEvent firstEvent, Map<String, InputDataNode> inputNodesMap)", "modifiers": "private static", "return": "Stream<TraceInputValue>", "signature": "Stream<TraceInputValue> streamInputsFromInitialContext(EvaluateEvent firstEvent, Map<String, InputDataNode> inputNodesMap)", "full_signature": "private static Stream<TraceInputValue> streamInputsFromInitialContext(EvaluateEvent firstEvent, Map<String, InputDataNode> inputNodesMap)", "class_method_signature": "DefaultAggregator.streamInputsFromInitialContext(EvaluateEvent firstEvent, Map<String, InputDataNode> inputNodesMap)", "testcase": false, "constructor": false}, {"identifier": "buildTraceInputValue", "parameters": "(String name, Object value, Map<String, InputDataNode> inputNodesMap)", "modifiers": "private static", "return": "TraceInputValue", "signature": "TraceInputValue buildTraceInputValue(String name, Object value, Map<String, InputDataNode> inputNodesMap)", "full_signature": "private static TraceInputValue buildTraceInputValue(String name, Object value, Map<String, InputDataNode> inputNodesMap)", "class_method_signature": "DefaultAggregator.buildTraceInputValue(String name, Object value, Map<String, InputDataNode> inputNodesMap)", "testcase": false, "constructor": false}, {"identifier": "streamKnownInputsNotInInitialContext", "parameters": "(EvaluateEvent firstEvent, Map<String, InputDataNode> inputNodesMap)", "modifiers": "private static", "return": "Stream<TraceInputValue>", "signature": "Stream<TraceInputValue> streamKnownInputsNotInInitialContext(EvaluateEvent firstEvent, Map<String, InputDataNode> inputNodesMap)", "full_signature": "private static Stream<TraceInputValue> streamKnownInputsNotInInitialContext(EvaluateEvent firstEvent, Map<String, InputDataNode> inputNodesMap)", "class_method_signature": "DefaultAggregator.streamKnownInputsNotInInitialContext(EvaluateEvent firstEvent, Map<String, InputDataNode> inputNodesMap)", "testcase": false, "constructor": false}, {"identifier": "buildTraceOutputValues", "parameters": "(DMNModel model, EvaluateEvent lastEvent)", "modifiers": "private static", "return": "List<TraceOutputValue>", "signature": "List<TraceOutputValue> buildTraceOutputValues(DMNModel model, EvaluateEvent lastEvent)", "full_signature": "private static List<TraceOutputValue> buildTraceOutputValues(DMNModel model, EvaluateEvent lastEvent)", "class_method_signature": "DefaultAggregator.buildTraceOutputValues(DMNModel model, EvaluateEvent lastEvent)", "testcase": false, "constructor": false}, {"identifier": "buildTraceExecutionSteps", "parameters": "(DMNModel model, String executionId, List<EvaluateEvent> events)", "modifiers": "private static", "return": "Pair<List<TraceExecutionStep>, List<Message>>", "signature": "Pair<List<TraceExecutionStep>, List<Message>> buildTraceExecutionSteps(DMNModel model, String executionId, List<EvaluateEvent> events)", "full_signature": "private static Pair<List<TraceExecutionStep>, List<Message>> buildTraceExecutionSteps(DMNModel model, String executionId, List<EvaluateEvent> events)", "class_method_signature": "DefaultAggregator.buildTraceExecutionSteps(DMNModel model, String executionId, List<EvaluateEvent> events)", "testcase": false, "constructor": false}, {"identifier": "buildTraceExecutionStepsHierarchy", "parameters": "(DMNModel model, List<EvaluateEvent> events)", "modifiers": "private static", "return": "List<TraceExecutionStep>", "signature": "List<TraceExecutionStep> buildTraceExecutionStepsHierarchy(DMNModel model, List<EvaluateEvent> events)", "full_signature": "private static List<TraceExecutionStep> buildTraceExecutionStepsHierarchy(DMNModel model, List<EvaluateEvent> events)", "class_method_signature": "DefaultAggregator.buildTraceExecutionStepsHierarchy(DMNModel model, List<EvaluateEvent> events)", "testcase": false, "constructor": false}, {"identifier": "processEvaluateEventInHierarchy", "parameters": "(DMNModel model, Deque<DefaultAggregatorStackEntry> stack, List<TraceExecutionStep> executionSteps, EvaluateEvent event)", "modifiers": "private static", "return": "void", "signature": "void processEvaluateEventInHierarchy(DMNModel model, Deque<DefaultAggregatorStackEntry> stack, List<TraceExecutionStep> executionSteps, EvaluateEvent event)", "full_signature": "private static void processEvaluateEventInHierarchy(DMNModel model, Deque<DefaultAggregatorStackEntry> stack, List<TraceExecutionStep> executionSteps, EvaluateEvent event)", "class_method_signature": "DefaultAggregator.processEvaluateEventInHierarchy(DMNModel model, Deque<DefaultAggregatorStackEntry> stack, List<TraceExecutionStep> executionSteps, EvaluateEvent event)", "testcase": false, "constructor": false}, {"identifier": "buildTraceExecutionStepsList", "parameters": "(DMNModel model, List<EvaluateEvent> events)", "modifiers": "private static", "return": "List<TraceExecutionStep>", "signature": "List<TraceExecutionStep> buildTraceExecutionStepsList(DMNModel model, List<EvaluateEvent> events)", "full_signature": "private static List<TraceExecutionStep> buildTraceExecutionStepsList(DMNModel model, List<EvaluateEvent> events)", "class_method_signature": "DefaultAggregator.buildTraceExecutionStepsList(DMNModel model, List<EvaluateEvent> events)", "testcase": false, "constructor": false}, {"identifier": "buildTraceExecutionStep", "parameters": "(DMNModel model, DefaultAggregatorStackEntry stackEntry, EvaluateEvent afterEvent)", "modifiers": "private static", "return": "TraceExecutionStep", "signature": "TraceExecutionStep buildTraceExecutionStep(DMNModel model, DefaultAggregatorStackEntry stackEntry, EvaluateEvent afterEvent)", "full_signature": "private static TraceExecutionStep buildTraceExecutionStep(DMNModel model, DefaultAggregatorStackEntry stackEntry, EvaluateEvent afterEvent)", "class_method_signature": "DefaultAggregator.buildTraceExecutionStep(DMNModel model, DefaultAggregatorStackEntry stackEntry, EvaluateEvent afterEvent)", "testcase": false, "constructor": false}, {"identifier": "buildDefaultTraceExecutionStep", "parameters": "(long duration, EvaluateEvent afterEvent, List<TraceExecutionStep> children, TraceExecutionStepType type)", "modifiers": "private static", "return": "TraceExecutionStep", "signature": "TraceExecutionStep buildDefaultTraceExecutionStep(long duration, EvaluateEvent afterEvent, List<TraceExecutionStep> children, TraceExecutionStepType type)", "full_signature": "private static TraceExecutionStep buildDefaultTraceExecutionStep(long duration, EvaluateEvent afterEvent, List<TraceExecutionStep> children, TraceExecutionStepType type)", "class_method_signature": "DefaultAggregator.buildDefaultTraceExecutionStep(long duration, EvaluateEvent afterEvent, List<TraceExecutionStep> children, TraceExecutionStepType type)", "testcase": false, "constructor": false}, {"identifier": "buildDmnContextEntryTraceExecutionStep", "parameters": "(long duration, EvaluateEvent afterEvent, List<TraceExecutionStep> children, DMNModel model)", "modifiers": "private static", "return": "TraceExecutionStep", "signature": "TraceExecutionStep buildDmnContextEntryTraceExecutionStep(long duration, EvaluateEvent afterEvent, List<TraceExecutionStep> children, DMNModel model)", "full_signature": "private static TraceExecutionStep buildDmnContextEntryTraceExecutionStep(long duration, EvaluateEvent afterEvent, List<TraceExecutionStep> children, DMNModel model)", "class_method_signature": "DefaultAggregator.buildDmnContextEntryTraceExecutionStep(long duration, EvaluateEvent afterEvent, List<TraceExecutionStep> children, DMNModel model)", "testcase": false, "constructor": false}, {"identifier": "buildDmnDecisionTraceExecutionStep", "parameters": "(long duration, EvaluateEvent afterEvent, List<TraceExecutionStep> children)", "modifiers": "private static", "return": "TraceExecutionStep", "signature": "TraceExecutionStep buildDmnDecisionTraceExecutionStep(long duration, EvaluateEvent afterEvent, List<TraceExecutionStep> children)", "full_signature": "private static TraceExecutionStep buildDmnDecisionTraceExecutionStep(long duration, EvaluateEvent afterEvent, List<TraceExecutionStep> children)", "class_method_signature": "DefaultAggregator.buildDmnDecisionTraceExecutionStep(long duration, EvaluateEvent afterEvent, List<TraceExecutionStep> children)", "testcase": false, "constructor": false}, {"identifier": "buildDmnDecisionTableTraceExecutionStep", "parameters": "(long duration, EvaluateEvent afterEvent, List<TraceExecutionStep> children, DMNModel model)", "modifiers": "private static", "return": "TraceExecutionStep", "signature": "TraceExecutionStep buildDmnDecisionTableTraceExecutionStep(long duration, EvaluateEvent afterEvent, List<TraceExecutionStep> children, DMNModel model)", "full_signature": "private static TraceExecutionStep buildDmnDecisionTableTraceExecutionStep(long duration, EvaluateEvent afterEvent, List<TraceExecutionStep> children, DMNModel model)", "class_method_signature": "DefaultAggregator.buildDmnDecisionTableTraceExecutionStep(long duration, EvaluateEvent afterEvent, List<TraceExecutionStep> children, DMNModel model)", "testcase": false, "constructor": false}, {"identifier": "computeDurationMillis", "parameters": "(EvaluateEvent beginEvent, EvaluateEvent endEvent)", "modifiers": "private static", "return": "long", "signature": "long computeDurationMillis(EvaluateEvent beginEvent, EvaluateEvent endEvent)", "full_signature": "private static long computeDurationMillis(EvaluateEvent beginEvent, EvaluateEvent endEvent)", "class_method_signature": "DefaultAggregator.computeDurationMillis(EvaluateEvent beginEvent, EvaluateEvent endEvent)", "testcase": false, "constructor": false}, {"identifier": "traceInputFrom", "parameters": "(String name, Object value)", "modifiers": "private static", "return": "TraceInputValue", "signature": "TraceInputValue traceInputFrom(String name, Object value)", "full_signature": "private static TraceInputValue traceInputFrom(String name, Object value)", "class_method_signature": "DefaultAggregator.traceInputFrom(String name, Object value)", "testcase": false, "constructor": false}, {"identifier": "traceInputFrom", "parameters": "(InputDataNode node, Object value)", "modifiers": "private static", "return": "TraceInputValue", "signature": "TraceInputValue traceInputFrom(InputDataNode node, Object value)", "full_signature": "private static TraceInputValue traceInputFrom(InputDataNode node, Object value)", "class_method_signature": "DefaultAggregator.traceInputFrom(InputDataNode node, Object value)", "testcase": false, "constructor": false}, {"identifier": "traceOutputFrom", "parameters": "(EvaluateDecisionResult decisionResult, DMNModel model, Map<String, Object> context)", "modifiers": "private static", "return": "TraceOutputValue", "signature": "TraceOutputValue traceOutputFrom(EvaluateDecisionResult decisionResult, DMNModel model, Map<String, Object> context)", "full_signature": "private static TraceOutputValue traceOutputFrom(EvaluateDecisionResult decisionResult, DMNModel model, Map<String, Object> context)", "class_method_signature": "DefaultAggregator.traceOutputFrom(EvaluateDecisionResult decisionResult, DMNModel model, Map<String, Object> context)", "testcase": false, "constructor": false}, {"identifier": "typeAndNameOf", "parameters": "(String nodeId, DMNModel model)", "modifiers": "private static", "return": "Pair<DMNType, String>", "signature": "Pair<DMNType, String> typeAndNameOf(String nodeId, DMNModel model)", "full_signature": "private static Pair<DMNType, String> typeAndNameOf(String nodeId, DMNModel model)", "class_method_signature": "DefaultAggregator.typeAndNameOf(String nodeId, DMNModel model)", "testcase": false, "constructor": false}], "file": "addons/tracing/tracing-decision-common/src/main/java/org/kie/kogito/tracing/decision/aggregator/DefaultAggregator.java"}, "focal_method": {"identifier": "aggregate", "parameters": "(DMNModel model, String executionId, List<EvaluateEvent> events, ConfigBean configBean)", "modifiers": "@Override public", "return": "CloudEvent", "body": "@Override\n    public CloudEvent aggregate(DMNModel model, String executionId, List<EvaluateEvent> events, ConfigBean configBean) {\n        return events == null || events.isEmpty()\n                ? buildNotEnoughDataCloudEvent(model, executionId, configBean)\n                : buildDefaultCloudEvent(model, executionId, events, configBean);\n    }", "signature": "CloudEvent aggregate(DMNModel model, String executionId, List<EvaluateEvent> events, ConfigBean configBean)", "full_signature": "@Override public CloudEvent aggregate(DMNModel model, String executionId, List<EvaluateEvent> events, ConfigBean configBean)", "class_method_signature": "DefaultAggregator.aggregate(DMNModel model, String executionId, List<EvaluateEvent> events, ConfigBean configBean)", "testcase": false, "constructor": false, "invocations": ["isEmpty", "buildNotEnoughDataCloudEvent", "buildDefaultCloudEvent"]}, "repository": {"repo_id": 174306645, "url": "https://github.com/kiegroup/kogito-runtimes", "stars": 78, "created": "3/7/2019 8:49:09 AM +00:00", "updates": "2020-01-26T20:41:49+00:00", "fork": "False", "license": "licensed"}}