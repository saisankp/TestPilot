{"test_class": {"identifier": "IntToStringKeyFilterTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "@Mocked private MetricRegistry registry;", "modifier": "@Mocked private", "type": "MetricRegistry", "declarator": "registry", "var_name": "registry"}], "file": "server/src/test/java/org/jvalue/ods/processor/filter/IntToStringKeyFilterTest.java"}, "test_case": {"identifier": "testObjectParentNode", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n\tpublic void testObjectParentNode() throws Exception {\n\t\tDataSource source = createDataSource(\"/parent/id\");\n\t\tObjectNode baseNode = new ObjectNode(JsonNodeFactory.instance);\n\t\tObjectNode parentNode = baseNode.putObject(\"parent\");\n\t\tparentNode.put(\"id\", 10);\n\n\t\tObjectNode resultNode = new IntToStringKeyFilter(source, registry).doFilter(baseNode);\n\n\t\tAssert.assertTrue(resultNode.path(\"parent\").path(\"id\").isTextual());\n\t}", "signature": "void testObjectParentNode()", "full_signature": "@Test public void testObjectParentNode()", "class_method_signature": "IntToStringKeyFilterTest.testObjectParentNode()", "testcase": true, "constructor": false, "invocations": ["createDataSource", "putObject", "put", "doFilter", "assertTrue", "isTextual", "path", "path"]}, "focal_class": {"identifier": "IntToStringKeyFilter", "superclass": "extends AbstractFilter<ObjectNode, ObjectNode>", "interfaces": "", "fields": [{"original_string": "private final JsonPointer parentPointer;", "modifier": "private final", "type": "JsonPointer", "declarator": "parentPointer", "var_name": "parentPointer"}, {"original_string": "private final String keyName;", "modifier": "private final", "type": "String", "declarator": "keyName", "var_name": "keyName"}], "methods": [{"identifier": "IntToStringKeyFilter", "parameters": "(\n\t\t\t@Assisted DataSource source,\n\t\t\tMetricRegistry registry)", "modifiers": "@Inject", "return": "", "signature": " IntToStringKeyFilter(\n\t\t\t@Assisted DataSource source,\n\t\t\tMetricRegistry registry)", "full_signature": "@Inject  IntToStringKeyFilter(\n\t\t\t@Assisted DataSource source,\n\t\t\tMetricRegistry registry)", "class_method_signature": "IntToStringKeyFilter.IntToStringKeyFilter(\n\t\t\t@Assisted DataSource source,\n\t\t\tMetricRegistry registry)", "testcase": false, "constructor": true}, {"identifier": "doFilter", "parameters": "(ObjectNode node)", "modifiers": "@Override protected", "return": "ObjectNode", "signature": "ObjectNode doFilter(ObjectNode node)", "full_signature": "@Override protected ObjectNode doFilter(ObjectNode node)", "class_method_signature": "IntToStringKeyFilter.doFilter(ObjectNode node)", "testcase": false, "constructor": false}, {"identifier": "doOnComplete", "parameters": "()", "modifiers": "@Override protected", "return": "void", "signature": "void doOnComplete()", "full_signature": "@Override protected void doOnComplete()", "class_method_signature": "IntToStringKeyFilter.doOnComplete()", "testcase": false, "constructor": false}], "file": "server/src/main/java/org/jvalue/ods/processor/filter/IntToStringKeyFilter.java"}, "focal_method": {"identifier": "doFilter", "parameters": "(ObjectNode node)", "modifiers": "@Override protected", "return": "ObjectNode", "body": "@Override\n\tprotected ObjectNode doFilter(ObjectNode node) throws FilterException {\n\t\tJsonNode keyNode = node.at(source.getDomainIdKey());\n\t\tif (keyNode.isTextual()) return node;\n\t\tJsonNode parentNode = node.at(parentPointer);\n\n\t\tif (parentNode.isObject()) {\n\t\t\t// add to parent object\n\t\t\t((ObjectNode) parentNode).put(keyName, keyNode.asText());\n\t\t} else if (parentNode.isArray()) {\n\t\t\t// add to parent array\n\t\t\t((ArrayNode) parentNode).insert(Integer.valueOf(keyName), keyNode.asText());\n\t\t} else {\n\t\t\tthrow new IllegalArgumentException(\"failed to find parent node for domainIdKey\");\n\t\t}\n\n\t\treturn node;\n\t}", "signature": "ObjectNode doFilter(ObjectNode node)", "full_signature": "@Override protected ObjectNode doFilter(ObjectNode node)", "class_method_signature": "IntToStringKeyFilter.doFilter(ObjectNode node)", "testcase": false, "constructor": false, "invocations": ["at", "getDomainIdKey", "isTextual", "at", "isObject", "put", "asText", "isArray", "insert", "valueOf", "asText"]}, "repository": {"repo_id": 14989619, "url": "https://github.com/jvalue/open-data-service-v1", "language": "Java", "is_fork": false, "fork_count": 8, "stargazer_count": 6, "size": 4525, "license": "licensed"}}