{"test_class": {"identifier": "CacheInvocationContextFactoryTest", "superclass": "", "interfaces": "", "fields": [], "file": "hystrix-contrib/hystrix-javanica/src/test/java/com/netflix/hystrix/contrib/javanica/cache/CacheInvocationContextFactoryTest.java"}, "test_case": {"identifier": "testCreateCacheResultInvocationContext_givenMethodAnnotatedWithCacheResult_shouldCreateCorrectCacheKeyInvocationContext", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testCreateCacheResultInvocationContext_givenMethodAnnotatedWithCacheResult_shouldCreateCorrectCacheKeyInvocationContext()\n            throws NoSuchMethodException {\n        // given\n        TestCacheClass testCacheClass = new TestCacheClass();\n        String param1 = \"val_1\";\n        String param2 = \"val_2\";\n        Integer param3 = 3;\n        MetaHolder metaHolder = MetaHolder.builder()\n                .method(TestCacheClass.class.getMethod(\"cacheResultMethod\", String.class, String.class, Integer.class))\n                .args(new Object[]{param1, param2, param3})\n                .obj(testCacheClass).build();\n        // when\n        CacheInvocationContext<CacheResult> context = CacheInvocationContextFactory.createCacheResultInvocationContext(metaHolder);\n\n        // then\n        assertNotNull(context.getKeyParameters());\n        assertEquals(2, context.getKeyParameters().size());\n        assertEquals(String.class, context.getKeyParameters().get(0).getRawType());\n        assertEquals(0, context.getKeyParameters().get(0).getPosition());\n        assertEquals(param1, context.getKeyParameters().get(0).getValue());\n        assertTrue(isAnnotationPresent(context.getKeyParameters().get(0), CacheKey.class));\n\n        assertEquals(Integer.class, context.getKeyParameters().get(1).getRawType());\n        assertEquals(2, context.getKeyParameters().get(1).getPosition());\n        assertEquals(param3, context.getKeyParameters().get(1).getValue());\n        assertTrue(isAnnotationPresent(context.getKeyParameters().get(1), CacheKey.class));\n    }", "signature": "void testCreateCacheResultInvocationContext_givenMethodAnnotatedWithCacheResult_shouldCreateCorrectCacheKeyInvocationContext()", "full_signature": "@Test public void testCreateCacheResultInvocationContext_givenMethodAnnotatedWithCacheResult_shouldCreateCorrectCacheKeyInvocationContext()", "class_method_signature": "CacheInvocationContextFactoryTest.testCreateCacheResultInvocationContext_givenMethodAnnotatedWithCacheResult_shouldCreateCorrectCacheKeyInvocationContext()", "testcase": true, "constructor": false, "invocations": ["build", "obj", "args", "method", "builder", "getMethod", "createCacheResultInvocationContext", "assertNotNull", "getKeyParameters", "assertEquals", "size", "getKeyParameters", "assertEquals", "getRawType", "get", "getKeyParameters", "assertEquals", "getPosition", "get", "getKeyParameters", "assertEquals", "getValue", "get", "getKeyParameters", "assertTrue", "isAnnotationPresent", "get", "getKeyParameters", "assertEquals", "getRawType", "get", "getKeyParameters", "assertEquals", "getPosition", "get", "getKeyParameters", "assertEquals", "getValue", "get", "getKeyParameters", "assertTrue", "isAnnotationPresent", "get", "getKeyParameters"]}, "focal_class": {"identifier": "CacheInvocationContextFactory", "superclass": "", "interfaces": "", "fields": [], "methods": [{"identifier": "createCacheResultInvocationContext", "parameters": "(MetaHolder metaHolder)", "modifiers": "public static", "return": "CacheInvocationContext<CacheResult>", "signature": "CacheInvocationContext<CacheResult> createCacheResultInvocationContext(MetaHolder metaHolder)", "full_signature": "public static CacheInvocationContext<CacheResult> createCacheResultInvocationContext(MetaHolder metaHolder)", "class_method_signature": "CacheInvocationContextFactory.createCacheResultInvocationContext(MetaHolder metaHolder)", "testcase": false, "constructor": false}, {"identifier": "createCacheRemoveInvocationContext", "parameters": "(MetaHolder metaHolder)", "modifiers": "public static", "return": "CacheInvocationContext<CacheRemove>", "signature": "CacheInvocationContext<CacheRemove> createCacheRemoveInvocationContext(MetaHolder metaHolder)", "full_signature": "public static CacheInvocationContext<CacheRemove> createCacheRemoveInvocationContext(MetaHolder metaHolder)", "class_method_signature": "CacheInvocationContextFactory.createCacheRemoveInvocationContext(MetaHolder metaHolder)", "testcase": false, "constructor": false}, {"identifier": "createCacheKeyAction", "parameters": "(String method, MetaHolder metaHolder)", "modifiers": "private static", "return": "MethodExecutionAction", "signature": "MethodExecutionAction createCacheKeyAction(String method, MetaHolder metaHolder)", "full_signature": "private static MethodExecutionAction createCacheKeyAction(String method, MetaHolder metaHolder)", "class_method_signature": "CacheInvocationContextFactory.createCacheKeyAction(String method, MetaHolder metaHolder)", "testcase": false, "constructor": false}], "file": "hystrix-contrib/hystrix-javanica/src/main/java/com/netflix/hystrix/contrib/javanica/cache/CacheInvocationContextFactory.java"}, "focal_method": {"identifier": "createCacheResultInvocationContext", "parameters": "(MetaHolder metaHolder)", "modifiers": "public static", "return": "CacheInvocationContext<CacheResult>", "body": "public static CacheInvocationContext<CacheResult> createCacheResultInvocationContext(MetaHolder metaHolder) {\n        Method method = metaHolder.getMethod();\n        if (method.isAnnotationPresent(CacheResult.class)) {\n            CacheResult cacheResult = method.getAnnotation(CacheResult.class);\n            MethodExecutionAction cacheKeyMethod = createCacheKeyAction(cacheResult.cacheKeyMethod(), metaHolder);\n            return new CacheInvocationContext<CacheResult>(cacheResult, cacheKeyMethod, metaHolder.getObj(), method, metaHolder.getArgs());\n        }\n        return null;\n    }", "signature": "CacheInvocationContext<CacheResult> createCacheResultInvocationContext(MetaHolder metaHolder)", "full_signature": "public static CacheInvocationContext<CacheResult> createCacheResultInvocationContext(MetaHolder metaHolder)", "class_method_signature": "CacheInvocationContextFactory.createCacheResultInvocationContext(MetaHolder metaHolder)", "testcase": false, "constructor": false, "invocations": ["getMethod", "isAnnotationPresent", "getAnnotation", "createCacheKeyAction", "cacheKeyMethod", "getObj", "getArgs"]}, "repository": {"repo_id": 6766558, "url": "https://github.com/Netflix/Hystrix", "stars": 19028, "created": "11/19/2012 8:14:46 PM +00:00", "updates": "2020-01-27T17:55:28+00:00", "fork": "False", "license": "licensed"}}