{"test_class": {"identifier": "StorageHelperTest", "superclass": "extends AbstractServiceTest", "interfaces": "", "fields": [], "file": "herd-code/herd-service/src/test/java/org/finra/herd/service/helper/StorageHelperTest.java"}, "test_case": {"identifier": "testGetStorageAttributeValueByNameFromStorageEntity", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testGetStorageAttributeValueByNameFromStorageEntity()\n    {\n        // Create an S3 storage entity.\n        List<Attribute> attributes = new ArrayList<>();\n        attributes.add(new Attribute(ATTRIBUTE_NAME_1_MIXED_CASE, ATTRIBUTE_VALUE_1));\n        attributes.add(new Attribute(ATTRIBUTE_NAME_2_MIXED_CASE, BLANK_TEXT));\n        attributes.add(new Attribute(ATTRIBUTE_NAME_3_MIXED_CASE, null));\n        StorageEntity storageEntity = storageDaoTestHelper.createStorageEntity(STORAGE_NAME, StoragePlatformEntity.S3, attributes);\n\n        // Retrieve optional attribute values.\n        Assert.assertEquals(ATTRIBUTE_VALUE_1, storageHelper.getStorageAttributeValueByName(ATTRIBUTE_NAME_1_MIXED_CASE, storageEntity, false));\n        Assert.assertEquals(BLANK_TEXT, storageHelper.getStorageAttributeValueByName(ATTRIBUTE_NAME_2_MIXED_CASE, storageEntity, false));\n        Assert.assertNull(storageHelper.getStorageAttributeValueByName(ATTRIBUTE_NAME_3_MIXED_CASE, storageEntity, false));\n\n        // Validate case insensitivity.\n        Assert.assertEquals(ATTRIBUTE_VALUE_1, storageHelper.getStorageAttributeValueByName(ATTRIBUTE_NAME_1_MIXED_CASE.toUpperCase(), storageEntity, false));\n        Assert.assertEquals(ATTRIBUTE_VALUE_1, storageHelper.getStorageAttributeValueByName(ATTRIBUTE_NAME_1_MIXED_CASE.toLowerCase(), storageEntity, false));\n\n        // Retrieve a required attribute value.\n        Assert.assertEquals(ATTRIBUTE_VALUE_1, storageHelper.getStorageAttributeValueByName(ATTRIBUTE_NAME_1_MIXED_CASE, storageEntity, true));\n\n        // Try to retrieve a missing required attribute values when\n        // - attribute does not exist\n        // - attribute exists with a blank text value\n        // - attribute exists with a null value\n        String attributeNoExist = \"I_DO_NOT_EXIST\";\n        for (String attributeName : Arrays.asList(attributeNoExist, ATTRIBUTE_NAME_2_MIXED_CASE, ATTRIBUTE_NAME_3_MIXED_CASE))\n        {\n            try\n            {\n                storageHelper.getStorageAttributeValueByName(attributeName, storageEntity, true);\n            }\n            catch (IllegalStateException e)\n            {\n                if (attributeName.equals(attributeNoExist))\n                {\n                    Assert.assertEquals(String.format(\"Attribute \\\"%s\\\" for \\\"%s\\\" storage must be configured.\", attributeName, STORAGE_NAME), e.getMessage());\n                }\n                else\n                {\n                    Assert.assertEquals(String.format(\"Attribute \\\"%s\\\" for \\\"%s\\\" storage must have a value that is not blank.\", attributeName, STORAGE_NAME),\n                        e.getMessage());\n                }\n            }\n        }\n    }", "signature": "void testGetStorageAttributeValueByNameFromStorageEntity()", "full_signature": "@Test public void testGetStorageAttributeValueByNameFromStorageEntity()", "class_method_signature": "StorageHelperTest.testGetStorageAttributeValueByNameFromStorageEntity()", "testcase": true, "constructor": false, "invocations": ["add", "add", "add", "createStorageEntity", "assertEquals", "getStorageAttributeValueByName", "assertEquals", "getStorageAttributeValueByName", "assertNull", "getStorageAttributeValueByName", "assertEquals", "getStorageAttributeValueByName", "toUpperCase", "assertEquals", "getStorageAttributeValueByName", "toLowerCase", "assertEquals", "getStorageAttributeValueByName", "asList", "getStorageAttributeValueByName", "equals", "assertEquals", "format", "getMessage", "assertEquals", "format", "getMessage"]}, "focal_class": {"identifier": "StorageHelper", "superclass": "", "interfaces": "", "fields": [{"original_string": "@Autowired\n    protected StsDao stsDao;", "modifier": "@Autowired\n    protected", "type": "StsDao", "declarator": "stsDao", "var_name": "stsDao"}, {"original_string": "@Autowired\n    private ConfigurationHelper configurationHelper;", "modifier": "@Autowired\n    private", "type": "ConfigurationHelper", "declarator": "configurationHelper", "var_name": "configurationHelper"}], "methods": [{"identifier": "getBooleanStorageAttributeValueByName", "parameters": "(String attributeName, StorageEntity storageEntity, boolean attributeRequired,\n        boolean attributeValueRequiredIfExists)", "modifiers": "public", "return": "boolean", "signature": "boolean getBooleanStorageAttributeValueByName(String attributeName, StorageEntity storageEntity, boolean attributeRequired,\n        boolean attributeValueRequiredIfExists)", "full_signature": "public boolean getBooleanStorageAttributeValueByName(String attributeName, StorageEntity storageEntity, boolean attributeRequired,\n        boolean attributeValueRequiredIfExists)", "class_method_signature": "StorageHelper.getBooleanStorageAttributeValueByName(String attributeName, StorageEntity storageEntity, boolean attributeRequired,\n        boolean attributeValueRequiredIfExists)", "testcase": false, "constructor": false}, {"identifier": "getS3BucketAccessParams", "parameters": "(StorageEntity storageEntity)", "modifiers": "public", "return": "S3FileTransferRequestParamsDto", "signature": "S3FileTransferRequestParamsDto getS3BucketAccessParams(StorageEntity storageEntity)", "full_signature": "public S3FileTransferRequestParamsDto getS3BucketAccessParams(StorageEntity storageEntity)", "class_method_signature": "StorageHelper.getS3BucketAccessParams(StorageEntity storageEntity)", "testcase": false, "constructor": false}, {"identifier": "getS3FileCopyRequestParamsDto", "parameters": "()", "modifiers": "public", "return": "S3FileCopyRequestParamsDto", "signature": "S3FileCopyRequestParamsDto getS3FileCopyRequestParamsDto()", "full_signature": "public S3FileCopyRequestParamsDto getS3FileCopyRequestParamsDto()", "class_method_signature": "StorageHelper.getS3FileCopyRequestParamsDto()", "testcase": false, "constructor": false}, {"identifier": "getS3FileTransferRequestParamsDto", "parameters": "()", "modifiers": "public", "return": "S3FileTransferRequestParamsDto", "signature": "S3FileTransferRequestParamsDto getS3FileTransferRequestParamsDto()", "full_signature": "public S3FileTransferRequestParamsDto getS3FileTransferRequestParamsDto()", "class_method_signature": "StorageHelper.getS3FileTransferRequestParamsDto()", "testcase": false, "constructor": false}, {"identifier": "getS3FileTransferRequestParamsDtoByRole", "parameters": "(String roleArn, String sessionName)", "modifiers": "public", "return": "S3FileTransferRequestParamsDto", "signature": "S3FileTransferRequestParamsDto getS3FileTransferRequestParamsDtoByRole(String roleArn, String sessionName)", "full_signature": "public S3FileTransferRequestParamsDto getS3FileTransferRequestParamsDtoByRole(String roleArn, String sessionName)", "class_method_signature": "StorageHelper.getS3FileTransferRequestParamsDtoByRole(String roleArn, String sessionName)", "testcase": false, "constructor": false}, {"identifier": "getStorageAttributeIntegerValueByName", "parameters": "(String attributeName, StorageEntity storageEntity, Integer defaultValue)", "modifiers": "public", "return": "Integer", "signature": "Integer getStorageAttributeIntegerValueByName(String attributeName, StorageEntity storageEntity, Integer defaultValue)", "full_signature": "public Integer getStorageAttributeIntegerValueByName(String attributeName, StorageEntity storageEntity, Integer defaultValue)", "class_method_signature": "StorageHelper.getStorageAttributeIntegerValueByName(String attributeName, StorageEntity storageEntity, Integer defaultValue)", "testcase": false, "constructor": false}, {"identifier": "getStorageAttributeIntegerValueByName", "parameters": "(String attributeName, StorageEntity storageEntity, boolean attributeRequired,\n        boolean attributeValueRequiredIfExists)", "modifiers": "public", "return": "Integer", "signature": "Integer getStorageAttributeIntegerValueByName(String attributeName, StorageEntity storageEntity, boolean attributeRequired,\n        boolean attributeValueRequiredIfExists)", "full_signature": "public Integer getStorageAttributeIntegerValueByName(String attributeName, StorageEntity storageEntity, boolean attributeRequired,\n        boolean attributeValueRequiredIfExists)", "class_method_signature": "StorageHelper.getStorageAttributeIntegerValueByName(String attributeName, StorageEntity storageEntity, boolean attributeRequired,\n        boolean attributeValueRequiredIfExists)", "testcase": false, "constructor": false}, {"identifier": "getStorageAttributeValueByName", "parameters": "(String attributeName, Storage storage, Boolean required)", "modifiers": "public", "return": "String", "signature": "String getStorageAttributeValueByName(String attributeName, Storage storage, Boolean required)", "full_signature": "public String getStorageAttributeValueByName(String attributeName, Storage storage, Boolean required)", "class_method_signature": "StorageHelper.getStorageAttributeValueByName(String attributeName, Storage storage, Boolean required)", "testcase": false, "constructor": false}, {"identifier": "getStorageAttributeValueByName", "parameters": "(String attributeName, StorageEntity storageEntity, boolean attributeValueRequired)", "modifiers": "public", "return": "String", "signature": "String getStorageAttributeValueByName(String attributeName, StorageEntity storageEntity, boolean attributeValueRequired)", "full_signature": "public String getStorageAttributeValueByName(String attributeName, StorageEntity storageEntity, boolean attributeValueRequired)", "class_method_signature": "StorageHelper.getStorageAttributeValueByName(String attributeName, StorageEntity storageEntity, boolean attributeValueRequired)", "testcase": false, "constructor": false}, {"identifier": "getStorageAttributeValueByName", "parameters": "(String attributeName, StorageEntity storageEntity, boolean attributeRequired,\n        boolean attributeValueRequiredIfExists)", "modifiers": "public", "return": "String", "signature": "String getStorageAttributeValueByName(String attributeName, StorageEntity storageEntity, boolean attributeRequired,\n        boolean attributeValueRequiredIfExists)", "full_signature": "public String getStorageAttributeValueByName(String attributeName, StorageEntity storageEntity, boolean attributeRequired,\n        boolean attributeValueRequiredIfExists)", "class_method_signature": "StorageHelper.getStorageAttributeValueByName(String attributeName, StorageEntity storageEntity, boolean attributeRequired,\n        boolean attributeValueRequiredIfExists)", "testcase": false, "constructor": false}, {"identifier": "getStorageBucketName", "parameters": "(StorageEntity storageEntity)", "modifiers": "public", "return": "String", "signature": "String getStorageBucketName(StorageEntity storageEntity)", "full_signature": "public String getStorageBucketName(StorageEntity storageEntity)", "class_method_signature": "StorageHelper.getStorageBucketName(StorageEntity storageEntity)", "testcase": false, "constructor": false}, {"identifier": "getStorageKmsKeyId", "parameters": "(StorageEntity storageEntity)", "modifiers": "public", "return": "String", "signature": "String getStorageKmsKeyId(StorageEntity storageEntity)", "full_signature": "public String getStorageKmsKeyId(StorageEntity storageEntity)", "class_method_signature": "StorageHelper.getStorageKmsKeyId(StorageEntity storageEntity)", "testcase": false, "constructor": false}, {"identifier": "setProxyHostAndPort", "parameters": "(S3FileTransferRequestParamsDto params)", "modifiers": "private", "return": "void", "signature": "void setProxyHostAndPort(S3FileTransferRequestParamsDto params)", "full_signature": "private void setProxyHostAndPort(S3FileTransferRequestParamsDto params)", "class_method_signature": "StorageHelper.setProxyHostAndPort(S3FileTransferRequestParamsDto params)", "testcase": false, "constructor": false}], "file": "herd-code/herd-service/src/main/java/org/finra/herd/service/helper/StorageHelper.java"}, "focal_method": {"identifier": "getStorageAttributeValueByName", "parameters": "(String attributeName, Storage storage, Boolean required)", "modifiers": "public", "return": "String", "body": "public String getStorageAttributeValueByName(String attributeName, Storage storage, Boolean required)\n    {\n        String attributeValue = null;\n\n        for (Attribute attribute : storage.getAttributes())\n        {\n            if (attribute.getName().equalsIgnoreCase(attributeName))\n            {\n                attributeValue = attribute.getValue();\n                break;\n            }\n        }\n\n        if (required && StringUtils.isBlank(attributeValue))\n        {\n            throw new IllegalStateException(String.format(\"Attribute \\\"%s\\\" for \\\"%s\\\" storage must be configured.\", attributeName, storage.getName()));\n        }\n\n        return attributeValue;\n    }", "signature": "String getStorageAttributeValueByName(String attributeName, Storage storage, Boolean required)", "full_signature": "public String getStorageAttributeValueByName(String attributeName, Storage storage, Boolean required)", "class_method_signature": "StorageHelper.getStorageAttributeValueByName(String attributeName, Storage storage, Boolean required)", "testcase": false, "constructor": false, "invocations": ["getAttributes", "equalsIgnoreCase", "getName", "getValue", "isBlank", "format", "getName"]}, "repository": {"repo_id": 42949039, "url": "https://github.com/FINRAOS/herd", "language": "Java", "is_fork": false, "fork_count": 36, "stargazer_count": 120, "size": 205797, "license": "licensed"}}