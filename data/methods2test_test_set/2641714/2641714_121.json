{"test_class": {"identifier": "TestDigesterDefinitionsReader", "superclass": "", "interfaces": "", "fields": [{"original_string": "private final Logger log = LoggerFactory\n            .getLogger(TestDigesterDefinitionsReader.class);", "modifier": "private final", "type": "Logger", "declarator": "log = LoggerFactory\n            .getLogger(TestDigesterDefinitionsReader.class)", "var_name": "log"}, {"original_string": "private DigesterDefinitionsReader reader;", "modifier": "private", "type": "DigesterDefinitionsReader", "declarator": "reader", "var_name": "reader"}], "file": "tiles-core/src/test/java/org/apache/tiles/definition/digester/TestDigesterDefinitionsReader.java"}, "test_case": {"identifier": "testRead21Version", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testRead21Version() throws IOException {\n        URL configFile = this.getClass().getClassLoader().getResource(\n                \"org/apache/tiles/config/tiles-defs-2.1.xml\");\n        assertNotNull(\"Config file not found\", configFile);\n\n        InputStream source = configFile.openStream();\n        Map<String, Definition> definitions = reader.read(source);\n\n        assertNotNull(\"Definitions not returned.\", definitions);\n        Definition def = definitions.get(\"doc.cascaded.test\");\n\n        assertNotNull(\"Couldn't find doc.role.test tile.\", def);\n        Attribute attribute = def.getLocalAttribute(\"title\");\n        assertNotNull(\"Couldn't Find title local attribute.\", attribute);\n        attribute = def.getCascadedAttribute(\"title2\");\n        assertNotNull(\"Couldn't Find title2 cascaded attribute.\", attribute);\n        attribute = def.getLocalAttribute(\"items1\");\n        assertNotNull(\"Couldn't Find items1 local attribute.\", attribute);\n        attribute = def.getCascadedAttribute(\"items2\");\n        assertNotNull(\"Couldn't Find items2 cascaded attribute.\", attribute);\n\n        def = definitions.get(\"test.nesting.definitions\");\n        assertNotNull(\"Couldn't find test.nesting.definitions tile.\", def);\n        assertEquals(\"/layout.jsp\", def.getTemplateAttribute().getValue());\n        assertEquals(\"template\", def.getTemplateAttribute().getRenderer());\n        attribute = def.getAttribute(\"body\");\n        assertNotNull(\"Couldn't Find body attribute.\", attribute);\n        assertEquals(\"Attribute not of 'definition' type\", \"definition\",\n                attribute.getRenderer());\n        assertNotNull(\"Attribute value null\", attribute.getValue());\n        String defName = attribute.getValue().toString();\n        def = definitions.get(defName);\n        assertNotNull(\"Couldn't find \" + defName + \" tile.\", def);\n\n        def = definitions.get(\"test.nesting.list.definitions\");\n        assertNotNull(\"Couldn't find test.nesting.list.definitions tile.\",\n                def);\n        attribute = def.getAttribute(\"list\");\n        assertNotNull(\"Couldn't Find list attribute.\", attribute);\n        assertTrue(\"Attribute not of valid type\",\n                attribute instanceof ListAttribute);\n        ListAttribute listAttribute = (ListAttribute) attribute;\n        List<Attribute> list = listAttribute.getValue();\n        assertEquals(\"The list is not of correct size\", 1, list.size());\n        attribute = list.get(0);\n        assertNotNull(\"Couldn't Find element attribute.\", attribute);\n        assertEquals(\"Attribute not of 'definition' type\", \"definition\",\n                attribute.getRenderer());\n        assertNotNull(\"Attribute value null\", attribute.getValue());\n        defName = attribute.getValue().toString();\n        def = definitions.get(defName);\n        assertNotNull(\"Couldn't find \" + defName + \" tile.\", def);\n\n        defName = \"test.inherit.list.base\";\n        def = definitions.get(defName);\n        assertNotNull(\"Couldn't find \" + defName + \" tile.\", def);\n        defName = \"test.inherit.list\";\n        def = definitions.get(defName);\n        assertNotNull(\"Couldn't find \" + defName + \" tile.\", def);\n        listAttribute = (ListAttribute) def.getAttribute(\"list\");\n        assertEquals(\"This definition does not inherit its list attribute\",\n                true, listAttribute.isInherit());\n        defName = \"test.noinherit.list\";\n        def = definitions.get(defName);\n        listAttribute = (ListAttribute) def.getAttribute(\"list\");\n        assertEquals(\"This definition inherits its list attribute\",\n                false, listAttribute.isInherit());\n\n        defName = \"test.new.attributes\";\n        def = definitions.get(defName);\n        assertNotNull(\"Couldn't find \" + defName + \" tile.\", def);\n        Attribute templateAttribute = def.getTemplateAttribute();\n        assertEquals(templateAttribute.getExpressionObject().getExpression(),\n                \"${my.expression}\");\n        assertEquals(\"mytype\", templateAttribute.getRenderer());\n        attribute = def.getAttribute(\"body\");\n        assertNotNull(\"Couldn't Find body attribute.\", attribute);\n        assertEquals(\"${my.attribute.expression}\", attribute\n                .getExpressionObject().getExpression());\n    }", "signature": "void testRead21Version()", "full_signature": "@Test public void testRead21Version()", "class_method_signature": "TestDigesterDefinitionsReader.testRead21Version()", "testcase": true, "constructor": false, "invocations": ["getResource", "getClassLoader", "getClass", "assertNotNull", "openStream", "read", "assertNotNull", "get", "assertNotNull", "getLocalAttribute", "assertNotNull", "getCascadedAttribute", "assertNotNull", "getLocalAttribute", "assertNotNull", "getCascadedAttribute", "assertNotNull", "get", "assertNotNull", "assertEquals", "getValue", "getTemplateAttribute", "assertEquals", "getRenderer", "getTemplateAttribute", "getAttribute", "assertNotNull", "assertEquals", "getRenderer", "assertNotNull", "getValue", "toString", "getValue", "get", "assertNotNull", "get", "assertNotNull", "getAttribute", "assertNotNull", "assertTrue", "getValue", "assertEquals", "size", "get", "assertNotNull", "assertEquals", "getRenderer", "assertNotNull", "getValue", "toString", "getValue", "get", "assertNotNull", "get", "assertNotNull", "get", "assertNotNull", "getAttribute", "assertEquals", "isInherit", "get", "getAttribute", "assertEquals", "isInherit", "get", "assertNotNull", "getTemplateAttribute", "assertEquals", "getExpression", "getExpressionObject", "assertEquals", "getRenderer", "getAttribute", "assertNotNull", "assertEquals", "getExpression", "getExpressionObject"]}, "focal_class": {"identifier": "DigesterDefinitionsReader", "superclass": "", "interfaces": "implements DefinitionsReader", "fields": [{"original_string": "public static final String PARSER_VALIDATE_PARAMETER_NAME =\n        \"org.apache.tiles.definition.digester.DigesterDefinitionsReader.PARSER_VALIDATE\";", "modifier": "public static final", "type": "String", "declarator": "PARSER_VALIDATE_PARAMETER_NAME =\n        \"org.apache.tiles.definition.digester.DigesterDefinitionsReader.PARSER_VALIDATE\"", "var_name": "PARSER_VALIDATE_PARAMETER_NAME"}, {"original_string": "private static final String DEFINITION_TAG = \"tiles-definitions/definition\";", "modifier": "private static final", "type": "String", "declarator": "DEFINITION_TAG = \"tiles-definitions/definition\"", "var_name": "DEFINITION_TAG"}, {"original_string": "private static final String PUT_TAG = \"*/definition/put-attribute\";", "modifier": "private static final", "type": "String", "declarator": "PUT_TAG = \"*/definition/put-attribute\"", "var_name": "PUT_TAG"}, {"original_string": "private static final String PUT_DEFINITION_TAG = \"*/put-attribute/definition\";", "modifier": "private static final", "type": "String", "declarator": "PUT_DEFINITION_TAG = \"*/put-attribute/definition\"", "var_name": "PUT_DEFINITION_TAG"}, {"original_string": "private static final String ADD_DEFINITION_TAG = \"*/add-attribute/definition\";", "modifier": "private static final", "type": "String", "declarator": "ADD_DEFINITION_TAG = \"*/add-attribute/definition\"", "var_name": "ADD_DEFINITION_TAG"}, {"original_string": "private static final String DEF_LIST_TAG = \"*/definition/put-list-attribute\";", "modifier": "private static final", "type": "String", "declarator": "DEF_LIST_TAG = \"*/definition/put-list-attribute\"", "var_name": "DEF_LIST_TAG"}, {"original_string": "private static final String ADD_LIST_ELE_TAG = \"*/add-attribute\";", "modifier": "private static final", "type": "String", "declarator": "ADD_LIST_ELE_TAG = \"*/add-attribute\"", "var_name": "ADD_LIST_ELE_TAG"}, {"original_string": "private static final String NESTED_LIST = \"*/add-list-attribute\";", "modifier": "private static final", "type": "String", "declarator": "NESTED_LIST = \"*/add-list-attribute\"", "var_name": "NESTED_LIST"}, {"original_string": "protected static final String DEFINITION_HANDLER_CLASS =\n        Definition.class.getName();", "modifier": "protected static final", "type": "String", "declarator": "DEFINITION_HANDLER_CLASS =\n        Definition.class.getName()", "var_name": "DEFINITION_HANDLER_CLASS"}, {"original_string": "protected static final String PUT_ATTRIBUTE_HANDLER_CLASS =\n        Attribute.class.getName();", "modifier": "protected static final", "type": "String", "declarator": "PUT_ATTRIBUTE_HANDLER_CLASS =\n        Attribute.class.getName()", "var_name": "PUT_ATTRIBUTE_HANDLER_CLASS"}, {"original_string": "protected static final String LIST_HANDLER_CLASS =\n        ListAttribute.class.getName();", "modifier": "protected static final", "type": "String", "declarator": "LIST_HANDLER_CLASS =\n        ListAttribute.class.getName()", "var_name": "LIST_HANDLER_CLASS"}, {"original_string": "protected Digester digester;", "modifier": "protected", "type": "Digester", "declarator": "digester", "var_name": "digester"}, {"original_string": "protected String[] registrations;", "modifier": "protected", "type": "String[]", "declarator": "registrations", "var_name": "registrations"}, {"original_string": "private Map<String, Definition> definitions;", "modifier": "private", "type": "Map<String, Definition>", "declarator": "definitions", "var_name": "definitions"}, {"original_string": "private int anonymousDefinitionIndex = 1;", "modifier": "private", "type": "int", "declarator": "anonymousDefinitionIndex = 1", "var_name": "anonymousDefinitionIndex"}], "methods": [{"identifier": "DigesterDefinitionsReader", "parameters": "()", "modifiers": "public", "return": "", "signature": " DigesterDefinitionsReader()", "full_signature": "public  DigesterDefinitionsReader()", "class_method_signature": "DigesterDefinitionsReader.DigesterDefinitionsReader()", "testcase": false, "constructor": true}, {"identifier": "setValidating", "parameters": "(boolean validating)", "modifiers": "public", "return": "void", "signature": "void setValidating(boolean validating)", "full_signature": "public void setValidating(boolean validating)", "class_method_signature": "DigesterDefinitionsReader.setValidating(boolean validating)", "testcase": false, "constructor": false}, {"identifier": "read", "parameters": "(Object source)", "modifiers": "public", "return": "Map<String, Definition>", "signature": "Map<String, Definition> read(Object source)", "full_signature": "public Map<String, Definition> read(Object source)", "class_method_signature": "DigesterDefinitionsReader.read(Object source)", "testcase": false, "constructor": false}, {"identifier": "initSyntax", "parameters": "(Digester digester)", "modifiers": "protected", "return": "void", "signature": "void initSyntax(Digester digester)", "full_signature": "protected void initSyntax(Digester digester)", "class_method_signature": "DigesterDefinitionsReader.initSyntax(Digester digester)", "testcase": false, "constructor": false}, {"identifier": "initDigesterForTilesDefinitionsSyntax", "parameters": "(Digester digester)", "modifiers": "private", "return": "void", "signature": "void initDigesterForTilesDefinitionsSyntax(Digester digester)", "full_signature": "private void initDigesterForTilesDefinitionsSyntax(Digester digester)", "class_method_signature": "DigesterDefinitionsReader.initDigesterForTilesDefinitionsSyntax(Digester digester)", "testcase": false, "constructor": false}, {"identifier": "addDefinition", "parameters": "(Definition definition)", "modifiers": "public", "return": "void", "signature": "void addDefinition(Definition definition)", "full_signature": "public void addDefinition(Definition definition)", "class_method_signature": "DigesterDefinitionsReader.addDefinition(Definition definition)", "testcase": false, "constructor": false}, {"identifier": "getRegistrations", "parameters": "()", "modifiers": "protected", "return": "String[]", "signature": "String[] getRegistrations()", "full_signature": "protected String[] getRegistrations()", "class_method_signature": "DigesterDefinitionsReader.getRegistrations()", "testcase": false, "constructor": false}, {"identifier": "getNextUniqueDefinitionName", "parameters": "(\n            Map<String, Definition> definitions)", "modifiers": "protected", "return": "String", "signature": "String getNextUniqueDefinitionName(\n            Map<String, Definition> definitions)", "full_signature": "protected String getNextUniqueDefinitionName(\n            Map<String, Definition> definitions)", "class_method_signature": "DigesterDefinitionsReader.getNextUniqueDefinitionName(\n            Map<String, Definition> definitions)", "testcase": false, "constructor": false}], "file": "tiles-core/src/main/java/org/apache/tiles/definition/digester/DigesterDefinitionsReader.java"}, "focal_method": {"identifier": "read", "parameters": "(Object source)", "modifiers": "public", "return": "Map<String, Definition>", "body": "public Map<String, Definition> read(Object source) {\n        // This is an instance variable instead of a local variable because\n        // we want to be able to call the addDefinition method to populate it.\n        // But we reset the Map here, which, of course, has threading implications.\n        definitions = new LinkedHashMap<String, Definition>();\n\n        if (source == null) {\n            // Perhaps we should throw an exception here.\n            return null;\n        }\n\n        InputStream input;\n        try {\n            input = (InputStream) source;\n        } catch (ClassCastException e) {\n            throw new DefinitionsFactoryException(\n                \"Invalid source type.  Requires java.io.InputStream.\", e);\n        }\n\n        try {\n            // set first object in stack\n            //digester.clear();\n            digester.push(this);\n            // parse\n            digester.parse(input);\n\n        } catch (SAXException e) {\n            throw new DefinitionsFactoryException(\n                \"XML error reading definitions.\", e);\n        } catch (IOException e) {\n            throw new DefinitionsFactoryException(\n                \"I/O Error reading definitions.\", e);\n        } finally {\n            digester.clear();\n        }\n\n        return definitions;\n    }", "signature": "Map<String, Definition> read(Object source)", "full_signature": "public Map<String, Definition> read(Object source)", "class_method_signature": "DigesterDefinitionsReader.read(Object source)", "testcase": false, "constructor": false, "invocations": ["push", "parse", "clear"]}, "repository": {"repo_id": 2641714, "url": "https://github.com/apache/tiles", "language": "Java", "is_fork": false, "fork_count": 65, "stargazer_count": 99, "size": 12554, "license": "licensed"}}