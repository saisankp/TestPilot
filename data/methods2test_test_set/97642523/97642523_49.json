{"test_class": {"identifier": "BaristaTest", "superclass": "extends BaseAkkaTestCase", "interfaces": "", "fields": [], "file": "exercise_016_Use_router/src/test/java/com/lightbend/training/coffeehouse/BaristaTest.java"}, "test_case": {"identifier": "shouldSendCoffeePreparedWithRandomCoffeeForInaccurateResponse", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void shouldSendCoffeePreparedWithRandomCoffeeForInaccurateResponse() {\n        new JavaTestKit(system) {{\n            Integer accuracy = 50;\n            Long runs = 1000L;\n            ActorRef guest = system.deadLetters();\n            ActorRef barista = system.actorOf(Barista.props(duration(\"0 milliseconds\"), accuracy));\n            List<Coffee> coffees = new ArrayList<>();\n            for (int i = 0; i < runs; i++) {\n                barista.tell(new Barista.PrepareCoffee(new Coffee.Akkaccino(), guest), getRef());\n                Barista.CoffeePrepared cp = expectMsgClass(duration(\"50 milliseconds\"), Barista.CoffeePrepared.class);\n                coffees.add(cp.coffee);\n            }\n            Long expectedCount = runs * accuracy / 100;\n            Long variation = expectedCount / 10;\n            Long numberOfCorrectCoffee = coffees.stream().filter(c -> c.equals(new Coffee.Akkaccino())).count();\n            assertThat(numberOfCorrectCoffee).isBetween(expectedCount - variation, expectedCount + variation);\n        }};\n    }", "signature": "void shouldSendCoffeePreparedWithRandomCoffeeForInaccurateResponse()", "full_signature": "@Test public void shouldSendCoffeePreparedWithRandomCoffeeForInaccurateResponse()", "class_method_signature": "BaristaTest.shouldSendCoffeePreparedWithRandomCoffeeForInaccurateResponse()", "testcase": true, "constructor": false, "invocations": ["deadLetters", "actorOf", "props", "duration", "tell", "getRef", "expectMsgClass", "duration", "add", "count", "filter", "stream", "equals", "isBetween", "assertThat"]}, "focal_class": {"identifier": "Barista", "superclass": "extends AbstractLoggingActor", "interfaces": "", "fields": [{"original_string": "private final FiniteDuration prepareCoffeeDuration;", "modifier": "private final", "type": "FiniteDuration", "declarator": "prepareCoffeeDuration", "var_name": "prepareCoffeeDuration"}, {"original_string": "private final int accuracy;", "modifier": "private final", "type": "int", "declarator": "accuracy", "var_name": "accuracy"}], "methods": [{"identifier": "Barista", "parameters": "(FiniteDuration prepareCoffeeDuration, int accuracy)", "modifiers": "public", "return": "", "signature": " Barista(FiniteDuration prepareCoffeeDuration, int accuracy)", "full_signature": "public  Barista(FiniteDuration prepareCoffeeDuration, int accuracy)", "class_method_signature": "Barista.Barista(FiniteDuration prepareCoffeeDuration, int accuracy)", "testcase": false, "constructor": true}, {"identifier": "createReceive", "parameters": "()", "modifiers": "@Override public", "return": "Receive", "signature": "Receive createReceive()", "full_signature": "@Override public Receive createReceive()", "class_method_signature": "Barista.createReceive()", "testcase": false, "constructor": false}, {"identifier": "props", "parameters": "(FiniteDuration prepareCoffeeDuration, int accuracy)", "modifiers": "public static", "return": "Props", "signature": "Props props(FiniteDuration prepareCoffeeDuration, int accuracy)", "full_signature": "public static Props props(FiniteDuration prepareCoffeeDuration, int accuracy)", "class_method_signature": "Barista.props(FiniteDuration prepareCoffeeDuration, int accuracy)", "testcase": false, "constructor": false}, {"identifier": "pickCoffee", "parameters": "(Coffee coffee)", "modifiers": "private", "return": "Coffee", "signature": "Coffee pickCoffee(Coffee coffee)", "full_signature": "private Coffee pickCoffee(Coffee coffee)", "class_method_signature": "Barista.pickCoffee(Coffee coffee)", "testcase": false, "constructor": false}], "file": "exercise_016_Use_router/src/main/java/com/lightbend/training/coffeehouse/Barista.java"}, "focal_method": {"identifier": "props", "parameters": "(FiniteDuration prepareCoffeeDuration, int accuracy)", "modifiers": "public static", "return": "Props", "body": "public static Props props(FiniteDuration prepareCoffeeDuration, int accuracy) {\n        return Props.create(Barista.class, () -> new Barista(prepareCoffeeDuration, accuracy));\n    }", "signature": "Props props(FiniteDuration prepareCoffeeDuration, int accuracy)", "full_signature": "public static Props props(FiniteDuration prepareCoffeeDuration, int accuracy)", "class_method_signature": "Barista.props(FiniteDuration prepareCoffeeDuration, int accuracy)", "testcase": false, "constructor": false, "invocations": ["create"]}, "repository": {"repo_id": 97642523, "url": "https://github.com/ironfish/oreilly-reactive-architecture-student", "language": "Java", "is_fork": false, "fork_count": 13, "stargazer_count": 14, "size": 84, "license": "licensed"}}