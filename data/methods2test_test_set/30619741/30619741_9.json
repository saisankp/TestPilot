{"test_class": {"identifier": "RoundRobinLookupStrategyTest", "superclass": "extends AbstractLookupStrategyTest", "interfaces": "", "fields": [], "file": "microservices/src/test/java/io/silverware/microservices/silver/services/lookup/RoundRobinLookupStrategyTest.java"}, "test_case": {"identifier": "testGetService", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n   public void testGetService() throws Exception {\n      Set<Object> expectedResult = new HashSet<>(asList(\"1\", \"2\"));\n      new Expectations(Context.class) {{\n         context.lookupMicroservice(META_DATA);\n         times = 4;\n         result = expectedResult;\n      }};\n\n      List<Object> result = new ArrayList<>();\n      for (int i = 0; i < 4; i++) {\n         result.add(strategy.getService());\n      }\n      assertThat(result).containsExactly(\"1\", \"2\", \"1\", \"2\");\n\n   }", "signature": "void testGetService()", "full_signature": "@Test public void testGetService()", "class_method_signature": "RoundRobinLookupStrategyTest.testGetService()", "testcase": true, "constructor": false, "invocations": ["asList", "lookupMicroservice", "add", "getService", "containsExactly", "assertThat"]}, "focal_class": {"identifier": "RoundRobinLookupStrategy", "superclass": "extends AbstractLookupStrategy", "interfaces": "", "fields": [{"original_string": "private AtomicInteger index = new AtomicInteger();", "modifier": "private", "type": "AtomicInteger", "declarator": "index = new AtomicInteger()", "var_name": "index"}], "methods": [{"identifier": "getService", "parameters": "()", "modifiers": "@Override public", "return": "Object", "signature": "Object getService()", "full_signature": "@Override public Object getService()", "class_method_signature": "RoundRobinLookupStrategy.getService()", "testcase": false, "constructor": false}], "file": "microservices/src/main/java/io/silverware/microservices/silver/services/lookup/RoundRobinLookupStrategy.java"}, "focal_method": {"identifier": "getService", "parameters": "()", "modifiers": "@Override public", "return": "Object", "body": "@Override\n   public Object getService() {\n      Set<Object> microservices = context.lookupMicroservice(metaData);\n      if (microservices.isEmpty()) {\n         throw new RuntimeException(\"No service found for: \" + metaData);\n      }\n      Object[] servicesArray = microservices.toArray();\n      index.compareAndSet(Integer.MAX_VALUE, 0);\n      return servicesArray[index.getAndIncrement() % servicesArray.length];\n   }", "signature": "Object getService()", "full_signature": "@Override public Object getService()", "class_method_signature": "RoundRobinLookupStrategy.getService()", "testcase": false, "constructor": false, "invocations": ["lookupMicroservice", "isEmpty", "toArray", "compareAndSet", "getAndIncrement"]}, "repository": {"repo_id": 30619741, "url": "https://github.com/SilverThings/SilverWare", "language": "Java", "is_fork": false, "fork_count": 12, "stargazer_count": 21, "size": 3333, "license": "licensed"}}