{"test_class": {"identifier": "SqlViewUtilsTest", "superclass": "", "interfaces": "", "fields": [], "file": "dhis-2/dhis-services/dhis-service-administration/src/test/java/org/hisp/dhis/sqlview/SqlViewUtilsTest.java"}, "test_case": {"identifier": "testGetVariables", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testGetVariables()\n    {\n        String sql = \"select * from dataelement where name = '${de_name}' and aggregationType = '${de_aggregation_type}'\";\n\n        Set<String> variables = SqlViewUtils.getVariables( sql );\n\n        assertEquals( 2, variables.size() );\n        assertTrue( variables.contains( \"de_name\" ) );\n        assertTrue( variables.contains( \"de_aggregation_type\" ) );\n    }", "signature": "void testGetVariables()", "full_signature": "@Test public void testGetVariables()", "class_method_signature": "SqlViewUtilsTest.testGetVariables()", "testcase": true, "constructor": false, "invocations": ["getVariables", "assertEquals", "size", "assertTrue", "contains", "assertTrue", "contains"]}, "focal_class": {"identifier": "SqlViewUtils", "superclass": "", "interfaces": "", "fields": [{"original_string": "public static final String VARIABLE_EXPRESSION = \"\\\\$\\\\{(\\\\w+)\\\\}\";", "modifier": "public static final", "type": "String", "declarator": "VARIABLE_EXPRESSION = \"\\\\$\\\\{(\\\\w+)\\\\}\"", "var_name": "VARIABLE_EXPRESSION"}, {"original_string": "public static final Pattern VARIABLE_PATTERN = Pattern.compile( VARIABLE_EXPRESSION, Pattern.DOTALL );", "modifier": "public static final", "type": "Pattern", "declarator": "VARIABLE_PATTERN = Pattern.compile( VARIABLE_EXPRESSION, Pattern.DOTALL )", "var_name": "VARIABLE_PATTERN"}], "methods": [{"identifier": "getVariables", "parameters": "( String sql )", "modifiers": "public static", "return": "Set<String>", "signature": "Set<String> getVariables( String sql )", "full_signature": "public static Set<String> getVariables( String sql )", "class_method_signature": "SqlViewUtils.getVariables( String sql )", "testcase": false, "constructor": false}, {"identifier": "substituteSqlVariables", "parameters": "( String sql, Map<String, String> variables )", "modifiers": "public static", "return": "String", "signature": "String substituteSqlVariables( String sql, Map<String, String> variables )", "full_signature": "public static String substituteSqlVariables( String sql, Map<String, String> variables )", "class_method_signature": "SqlViewUtils.substituteSqlVariables( String sql, Map<String, String> variables )", "testcase": false, "constructor": false}, {"identifier": "substituteSqlVariable", "parameters": "( String sql, String name, String value )", "modifiers": "public static", "return": "String", "signature": "String substituteSqlVariable( String sql, String name, String value )", "full_signature": "public static String substituteSqlVariable( String sql, String name, String value )", "class_method_signature": "SqlViewUtils.substituteSqlVariable( String sql, String name, String value )", "testcase": false, "constructor": false}, {"identifier": "removeQuerySeparator", "parameters": "( String sql )", "modifiers": "public static", "return": "String", "signature": "String removeQuerySeparator( String sql )", "full_signature": "public static String removeQuerySeparator( String sql )", "class_method_signature": "SqlViewUtils.removeQuerySeparator( String sql )", "testcase": false, "constructor": false}], "file": "dhis-2/dhis-services/dhis-service-administration/src/main/java/org/hisp/dhis/sqlview/SqlViewUtils.java"}, "focal_method": {"identifier": "getVariables", "parameters": "( String sql )", "modifiers": "public static", "return": "Set<String>", "body": "public static Set<String> getVariables( String sql )\n    {\n        Set<String> variables = new HashSet<>();\n\n        Matcher matcher = VARIABLE_PATTERN.matcher( sql );\n\n        while ( matcher.find() )\n        {\n            variables.add( matcher.group( 1 ) );\n        }\n\n        return variables;\n    }", "signature": "Set<String> getVariables( String sql )", "full_signature": "public static Set<String> getVariables( String sql )", "class_method_signature": "SqlViewUtils.getVariables( String sql )", "testcase": false, "constructor": false, "invocations": ["matcher", "find", "add", "group"]}, "repository": {"repo_id": 66940520, "url": "https://github.com/dhis2/dhis2-core", "stars": 151, "created": "8/30/2016 12:57:05 PM +00:00", "updates": "2020-01-24T18:06:36+00:00", "fork": "False", "license": "licensed"}}