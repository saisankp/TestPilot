{"test_class": {"identifier": "PointAlongLineEncoderTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "PointAlongLineEncoder pointAlongLineEncoder = new PointAlongLineEncoder(new LocationReferencePointEncoder());", "modifier": "", "type": "PointAlongLineEncoder", "declarator": "pointAlongLineEncoder = new PointAlongLineEncoder(new LocationReferencePointEncoder())", "var_name": "pointAlongLineEncoder"}], "file": "proto/src/test/java/openlr/proto/encoder/PointAlongLineEncoderTest.java"}, "test_case": {"identifier": "testEncodeLine", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testEncodeLine() throws OpenLRProtoException {\n        LocationReferencePointProtoImpl first = new LocationReferencePointProtoImpl(\n                1,\n                5.7,\n                53.5,\n                15.5,\n                FunctionalRoadClass.FRC_3,\n                FormOfWay.MULTIPLE_CARRIAGEWAY,\n                200,\n                FunctionalRoadClass.FRC_4);\n\n        LocationReferencePointProtoImpl last = new LocationReferencePointProtoImpl(\n                2,\n                5.6,\n                53.6,\n                165,\n                FunctionalRoadClass.FRC_4,\n                FormOfWay.MULTIPLE_CARRIAGEWAY);\n\n        Offsets offsets = new OffsetsProtoImpl(20);\n\n        RawLocationReference rawLocationReference = new RawPointAlongLocRef(\"1\", first, last, offsets, SideOfRoad.LEFT, Orientation.AGAINST_LINE_DIRECTION);\n\n        LocationReference locationReference = pointAlongLineEncoder.encode(rawLocationReference);\n\n        assertNotNull(locationReference);\n        assertEquals(locationReference.getID(), \"1\");\n        assertEquals(locationReference.getLocationType(), LocationType.POINT_ALONG_LINE);\n        assertTrue(locationReference.isValid());\n        assertEquals(locationReference.getDataClass(), LocationReferenceData.class);\n\n        Object locationReferenceData = locationReference.getLocationReferenceData();\n\n        assertNotNull(locationReferenceData);\n        assertTrue(locationReferenceData instanceof LocationReferenceData);\n\n        LocationReferenceData data = (LocationReferenceData) locationReferenceData;\n\n        assertTrue(data.hasPointAlongLineLocationReference());\n\n        PointAlongLineLocationReference pointAlongLineLocationReference = data.getPointAlongLineLocationReference();\n\n        assertTrue(pointAlongLineLocationReference.hasFirst());\n\n        openlr.proto.schema.LocationReferencePoint firstLrp = pointAlongLineLocationReference.getFirst();\n\n        assertTrue(firstLrp.hasCoordinates());\n\n        Coordinates firstCoordinates = firstLrp.getCoordinates();\n        assertEquals(firstCoordinates.getLongitude(),5.7);\n        assertEquals(firstCoordinates.getLatitude(), 53.5);\n\n        assertTrue(firstLrp.hasLineAttributes());\n\n        LineAttributes firstLineAttributes = firstLrp.getLineAttributes();\n        assertEquals(firstLineAttributes.getBearing(), 15);\n        assertEquals(firstLineAttributes.getFrc(), FRC.FRC_3);\n        assertEquals(firstLineAttributes.getFow(), FOW.FOW_MULTIPLE_CARRIAGEWAY);\n\n        assertTrue(firstLrp.hasPathAttributes());\n\n        PathAttributes firstPathAttributes = firstLrp.getPathAttributes();\n        assertEquals(firstPathAttributes.getDistanceToNext(), 200);\n        assertEquals(firstPathAttributes.getLowestFrcAlongPath(), FRC.FRC_4);\n\n        assertTrue(pointAlongLineLocationReference.hasLast());\n\n        openlr.proto.schema.LocationReferencePoint lastLrp = pointAlongLineLocationReference.getLast();\n\n        assertTrue(lastLrp.hasCoordinates());\n\n        Coordinates lastCoordinates = lastLrp.getCoordinates();\n        assertEquals(lastCoordinates.getLongitude(),5.6);\n        assertEquals(lastCoordinates.getLatitude(), 53.6);\n\n        assertTrue(lastLrp.hasLineAttributes());\n\n        LineAttributes lastLineAttributes = lastLrp.getLineAttributes();\n        assertEquals(lastLineAttributes.getBearing(), 165);\n        assertEquals(lastLineAttributes.getFrc(), FRC.FRC_4);\n        assertEquals(lastLineAttributes.getFow(), FOW.FOW_MULTIPLE_CARRIAGEWAY);\n\n        assertEquals(pointAlongLineLocationReference.getPositiveOffset(), 20);\n        assertEquals(pointAlongLineLocationReference.getSideOfRoad(), openlr.proto.schema.SideOfRoad.SIDE_OF_ROAD_LEFT);\n        assertEquals(pointAlongLineLocationReference.getOrientation(), openlr.proto.schema.Orientation.ORIENTATION_AGAINST_LINE_DIRECTION);\n    }", "signature": "void testEncodeLine()", "full_signature": "@Test public void testEncodeLine()", "class_method_signature": "PointAlongLineEncoderTest.testEncodeLine()", "testcase": true, "constructor": false, "invocations": ["encode", "assertNotNull", "assertEquals", "getID", "assertEquals", "getLocationType", "assertTrue", "isValid", "assertEquals", "getDataClass", "getLocationReferenceData", "assertNotNull", "assertTrue", "assertTrue", "hasPointAlongLineLocationReference", "getPointAlongLineLocationReference", "assertTrue", "hasFirst", "getFirst", "assertTrue", "hasCoordinates", "getCoordinates", "assertEquals", "getLongitude", "assertEquals", "getLatitude", "assertTrue", "hasLineAttributes", "getLineAttributes", "assertEquals", "getBearing", "assertEquals", "getFrc", "assertEquals", "getFow", "assertTrue", "hasPathAttributes", "getPathAttributes", "assertEquals", "getDistanceToNext", "assertEquals", "getLowestFrcAlongPath", "assertTrue", "hasLast", "getLast", "assertTrue", "hasCoordinates", "getCoordinates", "assertEquals", "getLongitude", "assertEquals", "getLatitude", "assertTrue", "hasLineAttributes", "getLineAttributes", "assertEquals", "getBearing", "assertEquals", "getFrc", "assertEquals", "getFow", "assertEquals", "getPositiveOffset", "assertEquals", "getSideOfRoad", "assertEquals", "getOrientation"]}, "focal_class": {"identifier": "PointAlongLineEncoder", "superclass": "", "interfaces": "implements LocationReferenceEncoder", "fields": [{"original_string": "private final LocationReferencePointEncoder locationReferencePointEncoder;", "modifier": "private final", "type": "LocationReferencePointEncoder", "declarator": "locationReferencePointEncoder", "var_name": "locationReferencePointEncoder"}], "methods": [{"identifier": "PointAlongLineEncoder", "parameters": "(LocationReferencePointEncoder locationReferencePointEncoder)", "modifiers": "", "return": "", "signature": " PointAlongLineEncoder(LocationReferencePointEncoder locationReferencePointEncoder)", "full_signature": "  PointAlongLineEncoder(LocationReferencePointEncoder locationReferencePointEncoder)", "class_method_signature": "PointAlongLineEncoder.PointAlongLineEncoder(LocationReferencePointEncoder locationReferencePointEncoder)", "testcase": false, "constructor": true}, {"identifier": "encode", "parameters": "(RawLocationReference rawLocationReference)", "modifiers": "@Override public", "return": "LocationReference", "signature": "LocationReference encode(RawLocationReference rawLocationReference)", "full_signature": "@Override public LocationReference encode(RawLocationReference rawLocationReference)", "class_method_signature": "PointAlongLineEncoder.encode(RawLocationReference rawLocationReference)", "testcase": false, "constructor": false}, {"identifier": "map", "parameters": "(SideOfRoad sideOfRoad)", "modifiers": "private", "return": "openlr.proto.schema.SideOfRoad", "signature": "openlr.proto.schema.SideOfRoad map(SideOfRoad sideOfRoad)", "full_signature": "private openlr.proto.schema.SideOfRoad map(SideOfRoad sideOfRoad)", "class_method_signature": "PointAlongLineEncoder.map(SideOfRoad sideOfRoad)", "testcase": false, "constructor": false}, {"identifier": "map", "parameters": "(Orientation orientation)", "modifiers": "private", "return": "openlr.proto.schema.Orientation", "signature": "openlr.proto.schema.Orientation map(Orientation orientation)", "full_signature": "private openlr.proto.schema.Orientation map(Orientation orientation)", "class_method_signature": "PointAlongLineEncoder.map(Orientation orientation)", "testcase": false, "constructor": false}], "file": "proto/src/main/java/openlr/proto/encoder/PointAlongLineEncoder.java"}, "focal_method": {"identifier": "encode", "parameters": "(RawLocationReference rawLocationReference)", "modifiers": "@Override public", "return": "LocationReference", "body": "@Override\n    public LocationReference encode(RawLocationReference rawLocationReference) throws OpenLRProtoException {\n        if (rawLocationReference.getLocationType() != LocationType.POINT_ALONG_LINE) {\n            throw new OpenLRProtoException(OpenLRProtoStatusCode.INVALID_LOCATION_REFERENCE);\n        }\n\n        List<LocationReferencePoint> locationReferencePoints = rawLocationReference.getLocationReferencePoints();\n\n        if (locationReferencePoints.size() < 2) {\n            throw new OpenLRProtoException(OpenLRProtoStatusCode.INVALID_LOCATION_REFERENCE);\n        }\n\n        openlr.proto.schema.LocationReferencePoint first = locationReferencePointEncoder.encode(locationReferencePoints.get(0));\n        openlr.proto.schema.LocationReferencePoint last = locationReferencePointEncoder.encode(locationReferencePoints.get(locationReferencePoints.size() - 1));\n\n        Offsets offsets = rawLocationReference.getOffsets();\n        int positiveLength = locationReferencePoints.get(0).getDistanceToNext();\n        int positiveOffset = offsets.getPositiveOffset(positiveLength);\n\n        openlr.proto.schema.SideOfRoad sideOfRoad = map(rawLocationReference.getSideOfRoad());\n        openlr.proto.schema.Orientation orientation = map(rawLocationReference.getOrientation());\n\n        PointAlongLineLocationReference pointAlongLineLocationReference = PointAlongLineLocationReference.newBuilder()\n                .setFirst(first)\n                .setLast(last)\n                .setPositiveOffset(positiveOffset)\n                .setSideOfRoad(sideOfRoad)\n                .setOrientation(orientation)\n                .build();\n\n        LocationReferenceData locationReferenceData = LocationReferenceData.newBuilder()\n                .setPointAlongLineLocationReference(pointAlongLineLocationReference)\n                .build();\n\n        return new LocationReferenceProtoImpl(rawLocationReference.getID(), LocationType.POINT_ALONG_LINE, locationReferenceData);\n    }", "signature": "LocationReference encode(RawLocationReference rawLocationReference)", "full_signature": "@Override public LocationReference encode(RawLocationReference rawLocationReference)", "class_method_signature": "PointAlongLineEncoder.encode(RawLocationReference rawLocationReference)", "testcase": false, "constructor": false, "invocations": ["getLocationType", "getLocationReferencePoints", "size", "encode", "get", "encode", "get", "size", "getOffsets", "getDistanceToNext", "get", "getPositiveOffset", "map", "getSideOfRoad", "map", "getOrientation", "build", "setOrientation", "setSideOfRoad", "setPositiveOffset", "setLast", "setFirst", "newBuilder", "build", "setPointAlongLineLocationReference", "newBuilder", "getID"]}, "repository": {"repo_id": 187195345, "url": "https://github.com/tomtom-international/openlr", "language": "Java", "is_fork": false, "fork_count": 6, "stargazer_count": 24, "size": 4809, "license": "licensed"}}