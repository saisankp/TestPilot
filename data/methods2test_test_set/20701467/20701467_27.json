{"test_class": {"identifier": "AddressObserverUsingIpv4Test", "superclass": "", "interfaces": "", "fields": [{"original_string": "private AddressObservationWriter addressObservationWriterMock;", "modifier": "private", "type": "AddressObservationWriter", "declarator": "addressObservationWriterMock", "var_name": "addressObservationWriterMock"}], "file": "addresstracker/implementation/src/test/java/org/opendaylight/l2switch/addresstracker/addressobserver/AddressObserverUsingIpv4Test.java"}, "test_case": {"identifier": "onIpv4PacketReceivedTest", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void onIpv4PacketReceivedTest() throws Exception {\n        ArrayList<PacketChain> packetChainList = new ArrayList<PacketChain>();\n        packetChainList.add(new PacketChainBuilder().setPacket(new RawPacketBuilder().build()).build());\n        packetChainList.add(new PacketChainBuilder()\n                .setPacket(new EthernetPacketBuilder().setSourceMac(new MacAddress(\"aa:bb:cc:dd:ee:ff\")).build())\n                .build());\n        packetChainList.add(new PacketChainBuilder()\n                .setPacket(new Ipv4PacketBuilder().setSourceIpv4(new Ipv4Address(\"1.2.3.4\")).build()).build());\n\n        Ipv4PacketReceived ipv4PktReceived = new Ipv4PacketReceivedBuilder().setPacketChain(packetChainList).build();\n        AddressObserverUsingIpv4 addressObserverIpv4 = new AddressObserverUsingIpv4(addressObservationWriterMock);\n        addressObserverIpv4.onIpv4PacketReceived(ipv4PktReceived);\n\n        verify(addressObservationWriterMock, times(1)).addAddress(any(MacAddress.class), any(IpAddress.class),\n                any(NodeConnectorRef.class));\n    }", "signature": "void onIpv4PacketReceivedTest()", "full_signature": "@Test public void onIpv4PacketReceivedTest()", "class_method_signature": "AddressObserverUsingIpv4Test.onIpv4PacketReceivedTest()", "testcase": true, "constructor": false, "invocations": ["add", "build", "setPacket", "build", "add", "build", "setPacket", "build", "setSourceMac", "add", "build", "setPacket", "build", "setSourceIpv4", "build", "setPacketChain", "onIpv4PacketReceived", "addAddress", "verify", "times", "any", "any", "any"]}, "focal_class": {"identifier": "AddressObserverUsingIpv4", "superclass": "", "interfaces": "implements Ipv4PacketListener", "fields": [{"original_string": "private static final String IPV4_IP_TO_IGNORE = \"0.0.0.0\";", "modifier": "private static final", "type": "String", "declarator": "IPV4_IP_TO_IGNORE = \"0.0.0.0\"", "var_name": "IPV4_IP_TO_IGNORE"}, {"original_string": "private final AddressObservationWriter addressObservationWriter;", "modifier": "private final", "type": "AddressObservationWriter", "declarator": "addressObservationWriter", "var_name": "addressObservationWriter"}], "methods": [{"identifier": "AddressObserverUsingIpv4", "parameters": "(AddressObservationWriter addressObservationWriter)", "modifiers": "public", "return": "", "signature": " AddressObserverUsingIpv4(AddressObservationWriter addressObservationWriter)", "full_signature": "public  AddressObserverUsingIpv4(AddressObservationWriter addressObservationWriter)", "class_method_signature": "AddressObserverUsingIpv4.AddressObserverUsingIpv4(AddressObservationWriter addressObservationWriter)", "testcase": false, "constructor": true}, {"identifier": "onIpv4PacketReceived", "parameters": "(Ipv4PacketReceived packetReceived)", "modifiers": "@Override public", "return": "void", "signature": "void onIpv4PacketReceived(Ipv4PacketReceived packetReceived)", "full_signature": "@Override public void onIpv4PacketReceived(Ipv4PacketReceived packetReceived)", "class_method_signature": "AddressObserverUsingIpv4.onIpv4PacketReceived(Ipv4PacketReceived packetReceived)", "testcase": false, "constructor": false}], "file": "addresstracker/implementation/src/main/java/org/opendaylight/l2switch/addresstracker/addressobserver/AddressObserverUsingIpv4.java"}, "focal_method": {"identifier": "onIpv4PacketReceived", "parameters": "(Ipv4PacketReceived packetReceived)", "modifiers": "@Override public", "return": "void", "body": "@Override\n    public void onIpv4PacketReceived(Ipv4PacketReceived packetReceived) {\n        if (packetReceived == null || packetReceived.getPacketChain() == null) {\n            return;\n        }\n\n        RawPacket rawPacket = null;\n        EthernetPacket ethernetPacket = null;\n        Ipv4Packet ipv4Packet = null;\n        for (PacketChain packetChain : packetReceived.getPacketChain()) {\n            if (packetChain.getPacket() instanceof RawPacket) {\n                rawPacket = (RawPacket) packetChain.getPacket();\n            } else if (packetChain.getPacket() instanceof EthernetPacket) {\n                ethernetPacket = (EthernetPacket) packetChain.getPacket();\n            } else if (packetChain.getPacket() instanceof Ipv4Packet) {\n                ipv4Packet = (Ipv4Packet) packetChain.getPacket();\n            }\n        }\n        if (rawPacket == null || ethernetPacket == null || ipv4Packet == null) {\n            return;\n        }\n\n        if (!IPV4_IP_TO_IGNORE.equals(ipv4Packet.getSourceIpv4().getValue())) {\n            addressObservationWriter.addAddress(ethernetPacket.getSourceMac(),\n                    new IpAddress(ipv4Packet.getSourceIpv4().getValue().toCharArray()), rawPacket.getIngress());\n        }\n    }", "signature": "void onIpv4PacketReceived(Ipv4PacketReceived packetReceived)", "full_signature": "@Override public void onIpv4PacketReceived(Ipv4PacketReceived packetReceived)", "class_method_signature": "AddressObserverUsingIpv4.onIpv4PacketReceived(Ipv4PacketReceived packetReceived)", "testcase": false, "constructor": false, "invocations": ["getPacketChain", "getPacketChain", "getPacket", "getPacket", "getPacket", "getPacket", "getPacket", "getPacket", "equals", "getValue", "getSourceIpv4", "addAddress", "getSourceMac", "toCharArray", "getValue", "getSourceIpv4", "getIngress"]}, "repository": {"repo_id": 20701467, "url": "https://github.com/opendaylight/l2switch", "language": "Java", "is_fork": false, "fork_count": 30, "stargazer_count": 25, "size": 4178, "license": "licensed"}}