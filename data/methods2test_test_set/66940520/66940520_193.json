{"test_class": {"identifier": "SyncUtilsTest", "superclass": "extends DhisSpringTest", "interfaces": "", "fields": [{"original_string": "private static final String USERNAME = \"user\";", "modifier": "private static final", "type": "String", "declarator": "USERNAME = \"user\"", "var_name": "USERNAME"}, {"original_string": "private static final String PASSWORD = \"pass\";", "modifier": "private static final", "type": "String", "declarator": "PASSWORD = \"pass\"", "var_name": "PASSWORD"}, {"original_string": "private static final String URL = \"https://localhost:8080\";", "modifier": "private static final", "type": "String", "declarator": "URL = \"https://localhost:8080\"", "var_name": "URL"}, {"original_string": "private static final String EVENTS_URL = URL + SyncEndpoint.EVENTS.getPath();", "modifier": "private static final", "type": "String", "declarator": "EVENTS_URL = URL + SyncEndpoint.EVENTS.getPath()", "var_name": "EVENTS_URL"}, {"original_string": "private static final String EVENTS_URL_WITH_SYNC_STRATEGY = EVENTS_URL + SyncUtils.IMPORT_STRATEGY_SYNC_SUFFIX;", "modifier": "private static final", "type": "String", "declarator": "EVENTS_URL_WITH_SYNC_STRATEGY = EVENTS_URL + SyncUtils.IMPORT_STRATEGY_SYNC_SUFFIX", "var_name": "EVENTS_URL_WITH_SYNC_STRATEGY"}, {"original_string": "@Autowired\n    SystemSettingManager systemSettingManager;", "modifier": "@Autowired", "type": "SystemSettingManager", "declarator": "systemSettingManager", "var_name": "systemSettingManager"}], "file": "dhis-2/dhis-services/dhis-service-dxf2/src/test/java/org/hisp/dhis/dxf2/sync/SyncUtilsTest.java"}, "test_case": {"identifier": "getRemoteInstanceTest", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void getRemoteInstanceTest()\n    {\n        systemSettingManager.saveSystemSetting( SettingKey.REMOTE_INSTANCE_USERNAME, USERNAME );\n        systemSettingManager.saveSystemSetting( SettingKey.REMOTE_INSTANCE_PASSWORD, PASSWORD );\n        systemSettingManager.saveSystemSetting( SettingKey.REMOTE_INSTANCE_URL, URL );\n\n        SystemInstance systemInstance = SyncUtils.getRemoteInstance( systemSettingManager, SyncEndpoint.EVENTS );\n\n        assertThat( systemInstance.getUsername(), is( USERNAME ) );\n        assertThat( systemInstance.getPassword(), is( PASSWORD ) );\n        assertThat( systemInstance.getUrl(), is( EVENTS_URL ) );\n    }", "signature": "void getRemoteInstanceTest()", "full_signature": "@Test public void getRemoteInstanceTest()", "class_method_signature": "SyncUtilsTest.getRemoteInstanceTest()", "testcase": true, "constructor": false, "invocations": ["saveSystemSetting", "saveSystemSetting", "saveSystemSetting", "getRemoteInstance", "assertThat", "getUsername", "is", "assertThat", "getPassword", "is", "assertThat", "getUrl", "is"]}, "focal_class": {"identifier": "SyncUtils", "superclass": "", "interfaces": "", "fields": [{"original_string": "static final String HEADER_AUTHORIZATION = \"Authorization\";", "modifier": "static final", "type": "String", "declarator": "HEADER_AUTHORIZATION = \"Authorization\"", "var_name": "HEADER_AUTHORIZATION"}, {"original_string": "static final String IMPORT_STRATEGY_SYNC_SUFFIX = \"?strategy=SYNC\";", "modifier": "static final", "type": "String", "declarator": "IMPORT_STRATEGY_SYNC_SUFFIX = \"?strategy=SYNC\"", "var_name": "IMPORT_STRATEGY_SYNC_SUFFIX"}, {"original_string": "private static final String PING_PATH = \"/api/system/ping\";", "modifier": "private static final", "type": "String", "declarator": "PING_PATH = \"/api/system/ping\"", "var_name": "PING_PATH"}], "methods": [{"identifier": "SyncUtils", "parameters": "()", "modifiers": "private", "return": "", "signature": " SyncUtils()", "full_signature": "private  SyncUtils()", "class_method_signature": "SyncUtils.SyncUtils()", "testcase": false, "constructor": true}, {"identifier": "sendSyncRequest", "parameters": "( SystemSettingManager systemSettingManager, RestTemplate restTemplate, RequestCallback requestCallback, SystemInstance instance, SyncEndpoint endpoint )", "modifiers": "static", "return": "boolean", "signature": "boolean sendSyncRequest( SystemSettingManager systemSettingManager, RestTemplate restTemplate, RequestCallback requestCallback, SystemInstance instance, SyncEndpoint endpoint )", "full_signature": "static boolean sendSyncRequest( SystemSettingManager systemSettingManager, RestTemplate restTemplate, RequestCallback requestCallback, SystemInstance instance, SyncEndpoint endpoint )", "class_method_signature": "SyncUtils.sendSyncRequest( SystemSettingManager systemSettingManager, RestTemplate restTemplate, RequestCallback requestCallback, SystemInstance instance, SyncEndpoint endpoint )", "testcase": false, "constructor": false}, {"identifier": "runSyncRequest", "parameters": "( RestTemplate restTemplate,\n        RequestCallback requestCallback, Class<? extends AbstractWebMessageResponse> klass, String syncUrl,\n        int maxSyncAttempts )", "modifiers": "public static", "return": "Optional<AbstractWebMessageResponse>", "signature": "Optional<AbstractWebMessageResponse> runSyncRequest( RestTemplate restTemplate,\n        RequestCallback requestCallback, Class<? extends AbstractWebMessageResponse> klass, String syncUrl,\n        int maxSyncAttempts )", "full_signature": "public static Optional<AbstractWebMessageResponse> runSyncRequest( RestTemplate restTemplate,\n        RequestCallback requestCallback, Class<? extends AbstractWebMessageResponse> klass, String syncUrl,\n        int maxSyncAttempts )", "class_method_signature": "SyncUtils.runSyncRequest( RestTemplate restTemplate,\n        RequestCallback requestCallback, Class<? extends AbstractWebMessageResponse> klass, String syncUrl,\n        int maxSyncAttempts )", "testcase": false, "constructor": false}, {"identifier": "getResponseExtractor", "parameters": "( Class<? extends AbstractWebMessageResponse> klass )", "modifiers": "private static", "return": "ResponseExtractor<? extends AbstractWebMessageResponse>", "signature": "ResponseExtractor<? extends AbstractWebMessageResponse> getResponseExtractor( Class<? extends AbstractWebMessageResponse> klass )", "full_signature": "private static ResponseExtractor<? extends AbstractWebMessageResponse> getResponseExtractor( Class<? extends AbstractWebMessageResponse> klass )", "class_method_signature": "SyncUtils.getResponseExtractor( Class<? extends AbstractWebMessageResponse> klass )", "testcase": false, "constructor": false}, {"identifier": "analyzeResultsInImportSummaries", "parameters": "( ImportSummaries summaries, ImportSummaries originalTopSummaries, SyncEndpoint endpoint )", "modifiers": "private static", "return": "boolean", "signature": "boolean analyzeResultsInImportSummaries( ImportSummaries summaries, ImportSummaries originalTopSummaries, SyncEndpoint endpoint )", "full_signature": "private static boolean analyzeResultsInImportSummaries( ImportSummaries summaries, ImportSummaries originalTopSummaries, SyncEndpoint endpoint )", "class_method_signature": "SyncUtils.analyzeResultsInImportSummaries( ImportSummaries summaries, ImportSummaries originalTopSummaries, SyncEndpoint endpoint )", "testcase": false, "constructor": false}, {"identifier": "checkSummaryStatus", "parameters": "( ImportSummary summary, ImportSummaries summaries, ImportSummaries topSummaries, SyncEndpoint endpoint )", "modifiers": "private static", "return": "boolean", "signature": "boolean checkSummaryStatus( ImportSummary summary, ImportSummaries summaries, ImportSummaries topSummaries, SyncEndpoint endpoint )", "full_signature": "private static boolean checkSummaryStatus( ImportSummary summary, ImportSummaries summaries, ImportSummaries topSummaries, SyncEndpoint endpoint )", "class_method_signature": "SyncUtils.checkSummaryStatus( ImportSummary summary, ImportSummaries summaries, ImportSummaries topSummaries, SyncEndpoint endpoint )", "testcase": false, "constructor": false}, {"identifier": "testServerAvailability", "parameters": "( SystemSettingManager systemSettingManager, RestTemplate restTemplate )", "modifiers": "static", "return": "AvailabilityStatus", "signature": "AvailabilityStatus testServerAvailability( SystemSettingManager systemSettingManager, RestTemplate restTemplate )", "full_signature": "static AvailabilityStatus testServerAvailability( SystemSettingManager systemSettingManager, RestTemplate restTemplate )", "class_method_signature": "SyncUtils.testServerAvailability( SystemSettingManager systemSettingManager, RestTemplate restTemplate )", "testcase": false, "constructor": false}, {"identifier": "testServerAvailabilityWithRetries", "parameters": "( SystemSettingManager systemSettingManager, RestTemplate restTemplate, int maxAttempts, long delayBetweenAttempts )", "modifiers": "private static", "return": "AvailabilityStatus", "signature": "AvailabilityStatus testServerAvailabilityWithRetries( SystemSettingManager systemSettingManager, RestTemplate restTemplate, int maxAttempts, long delayBetweenAttempts )", "full_signature": "private static AvailabilityStatus testServerAvailabilityWithRetries( SystemSettingManager systemSettingManager, RestTemplate restTemplate, int maxAttempts, long delayBetweenAttempts )", "class_method_signature": "SyncUtils.testServerAvailabilityWithRetries( SystemSettingManager systemSettingManager, RestTemplate restTemplate, int maxAttempts, long delayBetweenAttempts )", "testcase": false, "constructor": false}, {"identifier": "isRemoteServerAvailable", "parameters": "( SystemSettingManager systemSettingManager, RestTemplate restTemplate )", "modifiers": "public static", "return": "AvailabilityStatus", "signature": "AvailabilityStatus isRemoteServerAvailable( SystemSettingManager systemSettingManager, RestTemplate restTemplate )", "full_signature": "public static AvailabilityStatus isRemoteServerAvailable( SystemSettingManager systemSettingManager, RestTemplate restTemplate )", "class_method_signature": "SyncUtils.isRemoteServerAvailable( SystemSettingManager systemSettingManager, RestTemplate restTemplate )", "testcase": false, "constructor": false}, {"identifier": "isRemoteServerConfigured", "parameters": "( SystemSettingManager systemSettingManager )", "modifiers": "private static", "return": "boolean", "signature": "boolean isRemoteServerConfigured( SystemSettingManager systemSettingManager )", "full_signature": "private static boolean isRemoteServerConfigured( SystemSettingManager systemSettingManager )", "class_method_signature": "SyncUtils.isRemoteServerConfigured( SystemSettingManager systemSettingManager )", "testcase": false, "constructor": false}, {"identifier": "getBasicAuthRequestEntity", "parameters": "( String username, String password )", "modifiers": "private static", "return": "HttpEntity<T>", "signature": "HttpEntity<T> getBasicAuthRequestEntity( String username, String password )", "full_signature": "private static HttpEntity<T> getBasicAuthRequestEntity( String username, String password )", "class_method_signature": "SyncUtils.getBasicAuthRequestEntity( String username, String password )", "testcase": false, "constructor": false}, {"identifier": "setLastSyncSuccess", "parameters": "( SystemSettingManager systemSettingManager, SettingKey settingKey, Date time )", "modifiers": "public static", "return": "void", "signature": "void setLastSyncSuccess( SystemSettingManager systemSettingManager, SettingKey settingKey, Date time )", "full_signature": "public static void setLastSyncSuccess( SystemSettingManager systemSettingManager, SettingKey settingKey, Date time )", "class_method_signature": "SyncUtils.setLastSyncSuccess( SystemSettingManager systemSettingManager, SettingKey settingKey, Date time )", "testcase": false, "constructor": false}, {"identifier": "getLastSyncSuccess", "parameters": "( SystemSettingManager systemSettingManager, SettingKey settingKey )", "modifiers": "public static", "return": "Date", "signature": "Date getLastSyncSuccess( SystemSettingManager systemSettingManager, SettingKey settingKey )", "full_signature": "public static Date getLastSyncSuccess( SystemSettingManager systemSettingManager, SettingKey settingKey )", "class_method_signature": "SyncUtils.getLastSyncSuccess( SystemSettingManager systemSettingManager, SettingKey settingKey )", "testcase": false, "constructor": false}, {"identifier": "checkSummaryStatus", "parameters": "( ImportSummary summary, SyncEndpoint endpoint )", "modifiers": "static", "return": "boolean", "signature": "boolean checkSummaryStatus( ImportSummary summary, SyncEndpoint endpoint )", "full_signature": "static boolean checkSummaryStatus( ImportSummary summary, SyncEndpoint endpoint )", "class_method_signature": "SyncUtils.checkSummaryStatus( ImportSummary summary, SyncEndpoint endpoint )", "testcase": false, "constructor": false}, {"identifier": "getRemoteInstance", "parameters": "( SystemSettingManager systemSettingManager, SyncEndpoint syncEndpoint )", "modifiers": "static", "return": "SystemInstance", "signature": "SystemInstance getRemoteInstance( SystemSettingManager systemSettingManager, SyncEndpoint syncEndpoint )", "full_signature": "static SystemInstance getRemoteInstance( SystemSettingManager systemSettingManager, SyncEndpoint syncEndpoint )", "class_method_signature": "SyncUtils.getRemoteInstance( SystemSettingManager systemSettingManager, SyncEndpoint syncEndpoint )", "testcase": false, "constructor": false}, {"identifier": "getRemoteInstanceWithSyncImportStrategy", "parameters": "( SystemSettingManager systemSettingManager, SyncEndpoint syncEndpoint )", "modifiers": "static", "return": "SystemInstance", "signature": "SystemInstance getRemoteInstanceWithSyncImportStrategy( SystemSettingManager systemSettingManager, SyncEndpoint syncEndpoint )", "full_signature": "static SystemInstance getRemoteInstanceWithSyncImportStrategy( SystemSettingManager systemSettingManager, SyncEndpoint syncEndpoint )", "class_method_signature": "SyncUtils.getRemoteInstanceWithSyncImportStrategy( SystemSettingManager systemSettingManager, SyncEndpoint syncEndpoint )", "testcase": false, "constructor": false}], "file": "dhis-2/dhis-services/dhis-service-dxf2/src/main/java/org/hisp/dhis/dxf2/sync/SyncUtils.java"}, "focal_method": {"identifier": "getRemoteInstance", "parameters": "( SystemSettingManager systemSettingManager, SyncEndpoint syncEndpoint )", "modifiers": "static", "return": "SystemInstance", "body": "static SystemInstance getRemoteInstance( SystemSettingManager systemSettingManager, SyncEndpoint syncEndpoint )\n    {\n        String username = (String) systemSettingManager.getSystemSetting( SettingKey.REMOTE_INSTANCE_USERNAME );\n        String password = (String) systemSettingManager.getSystemSetting( SettingKey.REMOTE_INSTANCE_PASSWORD );\n        String syncUrl = systemSettingManager.getSystemSetting( SettingKey.REMOTE_INSTANCE_URL ) + syncEndpoint.getPath();\n\n        return new SystemInstance( syncUrl, username, password );\n    }", "signature": "SystemInstance getRemoteInstance( SystemSettingManager systemSettingManager, SyncEndpoint syncEndpoint )", "full_signature": "static SystemInstance getRemoteInstance( SystemSettingManager systemSettingManager, SyncEndpoint syncEndpoint )", "class_method_signature": "SyncUtils.getRemoteInstance( SystemSettingManager systemSettingManager, SyncEndpoint syncEndpoint )", "testcase": false, "constructor": false, "invocations": ["getSystemSetting", "getSystemSetting", "getSystemSetting", "getPath"]}, "repository": {"repo_id": 66940520, "url": "https://github.com/dhis2/dhis2-core", "stars": 151, "created": "8/30/2016 12:57:05 PM +00:00", "updates": "2020-01-24T18:06:36+00:00", "fork": "False", "license": "licensed"}}