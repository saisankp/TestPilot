{"test_class": {"identifier": "FilteringHelperTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "@Rule\n    public ExpectedException expectedException = none();", "modifier": "@Rule\n    public", "type": "ExpectedException", "declarator": "expectedException = none()", "var_name": "expectedException"}], "file": "dhis-2/dhis-web/dhis-web-api/src/test/java/org/hisp/dhis/webapi/controller/dataitem/helper/FilteringHelperTest.java"}, "test_case": {"identifier": "testExtractEntitiesFromInFilterWhenTypeIsInvalid", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testExtractEntitiesFromInFilterWhenTypeIsInvalid()\n    {\n        // Given\n        final String filtersWithInvalidType = \"dimensionItemType:in:[INVALID_TYPE,DATA_SET]\";\n\n        // Expect\n        expectedException.expect( IllegalQueryException.class );\n        expectedException.expectMessage(\n            \"Unable to parse element `\" + \"INVALID_TYPE` on filter `dimensionItemType`. The values available are: \"\n                + Arrays.toString( DATA_TYPE_ENTITY_MAP.keySet().toArray() ) );\n\n        // When\n        extractEntitiesFromInFilter( filtersWithInvalidType );\n    }", "signature": "void testExtractEntitiesFromInFilterWhenTypeIsInvalid()", "full_signature": "@Test public void testExtractEntitiesFromInFilterWhenTypeIsInvalid()", "class_method_signature": "FilteringHelperTest.testExtractEntitiesFromInFilterWhenTypeIsInvalid()", "testcase": true, "constructor": false, "invocations": ["expect", "expectMessage", "toString", "toArray", "keySet", "extractEntitiesFromInFilter"]}, "focal_class": {"identifier": "FilteringHelper", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final String DIMENSION_TYPE_IN_FILTER_PREFIX = \"dimensionItemType:in:\";", "modifier": "private static final", "type": "String", "declarator": "DIMENSION_TYPE_IN_FILTER_PREFIX = \"dimensionItemType:in:\"", "var_name": "DIMENSION_TYPE_IN_FILTER_PREFIX"}, {"original_string": "private static final String DIMENSION_TYPE_EQUAL_FILTER_PREFIX = \"dimensionItemType:eq:\";", "modifier": "private static final", "type": "String", "declarator": "DIMENSION_TYPE_EQUAL_FILTER_PREFIX = \"dimensionItemType:eq:\"", "var_name": "DIMENSION_TYPE_EQUAL_FILTER_PREFIX"}], "methods": [{"identifier": "extractEntitiesFromInFilter", "parameters": "( final String filter )", "modifiers": "public static", "return": "Set<Class<? extends BaseDimensionalItemObject>>", "signature": "Set<Class<? extends BaseDimensionalItemObject>> extractEntitiesFromInFilter( final String filter )", "full_signature": "public static Set<Class<? extends BaseDimensionalItemObject>> extractEntitiesFromInFilter( final String filter )", "class_method_signature": "FilteringHelper.extractEntitiesFromInFilter( final String filter )", "testcase": false, "constructor": false}, {"identifier": "extractEntityFromEqualFilter", "parameters": "( final String filter )", "modifiers": "public static", "return": "Class<? extends BaseDimensionalItemObject>", "signature": "Class<? extends BaseDimensionalItemObject> extractEntityFromEqualFilter( final String filter )", "full_signature": "public static Class<? extends BaseDimensionalItemObject> extractEntityFromEqualFilter( final String filter )", "class_method_signature": "FilteringHelper.extractEntityFromEqualFilter( final String filter )", "testcase": false, "constructor": false}, {"identifier": "entityClassFromString", "parameters": "( final String entityType )", "modifiers": "private static", "return": "Class<? extends BaseDimensionalItemObject>", "signature": "Class<? extends BaseDimensionalItemObject> entityClassFromString( final String entityType )", "full_signature": "private static Class<? extends BaseDimensionalItemObject> entityClassFromString( final String entityType )", "class_method_signature": "FilteringHelper.entityClassFromString( final String entityType )", "testcase": false, "constructor": false}], "file": "dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/dataitem/helper/FilteringHelper.java"}, "focal_method": {"identifier": "extractEntitiesFromInFilter", "parameters": "( final String filter )", "modifiers": "public static", "return": "Set<Class<? extends BaseDimensionalItemObject>>", "body": "public static Set<Class<? extends BaseDimensionalItemObject>> extractEntitiesFromInFilter( final String filter )\n    {\n        final Set<Class<? extends BaseDimensionalItemObject>> dimensionTypes = new HashSet<>( 0 );\n\n        if ( contains( filter, DIMENSION_TYPE_IN_FILTER_PREFIX ) )\n        {\n            final String[] dimensionTypesInFilter = split( deleteWhitespace( substringBetween( filter, \"[\", \"]\" ) ),\n                \",\" );\n\n            if ( isNotEmpty( dimensionTypesInFilter ) )\n            {\n                for ( final String dimensionType : dimensionTypesInFilter )\n                {\n                    dimensionTypes.add( entityClassFromString( dimensionType ) );\n                }\n            }\n            else\n            {\n                throw new IllegalQueryException( new ErrorMessage( E2014, filter ) );\n            }\n        }\n\n        return dimensionTypes;\n    }", "signature": "Set<Class<? extends BaseDimensionalItemObject>> extractEntitiesFromInFilter( final String filter )", "full_signature": "public static Set<Class<? extends BaseDimensionalItemObject>> extractEntitiesFromInFilter( final String filter )", "class_method_signature": "FilteringHelper.extractEntitiesFromInFilter( final String filter )", "testcase": false, "constructor": false, "invocations": ["contains", "split", "deleteWhitespace", "substringBetween", "isNotEmpty", "add", "entityClassFromString"]}, "repository": {"repo_id": 66940520, "url": "https://github.com/dhis2/dhis2-core", "stars": 151, "created": "8/30/2016 12:57:05 PM +00:00", "updates": "2020-01-24T18:06:36+00:00", "fork": "False", "license": "licensed"}}