{"test_class": {"identifier": "TreeMapConsistentHashTest", "superclass": "", "interfaces": "", "fields": [], "file": "cim-common/src/test/java/com/crossoverjie/cim/common/route/algorithm/consistenthash/TreeMapConsistentHashTest.java"}, "test_case": {"identifier": "getFirstNodeValue2", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void getFirstNodeValue2() {\n        AbstractConsistentHash map = new TreeMapConsistentHash() ;\n\n        List<String> strings = new ArrayList<String>();\n        for (int i = 0; i < 10; i++) {\n            strings.add(\"127.0.0.\" + i) ;\n        }\n        String process = map.process(strings,\"zhangsan2\");\n        System.out.println(process);\n\n        Assert.assertEquals(\"127.0.0.3\",process);\n    }", "signature": "void getFirstNodeValue2()", "full_signature": "@Test public void getFirstNodeValue2()", "class_method_signature": "TreeMapConsistentHashTest.getFirstNodeValue2()", "testcase": true, "constructor": false, "invocations": ["add", "process", "println", "assertEquals"]}, "focal_class": {"identifier": "TreeMapConsistentHash", "superclass": "extends AbstractConsistentHash", "interfaces": "", "fields": [{"original_string": "private TreeMap<Long,String> treeMap = new TreeMap<Long, String>() ;", "modifier": "private", "type": "TreeMap<Long,String>", "declarator": "treeMap = new TreeMap<Long, String>()", "var_name": "treeMap"}, {"original_string": "private static final int VIRTUAL_NODE_SIZE = 2 ;", "modifier": "private static final", "type": "int", "declarator": "VIRTUAL_NODE_SIZE = 2", "var_name": "VIRTUAL_NODE_SIZE"}], "methods": [{"identifier": "add", "parameters": "(long key, String value)", "modifiers": "@Override public", "return": "void", "signature": "void add(long key, String value)", "full_signature": "@Override public void add(long key, String value)", "class_method_signature": "TreeMapConsistentHash.add(long key, String value)", "testcase": false, "constructor": false}, {"identifier": "getFirstNodeValue", "parameters": "(String value)", "modifiers": "@Override public", "return": "String", "signature": "String getFirstNodeValue(String value)", "full_signature": "@Override public String getFirstNodeValue(String value)", "class_method_signature": "TreeMapConsistentHash.getFirstNodeValue(String value)", "testcase": false, "constructor": false}], "file": "cim-common/src/main/java/com/crossoverjie/cim/common/route/algorithm/consistenthash/TreeMapConsistentHash.java"}, "focal_method": {"identifier": "add", "parameters": "(long key, String value)", "modifiers": "@Override public", "return": "void", "body": "@Override\n    public void add(long key, String value) {\n\n        // fix https://github.com/crossoverJie/cim/issues/79\n        treeMap.clear();\n        for (int i = 0; i < VIRTUAL_NODE_SIZE; i++) {\n            Long hash = super.hash(\"vir\" + key + i);\n            treeMap.put(hash,value);\n        }\n        treeMap.put(key, value);\n    }", "signature": "void add(long key, String value)", "full_signature": "@Override public void add(long key, String value)", "class_method_signature": "TreeMapConsistentHash.add(long key, String value)", "testcase": false, "constructor": false, "invocations": ["clear", "hash", "put", "put"]}, "repository": {"repo_id": 134164777, "url": "https://github.com/crossoverJie/cim", "stars": 4518, "created": "5/20/2018 3:55:56 PM +00:00", "updates": "2020-01-27T13:30:30+00:00", "fork": "False", "license": "licensed"}}