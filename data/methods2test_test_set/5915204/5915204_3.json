{"test_class": {"identifier": "MobilityModuleTest", "superclass": "extends AbstractTest", "interfaces": "", "fields": [], "file": "omicron-core/src/test/java/com/lyndir/omicron/api/MobilityModuleTest.java"}, "test_case": {"identifier": "testCostForLevelingToLevel", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testCostForLevelingToLevel()\n            throws Exception {\n\n        MobilityModule module = MobilityModule.createWithStandardResourceCost()\n                                              .movementSpeed( 0 )\n                                              .movementCost( ImmutableMap.<LevelType, Double>of() )\n                                              .levelingCost(\n                                                      ImmutableMap.of( LevelType.GROUND, 1d, LevelType.SKY, 2d ) );\n        createUnit( testUnitType( \"Leveler\", module ) );\n\n        assertEquals( 0d, module.costForLevelingToLevel( LevelType.GROUND ) );\n        assertEquals( 1d, module.costForLevelingToLevel( LevelType.SKY ) );\n        assertEquals( 3d, module.costForLevelingToLevel( LevelType.SPACE ) );\n    }", "signature": "void testCostForLevelingToLevel()", "full_signature": "@Test public void testCostForLevelingToLevel()", "class_method_signature": "MobilityModuleTest.testCostForLevelingToLevel()", "testcase": true, "constructor": false, "invocations": ["levelingCost", "movementCost", "movementSpeed", "createWithStandardResourceCost", "of", "of", "createUnit", "testUnitType", "assertEquals", "costForLevelingToLevel", "assertEquals", "costForLevelingToLevel", "assertEquals", "costForLevelingToLevel"]}, "focal_class": {"identifier": "MobilityModule", "superclass": "extends Module", "interfaces": "implements IMobilityModule, IMobilityModuleController", "fields": [{"original_string": "private final int movementSpeed;", "modifier": "private final", "type": "int", "declarator": "movementSpeed", "var_name": "movementSpeed"}, {"original_string": "private final Map<LevelType, Double> movementCost = Collections.synchronizedMap( new EnumMap<>( LevelType.class ) );", "modifier": "private final", "type": "Map<LevelType, Double>", "declarator": "movementCost = Collections.synchronizedMap( new EnumMap<>( LevelType.class ) )", "var_name": "movementCost"}, {"original_string": "private final Map<LevelType, Double> levelingCost = Collections.synchronizedMap( new EnumMap<>( LevelType.class ) );", "modifier": "private final", "type": "Map<LevelType, Double>", "declarator": "levelingCost = Collections.synchronizedMap( new EnumMap<>( LevelType.class ) )", "var_name": "levelingCost"}, {"original_string": "private double remainingSpeed;", "modifier": "private", "type": "double", "declarator": "remainingSpeed", "var_name": "remainingSpeed"}], "methods": [{"identifier": "MobilityModule", "parameters": "(final ImmutableResourceCost resourceCost, final int movementSpeed, final Map<LevelType, Double> movementCost,\n                             final Map<LevelType, Double> levelingCost)", "modifiers": "protected", "return": "", "signature": " MobilityModule(final ImmutableResourceCost resourceCost, final int movementSpeed, final Map<LevelType, Double> movementCost,\n                             final Map<LevelType, Double> levelingCost)", "full_signature": "protected  MobilityModule(final ImmutableResourceCost resourceCost, final int movementSpeed, final Map<LevelType, Double> movementCost,\n                             final Map<LevelType, Double> levelingCost)", "class_method_signature": "MobilityModule.MobilityModule(final ImmutableResourceCost resourceCost, final int movementSpeed, final Map<LevelType, Double> movementCost,\n                             final Map<LevelType, Double> levelingCost)", "testcase": false, "constructor": true}, {"identifier": "createWithStandardResourceCost", "parameters": "()", "modifiers": "static", "return": "Builder0", "signature": "Builder0 createWithStandardResourceCost()", "full_signature": "static Builder0 createWithStandardResourceCost()", "class_method_signature": "MobilityModule.createWithStandardResourceCost()", "testcase": false, "constructor": false}, {"identifier": "createWithExtraResourceCost", "parameters": "(final ImmutableResourceCost resourceCost)", "modifiers": "static", "return": "Builder0", "signature": "Builder0 createWithExtraResourceCost(final ImmutableResourceCost resourceCost)", "full_signature": "static Builder0 createWithExtraResourceCost(final ImmutableResourceCost resourceCost)", "class_method_signature": "MobilityModule.createWithExtraResourceCost(final ImmutableResourceCost resourceCost)", "testcase": false, "constructor": false}, {"identifier": "getRemainingSpeed", "parameters": "()", "modifiers": "@Override public", "return": "double", "signature": "double getRemainingSpeed()", "full_signature": "@Override public double getRemainingSpeed()", "class_method_signature": "MobilityModule.getRemainingSpeed()", "testcase": false, "constructor": false}, {"identifier": "getMovementSpeed", "parameters": "()", "modifiers": "@Override public", "return": "double", "signature": "double getMovementSpeed()", "full_signature": "@Override public double getMovementSpeed()", "class_method_signature": "MobilityModule.getMovementSpeed()", "testcase": false, "constructor": false}, {"identifier": "costForMovingInLevel", "parameters": "(final LevelType levelType)", "modifiers": "@Override public", "return": "double", "signature": "double costForMovingInLevel(final LevelType levelType)", "full_signature": "@Override public double costForMovingInLevel(final LevelType levelType)", "class_method_signature": "MobilityModule.costForMovingInLevel(final LevelType levelType)", "testcase": false, "constructor": false}, {"identifier": "costForLevelingToLevel", "parameters": "(final LevelType levelType)", "modifiers": "@Override public", "return": "double", "signature": "double costForLevelingToLevel(final LevelType levelType)", "full_signature": "@Override public double costForLevelingToLevel(final LevelType levelType)", "class_method_signature": "MobilityModule.costForLevelingToLevel(final LevelType levelType)", "testcase": false, "constructor": false}, {"identifier": "leveling", "parameters": "(final LevelType levelType)", "modifiers": "@Override public", "return": "Leveling", "signature": "Leveling leveling(final LevelType levelType)", "full_signature": "@Override public Leveling leveling(final LevelType levelType)", "class_method_signature": "MobilityModule.leveling(final LevelType levelType)", "testcase": false, "constructor": false}, {"identifier": "movement", "parameters": "(final ITile target)", "modifiers": "@Override public", "return": "Movement", "signature": "Movement movement(final ITile target)", "full_signature": "@Override public Movement movement(final ITile target)", "class_method_signature": "MobilityModule.movement(final ITile target)", "testcase": false, "constructor": false}, {"identifier": "onReset", "parameters": "()", "modifiers": "@Override protected", "return": "void", "signature": "void onReset()", "full_signature": "@Override protected void onReset()", "class_method_signature": "MobilityModule.onReset()", "testcase": false, "constructor": false}, {"identifier": "onNewTurn", "parameters": "()", "modifiers": "@Override protected", "return": "void", "signature": "void onNewTurn()", "full_signature": "@Override protected void onNewTurn()", "class_method_signature": "MobilityModule.onNewTurn()", "testcase": false, "constructor": false}, {"identifier": "getController", "parameters": "()", "modifiers": "@Override public", "return": "IMobilityModuleController", "signature": "IMobilityModuleController getController()", "full_signature": "@Override public IMobilityModuleController getController()", "class_method_signature": "MobilityModule.getController()", "testcase": false, "constructor": false}, {"identifier": "getModule", "parameters": "()", "modifiers": "@Override public", "return": "IMobilityModule", "signature": "IMobilityModule getModule()", "full_signature": "@Override public IMobilityModule getModule()", "class_method_signature": "MobilityModule.getModule()", "testcase": false, "constructor": false}], "file": "omicron-core/src/main/java/com/lyndir/omicron/api/MobilityModule.java"}, "focal_method": {"identifier": "costForLevelingToLevel", "parameters": "(final LevelType levelType)", "modifiers": "@Override public", "return": "double", "body": "@Override\n    public double costForLevelingToLevel(final LevelType levelType)\n            throws NotAuthenticatedException, NotObservableException {\n        assertObservable();\n        Tile location = getGameObject().getLocation().get();\n\n        // Level up until we reach the target level.\n        double cost = 0;\n        LevelType currentLevel = location.getLevel().getType();\n        if (levelType == currentLevel)\n            return 0;\n        while (true) {\n            Optional<LevelType> newLevel = currentLevel.up();\n            if (!newLevel.isPresent())\n                break;\n\n            Double currentLevelCost = levelingCost.get( EnumUtils.min( currentLevel, newLevel.get() ) );\n            if (currentLevelCost == null)\n                // Cannot level to this level.\n                return Double.MAX_VALUE;\n\n            currentLevel = newLevel.get();\n            cost += currentLevelCost;\n\n            if (currentLevel == levelType)\n                return cost;\n        }\n\n        // Level down until we reach the target level.\n        cost = 0;\n        currentLevel = location.getLevel().getType();\n        while (true) {\n            Optional<LevelType> newLevel = currentLevel.down();\n            if (!newLevel.isPresent())\n                break;\n\n            Double currentLevelCost = levelingCost.get( EnumUtils.min( currentLevel, newLevel.get() ) );\n            if (currentLevelCost == null)\n                // Cannot level to this level.\n                return Double.MAX_VALUE;\n\n            currentLevel = newLevel.get();\n            cost += currentLevelCost;\n\n            if (currentLevel == levelType)\n                return cost;\n        }\n\n        // Unreachable code.\n        throw new IllegalArgumentException( \"Unsupported level type: \" + levelType );\n    }", "signature": "double costForLevelingToLevel(final LevelType levelType)", "full_signature": "@Override public double costForLevelingToLevel(final LevelType levelType)", "class_method_signature": "MobilityModule.costForLevelingToLevel(final LevelType levelType)", "testcase": false, "constructor": false, "invocations": ["assertObservable", "get", "getLocation", "getGameObject", "getType", "getLevel", "up", "isPresent", "get", "min", "get", "get", "getType", "getLevel", "down", "isPresent", "get", "min", "get", "get"]}, "repository": {"repo_id": 5915204, "url": "https://github.com/Lyndir/Omicron", "language": "Java", "is_fork": false, "fork_count": 2, "stargazer_count": 6, "size": 3199, "license": "licensed"}}