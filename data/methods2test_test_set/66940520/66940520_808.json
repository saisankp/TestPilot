{"test_class": {"identifier": "DataItemQueryControllerTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "@Mock\n    private DataItemServiceFacade dataItemServiceFacade;", "modifier": "@Mock\n    private", "type": "DataItemServiceFacade", "declarator": "dataItemServiceFacade", "var_name": "dataItemServiceFacade"}, {"original_string": "@Mock\n    private ContextService contextService;", "modifier": "@Mock\n    private", "type": "ContextService", "declarator": "contextService", "var_name": "contextService"}, {"original_string": "@Mock\n    private ResponseHandler responseHandler;", "modifier": "@Mock\n    private", "type": "ResponseHandler", "declarator": "responseHandler", "var_name": "responseHandler"}, {"original_string": "@Mock\n    private AclService aclService;", "modifier": "@Mock\n    private", "type": "AclService", "declarator": "aclService", "var_name": "aclService"}, {"original_string": "@Rule\n    public MockitoRule mockitoRule = rule();", "modifier": "@Rule\n    public", "type": "MockitoRule", "declarator": "mockitoRule = rule()", "var_name": "mockitoRule"}, {"original_string": "@Rule\n    public ExpectedException expectedException = none();", "modifier": "@Rule\n    public", "type": "ExpectedException", "declarator": "expectedException = none()", "var_name": "expectedException"}, {"original_string": "private DataItemQueryController dataItemQueryController;", "modifier": "private", "type": "DataItemQueryController", "declarator": "dataItemQueryController", "var_name": "dataItemQueryController"}], "file": "dhis-2/dhis-web/dhis-web-api/src/test/java/org/hisp/dhis/webapi/controller/dataitem/DataItemQueryControllerTest.java"}, "test_case": {"identifier": "testGetWhenAclIsInvalid", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testGetWhenAclIsInvalid()\n    {\n        // Given\n        final Map<String, String> anyUrlParameters = new HashMap<>();\n        final OrderParams anyOrderParams = new OrderParams();\n        final User anyUser = new User();\n        final Set<Class<? extends BaseDimensionalItemObject>> targetEntities = new HashSet<>(\n            asList( Indicator.class ) );\n        final boolean invalidAcl = false;\n\n        // Then\n        expectedException.expect( IllegalQueryException.class );\n        expectedException\n            .expectMessage( containsString( \"does not have read access for object\" ) );\n\n        // When\n        when( dataItemServiceFacade.extractTargetEntities( anyList() ) ).thenReturn( targetEntities );\n        when( aclService.canRead( anyUser, Indicator.class ) ).thenReturn( invalidAcl );\n        dataItemQueryController.getJson( anyUrlParameters, anyOrderParams, anyUser );\n    }", "signature": "void testGetWhenAclIsInvalid()", "full_signature": "@Test public void testGetWhenAclIsInvalid()", "class_method_signature": "DataItemQueryControllerTest.testGetWhenAclIsInvalid()", "testcase": true, "constructor": false, "invocations": ["asList", "expect", "expectMessage", "containsString", "thenReturn", "when", "extractTargetEntities", "anyList", "thenReturn", "when", "canRead", "getJson"]}, "focal_class": {"identifier": "DataItemQueryController", "superclass": "", "interfaces": "", "fields": [{"original_string": "static final String API_RESOURCE_PATH = \"/dataItems\";", "modifier": "static final", "type": "String", "declarator": "API_RESOURCE_PATH = \"/dataItems\"", "var_name": "API_RESOURCE_PATH"}, {"original_string": "private static final String FIELDS = \"fields\";", "modifier": "private static final", "type": "String", "declarator": "FIELDS = \"fields\"", "var_name": "FIELDS"}, {"original_string": "private static final String FILTER = \"filter\";", "modifier": "private static final", "type": "String", "declarator": "FILTER = \"filter\"", "var_name": "FILTER"}, {"original_string": "private final DataItemServiceFacade dataItemServiceFacade;", "modifier": "private final", "type": "DataItemServiceFacade", "declarator": "dataItemServiceFacade", "var_name": "dataItemServiceFacade"}, {"original_string": "private final ContextService contextService;", "modifier": "private final", "type": "ContextService", "declarator": "contextService", "var_name": "contextService"}, {"original_string": "private final ResponseHandler responseHandler;", "modifier": "private final", "type": "ResponseHandler", "declarator": "responseHandler", "var_name": "responseHandler"}, {"original_string": "private final AclService aclService;", "modifier": "private final", "type": "AclService", "declarator": "aclService", "var_name": "aclService"}], "methods": [{"identifier": "DataItemQueryController", "parameters": "( final DataItemServiceFacade dataItemServiceFacade,\n        final ContextService contextService, final ResponseHandler responseHandler, final AclService aclService )", "modifiers": "public", "return": "", "signature": " DataItemQueryController( final DataItemServiceFacade dataItemServiceFacade,\n        final ContextService contextService, final ResponseHandler responseHandler, final AclService aclService )", "full_signature": "public  DataItemQueryController( final DataItemServiceFacade dataItemServiceFacade,\n        final ContextService contextService, final ResponseHandler responseHandler, final AclService aclService )", "class_method_signature": "DataItemQueryController.DataItemQueryController( final DataItemServiceFacade dataItemServiceFacade,\n        final ContextService contextService, final ResponseHandler responseHandler, final AclService aclService )", "testcase": false, "constructor": true}, {"identifier": "getJson", "parameters": "( @RequestParam\n    final Map<String, String> urlParameters, final OrderParams orderParams, final User currentUser )", "modifiers": "@GetMapping( value = API_RESOURCE_PATH, produces = APPLICATION_JSON_VALUE ) public", "return": "ResponseEntity<RootNode>", "signature": "ResponseEntity<RootNode> getJson( @RequestParam\n    final Map<String, String> urlParameters, final OrderParams orderParams, final User currentUser )", "full_signature": "@GetMapping( value = API_RESOURCE_PATH, produces = APPLICATION_JSON_VALUE ) public ResponseEntity<RootNode> getJson( @RequestParam\n    final Map<String, String> urlParameters, final OrderParams orderParams, final User currentUser )", "class_method_signature": "DataItemQueryController.getJson( @RequestParam\n    final Map<String, String> urlParameters, final OrderParams orderParams, final User currentUser )", "testcase": false, "constructor": false}, {"identifier": "getXml", "parameters": "( @RequestParam\n    final Map<String, String> urlParameters, final OrderParams orderParams, final User currentUser )", "modifiers": "@GetMapping( value = API_RESOURCE_PATH + \".xml\", produces = APPLICATION_XML_VALUE ) public", "return": "ResponseEntity<RootNode>", "signature": "ResponseEntity<RootNode> getXml( @RequestParam\n    final Map<String, String> urlParameters, final OrderParams orderParams, final User currentUser )", "full_signature": "@GetMapping( value = API_RESOURCE_PATH + \".xml\", produces = APPLICATION_XML_VALUE ) public ResponseEntity<RootNode> getXml( @RequestParam\n    final Map<String, String> urlParameters, final OrderParams orderParams, final User currentUser )", "class_method_signature": "DataItemQueryController.getXml( @RequestParam\n    final Map<String, String> urlParameters, final OrderParams orderParams, final User currentUser )", "testcase": false, "constructor": false}, {"identifier": "getDimensionalItems", "parameters": "( final User currentUser,\n        final Map<String, String> urlParameters,\n        final OrderParams orderParams )", "modifiers": "private", "return": "ResponseEntity<RootNode>", "signature": "ResponseEntity<RootNode> getDimensionalItems( final User currentUser,\n        final Map<String, String> urlParameters,\n        final OrderParams orderParams )", "full_signature": "private ResponseEntity<RootNode> getDimensionalItems( final User currentUser,\n        final Map<String, String> urlParameters,\n        final OrderParams orderParams )", "class_method_signature": "DataItemQueryController.getDimensionalItems( final User currentUser,\n        final Map<String, String> urlParameters,\n        final OrderParams orderParams )", "testcase": false, "constructor": false}, {"identifier": "checkAuthorization", "parameters": "( final User currentUser,\n        final Set<Class<? extends BaseDimensionalItemObject>> entities )", "modifiers": "private", "return": "void", "signature": "void checkAuthorization( final User currentUser,\n        final Set<Class<? extends BaseDimensionalItemObject>> entities )", "full_signature": "private void checkAuthorization( final User currentUser,\n        final Set<Class<? extends BaseDimensionalItemObject>> entities )", "class_method_signature": "DataItemQueryController.checkAuthorization( final User currentUser,\n        final Set<Class<? extends BaseDimensionalItemObject>> entities )", "testcase": false, "constructor": false}], "file": "dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/dataitem/DataItemQueryController.java"}, "focal_method": {"identifier": "getJson", "parameters": "( @RequestParam\n    final Map<String, String> urlParameters, final OrderParams orderParams, final User currentUser )", "modifiers": "@GetMapping( value = API_RESOURCE_PATH, produces = APPLICATION_JSON_VALUE ) public", "return": "ResponseEntity<RootNode>", "body": "@GetMapping( value = API_RESOURCE_PATH, produces = APPLICATION_JSON_VALUE )\n    public ResponseEntity<RootNode> getJson( @RequestParam\n    final Map<String, String> urlParameters, final OrderParams orderParams, final User currentUser )\n        throws QueryParserException\n    {\n        log.debug( \"Looking for data items (JSON response)\" );\n\n        return getDimensionalItems( currentUser, urlParameters, orderParams );\n    }", "signature": "ResponseEntity<RootNode> getJson( @RequestParam\n    final Map<String, String> urlParameters, final OrderParams orderParams, final User currentUser )", "full_signature": "@GetMapping( value = API_RESOURCE_PATH, produces = APPLICATION_JSON_VALUE ) public ResponseEntity<RootNode> getJson( @RequestParam\n    final Map<String, String> urlParameters, final OrderParams orderParams, final User currentUser )", "class_method_signature": "DataItemQueryController.getJson( @RequestParam\n    final Map<String, String> urlParameters, final OrderParams orderParams, final User currentUser )", "testcase": false, "constructor": false, "invocations": ["debug", "getDimensionalItems"]}, "repository": {"repo_id": 66940520, "url": "https://github.com/dhis2/dhis2-core", "stars": 151, "created": "8/30/2016 12:57:05 PM +00:00", "updates": "2020-01-24T18:06:36+00:00", "fork": "False", "license": "licensed"}}