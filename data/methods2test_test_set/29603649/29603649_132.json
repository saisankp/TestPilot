{"test_class": {"identifier": "AllResultFileDownloadControllerTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final String SEARCH_RESULT_KEY = \"searchResult\";", "modifier": "private static final", "type": "String", "declarator": "SEARCH_RESULT_KEY = \"searchResult\"", "var_name": "SEARCH_RESULT_KEY"}, {"original_string": "@Mock\n    private FileZipper fileZipper;", "modifier": "@Mock\n    private", "type": "FileZipper", "declarator": "fileZipper", "var_name": "fileZipper"}, {"original_string": "@Mock\n    private HttpSession session;", "modifier": "@Mock\n    private", "type": "HttpSession", "declarator": "session", "var_name": "session"}, {"original_string": "@Mock\n    private HttpServletRequest request;", "modifier": "@Mock\n    private", "type": "HttpServletRequest", "declarator": "request", "var_name": "request"}, {"original_string": "@Mock\n    private HttpServletResponse response;", "modifier": "@Mock\n    private", "type": "HttpServletResponse", "declarator": "response", "var_name": "response"}, {"original_string": "@Mock\n    private ServletOutputStream outputStream;", "modifier": "@Mock\n    private", "type": "ServletOutputStream", "declarator": "outputStream", "var_name": "outputStream"}, {"original_string": "@InjectMocks\n    private AllResultFileDownloadController underTest;", "modifier": "@InjectMocks\n    private", "type": "AllResultFileDownloadController", "declarator": "underTest", "var_name": "underTest"}], "file": "wilma-message-search/modules/wilma-message-search-webapp/src/test/java/com/epam/wilma/message/search/web/controller/AllResultFileDownloadControllerTest.java"}, "test_case": {"identifier": "testDownloadFilesWithoutSearchingResult", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testDownloadFilesWithoutSearchingResult() throws ServletException, IOException {\n        //GIVEN\n        List<List<String>> list = new ArrayList<>();\n        given(session.getAttribute(SEARCH_RESULT_KEY)).willReturn(list);\n        given(response.getOutputStream()).willReturn(outputStream);\n        //WHEN\n        underTest.downloadFiles(session, response);\n        //THEN\n        verify(fileZipper, times(0)).createZipWithFiles(list, outputStream);\n    }", "signature": "void testDownloadFilesWithoutSearchingResult()", "full_signature": "@Test public void testDownloadFilesWithoutSearchingResult()", "class_method_signature": "AllResultFileDownloadControllerTest.testDownloadFilesWithoutSearchingResult()", "testcase": true, "constructor": false, "invocations": ["willReturn", "given", "getAttribute", "willReturn", "given", "getOutputStream", "downloadFiles", "createZipWithFiles", "verify", "times"]}, "focal_class": {"identifier": "AllResultFileDownloadController", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final String SEARCH_RESULT_KEY = \"searchResult\";", "modifier": "private static final", "type": "String", "declarator": "SEARCH_RESULT_KEY = \"searchResult\"", "var_name": "SEARCH_RESULT_KEY"}, {"original_string": "private static final String CONTENT_DISPOSITION = \"Content-Disposition\";", "modifier": "private static final", "type": "String", "declarator": "CONTENT_DISPOSITION = \"Content-Disposition\"", "var_name": "CONTENT_DISPOSITION"}, {"original_string": "private static final Logger LOGGER = LoggerFactory.getLogger(AllResultFileDownloadController.class);", "modifier": "private static final", "type": "Logger", "declarator": "LOGGER = LoggerFactory.getLogger(AllResultFileDownloadController.class)", "var_name": "LOGGER"}, {"original_string": "@Autowired\n    private FileZipper fileZipper;", "modifier": "@Autowired\n    private", "type": "FileZipper", "declarator": "fileZipper", "var_name": "fileZipper"}], "methods": [{"identifier": "downloadFiles", "parameters": "(final HttpSession session, final HttpServletResponse response)", "modifiers": "@SuppressWarnings(\"unchecked\") @RequestMapping(value = \"/downloadAll\") public", "return": "void", "signature": "void downloadFiles(final HttpSession session, final HttpServletResponse response)", "full_signature": "@SuppressWarnings(\"unchecked\") @RequestMapping(value = \"/downloadAll\") public void downloadFiles(final HttpSession session, final HttpServletResponse response)", "class_method_signature": "AllResultFileDownloadController.downloadFiles(final HttpSession session, final HttpServletResponse response)", "testcase": false, "constructor": false}, {"identifier": "writeZipToResponse", "parameters": "(final HttpServletResponse response, final List<List<String>> searchResultWithPairs)", "modifiers": "private", "return": "void", "signature": "void writeZipToResponse(final HttpServletResponse response, final List<List<String>> searchResultWithPairs)", "full_signature": "private void writeZipToResponse(final HttpServletResponse response, final List<List<String>> searchResultWithPairs)", "class_method_signature": "AllResultFileDownloadController.writeZipToResponse(final HttpServletResponse response, final List<List<String>> searchResultWithPairs)", "testcase": false, "constructor": false}, {"identifier": "clearSearchResultFromSession", "parameters": "(final HttpSession session)", "modifiers": "private", "return": "void", "signature": "void clearSearchResultFromSession(final HttpSession session)", "full_signature": "private void clearSearchResultFromSession(final HttpSession session)", "class_method_signature": "AllResultFileDownloadController.clearSearchResultFromSession(final HttpSession session)", "testcase": false, "constructor": false}, {"identifier": "sendError", "parameters": "(final HttpServletResponse response)", "modifiers": "private", "return": "void", "signature": "void sendError(final HttpServletResponse response)", "full_signature": "private void sendError(final HttpServletResponse response)", "class_method_signature": "AllResultFileDownloadController.sendError(final HttpServletResponse response)", "testcase": false, "constructor": false}], "file": "wilma-message-search/modules/wilma-message-search-webapp/src/main/java/com/epam/wilma/message/search/web/controller/AllResultFileDownloadController.java"}, "focal_method": {"identifier": "downloadFiles", "parameters": "(final HttpSession session, final HttpServletResponse response)", "modifiers": "@SuppressWarnings(\"unchecked\") @RequestMapping(value = \"/downloadAll\") public", "return": "void", "body": "@SuppressWarnings(\"unchecked\")\n    @RequestMapping(value = \"/downloadAll\")\n    public void downloadFiles(final HttpSession session, final HttpServletResponse response) {\n        List<List<String>> searchResultWithPairs = (List<List<String>>) session.getAttribute(SEARCH_RESULT_KEY);\n        if (searchResultWithPairs != null && !searchResultWithPairs.isEmpty()) {\n            writeZipToResponse(response, searchResultWithPairs);\n            clearSearchResultFromSession(session);\n        }\n    }", "signature": "void downloadFiles(final HttpSession session, final HttpServletResponse response)", "full_signature": "@SuppressWarnings(\"unchecked\") @RequestMapping(value = \"/downloadAll\") public void downloadFiles(final HttpSession session, final HttpServletResponse response)", "class_method_signature": "AllResultFileDownloadController.downloadFiles(final HttpSession session, final HttpServletResponse response)", "testcase": false, "constructor": false, "invocations": ["getAttribute", "isEmpty", "writeZipToResponse", "clearSearchResultFromSession"]}, "repository": {"repo_id": 29603649, "url": "https://github.com/epam/Wilma", "language": "Java", "is_fork": false, "fork_count": 8, "stargazer_count": 35, "size": 5732, "license": "licensed"}}