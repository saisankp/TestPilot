{"test_class": {"identifier": "NodeMetaInfoProviderTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static Logger logger = Logger.getLogger( SwitchNodeConnectorTest.class );", "modifier": "private static", "type": "Logger", "declarator": "logger = Logger.getLogger( SwitchNodeConnectorTest.class )", "var_name": "logger"}], "file": "modules/hms-core/src/test/java/com/vmware/vrack/hms/node/NodeMetaInfoProviderTest.java"}, "test_case": {"identifier": "decreaseConcurrentOperationCountTest", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void decreaseConcurrentOperationCountTest()\n    {\n\n        NodeMetaInfoProvider.increaseConcurrentOperationCount( \"N1\" );\n\n        Boolean lockAcquired = NodeMetaInfoProvider.decreaseConcurrentOperationCount( \"N1\" );\n\n        assertTrue( lockAcquired );\n\n    }", "signature": "void decreaseConcurrentOperationCountTest()", "full_signature": "@Test public void decreaseConcurrentOperationCountTest()", "class_method_signature": "NodeMetaInfoProviderTest.decreaseConcurrentOperationCountTest()", "testcase": true, "constructor": false, "invocations": ["increaseConcurrentOperationCount", "decreaseConcurrentOperationCount", "assertTrue"]}, "focal_class": {"identifier": "NodeMetaInfoProvider", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final Logger logger = Logger.getLogger( NodeMetaInfoProvider.class );", "modifier": "private static final", "type": "Logger", "declarator": "logger = Logger.getLogger( NodeMetaInfoProvider.class )", "var_name": "logger"}, {"original_string": "private static final ReentrantLock nodeServiceLock = new ReentrantLock();", "modifier": "private static final", "type": "ReentrantLock", "declarator": "nodeServiceLock = new ReentrantLock()", "var_name": "nodeServiceLock"}, {"original_string": "private static final Map<String, Integer> nodeMetaInfoMap = new ConcurrentHashMap<String, Integer>();", "modifier": "private static final", "type": "Map<String, Integer>", "declarator": "nodeMetaInfoMap = new ConcurrentHashMap<String, Integer>()", "var_name": "nodeMetaInfoMap"}], "methods": [{"identifier": "increaseConcurrentOperationCount", "parameters": "( String nodeId )", "modifiers": "public static", "return": "boolean", "signature": "boolean increaseConcurrentOperationCount( String nodeId )", "full_signature": "public static boolean increaseConcurrentOperationCount( String nodeId )", "class_method_signature": "NodeMetaInfoProvider.increaseConcurrentOperationCount( String nodeId )", "testcase": false, "constructor": false}, {"identifier": "decreaseConcurrentOperationCount", "parameters": "( String nodeId )", "modifiers": "public static", "return": "boolean", "signature": "boolean decreaseConcurrentOperationCount( String nodeId )", "full_signature": "public static boolean decreaseConcurrentOperationCount( String nodeId )", "class_method_signature": "NodeMetaInfoProvider.decreaseConcurrentOperationCount( String nodeId )", "testcase": false, "constructor": false}], "file": "modules/hms-core/src/main/java/com/vmware/vrack/hms/node/NodeMetaInfoProvider.java"}, "focal_method": {"identifier": "decreaseConcurrentOperationCount", "parameters": "( String nodeId )", "modifiers": "public static", "return": "boolean", "body": "public static boolean decreaseConcurrentOperationCount( String nodeId )\n    {\n        boolean relasedLockForOperationOnNode = false;\n\n        // Get the lock for determining if the operation can be performed or not on the given node\n        nodeServiceLock.lock();\n\n        try\n        {\n            logger.debug( \"Got the lock descreasing operation count for node:\" + nodeId );\n\n            Integer currentOperationCount = (Integer) nodeMetaInfoMap.get( nodeId );\n\n            if ( currentOperationCount == null )\n            {\n                logger.warn( \"Strange!! Operation count for Node:\" + nodeId + \" is NOT present\" );\n\n            }\n            else if ( currentOperationCount > 0 )\n            {\n                --currentOperationCount;\n                logger.debug( \"Decreasing concurrent operation count for Node:\" + nodeId + \" to:\"\n                    + currentOperationCount );\n                nodeMetaInfoMap.put( nodeId, currentOperationCount );\n                relasedLockForOperationOnNode = true;\n            }\n            else\n            {\n                logger.warn( \"Not resetting Concurrent operation count for Node:\" + nodeId + \" as it is:\"\n                    + currentOperationCount );\n            }\n        }\n        catch ( Exception ex )\n        {\n            logger.warn( \"Error while decreasing for current operation count for Node:\" + nodeId, ex );\n        }\n        finally\n        {\n            nodeServiceLock.unlock();\n        }\n\n        return relasedLockForOperationOnNode;\n    }", "signature": "boolean decreaseConcurrentOperationCount( String nodeId )", "full_signature": "public static boolean decreaseConcurrentOperationCount( String nodeId )", "class_method_signature": "NodeMetaInfoProvider.decreaseConcurrentOperationCount( String nodeId )", "testcase": false, "constructor": false, "invocations": ["lock", "debug", "get", "warn", "debug", "put", "warn", "warn", "unlock"]}, "repository": {"repo_id": 61566208, "url": "https://github.com/vmware-archive/OHMS", "language": "Java", "is_fork": false, "fork_count": 6, "stargazer_count": 14, "size": 16092, "license": "licensed"}}