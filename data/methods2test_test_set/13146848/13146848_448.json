{"test_class": {"identifier": "ResourceDictionaryCleanerTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private ReadOnlyFilteredCOSStream imageStream;", "modifier": "private", "type": "ReadOnlyFilteredCOSStream", "declarator": "imageStream", "var_name": "imageStream"}, {"original_string": "private ReadOnlyFilteredCOSStream formStream;", "modifier": "private", "type": "ReadOnlyFilteredCOSStream", "declarator": "formStream", "var_name": "formStream"}, {"original_string": "private InUseFontDictionary inUseFont;", "modifier": "private", "type": "InUseFontDictionary", "declarator": "inUseFont", "var_name": "inUseFont"}, {"original_string": "private COSStream image;", "modifier": "private", "type": "COSStream", "declarator": "image", "var_name": "image"}, {"original_string": "private COSStream form;", "modifier": "private", "type": "COSStream", "declarator": "form", "var_name": "form"}], "file": "sejda-sambox/src/test/java/org/sejda/impl/sambox/component/optimization/ResourceDictionaryCleanerTest.java"}, "test_case": {"identifier": "clean", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void clean() {\n        PDDocument doc = new PDDocument();\n        COSDictionary rootRes = new COSDictionary();\n        COSDictionary rootXobjects = new COSDictionary();\n        rootXobjects.setItem(COSName.getPDFName(\"keepMe\"), imageStream);\n        rootXobjects.setItem(COSName.getPDFName(\"keepMeForm\"), formStream);\n        rootXobjects.setItem(COSName.getPDFName(\"discardMe\"), image);\n        rootXobjects.setItem(COSName.getPDFName(\"discardMeForm\"), form);\n        rootRes.setItem(COSName.XOBJECT, rootXobjects);\n        COSDictionary rootFonts = new COSDictionary();\n        rootFonts.setItem(COSName.getPDFName(\"keepMe\"), inUseFont);\n        rootFonts.setItem(COSName.getPDFName(\"discardMe\"), new COSDictionary());\n        rootRes.setItem(COSName.FONT, rootFonts);\n        COSDictionary pageRes = new COSDictionary();\n        COSDictionary pageXobjects = new COSDictionary();\n        pageXobjects.setItem(COSName.getPDFName(\"keepMe\"), imageStream);\n        pageXobjects.setItem(COSName.getPDFName(\"keepMeForm\"), formStream);\n        pageXobjects.setItem(COSName.getPDFName(\"discardMe\"), image);\n        pageXobjects.setItem(COSName.getPDFName(\"discardMeToo\"), image);\n        pageXobjects.setItem(COSName.getPDFName(\"discardMeForm\"), form);\n        pageRes.setItem(COSName.XOBJECT, pageXobjects);\n        COSDictionary pageFonts = new COSDictionary();\n        pageFonts.setItem(COSName.getPDFName(\"keepMe\"), inUseFont);\n        pageFonts.setItem(COSName.getPDFName(\"discardMe\"), new COSDictionary());\n        pageFonts.setItem(COSName.getPDFName(\"discardMeToo\"), new COSDictionary());\n        pageRes.setItem(COSName.FONT, pageFonts);\n        doc.getDocumentCatalog().getPages().getCOSObject().setItem(COSName.RESOURCES, rootRes);\n        PDPage page0 = new PDPage();\n        PDPage page1 = new PDPage();\n        page1.getCOSObject().setItem(COSName.RESOURCES, pageRes);\n        doc.getDocumentCatalog().getPages().add(page0);\n        doc.getDocumentCatalog().getPages().add(page1);\n        assertTrue(page0.getResources().isImageXObject(COSName.getPDFName(\"keepMe\")));\n        assertTrue(page0.getResources().isImageXObject(COSName.getPDFName(\"discardMe\")));\n        assertTrue(page0.getResources().isFormXObject(COSName.getPDFName(\"keepMeForm\")));\n        assertTrue(page0.getResources().isFormXObject(COSName.getPDFName(\"discardMeForm\")));\n        assertTrue(page1.getResources().isImageXObject(COSName.getPDFName(\"keepMe\")));\n        assertTrue(page1.getResources().isFormXObject(COSName.getPDFName(\"keepMeForm\")));\n        assertTrue(page1.getResources().isImageXObject(COSName.getPDFName(\"discardMe\")));\n        assertTrue(page1.getResources().isImageXObject(COSName.getPDFName(\"discardMeToo\")));\n        assertTrue(page1.getResources().isFormXObject(COSName.getPDFName(\"discardMeForm\")));\n        COSDictionary page0fonts = page0.getResources().getCOSObject().getDictionaryObject(COSName.FONT,\n                COSDictionary.class);\n        assertNotNull(page0fonts.getDictionaryObject(COSName.getPDFName(\"keepMe\")));\n        assertNotNull(page0fonts.getDictionaryObject(COSName.getPDFName(\"discardMe\")));\n        COSDictionary page1fonts = page1.getResources().getCOSObject().getDictionaryObject(COSName.FONT,\n                COSDictionary.class);\n        assertNotNull(page1fonts.getDictionaryObject(COSName.getPDFName(\"keepMe\")));\n        assertNotNull(page1fonts.getDictionaryObject(COSName.getPDFName(\"discardMe\")));\n        assertNotNull(page1fonts.getDictionaryObject(COSName.getPDFName(\"discardMeToo\")));\n        new ResourceDictionaryCleaner().accept(doc);\n        assertTrue(page0.getResources().isImageXObject(COSName.getPDFName(\"keepMe\")));\n        assertTrue(page0.getResources().isFormXObject(COSName.getPDFName(\"keepMeForm\")));\n        assertFalse(page0.getResources().isImageXObject(COSName.getPDFName(\"discardMe\")));\n        assertFalse(page0.getResources().isFormXObject(COSName.getPDFName(\"discardMeForm\")));\n        assertTrue(page1.getResources().isImageXObject(COSName.getPDFName(\"keepMe\")));\n        assertTrue(page1.getResources().isFormXObject(COSName.getPDFName(\"keepMeForm\")));\n        assertFalse(page1.getResources().isImageXObject(COSName.getPDFName(\"discardMe\")));\n        assertFalse(page1.getResources().isImageXObject(COSName.getPDFName(\"discardMeToo\")));\n        assertFalse(page1.getResources().isFormXObject(COSName.getPDFName(\"discardMeForm\")));\n        page0fonts = page0.getResources().getCOSObject().getDictionaryObject(COSName.FONT, COSDictionary.class);\n        assertNotNull(page0fonts.getDictionaryObject(COSName.getPDFName(\"keepMe\")));\n        assertNull(page0fonts.getDictionaryObject(COSName.getPDFName(\"discardMe\")));\n        page1fonts = page1.getResources().getCOSObject().getDictionaryObject(COSName.FONT, COSDictionary.class);\n        assertNotNull(page1fonts.getDictionaryObject(COSName.getPDFName(\"keepMe\")));\n        assertNull(page1fonts.getDictionaryObject(COSName.getPDFName(\"discardMe\")));\n        assertNull(page1fonts.getDictionaryObject(COSName.getPDFName(\"discardMeToo\")));\n    }", "signature": "void clean()", "full_signature": "@Test public void clean()", "class_method_signature": "ResourceDictionaryCleanerTest.clean()", "testcase": true, "constructor": false, "invocations": ["setItem", "getPDFName", "setItem", "getPDFName", "setItem", "getPDFName", "setItem", "getPDFName", "setItem", "setItem", "getPDFName", "setItem", "getPDFName", "setItem", "setItem", "getPDFName", "setItem", "getPDFName", "setItem", "getPDFName", "setItem", "getPDFName", "setItem", "getPDFName", "setItem", "setItem", "getPDFName", "setItem", "getPDFName", "setItem", "getPDFName", "setItem", "setItem", "getCOSObject", "getPages", "getDocumentCatalog", "setItem", "getCOSObject", "add", "getPages", "getDocumentCatalog", "add", "getPages", "getDocumentCatalog", "assertTrue", "isImageXObject", "getResources", "getPDFName", "assertTrue", "isImageXObject", "getResources", "getPDFName", "assertTrue", "isFormXObject", "getResources", "getPDFName", "assertTrue", "isFormXObject", "getResources", "getPDFName", "assertTrue", "isImageXObject", "getResources", "getPDFName", "assertTrue", "isFormXObject", "getResources", "getPDFName", "assertTrue", "isImageXObject", "getResources", "getPDFName", "assertTrue", "isImageXObject", "getResources", "getPDFName", "assertTrue", "isFormXObject", "getResources", "getPDFName", "getDictionaryObject", "getCOSObject", "getResources", "assertNotNull", "getDictionaryObject", "getPDFName", "assertNotNull", "getDictionaryObject", "getPDFName", "getDictionaryObject", "getCOSObject", "getResources", "assertNotNull", "getDictionaryObject", "getPDFName", "assertNotNull", "getDictionaryObject", "getPDFName", "assertNotNull", "getDictionaryObject", "getPDFName", "accept", "assertTrue", "isImageXObject", "getResources", "getPDFName", "assertTrue", "isFormXObject", "getResources", "getPDFName", "assertFalse", "isImageXObject", "getResources", "getPDFName", "assertFalse", "isFormXObject", "getResources", "getPDFName", "assertTrue", "isImageXObject", "getResources", "getPDFName", "assertTrue", "isFormXObject", "getResources", "getPDFName", "assertFalse", "isImageXObject", "getResources", "getPDFName", "assertFalse", "isImageXObject", "getResources", "getPDFName", "assertFalse", "isFormXObject", "getResources", "getPDFName", "getDictionaryObject", "getCOSObject", "getResources", "assertNotNull", "getDictionaryObject", "getPDFName", "assertNull", "getDictionaryObject", "getPDFName", "getDictionaryObject", "getCOSObject", "getResources", "assertNotNull", "getDictionaryObject", "getPDFName", "assertNull", "getDictionaryObject", "getPDFName", "assertNull", "getDictionaryObject", "getPDFName"]}, "focal_class": {"identifier": "ResourceDictionaryCleaner", "superclass": "", "interfaces": "implements Consumer<PDDocument>", "fields": [{"original_string": "private static final Logger LOG = LoggerFactory.getLogger(ResourceDictionaryCleaner.class);", "modifier": "private static final", "type": "Logger", "declarator": "LOG = LoggerFactory.getLogger(ResourceDictionaryCleaner.class)", "var_name": "LOG"}], "methods": [{"identifier": "accept", "parameters": "(PDDocument p)", "modifiers": "@Override public", "return": "void", "signature": "void accept(PDDocument p)", "full_signature": "@Override public void accept(PDDocument p)", "class_method_signature": "ResourceDictionaryCleaner.accept(PDDocument p)", "testcase": false, "constructor": false}, {"identifier": "clean", "parameters": "(PDPage page)", "modifiers": "public", "return": "void", "signature": "void clean(PDPage page)", "full_signature": "public void clean(PDPage page)", "class_method_signature": "ResourceDictionaryCleaner.clean(PDPage page)", "testcase": false, "constructor": false}, {"identifier": "clean", "parameters": "(Stream<COSDictionary> nodes)", "modifiers": "private", "return": "void", "signature": "void clean(Stream<COSDictionary> nodes)", "full_signature": "private void clean(Stream<COSDictionary> nodes)", "class_method_signature": "ResourceDictionaryCleaner.clean(Stream<COSDictionary> nodes)", "testcase": false, "constructor": false}, {"identifier": "cleanResources", "parameters": "(Set<COSDictionary> resources)", "modifiers": "private", "return": "void", "signature": "void cleanResources(Set<COSDictionary> resources)", "full_signature": "private void cleanResources(Set<COSDictionary> resources)", "class_method_signature": "ResourceDictionaryCleaner.cleanResources(Set<COSDictionary> resources)", "testcase": false, "constructor": false}, {"identifier": "cleanXObject", "parameters": "(Stream<COSDictionary> xobjects)", "modifiers": "private", "return": "void", "signature": "void cleanXObject(Stream<COSDictionary> xobjects)", "full_signature": "private void cleanXObject(Stream<COSDictionary> xobjects)", "class_method_signature": "ResourceDictionaryCleaner.cleanXObject(Stream<COSDictionary> xobjects)", "testcase": false, "constructor": false}, {"identifier": "cleanFonts", "parameters": "(Stream<COSDictionary> fonts)", "modifiers": "private", "return": "void", "signature": "void cleanFonts(Stream<COSDictionary> fonts)", "full_signature": "private void cleanFonts(Stream<COSDictionary> fonts)", "class_method_signature": "ResourceDictionaryCleaner.cleanFonts(Stream<COSDictionary> fonts)", "testcase": false, "constructor": false}], "file": "sejda-sambox/src/main/java/org/sejda/impl/sambox/component/optimization/ResourceDictionaryCleaner.java"}, "focal_method": {"identifier": "clean", "parameters": "(PDPage page)", "modifiers": "public", "return": "void", "body": "public void clean(PDPage page) {\n        clean(Stream.of(page.getCOSObject()));\n    }", "signature": "void clean(PDPage page)", "full_signature": "public void clean(PDPage page)", "class_method_signature": "ResourceDictionaryCleaner.clean(PDPage page)", "testcase": false, "constructor": false, "invocations": ["clean", "of", "getCOSObject"]}, "repository": {"repo_id": 13146848, "url": "https://github.com/torakiki/sejda", "language": "Java", "is_fork": false, "fork_count": 47, "stargazer_count": 316, "size": 59670, "license": "licensed"}}