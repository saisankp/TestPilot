{"test_class": {"identifier": "OvsdbConnectionHandlerTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private final ChannelHandlerContext ctx = mock(ChannelHandlerContext.class);", "modifier": "private final", "type": "ChannelHandlerContext", "declarator": "ctx = mock(ChannelHandlerContext.class)", "var_name": "ctx"}, {"original_string": "private final IdleStateEvent idleStateEvent = mock(IdleStateEvent.class);", "modifier": "private final", "type": "IdleStateEvent", "declarator": "idleStateEvent = mock(IdleStateEvent.class)", "var_name": "idleStateEvent"}, {"original_string": "private static final int MAX_READ_IDLE_BEFORE_CLOSE = PropertyManager\n      .getIntProperty(\"channel.read.idle.max\", 3);", "modifier": "private static final", "type": "int", "declarator": "MAX_READ_IDLE_BEFORE_CLOSE = PropertyManager\n      .getIntProperty(\"channel.read.idle.max\", 3)", "var_name": "MAX_READ_IDLE_BEFORE_CLOSE"}], "file": "ovsdb-client/src/test/java/com/vmware/ovsdb/netty/OvsdbConnectionHandlerTest.java"}, "test_case": {"identifier": "testChannelReadTimeout", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n  public void testChannelReadTimeout() {\n    OvsdbConnectionHandler heartBeatHandler = newOvsdbConnectionHandler();\n    for (int i = 0; i < MAX_READ_IDLE_BEFORE_CLOSE; i++) {\n      heartBeatHandler.userEventTriggered(ctx, idleStateEvent);\n    }\n    verify(ctx).close();\n  }", "signature": "void testChannelReadTimeout()", "full_signature": "@Test public void testChannelReadTimeout()", "class_method_signature": "OvsdbConnectionHandlerTest.testChannelReadTimeout()", "testcase": true, "constructor": false, "invocations": ["newOvsdbConnectionHandler", "userEventTriggered", "close", "verify"]}, "focal_class": {"identifier": "OvsdbConnectionHandler", "superclass": "extends ChannelInboundHandlerAdapter", "interfaces": "", "fields": [{"original_string": "private static final Logger LOGGER = LoggerFactory\n      .getLogger(MethodHandles.lookup().lookupClass());", "modifier": "private static final", "type": "Logger", "declarator": "LOGGER = LoggerFactory\n      .getLogger(MethodHandles.lookup().lookupClass())", "var_name": "LOGGER"}, {"original_string": "private static final int MAX_READ_IDLE_BEFORE_CLOSE = PropertyManager\n      .getIntProperty(\"channel.read.idle.max\", 3);", "modifier": "private static final", "type": "int", "declarator": "MAX_READ_IDLE_BEFORE_CLOSE = PropertyManager\n      .getIntProperty(\"channel.read.idle.max\", 3)", "var_name": "MAX_READ_IDLE_BEFORE_CLOSE"}, {"original_string": "private static final String HEARTBEAT_PREFIX = \"heartbeat-\";", "modifier": "private static final", "type": "String", "declarator": "HEARTBEAT_PREFIX = \"heartbeat-\"", "var_name": "HEARTBEAT_PREFIX"}, {"original_string": "private int heartbeatCount = 0;", "modifier": "private", "type": "int", "declarator": "heartbeatCount = 0", "var_name": "heartbeatCount"}, {"original_string": "private int readIdleCount = 0;", "modifier": "private", "type": "int", "declarator": "readIdleCount = 0", "var_name": "readIdleCount"}, {"original_string": "private final ConnectionCallback connectionCallback;", "modifier": "private final", "type": "ConnectionCallback", "declarator": "connectionCallback", "var_name": "connectionCallback"}, {"original_string": "private final CompletableFuture<OvsdbClient> ovsdbClientFuture;", "modifier": "private final", "type": "CompletableFuture<OvsdbClient>", "declarator": "ovsdbClientFuture", "var_name": "ovsdbClientFuture"}, {"original_string": "private final ScheduledExecutorService executorService;", "modifier": "private final", "type": "ScheduledExecutorService", "declarator": "executorService", "var_name": "executorService"}, {"original_string": "private OvsdbClient ovsdbClient;", "modifier": "private", "type": "OvsdbClient", "declarator": "ovsdbClient", "var_name": "ovsdbClient"}], "methods": [{"identifier": "OvsdbConnectionHandler", "parameters": "(\n      ConnectionCallback connectionCallback, ScheduledExecutorService executorService\n  )", "modifiers": "", "return": "", "signature": " OvsdbConnectionHandler(\n      ConnectionCallback connectionCallback, ScheduledExecutorService executorService\n  )", "full_signature": "  OvsdbConnectionHandler(\n      ConnectionCallback connectionCallback, ScheduledExecutorService executorService\n  )", "class_method_signature": "OvsdbConnectionHandler.OvsdbConnectionHandler(\n      ConnectionCallback connectionCallback, ScheduledExecutorService executorService\n  )", "testcase": false, "constructor": true}, {"identifier": "OvsdbConnectionHandler", "parameters": "(\n      CompletableFuture<OvsdbClient> ovsdbClientFuture, ScheduledExecutorService executorService\n  )", "modifiers": "", "return": "", "signature": " OvsdbConnectionHandler(\n      CompletableFuture<OvsdbClient> ovsdbClientFuture, ScheduledExecutorService executorService\n  )", "full_signature": "  OvsdbConnectionHandler(\n      CompletableFuture<OvsdbClient> ovsdbClientFuture, ScheduledExecutorService executorService\n  )", "class_method_signature": "OvsdbConnectionHandler.OvsdbConnectionHandler(\n      CompletableFuture<OvsdbClient> ovsdbClientFuture, ScheduledExecutorService executorService\n  )", "testcase": false, "constructor": true}, {"identifier": "OvsdbConnectionHandler", "parameters": "(\n      CompletableFuture<OvsdbClient> ovsdbClientFuture, ConnectionCallback connectionCallback,\n      ScheduledExecutorService executorService\n  )", "modifiers": "private", "return": "", "signature": " OvsdbConnectionHandler(\n      CompletableFuture<OvsdbClient> ovsdbClientFuture, ConnectionCallback connectionCallback,\n      ScheduledExecutorService executorService\n  )", "full_signature": "private  OvsdbConnectionHandler(\n      CompletableFuture<OvsdbClient> ovsdbClientFuture, ConnectionCallback connectionCallback,\n      ScheduledExecutorService executorService\n  )", "class_method_signature": "OvsdbConnectionHandler.OvsdbConnectionHandler(\n      CompletableFuture<OvsdbClient> ovsdbClientFuture, ConnectionCallback connectionCallback,\n      ScheduledExecutorService executorService\n  )", "testcase": false, "constructor": true}, {"identifier": "channelActive", "parameters": "(final ChannelHandlerContext ctx)", "modifiers": "@Override public", "return": "void", "signature": "void channelActive(final ChannelHandlerContext ctx)", "full_signature": "@Override public void channelActive(final ChannelHandlerContext ctx)", "class_method_signature": "OvsdbConnectionHandler.channelActive(final ChannelHandlerContext ctx)", "testcase": false, "constructor": false}, {"identifier": "channelRead", "parameters": "(ChannelHandlerContext ctx, Object msg)", "modifiers": "@Override public", "return": "void", "signature": "void channelRead(ChannelHandlerContext ctx, Object msg)", "full_signature": "@Override public void channelRead(ChannelHandlerContext ctx, Object msg)", "class_method_signature": "OvsdbConnectionHandler.channelRead(ChannelHandlerContext ctx, Object msg)", "testcase": false, "constructor": false}, {"identifier": "channelInactive", "parameters": "(ChannelHandlerContext ctx)", "modifiers": "@Override public", "return": "void", "signature": "void channelInactive(ChannelHandlerContext ctx)", "full_signature": "@Override public void channelInactive(ChannelHandlerContext ctx)", "class_method_signature": "OvsdbConnectionHandler.channelInactive(ChannelHandlerContext ctx)", "testcase": false, "constructor": false}, {"identifier": "userEventTriggered", "parameters": "(ChannelHandlerContext ctx, Object evt)", "modifiers": "@Override public", "return": "void", "signature": "void userEventTriggered(ChannelHandlerContext ctx, Object evt)", "full_signature": "@Override public void userEventTriggered(ChannelHandlerContext ctx, Object evt)", "class_method_signature": "OvsdbConnectionHandler.userEventTriggered(ChannelHandlerContext ctx, Object evt)", "testcase": false, "constructor": false}, {"identifier": "isHeartbeatResponse", "parameters": "(JsonNode msgNode)", "modifiers": "private", "return": "boolean", "signature": "boolean isHeartbeatResponse(JsonNode msgNode)", "full_signature": "private boolean isHeartbeatResponse(JsonNode msgNode)", "class_method_signature": "OvsdbConnectionHandler.isHeartbeatResponse(JsonNode msgNode)", "testcase": false, "constructor": false}, {"identifier": "getHeartbeatMsg", "parameters": "()", "modifiers": "private", "return": "String", "signature": "String getHeartbeatMsg()", "full_signature": "private String getHeartbeatMsg()", "class_method_signature": "OvsdbConnectionHandler.getHeartbeatMsg()", "testcase": false, "constructor": false}, {"identifier": "notifyConnection", "parameters": "(Channel channel)", "modifiers": "private", "return": "void", "signature": "void notifyConnection(Channel channel)", "full_signature": "private void notifyConnection(Channel channel)", "class_method_signature": "OvsdbConnectionHandler.notifyConnection(Channel channel)", "testcase": false, "constructor": false}], "file": "ovsdb-client/src/main/java/com/vmware/ovsdb/netty/OvsdbConnectionHandler.java"}, "focal_method": {"identifier": "userEventTriggered", "parameters": "(ChannelHandlerContext ctx, Object evt)", "modifiers": "@Override public", "return": "void", "body": "@Override\n  public void userEventTriggered(ChannelHandlerContext ctx, Object evt) {\n    if (evt instanceof IdleStateEvent) {\n      ++readIdleCount;\n      LOGGER.warn(\n          \"Read idle of {} for {} times\", ctx.channel(), readIdleCount);\n      if (readIdleCount >= MAX_READ_IDLE_BEFORE_CLOSE) {\n        LOGGER.warn(\"Read idle time reaches the threshold. Closing the channel to {}\",\n            ctx.channel());\n        ctx.close();\n      } else {\n        String heartbeatMsg = getHeartbeatMsg();\n        LOGGER.debug(\"Sending heartbeat {} to channel {}\", heartbeatMsg, ctx.channel());\n        ctx.writeAndFlush(heartbeatMsg);\n      }\n    } else {\n      ctx.fireUserEventTriggered(evt);\n    }\n  }", "signature": "void userEventTriggered(ChannelHandlerContext ctx, Object evt)", "full_signature": "@Override public void userEventTriggered(ChannelHandlerContext ctx, Object evt)", "class_method_signature": "OvsdbConnectionHandler.userEventTriggered(ChannelHandlerContext ctx, Object evt)", "testcase": false, "constructor": false, "invocations": ["warn", "channel", "warn", "channel", "close", "getHeartbeatMsg", "debug", "channel", "writeAndFlush", "fireUserEventTriggered"]}, "repository": {"repo_id": 125550262, "url": "https://github.com/vmware/ovsdb-client-library", "language": "Java", "is_fork": false, "fork_count": 5, "stargazer_count": 12, "size": 288, "license": "licensed"}}