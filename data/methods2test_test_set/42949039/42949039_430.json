{"test_class": {"identifier": "SearchIndexUpdateHelperTest", "superclass": "extends AbstractServiceTest", "interfaces": "", "fields": [{"original_string": "@Mock\n    private ConfigurationHelper configurationHelper;", "modifier": "@Mock\n    private", "type": "ConfigurationHelper", "declarator": "configurationHelper", "var_name": "configurationHelper"}, {"original_string": "@Mock\n    private JsonHelper jsonHelper;", "modifier": "@Mock\n    private", "type": "JsonHelper", "declarator": "jsonHelper", "var_name": "jsonHelper"}, {"original_string": "@Mock\n    private NotificationMessagePublishingService notificationMessagePublishingService;", "modifier": "@Mock\n    private", "type": "NotificationMessagePublishingService", "declarator": "notificationMessagePublishingService", "var_name": "notificationMessagePublishingService"}, {"original_string": "@InjectMocks\n    private SearchIndexUpdateHelper searchIndexUpdateHelper;", "modifier": "@InjectMocks\n    private", "type": "SearchIndexUpdateHelper", "declarator": "searchIndexUpdateHelper", "var_name": "searchIndexUpdateHelper"}], "file": "herd-code/herd-service/src/test/java/org/finra/herd/service/helper/SearchIndexUpdateHelperTest.java"}, "test_case": {"identifier": "testModifyTagsInSearchIndex", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testModifyTagsInSearchIndex()\n    {\n        // Create a tag entity list\n        TagEntity tagEntity = new TagEntity();\n        tagEntity.setId(1L);\n        List<TagEntity> tagEntityList = new ArrayList<>();\n        tagEntityList.add(tagEntity);\n\n        // Create a list of tag ids\n        List<Long> tagIds = new ArrayList<>();\n        tagIds.add(tagEntity.getId());\n\n        // Create a search index dto\n        SearchIndexUpdateDto searchIndexUpdateDto = new SearchIndexUpdateDto(MESSAGE_TYPE_TAG_UPDATE, tagIds, SEARCH_INDEX_UPDATE_TYPE_UPDATE);\n\n        // Mock the call to external methods\n        when(jsonHelper.objectToJson(searchIndexUpdateDto)).thenReturn(MESSAGE_TEXT);\n        when(configurationHelper.getProperty(ConfigurationValue.SEARCH_INDEX_UPDATE_JMS_LISTENER_ENABLED)).thenReturn(\"true\");\n        when(configurationHelper.getProperty(ConfigurationValue.SEARCH_INDEX_UPDATE_SQS_QUEUE_NAME)).thenReturn(AWS_SQS_QUEUE_NAME);\n\n        // Call the method under test\n        searchIndexUpdateHelper.modifyTagsInSearchIndex(tagEntityList, SEARCH_INDEX_UPDATE_TYPE_UPDATE);\n\n        // Verify the calls to external methods\n        verify(jsonHelper).objectToJson(searchIndexUpdateDto);\n        verify(configurationHelper).getProperty(ConfigurationValue.SEARCH_INDEX_UPDATE_JMS_LISTENER_ENABLED);\n        verify(configurationHelper).getProperty(ConfigurationValue.SEARCH_INDEX_UPDATE_SQS_QUEUE_NAME);\n        verify(notificationMessagePublishingService)\n            .addNotificationMessageToDatabaseQueue(new NotificationMessage(MessageTypeEntity.MessageEventTypes.SQS.name(), AWS_SQS_QUEUE_NAME, MESSAGE_TEXT, NO_MESSAGE_HEADERS));\n        verifyNoMoreInteractionsHelper();\n    }", "signature": "void testModifyTagsInSearchIndex()", "full_signature": "@Test public void testModifyTagsInSearchIndex()", "class_method_signature": "SearchIndexUpdateHelperTest.testModifyTagsInSearchIndex()", "testcase": true, "constructor": false, "invocations": ["setId", "add", "add", "getId", "thenReturn", "when", "objectToJson", "thenReturn", "when", "getProperty", "thenReturn", "when", "getProperty", "modifyTagsInSearchIndex", "objectToJson", "verify", "getProperty", "verify", "getProperty", "verify", "addNotificationMessageToDatabaseQueue", "verify", "name", "verifyNoMoreInteractionsHelper"]}, "focal_class": {"identifier": "SearchIndexUpdateHelper", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final Logger LOGGER = LoggerFactory.getLogger(SearchIndexUpdateHelper.class);", "modifier": "private static final", "type": "Logger", "declarator": "LOGGER = LoggerFactory.getLogger(SearchIndexUpdateHelper.class)", "var_name": "LOGGER"}, {"original_string": "@Autowired\n    private ConfigurationHelper configurationHelper;", "modifier": "@Autowired\n    private", "type": "ConfigurationHelper", "declarator": "configurationHelper", "var_name": "configurationHelper"}, {"original_string": "@Autowired\n    private JsonHelper jsonHelper;", "modifier": "@Autowired\n    private", "type": "JsonHelper", "declarator": "jsonHelper", "var_name": "jsonHelper"}, {"original_string": "@Autowired\n    private NotificationMessagePublishingService notificationMessagePublishingService;", "modifier": "@Autowired\n    private", "type": "NotificationMessagePublishingService", "declarator": "notificationMessagePublishingService", "var_name": "notificationMessagePublishingService"}, {"original_string": "@Autowired\n    private SystemJobHelper systemJobHelper;", "modifier": "@Autowired\n    private", "type": "SystemJobHelper", "declarator": "systemJobHelper", "var_name": "systemJobHelper"}], "methods": [{"identifier": "modifyBusinessObjectDefinitionInSearchIndex", "parameters": "(BusinessObjectDefinitionEntity businessObjectDefinitionEntity, String modificationType)", "modifiers": "public", "return": "void", "signature": "void modifyBusinessObjectDefinitionInSearchIndex(BusinessObjectDefinitionEntity businessObjectDefinitionEntity, String modificationType)", "full_signature": "public void modifyBusinessObjectDefinitionInSearchIndex(BusinessObjectDefinitionEntity businessObjectDefinitionEntity, String modificationType)", "class_method_signature": "SearchIndexUpdateHelper.modifyBusinessObjectDefinitionInSearchIndex(BusinessObjectDefinitionEntity businessObjectDefinitionEntity, String modificationType)", "testcase": false, "constructor": false}, {"identifier": "modifyBusinessObjectDefinitionsInSearchIndex", "parameters": "(List<BusinessObjectDefinitionEntity> businessObjectDefinitionEntityList, String modificationType)", "modifiers": "public", "return": "void", "signature": "void modifyBusinessObjectDefinitionsInSearchIndex(List<BusinessObjectDefinitionEntity> businessObjectDefinitionEntityList, String modificationType)", "full_signature": "public void modifyBusinessObjectDefinitionsInSearchIndex(List<BusinessObjectDefinitionEntity> businessObjectDefinitionEntityList, String modificationType)", "class_method_signature": "SearchIndexUpdateHelper.modifyBusinessObjectDefinitionsInSearchIndex(List<BusinessObjectDefinitionEntity> businessObjectDefinitionEntityList, String modificationType)", "testcase": false, "constructor": false}, {"identifier": "modifyTagInSearchIndex", "parameters": "(TagEntity tagEntity, String modificationType)", "modifiers": "public", "return": "void", "signature": "void modifyTagInSearchIndex(TagEntity tagEntity, String modificationType)", "full_signature": "public void modifyTagInSearchIndex(TagEntity tagEntity, String modificationType)", "class_method_signature": "SearchIndexUpdateHelper.modifyTagInSearchIndex(TagEntity tagEntity, String modificationType)", "testcase": false, "constructor": false}, {"identifier": "modifyTagsInSearchIndex", "parameters": "(List<TagEntity> tagEntityList, String modificationType)", "modifiers": "public", "return": "void", "signature": "void modifyTagsInSearchIndex(List<TagEntity> tagEntityList, String modificationType)", "full_signature": "public void modifyTagsInSearchIndex(List<TagEntity> tagEntityList, String modificationType)", "class_method_signature": "SearchIndexUpdateHelper.modifyTagsInSearchIndex(List<TagEntity> tagEntityList, String modificationType)", "testcase": false, "constructor": false}, {"identifier": "getSqsQueueName", "parameters": "()", "modifiers": "private", "return": "String", "signature": "String getSqsQueueName()", "full_signature": "private String getSqsQueueName()", "class_method_signature": "SearchIndexUpdateHelper.getSqsQueueName()", "testcase": false, "constructor": false}, {"identifier": "processMessage", "parameters": "(String messageText)", "modifiers": "private", "return": "void", "signature": "void processMessage(String messageText)", "full_signature": "private void processMessage(String messageText)", "class_method_signature": "SearchIndexUpdateHelper.processMessage(String messageText)", "testcase": false, "constructor": false}], "file": "herd-code/herd-service/src/main/java/org/finra/herd/service/helper/SearchIndexUpdateHelper.java"}, "focal_method": {"identifier": "modifyTagsInSearchIndex", "parameters": "(List<TagEntity> tagEntityList, String modificationType)", "modifiers": "public", "return": "void", "body": "public void modifyTagsInSearchIndex(List<TagEntity> tagEntityList, String modificationType)\n    {\n        List<Long> tagIds = new ArrayList<>();\n        tagEntityList.forEach(tagEntity -> tagIds.add(tagEntity.getId()));\n        processMessage(jsonHelper.objectToJson(new SearchIndexUpdateDto(MESSAGE_TYPE_TAG_UPDATE, tagIds, modificationType)));\n    }", "signature": "void modifyTagsInSearchIndex(List<TagEntity> tagEntityList, String modificationType)", "full_signature": "public void modifyTagsInSearchIndex(List<TagEntity> tagEntityList, String modificationType)", "class_method_signature": "SearchIndexUpdateHelper.modifyTagsInSearchIndex(List<TagEntity> tagEntityList, String modificationType)", "testcase": false, "constructor": false, "invocations": ["forEach", "add", "getId", "processMessage", "objectToJson"]}, "repository": {"repo_id": 42949039, "url": "https://github.com/FINRAOS/herd", "language": "Java", "is_fork": false, "fork_count": 36, "stargazer_count": 120, "size": 205797, "license": "licensed"}}