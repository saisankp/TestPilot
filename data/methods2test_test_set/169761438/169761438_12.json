{"test_class": {"identifier": "Oadr20bVENEiEventServiceTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final Properties PROPERTIES = new Properties();", "modifier": "private static final", "type": "Properties", "declarator": "PROPERTIES = new Properties()", "var_name": "PROPERTIES"}, {"original_string": "private static final VtnSessionConfiguration VTN_SOURCE;", "modifier": "private static final", "type": "VtnSessionConfiguration", "declarator": "VTN_SOURCE", "var_name": "VTN_SOURCE"}, {"original_string": "@Resource\n\tprivate Oadr20bVENEiEventService oadr20bVENEiEventService;", "modifier": "@Resource\n\tprivate", "type": "Oadr20bVENEiEventService", "declarator": "oadr20bVENEiEventService", "var_name": "oadr20bVENEiEventService"}], "file": "OpenADRServerVEN20b/src/test/java/com/avob/openadr/server/oadr20b/ven/service/Oadr20bVENEiEventServiceTest.java"}, "test_case": {"identifier": "removeAllTest", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n\tpublic void removeAllTest() {\n\t\tString eventId = \"event1\";\n\t\tOadrEvent createOadrEvent = createOadrEvent(eventId, 0L);\n\t\toadr20bVENEiEventService.saveOadrEvent(VTN_SOURCE, createOadrEvent);\n\n\t\teventId = \"event2\";\n\t\tcreateOadrEvent = createOadrEvent(eventId, 0L);\n\t\toadr20bVENEiEventService.saveOadrEvent(VTN_SOURCE, createOadrEvent);\n\n\t\teventId = \"event3\";\n\t\tcreateOadrEvent = createOadrEvent(eventId, 0L);\n\t\toadr20bVENEiEventService.saveOadrEvent(VTN_SOURCE, createOadrEvent);\n\n\t\tString[] eventIdList = { \"event2\", \"event3\" };\n\t\toadr20bVENEiEventService.removeAll(VTN_SOURCE, Arrays.asList(eventIdList));\n\t\tassertEquals(1, oadr20bVENEiEventService.getOadrEvents(VTN_SOURCE).size());\n\t\tassertNotNull(oadr20bVENEiEventService.getOadrEvents(VTN_SOURCE).get(\"event1\"));\n\t\toadr20bVENEiEventService.clearOadrEvents();\n\t}", "signature": "void removeAllTest()", "full_signature": "@Test public void removeAllTest()", "class_method_signature": "Oadr20bVENEiEventServiceTest.removeAllTest()", "testcase": true, "constructor": false, "invocations": ["createOadrEvent", "saveOadrEvent", "createOadrEvent", "saveOadrEvent", "createOadrEvent", "saveOadrEvent", "removeAll", "asList", "assertEquals", "size", "getOadrEvents", "assertNotNull", "get", "getOadrEvents", "clearOadrEvents"]}, "focal_class": {"identifier": "Oadr20bVENEiEventService", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final long DISTRIBUTE_EVENT_RESPONSE_DELAY_SECONDS = 1;", "modifier": "private static final", "type": "long", "declarator": "DISTRIBUTE_EVENT_RESPONSE_DELAY_SECONDS = 1", "var_name": "DISTRIBUTE_EVENT_RESPONSE_DELAY_SECONDS"}, {"original_string": "private static final Logger LOGGER = LoggerFactory.getLogger(Oadr20bVENEiEventService.class);", "modifier": "private static final", "type": "Logger", "declarator": "LOGGER = LoggerFactory.getLogger(Oadr20bVENEiEventService.class)", "var_name": "LOGGER"}, {"original_string": "@Resource\n\tprivate PayloadHandler payloadHandler;", "modifier": "@Resource\n\tprivate", "type": "PayloadHandler", "declarator": "payloadHandler", "var_name": "payloadHandler"}, {"original_string": "@Resource\n\tprivate MultiVtnConfig multiVtnConfig;", "modifier": "@Resource\n\tprivate", "type": "MultiVtnConfig", "declarator": "multiVtnConfig", "var_name": "multiVtnConfig"}, {"original_string": "@Resource\n\tprivate ScheduledExecutorService scheduledExecutorService;", "modifier": "@Resource\n\tprivate", "type": "ScheduledExecutorService", "declarator": "scheduledExecutorService", "var_name": "scheduledExecutorService"}, {"original_string": "protected List<Oadr20bVENEiEventServiceListener> listeners;", "modifier": "protected", "type": "List<Oadr20bVENEiEventServiceListener>", "declarator": "listeners", "var_name": "listeners"}, {"original_string": "private Map<String, Map<String, OadrEvent>> oadrEvents = new ConcurrentHashMap<>();", "modifier": "private", "type": "Map<String, Map<String, OadrEvent>>", "declarator": "oadrEvents = new ConcurrentHashMap<>()", "var_name": "oadrEvents"}, {"original_string": "private Map<String, Map<String, List<ScheduledFuture<?>>>> scheduledTask = new ConcurrentHashMap<>();", "modifier": "private", "type": "Map<String, Map<String, List<ScheduledFuture<?>>>>", "declarator": "scheduledTask = new ConcurrentHashMap<>()", "var_name": "scheduledTask"}], "methods": [{"identifier": "applyPreActiveOadrEventScheduling", "parameters": "(VtnSessionConfiguration vtnConfiguration, long now,\n\t\t\tOadrEvent event)", "modifiers": "private", "return": "void", "signature": "void applyPreActiveOadrEventScheduling(VtnSessionConfiguration vtnConfiguration, long now,\n\t\t\tOadrEvent event)", "full_signature": "private void applyPreActiveOadrEventScheduling(VtnSessionConfiguration vtnConfiguration, long now,\n\t\t\tOadrEvent event)", "class_method_signature": "Oadr20bVENEiEventService.applyPreActiveOadrEventScheduling(VtnSessionConfiguration vtnConfiguration, long now,\n\t\t\tOadrEvent event)", "testcase": false, "constructor": false}, {"identifier": "applyActiveOadrEventScheduling", "parameters": "(VtnSessionConfiguration vtnConfiguration, long now, OadrEvent event)", "modifiers": "private", "return": "void", "signature": "void applyActiveOadrEventScheduling(VtnSessionConfiguration vtnConfiguration, long now, OadrEvent event)", "full_signature": "private void applyActiveOadrEventScheduling(VtnSessionConfiguration vtnConfiguration, long now, OadrEvent event)", "class_method_signature": "Oadr20bVENEiEventService.applyActiveOadrEventScheduling(VtnSessionConfiguration vtnConfiguration, long now, OadrEvent event)", "testcase": false, "constructor": false}, {"identifier": "applyOadrEventScheduling", "parameters": "(VtnSessionConfiguration vtnConfiguration, OadrEvent event)", "modifiers": "private", "return": "void", "signature": "void applyOadrEventScheduling(VtnSessionConfiguration vtnConfiguration, OadrEvent event)", "full_signature": "private void applyOadrEventScheduling(VtnSessionConfiguration vtnConfiguration, OadrEvent event)", "class_method_signature": "Oadr20bVENEiEventService.applyOadrEventScheduling(VtnSessionConfiguration vtnConfiguration, OadrEvent event)", "testcase": false, "constructor": false}, {"identifier": "processOadrEvent", "parameters": "(VtnSessionConfiguration vtnConfiguration, String requestId,\n\t\t\tOadrEvent event)", "modifiers": "private", "return": "Optional<EventResponse>", "signature": "Optional<EventResponse> processOadrEvent(VtnSessionConfiguration vtnConfiguration, String requestId,\n\t\t\tOadrEvent event)", "full_signature": "private Optional<EventResponse> processOadrEvent(VtnSessionConfiguration vtnConfiguration, String requestId,\n\t\t\tOadrEvent event)", "class_method_signature": "Oadr20bVENEiEventService.processOadrEvent(VtnSessionConfiguration vtnConfiguration, String requestId,\n\t\t\tOadrEvent event)", "testcase": false, "constructor": false}, {"identifier": "oadrDistributeEvent", "parameters": "(VtnSessionConfiguration vtnConfiguration, OadrDistributeEventType event)", "modifiers": "public", "return": "OadrResponseType", "signature": "OadrResponseType oadrDistributeEvent(VtnSessionConfiguration vtnConfiguration, OadrDistributeEventType event)", "full_signature": "public OadrResponseType oadrDistributeEvent(VtnSessionConfiguration vtnConfiguration, OadrDistributeEventType event)", "class_method_signature": "Oadr20bVENEiEventService.oadrDistributeEvent(VtnSessionConfiguration vtnConfiguration, OadrDistributeEventType event)", "testcase": false, "constructor": false}, {"identifier": "isKnownEvent", "parameters": "(VtnSessionConfiguration vtnConfiguration, OadrEvent event)", "modifiers": "public", "return": "boolean", "signature": "boolean isKnownEvent(VtnSessionConfiguration vtnConfiguration, OadrEvent event)", "full_signature": "public boolean isKnownEvent(VtnSessionConfiguration vtnConfiguration, OadrEvent event)", "class_method_signature": "Oadr20bVENEiEventService.isKnownEvent(VtnSessionConfiguration vtnConfiguration, OadrEvent event)", "testcase": false, "constructor": false}, {"identifier": "isUpdatedEvent", "parameters": "(VtnSessionConfiguration vtnConfiguration, String requestId, OadrEvent event)", "modifiers": "public", "return": "boolean", "signature": "boolean isUpdatedEvent(VtnSessionConfiguration vtnConfiguration, String requestId, OadrEvent event)", "full_signature": "public boolean isUpdatedEvent(VtnSessionConfiguration vtnConfiguration, String requestId, OadrEvent event)", "class_method_signature": "Oadr20bVENEiEventService.isUpdatedEvent(VtnSessionConfiguration vtnConfiguration, String requestId, OadrEvent event)", "testcase": false, "constructor": false}, {"identifier": "saveOadrEvent", "parameters": "(VtnSessionConfiguration vtnConfiguration, OadrEvent event)", "modifiers": "public", "return": "void", "signature": "void saveOadrEvent(VtnSessionConfiguration vtnConfiguration, OadrEvent event)", "full_signature": "public void saveOadrEvent(VtnSessionConfiguration vtnConfiguration, OadrEvent event)", "class_method_signature": "Oadr20bVENEiEventService.saveOadrEvent(VtnSessionConfiguration vtnConfiguration, OadrEvent event)", "testcase": false, "constructor": false}, {"identifier": "removeAll", "parameters": "(VtnSessionConfiguration vtnConfiguration, List<String> eventIdList)", "modifiers": "public", "return": "void", "signature": "void removeAll(VtnSessionConfiguration vtnConfiguration, List<String> eventIdList)", "full_signature": "public void removeAll(VtnSessionConfiguration vtnConfiguration, List<String> eventIdList)", "class_method_signature": "Oadr20bVENEiEventService.removeAll(VtnSessionConfiguration vtnConfiguration, List<String> eventIdList)", "testcase": false, "constructor": false}, {"identifier": "getOadrEvents", "parameters": "(VtnSessionConfiguration vtnConfiguration)", "modifiers": "public", "return": "Map<String, OadrEvent>", "signature": "Map<String, OadrEvent> getOadrEvents(VtnSessionConfiguration vtnConfiguration)", "full_signature": "public Map<String, OadrEvent> getOadrEvents(VtnSessionConfiguration vtnConfiguration)", "class_method_signature": "Oadr20bVENEiEventService.getOadrEvents(VtnSessionConfiguration vtnConfiguration)", "testcase": false, "constructor": false}, {"identifier": "putOadrEvents", "parameters": "(VtnSessionConfiguration vtnConfiguration, OadrEvent event)", "modifiers": "public", "return": "void", "signature": "void putOadrEvents(VtnSessionConfiguration vtnConfiguration, OadrEvent event)", "full_signature": "public void putOadrEvents(VtnSessionConfiguration vtnConfiguration, OadrEvent event)", "class_method_signature": "Oadr20bVENEiEventService.putOadrEvents(VtnSessionConfiguration vtnConfiguration, OadrEvent event)", "testcase": false, "constructor": false}, {"identifier": "getScheduledTask", "parameters": "(VtnSessionConfiguration vtnConfiguration, String eventId)", "modifiers": "public", "return": "List<ScheduledFuture<?>>", "signature": "List<ScheduledFuture<?>> getScheduledTask(VtnSessionConfiguration vtnConfiguration, String eventId)", "full_signature": "public List<ScheduledFuture<?>> getScheduledTask(VtnSessionConfiguration vtnConfiguration, String eventId)", "class_method_signature": "Oadr20bVENEiEventService.getScheduledTask(VtnSessionConfiguration vtnConfiguration, String eventId)", "testcase": false, "constructor": false}, {"identifier": "addScheduledTask", "parameters": "(VtnSessionConfiguration vtnConfiguration, String eventId, ScheduledFuture<?> task)", "modifiers": "public", "return": "void", "signature": "void addScheduledTask(VtnSessionConfiguration vtnConfiguration, String eventId, ScheduledFuture<?> task)", "full_signature": "public void addScheduledTask(VtnSessionConfiguration vtnConfiguration, String eventId, ScheduledFuture<?> task)", "class_method_signature": "Oadr20bVENEiEventService.addScheduledTask(VtnSessionConfiguration vtnConfiguration, String eventId, ScheduledFuture<?> task)", "testcase": false, "constructor": false}, {"identifier": "cancelScheduledTask", "parameters": "(VtnSessionConfiguration vtnConfiguration, String eventId)", "modifiers": "private", "return": "void", "signature": "void cancelScheduledTask(VtnSessionConfiguration vtnConfiguration, String eventId)", "full_signature": "private void cancelScheduledTask(VtnSessionConfiguration vtnConfiguration, String eventId)", "class_method_signature": "Oadr20bVENEiEventService.cancelScheduledTask(VtnSessionConfiguration vtnConfiguration, String eventId)", "testcase": false, "constructor": false}, {"identifier": "findMissingEventID", "parameters": "(VtnSessionConfiguration vtnConfiguration, List<String> retrievedIdList)", "modifiers": "public", "return": "List<String>", "signature": "List<String> findMissingEventID(VtnSessionConfiguration vtnConfiguration, List<String> retrievedIdList)", "full_signature": "public List<String> findMissingEventID(VtnSessionConfiguration vtnConfiguration, List<String> retrievedIdList)", "class_method_signature": "Oadr20bVENEiEventService.findMissingEventID(VtnSessionConfiguration vtnConfiguration, List<String> retrievedIdList)", "testcase": false, "constructor": false}, {"identifier": "clearOadrEvents", "parameters": "()", "modifiers": "public", "return": "void", "signature": "void clearOadrEvents()", "full_signature": "public void clearOadrEvents()", "class_method_signature": "Oadr20bVENEiEventService.clearOadrEvents()", "testcase": false, "constructor": false}, {"identifier": "addListener", "parameters": "(Oadr20bVENEiEventServiceListener listener)", "modifiers": "public", "return": "void", "signature": "void addListener(Oadr20bVENEiEventServiceListener listener)", "full_signature": "public void addListener(Oadr20bVENEiEventServiceListener listener)", "class_method_signature": "Oadr20bVENEiEventService.addListener(Oadr20bVENEiEventServiceListener listener)", "testcase": false, "constructor": false}, {"identifier": "handle", "parameters": "(VtnSessionConfiguration multiConfig, String raw, OadrPayload oadrPayload)", "modifiers": "public", "return": "Object", "signature": "Object handle(VtnSessionConfiguration multiConfig, String raw, OadrPayload oadrPayload)", "full_signature": "public Object handle(VtnSessionConfiguration multiConfig, String raw, OadrPayload oadrPayload)", "class_method_signature": "Oadr20bVENEiEventService.handle(VtnSessionConfiguration multiConfig, String raw, OadrPayload oadrPayload)", "testcase": false, "constructor": false}, {"identifier": "request", "parameters": "(String username, String payload)", "modifiers": "public", "return": "String", "signature": "String request(String username, String payload)", "full_signature": "public String request(String username, String payload)", "class_method_signature": "Oadr20bVENEiEventService.request(String username, String payload)", "testcase": false, "constructor": false}], "file": "OpenADRServerVEN20b/src/main/java/com/avob/openadr/server/oadr20b/ven/service/Oadr20bVENEiEventService.java"}, "focal_method": {"identifier": "removeAll", "parameters": "(VtnSessionConfiguration vtnConfiguration, List<String> eventIdList)", "modifiers": "public", "return": "void", "body": "public void removeAll(VtnSessionConfiguration vtnConfiguration, List<String> eventIdList) {\n\t\teventIdList.forEach(key -> {\n\t\t\tOadrEvent oadrEvent = oadrEvents.get(vtnConfiguration.getVtnId()).get(key);\n\t\t\tif (oadrEvent != null) {\n\t\t\t\tif (listeners != null) {\n\t\t\t\t\tlisteners.forEach(listener -> listener.onDeleteEvent(vtnConfiguration, oadrEvent));\n\t\t\t\t}\n\t\t\t\toadrEvents.get(vtnConfiguration.getVtnId()).remove(key);\n\t\t\t}\n\n\t\t});\n\t}", "signature": "void removeAll(VtnSessionConfiguration vtnConfiguration, List<String> eventIdList)", "full_signature": "public void removeAll(VtnSessionConfiguration vtnConfiguration, List<String> eventIdList)", "class_method_signature": "Oadr20bVENEiEventService.removeAll(VtnSessionConfiguration vtnConfiguration, List<String> eventIdList)", "testcase": false, "constructor": false, "invocations": ["forEach", "get", "get", "getVtnId", "forEach", "onDeleteEvent", "remove", "get", "getVtnId"]}, "repository": {"repo_id": 169761438, "url": "https://github.com/avob/OpenADR", "language": "Java", "is_fork": false, "fork_count": 6, "stargazer_count": 8, "size": 55915, "license": "licensed"}}