{"test_class": {"identifier": "IncrementalWindowCountTest", "superclass": "", "interfaces": "", "fields": [], "file": "contrib/src/test/java/macrobase/analysis/transform/aggregate/IncrementalWindowCountTest.java"}, "test_case": {"identifier": "testWindowUpdate", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testWindowUpdate() throws Exception {\n        List<Datum> data = new ArrayList<>();\n        for (int i = 0; i < 20; ++i) {\n            Datum d = TestUtils.createTimeDatum(i, i);\n            data.add(d);\n        }\n\n        MacroBaseConf conf = new MacroBaseConf().set(MacroBaseConf.TIME_COLUMN, 0);\n        IncrementalWindowCount windowCount = new IncrementalWindowCount(conf);\n        // First window\n        Datum count = windowCount.updateWindow(data.subList(0, 10), new ArrayList<>());\n        assert(count.metrics().getEntry(1) == 10);\n        // Update window\n        count = windowCount.updateWindow(data.subList(10, 11), data.subList(0, 1));\n        assert(count.metrics().getEntry(1) == 10);\n        count = windowCount.updateWindow(data.subList(11, 20), data.subList(1, 5));\n        assert(count.metrics().getEntry(1) == 15);\n        count = windowCount.updateWindow(new ArrayList<>(), data.subList(5, 10));\n        assert(count.metrics().getEntry(1) == 10);\n    }", "signature": "void testWindowUpdate()", "full_signature": "@Test public void testWindowUpdate()", "class_method_signature": "IncrementalWindowCountTest.testWindowUpdate()", "testcase": true, "constructor": false, "invocations": ["createTimeDatum", "add", "set", "updateWindow", "subList", "getEntry", "metrics", "updateWindow", "subList", "subList", "getEntry", "metrics", "updateWindow", "subList", "subList", "getEntry", "metrics", "updateWindow", "subList", "getEntry", "metrics"]}, "focal_class": {"identifier": "IncrementalWindowCount", "superclass": "extends IncrementalWindowAggregate", "interfaces": "", "fields": [{"original_string": "private int count = 0;", "modifier": "private", "type": "int", "declarator": "count = 0", "var_name": "count"}], "methods": [{"identifier": "IncrementalWindowCount", "parameters": "(MacroBaseConf conf)", "modifiers": "public", "return": "", "signature": " IncrementalWindowCount(MacroBaseConf conf)", "full_signature": "public  IncrementalWindowCount(MacroBaseConf conf)", "class_method_signature": "IncrementalWindowCount.IncrementalWindowCount(MacroBaseConf conf)", "testcase": false, "constructor": true}, {"identifier": "updateWindow", "parameters": "(List<Datum> new_data, List<Datum> old_data)", "modifiers": "public", "return": "Datum", "signature": "Datum updateWindow(List<Datum> new_data, List<Datum> old_data)", "full_signature": "public Datum updateWindow(List<Datum> new_data, List<Datum> old_data)", "class_method_signature": "IncrementalWindowCount.updateWindow(List<Datum> new_data, List<Datum> old_data)", "testcase": false, "constructor": false}], "file": "contrib/src/main/java/macrobase/analysis/transform/aggregate/IncrementalWindowCount.java"}, "focal_method": {"identifier": "updateWindow", "parameters": "(List<Datum> new_data, List<Datum> old_data)", "modifiers": "public", "return": "Datum", "body": "public Datum updateWindow(List<Datum> new_data, List<Datum> old_data) {\n        if (new_data.isEmpty() && old_data.isEmpty())\n            return currWindow;\n\n        if (currWindow == null) {\n            dim = new_data.get(0).metrics().getDimension();\n        }\n        count += new_data.size() - old_data.size();\n        RealVector results = new ArrayRealVector(dim);\n        results.set(count);\n        currWindow = new Datum(new ArrayList<>(), results);\n        return currWindow;\n    }", "signature": "Datum updateWindow(List<Datum> new_data, List<Datum> old_data)", "full_signature": "public Datum updateWindow(List<Datum> new_data, List<Datum> old_data)", "class_method_signature": "IncrementalWindowCount.updateWindow(List<Datum> new_data, List<Datum> old_data)", "testcase": false, "constructor": false, "invocations": ["isEmpty", "isEmpty", "getDimension", "metrics", "get", "size", "size", "set"]}, "repository": {"repo_id": 48199522, "url": "https://github.com/stanford-futuredata/macrobase", "language": "Java", "is_fork": false, "fork_count": 116, "stargazer_count": 606, "size": 27614, "license": "licensed"}}