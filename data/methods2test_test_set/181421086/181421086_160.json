{"test_class": {"identifier": "OFConnectionTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final Logger logger = LoggerFactory.getLogger(OFConnectionTest.class);", "modifier": "private static final", "type": "Logger", "declarator": "logger = LoggerFactory.getLogger(OFConnectionTest.class)", "var_name": "logger"}, {"original_string": "private OFFactory factory;", "modifier": "private", "type": "OFFactory", "declarator": "factory", "var_name": "factory"}, {"original_string": "private Channel channel;", "modifier": "private", "type": "Channel", "declarator": "channel", "var_name": "channel"}, {"original_string": "private OFConnection conn;", "modifier": "private", "type": "OFConnection", "declarator": "conn", "var_name": "conn"}, {"original_string": "private DatapathId switchId;", "modifier": "private", "type": "DatapathId", "declarator": "switchId", "var_name": "switchId"}, {"original_string": "private Timer timer;", "modifier": "private", "type": "Timer", "declarator": "timer", "var_name": "timer"}, {"original_string": "private TestEventLoop eventLoop;", "modifier": "private", "type": "TestEventLoop", "declarator": "eventLoop", "var_name": "eventLoop"}], "file": "src/agents/apps/floodlight/floodlight-1.2/src/test/java/net/floodlightcontroller/core/internal/OFConnectionTest.java"}, "test_case": {"identifier": "testSingleMessageWrite", "parameters": "()", "modifiers": "@Test(timeout = 5000) public", "return": "void", "body": "@Test(timeout = 5000)\n    public void testSingleMessageWrite() throws InterruptedException, ExecutionException {\n        Capture<List<OFMessage>> cMsgList = prepareChannelForWriteList();\n\n        OFPacketOut packetOut = factory.buildPacketOut()\n                .setData(new byte[] { 0x01, 0x02, 0x03, 0x04 })\n                .setActions(ImmutableList.<OFAction>of( factory.actions().output(OFPort.of(1), 0)))\n                .build();\n        \n        conn.write(packetOut);\n        eventLoop.runTasks();\n        assertThat(\"Write should have been flushed\", cMsgList.hasCaptured(), equalTo(true));\n        \n        List<OFMessage> value = cMsgList.getValue();\n        logger.info(\"Captured channel write: \"+value);\n        assertThat(\"Should have captured MsgList\", cMsgList.getValue(),\n                Matchers.<OFMessage> contains(packetOut));\n    }", "signature": "void testSingleMessageWrite()", "full_signature": "@Test(timeout = 5000) public void testSingleMessageWrite()", "class_method_signature": "OFConnectionTest.testSingleMessageWrite()", "testcase": true, "constructor": false, "invocations": ["prepareChannelForWriteList", "build", "setActions", "setData", "buildPacketOut", "of", "output", "actions", "of", "write", "runTasks", "assertThat", "hasCaptured", "equalTo", "getValue", "info", "assertThat", "getValue", "contains"]}, "focal_class": {"identifier": "OFConnection", "superclass": "", "interfaces": "implements IOFConnection, IOFConnectionBackend", "fields": [{"original_string": "private static final Logger logger = LoggerFactory.getLogger(OFConnection.class);", "modifier": "private static final", "type": "Logger", "declarator": "logger = LoggerFactory.getLogger(OFConnection.class)", "var_name": "logger"}, {"original_string": "private final DatapathId dpid;", "modifier": "private final", "type": "DatapathId", "declarator": "dpid", "var_name": "dpid"}, {"original_string": "private final OFFactory factory;", "modifier": "private final", "type": "OFFactory", "declarator": "factory", "var_name": "factory"}, {"original_string": "private final Channel channel;", "modifier": "private final", "type": "Channel", "declarator": "channel", "var_name": "channel"}, {"original_string": "private final OFAuxId auxId;", "modifier": "private final", "type": "OFAuxId", "declarator": "auxId", "var_name": "auxId"}, {"original_string": "private final Timer timer;", "modifier": "private final", "type": "Timer", "declarator": "timer", "var_name": "timer"}, {"original_string": "private final Date connectedSince;", "modifier": "private final", "type": "Date", "declarator": "connectedSince", "var_name": "connectedSince"}, {"original_string": "private final Map<Long, Deliverable<?>> xidDeliverableMap;", "modifier": "private final", "type": "Map<Long, Deliverable<?>>", "declarator": "xidDeliverableMap", "var_name": "xidDeliverableMap"}, {"original_string": "private static final long DELIVERABLE_TIME_OUT = 60;", "modifier": "private static final", "type": "long", "declarator": "DELIVERABLE_TIME_OUT = 60", "var_name": "DELIVERABLE_TIME_OUT"}, {"original_string": "private static final TimeUnit DELIVERABLE_TIME_OUT_UNIT = TimeUnit.SECONDS;", "modifier": "private static final", "type": "TimeUnit", "declarator": "DELIVERABLE_TIME_OUT_UNIT = TimeUnit.SECONDS", "var_name": "DELIVERABLE_TIME_OUT_UNIT"}, {"original_string": "private final OFConnectionCounters counters;", "modifier": "private final", "type": "OFConnectionCounters", "declarator": "counters", "var_name": "counters"}, {"original_string": "private IOFConnectionListener listener;", "modifier": "private", "type": "IOFConnectionListener", "declarator": "listener", "var_name": "listener"}, {"original_string": "private volatile U64 latency;", "modifier": "private volatile", "type": "U64", "declarator": "latency", "var_name": "latency"}], "methods": [{"identifier": "OFConnection", "parameters": "(@Nonnull DatapathId dpid,\n\t\t\t@Nonnull OFFactory factory,\n\t\t\t@Nonnull Channel channel,\n\t\t\t@Nonnull OFAuxId auxId,\n\t\t\t@Nonnull IDebugCounterService debugCounters,\n\t\t\t@Nonnull Timer timer)", "modifiers": "public", "return": "", "signature": " OFConnection(@Nonnull DatapathId dpid,\n\t\t\t@Nonnull OFFactory factory,\n\t\t\t@Nonnull Channel channel,\n\t\t\t@Nonnull OFAuxId auxId,\n\t\t\t@Nonnull IDebugCounterService debugCounters,\n\t\t\t@Nonnull Timer timer)", "full_signature": "public  OFConnection(@Nonnull DatapathId dpid,\n\t\t\t@Nonnull OFFactory factory,\n\t\t\t@Nonnull Channel channel,\n\t\t\t@Nonnull OFAuxId auxId,\n\t\t\t@Nonnull IDebugCounterService debugCounters,\n\t\t\t@Nonnull Timer timer)", "class_method_signature": "OFConnection.OFConnection(@Nonnull DatapathId dpid,\n\t\t\t@Nonnull OFFactory factory,\n\t\t\t@Nonnull Channel channel,\n\t\t\t@Nonnull OFAuxId auxId,\n\t\t\t@Nonnull IDebugCounterService debugCounters,\n\t\t\t@Nonnull Timer timer)", "testcase": false, "constructor": true}, {"identifier": "write", "parameters": "(final Iterable<OFMessage> msgList)", "modifiers": "@Override public", "return": "Collection<OFMessage>", "signature": "Collection<OFMessage> write(final Iterable<OFMessage> msgList)", "full_signature": "@Override public Collection<OFMessage> write(final Iterable<OFMessage> msgList)", "class_method_signature": "OFConnection.write(final Iterable<OFMessage> msgList)", "testcase": false, "constructor": false}, {"identifier": "write", "parameters": "(OFMessage m)", "modifiers": "@Override public", "return": "boolean", "signature": "boolean write(OFMessage m)", "full_signature": "@Override public boolean write(OFMessage m)", "class_method_signature": "OFConnection.write(OFMessage m)", "testcase": false, "constructor": false}, {"identifier": "writeRequest", "parameters": "(OFRequest<R> request)", "modifiers": "@Override public", "return": "ListenableFuture<R>", "signature": "ListenableFuture<R> writeRequest(OFRequest<R> request)", "full_signature": "@Override public ListenableFuture<R> writeRequest(OFRequest<R> request)", "class_method_signature": "OFConnection.writeRequest(OFRequest<R> request)", "testcase": false, "constructor": false}, {"identifier": "writeStatsRequest", "parameters": "(\n\t\t\tOFStatsRequest<REPLY> request)", "modifiers": "@Override public", "return": "ListenableFuture<List<REPLY>>", "signature": "ListenableFuture<List<REPLY>> writeStatsRequest(\n\t\t\tOFStatsRequest<REPLY> request)", "full_signature": "@Override public ListenableFuture<List<REPLY>> writeStatsRequest(\n\t\t\tOFStatsRequest<REPLY> request)", "class_method_signature": "OFConnection.writeStatsRequest(\n\t\t\tOFStatsRequest<REPLY> request)", "testcase": false, "constructor": false}, {"identifier": "disconnected", "parameters": "()", "modifiers": "public", "return": "void", "signature": "void disconnected()", "full_signature": "public void disconnected()", "class_method_signature": "OFConnection.disconnected()", "testcase": false, "constructor": false}, {"identifier": "disconnect", "parameters": "()", "modifiers": "@Override public", "return": "void", "signature": "void disconnect()", "full_signature": "@Override public void disconnect()", "class_method_signature": "OFConnection.disconnect()", "testcase": false, "constructor": false}, {"identifier": "toString", "parameters": "()", "modifiers": "@Override public", "return": "String", "signature": "String toString()", "full_signature": "@Override public String toString()", "class_method_signature": "OFConnection.toString()", "testcase": false, "constructor": false}, {"identifier": "getConnectedSince", "parameters": "()", "modifiers": "@Override public", "return": "Date", "signature": "Date getConnectedSince()", "full_signature": "@Override public Date getConnectedSince()", "class_method_signature": "OFConnection.getConnectedSince()", "testcase": false, "constructor": false}, {"identifier": "registerDeliverable", "parameters": "(long xid, Deliverable<?> deliverable)", "modifiers": "private", "return": "void", "signature": "void registerDeliverable(long xid, Deliverable<?> deliverable)", "full_signature": "private void registerDeliverable(long xid, Deliverable<?> deliverable)", "class_method_signature": "OFConnection.registerDeliverable(long xid, Deliverable<?> deliverable)", "testcase": false, "constructor": false}, {"identifier": "handleGenericDeliverable", "parameters": "(OFMessage reply)", "modifiers": "public", "return": "boolean", "signature": "boolean handleGenericDeliverable(OFMessage reply)", "full_signature": "public boolean handleGenericDeliverable(OFMessage reply)", "class_method_signature": "OFConnection.handleGenericDeliverable(OFMessage reply)", "testcase": false, "constructor": false}, {"identifier": "cancelAllPendingRequests", "parameters": "()", "modifiers": "@Override public", "return": "void", "signature": "void cancelAllPendingRequests()", "full_signature": "@Override public void cancelAllPendingRequests()", "class_method_signature": "OFConnection.cancelAllPendingRequests()", "testcase": false, "constructor": false}, {"identifier": "isConnected", "parameters": "()", "modifiers": "@Override public", "return": "boolean", "signature": "boolean isConnected()", "full_signature": "@Override public boolean isConnected()", "class_method_signature": "OFConnection.isConnected()", "testcase": false, "constructor": false}, {"identifier": "getRemoteInetAddress", "parameters": "()", "modifiers": "@Override public", "return": "SocketAddress", "signature": "SocketAddress getRemoteInetAddress()", "full_signature": "@Override public SocketAddress getRemoteInetAddress()", "class_method_signature": "OFConnection.getRemoteInetAddress()", "testcase": false, "constructor": false}, {"identifier": "getLocalInetAddress", "parameters": "()", "modifiers": "@Override public", "return": "SocketAddress", "signature": "SocketAddress getLocalInetAddress()", "full_signature": "@Override public SocketAddress getLocalInetAddress()", "class_method_signature": "OFConnection.getLocalInetAddress()", "testcase": false, "constructor": false}, {"identifier": "deliverResponse", "parameters": "(OFMessage m)", "modifiers": "public", "return": "boolean", "signature": "boolean deliverResponse(OFMessage m)", "full_signature": "public boolean deliverResponse(OFMessage m)", "class_method_signature": "OFConnection.deliverResponse(OFMessage m)", "testcase": false, "constructor": false}, {"identifier": "isWritable", "parameters": "()", "modifiers": "@Override public", "return": "boolean", "signature": "boolean isWritable()", "full_signature": "@Override public boolean isWritable()", "class_method_signature": "OFConnection.isWritable()", "testcase": false, "constructor": false}, {"identifier": "getDatapathId", "parameters": "()", "modifiers": "@Override public", "return": "DatapathId", "signature": "DatapathId getDatapathId()", "full_signature": "@Override public DatapathId getDatapathId()", "class_method_signature": "OFConnection.getDatapathId()", "testcase": false, "constructor": false}, {"identifier": "getAuxId", "parameters": "()", "modifiers": "@Override public", "return": "OFAuxId", "signature": "OFAuxId getAuxId()", "full_signature": "@Override public OFAuxId getAuxId()", "class_method_signature": "OFConnection.getAuxId()", "testcase": false, "constructor": false}, {"identifier": "getPendingRequestIds", "parameters": "()", "modifiers": "", "return": "Set<Long>", "signature": "Set<Long> getPendingRequestIds()", "full_signature": " Set<Long> getPendingRequestIds()", "class_method_signature": "OFConnection.getPendingRequestIds()", "testcase": false, "constructor": false}, {"identifier": "getOFFactory", "parameters": "()", "modifiers": "@Override public", "return": "OFFactory", "signature": "OFFactory getOFFactory()", "full_signature": "@Override public OFFactory getOFFactory()", "class_method_signature": "OFConnection.getOFFactory()", "testcase": false, "constructor": false}, {"identifier": "getListener", "parameters": "()", "modifiers": "public", "return": "IOFConnectionListener", "signature": "IOFConnectionListener getListener()", "full_signature": "public IOFConnectionListener getListener()", "class_method_signature": "OFConnection.getListener()", "testcase": false, "constructor": false}, {"identifier": "setListener", "parameters": "(IOFConnectionListener listener)", "modifiers": "@Override public", "return": "void", "signature": "void setListener(IOFConnectionListener listener)", "full_signature": "@Override public void setListener(IOFConnectionListener listener)", "class_method_signature": "OFConnection.setListener(IOFConnectionListener listener)", "testcase": false, "constructor": false}, {"identifier": "messageReceived", "parameters": "(OFMessage m)", "modifiers": "public", "return": "void", "signature": "void messageReceived(OFMessage m)", "full_signature": "public void messageReceived(OFMessage m)", "class_method_signature": "OFConnection.messageReceived(OFMessage m)", "testcase": false, "constructor": false}, {"identifier": "getLatency", "parameters": "()", "modifiers": "@Override public", "return": "U64", "signature": "U64 getLatency()", "full_signature": "@Override public U64 getLatency()", "class_method_signature": "OFConnection.getLatency()", "testcase": false, "constructor": false}, {"identifier": "updateLatency", "parameters": "(U64 latency)", "modifiers": "@Override public", "return": "void", "signature": "void updateLatency(U64 latency)", "full_signature": "@Override public void updateLatency(U64 latency)", "class_method_signature": "OFConnection.updateLatency(U64 latency)", "testcase": false, "constructor": false}], "file": "src/agents/apps/floodlight/floodlight-1.2/src/main/java/net/floodlightcontroller/core/internal/OFConnection.java"}, "focal_method": {"identifier": "write", "parameters": "(final Iterable<OFMessage> msgList)", "modifiers": "@Override public", "return": "Collection<OFMessage>", "body": "@Override\n\tpublic Collection<OFMessage> write(final Iterable<OFMessage> msgList) {\n\t\tif (!isConnected()) {\n\t\t\tif (logger.isDebugEnabled())\n\t\t\t\tlogger.debug(this.toString() + \" : not connected - dropping {} element msglist {} \",\n\t\t\t\t\t\tIterables.size(msgList),\n\t\t\t\t\t\tString.valueOf(msgList).substring(0, 80));\n\t\t\treturn IterableUtils.toCollection(msgList);\n\t\t}\n\t\tfor (OFMessage m : msgList) {\t\t\t\n\t\t\tif (logger.isTraceEnabled()) {\n\t\t\t\tlogger.trace(\"{}: send {}\", this, m);\n\t\t\t\tcounters.updateWriteStats(m);\n\t\t\t}\n\t\t}\n\t\tthis.channel.eventLoop().execute(new WriteMessageTask(msgList));\n\t\treturn Collections.emptyList();\n\t}", "signature": "Collection<OFMessage> write(final Iterable<OFMessage> msgList)", "full_signature": "@Override public Collection<OFMessage> write(final Iterable<OFMessage> msgList)", "class_method_signature": "OFConnection.write(final Iterable<OFMessage> msgList)", "testcase": false, "constructor": false, "invocations": ["isConnected", "isDebugEnabled", "debug", "toString", "size", "substring", "valueOf", "toCollection", "isTraceEnabled", "trace", "updateWriteStats", "execute", "eventLoop", "emptyList"]}, "repository": {"repo_id": 181421086, "url": "https://github.com/seungsoo-lee/DELTA", "language": "Java", "is_fork": false, "fork_count": 10, "stargazer_count": 35, "size": 99244, "license": "licensed"}}