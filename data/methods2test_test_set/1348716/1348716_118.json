{"test_class": {"identifier": "CustomizedTextServiceFacadeWebTierTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private CustomizedTextServiceFacadeWebTier customizedTextServiceFacadeWebTier;", "modifier": "private", "type": "CustomizedTextServiceFacadeWebTier", "declarator": "customizedTextServiceFacadeWebTier", "var_name": "customizedTextServiceFacadeWebTier"}, {"original_string": "@Mock\n    private MessageSource messageSource;", "modifier": "@Mock\n    private", "type": "MessageSource", "declarator": "messageSource", "var_name": "messageSource"}, {"original_string": "@Mock\n    private CustomizedTextDao customizedTextDao;", "modifier": "@Mock\n    private", "type": "CustomizedTextDao", "declarator": "customizedTextDao", "var_name": "customizedTextDao"}, {"original_string": "@Mock\n    private HibernateTransactionHelper hibernateTransactionHelper;", "modifier": "@Mock\n    private", "type": "HibernateTransactionHelper", "declarator": "hibernateTransactionHelper", "var_name": "hibernateTransactionHelper"}, {"original_string": "@Mock\n    private MenuRepository menuRepository;", "modifier": "@Mock\n    private", "type": "MenuRepository", "declarator": "menuRepository", "var_name": "menuRepository"}], "file": "appdomain/src/test/java/org/mifos/application/messagecustomizer/CustomizedTextServiceFacadeWebTierTest.java"}, "test_case": {"identifier": "shouldReplaceText", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void shouldReplaceText() {\n        Map<String, String> map = new LinkedHashMap<String, String>();\n        map.put(\"original\", \"custom\");\n        map.put(\"Clients\", \"People\");\n        map.put(\"Client\", \"Person\");\n        map.put(\"Admin\", \"Administrator\");\n\n        when(customizedTextDao.getCustomizedText()).thenReturn(map);\n\n        String newString = customizedTextServiceFacadeWebTier.replaceSubstitutions(\"\" + \"This is the original message\");\n        assertThat(newString, is(\"This is the custom message\"));\n\n        // this illustrates a limitiation of the current approach, \"Admin\" is replaced in the first part of\n        // \"Administrators\". But we can't do something like only replace whole words since this breaks\n        // i18n for locales like Chinese\n        newString = customizedTextServiceFacadeWebTier\n                .replaceSubstitutions(\"The Admin function is performed by admins, Admins and Administrators\");\n        assertThat(newString,\n                is(\"The Administrator function is performed by admins, Administrators and Administratoristrators\"));\n\n        newString = customizedTextServiceFacadeWebTier.replaceSubstitutions(\"\" + \"Many Clients have a Client\");\n        assertThat(newString, is(\"Many People have a Person\"));\n    }", "signature": "void shouldReplaceText()", "full_signature": "@Test public void shouldReplaceText()", "class_method_signature": "CustomizedTextServiceFacadeWebTierTest.shouldReplaceText()", "testcase": true, "constructor": false, "invocations": ["put", "put", "put", "put", "thenReturn", "when", "getCustomizedText", "replaceSubstitutions", "assertThat", "is", "replaceSubstitutions", "assertThat", "is", "replaceSubstitutions", "assertThat", "is"]}, "focal_class": {"identifier": "CustomizedTextServiceFacadeWebTier", "superclass": "", "interfaces": "implements CustomizedTextServiceFacade", "fields": [{"original_string": "@Autowired\n    private CustomizedTextDao customizedTextDao;", "modifier": "@Autowired\n    private", "type": "CustomizedTextDao", "declarator": "customizedTextDao", "var_name": "customizedTextDao"}, {"original_string": "@Autowired\n    private MessageSource messageSource;", "modifier": "@Autowired\n    private", "type": "MessageSource", "declarator": "messageSource", "var_name": "messageSource"}, {"original_string": "private HibernateTransactionHelper transactionHelper;", "modifier": "private", "type": "HibernateTransactionHelper", "declarator": "transactionHelper", "var_name": "transactionHelper"}, {"original_string": "private MenuRepository menuRepository;", "modifier": "private", "type": "MenuRepository", "declarator": "menuRepository", "var_name": "menuRepository"}], "methods": [{"identifier": "CustomizedTextServiceFacadeWebTier", "parameters": "(CustomizedTextDao customizedTextDao, MessageSource messageSource)", "modifiers": "@Autowired public", "return": "", "signature": " CustomizedTextServiceFacadeWebTier(CustomizedTextDao customizedTextDao, MessageSource messageSource)", "full_signature": "@Autowired public  CustomizedTextServiceFacadeWebTier(CustomizedTextDao customizedTextDao, MessageSource messageSource)", "class_method_signature": "CustomizedTextServiceFacadeWebTier.CustomizedTextServiceFacadeWebTier(CustomizedTextDao customizedTextDao, MessageSource messageSource)", "testcase": false, "constructor": true}, {"identifier": "setTransactionHelper", "parameters": "(HibernateTransactionHelper hibernateTransactionHelper)", "modifiers": "protected", "return": "void", "signature": "void setTransactionHelper(HibernateTransactionHelper hibernateTransactionHelper)", "full_signature": "protected void setTransactionHelper(HibernateTransactionHelper hibernateTransactionHelper)", "class_method_signature": "CustomizedTextServiceFacadeWebTier.setTransactionHelper(HibernateTransactionHelper hibernateTransactionHelper)", "testcase": false, "constructor": false}, {"identifier": "getMenuRepository", "parameters": "()", "modifiers": "protected", "return": "MenuRepository", "signature": "MenuRepository getMenuRepository()", "full_signature": "protected MenuRepository getMenuRepository()", "class_method_signature": "CustomizedTextServiceFacadeWebTier.getMenuRepository()", "testcase": false, "constructor": false}, {"identifier": "setMenuRepository", "parameters": "(MenuRepository menuRepository)", "modifiers": "protected", "return": "void", "signature": "void setMenuRepository(MenuRepository menuRepository)", "full_signature": "protected void setMenuRepository(MenuRepository menuRepository)", "class_method_signature": "CustomizedTextServiceFacadeWebTier.setMenuRepository(MenuRepository menuRepository)", "testcase": false, "constructor": false}, {"identifier": "updateLegacyCaches", "parameters": "()", "modifiers": "private", "return": "void", "signature": "void updateLegacyCaches()", "full_signature": "private void updateLegacyCaches()", "class_method_signature": "CustomizedTextServiceFacadeWebTier.updateLegacyCaches()", "testcase": false, "constructor": false}, {"identifier": "addOrUpdateCustomizedText", "parameters": "(String originalText, String customText)", "modifiers": "@Override public", "return": "void", "signature": "void addOrUpdateCustomizedText(String originalText, String customText)", "full_signature": "@Override public void addOrUpdateCustomizedText(String originalText, String customText)", "class_method_signature": "CustomizedTextServiceFacadeWebTier.addOrUpdateCustomizedText(String originalText, String customText)", "testcase": false, "constructor": false}, {"identifier": "removeCustomizedText", "parameters": "(String originalText)", "modifiers": "@Override public", "return": "void", "signature": "void removeCustomizedText(String originalText)", "full_signature": "@Override public void removeCustomizedText(String originalText)", "class_method_signature": "CustomizedTextServiceFacadeWebTier.removeCustomizedText(String originalText)", "testcase": false, "constructor": false}, {"identifier": "retrieveCustomizedText", "parameters": "()", "modifiers": "@Override public", "return": "Map<String, String>", "signature": "Map<String, String> retrieveCustomizedText()", "full_signature": "@Override public Map<String, String> retrieveCustomizedText()", "class_method_signature": "CustomizedTextServiceFacadeWebTier.retrieveCustomizedText()", "testcase": false, "constructor": false}, {"identifier": "replaceSubstitutions", "parameters": "(String message)", "modifiers": "@Override public", "return": "String", "signature": "String replaceSubstitutions(String message)", "full_signature": "@Override public String replaceSubstitutions(String message)", "class_method_signature": "CustomizedTextServiceFacadeWebTier.replaceSubstitutions(String message)", "testcase": false, "constructor": false}, {"identifier": "getCustomizedTextDto", "parameters": "(String originalText)", "modifiers": "@Override public", "return": "CustomizedTextDto", "signature": "CustomizedTextDto getCustomizedTextDto(String originalText)", "full_signature": "@Override public CustomizedTextDto getCustomizedTextDto(String originalText)", "class_method_signature": "CustomizedTextServiceFacadeWebTier.getCustomizedTextDto(String originalText)", "testcase": false, "constructor": false}, {"identifier": "convertMigratedLabelKeysToLocalizedText", "parameters": "(Locale locale)", "modifiers": "@Override public", "return": "void", "signature": "void convertMigratedLabelKeysToLocalizedText(Locale locale)", "full_signature": "@Override public void convertMigratedLabelKeysToLocalizedText(Locale locale)", "class_method_signature": "CustomizedTextServiceFacadeWebTier.convertMigratedLabelKeysToLocalizedText(Locale locale)", "testcase": false, "constructor": false}], "file": "appdomain/src/main/java/org/mifos/application/messagecustomizer/CustomizedTextServiceFacadeWebTier.java"}, "focal_method": {"identifier": "replaceSubstitutions", "parameters": "(String message)", "modifiers": "@Override public", "return": "String", "body": "@Override\n    public String replaceSubstitutions(String message) {\n        if (message == null)\n            return message;\n\n        String newMessage = message;\n\n        Map<String, String> messageFilterMap = customizedTextDao.getCustomizedText();\n\n        for (Map.Entry<String, String> entry : messageFilterMap.entrySet()) {\n            newMessage = newMessage.replace(entry.getKey(), entry.getValue());\n        }\n        return newMessage;\n    }", "signature": "String replaceSubstitutions(String message)", "full_signature": "@Override public String replaceSubstitutions(String message)", "class_method_signature": "CustomizedTextServiceFacadeWebTier.replaceSubstitutions(String message)", "testcase": false, "constructor": false, "invocations": ["getCustomizedText", "entrySet", "replace", "getKey", "getValue"]}, "repository": {"repo_id": 1348716, "url": "https://github.com/mifos/head", "language": "Java", "is_fork": false, "fork_count": 91, "stargazer_count": 55, "size": 532732, "license": "licensed"}}