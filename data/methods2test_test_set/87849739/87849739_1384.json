{"test_class": {"identifier": "ImmutablePolicyBuilderTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final String POLICY_NS = \"com.test\";", "modifier": "private static final", "type": "String", "declarator": "POLICY_NS = \"com.test\"", "var_name": "POLICY_NS"}, {"original_string": "private static final PolicyId POLICY_ID = PolicyId.of(POLICY_NS, \"test\");", "modifier": "private static final", "type": "PolicyId", "declarator": "POLICY_ID = PolicyId.of(POLICY_NS, \"test\")", "var_name": "POLICY_ID"}, {"original_string": "private static final JsonPointer ATTRIBUTES_POINTER = JsonFactory.newPointer(\"/attributes\");", "modifier": "private static final", "type": "JsonPointer", "declarator": "ATTRIBUTES_POINTER = JsonFactory.newPointer(\"/attributes\")", "var_name": "ATTRIBUTES_POINTER"}, {"original_string": "private static final JsonPointer FEATURES_POINTER = JsonFactory.newPointer(\"/features\");", "modifier": "private static final", "type": "JsonPointer", "declarator": "FEATURES_POINTER = JsonFactory.newPointer(\"/features\")", "var_name": "FEATURES_POINTER"}, {"original_string": "private PolicyBuilder underTest = null;", "modifier": "private", "type": "PolicyBuilder", "declarator": "underTest = null", "var_name": "underTest"}], "file": "model/policies/src/test/java/org/eclipse/ditto/model/policies/ImmutablePolicyBuilderTest.java"}, "test_case": {"identifier": "createEmptyPolicy", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void createEmptyPolicy() {\n        final Policy policy = underTest.build();\n\n        assertThat(policy)\n                .hasId(POLICY_ID)\n                .hasNamespace(POLICY_NS);\n    }", "signature": "void createEmptyPolicy()", "full_signature": "@Test public void createEmptyPolicy()", "class_method_signature": "ImmutablePolicyBuilderTest.createEmptyPolicy()", "testcase": true, "constructor": false, "invocations": ["build", "hasNamespace", "hasId", "assertThat"]}, "focal_class": {"identifier": "ImmutablePolicyBuilder", "superclass": "", "interfaces": "implements PolicyBuilder", "fields": [{"original_string": "private final Map<Label, Map<SubjectId, Subject>> subjects;", "modifier": "private final", "type": "Map<Label, Map<SubjectId, Subject>>", "declarator": "subjects", "var_name": "subjects"}, {"original_string": "private final Map<Label, Map<ResourceKey, Permissions>> grantedPermissions;", "modifier": "private final", "type": "Map<Label, Map<ResourceKey, Permissions>>", "declarator": "grantedPermissions", "var_name": "grantedPermissions"}, {"original_string": "private final Map<Label, Map<ResourceKey, Permissions>> revokedPermissions;", "modifier": "private final", "type": "Map<Label, Map<ResourceKey, Permissions>>", "declarator": "revokedPermissions", "var_name": "revokedPermissions"}, {"original_string": "@Nullable private PolicyId id;", "modifier": "@Nullable private", "type": "PolicyId", "declarator": "id", "var_name": "id"}, {"original_string": "@Nullable private PolicyLifecycle lifecycle;", "modifier": "@Nullable private", "type": "PolicyLifecycle", "declarator": "lifecycle", "var_name": "lifecycle"}, {"original_string": "@Nullable private PolicyRevision revision;", "modifier": "@Nullable private", "type": "PolicyRevision", "declarator": "revision", "var_name": "revision"}, {"original_string": "@Nullable private Instant modified;", "modifier": "@Nullable private", "type": "Instant", "declarator": "modified", "var_name": "modified"}, {"original_string": "@Nullable private Instant created;", "modifier": "@Nullable private", "type": "Instant", "declarator": "created", "var_name": "created"}], "methods": [{"identifier": "ImmutablePolicyBuilder", "parameters": "()", "modifiers": "private", "return": "", "signature": " ImmutablePolicyBuilder()", "full_signature": "private  ImmutablePolicyBuilder()", "class_method_signature": "ImmutablePolicyBuilder.ImmutablePolicyBuilder()", "testcase": false, "constructor": true}, {"identifier": "newInstance", "parameters": "()", "modifiers": "public static", "return": "ImmutablePolicyBuilder", "signature": "ImmutablePolicyBuilder newInstance()", "full_signature": "public static ImmutablePolicyBuilder newInstance()", "class_method_signature": "ImmutablePolicyBuilder.newInstance()", "testcase": false, "constructor": false}, {"identifier": "of", "parameters": "(final PolicyId id)", "modifiers": "public static", "return": "ImmutablePolicyBuilder", "signature": "ImmutablePolicyBuilder of(final PolicyId id)", "full_signature": "public static ImmutablePolicyBuilder of(final PolicyId id)", "class_method_signature": "ImmutablePolicyBuilder.of(final PolicyId id)", "testcase": false, "constructor": false}, {"identifier": "of", "parameters": "(final PolicyId id, final Iterable<PolicyEntry> policyEntries)", "modifiers": "public static", "return": "PolicyBuilder", "signature": "PolicyBuilder of(final PolicyId id, final Iterable<PolicyEntry> policyEntries)", "full_signature": "public static PolicyBuilder of(final PolicyId id, final Iterable<PolicyEntry> policyEntries)", "class_method_signature": "ImmutablePolicyBuilder.of(final PolicyId id, final Iterable<PolicyEntry> policyEntries)", "testcase": false, "constructor": false}, {"identifier": "of", "parameters": "(final Policy existingPolicy)", "modifiers": "public static", "return": "PolicyBuilder", "signature": "PolicyBuilder of(final Policy existingPolicy)", "full_signature": "public static PolicyBuilder of(final Policy existingPolicy)", "class_method_signature": "ImmutablePolicyBuilder.of(final Policy existingPolicy)", "testcase": false, "constructor": false}, {"identifier": "forLabel", "parameters": "(final Label label)", "modifiers": "@Override public", "return": "LabelScoped", "signature": "LabelScoped forLabel(final Label label)", "full_signature": "@Override public LabelScoped forLabel(final Label label)", "class_method_signature": "ImmutablePolicyBuilder.forLabel(final Label label)", "testcase": false, "constructor": false}, {"identifier": "setId", "parameters": "(final CharSequence id)", "modifiers": "@Override @Deprecated public", "return": "ImmutablePolicyBuilder", "signature": "ImmutablePolicyBuilder setId(final CharSequence id)", "full_signature": "@Override @Deprecated public ImmutablePolicyBuilder setId(final CharSequence id)", "class_method_signature": "ImmutablePolicyBuilder.setId(final CharSequence id)", "testcase": false, "constructor": false}, {"identifier": "setId", "parameters": "(final PolicyId id)", "modifiers": "@Override public", "return": "ImmutablePolicyBuilder", "signature": "ImmutablePolicyBuilder setId(final PolicyId id)", "full_signature": "@Override public ImmutablePolicyBuilder setId(final PolicyId id)", "class_method_signature": "ImmutablePolicyBuilder.setId(final PolicyId id)", "testcase": false, "constructor": false}, {"identifier": "setLifecycle", "parameters": "(@Nullable final PolicyLifecycle lifecycle)", "modifiers": "@Override public", "return": "ImmutablePolicyBuilder", "signature": "ImmutablePolicyBuilder setLifecycle(@Nullable final PolicyLifecycle lifecycle)", "full_signature": "@Override public ImmutablePolicyBuilder setLifecycle(@Nullable final PolicyLifecycle lifecycle)", "class_method_signature": "ImmutablePolicyBuilder.setLifecycle(@Nullable final PolicyLifecycle lifecycle)", "testcase": false, "constructor": false}, {"identifier": "setRevision", "parameters": "(@Nullable final PolicyRevision revision)", "modifiers": "@Override public", "return": "ImmutablePolicyBuilder", "signature": "ImmutablePolicyBuilder setRevision(@Nullable final PolicyRevision revision)", "full_signature": "@Override public ImmutablePolicyBuilder setRevision(@Nullable final PolicyRevision revision)", "class_method_signature": "ImmutablePolicyBuilder.setRevision(@Nullable final PolicyRevision revision)", "testcase": false, "constructor": false}, {"identifier": "setModified", "parameters": "(@Nullable final Instant modified)", "modifiers": "@Override public", "return": "ImmutablePolicyBuilder", "signature": "ImmutablePolicyBuilder setModified(@Nullable final Instant modified)", "full_signature": "@Override public ImmutablePolicyBuilder setModified(@Nullable final Instant modified)", "class_method_signature": "ImmutablePolicyBuilder.setModified(@Nullable final Instant modified)", "testcase": false, "constructor": false}, {"identifier": "setCreated", "parameters": "(@Nullable final Instant created)", "modifiers": "@Override public", "return": "ImmutablePolicyBuilder", "signature": "ImmutablePolicyBuilder setCreated(@Nullable final Instant created)", "full_signature": "@Override public ImmutablePolicyBuilder setCreated(@Nullable final Instant created)", "class_method_signature": "ImmutablePolicyBuilder.setCreated(@Nullable final Instant created)", "testcase": false, "constructor": false}, {"identifier": "set", "parameters": "(final PolicyEntry entry)", "modifiers": "@Override public", "return": "ImmutablePolicyBuilder", "signature": "ImmutablePolicyBuilder set(final PolicyEntry entry)", "full_signature": "@Override public ImmutablePolicyBuilder set(final PolicyEntry entry)", "class_method_signature": "ImmutablePolicyBuilder.set(final PolicyEntry entry)", "testcase": false, "constructor": false}, {"identifier": "setPolicyEntry", "parameters": "(final PolicyEntry entry)", "modifiers": "private", "return": "void", "signature": "void setPolicyEntry(final PolicyEntry entry)", "full_signature": "private void setPolicyEntry(final PolicyEntry entry)", "class_method_signature": "ImmutablePolicyBuilder.setPolicyEntry(final PolicyEntry entry)", "testcase": false, "constructor": false}, {"identifier": "putAllSubjects", "parameters": "(final PolicyEntry policyEntry)", "modifiers": "private", "return": "void", "signature": "void putAllSubjects(final PolicyEntry policyEntry)", "full_signature": "private void putAllSubjects(final PolicyEntry policyEntry)", "class_method_signature": "ImmutablePolicyBuilder.putAllSubjects(final PolicyEntry policyEntry)", "testcase": false, "constructor": false}, {"identifier": "setAll", "parameters": "(final Iterable<PolicyEntry> entries)", "modifiers": "@Override public", "return": "ImmutablePolicyBuilder", "signature": "ImmutablePolicyBuilder setAll(final Iterable<PolicyEntry> entries)", "full_signature": "@Override public ImmutablePolicyBuilder setAll(final Iterable<PolicyEntry> entries)", "class_method_signature": "ImmutablePolicyBuilder.setAll(final Iterable<PolicyEntry> entries)", "testcase": false, "constructor": false}, {"identifier": "remove", "parameters": "(final CharSequence label)", "modifiers": "@Override public", "return": "ImmutablePolicyBuilder", "signature": "ImmutablePolicyBuilder remove(final CharSequence label)", "full_signature": "@Override public ImmutablePolicyBuilder remove(final CharSequence label)", "class_method_signature": "ImmutablePolicyBuilder.remove(final CharSequence label)", "testcase": false, "constructor": false}, {"identifier": "removePolicyEntryFor", "parameters": "(final Label label)", "modifiers": "private", "return": "void", "signature": "void removePolicyEntryFor(final Label label)", "full_signature": "private void removePolicyEntryFor(final Label label)", "class_method_signature": "ImmutablePolicyBuilder.removePolicyEntryFor(final Label label)", "testcase": false, "constructor": false}, {"identifier": "removeAll", "parameters": "(final Iterable<PolicyEntry> entries)", "modifiers": "@Override public", "return": "ImmutablePolicyBuilder", "signature": "ImmutablePolicyBuilder removeAll(final Iterable<PolicyEntry> entries)", "full_signature": "@Override public ImmutablePolicyBuilder removeAll(final Iterable<PolicyEntry> entries)", "class_method_signature": "ImmutablePolicyBuilder.removeAll(final Iterable<PolicyEntry> entries)", "testcase": false, "constructor": false}, {"identifier": "setSubjectsFor", "parameters": "(final CharSequence label, final Subjects subjects)", "modifiers": "@Override public", "return": "ImmutablePolicyBuilder", "signature": "ImmutablePolicyBuilder setSubjectsFor(final CharSequence label, final Subjects subjects)", "full_signature": "@Override public ImmutablePolicyBuilder setSubjectsFor(final CharSequence label, final Subjects subjects)", "class_method_signature": "ImmutablePolicyBuilder.setSubjectsFor(final CharSequence label, final Subjects subjects)", "testcase": false, "constructor": false}, {"identifier": "retrieveExistingSubjects", "parameters": "(final CharSequence label)", "modifiers": "private", "return": "Map<SubjectId, Subject>", "signature": "Map<SubjectId, Subject> retrieveExistingSubjects(final CharSequence label)", "full_signature": "private Map<SubjectId, Subject> retrieveExistingSubjects(final CharSequence label)", "class_method_signature": "ImmutablePolicyBuilder.retrieveExistingSubjects(final CharSequence label)", "testcase": false, "constructor": false}, {"identifier": "setSubjectFor", "parameters": "(final CharSequence label, final Subject subject)", "modifiers": "@Override public", "return": "ImmutablePolicyBuilder", "signature": "ImmutablePolicyBuilder setSubjectFor(final CharSequence label, final Subject subject)", "full_signature": "@Override public ImmutablePolicyBuilder setSubjectFor(final CharSequence label, final Subject subject)", "class_method_signature": "ImmutablePolicyBuilder.setSubjectFor(final CharSequence label, final Subject subject)", "testcase": false, "constructor": false}, {"identifier": "removeSubjectFor", "parameters": "(final CharSequence label,\n            final CharSequence subjectIssuerWithId)", "modifiers": "@Override public", "return": "ImmutablePolicyBuilder", "signature": "ImmutablePolicyBuilder removeSubjectFor(final CharSequence label,\n            final CharSequence subjectIssuerWithId)", "full_signature": "@Override public ImmutablePolicyBuilder removeSubjectFor(final CharSequence label,\n            final CharSequence subjectIssuerWithId)", "class_method_signature": "ImmutablePolicyBuilder.removeSubjectFor(final CharSequence label,\n            final CharSequence subjectIssuerWithId)", "testcase": false, "constructor": false}, {"identifier": "removeSubjectFor", "parameters": "(final CharSequence label, final Subject subject)", "modifiers": "@Override public", "return": "ImmutablePolicyBuilder", "signature": "ImmutablePolicyBuilder removeSubjectFor(final CharSequence label, final Subject subject)", "full_signature": "@Override public ImmutablePolicyBuilder removeSubjectFor(final CharSequence label, final Subject subject)", "class_method_signature": "ImmutablePolicyBuilder.removeSubjectFor(final CharSequence label, final Subject subject)", "testcase": false, "constructor": false}, {"identifier": "setResourcesFor", "parameters": "(final CharSequence label, final Resources resources)", "modifiers": "@Override public", "return": "ImmutablePolicyBuilder", "signature": "ImmutablePolicyBuilder setResourcesFor(final CharSequence label, final Resources resources)", "full_signature": "@Override public ImmutablePolicyBuilder setResourcesFor(final CharSequence label, final Resources resources)", "class_method_signature": "ImmutablePolicyBuilder.setResourcesFor(final CharSequence label, final Resources resources)", "testcase": false, "constructor": false}, {"identifier": "retrieveGrantedPermissions", "parameters": "(final CharSequence label)", "modifiers": "private", "return": "Map<ResourceKey, Permissions>", "signature": "Map<ResourceKey, Permissions> retrieveGrantedPermissions(final CharSequence label)", "full_signature": "private Map<ResourceKey, Permissions> retrieveGrantedPermissions(final CharSequence label)", "class_method_signature": "ImmutablePolicyBuilder.retrieveGrantedPermissions(final CharSequence label)", "testcase": false, "constructor": false}, {"identifier": "getPermissions", "parameters": "(final CharSequence l,\n            final Map<Label, Map<ResourceKey, Permissions>> permissionsMap)", "modifiers": "private static", "return": "Map<ResourceKey, Permissions>", "signature": "Map<ResourceKey, Permissions> getPermissions(final CharSequence l,\n            final Map<Label, Map<ResourceKey, Permissions>> permissionsMap)", "full_signature": "private static Map<ResourceKey, Permissions> getPermissions(final CharSequence l,\n            final Map<Label, Map<ResourceKey, Permissions>> permissionsMap)", "class_method_signature": "ImmutablePolicyBuilder.getPermissions(final CharSequence l,\n            final Map<Label, Map<ResourceKey, Permissions>> permissionsMap)", "testcase": false, "constructor": false}, {"identifier": "retrieveRevokedPermissions", "parameters": "(final CharSequence label)", "modifiers": "private", "return": "Map<ResourceKey, Permissions>", "signature": "Map<ResourceKey, Permissions> retrieveRevokedPermissions(final CharSequence label)", "full_signature": "private Map<ResourceKey, Permissions> retrieveRevokedPermissions(final CharSequence label)", "class_method_signature": "ImmutablePolicyBuilder.retrieveRevokedPermissions(final CharSequence label)", "testcase": false, "constructor": false}, {"identifier": "setResourceFor", "parameters": "(final CharSequence label, final Resource resource)", "modifiers": "@Override public", "return": "ImmutablePolicyBuilder", "signature": "ImmutablePolicyBuilder setResourceFor(final CharSequence label, final Resource resource)", "full_signature": "@Override public ImmutablePolicyBuilder setResourceFor(final CharSequence label, final Resource resource)", "class_method_signature": "ImmutablePolicyBuilder.setResourceFor(final CharSequence label, final Resource resource)", "testcase": false, "constructor": false}, {"identifier": "removeResourceFor", "parameters": "(final CharSequence label, final ResourceKey resourceKey)", "modifiers": "@Override public", "return": "ImmutablePolicyBuilder", "signature": "ImmutablePolicyBuilder removeResourceFor(final CharSequence label, final ResourceKey resourceKey)", "full_signature": "@Override public ImmutablePolicyBuilder removeResourceFor(final CharSequence label, final ResourceKey resourceKey)", "class_method_signature": "ImmutablePolicyBuilder.removeResourceFor(final CharSequence label, final ResourceKey resourceKey)", "testcase": false, "constructor": false}, {"identifier": "removeResourceFor", "parameters": "(final CharSequence label, final Resource resource)", "modifiers": "@Override public", "return": "ImmutablePolicyBuilder", "signature": "ImmutablePolicyBuilder removeResourceFor(final CharSequence label, final Resource resource)", "full_signature": "@Override public ImmutablePolicyBuilder removeResourceFor(final CharSequence label, final Resource resource)", "class_method_signature": "ImmutablePolicyBuilder.removeResourceFor(final CharSequence label, final Resource resource)", "testcase": false, "constructor": false}, {"identifier": "setPermissionsFor", "parameters": "(final CharSequence label, final ResourceKey resourceKey,\n            final EffectedPermissions effectedPermissions)", "modifiers": "@Override public", "return": "ImmutablePolicyBuilder", "signature": "ImmutablePolicyBuilder setPermissionsFor(final CharSequence label, final ResourceKey resourceKey,\n            final EffectedPermissions effectedPermissions)", "full_signature": "@Override public ImmutablePolicyBuilder setPermissionsFor(final CharSequence label, final ResourceKey resourceKey,\n            final EffectedPermissions effectedPermissions)", "class_method_signature": "ImmutablePolicyBuilder.setPermissionsFor(final CharSequence label, final ResourceKey resourceKey,\n            final EffectedPermissions effectedPermissions)", "testcase": false, "constructor": false}, {"identifier": "checkResourceKey", "parameters": "(final ResourceKey resourceKey)", "modifiers": "private static", "return": "void", "signature": "void checkResourceKey(final ResourceKey resourceKey)", "full_signature": "private static void checkResourceKey(final ResourceKey resourceKey)", "class_method_signature": "ImmutablePolicyBuilder.checkResourceKey(final ResourceKey resourceKey)", "testcase": false, "constructor": false}, {"identifier": "setGrantedPermissionsFor", "parameters": "(final CharSequence label, final ResourceKey resourceKey,\n            final Permissions grantedPermissions)", "modifiers": "@Override public", "return": "ImmutablePolicyBuilder", "signature": "ImmutablePolicyBuilder setGrantedPermissionsFor(final CharSequence label, final ResourceKey resourceKey,\n            final Permissions grantedPermissions)", "full_signature": "@Override public ImmutablePolicyBuilder setGrantedPermissionsFor(final CharSequence label, final ResourceKey resourceKey,\n            final Permissions grantedPermissions)", "class_method_signature": "ImmutablePolicyBuilder.setGrantedPermissionsFor(final CharSequence label, final ResourceKey resourceKey,\n            final Permissions grantedPermissions)", "testcase": false, "constructor": false}, {"identifier": "setRevokedPermissionsFor", "parameters": "(final CharSequence label, final ResourceKey resourceKey,\n            final Permissions revokedPermissions)", "modifiers": "@Override public", "return": "ImmutablePolicyBuilder", "signature": "ImmutablePolicyBuilder setRevokedPermissionsFor(final CharSequence label, final ResourceKey resourceKey,\n            final Permissions revokedPermissions)", "full_signature": "@Override public ImmutablePolicyBuilder setRevokedPermissionsFor(final CharSequence label, final ResourceKey resourceKey,\n            final Permissions revokedPermissions)", "class_method_signature": "ImmutablePolicyBuilder.setRevokedPermissionsFor(final CharSequence label, final ResourceKey resourceKey,\n            final Permissions revokedPermissions)", "testcase": false, "constructor": false}, {"identifier": "build", "parameters": "()", "modifiers": "@Override public", "return": "Policy", "signature": "Policy build()", "full_signature": "@Override public Policy build()", "class_method_signature": "ImmutablePolicyBuilder.build()", "testcase": false, "constructor": false}, {"identifier": "getAllLabels", "parameters": "()", "modifiers": "@Nonnull private", "return": "Collection<Label>", "signature": "Collection<Label> getAllLabels()", "full_signature": "@Nonnull private Collection<Label> getAllLabels()", "class_method_signature": "ImmutablePolicyBuilder.getAllLabels()", "testcase": false, "constructor": false}, {"identifier": "getFinalSubjects", "parameters": "(final CharSequence label)", "modifiers": "@Nonnull private", "return": "Subjects", "signature": "Subjects getFinalSubjects(final CharSequence label)", "full_signature": "@Nonnull private Subjects getFinalSubjects(final CharSequence label)", "class_method_signature": "ImmutablePolicyBuilder.getFinalSubjects(final CharSequence label)", "testcase": false, "constructor": false}, {"identifier": "getFinalResources", "parameters": "(final CharSequence label)", "modifiers": "@Nonnull private", "return": "Resources", "signature": "Resources getFinalResources(final CharSequence label)", "full_signature": "@Nonnull private Resources getFinalResources(final CharSequence label)", "class_method_signature": "ImmutablePolicyBuilder.getFinalResources(final CharSequence label)", "testcase": false, "constructor": false}], "file": "model/policies/src/main/java/org/eclipse/ditto/model/policies/ImmutablePolicyBuilder.java"}, "focal_method": {"identifier": "build", "parameters": "()", "modifiers": "@Override public", "return": "Policy", "body": "@Override\n    public Policy build() {\n        final Collection<Label> allLabels = getAllLabels();\n\n        final Collection<PolicyEntry> policyEntries = allLabels.stream()\n                .map(lbl -> PoliciesModelFactory.newPolicyEntry(lbl, getFinalSubjects(lbl), getFinalResources(lbl)))\n                .collect(Collectors.toList());\n\n        return ImmutablePolicy.of(id, lifecycle, revision, modified, created, policyEntries);\n    }", "signature": "Policy build()", "full_signature": "@Override public Policy build()", "class_method_signature": "ImmutablePolicyBuilder.build()", "testcase": false, "constructor": false, "invocations": ["getAllLabels", "collect", "map", "stream", "newPolicyEntry", "getFinalSubjects", "getFinalResources", "toList", "of"]}, "repository": {"repo_id": 87849739, "url": "https://github.com/eclipse/ditto", "stars": 139, "created": "4/10/2017 7:29:57 PM +00:00", "updates": "2020-01-27T14:02:39+00:00", "fork": "False", "license": "licensed"}}