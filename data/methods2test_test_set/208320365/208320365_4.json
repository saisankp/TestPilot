{"test_class": {"identifier": "AsyncSqsClientImplTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private AsyncSqsClient asyncClient;", "modifier": "private", "type": "AsyncSqsClient", "declarator": "asyncClient", "var_name": "asyncClient"}, {"original_string": "private SqsAsyncClient awsAsyncSqsClient;", "modifier": "private", "type": "SqsAsyncClient", "declarator": "awsAsyncSqsClient", "var_name": "awsAsyncSqsClient"}, {"original_string": "private ArgumentCaptor<SendMessageRequest> sentRequest;", "modifier": "private", "type": "ArgumentCaptor<SendMessageRequest>", "declarator": "sentRequest", "var_name": "sentRequest"}, {"original_string": "private ThreadPoolExecutor executor;", "modifier": "private", "type": "ThreadPoolExecutor", "declarator": "executor", "var_name": "executor"}, {"original_string": "private AsyncConveyorMetrics metrics;", "modifier": "private", "type": "AsyncConveyorMetrics", "declarator": "metrics", "var_name": "metrics"}], "file": "conveyor/src/test/java/com/airbnb/conveyor/async/AsyncSqsClientImplTest.java"}, "test_case": {"identifier": "testAsyncConsumeConsumption", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n  public void testAsyncConsumeConsumption() {\n    urlSetup(\"testQueue\", \"testUrl\");\n    receiveSetup();\n    deleteSetup();\n    AsyncConsumer<String> function = (str, threadpool) -> CompletableFuture.completedFuture(null);\n    CompletableFuture<Boolean> result = asyncClient.consume(function, \"testQueue\");\n\n    // testing final result\n    assertTrue(result.join());\n  }", "signature": "void testAsyncConsumeConsumption()", "full_signature": "@Test public void testAsyncConsumeConsumption()", "class_method_signature": "AsyncSqsClientImplTest.testAsyncConsumeConsumption()", "testcase": true, "constructor": false, "invocations": ["urlSetup", "receiveSetup", "deleteSetup", "completedFuture", "consume", "assertTrue", "join"]}, "focal_class": {"identifier": "AsyncSqsClientImpl", "superclass": "", "interfaces": "implements AsyncSqsClient", "fields": [{"original_string": "@Getter final SqsAsyncClient client;", "modifier": "@Getter final", "type": "SqsAsyncClient", "declarator": "client", "var_name": "client"}, {"original_string": "@Getter final AsyncConveyorMetrics metrics;", "modifier": "@Getter final", "type": "AsyncConveyorMetrics", "declarator": "metrics", "var_name": "metrics"}, {"original_string": "private final AsyncLoadingCache<String, String> urlCache;", "modifier": "private final", "type": "AsyncLoadingCache<String, String>", "declarator": "urlCache", "var_name": "urlCache"}, {"original_string": "private final ExecutorService executor;", "modifier": "private final", "type": "ExecutorService", "declarator": "executor", "var_name": "executor"}, {"original_string": "private final int receiveWaitTimeoutSeconds;", "modifier": "private final", "type": "int", "declarator": "receiveWaitTimeoutSeconds", "var_name": "receiveWaitTimeoutSeconds"}, {"original_string": "private final Bulkhead bulkhead;", "modifier": "private final", "type": "Bulkhead", "declarator": "bulkhead", "var_name": "bulkhead"}], "methods": [{"identifier": "AsyncSqsClientImpl", "parameters": "(\n      @NonNull final SqsAsyncClient client,\n      @NonNull final AsyncConveyorMetrics metrics,\n      @NonNull final ExecutorService executor)", "modifiers": "@Inject", "return": "", "signature": " AsyncSqsClientImpl(\n      @NonNull final SqsAsyncClient client,\n      @NonNull final AsyncConveyorMetrics metrics,\n      @NonNull final ExecutorService executor)", "full_signature": "@Inject  AsyncSqsClientImpl(\n      @NonNull final SqsAsyncClient client,\n      @NonNull final AsyncConveyorMetrics metrics,\n      @NonNull final ExecutorService executor)", "class_method_signature": "AsyncSqsClientImpl.AsyncSqsClientImpl(\n      @NonNull final SqsAsyncClient client,\n      @NonNull final AsyncConveyorMetrics metrics,\n      @NonNull final ExecutorService executor)", "testcase": false, "constructor": true}, {"identifier": "AsyncSqsClientImpl", "parameters": "(\n      @NonNull final SqsAsyncClient client,\n      @NonNull final AsyncConveyorMetrics metrics,\n      @NonNull final ExecutorService executor,\n      long maxCacheSize,\n      int receiveWaitTimeoutSeconds,\n      int bulkheadMaxWaitMillis,\n      int consumerConcurrency)", "modifiers": "", "return": "", "signature": " AsyncSqsClientImpl(\n      @NonNull final SqsAsyncClient client,\n      @NonNull final AsyncConveyorMetrics metrics,\n      @NonNull final ExecutorService executor,\n      long maxCacheSize,\n      int receiveWaitTimeoutSeconds,\n      int bulkheadMaxWaitMillis,\n      int consumerConcurrency)", "full_signature": "  AsyncSqsClientImpl(\n      @NonNull final SqsAsyncClient client,\n      @NonNull final AsyncConveyorMetrics metrics,\n      @NonNull final ExecutorService executor,\n      long maxCacheSize,\n      int receiveWaitTimeoutSeconds,\n      int bulkheadMaxWaitMillis,\n      int consumerConcurrency)", "class_method_signature": "AsyncSqsClientImpl.AsyncSqsClientImpl(\n      @NonNull final SqsAsyncClient client,\n      @NonNull final AsyncConveyorMetrics metrics,\n      @NonNull final ExecutorService executor,\n      long maxCacheSize,\n      int receiveWaitTimeoutSeconds,\n      int bulkheadMaxWaitMillis,\n      int consumerConcurrency)", "testcase": false, "constructor": true}, {"identifier": "getQueueUrl", "parameters": "(@NonNull final String queueName)", "modifiers": "private", "return": "CompletableFuture<String>", "signature": "CompletableFuture<String> getQueueUrl(@NonNull final String queueName)", "full_signature": "private CompletableFuture<String> getQueueUrl(@NonNull final String queueName)", "class_method_signature": "AsyncSqsClientImpl.getQueueUrl(@NonNull final String queueName)", "testcase": false, "constructor": false}, {"identifier": "initUrlCache", "parameters": "(long maxCacheSize)", "modifiers": "private", "return": "AsyncLoadingCache<String, String>", "signature": "AsyncLoadingCache<String, String> initUrlCache(long maxCacheSize)", "full_signature": "private AsyncLoadingCache<String, String> initUrlCache(long maxCacheSize)", "class_method_signature": "AsyncSqsClientImpl.initUrlCache(long maxCacheSize)", "testcase": false, "constructor": false}, {"identifier": "getMessage", "parameters": "(@NonNull final String queueName)", "modifiers": "private", "return": "CompletableFuture<ReceiveMessageResponse>", "signature": "CompletableFuture<ReceiveMessageResponse> getMessage(@NonNull final String queueName)", "full_signature": "private CompletableFuture<ReceiveMessageResponse> getMessage(@NonNull final String queueName)", "class_method_signature": "AsyncSqsClientImpl.getMessage(@NonNull final String queueName)", "testcase": false, "constructor": false}, {"identifier": "deleteMessage", "parameters": "(\n      @NonNull final String queueName, @NonNull final String messageReceipt)", "modifiers": "private", "return": "CompletableFuture<DeleteMessageResponse>", "signature": "CompletableFuture<DeleteMessageResponse> deleteMessage(\n      @NonNull final String queueName, @NonNull final String messageReceipt)", "full_signature": "private CompletableFuture<DeleteMessageResponse> deleteMessage(\n      @NonNull final String queueName, @NonNull final String messageReceipt)", "class_method_signature": "AsyncSqsClientImpl.deleteMessage(\n      @NonNull final String queueName, @NonNull final String messageReceipt)", "testcase": false, "constructor": false}, {"identifier": "setMessageVisibility", "parameters": "(\n      @NonNull final String queueName, @NonNull final String messageReceipt)", "modifiers": "private", "return": "void", "signature": "void setMessageVisibility(\n      @NonNull final String queueName, @NonNull final String messageReceipt)", "full_signature": "private void setMessageVisibility(\n      @NonNull final String queueName, @NonNull final String messageReceipt)", "class_method_signature": "AsyncSqsClientImpl.setMessageVisibility(\n      @NonNull final String queueName, @NonNull final String messageReceipt)", "testcase": false, "constructor": false}, {"identifier": "consumePostProcess", "parameters": "(\n      @NonNull final String queueName,\n      @NonNull final String messageReceipt,\n      @NonNull CompletableFuture<Boolean> ret,\n      @NonNull CompletableFuture<Void> computation,\n      Stopwatch stopwatch)", "modifiers": "private", "return": "void", "signature": "void consumePostProcess(\n      @NonNull final String queueName,\n      @NonNull final String messageReceipt,\n      @NonNull CompletableFuture<Boolean> ret,\n      @NonNull CompletableFuture<Void> computation,\n      Stopwatch stopwatch)", "full_signature": "private void consumePostProcess(\n      @NonNull final String queueName,\n      @NonNull final String messageReceipt,\n      @NonNull CompletableFuture<Boolean> ret,\n      @NonNull CompletableFuture<Void> computation,\n      Stopwatch stopwatch)", "class_method_signature": "AsyncSqsClientImpl.consumePostProcess(\n      @NonNull final String queueName,\n      @NonNull final String messageReceipt,\n      @NonNull CompletableFuture<Boolean> ret,\n      @NonNull CompletableFuture<Void> computation,\n      Stopwatch stopwatch)", "testcase": false, "constructor": false}, {"identifier": "consumeInternal", "parameters": "(\n      BiFunction<String, Executor, CompletableFuture<Void>> compute,\n      @NonNull final String queueName)", "modifiers": "private", "return": "CompletableFuture<Boolean>", "signature": "CompletableFuture<Boolean> consumeInternal(\n      BiFunction<String, Executor, CompletableFuture<Void>> compute,\n      @NonNull final String queueName)", "full_signature": "private CompletableFuture<Boolean> consumeInternal(\n      BiFunction<String, Executor, CompletableFuture<Void>> compute,\n      @NonNull final String queueName)", "class_method_signature": "AsyncSqsClientImpl.consumeInternal(\n      BiFunction<String, Executor, CompletableFuture<Void>> compute,\n      @NonNull final String queueName)", "testcase": false, "constructor": false}, {"identifier": "add", "parameters": "(\n      @NonNull final String message, @NonNull final String queueName)", "modifiers": "@Override public", "return": "CompletableFuture<Void>", "signature": "CompletableFuture<Void> add(\n      @NonNull final String message, @NonNull final String queueName)", "full_signature": "@Override public CompletableFuture<Void> add(\n      @NonNull final String message, @NonNull final String queueName)", "class_method_signature": "AsyncSqsClientImpl.add(\n      @NonNull final String message, @NonNull final String queueName)", "testcase": false, "constructor": false}, {"identifier": "add", "parameters": "(\n      @NonNull final String message, @NonNull final String queueName, int delaySeconds)", "modifiers": "@Override public", "return": "CompletableFuture<Void>", "signature": "CompletableFuture<Void> add(\n      @NonNull final String message, @NonNull final String queueName, int delaySeconds)", "full_signature": "@Override public CompletableFuture<Void> add(\n      @NonNull final String message, @NonNull final String queueName, int delaySeconds)", "class_method_signature": "AsyncSqsClientImpl.add(\n      @NonNull final String message, @NonNull final String queueName, int delaySeconds)", "testcase": false, "constructor": false}, {"identifier": "consume", "parameters": "(\n      @NonNull final Consumer<String> consumer, @NonNull final String queueName)", "modifiers": "@Override public", "return": "CompletableFuture<Boolean>", "signature": "CompletableFuture<Boolean> consume(\n      @NonNull final Consumer<String> consumer, @NonNull final String queueName)", "full_signature": "@Override public CompletableFuture<Boolean> consume(\n      @NonNull final Consumer<String> consumer, @NonNull final String queueName)", "class_method_signature": "AsyncSqsClientImpl.consume(\n      @NonNull final Consumer<String> consumer, @NonNull final String queueName)", "testcase": false, "constructor": false}, {"identifier": "consume", "parameters": "(AsyncConsumer<String> consumer, String queueName)", "modifiers": "@Override public", "return": "CompletableFuture<Boolean>", "signature": "CompletableFuture<Boolean> consume(AsyncConsumer<String> consumer, String queueName)", "full_signature": "@Override public CompletableFuture<Boolean> consume(AsyncConsumer<String> consumer, String queueName)", "class_method_signature": "AsyncSqsClientImpl.consume(AsyncConsumer<String> consumer, String queueName)", "testcase": false, "constructor": false}, {"identifier": "close", "parameters": "()", "modifiers": "@Override public", "return": "void", "signature": "void close()", "full_signature": "@Override public void close()", "class_method_signature": "AsyncSqsClientImpl.close()", "testcase": false, "constructor": false}], "file": "conveyor/src/main/java/com/airbnb/conveyor/async/AsyncSqsClientImpl.java"}, "focal_method": {"identifier": "consume", "parameters": "(\n      @NonNull final Consumer<String> consumer, @NonNull final String queueName)", "modifiers": "@Override public", "return": "CompletableFuture<Boolean>", "body": "@Override\n  public CompletableFuture<Boolean> consume(\n      @NonNull final Consumer<String> consumer, @NonNull final String queueName) {\n    return consumeInternal(\n        (body, executor) -> CompletableFuture.runAsync(() -> consumer.accept(body), executor),\n        queueName);\n  }", "signature": "CompletableFuture<Boolean> consume(\n      @NonNull final Consumer<String> consumer, @NonNull final String queueName)", "full_signature": "@Override public CompletableFuture<Boolean> consume(\n      @NonNull final Consumer<String> consumer, @NonNull final String queueName)", "class_method_signature": "AsyncSqsClientImpl.consume(\n      @NonNull final Consumer<String> consumer, @NonNull final String queueName)", "testcase": false, "constructor": false, "invocations": ["consumeInternal", "runAsync", "accept"]}, "repository": {"repo_id": 208320365, "url": "https://github.com/airbnb/dynein", "language": "Java", "is_fork": false, "fork_count": 9, "stargazer_count": 247, "size": 71, "license": "licensed"}}