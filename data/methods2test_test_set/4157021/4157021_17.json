{"test_class": {"identifier": "CategorizedCircularBufferTest", "superclass": "extends TestCase", "interfaces": "", "fields": [], "file": "src/core/services-impl/src/test/java/it/geosolutions/geostore/util/CategorizedCircularBufferTest.java"}, "test_case": {"identifier": "testAdd", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testAdd() {\n        CategorizedCircularBuffer<String, Long> ccb = new CategorizedCircularBuffer<String, Long>(4);\n\n        ccb.add(1L, \"e0\");\n        assertEquals(1, ccb.size());\n        assertEquals(1, ccb.sizeByKey(1L));\n        assertEquals(0, ccb.sizeByKey(999L));\n\n        ccb.add(1L, \"e1\");\n        assertEquals(2, ccb.size());\n        assertEquals(2, ccb.sizeByKey(1L));\n        assertEquals(0, ccb.sizeByKey(999L));\n\n        ccb.add(2L, \"e2\");\n        assertEquals(3, ccb.size());\n        assertEquals(2, ccb.sizeByKey(1L));\n        assertEquals(1, ccb.sizeByKey(2L));\n        assertEquals(0, ccb.sizeByKey(999L));\n\n        ccb.add(3L, \"e2\");\n        assertEquals(4, ccb.size());\n\n        // size limit reached\n\n        ccb.add(4L, \"e0\");\n        assertEquals(4, ccb.size()); // size should be still 4\n        assertEquals(1, ccb.sizeByKey(1L)); // th first entry should have been removed\n    }", "signature": "void testAdd()", "full_signature": "@Test public void testAdd()", "class_method_signature": "CategorizedCircularBufferTest.testAdd()", "testcase": true, "constructor": false, "invocations": ["add", "assertEquals", "size", "assertEquals", "sizeByKey", "assertEquals", "sizeByKey", "add", "assertEquals", "size", "assertEquals", "sizeByKey", "assertEquals", "sizeByKey", "add", "assertEquals", "size", "assertEquals", "sizeByKey", "assertEquals", "sizeByKey", "assertEquals", "sizeByKey", "add", "assertEquals", "size", "add", "assertEquals", "size", "assertEquals", "sizeByKey"]}, "focal_class": {"identifier": "CategorizedCircularBuffer", "superclass": "", "interfaces": "", "fields": [{"original_string": "private final int maxSize;", "modifier": "private final", "type": "int", "declarator": "maxSize", "var_name": "maxSize"}, {"original_string": "LinkedList<Pair<T, K>> mainList;", "modifier": "", "type": "LinkedList<Pair<T, K>>", "declarator": "mainList", "var_name": "mainList"}, {"original_string": "private Map<K, LinkedList<T>> typedLists = new HashMap<K, LinkedList<T>>();", "modifier": "private", "type": "Map<K, LinkedList<T>>", "declarator": "typedLists = new HashMap<K, LinkedList<T>>()", "var_name": "typedLists"}], "methods": [{"identifier": "CategorizedCircularBuffer", "parameters": "(int maxCount)", "modifiers": "public", "return": "", "signature": " CategorizedCircularBuffer(int maxCount)", "full_signature": "public  CategorizedCircularBuffer(int maxCount)", "class_method_signature": "CategorizedCircularBuffer.CategorizedCircularBuffer(int maxCount)", "testcase": false, "constructor": true}, {"identifier": "add", "parameters": "(K key, T value)", "modifiers": "public", "return": "void", "signature": "void add(K key, T value)", "full_signature": "public void add(K key, T value)", "class_method_signature": "CategorizedCircularBuffer.add(K key, T value)", "testcase": false, "constructor": false}, {"identifier": "removeLastEntry", "parameters": "()", "modifiers": "private", "return": "void", "signature": "void removeLastEntry()", "full_signature": "private void removeLastEntry()", "class_method_signature": "CategorizedCircularBuffer.removeLastEntry()", "testcase": false, "constructor": false}, {"identifier": "subList", "parameters": "(int fromIndex, int toIndex)", "modifiers": "public", "return": "List<T>", "signature": "List<T> subList(int fromIndex, int toIndex)", "full_signature": "public List<T> subList(int fromIndex, int toIndex)", "class_method_signature": "CategorizedCircularBuffer.subList(int fromIndex, int toIndex)", "testcase": false, "constructor": false}, {"identifier": "size", "parameters": "()", "modifiers": "public", "return": "int", "signature": "int size()", "full_signature": "public int size()", "class_method_signature": "CategorizedCircularBuffer.size()", "testcase": false, "constructor": false}, {"identifier": "subListByKey", "parameters": "(K key, int fromIndex, int toIndex)", "modifiers": "@SuppressWarnings(\"unchecked\") public", "return": "List<T>", "signature": "List<T> subListByKey(K key, int fromIndex, int toIndex)", "full_signature": "@SuppressWarnings(\"unchecked\") public List<T> subListByKey(K key, int fromIndex, int toIndex)", "class_method_signature": "CategorizedCircularBuffer.subListByKey(K key, int fromIndex, int toIndex)", "testcase": false, "constructor": false}, {"identifier": "sizeByKey", "parameters": "(K key)", "modifiers": "public", "return": "int", "signature": "int sizeByKey(K key)", "full_signature": "public int sizeByKey(K key)", "class_method_signature": "CategorizedCircularBuffer.sizeByKey(K key)", "testcase": false, "constructor": false}], "file": "src/core/services-impl/src/main/java/it/geosolutions/geostore/util/CategorizedCircularBuffer.java"}, "focal_method": {"identifier": "add", "parameters": "(K key, T value)", "modifiers": "public", "return": "void", "body": "public void add(K key, T value) {\n        // add to main list\n        mainList.addFirst(new Pair<T, K>(key, value));\n        while (mainList.size() > maxSize) {\n            removeLastEntry();\n        }\n\n        LinkedList<T> typedList = typedLists.get(key);\n        if (typedList == null) {\n            typedList = new LinkedList<T>();\n            typedLists.put(key, typedList);\n        }\n        typedList.addFirst(value);\n    }", "signature": "void add(K key, T value)", "full_signature": "public void add(K key, T value)", "class_method_signature": "CategorizedCircularBuffer.add(K key, T value)", "testcase": false, "constructor": false, "invocations": ["addFirst", "size", "removeLastEntry", "get", "put", "addFirst"]}, "repository": {"repo_id": 4157021, "url": "https://github.com/geosolutions-it/geostore", "language": "Java", "is_fork": false, "fork_count": 35, "stargazer_count": 19, "size": 1798, "license": "licensed"}}