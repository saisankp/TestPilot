{"test_class": {"identifier": "SimpleCaptchaGeneratorTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "static final int validInSeconds = 3;", "modifier": "static final", "type": "int", "declarator": "validInSeconds = 3", "var_name": "validInSeconds"}, {"original_string": "static private final CaptchaChecker checker = new HashCaptchaChecker(\"test\", validInSeconds);", "modifier": "static private final", "type": "CaptchaChecker", "declarator": "checker = new HashCaptchaChecker(\"test\", validInSeconds)", "var_name": "checker"}], "file": "core/modules/web/src/test/java/org/onetwo/common/web/captcha/SimpleCaptchaGeneratorTest.java"}, "test_case": {"identifier": "testGenerate", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n\tpublic void testGenerate(){\n\t\tCaptchaSettings settings = new CaptchaSettings();\n\t\tsettings.setWidth(400);\n\t\tsettings.setHeight(100);\n\t\tsettings.setPuzzleLineCount(50);\n//\t\tsettings.setCodeColor(\"255, 0, 0\");\n//\t\tsettings.setFontHeight(0.8);\n\t\tSimpleCaptchaGenerator generator = new SimpleCaptchaGenerator();\n\t\tCaptchaResult res = generator.writeTo(settings, \"/data/tmp/captcha.png\");\n\t\t\n\t\tCaptchaSignedResult signed = checker.encode(res.getCode());\n\t\tboolean checked = checker.check(res.getCode(), signed.getSigned());\n\t\tassertThat(checked).isTrue();\n\t\t\n\t\tLangUtils.await(validInSeconds);\n\t\tchecked = checker.check(res.getCode(), signed.getSigned());\n\t\tassertThat(checked).isFalse();\n\t}", "signature": "void testGenerate()", "full_signature": "@Test public void testGenerate()", "class_method_signature": "SimpleCaptchaGeneratorTest.testGenerate()", "testcase": true, "constructor": false, "invocations": ["setWidth", "setHeight", "setPuzzleLineCount", "writeTo", "encode", "getCode", "check", "getCode", "getSigned", "isTrue", "assertThat", "await", "check", "getCode", "getSigned", "isFalse", "assertThat"]}, "focal_class": {"identifier": "SimpleCaptchaGenerator", "superclass": "", "interfaces": "", "fields": [{"original_string": "public static final int MAX_RGB = 255;", "modifier": "public static final", "type": "int", "declarator": "MAX_RGB = 255", "var_name": "MAX_RGB"}], "methods": [{"identifier": "writeTo", "parameters": "(CaptchaSettings settings, OutputStream output)", "modifiers": "public", "return": "CaptchaResult", "signature": "CaptchaResult writeTo(CaptchaSettings settings, OutputStream output)", "full_signature": "public CaptchaResult writeTo(CaptchaSettings settings, OutputStream output)", "class_method_signature": "SimpleCaptchaGenerator.writeTo(CaptchaSettings settings, OutputStream output)", "testcase": false, "constructor": false}, {"identifier": "writeTo", "parameters": "(CaptchaSettings settings, String path)", "modifiers": "public", "return": "CaptchaResult", "signature": "CaptchaResult writeTo(CaptchaSettings settings, String path)", "full_signature": "public CaptchaResult writeTo(CaptchaSettings settings, String path)", "class_method_signature": "SimpleCaptchaGenerator.writeTo(CaptchaSettings settings, String path)", "testcase": false, "constructor": false}, {"identifier": "generate", "parameters": "(CaptchaSettings settings)", "modifiers": "public", "return": "CaptchaResult", "signature": "CaptchaResult generate(CaptchaSettings settings)", "full_signature": "public CaptchaResult generate(CaptchaSettings settings)", "class_method_signature": "SimpleCaptchaGenerator.generate(CaptchaSettings settings)", "testcase": false, "constructor": false}, {"identifier": "drawBorder", "parameters": "(Graphics2D g2d, CaptchaSettings settings)", "modifiers": "protected", "return": "void", "signature": "void drawBorder(Graphics2D g2d, CaptchaSettings settings)", "full_signature": "protected void drawBorder(Graphics2D g2d, CaptchaSettings settings)", "class_method_signature": "SimpleCaptchaGenerator.drawBorder(Graphics2D g2d, CaptchaSettings settings)", "testcase": false, "constructor": false}, {"identifier": "drawPuzzleLines", "parameters": "(Graphics2D g2d, CaptchaSettings settings)", "modifiers": "protected", "return": "void", "signature": "void drawPuzzleLines(Graphics2D g2d, CaptchaSettings settings)", "full_signature": "protected void drawPuzzleLines(Graphics2D g2d, CaptchaSettings settings)", "class_method_signature": "SimpleCaptchaGenerator.drawPuzzleLines(Graphics2D g2d, CaptchaSettings settings)", "testcase": false, "constructor": false}, {"identifier": "drawCodes", "parameters": "(Graphics2D g2d, CaptchaSettings settings, String codes)", "modifiers": "protected", "return": "void", "signature": "void drawCodes(Graphics2D g2d, CaptchaSettings settings, String codes)", "full_signature": "protected void drawCodes(Graphics2D g2d, CaptchaSettings settings, String codes)", "class_method_signature": "SimpleCaptchaGenerator.drawCodes(Graphics2D g2d, CaptchaSettings settings, String codes)", "testcase": false, "constructor": false}, {"identifier": "getRandom", "parameters": "()", "modifiers": "protected", "return": "Random", "signature": "Random getRandom()", "full_signature": "protected Random getRandom()", "class_method_signature": "SimpleCaptchaGenerator.getRandom()", "testcase": false, "constructor": false}, {"identifier": "getRandomColor", "parameters": "(Random random)", "modifiers": "private", "return": "Color", "signature": "Color getRandomColor(Random random)", "full_signature": "private Color getRandomColor(Random random)", "class_method_signature": "SimpleCaptchaGenerator.getRandomColor(Random random)", "testcase": false, "constructor": false}], "file": "core/modules/web/src/main/java/org/onetwo/common/web/captcha/SimpleCaptchaGenerator.java"}, "focal_method": {"identifier": "generate", "parameters": "(CaptchaSettings settings)", "modifiers": "public", "return": "CaptchaResult", "body": "public CaptchaResult generate(CaptchaSettings settings){\n\t\tint width = settings.getWidth();\n\t\tint height = settings.getHeight();\n\t\t//\u521b\u5efa\u56fe\u7247\u7f13\u51b2\u5668\n\t\tBufferedImage bufImg = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);\n\t\t//\u521b\u5efa2d\u56fe\u5f62\u5f15\u64ce\n\t\tGraphics2D g2d = bufImg.createGraphics();\n\t\t\n\t\t//fillRect(int x,int y,int width,int height)\uff1a\u662f\u7528\u9884\u5b9a\u7684\u989c\u8272\u586b\u5145\u4e00\u4e2a\u77e9\u5f62\uff0c\u5f97\u5230\u4e00\u4e2a\u7740\u8272\u7684\u77e9\u5f62\u5757\u3002\n\t\tg2d.fillRect(0, 0, width, height);\n\t\t\n\t\tdrawBorder(g2d, settings);\n\t\tdrawPuzzleLines(g2d, settings);\n\n\t\tString codes = RandomStringUtils.randomAlphanumeric(settings.getCodeLength()).toUpperCase();\n\t\tdrawCodes(g2d, settings, codes);\n\t\tCaptchaResult result = new CaptchaResult(codes);\n\t\t\n\t\tByteArrayOutputStream bos = new ByteArrayOutputStream(128);\n\t\tFileUtils.writeToStream(bufImg, settings.getImageFormatName(), bos);\n\t\tresult.setData(bos.toByteArray());\n\t\t\n\t\treturn result;\n\t}", "signature": "CaptchaResult generate(CaptchaSettings settings)", "full_signature": "public CaptchaResult generate(CaptchaSettings settings)", "class_method_signature": "SimpleCaptchaGenerator.generate(CaptchaSettings settings)", "testcase": false, "constructor": false, "invocations": ["getWidth", "getHeight", "createGraphics", "fillRect", "drawBorder", "drawPuzzleLines", "toUpperCase", "randomAlphanumeric", "getCodeLength", "drawCodes", "writeToStream", "getImageFormatName", "setData", "toByteArray"]}, "repository": {"repo_id": 47802308, "url": "https://github.com/wayshall/onetwo", "language": "Java", "is_fork": false, "fork_count": 10, "stargazer_count": 16, "size": 57582, "license": "licensed"}}