{"test_class": {"identifier": "SetAlarmNotificationsCommandExecutorTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private DlmsDevice device;", "modifier": "private", "type": "DlmsDevice", "declarator": "device", "var_name": "device"}, {"original_string": "private CommandExecutor<AlarmNotificationsDto, AccessResultCode> executor;", "modifier": "private", "type": "CommandExecutor<AlarmNotificationsDto, AccessResultCode>", "declarator": "executor", "var_name": "executor"}, {"original_string": "private List<SetParameter> setParametersReceived;", "modifier": "private", "type": "List<SetParameter>", "declarator": "setParametersReceived", "var_name": "setParametersReceived"}, {"original_string": "private DlmsConnectionManager connMgr;", "modifier": "private", "type": "DlmsConnectionManager", "declarator": "connMgr", "var_name": "connMgr"}], "file": "osgp/protocol-adapter-dlms/osgp-protocol-adapter-dlms/src/test/java/org/opensmartgridplatform/adapter/protocol/dlms/domain/commands/alarm/SetAlarmNotificationsCommandExecutorTest.java"}, "test_case": {"identifier": "testSetSettingThatIsAlreadySet", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testSetSettingThatIsAlreadySet() throws OsgpException {\n        // Setting notifications that are not different from what is on the\n        // meter already,\n        // should always be successful.\n        final AccessResultCode res = this.execute(new AlarmNotificationDto(AlarmTypeDto.REPLACE_BATTERY, true));\n        assertThat(res).isEqualTo(AccessResultCode.SUCCESS);\n        // Since nothing changed, not a single message should have been sent to\n        // the meter.\n        assertThat(this.setParametersReceived.size()).isEqualTo(0);\n    }", "signature": "void testSetSettingThatIsAlreadySet()", "full_signature": "@Test public void testSetSettingThatIsAlreadySet()", "class_method_signature": "SetAlarmNotificationsCommandExecutorTest.testSetSettingThatIsAlreadySet()", "testcase": true, "constructor": false, "invocations": ["execute", "isEqualTo", "assertThat", "isEqualTo", "assertThat", "size"]}, "focal_class": {"identifier": "SetAlarmNotificationsCommandExecutor", "superclass": "extends AbstractCommandExecutor<AlarmNotificationsDto, AccessResultCode>", "interfaces": "", "fields": [{"original_string": "private static final Logger LOGGER = LoggerFactory.getLogger(SetAlarmNotificationsCommandExecutor.class);", "modifier": "private static final", "type": "Logger", "declarator": "LOGGER = LoggerFactory.getLogger(SetAlarmNotificationsCommandExecutor.class)", "var_name": "LOGGER"}, {"original_string": "private static final int NUMBER_OF_BITS_IN_ALARM_FILTER = 32;", "modifier": "private static final", "type": "int", "declarator": "NUMBER_OF_BITS_IN_ALARM_FILTER = 32", "var_name": "NUMBER_OF_BITS_IN_ALARM_FILTER"}, {"original_string": "private final AlarmHelperService alarmHelperService = new AlarmHelperService();", "modifier": "private final", "type": "AlarmHelperService", "declarator": "alarmHelperService = new AlarmHelperService()", "var_name": "alarmHelperService"}, {"original_string": "private final DlmsObjectConfigService dlmsObjectConfigService;", "modifier": "private final", "type": "DlmsObjectConfigService", "declarator": "dlmsObjectConfigService", "var_name": "dlmsObjectConfigService"}], "methods": [{"identifier": "SetAlarmNotificationsCommandExecutor", "parameters": "(final DlmsObjectConfigService dlmsObjectConfigService)", "modifiers": "@Autowired public", "return": "", "signature": " SetAlarmNotificationsCommandExecutor(final DlmsObjectConfigService dlmsObjectConfigService)", "full_signature": "@Autowired public  SetAlarmNotificationsCommandExecutor(final DlmsObjectConfigService dlmsObjectConfigService)", "class_method_signature": "SetAlarmNotificationsCommandExecutor.SetAlarmNotificationsCommandExecutor(final DlmsObjectConfigService dlmsObjectConfigService)", "testcase": false, "constructor": true}, {"identifier": "fromBundleRequestInput", "parameters": "(final ActionRequestDto bundleInput)", "modifiers": "@Override public", "return": "AlarmNotificationsDto", "signature": "AlarmNotificationsDto fromBundleRequestInput(final ActionRequestDto bundleInput)", "full_signature": "@Override public AlarmNotificationsDto fromBundleRequestInput(final ActionRequestDto bundleInput)", "class_method_signature": "SetAlarmNotificationsCommandExecutor.fromBundleRequestInput(final ActionRequestDto bundleInput)", "testcase": false, "constructor": false}, {"identifier": "asBundleResponse", "parameters": "(final AccessResultCode executionResult)", "modifiers": "@Override public", "return": "ActionResponseDto", "signature": "ActionResponseDto asBundleResponse(final AccessResultCode executionResult)", "full_signature": "@Override public ActionResponseDto asBundleResponse(final AccessResultCode executionResult)", "class_method_signature": "SetAlarmNotificationsCommandExecutor.asBundleResponse(final AccessResultCode executionResult)", "testcase": false, "constructor": false}, {"identifier": "execute", "parameters": "(final DlmsConnectionManager conn, final DlmsDevice device,\n            final AlarmNotificationsDto alarmNotifications)", "modifiers": "@Override public", "return": "AccessResultCode", "signature": "AccessResultCode execute(final DlmsConnectionManager conn, final DlmsDevice device,\n            final AlarmNotificationsDto alarmNotifications)", "full_signature": "@Override public AccessResultCode execute(final DlmsConnectionManager conn, final DlmsDevice device,\n            final AlarmNotificationsDto alarmNotifications)", "class_method_signature": "SetAlarmNotificationsCommandExecutor.execute(final DlmsConnectionManager conn, final DlmsDevice device,\n            final AlarmNotificationsDto alarmNotifications)", "testcase": false, "constructor": false}, {"identifier": "retrieveCurrentAlarmNotifications", "parameters": "(final DlmsConnectionManager conn,\n                                                                    final AttributeAddress alarmFilterValue)", "modifiers": "private", "return": "AlarmNotificationsDto", "signature": "AlarmNotificationsDto retrieveCurrentAlarmNotifications(final DlmsConnectionManager conn,\n                                                                    final AttributeAddress alarmFilterValue)", "full_signature": "private AlarmNotificationsDto retrieveCurrentAlarmNotifications(final DlmsConnectionManager conn,\n                                                                    final AttributeAddress alarmFilterValue)", "class_method_signature": "SetAlarmNotificationsCommandExecutor.retrieveCurrentAlarmNotifications(final DlmsConnectionManager conn,\n                                                                    final AttributeAddress alarmFilterValue)", "testcase": false, "constructor": false}, {"identifier": "writeUpdatedAlarmNotifications", "parameters": "(final DlmsConnectionManager conn,\n                                                            final long alarmFilterLongValue,\n                                                            final AttributeAddress alarmFilterValue)", "modifiers": "private", "return": "AccessResultCode", "signature": "AccessResultCode writeUpdatedAlarmNotifications(final DlmsConnectionManager conn,\n                                                            final long alarmFilterLongValue,\n                                                            final AttributeAddress alarmFilterValue)", "full_signature": "private AccessResultCode writeUpdatedAlarmNotifications(final DlmsConnectionManager conn,\n                                                            final long alarmFilterLongValue,\n                                                            final AttributeAddress alarmFilterValue)", "class_method_signature": "SetAlarmNotificationsCommandExecutor.writeUpdatedAlarmNotifications(final DlmsConnectionManager conn,\n                                                            final long alarmFilterLongValue,\n                                                            final AttributeAddress alarmFilterValue)", "testcase": false, "constructor": false}, {"identifier": "alarmNotifications", "parameters": "(final DataObject alarmFilter)", "modifiers": "private", "return": "AlarmNotificationsDto", "signature": "AlarmNotificationsDto alarmNotifications(final DataObject alarmFilter)", "full_signature": "private AlarmNotificationsDto alarmNotifications(final DataObject alarmFilter)", "class_method_signature": "SetAlarmNotificationsCommandExecutor.alarmNotifications(final DataObject alarmFilter)", "testcase": false, "constructor": false}, {"identifier": "calculateAlarmFilterLongValue", "parameters": "(final AlarmNotificationsDto alarmNotificationsOnDevice,\n            final AlarmNotificationsDto alarmNotificationsToSet)", "modifiers": "private", "return": "long", "signature": "long calculateAlarmFilterLongValue(final AlarmNotificationsDto alarmNotificationsOnDevice,\n            final AlarmNotificationsDto alarmNotificationsToSet)", "full_signature": "private long calculateAlarmFilterLongValue(final AlarmNotificationsDto alarmNotificationsOnDevice,\n            final AlarmNotificationsDto alarmNotificationsToSet)", "class_method_signature": "SetAlarmNotificationsCommandExecutor.calculateAlarmFilterLongValue(final AlarmNotificationsDto alarmNotificationsOnDevice,\n            final AlarmNotificationsDto alarmNotificationsToSet)", "testcase": false, "constructor": false}, {"identifier": "alarmNotifications", "parameters": "(final long alarmFilterLongValue)", "modifiers": "private", "return": "AlarmNotificationsDto", "signature": "AlarmNotificationsDto alarmNotifications(final long alarmFilterLongValue)", "full_signature": "private AlarmNotificationsDto alarmNotifications(final long alarmFilterLongValue)", "class_method_signature": "SetAlarmNotificationsCommandExecutor.alarmNotifications(final long alarmFilterLongValue)", "testcase": false, "constructor": false}, {"identifier": "alarmFilterLongValue", "parameters": "(final AlarmNotificationsDto alarmNotifications)", "modifiers": "private", "return": "long", "signature": "long alarmFilterLongValue(final AlarmNotificationsDto alarmNotifications)", "full_signature": "private long alarmFilterLongValue(final AlarmNotificationsDto alarmNotifications)", "class_method_signature": "SetAlarmNotificationsCommandExecutor.alarmFilterLongValue(final AlarmNotificationsDto alarmNotifications)", "testcase": false, "constructor": false}, {"identifier": "getAttributeAddress", "parameters": "(final DlmsDevice device)", "modifiers": "private", "return": "AttributeAddress", "signature": "AttributeAddress getAttributeAddress(final DlmsDevice device)", "full_signature": "private AttributeAddress getAttributeAddress(final DlmsDevice device)", "class_method_signature": "SetAlarmNotificationsCommandExecutor.getAttributeAddress(final DlmsDevice device)", "testcase": false, "constructor": false}], "file": "osgp/protocol-adapter-dlms/osgp-protocol-adapter-dlms/src/main/java/org/opensmartgridplatform/adapter/protocol/dlms/domain/commands/alarm/SetAlarmNotificationsCommandExecutor.java"}, "focal_method": {"identifier": "execute", "parameters": "(final DlmsConnectionManager conn, final DlmsDevice device,\n            final AlarmNotificationsDto alarmNotifications)", "modifiers": "@Override public", "return": "AccessResultCode", "body": "@Override\n    public AccessResultCode execute(final DlmsConnectionManager conn, final DlmsDevice device,\n            final AlarmNotificationsDto alarmNotifications) throws ProtocolAdapterException {\n        try {\n            final AttributeAddress alarmFilterValue = this.getAttributeAddress(device);\n\n            final AlarmNotificationsDto alarmNotificationsOnDevice =\n                    this.retrieveCurrentAlarmNotifications(conn, alarmFilterValue);\n\n            LOGGER.info(\"Alarm Filter on device before setting notifications: {}\", alarmNotificationsOnDevice);\n\n            final long alarmFilterLongValueOnDevice = this.alarmFilterLongValue(alarmNotificationsOnDevice);\n            final long updatedAlarmFilterLongValue = this\n                    .calculateAlarmFilterLongValue(alarmNotificationsOnDevice, alarmNotifications);\n\n            if (alarmFilterLongValueOnDevice == updatedAlarmFilterLongValue) {\n                return AccessResultCode.SUCCESS;\n            }\n\n            LOGGER.info(\"Modified Alarm Filter long value for device: {}\", updatedAlarmFilterLongValue);\n\n            return this.writeUpdatedAlarmNotifications(conn, updatedAlarmFilterLongValue, alarmFilterValue);\n        } catch (final IOException e) {\n            throw new ConnectionException(e);\n        }\n    }", "signature": "AccessResultCode execute(final DlmsConnectionManager conn, final DlmsDevice device,\n            final AlarmNotificationsDto alarmNotifications)", "full_signature": "@Override public AccessResultCode execute(final DlmsConnectionManager conn, final DlmsDevice device,\n            final AlarmNotificationsDto alarmNotifications)", "class_method_signature": "SetAlarmNotificationsCommandExecutor.execute(final DlmsConnectionManager conn, final DlmsDevice device,\n            final AlarmNotificationsDto alarmNotifications)", "testcase": false, "constructor": false, "invocations": ["getAttributeAddress", "retrieveCurrentAlarmNotifications", "info", "alarmFilterLongValue", "calculateAlarmFilterLongValue", "info", "writeUpdatedAlarmNotifications"]}, "repository": {"repo_id": 154302277, "url": "https://github.com/OSGP/open-smart-grid-platform", "stars": 30, "created": "10/23/2018 9:41:12 AM +00:00", "updates": "2020-01-26T20:15:09+00:00", "fork": "False", "license": "licensed"}}