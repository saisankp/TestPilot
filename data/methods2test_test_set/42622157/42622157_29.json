{"test_class": {"identifier": "EdmmConverterTest", "superclass": "extends EdmmDependantTest", "interfaces": "", "fields": [], "file": "org.eclipse.winery.common/src/test/java/org/eclipse/winery/common/edmm/EdmmConverterTest.java"}, "test_case": {"identifier": "transformTopology", "parameters": "()", "modifiers": "@Test", "return": "void", "body": "@Test\n    void transformTopology() {\n        // region *** build the TopologyTemplate ***\n        TTopologyTemplate topology = new TTopologyTemplate();\n        topology.addNodeTemplate(nodeTemplates.get(\"test_node_1\"));\n        topology.addNodeTemplate(nodeTemplates.get(\"test_node_2\"));\n        topology.addNodeTemplate(nodeTemplates.get(\"test_node_3\"));\n        topology.addNodeTemplate(nodeTemplates.get(\"test_node_4\"));\n        topology.addRelationshipTemplate(relationshipTemplates.get(\"1_hosted_on_3\"));\n        topology.addRelationshipTemplate(relationshipTemplates.get(\"2_hosted_on_3\"));\n        topology.addRelationshipTemplate(relationshipTemplates.get(\"4_hosted_on_1\"));\n        topology.addRelationshipTemplate(relationshipTemplates.get(\"1_connects_to_2\"));\n        TServiceTemplate serviceTemplate = new TServiceTemplate();\n        serviceTemplate.setTopologyTemplate(topology);\n        // endregion\n\n        EdmmConverter edmmConverter = new EdmmConverter(nodeTypes, relationshipTypes, nodeTypeImplementations,\n            relationshipTypeImplementations, artifactTemplates, edmmTypeExtendsMapping, edmm1to1Mapping, false);\n        EntityGraph transform = edmmConverter.transform(serviceTemplate);\n        StringWriter stringWriter = new StringWriter();\n        transform.generateYamlOutput(stringWriter);\n\n        assertEquals(\"---\\n\" +\n            \"components:\\n\" +\n            \"  test_node_1:\\n\" +\n            \"    type: software_component\\n\" +\n            \"    relations:\\n\" +\n            \"    - hosted_on: test_node_3\\n\" +\n            \"    - connects_to: test_node_2\\n\" +\n            \"    artifacts:\\n\" +\n            \"    - war: /artifacttemplates/https%3A%2F%2Fex.org%2Ftosca%2Fto%2Fedmm/startTestNode4/files/script.sh\\n\" +\n            \"  test_node_3:\\n\" +\n            \"    type: https_ex.orgtoscatoedmm__test_node_type_3\\n\" +\n            \"    properties:\\n\" +\n            \"      public_key: '-----BEGIN PUBLIC KEY----- ... -----END PUBLIC KEY-----'\\n\" +\n            \"      ssh_port: '22'\\n\" +\n            \"      os_family: ubuntu\\n\" +\n            \"  test_node_2:\\n\" +\n            \"    type: https_ex.orgtoscatoedmm__test_node_type_2\\n\" +\n            \"    relations:\\n\" +\n            \"    - hosted_on: test_node_3\\n\" +\n            \"  test_node_4:\\n\" +\n            \"    operations:\\n\" +\n            \"      stop: /artifacttemplates/https%3A%2F%2Fex.org%2Ftosca%2Fto%2Fedmm/startTestNode4/files/script.sh\\n\" +\n            \"      start: /artifacttemplates/https%3A%2F%2Fex.org%2Ftosca%2Fto%2Fedmm/startTestNode4/files/script.sh\\n\" +\n            \"    type: https_ex.orgtoscatoedmm__test_node_type_4\\n\" +\n            \"    relations:\\n\" +\n            \"    - hosted_on: test_node_1\\n\" +\n            \"relation_types:\\n\" +\n            \"  depends_on:\\n\" +\n            \"    extends: null\\n\" +\n            \"  hosted_on:\\n\" +\n            \"    extends: depends_on\\n\" +\n            \"  connects_to:\\n\" +\n            \"    extends: depends_on\\n\" +\n            \"component_types:\\n\" +\n            \"  https_ex.orgtoscatoedmm__test_node_type_2:\\n\" +\n            \"    extends: software_component\\n\" +\n            \"  compute:\\n\" +\n            \"    extends: base\\n\" +\n            \"  https_ex.orgtoscatoedmm__test_node_type_3:\\n\" +\n            \"    extends: compute\\n\" +\n            \"    properties:\\n\" +\n            \"      public_key:\\n\" +\n            \"        type: string\\n\" +\n            \"      ssh_port:\\n\" +\n            \"        type: number\\n\" +\n            \"      os_family:\\n\" +\n            \"        type: string\\n\" +\n            \"  web_application:\\n\" +\n            \"    extends: base\\n\" +\n            \"  https_ex.orgtoscatoedmm__test_node_type_4:\\n\" +\n            \"    extends: web_application\\n\" +\n            \"  software_component:\\n\" +\n            \"    extends: base\\n\", stringWriter.toString());\n    }", "signature": "void transformTopology()", "full_signature": "@Test void transformTopology()", "class_method_signature": "EdmmConverterTest.transformTopology()", "testcase": true, "constructor": false, "invocations": ["addNodeTemplate", "get", "addNodeTemplate", "get", "addNodeTemplate", "get", "addNodeTemplate", "get", "addRelationshipTemplate", "get", "addRelationshipTemplate", "get", "addRelationshipTemplate", "get", "addRelationshipTemplate", "get", "setTopologyTemplate", "transform", "generateYamlOutput", "assertEquals", "toString"]}, "focal_class": {"identifier": "EdmmConverter", "superclass": "", "interfaces": "", "fields": [{"original_string": "private final Map<QName, TNodeType> nodeTypes;", "modifier": "private final", "type": "Map<QName, TNodeType>", "declarator": "nodeTypes", "var_name": "nodeTypes"}, {"original_string": "private final Map<QName, TRelationshipType> relationshipTypes;", "modifier": "private final", "type": "Map<QName, TRelationshipType>", "declarator": "relationshipTypes", "var_name": "relationshipTypes"}, {"original_string": "private final Map<QName, TNodeTypeImplementation> nodeTypeImplementations;", "modifier": "private final", "type": "Map<QName, TNodeTypeImplementation>", "declarator": "nodeTypeImplementations", "var_name": "nodeTypeImplementations"}, {"original_string": "private final Map<QName, TRelationshipTypeImplementation> relationshipTypeImplementations;", "modifier": "private final", "type": "Map<QName, TRelationshipTypeImplementation>", "declarator": "relationshipTypeImplementations", "var_name": "relationshipTypeImplementations"}, {"original_string": "private final Map<QName, TArtifactTemplate> artifactTemplates;", "modifier": "private final", "type": "Map<QName, TArtifactTemplate>", "declarator": "artifactTemplates", "var_name": "artifactTemplates"}, {"original_string": "private final Map<QName, EdmmType> edmmTypeMappings;", "modifier": "private final", "type": "Map<QName, EdmmType>", "declarator": "edmmTypeMappings", "var_name": "edmmTypeMappings"}, {"original_string": "private final Map<QName, EdmmType> oneToOneMappings;", "modifier": "private final", "type": "Map<QName, EdmmType>", "declarator": "oneToOneMappings", "var_name": "oneToOneMappings"}, {"original_string": "private final boolean useAbsolutePaths;", "modifier": "private final", "type": "boolean", "declarator": "useAbsolutePaths", "var_name": "useAbsolutePaths"}], "methods": [{"identifier": "EdmmConverter", "parameters": "(Map<QName, TNodeType> nodeTypes, Map<QName, TRelationshipType> relationshipTypes,\n                         Map<QName, TNodeTypeImplementation> nodeTypeImplementations,\n                         Map<QName, TRelationshipTypeImplementation> relationshipTypeImplementations,\n                         Map<QName, TArtifactTemplate> artifactTemplates,\n                         Map<QName, EdmmType> edmmTypeMappings, Map<QName, EdmmType> oneToOneMappings)", "modifiers": "public", "return": "", "signature": " EdmmConverter(Map<QName, TNodeType> nodeTypes, Map<QName, TRelationshipType> relationshipTypes,\n                         Map<QName, TNodeTypeImplementation> nodeTypeImplementations,\n                         Map<QName, TRelationshipTypeImplementation> relationshipTypeImplementations,\n                         Map<QName, TArtifactTemplate> artifactTemplates,\n                         Map<QName, EdmmType> edmmTypeMappings, Map<QName, EdmmType> oneToOneMappings)", "full_signature": "public  EdmmConverter(Map<QName, TNodeType> nodeTypes, Map<QName, TRelationshipType> relationshipTypes,\n                         Map<QName, TNodeTypeImplementation> nodeTypeImplementations,\n                         Map<QName, TRelationshipTypeImplementation> relationshipTypeImplementations,\n                         Map<QName, TArtifactTemplate> artifactTemplates,\n                         Map<QName, EdmmType> edmmTypeMappings, Map<QName, EdmmType> oneToOneMappings)", "class_method_signature": "EdmmConverter.EdmmConverter(Map<QName, TNodeType> nodeTypes, Map<QName, TRelationshipType> relationshipTypes,\n                         Map<QName, TNodeTypeImplementation> nodeTypeImplementations,\n                         Map<QName, TRelationshipTypeImplementation> relationshipTypeImplementations,\n                         Map<QName, TArtifactTemplate> artifactTemplates,\n                         Map<QName, EdmmType> edmmTypeMappings, Map<QName, EdmmType> oneToOneMappings)", "testcase": false, "constructor": true}, {"identifier": "EdmmConverter", "parameters": "(Map<QName, TNodeType> nodeTypes, Map<QName, TRelationshipType> relationshipTypes,\n                         Map<QName, TNodeTypeImplementation> nodeTypeImplementations,\n                         Map<QName, TRelationshipTypeImplementation> relationshipTypeImplementations,\n                         Map<QName, TArtifactTemplate> artifactTemplates, Map<QName, EdmmType> edmmTypeMappings,\n                         Map<QName, EdmmType> oneToOneMappings, boolean useAbsolutePaths)", "modifiers": "public", "return": "", "signature": " EdmmConverter(Map<QName, TNodeType> nodeTypes, Map<QName, TRelationshipType> relationshipTypes,\n                         Map<QName, TNodeTypeImplementation> nodeTypeImplementations,\n                         Map<QName, TRelationshipTypeImplementation> relationshipTypeImplementations,\n                         Map<QName, TArtifactTemplate> artifactTemplates, Map<QName, EdmmType> edmmTypeMappings,\n                         Map<QName, EdmmType> oneToOneMappings, boolean useAbsolutePaths)", "full_signature": "public  EdmmConverter(Map<QName, TNodeType> nodeTypes, Map<QName, TRelationshipType> relationshipTypes,\n                         Map<QName, TNodeTypeImplementation> nodeTypeImplementations,\n                         Map<QName, TRelationshipTypeImplementation> relationshipTypeImplementations,\n                         Map<QName, TArtifactTemplate> artifactTemplates, Map<QName, EdmmType> edmmTypeMappings,\n                         Map<QName, EdmmType> oneToOneMappings, boolean useAbsolutePaths)", "class_method_signature": "EdmmConverter.EdmmConverter(Map<QName, TNodeType> nodeTypes, Map<QName, TRelationshipType> relationshipTypes,\n                         Map<QName, TNodeTypeImplementation> nodeTypeImplementations,\n                         Map<QName, TRelationshipTypeImplementation> relationshipTypeImplementations,\n                         Map<QName, TArtifactTemplate> artifactTemplates, Map<QName, EdmmType> edmmTypeMappings,\n                         Map<QName, EdmmType> oneToOneMappings, boolean useAbsolutePaths)", "testcase": false, "constructor": true}, {"identifier": "transform", "parameters": "(TServiceTemplate serviceTemplate)", "modifiers": "public", "return": "EntityGraph", "signature": "EntityGraph transform(TServiceTemplate serviceTemplate)", "full_signature": "public EntityGraph transform(TServiceTemplate serviceTemplate)", "class_method_signature": "EdmmConverter.transform(TServiceTemplate serviceTemplate)", "testcase": false, "constructor": false}, {"identifier": "createRelation", "parameters": "(TRelationshipTemplate relationship, EntityGraph entityGraph)", "modifiers": "private", "return": "void", "signature": "void createRelation(TRelationshipTemplate relationship, EntityGraph entityGraph)", "full_signature": "private void createRelation(TRelationshipTemplate relationship, EntityGraph entityGraph)", "class_method_signature": "EdmmConverter.createRelation(TRelationshipTemplate relationship, EntityGraph entityGraph)", "testcase": false, "constructor": false}, {"identifier": "createNode", "parameters": "(TNodeTemplate nodeTemplate, EntityGraph entityGraph)", "modifiers": "private", "return": "void", "signature": "void createNode(TNodeTemplate nodeTemplate, EntityGraph entityGraph)", "full_signature": "private void createNode(TNodeTemplate nodeTemplate, EntityGraph entityGraph)", "class_method_signature": "EdmmConverter.createNode(TNodeTemplate nodeTemplate, EntityGraph entityGraph)", "testcase": false, "constructor": false}, {"identifier": "createArtifact", "parameters": "(TNodeTemplate nodeTemplate, EntityId componentNodeId, EntityGraph entityGraph)", "modifiers": "private", "return": "void", "signature": "void createArtifact(TNodeTemplate nodeTemplate, EntityId componentNodeId, EntityGraph entityGraph)", "full_signature": "private void createArtifact(TNodeTemplate nodeTemplate, EntityId componentNodeId, EntityGraph entityGraph)", "class_method_signature": "EdmmConverter.createArtifact(TNodeTemplate nodeTemplate, EntityId componentNodeId, EntityGraph entityGraph)", "testcase": false, "constructor": false}, {"identifier": "createPathReferenceEntity", "parameters": "(EntityGraph entityGraph, String givenPath, EntityId entityId)", "modifiers": "private", "return": "void", "signature": "void createPathReferenceEntity(EntityGraph entityGraph, String givenPath, EntityId entityId)", "full_signature": "private void createPathReferenceEntity(EntityGraph entityGraph, String givenPath, EntityId entityId)", "class_method_signature": "EdmmConverter.createPathReferenceEntity(EntityGraph entityGraph, String givenPath, EntityId entityId)", "testcase": false, "constructor": false}, {"identifier": "createProperties", "parameters": "(TEntityTemplate toscaTemplate, EntityId componentNodeId, EntityGraph entityGraph)", "modifiers": "private", "return": "void", "signature": "void createProperties(TEntityTemplate toscaTemplate, EntityId componentNodeId, EntityGraph entityGraph)", "full_signature": "private void createProperties(TEntityTemplate toscaTemplate, EntityId componentNodeId, EntityGraph entityGraph)", "class_method_signature": "EdmmConverter.createProperties(TEntityTemplate toscaTemplate, EntityId componentNodeId, EntityGraph entityGraph)", "testcase": false, "constructor": false}, {"identifier": "createType", "parameters": "(TEntityType toscaType, EntityId parentEntityId, EntityGraph entityGraph)", "modifiers": "private", "return": "EntityId", "signature": "EntityId createType(TEntityType toscaType, EntityId parentEntityId, EntityGraph entityGraph)", "full_signature": "private EntityId createType(TEntityType toscaType, EntityId parentEntityId, EntityGraph entityGraph)", "class_method_signature": "EdmmConverter.createType(TEntityType toscaType, EntityId parentEntityId, EntityGraph entityGraph)", "testcase": false, "constructor": false}, {"identifier": "createPropertiesDefinition", "parameters": "(TEntityType toscaType, EntityId typeEntityId, EntityGraph entityGraph)", "modifiers": "private", "return": "void", "signature": "void createPropertiesDefinition(TEntityType toscaType, EntityId typeEntityId, EntityGraph entityGraph)", "full_signature": "private void createPropertiesDefinition(TEntityType toscaType, EntityId typeEntityId, EntityGraph entityGraph)", "class_method_signature": "EdmmConverter.createPropertiesDefinition(TEntityType toscaType, EntityId typeEntityId, EntityGraph entityGraph)", "testcase": false, "constructor": false}, {"identifier": "createOperations", "parameters": "(TEntityType type, EntityId nodeTypeEntityId, EntityGraph entityGraph)", "modifiers": "private", "return": "void", "signature": "void createOperations(TEntityType type, EntityId nodeTypeEntityId, EntityGraph entityGraph)", "full_signature": "private void createOperations(TEntityType type, EntityId nodeTypeEntityId, EntityGraph entityGraph)", "class_method_signature": "EdmmConverter.createOperations(TEntityType type, EntityId nodeTypeEntityId, EntityGraph entityGraph)", "testcase": false, "constructor": false}, {"identifier": "getImplementationForOperation", "parameters": "(TEntityTypeImplementation implementation,\n                                                 String interfaceName, String operationName)", "modifiers": "private", "return": "String", "signature": "String getImplementationForOperation(TEntityTypeImplementation implementation,\n                                                 String interfaceName, String operationName)", "full_signature": "private String getImplementationForOperation(TEntityTypeImplementation implementation,\n                                                 String interfaceName, String operationName)", "class_method_signature": "EdmmConverter.getImplementationForOperation(TEntityTypeImplementation implementation,\n                                                 String interfaceName, String operationName)", "testcase": false, "constructor": false}, {"identifier": "normalizeQName", "parameters": "(QName qName)", "modifiers": "private", "return": "String", "signature": "String normalizeQName(QName qName)", "full_signature": "private String normalizeQName(QName qName)", "class_method_signature": "EdmmConverter.normalizeQName(QName qName)", "testcase": false, "constructor": false}], "file": "org.eclipse.winery.common/src/main/java/org/eclipse/winery/common/edmm/EdmmConverter.java"}, "focal_method": {"identifier": "transform", "parameters": "(TServiceTemplate serviceTemplate)", "modifiers": "public", "return": "EntityGraph", "body": "public EntityGraph transform(TServiceTemplate serviceTemplate) {\n        EntityGraph entityGraph = new EntityGraph();\n\n        List<TNodeTemplate> nodeTemplates = serviceTemplate.getTopologyTemplate().getNodeTemplates();\n        List<TRelationshipTemplate> relationshipTemplates = serviceTemplate.getTopologyTemplate().getRelationshipTemplates();\n        if (!nodeTemplates.isEmpty()) {\n            entityGraph.addEntity(new MappingEntity(EntityGraph.COMPONENTS, entityGraph));\n        }\n\n        nodeTemplates.forEach(nodeTemplate -> createNode(nodeTemplate, entityGraph));\n        relationshipTemplates.forEach(relationship -> createRelation(relationship, entityGraph));\n\n        return entityGraph;\n    }", "signature": "EntityGraph transform(TServiceTemplate serviceTemplate)", "full_signature": "public EntityGraph transform(TServiceTemplate serviceTemplate)", "class_method_signature": "EdmmConverter.transform(TServiceTemplate serviceTemplate)", "testcase": false, "constructor": false, "invocations": ["getNodeTemplates", "getTopologyTemplate", "getRelationshipTemplates", "getTopologyTemplate", "isEmpty", "addEntity", "forEach", "createNode", "forEach", "createRelation"]}, "repository": {"repo_id": 42622157, "url": "https://github.com/eclipse/winery", "stars": 34, "created": "9/17/2015 12:31:44 AM +00:00", "updates": "2020-01-22T09:32:00+00:00", "fork": "False", "license": "licensed"}}