{"test_class": {"identifier": "SvUndebitCmdBuildTest", "superclass": "", "interfaces": "", "fields": [], "file": "java/component/keyple-calypso/src/test/java/org/eclipse/keyple/calypso/command/po/builder/storedvalue/SvUndebitCmdBuildTest.java"}, "test_case": {"identifier": "svUndebitCmdBuild_mode_compat_bad_signature_length_1", "parameters": "()", "modifiers": "@Test(expected = IllegalArgumentException.class) public", "return": "void", "body": "@Test(expected = IllegalArgumentException.class)\n  public void svUndebitCmdBuild_mode_compat_bad_signature_length_1() {\n    SvUndebitCmdBuild svUndebitCmdBuild =\n        new SvUndebitCmdBuild(\n            PoClass.ISO,\n            PoRevision.REV3_1,\n            /* amount */ 1, /* KVC */\n            (byte) 0xAA, /* date */\n            ByteArrayUtil.fromHex(\"1122\"),\n            /* time */ ByteArrayUtil.fromHex(\"3344\"));\n    svUndebitCmdBuild.finalizeBuilder(\n        /* SAM ID + prepare SV Debit data */ ByteArrayUtil.fromHex(\n            \"AABBCCDD55667712345611223344556677889900\"));\n    String apdu = ByteArrayUtil.toHex(svUndebitCmdBuild.getApduRequest().getBytes());\n  }", "signature": "void svUndebitCmdBuild_mode_compat_bad_signature_length_1()", "full_signature": "@Test(expected = IllegalArgumentException.class) public void svUndebitCmdBuild_mode_compat_bad_signature_length_1()", "class_method_signature": "SvUndebitCmdBuildTest.svUndebitCmdBuild_mode_compat_bad_signature_length_1()", "testcase": true, "constructor": false, "invocations": ["fromHex", "fromHex", "finalizeBuilder", "fromHex", "toHex", "getBytes", "getApduRequest"]}, "focal_class": {"identifier": "SvUndebitCmdBuild", "superclass": "extends AbstractPoCommandBuilder<SvUndebitRespPars>", "interfaces": "", "fields": [{"original_string": "private static final CalypsoPoCommand command = CalypsoPoCommand.SV_UNDEBIT;", "modifier": "private static final", "type": "CalypsoPoCommand", "declarator": "command = CalypsoPoCommand.SV_UNDEBIT", "var_name": "command"}, {"original_string": "private final PoClass poClass;", "modifier": "private final", "type": "PoClass", "declarator": "poClass", "var_name": "poClass"}, {"original_string": "private final PoRevision poRevision;", "modifier": "private final", "type": "PoRevision", "declarator": "poRevision", "var_name": "poRevision"}, {"original_string": "private final byte[] dataIn;", "modifier": "private final", "type": "byte[]", "declarator": "dataIn", "var_name": "dataIn"}], "methods": [{"identifier": "SvUndebitCmdBuild", "parameters": "(\n      PoClass poClass, PoRevision poRevision, int amount, byte kvc, byte[] date, byte[] time)", "modifiers": "public", "return": "", "signature": " SvUndebitCmdBuild(\n      PoClass poClass, PoRevision poRevision, int amount, byte kvc, byte[] date, byte[] time)", "full_signature": "public  SvUndebitCmdBuild(\n      PoClass poClass, PoRevision poRevision, int amount, byte kvc, byte[] date, byte[] time)", "class_method_signature": "SvUndebitCmdBuild.SvUndebitCmdBuild(\n      PoClass poClass, PoRevision poRevision, int amount, byte kvc, byte[] date, byte[] time)", "testcase": false, "constructor": true}, {"identifier": "finalizeBuilder", "parameters": "(byte[] undebitComplementaryData)", "modifiers": "public", "return": "void", "signature": "void finalizeBuilder(byte[] undebitComplementaryData)", "full_signature": "public void finalizeBuilder(byte[] undebitComplementaryData)", "class_method_signature": "SvUndebitCmdBuild.finalizeBuilder(byte[] undebitComplementaryData)", "testcase": false, "constructor": false}, {"identifier": "getSvUndebitData", "parameters": "()", "modifiers": "public", "return": "byte[]", "signature": "byte[] getSvUndebitData()", "full_signature": "public byte[] getSvUndebitData()", "class_method_signature": "SvUndebitCmdBuild.getSvUndebitData()", "testcase": false, "constructor": false}, {"identifier": "createResponseParser", "parameters": "(ApduResponse apduResponse)", "modifiers": "@Override public", "return": "SvUndebitRespPars", "signature": "SvUndebitRespPars createResponseParser(ApduResponse apduResponse)", "full_signature": "@Override public SvUndebitRespPars createResponseParser(ApduResponse apduResponse)", "class_method_signature": "SvUndebitCmdBuild.createResponseParser(ApduResponse apduResponse)", "testcase": false, "constructor": false}, {"identifier": "isSessionBufferUsed", "parameters": "()", "modifiers": "@Override public", "return": "boolean", "signature": "boolean isSessionBufferUsed()", "full_signature": "@Override public boolean isSessionBufferUsed()", "class_method_signature": "SvUndebitCmdBuild.isSessionBufferUsed()", "testcase": false, "constructor": false}], "file": "java/component/keyple-calypso/src/main/java/org/eclipse/keyple/calypso/command/po/builder/storedvalue/SvUndebitCmdBuild.java"}, "focal_method": {"identifier": "finalizeBuilder", "parameters": "(byte[] undebitComplementaryData)", "modifiers": "public", "return": "void", "body": "public void finalizeBuilder(byte[] undebitComplementaryData) {\n    if ((poRevision == PoRevision.REV3_2 && undebitComplementaryData.length != 20)\n        || (poRevision != PoRevision.REV3_2 && undebitComplementaryData.length != 15)) {\n      throw new IllegalArgumentException(\"Bad SV prepare load data length.\");\n    }\n\n    byte p1 = undebitComplementaryData[4];\n    byte p2 = undebitComplementaryData[5];\n\n    dataIn[0] = undebitComplementaryData[6];\n    System.arraycopy(undebitComplementaryData, 0, dataIn, 8, 4);\n    System.arraycopy(undebitComplementaryData, 7, dataIn, 12, 3);\n    System.arraycopy(\n        undebitComplementaryData, 10, dataIn, 15, undebitComplementaryData.length - 10);\n\n    this.request = setApduRequest(poClass.getValue(), command, p1, p2, dataIn, null);\n  }", "signature": "void finalizeBuilder(byte[] undebitComplementaryData)", "full_signature": "public void finalizeBuilder(byte[] undebitComplementaryData)", "class_method_signature": "SvUndebitCmdBuild.finalizeBuilder(byte[] undebitComplementaryData)", "testcase": false, "constructor": false, "invocations": ["arraycopy", "arraycopy", "arraycopy", "setApduRequest", "getValue"]}, "repository": {"repo_id": 156416177, "url": "https://github.com/eclipse/keyple-java", "language": "Java", "is_fork": false, "fork_count": 11, "stargazer_count": 8, "size": 10325, "license": "licensed"}}