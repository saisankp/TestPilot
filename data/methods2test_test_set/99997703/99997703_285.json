{"test_class": {"identifier": "RandomWeightedChooserTest", "superclass": "", "interfaces": "", "fields": [], "file": "OcavaCore/src/test/java/com/ocadotechnology/random/RandomWeightedChooserTest.java"}, "test_case": {"identifier": "whenWeightIsZero_thenDoesNotChooseItem", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void whenWeightIsZero_thenDoesNotChooseItem() {\n        RandomWeightedChooser chooser = new RandomWeightedChooser<>(ImmutableMap.of(\"A\", 0d, \"B\", 1d, \"C\", 1d));\n        RepeatableRandom.initialiseWithFixedValue(0);\n        Assertions.assertNotEquals(chooser.choose(), \"A\");\n        RepeatableRandom.initialiseWithFixedValue(0.01);\n        Assertions.assertNotEquals(chooser.choose(), \"A\");\n    }", "signature": "void whenWeightIsZero_thenDoesNotChooseItem()", "full_signature": "@Test public void whenWeightIsZero_thenDoesNotChooseItem()", "class_method_signature": "RandomWeightedChooserTest.whenWeightIsZero_thenDoesNotChooseItem()", "testcase": true, "constructor": false, "invocations": ["of", "initialiseWithFixedValue", "assertNotEquals", "choose", "initialiseWithFixedValue", "assertNotEquals", "choose"]}, "focal_class": {"identifier": "RandomWeightedChooser", "superclass": "", "interfaces": "", "fields": [{"original_string": "private final ImmutableMap<E, Double> itemsByWeight;", "modifier": "private final", "type": "ImmutableMap<E, Double>", "declarator": "itemsByWeight", "var_name": "itemsByWeight"}, {"original_string": "private final double sumOfWeights;", "modifier": "private final", "type": "double", "declarator": "sumOfWeights", "var_name": "sumOfWeights"}], "methods": [{"identifier": "RandomWeightedChooser", "parameters": "(ImmutableMap<E, Double> itemsByWeight)", "modifiers": "public", "return": "", "signature": " RandomWeightedChooser(ImmutableMap<E, Double> itemsByWeight)", "full_signature": "public  RandomWeightedChooser(ImmutableMap<E, Double> itemsByWeight)", "class_method_signature": "RandomWeightedChooser.RandomWeightedChooser(ImmutableMap<E, Double> itemsByWeight)", "testcase": false, "constructor": true}, {"identifier": "choose", "parameters": "()", "modifiers": "public", "return": "E", "signature": "E choose()", "full_signature": "public E choose()", "class_method_signature": "RandomWeightedChooser.choose()", "testcase": false, "constructor": false}], "file": "OcavaCore/src/main/java/com/ocadotechnology/random/RandomWeightedChooser.java"}, "focal_method": {"identifier": "choose", "parameters": "()", "modifiers": "public", "return": "E", "body": "public E choose() {\n        double rand = RepeatableRandom.nextDouble() * sumOfWeights;\n        double cumulativeSum = 0;\n        for (Entry<E, Double> entry : itemsByWeight.entrySet()) {\n            cumulativeSum += entry.getValue();\n            if (cumulativeSum > rand) { // Not \">=\" to avoid choosing zero weight items when rand is 0!\n                return entry.getKey();\n            }\n        }\n        throw Failer.fail(\"Failed to make a random choice between specified elements\");\n    }", "signature": "E choose()", "full_signature": "public E choose()", "class_method_signature": "RandomWeightedChooser.choose()", "testcase": false, "constructor": false, "invocations": ["nextDouble", "entrySet", "getValue", "getKey", "fail"]}, "repository": {"repo_id": 99997703, "url": "https://github.com/ocadotechnology/Ocava", "language": "Java", "is_fork": false, "fork_count": 4, "stargazer_count": 16, "size": 1137, "license": "licensed"}}