{"test_class": {"identifier": "PrometheusPullServerTest", "superclass": "", "interfaces": "", "fields": [], "file": "contributions/metric/prometheus/src/test/java/com/yahoo/athenz/common/metrics/impl/prometheus/PrometheusPullServerTest.java"}, "test_case": {"identifier": "testQuit", "parameters": "()", "modifiers": "@Test(expectedExceptions = { HttpHostConnectException.class }, expectedExceptionsMessageRegExp = \".* failed: Connection refused \\\\(Connection refused\\\\)\") public", "return": "void", "body": "@Test(expectedExceptions = { HttpHostConnectException.class }, expectedExceptionsMessageRegExp = \".* failed: Connection refused \\\\(Connection refused\\\\)\")\n    public void testQuit() throws IOException {\n        int port = 8181;\n        CollectorRegistry registry = new CollectorRegistry();\n        PrometheusPullServer exporter = new PrometheusPullServer(port, registry);\n        exporter.quit();\n\n        HttpClient client = HttpClientBuilder.create().build();\n        HttpGet request = new HttpGet(String.format(\"http://localhost:%d/metrics\", port));\n        client.execute(request);\n    }", "signature": "void testQuit()", "full_signature": "@Test(expectedExceptions = { HttpHostConnectException.class }, expectedExceptionsMessageRegExp = \".* failed: Connection refused \\\\(Connection refused\\\\)\") public void testQuit()", "class_method_signature": "PrometheusPullServerTest.testQuit()", "testcase": true, "constructor": false, "invocations": ["quit", "build", "create", "format", "execute"]}, "focal_class": {"identifier": "PrometheusPullServer", "superclass": "", "interfaces": "implements PrometheusExporter", "fields": [{"original_string": "private HTTPServer server;", "modifier": "private", "type": "HTTPServer", "declarator": "server", "var_name": "server"}], "methods": [{"identifier": "PrometheusPullServer", "parameters": "(int pullingPort, CollectorRegistry registry)", "modifiers": "public", "return": "", "signature": " PrometheusPullServer(int pullingPort, CollectorRegistry registry)", "full_signature": "public  PrometheusPullServer(int pullingPort, CollectorRegistry registry)", "class_method_signature": "PrometheusPullServer.PrometheusPullServer(int pullingPort, CollectorRegistry registry)", "testcase": false, "constructor": true}, {"identifier": "flush", "parameters": "()", "modifiers": "@Override public", "return": "void", "signature": "void flush()", "full_signature": "@Override public void flush()", "class_method_signature": "PrometheusPullServer.flush()", "testcase": false, "constructor": false}, {"identifier": "quit", "parameters": "()", "modifiers": "@Override public", "return": "void", "signature": "void quit()", "full_signature": "@Override public void quit()", "class_method_signature": "PrometheusPullServer.quit()", "testcase": false, "constructor": false}], "file": "contributions/metric/prometheus/src/main/java/com/yahoo/athenz/common/metrics/impl/prometheus/PrometheusPullServer.java"}, "focal_method": {"identifier": "quit", "parameters": "()", "modifiers": "@Override public", "return": "void", "body": "@Override\n    public void quit() {\n        this.server.stop();\n    }", "signature": "void quit()", "full_signature": "@Override public void quit()", "class_method_signature": "PrometheusPullServer.quit()", "testcase": false, "constructor": false, "invocations": ["stop"]}, "repository": {"repo_id": 73948366, "url": "https://github.com/yahoo/athenz", "stars": 394, "created": "11/16/2016 6:23:08 PM +00:00", "updates": "2020-01-27T15:36:13+00:00", "fork": "False", "license": "licensed"}}