{"test_class": {"identifier": "ReconnectActorTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static ActorSystem actorSystem;", "modifier": "private static", "type": "ActorSystem", "declarator": "actorSystem", "var_name": "actorSystem"}], "file": "services/connectivity/messaging/src/test/java/org/eclipse/ditto/services/connectivity/messaging/ReconnectActorTest.java"}, "test_case": {"identifier": "testRecoverConnectionsIsNotStartedTwice", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testRecoverConnectionsIsNotStartedTwice() {\n        new TestKit(actorSystem) {{\n            final TestProbe probe = new TestProbe(actorSystem);\n            final Props props = ReconnectActor.props(probe.ref(),\n                    () -> Source.from(Arrays.asList(\n                            ConnectionPersistenceActor.PERSISTENCE_ID_PREFIX + \"connection-1\",\n                            ConnectionPersistenceActor.PERSISTENCE_ID_PREFIX + \"connection-2\",\n                            ConnectionPersistenceActor.PERSISTENCE_ID_PREFIX + \"connection-3\")));\n\n            final ActorRef reconnectActor = actorSystem.actorOf(props);\n            reconnectActor.tell(ReconnectActor.ReconnectMessages.START_RECONNECT, getRef());\n\n            probe.expectMsgClass(RetrieveConnectionStatus.class);\n            probe.expectMsgClass(RetrieveConnectionStatus.class);\n            probe.expectMsgClass(RetrieveConnectionStatus.class);\n            probe.expectNoMessage();\n        }};\n    }", "signature": "void testRecoverConnectionsIsNotStartedTwice()", "full_signature": "@Test public void testRecoverConnectionsIsNotStartedTwice()", "class_method_signature": "ReconnectActorTest.testRecoverConnectionsIsNotStartedTwice()", "testcase": true, "constructor": false, "invocations": ["props", "ref", "from", "asList", "actorOf", "tell", "getRef", "expectMsgClass", "expectMsgClass", "expectMsgClass", "expectNoMessage"]}, "focal_class": {"identifier": "ReconnectActor", "superclass": "extends AbstractActor", "interfaces": "", "fields": [{"original_string": "public static final String ACTOR_NAME = \"reconnect\";", "modifier": "public static final", "type": "String", "declarator": "ACTOR_NAME = \"reconnect\"", "var_name": "ACTOR_NAME"}, {"original_string": "private static final String CORRELATION_ID_PREFIX = \"reconnect-actor-triggered:\";", "modifier": "private static final", "type": "String", "declarator": "CORRELATION_ID_PREFIX = \"reconnect-actor-triggered:\"", "var_name": "CORRELATION_ID_PREFIX"}, {"original_string": "private final DiagnosticLoggingAdapter log = LogUtil.obtain(this);", "modifier": "private final", "type": "DiagnosticLoggingAdapter", "declarator": "log = LogUtil.obtain(this)", "var_name": "log"}, {"original_string": "private final ActorRef connectionShardRegion;", "modifier": "private final", "type": "ActorRef", "declarator": "connectionShardRegion", "var_name": "connectionShardRegion"}, {"original_string": "private final Supplier<Source<String, NotUsed>> currentPersistenceIdsSourceSupplier;", "modifier": "private final", "type": "Supplier<Source<String, NotUsed>>", "declarator": "currentPersistenceIdsSourceSupplier", "var_name": "currentPersistenceIdsSourceSupplier"}, {"original_string": "private final ReconnectConfig reconnectConfig;", "modifier": "private final", "type": "ReconnectConfig", "declarator": "reconnectConfig", "var_name": "reconnectConfig"}, {"original_string": "private final Materializer materializer;", "modifier": "private final", "type": "Materializer", "declarator": "materializer", "var_name": "materializer"}, {"original_string": "private Cancellable reconnectCheck;", "modifier": "private", "type": "Cancellable", "declarator": "reconnectCheck", "var_name": "reconnectCheck"}, {"original_string": "private boolean reconnectInProgress = false;", "modifier": "private", "type": "boolean", "declarator": "reconnectInProgress = false", "var_name": "reconnectInProgress"}], "methods": [{"identifier": "ReconnectActor", "parameters": "(final ActorRef connectionShardRegion,\n            final Supplier<Source<String, NotUsed>> currentPersistenceIdsSourceSupplier)", "modifiers": "@SuppressWarnings(\"unused\") private", "return": "", "signature": " ReconnectActor(final ActorRef connectionShardRegion,\n            final Supplier<Source<String, NotUsed>> currentPersistenceIdsSourceSupplier)", "full_signature": "@SuppressWarnings(\"unused\") private  ReconnectActor(final ActorRef connectionShardRegion,\n            final Supplier<Source<String, NotUsed>> currentPersistenceIdsSourceSupplier)", "class_method_signature": "ReconnectActor.ReconnectActor(final ActorRef connectionShardRegion,\n            final Supplier<Source<String, NotUsed>> currentPersistenceIdsSourceSupplier)", "testcase": false, "constructor": true}, {"identifier": "ReconnectActor", "parameters": "(final ActorRef connectionShardRegion, final MongoReadJournal readJournal)", "modifiers": "@SuppressWarnings(\"unused\") private", "return": "", "signature": " ReconnectActor(final ActorRef connectionShardRegion, final MongoReadJournal readJournal)", "full_signature": "@SuppressWarnings(\"unused\") private  ReconnectActor(final ActorRef connectionShardRegion, final MongoReadJournal readJournal)", "class_method_signature": "ReconnectActor.ReconnectActor(final ActorRef connectionShardRegion, final MongoReadJournal readJournal)", "testcase": false, "constructor": true}, {"identifier": "props", "parameters": "(final ActorRef connectionShardRegion, final MongoReadJournal readJournal)", "modifiers": "public static", "return": "Props", "signature": "Props props(final ActorRef connectionShardRegion, final MongoReadJournal readJournal)", "full_signature": "public static Props props(final ActorRef connectionShardRegion, final MongoReadJournal readJournal)", "class_method_signature": "ReconnectActor.props(final ActorRef connectionShardRegion, final MongoReadJournal readJournal)", "testcase": false, "constructor": false}, {"identifier": "props", "parameters": "(final ActorRef connectionShardRegion,\n            final Supplier<Source<String, NotUsed>> currentPersistenceIdsSourceSupplier)", "modifiers": "static", "return": "Props", "signature": "Props props(final ActorRef connectionShardRegion,\n            final Supplier<Source<String, NotUsed>> currentPersistenceIdsSourceSupplier)", "full_signature": "static Props props(final ActorRef connectionShardRegion,\n            final Supplier<Source<String, NotUsed>> currentPersistenceIdsSourceSupplier)", "class_method_signature": "ReconnectActor.props(final ActorRef connectionShardRegion,\n            final Supplier<Source<String, NotUsed>> currentPersistenceIdsSourceSupplier)", "testcase": false, "constructor": false}, {"identifier": "scheduleReconnect", "parameters": "()", "modifiers": "private", "return": "Cancellable", "signature": "Cancellable scheduleReconnect()", "full_signature": "private Cancellable scheduleReconnect()", "class_method_signature": "ReconnectActor.scheduleReconnect()", "testcase": false, "constructor": false}, {"identifier": "getInitialDelay", "parameters": "()", "modifiers": "private", "return": "FiniteDuration", "signature": "FiniteDuration getInitialDelay()", "full_signature": "private FiniteDuration getInitialDelay()", "class_method_signature": "ReconnectActor.getInitialDelay()", "testcase": false, "constructor": false}, {"identifier": "getInterval", "parameters": "()", "modifiers": "private", "return": "FiniteDuration", "signature": "FiniteDuration getInterval()", "full_signature": "private FiniteDuration getInterval()", "class_method_signature": "ReconnectActor.getInterval()", "testcase": false, "constructor": false}, {"identifier": "preStart", "parameters": "()", "modifiers": "@Override public", "return": "void", "signature": "void preStart()", "full_signature": "@Override public void preStart()", "class_method_signature": "ReconnectActor.preStart()", "testcase": false, "constructor": false}, {"identifier": "postStop", "parameters": "()", "modifiers": "@Override public", "return": "void", "signature": "void postStop()", "full_signature": "@Override public void postStop()", "class_method_signature": "ReconnectActor.postStop()", "testcase": false, "constructor": false}, {"identifier": "createReceive", "parameters": "()", "modifiers": "@Override public", "return": "Receive", "signature": "Receive createReceive()", "full_signature": "@Override public Receive createReceive()", "class_method_signature": "ReconnectActor.createReceive()", "testcase": false, "constructor": false}, {"identifier": "handleStartReconnect", "parameters": "()", "modifiers": "private", "return": "void", "signature": "void handleStartReconnect()", "full_signature": "private void handleStartReconnect()", "class_method_signature": "ReconnectActor.handleStartReconnect()", "testcase": false, "constructor": false}, {"identifier": "handleEndReconnect", "parameters": "()", "modifiers": "private", "return": "void", "signature": "void handleEndReconnect()", "full_signature": "private void handleEndReconnect()", "class_method_signature": "ReconnectActor.handleEndReconnect()", "testcase": false, "constructor": false}, {"identifier": "reconnect", "parameters": "(final String persistenceId)", "modifiers": "private", "return": "void", "signature": "void reconnect(final String persistenceId)", "full_signature": "private void reconnect(final String persistenceId)", "class_method_signature": "ReconnectActor.reconnect(final String persistenceId)", "testcase": false, "constructor": false}, {"identifier": "toCorrelationId", "parameters": "(final ConnectionId connectionId)", "modifiers": "static", "return": "String", "signature": "String toCorrelationId(final ConnectionId connectionId)", "full_signature": "static String toCorrelationId(final ConnectionId connectionId)", "class_method_signature": "ReconnectActor.toCorrelationId(final ConnectionId connectionId)", "testcase": false, "constructor": false}, {"identifier": "toConnectionId", "parameters": "(final String correlationId)", "modifiers": "static", "return": "Optional<ConnectionId>", "signature": "Optional<ConnectionId> toConnectionId(final String correlationId)", "full_signature": "static Optional<ConnectionId> toConnectionId(final String correlationId)", "class_method_signature": "ReconnectActor.toConnectionId(final String correlationId)", "testcase": false, "constructor": false}, {"identifier": "getReconnectConfig", "parameters": "(final ActorContext context)", "modifiers": "private static", "return": "ReconnectConfig", "signature": "ReconnectConfig getReconnectConfig(final ActorContext context)", "full_signature": "private static ReconnectConfig getReconnectConfig(final ActorContext context)", "class_method_signature": "ReconnectActor.getReconnectConfig(final ActorContext context)", "testcase": false, "constructor": false}], "file": "services/connectivity/messaging/src/main/java/org/eclipse/ditto/services/connectivity/messaging/ReconnectActor.java"}, "focal_method": {"identifier": "props", "parameters": "(final ActorRef connectionShardRegion, final MongoReadJournal readJournal)", "modifiers": "public static", "return": "Props", "body": "public static Props props(final ActorRef connectionShardRegion, final MongoReadJournal readJournal) {\n\n        return Props.create(ReconnectActor.class, connectionShardRegion, readJournal);\n    }", "signature": "Props props(final ActorRef connectionShardRegion, final MongoReadJournal readJournal)", "full_signature": "public static Props props(final ActorRef connectionShardRegion, final MongoReadJournal readJournal)", "class_method_signature": "ReconnectActor.props(final ActorRef connectionShardRegion, final MongoReadJournal readJournal)", "testcase": false, "constructor": false, "invocations": ["create"]}, "repository": {"repo_id": 87849739, "url": "https://github.com/eclipse/ditto", "stars": 139, "created": "4/10/2017 7:29:57 PM +00:00", "updates": "2020-01-27T14:02:39+00:00", "fork": "False", "license": "licensed"}}