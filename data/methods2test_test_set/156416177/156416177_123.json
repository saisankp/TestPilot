{"test_class": {"identifier": "CloseSessionCmdBuildTest", "superclass": "", "interfaces": "", "fields": [], "file": "java/component/keyple-calypso/src/test/java/org/eclipse/keyple/calypso/command/po/builder/security/CloseSessionCmdBuildTest.java"}, "test_case": {"identifier": "closeSessionCmdBuild", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n  public void closeSessionCmdBuild() {\n    byte[] request2_4 =\n        new byte[] {\n          (byte) 0x94,\n          (byte) 0x8E,\n          0x00,\n          0x00,\n          (byte) 0x04,\n          (byte) 0xA8,\n          0x31,\n          (byte) 0xC3,\n          0x3E,\n          0x00\n        };\n    byte[] request3_1 =\n        new byte[] {\n          (byte) 0x00,\n          (byte) 0x8E,\n          (byte) 0x80,\n          0x00,\n          (byte) 0x04,\n          (byte) 0xA8,\n          0x31,\n          (byte) 0xC3,\n          0x3E,\n          0x00\n        };\n    byte[] terminalSessionSignature = new byte[] {(byte) 0xA8, 0x31, (byte) 0xC3, 0x3E};\n    AbstractApduCommandBuilder apduCommandBuilder =\n        new CloseSessionCmdBuild(PoClass.LEGACY, false, terminalSessionSignature);\n    ApduRequest reqApdu = apduCommandBuilder.getApduRequest();\n\n    Assert.assertArrayEquals(request2_4, reqApdu.getBytes());\n\n    apduCommandBuilder = new CloseSessionCmdBuild(PoClass.ISO, true, terminalSessionSignature);\n    reqApdu = apduCommandBuilder.getApduRequest();\n\n    Assert.assertArrayEquals(request3_1, reqApdu.getBytes());\n  }", "signature": "void closeSessionCmdBuild()", "full_signature": "@Test public void closeSessionCmdBuild()", "class_method_signature": "CloseSessionCmdBuildTest.closeSessionCmdBuild()", "testcase": true, "constructor": false, "invocations": ["getApduRequest", "assertArrayEquals", "getBytes", "getApduRequest", "assertArrayEquals", "getBytes"]}, "focal_class": {"identifier": "CloseSessionCmdBuild", "superclass": "extends AbstractPoCommandBuilder<CloseSessionRespPars>", "interfaces": "", "fields": [{"original_string": "private static final CalypsoPoCommand command = CalypsoPoCommand.CLOSE_SESSION;", "modifier": "private static final", "type": "CalypsoPoCommand", "declarator": "command = CalypsoPoCommand.CLOSE_SESSION", "var_name": "command"}], "methods": [{"identifier": "CloseSessionCmdBuild", "parameters": "(\n      PoClass poClass, boolean ratificationAsked, byte[] terminalSessionSignature)", "modifiers": "public", "return": "", "signature": " CloseSessionCmdBuild(\n      PoClass poClass, boolean ratificationAsked, byte[] terminalSessionSignature)", "full_signature": "public  CloseSessionCmdBuild(\n      PoClass poClass, boolean ratificationAsked, byte[] terminalSessionSignature)", "class_method_signature": "CloseSessionCmdBuild.CloseSessionCmdBuild(\n      PoClass poClass, boolean ratificationAsked, byte[] terminalSessionSignature)", "testcase": false, "constructor": true}, {"identifier": "CloseSessionCmdBuild", "parameters": "(PoClass poClass)", "modifiers": "public", "return": "", "signature": " CloseSessionCmdBuild(PoClass poClass)", "full_signature": "public  CloseSessionCmdBuild(PoClass poClass)", "class_method_signature": "CloseSessionCmdBuild.CloseSessionCmdBuild(PoClass poClass)", "testcase": false, "constructor": true}, {"identifier": "createResponseParser", "parameters": "(ApduResponse apduResponse)", "modifiers": "@Override public", "return": "CloseSessionRespPars", "signature": "CloseSessionRespPars createResponseParser(ApduResponse apduResponse)", "full_signature": "@Override public CloseSessionRespPars createResponseParser(ApduResponse apduResponse)", "class_method_signature": "CloseSessionCmdBuild.createResponseParser(ApduResponse apduResponse)", "testcase": false, "constructor": false}, {"identifier": "isSessionBufferUsed", "parameters": "()", "modifiers": "@Override public", "return": "boolean", "signature": "boolean isSessionBufferUsed()", "full_signature": "@Override public boolean isSessionBufferUsed()", "class_method_signature": "CloseSessionCmdBuild.isSessionBufferUsed()", "testcase": false, "constructor": false}], "file": "java/component/keyple-calypso/src/main/java/org/eclipse/keyple/calypso/command/po/builder/security/CloseSessionCmdBuild.java"}, "focal_method": {"identifier": "CloseSessionCmdBuild", "parameters": "(\n      PoClass poClass, boolean ratificationAsked, byte[] terminalSessionSignature)", "modifiers": "public", "return": "", "body": "public CloseSessionCmdBuild(\n      PoClass poClass, boolean ratificationAsked, byte[] terminalSessionSignature) {\n    super(command, null);\n    // The optional parameter terminalSessionSignature could contain 4 or 8\n    // bytes.\n    if (terminalSessionSignature != null\n        && terminalSessionSignature.length != 4\n        && terminalSessionSignature.length != 8) {\n      throw new IllegalArgumentException(\n          \"Invalid terminal sessionSignature: \" + ByteArrayUtil.toHex(terminalSessionSignature));\n    }\n\n    byte p1 = ratificationAsked ? (byte) 0x80 : (byte) 0x00;\n    /*\n     * case 4: this command contains incoming and outgoing data. We define le = 0, the actual\n     * length will be processed by the lower layers.\n     */\n    byte le = 0;\n\n    request =\n        setApduRequest(poClass.getValue(), command, p1, (byte) 0x00, terminalSessionSignature, le);\n  }", "signature": " CloseSessionCmdBuild(\n      PoClass poClass, boolean ratificationAsked, byte[] terminalSessionSignature)", "full_signature": "public  CloseSessionCmdBuild(\n      PoClass poClass, boolean ratificationAsked, byte[] terminalSessionSignature)", "class_method_signature": "CloseSessionCmdBuild.CloseSessionCmdBuild(\n      PoClass poClass, boolean ratificationAsked, byte[] terminalSessionSignature)", "testcase": false, "constructor": true, "invocations": []}, "repository": {"repo_id": 156416177, "url": "https://github.com/eclipse/keyple-java", "language": "Java", "is_fork": false, "fork_count": 11, "stargazer_count": 8, "size": 10325, "license": "licensed"}}