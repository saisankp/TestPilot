{"test_class": {"identifier": "AndroidLocationClientTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "@Mock LocationManager locationManager;", "modifier": "@Mock", "type": "LocationManager", "declarator": "locationManager", "var_name": "locationManager"}, {"original_string": "private AndroidLocationClient androidLocationClient;", "modifier": "private", "type": "AndroidLocationClient", "declarator": "androidLocationClient", "var_name": "androidLocationClient"}], "file": "collect_app/src/test/java/org/odk/collect/android/location/client/AndroidLocationClientTest.java"}, "test_case": {"identifier": "getLastLocationShouldReturnCorrectFromCorrectProviderForPriority", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void getLastLocationShouldReturnCorrectFromCorrectProviderForPriority() {\n\n        // Set-up mock Locations: -------------------------------------------------------------- //\n\n        Location gpsLocation = newMockLocation();\n        when(locationManager.getLastKnownLocation(GPS_PROVIDER))\n                .thenReturn(gpsLocation);\n\n        Location networkLocation = newMockLocation();\n        when(locationManager.getLastKnownLocation(NETWORK_PROVIDER))\n                .thenReturn(networkLocation);\n\n        Location passiveLocation = newMockLocation();\n        when(locationManager.getLastKnownLocation(PASSIVE_PROVIDER))\n                .thenReturn(passiveLocation);\n\n        // High Accuracy: -------------------------------------------------------------- //\n\n        androidLocationClient.setPriority(PRIORITY_HIGH_ACCURACY);\n\n        // W/ GPS\n        when(locationManager.getProviders(true))\n                .thenReturn(ImmutableList.of(GPS_PROVIDER, NETWORK_PROVIDER));\n        assertSame(androidLocationClient.getLastLocation(), gpsLocation);\n\n        // W/out GPS:\n        when(locationManager.getProviders(true))\n                .thenReturn(ImmutableList.of(NETWORK_PROVIDER));\n\n        assertSame(androidLocationClient.getLastLocation(), networkLocation);\n\n        // Balanced Accuracy: -------------------------------------------------------------- //\n\n        androidLocationClient.setPriority(PRIORITY_BALANCED_POWER_ACCURACY);\n\n        // W/ both (should be Network)\n        when(locationManager.getProviders(true))\n                .thenReturn(ImmutableList.of(GPS_PROVIDER, NETWORK_PROVIDER));\n        assertSame(androidLocationClient.getLastLocation(), networkLocation);\n\n        // W/out Network\n        when(locationManager.getProviders(true))\n                .thenReturn(ImmutableList.of(GPS_PROVIDER));\n        assertSame(androidLocationClient.getLastLocation(), gpsLocation);\n\n        // Low Power Accuracy: -------------------------------------------------------------- //\n\n        androidLocationClient.setPriority(PRIORITY_LOW_POWER);\n\n        // W/ Network\n\n        when(locationManager.getProviders(true))\n                .thenReturn(ImmutableList.of(NETWORK_PROVIDER, PASSIVE_PROVIDER));\n        assertSame(androidLocationClient.getLastLocation(), networkLocation);\n\n        // W/out Network:\n        when(locationManager.getProviders(true))\n                .thenReturn(ImmutableList.of(PASSIVE_PROVIDER));\n        assertSame(androidLocationClient.getLastLocation(), passiveLocation);\n\n        // No Power: -------------------------------------------------------------- //\n        androidLocationClient.setPriority(PRIORITY_NO_POWER);\n\n        // W/ Passive:\n        when(locationManager.getProviders(true))\n                .thenReturn(ImmutableList.of(PASSIVE_PROVIDER));\n        assertSame(androidLocationClient.getLastLocation(), passiveLocation);\n\n        // W/out any Providers:\n        when(locationManager.getProviders(true))\n                .thenReturn(ImmutableList.of());\n\n        assertNull(androidLocationClient.getLastLocation());\n    }", "signature": "void getLastLocationShouldReturnCorrectFromCorrectProviderForPriority()", "full_signature": "@Test public void getLastLocationShouldReturnCorrectFromCorrectProviderForPriority()", "class_method_signature": "AndroidLocationClientTest.getLastLocationShouldReturnCorrectFromCorrectProviderForPriority()", "testcase": true, "constructor": false, "invocations": ["newMockLocation", "thenReturn", "when", "getLastKnownLocation", "newMockLocation", "thenReturn", "when", "getLastKnownLocation", "newMockLocation", "thenReturn", "when", "getLastKnownLocation", "setPriority", "thenReturn", "when", "getProviders", "of", "assertSame", "getLastLocation", "thenReturn", "when", "getProviders", "of", "assertSame", "getLastLocation", "setPriority", "thenReturn", "when", "getProviders", "of", "assertSame", "getLastLocation", "thenReturn", "when", "getProviders", "of", "assertSame", "getLastLocation", "setPriority", "thenReturn", "when", "getProviders", "of", "assertSame", "getLastLocation", "thenReturn", "when", "getProviders", "of", "assertSame", "getLastLocation", "setPriority", "thenReturn", "when", "getProviders", "of", "assertSame", "getLastLocation", "thenReturn", "when", "getProviders", "of", "assertNull", "getLastLocation"]}, "focal_class": {"identifier": "AndroidLocationClient", "superclass": "extends BaseLocationClient", "interfaces": "implements android.location.LocationListener", "fields": [{"original_string": "@Nullable\n    private LocationClientListener locationClientListener;", "modifier": "@Nullable\n    private", "type": "LocationClientListener", "declarator": "locationClientListener", "var_name": "locationClientListener"}, {"original_string": "@Nullable\n    private LocationListener locationListener;", "modifier": "@Nullable\n    private", "type": "LocationListener", "declarator": "locationListener", "var_name": "locationListener"}, {"original_string": "private boolean isConnected;", "modifier": "private", "type": "boolean", "declarator": "isConnected", "var_name": "isConnected"}], "methods": [{"identifier": "AndroidLocationClient", "parameters": "(@NonNull Context context)", "modifiers": "", "return": "", "signature": " AndroidLocationClient(@NonNull Context context)", "full_signature": "  AndroidLocationClient(@NonNull Context context)", "class_method_signature": "AndroidLocationClient.AndroidLocationClient(@NonNull Context context)", "testcase": false, "constructor": true}, {"identifier": "AndroidLocationClient", "parameters": "(@NonNull LocationManager locationManager)", "modifiers": "", "return": "", "signature": " AndroidLocationClient(@NonNull LocationManager locationManager)", "full_signature": "  AndroidLocationClient(@NonNull LocationManager locationManager)", "class_method_signature": "AndroidLocationClient.AndroidLocationClient(@NonNull LocationManager locationManager)", "testcase": false, "constructor": true}, {"identifier": "start", "parameters": "()", "modifiers": "@Override public", "return": "void", "signature": "void start()", "full_signature": "@Override public void start()", "class_method_signature": "AndroidLocationClient.start()", "testcase": false, "constructor": false}, {"identifier": "stop", "parameters": "()", "modifiers": "@Override public", "return": "void", "signature": "void stop()", "full_signature": "@Override public void stop()", "class_method_signature": "AndroidLocationClient.stop()", "testcase": false, "constructor": false}, {"identifier": "requestLocationUpdates", "parameters": "(@NonNull LocationListener locationListener)", "modifiers": "@Override @SuppressLint(\"MissingPermission\") // Permission checks for location services handled in widgets public", "return": "void", "signature": "void requestLocationUpdates(@NonNull LocationListener locationListener)", "full_signature": "@Override @SuppressLint(\"MissingPermission\") // Permission checks for location services handled in widgets public void requestLocationUpdates(@NonNull LocationListener locationListener)", "class_method_signature": "AndroidLocationClient.requestLocationUpdates(@NonNull LocationListener locationListener)", "testcase": false, "constructor": false}, {"identifier": "stopLocationUpdates", "parameters": "()", "modifiers": "@Override public", "return": "void", "signature": "void stopLocationUpdates()", "full_signature": "@Override public void stopLocationUpdates()", "class_method_signature": "AndroidLocationClient.stopLocationUpdates()", "testcase": false, "constructor": false}, {"identifier": "setListener", "parameters": "(@Nullable LocationClientListener locationClientListener)", "modifiers": "@Override public", "return": "void", "signature": "void setListener(@Nullable LocationClientListener locationClientListener)", "full_signature": "@Override public void setListener(@Nullable LocationClientListener locationClientListener)", "class_method_signature": "AndroidLocationClient.setListener(@Nullable LocationClientListener locationClientListener)", "testcase": false, "constructor": false}, {"identifier": "getLastLocation", "parameters": "()", "modifiers": "@Override @SuppressLint(\"MissingPermission\") // Permission checks for location services handled in widgets public", "return": "Location", "signature": "Location getLastLocation()", "full_signature": "@Override @SuppressLint(\"MissingPermission\") // Permission checks for location services handled in widgets public Location getLastLocation()", "class_method_signature": "AndroidLocationClient.getLastLocation()", "testcase": false, "constructor": false}, {"identifier": "isMonitoringLocation", "parameters": "()", "modifiers": "@Override public", "return": "boolean", "signature": "boolean isMonitoringLocation()", "full_signature": "@Override public boolean isMonitoringLocation()", "class_method_signature": "AndroidLocationClient.isMonitoringLocation()", "testcase": false, "constructor": false}, {"identifier": "canSetUpdateIntervals", "parameters": "()", "modifiers": "@Override public", "return": "boolean", "signature": "boolean canSetUpdateIntervals()", "full_signature": "@Override public boolean canSetUpdateIntervals()", "class_method_signature": "AndroidLocationClient.canSetUpdateIntervals()", "testcase": false, "constructor": false}, {"identifier": "setUpdateIntervals", "parameters": "(long updateInterval, long fastestUpdateInterval)", "modifiers": "@Override public", "return": "void", "signature": "void setUpdateIntervals(long updateInterval, long fastestUpdateInterval)", "full_signature": "@Override public void setUpdateIntervals(long updateInterval, long fastestUpdateInterval)", "class_method_signature": "AndroidLocationClient.setUpdateIntervals(long updateInterval, long fastestUpdateInterval)", "testcase": false, "constructor": false}, {"identifier": "resetUpdateIntervals", "parameters": "()", "modifiers": "@Override public", "return": "void", "signature": "void resetUpdateIntervals()", "full_signature": "@Override public void resetUpdateIntervals()", "class_method_signature": "AndroidLocationClient.resetUpdateIntervals()", "testcase": false, "constructor": false}, {"identifier": "onLocationChanged", "parameters": "(Location location)", "modifiers": "@Override public", "return": "void", "signature": "void onLocationChanged(Location location)", "full_signature": "@Override public void onLocationChanged(Location location)", "class_method_signature": "AndroidLocationClient.onLocationChanged(Location location)", "testcase": false, "constructor": false}, {"identifier": "onStatusChanged", "parameters": "(String provider, int status, Bundle extras)", "modifiers": "@Override public", "return": "void", "signature": "void onStatusChanged(String provider, int status, Bundle extras)", "full_signature": "@Override public void onStatusChanged(String provider, int status, Bundle extras)", "class_method_signature": "AndroidLocationClient.onStatusChanged(String provider, int status, Bundle extras)", "testcase": false, "constructor": false}, {"identifier": "onProviderEnabled", "parameters": "(String provider)", "modifiers": "@Override public", "return": "void", "signature": "void onProviderEnabled(String provider)", "full_signature": "@Override public void onProviderEnabled(String provider)", "class_method_signature": "AndroidLocationClient.onProviderEnabled(String provider)", "testcase": false, "constructor": false}, {"identifier": "onProviderDisabled", "parameters": "(String provider)", "modifiers": "@Override public", "return": "void", "signature": "void onProviderDisabled(String provider)", "full_signature": "@Override public void onProviderDisabled(String provider)", "class_method_signature": "AndroidLocationClient.onProviderDisabled(String provider)", "testcase": false, "constructor": false}], "file": "collect_app/src/main/java/org/odk/collect/android/location/client/AndroidLocationClient.java"}, "focal_method": {"identifier": "getLastLocation", "parameters": "()", "modifiers": "@Override @SuppressLint(\"MissingPermission\") // Permission checks for location services handled in widgets public", "return": "Location", "body": "@Override\n    @SuppressLint(\"MissingPermission\") // Permission checks for location services handled in widgets\n    public Location getLastLocation() {\n        String provider = getProvider();\n        if (provider != null) {\n            return getLocationManager().getLastKnownLocation(provider);\n        }\n\n        return null;\n    }", "signature": "Location getLastLocation()", "full_signature": "@Override @SuppressLint(\"MissingPermission\") // Permission checks for location services handled in widgets public Location getLastLocation()", "class_method_signature": "AndroidLocationClient.getLastLocation()", "testcase": false, "constructor": false, "invocations": ["getProvider", "getLastKnownLocation", "getLocationManager"]}, "repository": {"repo_id": 166636413, "url": "https://github.com/fieldsight/fieldsight-mobile", "language": "Java", "is_fork": false, "fork_count": 4, "stargazer_count": 14, "size": 41030, "license": "licensed"}}