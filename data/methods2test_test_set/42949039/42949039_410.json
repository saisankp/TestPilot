{"test_class": {"identifier": "BusinessObjectFormatVersionChangeMessageBuilderTest", "superclass": "extends AbstractNotificationMessageBuilderTestHelper", "interfaces": "", "fields": [{"original_string": "@Autowired\n    private BusinessObjectFormatVersionChangeMessageBuilder businessObjectFormatVersionChangeMessageBuilder;", "modifier": "@Autowired\n    private", "type": "BusinessObjectFormatVersionChangeMessageBuilder", "declarator": "businessObjectFormatVersionChangeMessageBuilder", "var_name": "businessObjectFormatVersionChangeMessageBuilder"}], "file": "herd-code/herd-service/src/test/java/org/finra/herd/service/helper/notification/BusinessObjectFormatVersionChangeMessageBuilderTest.java"}, "test_case": {"identifier": "testGetBusinessObjectFormatVersionChangeMessageVelocityContextMap", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testGetBusinessObjectFormatVersionChangeMessageVelocityContextMap()\n    {\n        // Create a business object format key with values that require JSON and XML escaping.\n        BusinessObjectFormatKey businessObjectFormatKey =\n            new BusinessObjectFormatKey(BDEF_NAMESPACE + SUFFIX_UNESCAPED, BDEF_NAME + SUFFIX_UNESCAPED, FORMAT_USAGE_CODE + SUFFIX_UNESCAPED,\n                FORMAT_FILE_TYPE_CODE + SUFFIX_UNESCAPED, FORMAT_VERSION_2);\n\n        // Call the method under test.\n        Map<String, Object> result = businessObjectFormatVersionChangeMessageBuilder.getNotificationMessageVelocityContextMap(\n            new BusinessObjectFormatVersionChangeNotificationEvent(businessObjectFormatKey, String.valueOf(FORMAT_VERSION)));\n\n        // Create an expected JSON escaped business object format key.\n        BusinessObjectFormatKey expectedBusinessObjectFormatKeyWithJson =\n            new BusinessObjectFormatKey(BDEF_NAMESPACE + SUFFIX_ESCAPED_JSON, BDEF_NAME + SUFFIX_ESCAPED_JSON, FORMAT_USAGE_CODE + SUFFIX_ESCAPED_JSON,\n                FORMAT_FILE_TYPE_CODE + SUFFIX_ESCAPED_JSON, FORMAT_VERSION_2);\n\n        // Create an expected XML escaped business object format key.\n        BusinessObjectFormatKey expectedBusinessObjectFormatKeyWithXml =\n            new BusinessObjectFormatKey(BDEF_NAMESPACE + SUFFIX_ESCAPED_XML, BDEF_NAME + SUFFIX_ESCAPED_XML, FORMAT_USAGE_CODE + SUFFIX_ESCAPED_XML,\n                FORMAT_FILE_TYPE_CODE + SUFFIX_ESCAPED_XML, FORMAT_VERSION_2);\n\n        // Validate the results.\n        assertEquals(8, CollectionUtils.size(result));\n\n        assertEquals(businessObjectFormatKey, result.get(\"businessObjectFormatKey\"));\n        assertEquals(expectedBusinessObjectFormatKeyWithJson, result.get(\"businessObjectFormatKeyWithJson\"));\n        assertEquals(expectedBusinessObjectFormatKeyWithXml, result.get(\"businessObjectFormatKeyWithXml\"));\n\n        assertEquals(FORMAT_VERSION_2, result.get(\"newBusinessObjectFormatVersion\"));\n        assertEquals(FORMAT_VERSION.toString(), result.get(\"oldBusinessObjectFormatVersion\"));\n\n        assertEquals(BDEF_NAMESPACE + SUFFIX_UNESCAPED, result.get(\"namespace\"));\n        assertEquals(BDEF_NAMESPACE + SUFFIX_ESCAPED_JSON, result.get(\"namespaceWithJson\"));\n        assertEquals(BDEF_NAMESPACE + SUFFIX_ESCAPED_XML, result.get(\"namespaceWithXml\"));\n    }", "signature": "void testGetBusinessObjectFormatVersionChangeMessageVelocityContextMap()", "full_signature": "@Test public void testGetBusinessObjectFormatVersionChangeMessageVelocityContextMap()", "class_method_signature": "BusinessObjectFormatVersionChangeMessageBuilderTest.testGetBusinessObjectFormatVersionChangeMessageVelocityContextMap()", "testcase": true, "constructor": false, "invocations": ["getNotificationMessageVelocityContextMap", "valueOf", "assertEquals", "size", "assertEquals", "get", "assertEquals", "get", "assertEquals", "get", "assertEquals", "get", "assertEquals", "toString", "get", "assertEquals", "get", "assertEquals", "get", "assertEquals", "get"]}, "focal_class": {"identifier": "BusinessObjectFormatVersionChangeMessageBuilder", "superclass": "extends AbstractNotificationMessageBuilder", "interfaces": "implements NotificationMessageBuilder", "fields": [], "methods": [{"identifier": "getNotificationMessageVelocityContextMap", "parameters": "(NotificationEvent notificationEvent)", "modifiers": "@Override @SuppressFBWarnings(value = \"BC_UNCONFIRMED_CAST\", justification = \"The NotificationEvent is cast to a BusinessObjectFormatVersionChangeNotificationEvent which is always the case since\" + \" we manage the event type to a builder in a map defined in NotificationMessageManager\") public", "return": "Map<String, Object>", "signature": "Map<String, Object> getNotificationMessageVelocityContextMap(NotificationEvent notificationEvent)", "full_signature": "@Override @SuppressFBWarnings(value = \"BC_UNCONFIRMED_CAST\", justification = \"The NotificationEvent is cast to a BusinessObjectFormatVersionChangeNotificationEvent which is always the case since\" + \" we manage the event type to a builder in a map defined in NotificationMessageManager\") public Map<String, Object> getNotificationMessageVelocityContextMap(NotificationEvent notificationEvent)", "class_method_signature": "BusinessObjectFormatVersionChangeMessageBuilder.getNotificationMessageVelocityContextMap(NotificationEvent notificationEvent)", "testcase": false, "constructor": false}, {"identifier": "escapeJsonBusinessObjectFormatKey", "parameters": "(final BusinessObjectFormatKey businessObjectFormatKey)", "modifiers": "private", "return": "BusinessObjectFormatKey", "signature": "BusinessObjectFormatKey escapeJsonBusinessObjectFormatKey(final BusinessObjectFormatKey businessObjectFormatKey)", "full_signature": "private BusinessObjectFormatKey escapeJsonBusinessObjectFormatKey(final BusinessObjectFormatKey businessObjectFormatKey)", "class_method_signature": "BusinessObjectFormatVersionChangeMessageBuilder.escapeJsonBusinessObjectFormatKey(final BusinessObjectFormatKey businessObjectFormatKey)", "testcase": false, "constructor": false}, {"identifier": "escapeXmlBusinessObjectFormatKey", "parameters": "(final BusinessObjectFormatKey businessObjectFormatKey)", "modifiers": "private", "return": "BusinessObjectFormatKey", "signature": "BusinessObjectFormatKey escapeXmlBusinessObjectFormatKey(final BusinessObjectFormatKey businessObjectFormatKey)", "full_signature": "private BusinessObjectFormatKey escapeXmlBusinessObjectFormatKey(final BusinessObjectFormatKey businessObjectFormatKey)", "class_method_signature": "BusinessObjectFormatVersionChangeMessageBuilder.escapeXmlBusinessObjectFormatKey(final BusinessObjectFormatKey businessObjectFormatKey)", "testcase": false, "constructor": false}], "file": "herd-code/herd-service/src/main/java/org/finra/herd/service/helper/notification/BusinessObjectFormatVersionChangeMessageBuilder.java"}, "focal_method": {"identifier": "getNotificationMessageVelocityContextMap", "parameters": "(NotificationEvent notificationEvent)", "modifiers": "@Override @SuppressFBWarnings(value = \"BC_UNCONFIRMED_CAST\", justification = \"The NotificationEvent is cast to a BusinessObjectFormatVersionChangeNotificationEvent which is always the case since\" + \" we manage the event type to a builder in a map defined in NotificationMessageManager\") public", "return": "Map<String, Object>", "body": "@Override\n    @SuppressFBWarnings(value = \"BC_UNCONFIRMED_CAST\", justification =\n        \"The NotificationEvent is cast to a BusinessObjectFormatVersionChangeNotificationEvent which is always the case since\" +\n            \" we manage the event type to a builder in a map defined in NotificationMessageManager\")\n    public Map<String, Object> getNotificationMessageVelocityContextMap(NotificationEvent notificationEvent)\n    {\n        BusinessObjectFormatVersionChangeNotificationEvent event = (BusinessObjectFormatVersionChangeNotificationEvent) notificationEvent;\n        Map<String, Object> velocityContextMap = new HashMap<>();\n\n        addObjectPropertyToContext(velocityContextMap, \"businessObjectFormatKey\", event.getBusinessObjectFormatKey(),\n            escapeJsonBusinessObjectFormatKey(event.getBusinessObjectFormatKey()), escapeXmlBusinessObjectFormatKey(event.getBusinessObjectFormatKey()));\n        velocityContextMap.put(\"newBusinessObjectFormatVersion\", event.getBusinessObjectFormatKey().getBusinessObjectFormatVersion());\n        velocityContextMap.put(\"oldBusinessObjectFormatVersion\", event.getOldBusinessObjectFormatVersion());\n        addStringPropertyToContext(velocityContextMap, \"namespace\", event.getBusinessObjectFormatKey().getNamespace());\n\n        return velocityContextMap;\n    }", "signature": "Map<String, Object> getNotificationMessageVelocityContextMap(NotificationEvent notificationEvent)", "full_signature": "@Override @SuppressFBWarnings(value = \"BC_UNCONFIRMED_CAST\", justification = \"The NotificationEvent is cast to a BusinessObjectFormatVersionChangeNotificationEvent which is always the case since\" + \" we manage the event type to a builder in a map defined in NotificationMessageManager\") public Map<String, Object> getNotificationMessageVelocityContextMap(NotificationEvent notificationEvent)", "class_method_signature": "BusinessObjectFormatVersionChangeMessageBuilder.getNotificationMessageVelocityContextMap(NotificationEvent notificationEvent)", "testcase": false, "constructor": false, "invocations": ["addObjectPropertyToContext", "getBusinessObjectFormatKey", "escapeJsonBusinessObjectFormatKey", "getBusinessObjectFormatKey", "escapeXmlBusinessObjectFormatKey", "getBusinessObjectFormatKey", "put", "getBusinessObjectFormatVersion", "getBusinessObjectFormatKey", "put", "getOldBusinessObjectFormatVersion", "addStringPropertyToContext", "getNamespace", "getBusinessObjectFormatKey"]}, "repository": {"repo_id": 42949039, "url": "https://github.com/FINRAOS/herd", "language": "Java", "is_fork": false, "fork_count": 36, "stargazer_count": 120, "size": 205797, "license": "licensed"}}