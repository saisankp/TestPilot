{"test_class": {"identifier": "TracingFormServiceImplTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private TracingFormService tracingFormService;", "modifier": "private", "type": "TracingFormService", "declarator": "tracingFormService", "var_name": "tracingFormService"}, {"original_string": "private TracingFormDao tracingFormDao;", "modifier": "private", "type": "TracingFormDao", "declarator": "tracingFormDao", "var_name": "tracingFormDao"}, {"original_string": "private String formForm = \"{\\n\" +\n            \"  \\\"Enquiries\\\": [\\n\" +\n            \"    {\\n\" +\n            \"      \\\"order\\\": 10,\\n\" +\n            \"      \\\"fields\\\": [\\n\" +\n            \"        {\\n\" +\n            \"          \\\"name\\\": \\\"tracingworker_name\\\",\\n\" +\n            \"          \\\"type\\\": \\\"text_field\\\",\\n\" +\n            \"          \\\"editable\\\": true,\\n\" +\n            \"          \\\"multi_select\\\": false,\\n\" +\n            \"          \\\"mobile_visible\\\":true,\\n\" +\n            \"          \\\"show_on_minify_form\\\":true,\\n\" +\n            \"          \\\"required\\\":false,\\n\" +\n            \"          \\\"display_name\\\": {\\n\" +\n            \"            \\\"en\\\": \\\"Field/Tracing/Social Worker\\\"\\n\" +\n            \"          },\\n\" +\n            \"          \\\"help_text\\\": {\\n\" +\n            \"            \\\"en\\\": \\\"\\\"\\n\" +\n            \"          },\\n\" +\n            \"          \\\"option_strings_text\\\": {\\n\" +\n            \"            \\\"en\\\": []\\n\" +\n            \"          }\\n\" +\n            \"        }\\n\" +\n            \"      ],\\n\" +\n            \"      \\\"base_language\\\": \\\"en\\\",\\n\" +\n            \"      \\\"name\\\": {\\n\" +\n            \"        \\\"en\\\": \\\"Record Owner\\\"\\n\" +\n            \"      },\\n\" +\n            \"      \\\"help_text\\\": {\\n\" +\n            \"        \\\"en\\\": \\\"\\\"\\n\" +\n            \"      }\\n\" +\n            \"    }\\n\" +\n            \"  ]\\n\" +\n            \"}\";", "modifier": "private", "type": "String", "declarator": "formForm = \"{\\n\" +\n            \"  \\\"Enquiries\\\": [\\n\" +\n            \"    {\\n\" +\n            \"      \\\"order\\\": 10,\\n\" +\n            \"      \\\"fields\\\": [\\n\" +\n            \"        {\\n\" +\n            \"          \\\"name\\\": \\\"tracingworker_name\\\",\\n\" +\n            \"          \\\"type\\\": \\\"text_field\\\",\\n\" +\n            \"          \\\"editable\\\": true,\\n\" +\n            \"          \\\"multi_select\\\": false,\\n\" +\n            \"          \\\"mobile_visible\\\":true,\\n\" +\n            \"          \\\"show_on_minify_form\\\":true,\\n\" +\n            \"          \\\"required\\\":false,\\n\" +\n            \"          \\\"display_name\\\": {\\n\" +\n            \"            \\\"en\\\": \\\"Field/Tracing/Social Worker\\\"\\n\" +\n            \"          },\\n\" +\n            \"          \\\"help_text\\\": {\\n\" +\n            \"            \\\"en\\\": \\\"\\\"\\n\" +\n            \"          },\\n\" +\n            \"          \\\"option_strings_text\\\": {\\n\" +\n            \"            \\\"en\\\": []\\n\" +\n            \"          }\\n\" +\n            \"        }\\n\" +\n            \"      ],\\n\" +\n            \"      \\\"base_language\\\": \\\"en\\\",\\n\" +\n            \"      \\\"name\\\": {\\n\" +\n            \"        \\\"en\\\": \\\"Record Owner\\\"\\n\" +\n            \"      },\\n\" +\n            \"      \\\"help_text\\\": {\\n\" +\n            \"        \\\"en\\\": \\\"\\\"\\n\" +\n            \"      }\\n\" +\n            \"    }\\n\" +\n            \"  ]\\n\" +\n            \"}\"", "var_name": "formForm"}], "file": "app/src/test/java/org/unicef/rapidreg/service/impl/TracingFormServiceImplTest.java"}, "test_case": {"identifier": "should_update_when_existing_tracing_form_is_not_null", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void should_update_when_existing_tracing_form_is_not_null() {\n        TracingForm existingTracingForm = mock(TracingForm.class);\n        when(tracingFormDao.getTracingForm(PrimeroAppConfiguration.getApiBaseUrl())).thenReturn(existingTracingForm);\n        TracingForm tracingForm = mock(TracingForm.class);\n        tracingFormService.saveOrUpdate(tracingForm);\n        verify(existingTracingForm, times(1)).setForm(tracingForm.getForm());\n        verify(existingTracingForm, times(1)).update();\n    }", "signature": "void should_update_when_existing_tracing_form_is_not_null()", "full_signature": "@Test public void should_update_when_existing_tracing_form_is_not_null()", "class_method_signature": "TracingFormServiceImplTest.should_update_when_existing_tracing_form_is_not_null()", "testcase": true, "constructor": false, "invocations": ["mock", "thenReturn", "when", "getTracingForm", "getApiBaseUrl", "mock", "saveOrUpdate", "setForm", "verify", "times", "getForm", "update", "verify", "times"]}, "focal_class": {"identifier": "TracingFormServiceImpl", "superclass": "", "interfaces": "implements TracingFormService", "fields": [{"original_string": "public static final String TAG = TracingFormServiceImpl.class.getSimpleName();", "modifier": "public static final", "type": "String", "declarator": "TAG = TracingFormServiceImpl.class.getSimpleName()", "var_name": "TAG"}, {"original_string": "private TracingFormDao tracingFormDao;", "modifier": "private", "type": "TracingFormDao", "declarator": "tracingFormDao", "var_name": "tracingFormDao"}], "methods": [{"identifier": "TracingFormServiceImpl", "parameters": "(TracingFormDao tracingFormDao)", "modifiers": "public", "return": "", "signature": " TracingFormServiceImpl(TracingFormDao tracingFormDao)", "full_signature": "public  TracingFormServiceImpl(TracingFormDao tracingFormDao)", "class_method_signature": "TracingFormServiceImpl.TracingFormServiceImpl(TracingFormDao tracingFormDao)", "testcase": false, "constructor": true}, {"identifier": "isReady", "parameters": "()", "modifiers": "public", "return": "boolean", "signature": "boolean isReady()", "full_signature": "public boolean isReady()", "class_method_signature": "TracingFormServiceImpl.isReady()", "testcase": false, "constructor": false}, {"identifier": "getCPTemplate", "parameters": "()", "modifiers": "public", "return": "TracingTemplateForm", "signature": "TracingTemplateForm getCPTemplate()", "full_signature": "public TracingTemplateForm getCPTemplate()", "class_method_signature": "TracingFormServiceImpl.getCPTemplate()", "testcase": false, "constructor": false}, {"identifier": "saveOrUpdate", "parameters": "(TracingForm tracingForm)", "modifiers": "public", "return": "void", "signature": "void saveOrUpdate(TracingForm tracingForm)", "full_signature": "public void saveOrUpdate(TracingForm tracingForm)", "class_method_signature": "TracingFormServiceImpl.saveOrUpdate(TracingForm tracingForm)", "testcase": false, "constructor": false}], "file": "app/src/main/java/org/unicef/rapidreg/service/impl/TracingFormServiceImpl.java"}, "focal_method": {"identifier": "saveOrUpdate", "parameters": "(TracingForm tracingForm)", "modifiers": "public", "return": "void", "body": "public void saveOrUpdate(TracingForm tracingForm) {\n        TracingForm existingTracingForm = tracingFormDao.getTracingForm(PrimeroAppConfiguration.getApiBaseUrl());\n        if (existingTracingForm == null) {\n            Log.d(TAG, \"save new tracing form\");\n            tracingForm.setServerUrl(PrimeroAppConfiguration.getApiBaseUrl());\n            tracingForm.save();\n        } else {\n            Log.d(TAG, \"update existing tracing form\");\n            existingTracingForm.setForm(tracingForm.getForm());\n            existingTracingForm.update();\n        }\n    }", "signature": "void saveOrUpdate(TracingForm tracingForm)", "full_signature": "public void saveOrUpdate(TracingForm tracingForm)", "class_method_signature": "TracingFormServiceImpl.saveOrUpdate(TracingForm tracingForm)", "testcase": false, "constructor": false, "invocations": ["getTracingForm", "getApiBaseUrl", "d", "setServerUrl", "getApiBaseUrl", "save", "d", "setForm", "getForm", "update"]}, "repository": {"repo_id": 59507570, "url": "https://github.com/UnicefNY/RapidReg", "language": "Java", "is_fork": false, "fork_count": 3, "stargazer_count": 7, "size": 10753, "license": "Other"}}