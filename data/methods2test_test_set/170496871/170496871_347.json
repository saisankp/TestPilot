{"test_class": {"identifier": "CovarianceMatricesAggregatorTest", "superclass": "", "interfaces": "", "fields": [], "file": "modules/ml/src/test/java/org/apache/ignite/ml/clustering/gmm/CovarianceMatricesAggregatorTest.java"}, "test_case": {"identifier": "testMap", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testMap() {\n        List<LabeledVector<Double>> xs = Arrays.asList(\n            new LabeledVector<>(VectorUtils.of(1, 0), 0.),\n            new LabeledVector<>(VectorUtils.of(0, 1), 0.),\n            new LabeledVector<>(VectorUtils.of(1, 1), 0.)\n        );\n\n        double[][] pcxi = new double[][] {\n            new double[] {0.1, 0.2},\n            new double[] {0.4, 0.3},\n            new double[] {0.5, 0.6}\n        };\n\n        GmmPartitionData data = new GmmPartitionData(xs, pcxi);\n        Vector mean1 = VectorUtils.of(1, 1);\n        Vector mean2 = VectorUtils.of(0, 1);\n        List<CovarianceMatricesAggregator> result = CovarianceMatricesAggregator.map(data, new Vector[] {mean1, mean2});\n\n        assertEquals(pcxi[0].length, result.size());\n\n        CovarianceMatricesAggregator res1 = result.get(0);\n        assertArrayEquals(mean1.asArray(), res1.mean().asArray(), 1e-4);\n        assertArrayEquals(\n            res1.weightedSum().getStorage().data(),\n            fromArray(2, 0.4, 0., 0., 0.1).getStorage().data(),\n            1e-4\n        );\n        assertEquals(3, res1.rowCount());\n\n        CovarianceMatricesAggregator res2 = result.get(1);\n        assertArrayEquals(mean2.asArray(), res2.mean().asArray(), 1e-4);\n        assertArrayEquals(\n            res2.weightedSum().getStorage().data(),\n            fromArray(2, 0.8, -0.2, -0.2, 0.2).getStorage().data(),\n            1e-4\n        );\n        assertEquals(3, res2.rowCount());\n    }", "signature": "void testMap()", "full_signature": "@Test public void testMap()", "class_method_signature": "CovarianceMatricesAggregatorTest.testMap()", "testcase": true, "constructor": false, "invocations": ["asList", "of", "of", "of", "of", "of", "map", "assertEquals", "size", "get", "assertArrayEquals", "asArray", "asArray", "mean", "assertArrayEquals", "data", "getStorage", "weightedSum", "data", "getStorage", "fromArray", "assertEquals", "rowCount", "get", "assertArrayEquals", "asArray", "asArray", "mean", "assertArrayEquals", "data", "getStorage", "weightedSum", "data", "getStorage", "fromArray", "assertEquals", "rowCount"]}, "focal_class": {"identifier": "CovarianceMatricesAggregator", "superclass": "", "interfaces": "implements Serializable", "fields": [{"original_string": "private static final long serialVersionUID = 4163253784526780812L;", "modifier": "private static final", "type": "long", "declarator": "serialVersionUID = 4163253784526780812L", "var_name": "serialVersionUID"}, {"original_string": "private final Vector mean;", "modifier": "private final", "type": "Vector", "declarator": "mean", "var_name": "mean"}, {"original_string": "private Matrix weightedSum;", "modifier": "private", "type": "Matrix", "declarator": "weightedSum", "var_name": "weightedSum"}, {"original_string": "private int rowCount;", "modifier": "private", "type": "int", "declarator": "rowCount", "var_name": "rowCount"}], "methods": [{"identifier": "CovarianceMatricesAggregator", "parameters": "(Vector mean)", "modifiers": "", "return": "", "signature": " CovarianceMatricesAggregator(Vector mean)", "full_signature": "  CovarianceMatricesAggregator(Vector mean)", "class_method_signature": "CovarianceMatricesAggregator.CovarianceMatricesAggregator(Vector mean)", "testcase": false, "constructor": true}, {"identifier": "CovarianceMatricesAggregator", "parameters": "(Vector mean, Matrix weightedSum, int rowCount)", "modifiers": "", "return": "", "signature": " CovarianceMatricesAggregator(Vector mean, Matrix weightedSum, int rowCount)", "full_signature": "  CovarianceMatricesAggregator(Vector mean, Matrix weightedSum, int rowCount)", "class_method_signature": "CovarianceMatricesAggregator.CovarianceMatricesAggregator(Vector mean, Matrix weightedSum, int rowCount)", "testcase": false, "constructor": true}, {"identifier": "computeCovariances", "parameters": "(Dataset<EmptyContext, GmmPartitionData> dataset,\n        Vector clusterProbs, Vector[] means)", "modifiers": "static", "return": "List<Matrix>", "signature": "List<Matrix> computeCovariances(Dataset<EmptyContext, GmmPartitionData> dataset,\n        Vector clusterProbs, Vector[] means)", "full_signature": "static List<Matrix> computeCovariances(Dataset<EmptyContext, GmmPartitionData> dataset,\n        Vector clusterProbs, Vector[] means)", "class_method_signature": "CovarianceMatricesAggregator.computeCovariances(Dataset<EmptyContext, GmmPartitionData> dataset,\n        Vector clusterProbs, Vector[] means)", "testcase": false, "constructor": false}, {"identifier": "add", "parameters": "(Vector x, double pcxi)", "modifiers": "", "return": "void", "signature": "void add(Vector x, double pcxi)", "full_signature": " void add(Vector x, double pcxi)", "class_method_signature": "CovarianceMatricesAggregator.add(Vector x, double pcxi)", "testcase": false, "constructor": false}, {"identifier": "plus", "parameters": "(CovarianceMatricesAggregator other)", "modifiers": "", "return": "CovarianceMatricesAggregator", "signature": "CovarianceMatricesAggregator plus(CovarianceMatricesAggregator other)", "full_signature": " CovarianceMatricesAggregator plus(CovarianceMatricesAggregator other)", "class_method_signature": "CovarianceMatricesAggregator.plus(CovarianceMatricesAggregator other)", "testcase": false, "constructor": false}, {"identifier": "map", "parameters": "(GmmPartitionData data, Vector[] means)", "modifiers": "static", "return": "List<CovarianceMatricesAggregator>", "signature": "List<CovarianceMatricesAggregator> map(GmmPartitionData data, Vector[] means)", "full_signature": "static List<CovarianceMatricesAggregator> map(GmmPartitionData data, Vector[] means)", "class_method_signature": "CovarianceMatricesAggregator.map(GmmPartitionData data, Vector[] means)", "testcase": false, "constructor": false}, {"identifier": "covariance", "parameters": "(double clusterProb)", "modifiers": "private", "return": "Matrix", "signature": "Matrix covariance(double clusterProb)", "full_signature": "private Matrix covariance(double clusterProb)", "class_method_signature": "CovarianceMatricesAggregator.covariance(double clusterProb)", "testcase": false, "constructor": false}, {"identifier": "reduce", "parameters": "(List<CovarianceMatricesAggregator> l,\n        List<CovarianceMatricesAggregator> r)", "modifiers": "static", "return": "List<CovarianceMatricesAggregator>", "signature": "List<CovarianceMatricesAggregator> reduce(List<CovarianceMatricesAggregator> l,\n        List<CovarianceMatricesAggregator> r)", "full_signature": "static List<CovarianceMatricesAggregator> reduce(List<CovarianceMatricesAggregator> l,\n        List<CovarianceMatricesAggregator> r)", "class_method_signature": "CovarianceMatricesAggregator.reduce(List<CovarianceMatricesAggregator> l,\n        List<CovarianceMatricesAggregator> r)", "testcase": false, "constructor": false}, {"identifier": "mean", "parameters": "()", "modifiers": "", "return": "Vector", "signature": "Vector mean()", "full_signature": " Vector mean()", "class_method_signature": "CovarianceMatricesAggregator.mean()", "testcase": false, "constructor": false}, {"identifier": "weightedSum", "parameters": "()", "modifiers": "", "return": "Matrix", "signature": "Matrix weightedSum()", "full_signature": " Matrix weightedSum()", "class_method_signature": "CovarianceMatricesAggregator.weightedSum()", "testcase": false, "constructor": false}, {"identifier": "rowCount", "parameters": "()", "modifiers": "public", "return": "int", "signature": "int rowCount()", "full_signature": "public int rowCount()", "class_method_signature": "CovarianceMatricesAggregator.rowCount()", "testcase": false, "constructor": false}], "file": "modules/ml/src/main/java/org/apache/ignite/ml/clustering/gmm/CovarianceMatricesAggregator.java"}, "focal_method": {"identifier": "map", "parameters": "(GmmPartitionData data, Vector[] means)", "modifiers": "static", "return": "List<CovarianceMatricesAggregator>", "body": "static List<CovarianceMatricesAggregator> map(GmmPartitionData data, Vector[] means) {\n        int countOfComponents = means.length;\n\n        List<CovarianceMatricesAggregator> aggregators = new ArrayList<>();\n        for (int i = 0; i < countOfComponents; i++)\n            aggregators.add(new CovarianceMatricesAggregator(means[i]));\n\n        for (int i = 0; i < data.size(); i++) {\n            for (int c = 0; c < countOfComponents; c++)\n                aggregators.get(c).add(data.getX(i), data.pcxi(c, i));\n        }\n\n        return aggregators;\n    }", "signature": "List<CovarianceMatricesAggregator> map(GmmPartitionData data, Vector[] means)", "full_signature": "static List<CovarianceMatricesAggregator> map(GmmPartitionData data, Vector[] means)", "class_method_signature": "CovarianceMatricesAggregator.map(GmmPartitionData data, Vector[] means)", "testcase": false, "constructor": false, "invocations": ["add", "size", "add", "get", "getX", "pcxi"]}, "repository": {"repo_id": 170496871, "url": "https://github.com/gridgain/gridgain", "stars": 46, "created": "2/13/2019 11:31:35 AM +00:00", "updates": "2020-01-27T16:02:24+00:00", "fork": "False", "license": "licensed"}}