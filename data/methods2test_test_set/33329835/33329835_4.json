{"test_class": {"identifier": "EbtsBuilderTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final Logger log = LoggerFactory.getLogger(EbtsBuilderTest.class);", "modifier": "private static final", "type": "Logger", "declarator": "log = LoggerFactory.getLogger(EbtsBuilderTest.class)", "var_name": "log"}], "file": "Jet/src/test/java/org/mitre/jet/ebts/EbtsBuilderTest.java"}, "test_case": {"identifier": "parseBuildTest", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void parseBuildTest() throws Exception {\n        EbtsParser parser = new EbtsParser();\n        File file = new File(ClassLoader.getSystemResource(\"EFT/S001-01-t10_01.eft\").toURI());\n        Ebts ebts = parser.parse(file);\n        EbtsBuilder builder = new EbtsBuilder(1);\n        File tmpFile = File.createTempFile(\"test\", \".eft\");\n        tmpFile.deleteOnExit();\n        try {\n            Files.write(builder.build(ebts), tmpFile);\n        } finally {\n            tmpFile.delete();\n        }\n    }", "signature": "void parseBuildTest()", "full_signature": "@Test public void parseBuildTest()", "class_method_signature": "EbtsBuilderTest.parseBuildTest()", "testcase": true, "constructor": false, "invocations": ["toURI", "getSystemResource", "parse", "createTempFile", "deleteOnExit", "write", "build", "delete"]}, "focal_class": {"identifier": "EbtsBuilder", "superclass": "", "interfaces": "", "fields": [{"original_string": "private int minLength = 2;", "modifier": "private", "type": "int", "declarator": "minLength = 2", "var_name": "minLength"}, {"original_string": "private static final Set<Integer> binaryHeaderTypes = EbtsUtils.getBinaryHeaderTypes();", "modifier": "private static final", "type": "Set<Integer>", "declarator": "binaryHeaderTypes = EbtsUtils.getBinaryHeaderTypes()", "var_name": "binaryHeaderTypes"}, {"original_string": "private static final Set<Integer> genericTypes = EbtsUtils.getGenericRecordTypes();", "modifier": "private static final", "type": "Set<Integer>", "declarator": "genericTypes = EbtsUtils.getGenericRecordTypes()", "var_name": "genericTypes"}, {"original_string": "private Ebts ebts;", "modifier": "private", "type": "Ebts", "declarator": "ebts", "var_name": "ebts"}], "methods": [{"identifier": "EbtsBuilder", "parameters": "()", "modifiers": "public", "return": "", "signature": " EbtsBuilder()", "full_signature": "public  EbtsBuilder()", "class_method_signature": "EbtsBuilder.EbtsBuilder()", "testcase": false, "constructor": true}, {"identifier": "EbtsBuilder", "parameters": "(final int precedingZeros)", "modifiers": "public", "return": "", "signature": " EbtsBuilder(final int precedingZeros)", "full_signature": "public  EbtsBuilder(final int precedingZeros)", "class_method_signature": "EbtsBuilder.EbtsBuilder(final int precedingZeros)", "testcase": false, "constructor": true}, {"identifier": "fixCountField", "parameters": "(final GenericRecord record)", "modifiers": "private", "return": "void", "signature": "void fixCountField(final GenericRecord record)", "full_signature": "private void fixCountField(final GenericRecord record)", "class_method_signature": "EbtsBuilder.fixCountField(final GenericRecord record)", "testcase": false, "constructor": false}, {"identifier": "getNextAvailableIDC", "parameters": "()", "modifiers": "private", "return": "int", "signature": "int getNextAvailableIDC()", "full_signature": "private int getNextAvailableIDC()", "class_method_signature": "EbtsBuilder.getNextAvailableIDC()", "testcase": false, "constructor": false}, {"identifier": "genericBuilder", "parameters": "(final GenericRecord record, final ByteArrayOutputStream baos)", "modifiers": "private", "return": "void", "signature": "void genericBuilder(final GenericRecord record, final ByteArrayOutputStream baos)", "full_signature": "private void genericBuilder(final GenericRecord record, final ByteArrayOutputStream baos)", "class_method_signature": "EbtsBuilder.genericBuilder(final GenericRecord record, final ByteArrayOutputStream baos)", "testcase": false, "constructor": false}, {"identifier": "binaryHeaderBuilder", "parameters": "(final BinaryHeaderImageRecord record, final ByteArrayOutputStream baos)", "modifiers": "private static", "return": "void", "signature": "void binaryHeaderBuilder(final BinaryHeaderImageRecord record, final ByteArrayOutputStream baos)", "full_signature": "private static void binaryHeaderBuilder(final BinaryHeaderImageRecord record, final ByteArrayOutputStream baos)", "class_method_signature": "EbtsBuilder.binaryHeaderBuilder(final BinaryHeaderImageRecord record, final ByteArrayOutputStream baos)", "testcase": false, "constructor": false}, {"identifier": "setPrecedingZeros", "parameters": "(final int precedingZeros)", "modifiers": "public", "return": "void", "signature": "void setPrecedingZeros(final int precedingZeros)", "full_signature": "public void setPrecedingZeros(final int precedingZeros)", "class_method_signature": "EbtsBuilder.setPrecedingZeros(final int precedingZeros)", "testcase": false, "constructor": false}, {"identifier": "build", "parameters": "(final Ebts ebts)", "modifiers": "public", "return": "byte[]", "signature": "byte[] build(final Ebts ebts)", "full_signature": "public byte[] build(final Ebts ebts)", "class_method_signature": "EbtsBuilder.build(final Ebts ebts)", "testcase": false, "constructor": false}], "file": "Jet/src/main/java/org/mitre/jet/ebts/EbtsBuilder.java"}, "focal_method": {"identifier": "build", "parameters": "(final Ebts ebts)", "modifiers": "public", "return": "byte[]", "body": "public byte[] build(final Ebts ebts) throws EbtsBuildingException {\n        this.ebts = ebts;\n        //Create the auto-expanding output stream\n        final ByteArrayOutputStream baos = new ByteArrayOutputStream();\n        //Get list of all records\n        //Overwrite CNT field(1.03)\n        final List<LogicalRecord> records = ebts.getAllRecords();\n        for (final LogicalRecord record : records) {\n\n            if (genericTypes.contains(record.getRecordType())) {\n                genericBuilder((GenericRecord)record,baos);\n            } else if (binaryHeaderTypes.contains(record.getRecordType())) {\n                binaryHeaderBuilder((BinaryHeaderImageRecord)record,baos);\n            }\n        }\n        return baos.toByteArray();\n    }", "signature": "byte[] build(final Ebts ebts)", "full_signature": "public byte[] build(final Ebts ebts)", "class_method_signature": "EbtsBuilder.build(final Ebts ebts)", "testcase": false, "constructor": false, "invocations": ["getAllRecords", "contains", "getRecordType", "genericBuilder", "contains", "getRecordType", "binaryHeaderBuilder", "toByteArray"]}, "repository": {"repo_id": 33329835, "url": "https://github.com/ebts/jet", "language": "Java", "is_fork": false, "fork_count": 11, "stargazer_count": 13, "size": 4035, "license": "licensed"}}