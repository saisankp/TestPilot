{"test_class": {"identifier": "ZMSFileChangeLogStoreCommonTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private final String FSTORE_PATH = \"/tmp/zts_file_store_unit_test\";", "modifier": "private final", "type": "String", "declarator": "FSTORE_PATH = \"/tmp/zts_file_store_unit_test\"", "var_name": "FSTORE_PATH"}], "file": "libs/java/server_common/src/test/java/com/yahoo/athenz/common/server/store/impl/ZMSFileChangeLogStoreCommonTest.java"}, "test_case": {"identifier": "testGetNonExistent", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testGetNonExistent() {\n\n        ZMSFileChangeLogStoreCommon fstore = new ZMSFileChangeLogStoreCommon(FSTORE_PATH);\n        Struct st = fstore.get(\"NotExistent\", Struct.class);\n        assertNull(st);\n    }", "signature": "void testGetNonExistent()", "full_signature": "@Test public void testGetNonExistent()", "class_method_signature": "ZMSFileChangeLogStoreCommonTest.testGetNonExistent()", "testcase": true, "constructor": false, "invocations": ["get", "assertNull"]}, "focal_class": {"identifier": "ZMSFileChangeLogStoreCommon", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final Logger LOGGER = LoggerFactory.getLogger(ZMSFileChangeLogStoreCommon.class);", "modifier": "private static final", "type": "Logger", "declarator": "LOGGER = LoggerFactory.getLogger(ZMSFileChangeLogStoreCommon.class)", "var_name": "LOGGER"}, {"original_string": "File rootDir;", "modifier": "", "type": "File", "declarator": "rootDir", "var_name": "rootDir"}, {"original_string": "ObjectMapper jsonMapper;", "modifier": "", "type": "ObjectMapper", "declarator": "jsonMapper", "var_name": "jsonMapper"}, {"original_string": "FilesHelper filesHelper;", "modifier": "", "type": "FilesHelper", "declarator": "filesHelper", "var_name": "filesHelper"}, {"original_string": "public String lastModTime;", "modifier": "public", "type": "String", "declarator": "lastModTime", "var_name": "lastModTime"}, {"original_string": "private static final String ATTR_TAG           = \"tag\";", "modifier": "private static final", "type": "String", "declarator": "ATTR_TAG           = \"tag\"", "var_name": "ATTR_TAG"}, {"original_string": "private static final String VALUE_TRUE         = \"true\";", "modifier": "private static final", "type": "String", "declarator": "VALUE_TRUE         = \"true\"", "var_name": "VALUE_TRUE"}, {"original_string": "private static final String LAST_MOD_FNAME     = \".lastModTime\";", "modifier": "private static final", "type": "String", "declarator": "LAST_MOD_FNAME     = \".lastModTime\"", "var_name": "LAST_MOD_FNAME"}, {"original_string": "private static final String ATTR_LAST_MOD_TIME = \"lastModTime\";", "modifier": "private static final", "type": "String", "declarator": "ATTR_LAST_MOD_TIME = \"lastModTime\"", "var_name": "ATTR_LAST_MOD_TIME"}], "methods": [{"identifier": "ZMSFileChangeLogStoreCommon", "parameters": "(final String rootDirectory)", "modifiers": "public", "return": "", "signature": " ZMSFileChangeLogStoreCommon(final String rootDirectory)", "full_signature": "public  ZMSFileChangeLogStoreCommon(final String rootDirectory)", "class_method_signature": "ZMSFileChangeLogStoreCommon.ZMSFileChangeLogStoreCommon(final String rootDirectory)", "testcase": false, "constructor": true}, {"identifier": "supportsFullRefresh", "parameters": "()", "modifiers": "public", "return": "boolean", "signature": "boolean supportsFullRefresh()", "full_signature": "public boolean supportsFullRefresh()", "class_method_signature": "ZMSFileChangeLogStoreCommon.supportsFullRefresh()", "testcase": false, "constructor": false}, {"identifier": "getLocalSignedDomain", "parameters": "(final String domainName)", "modifiers": "public", "return": "SignedDomain", "signature": "SignedDomain getLocalSignedDomain(final String domainName)", "full_signature": "public SignedDomain getLocalSignedDomain(final String domainName)", "class_method_signature": "ZMSFileChangeLogStoreCommon.getLocalSignedDomain(final String domainName)", "testcase": false, "constructor": false}, {"identifier": "getServerSignedDomain", "parameters": "(ZMSClient zmsClient, final String domainName)", "modifiers": "public", "return": "SignedDomain", "signature": "SignedDomain getServerSignedDomain(ZMSClient zmsClient, final String domainName)", "full_signature": "public SignedDomain getServerSignedDomain(ZMSClient zmsClient, final String domainName)", "class_method_signature": "ZMSFileChangeLogStoreCommon.getServerSignedDomain(ZMSClient zmsClient, final String domainName)", "testcase": false, "constructor": false}, {"identifier": "removeLocalDomain", "parameters": "(String domainName)", "modifiers": "public", "return": "void", "signature": "void removeLocalDomain(String domainName)", "full_signature": "public void removeLocalDomain(String domainName)", "class_method_signature": "ZMSFileChangeLogStoreCommon.removeLocalDomain(String domainName)", "testcase": false, "constructor": false}, {"identifier": "saveLocalDomain", "parameters": "(String domainName, SignedDomain signedDomain)", "modifiers": "public", "return": "void", "signature": "void saveLocalDomain(String domainName, SignedDomain signedDomain)", "full_signature": "public void saveLocalDomain(String domainName, SignedDomain signedDomain)", "class_method_signature": "ZMSFileChangeLogStoreCommon.saveLocalDomain(String domainName, SignedDomain signedDomain)", "testcase": false, "constructor": false}, {"identifier": "setupFilePermissions", "parameters": "(File file, Set<PosixFilePermission> perms)", "modifiers": "", "return": "void", "signature": "void setupFilePermissions(File file, Set<PosixFilePermission> perms)", "full_signature": " void setupFilePermissions(File file, Set<PosixFilePermission> perms)", "class_method_signature": "ZMSFileChangeLogStoreCommon.setupFilePermissions(File file, Set<PosixFilePermission> perms)", "testcase": false, "constructor": false}, {"identifier": "setupDomainFile", "parameters": "(File file)", "modifiers": "", "return": "void", "signature": "void setupDomainFile(File file)", "full_signature": " void setupDomainFile(File file)", "class_method_signature": "ZMSFileChangeLogStoreCommon.setupDomainFile(File file)", "testcase": false, "constructor": false}, {"identifier": "get", "parameters": "(String name, Class<T> classType)", "modifiers": "public synchronized", "return": "T", "signature": "T get(String name, Class<T> classType)", "full_signature": "public synchronized T get(String name, Class<T> classType)", "class_method_signature": "ZMSFileChangeLogStoreCommon.get(String name, Class<T> classType)", "testcase": false, "constructor": false}, {"identifier": "put", "parameters": "(String name, byte[] data)", "modifiers": "public synchronized", "return": "void", "signature": "void put(String name, byte[] data)", "full_signature": "public synchronized void put(String name, byte[] data)", "class_method_signature": "ZMSFileChangeLogStoreCommon.put(String name, byte[] data)", "testcase": false, "constructor": false}, {"identifier": "delete", "parameters": "(String name)", "modifiers": "public synchronized", "return": "void", "signature": "void delete(String name)", "full_signature": "public synchronized void delete(String name)", "class_method_signature": "ZMSFileChangeLogStoreCommon.delete(String name)", "testcase": false, "constructor": false}, {"identifier": "getLocalDomainList", "parameters": "()", "modifiers": "public", "return": "List<String>", "signature": "List<String> getLocalDomainList()", "full_signature": "public List<String> getLocalDomainList()", "class_method_signature": "ZMSFileChangeLogStoreCommon.getLocalDomainList()", "testcase": false, "constructor": false}, {"identifier": "getServerDomainList", "parameters": "(ZMSClient zmsClient)", "modifiers": "public", "return": "Set<String>", "signature": "Set<String> getServerDomainList(ZMSClient zmsClient)", "full_signature": "public Set<String> getServerDomainList(ZMSClient zmsClient)", "class_method_signature": "ZMSFileChangeLogStoreCommon.getServerDomainList(ZMSClient zmsClient)", "testcase": false, "constructor": false}, {"identifier": "getServerDomainModifiedList", "parameters": "(ZMSClient zmsClient)", "modifiers": "public", "return": "SignedDomains", "signature": "SignedDomains getServerDomainModifiedList(ZMSClient zmsClient)", "full_signature": "public SignedDomains getServerDomainModifiedList(ZMSClient zmsClient)", "class_method_signature": "ZMSFileChangeLogStoreCommon.getServerDomainModifiedList(ZMSClient zmsClient)", "testcase": false, "constructor": false}, {"identifier": "retrieveLastModificationTime", "parameters": "()", "modifiers": "public", "return": "String", "signature": "String retrieveLastModificationTime()", "full_signature": "public String retrieveLastModificationTime()", "class_method_signature": "ZMSFileChangeLogStoreCommon.retrieveLastModificationTime()", "testcase": false, "constructor": false}, {"identifier": "setLastModificationTimestamp", "parameters": "(String newLastModTime)", "modifiers": "public", "return": "void", "signature": "void setLastModificationTimestamp(String newLastModTime)", "full_signature": "public void setLastModificationTimestamp(String newLastModTime)", "class_method_signature": "ZMSFileChangeLogStoreCommon.setLastModificationTimestamp(String newLastModTime)", "testcase": false, "constructor": false}, {"identifier": "jsonValueAsBytes", "parameters": "(Object obj, Class<?> cls)", "modifiers": "", "return": "byte[]", "signature": "byte[] jsonValueAsBytes(Object obj, Class<?> cls)", "full_signature": " byte[] jsonValueAsBytes(Object obj, Class<?> cls)", "class_method_signature": "ZMSFileChangeLogStoreCommon.jsonValueAsBytes(Object obj, Class<?> cls)", "testcase": false, "constructor": false}, {"identifier": "retrieveTagHeader", "parameters": "(Map<String, List<String>> responseHeaders)", "modifiers": "public", "return": "String", "signature": "String retrieveTagHeader(Map<String, List<String>> responseHeaders)", "full_signature": "public String retrieveTagHeader(Map<String, List<String>> responseHeaders)", "class_method_signature": "ZMSFileChangeLogStoreCommon.retrieveTagHeader(Map<String, List<String>> responseHeaders)", "testcase": false, "constructor": false}, {"identifier": "getSignedDomainList", "parameters": "(ZMSClient zmsClient, SignedDomains domainList)", "modifiers": "", "return": "List<SignedDomain>", "signature": "List<SignedDomain> getSignedDomainList(ZMSClient zmsClient, SignedDomains domainList)", "full_signature": " List<SignedDomain> getSignedDomainList(ZMSClient zmsClient, SignedDomains domainList)", "class_method_signature": "ZMSFileChangeLogStoreCommon.getSignedDomainList(ZMSClient zmsClient, SignedDomains domainList)", "testcase": false, "constructor": false}, {"identifier": "getUpdatedSignedDomains", "parameters": "(ZMSClient zmsClient, StringBuilder lastModTimeBuffer)", "modifiers": "public", "return": "SignedDomains", "signature": "SignedDomains getUpdatedSignedDomains(ZMSClient zmsClient, StringBuilder lastModTimeBuffer)", "full_signature": "public SignedDomains getUpdatedSignedDomains(ZMSClient zmsClient, StringBuilder lastModTimeBuffer)", "class_method_signature": "ZMSFileChangeLogStoreCommon.getUpdatedSignedDomains(ZMSClient zmsClient, StringBuilder lastModTimeBuffer)", "testcase": false, "constructor": false}, {"identifier": "error", "parameters": "(String msg)", "modifiers": "static", "return": "void", "signature": "void error(String msg)", "full_signature": "static void error(String msg)", "class_method_signature": "ZMSFileChangeLogStoreCommon.error(String msg)", "testcase": false, "constructor": false}], "file": "libs/java/server_common/src/main/java/com/yahoo/athenz/common/server/store/impl/ZMSFileChangeLogStoreCommon.java"}, "focal_method": {"identifier": "get", "parameters": "(String name, Class<T> classType)", "modifiers": "public synchronized", "return": "T", "body": "public synchronized <T> T get(String name, Class<T> classType) {\n\n        File file = new File(rootDir, name);\n        if (!file.exists()) {\n            return null;\n        }\n\n        try {\n            return jsonMapper.readValue(file, classType);\n        } catch (Exception ex) {\n            LOGGER.error(\"Unable to retrieve file: {} error: {}\", file.getAbsolutePath(), ex.getMessage());\n        }\n        return null;\n    }", "signature": "T get(String name, Class<T> classType)", "full_signature": "public synchronized T get(String name, Class<T> classType)", "class_method_signature": "ZMSFileChangeLogStoreCommon.get(String name, Class<T> classType)", "testcase": false, "constructor": false, "invocations": ["exists", "readValue", "error", "getAbsolutePath", "getMessage"]}, "repository": {"repo_id": 73948366, "url": "https://github.com/yahoo/athenz", "stars": 394, "created": "11/16/2016 6:23:08 PM +00:00", "updates": "2020-01-27T15:36:13+00:00", "fork": "False", "license": "licensed"}}