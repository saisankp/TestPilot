{"test_class": {"identifier": "DefaultPodAffinityFactoryTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final String DEFAULT_GPU_INSTANCE_TYPE = \"p3.2xlarge\";", "modifier": "private static final", "type": "String", "declarator": "DEFAULT_GPU_INSTANCE_TYPE = \"p3.2xlarge\"", "var_name": "DEFAULT_GPU_INSTANCE_TYPE"}, {"original_string": "private static final String SPECIFIC_GPU_INSTANCE_TYPE = \"p4.2xlarge\";", "modifier": "private static final", "type": "String", "declarator": "SPECIFIC_GPU_INSTANCE_TYPE = \"p4.2xlarge\"", "var_name": "SPECIFIC_GPU_INSTANCE_TYPE"}, {"original_string": "private final DirectKubeConfiguration configuration = Mockito.mock(DirectKubeConfiguration.class);", "modifier": "private final", "type": "DirectKubeConfiguration", "declarator": "configuration = Mockito.mock(DirectKubeConfiguration.class)", "var_name": "configuration"}, {"original_string": "private final DefaultPodAffinityFactory factory = new DefaultPodAffinityFactory(configuration, new ExplicitJobPodResourcePoolResolver());", "modifier": "private final", "type": "DefaultPodAffinityFactory", "declarator": "factory = new DefaultPodAffinityFactory(configuration, new ExplicitJobPodResourcePoolResolver())", "var_name": "factory"}], "file": "titus-server-master/src/test/java/com/netflix/titus/master/mesos/kubeapiserver/direct/DefaultPodAffinityFactoryTest.java"}, "test_case": {"identifier": "testEmptyInstanceTypeIsIgnored", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testEmptyInstanceTypeIsIgnored() {\n        Pair<V1Affinity, Map<String, String>> affinityWithAnnotations = factory.buildV1Affinity(\n                newJobWithHardConstraint(JobConstraints.MACHINE_TYPE, \"\"), JobGenerator.oneBatchTask()\n        );\n        assertThat(affinityWithAnnotations.getLeft().getNodeAffinity()).isNull();\n    }", "signature": "void testEmptyInstanceTypeIsIgnored()", "full_signature": "@Test public void testEmptyInstanceTypeIsIgnored()", "class_method_signature": "DefaultPodAffinityFactoryTest.testEmptyInstanceTypeIsIgnored()", "testcase": true, "constructor": false, "invocations": ["buildV1Affinity", "newJobWithHardConstraint", "oneBatchTask", "isNull", "assertThat", "getNodeAffinity", "getLeft"]}, "focal_class": {"identifier": "DefaultPodAffinityFactory", "superclass": "", "interfaces": "implements PodAffinityFactory", "fields": [{"original_string": "private static final int EXCLUSIVE_HOST_WEIGHT = 100;", "modifier": "private static final", "type": "int", "declarator": "EXCLUSIVE_HOST_WEIGHT = 100", "var_name": "EXCLUSIVE_HOST_WEIGHT"}, {"original_string": "private static final int UNIQUE_HOST_WEIGHT = 100;", "modifier": "private static final", "type": "int", "declarator": "UNIQUE_HOST_WEIGHT = 100", "var_name": "UNIQUE_HOST_WEIGHT"}, {"original_string": "private static final int NODE_AFFINITY_WEIGHT = 100;", "modifier": "private static final", "type": "int", "declarator": "NODE_AFFINITY_WEIGHT = 100", "var_name": "NODE_AFFINITY_WEIGHT"}, {"original_string": "private final DirectKubeConfiguration configuration;", "modifier": "private final", "type": "DirectKubeConfiguration", "declarator": "configuration", "var_name": "configuration"}, {"original_string": "private final PodResourcePoolResolver podResourcePoolResolver;", "modifier": "private final", "type": "PodResourcePoolResolver", "declarator": "podResourcePoolResolver", "var_name": "podResourcePoolResolver"}], "methods": [{"identifier": "DefaultPodAffinityFactory", "parameters": "(DirectKubeConfiguration configuration,\n                                     PodResourcePoolResolver podResourcePoolResolver)", "modifiers": "@Inject public", "return": "", "signature": " DefaultPodAffinityFactory(DirectKubeConfiguration configuration,\n                                     PodResourcePoolResolver podResourcePoolResolver)", "full_signature": "@Inject public  DefaultPodAffinityFactory(DirectKubeConfiguration configuration,\n                                     PodResourcePoolResolver podResourcePoolResolver)", "class_method_signature": "DefaultPodAffinityFactory.DefaultPodAffinityFactory(DirectKubeConfiguration configuration,\n                                     PodResourcePoolResolver podResourcePoolResolver)", "testcase": false, "constructor": true}, {"identifier": "buildV1Affinity", "parameters": "(Job<?> job, Task task)", "modifiers": "@Override public", "return": "Pair<V1Affinity, Map<String, String>>", "signature": "Pair<V1Affinity, Map<String, String>> buildV1Affinity(Job<?> job, Task task)", "full_signature": "@Override public Pair<V1Affinity, Map<String, String>> buildV1Affinity(Job<?> job, Task task)", "class_method_signature": "DefaultPodAffinityFactory.buildV1Affinity(Job<?> job, Task task)", "testcase": false, "constructor": false}], "file": "titus-server-master/src/main/java/com/netflix/titus/master/mesos/kubeapiserver/direct/DefaultPodAffinityFactory.java"}, "focal_method": {"identifier": "buildV1Affinity", "parameters": "(Job<?> job, Task task)", "modifiers": "@Override public", "return": "Pair<V1Affinity, Map<String, String>>", "body": "@Override\n    public Pair<V1Affinity, Map<String, String>> buildV1Affinity(Job<?> job, Task task) {\n        return new Processor(job).build();\n    }", "signature": "Pair<V1Affinity, Map<String, String>> buildV1Affinity(Job<?> job, Task task)", "full_signature": "@Override public Pair<V1Affinity, Map<String, String>> buildV1Affinity(Job<?> job, Task task)", "class_method_signature": "DefaultPodAffinityFactory.buildV1Affinity(Job<?> job, Task task)", "testcase": false, "constructor": false, "invocations": ["build"]}, "repository": {"repo_id": 107330274, "url": "https://github.com/Netflix/titus-control-plane", "stars": 241, "created": "10/17/2017 10:20:55 PM +00:00", "updates": "2020-01-25T13:01:05+00:00", "fork": "False", "license": "licensed"}}