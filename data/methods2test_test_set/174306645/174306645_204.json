{"test_class": {"identifier": "ReflectionProtoGeneratorTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private ProtoGenerator<Class<?>> generator = new ReflectionProtoGenerator();", "modifier": "private", "type": "ProtoGenerator<Class<?>>", "declarator": "generator = new ReflectionProtoGenerator()", "var_name": "generator"}], "file": "kogito-codegen/src/test/java/org/kie/kogito/codegen/process/persistence/proto/ReflectionProtoGeneratorTest.java"}, "test_case": {"identifier": "testAnswerWithAnnotationsProtoFile", "parameters": "()", "modifiers": "@Test", "return": "void", "body": "@Test\n    void testAnswerWithAnnotationsProtoFile() {\n\n        Proto proto = generator.generate(\"org.kie.kogito.test.persons\", Collections.singleton(AnswerWitAnnotations.class));\n        assertThat(proto).isNotNull();\n\n        assertThat(proto.getPackageName()).isEqualTo(\"org.kie.kogito.test.persons\");\n        assertThat(proto.getSyntax()).isEqualTo(\"proto2\");\n        assertThat(proto.getEnums()).hasSize(1);\n\n        ProtoEnum answer = proto.getEnums().get(0);\n        assertThat(answer).isNotNull();\n        assertThat(answer.getName()).isEqualTo(\"AnswerWitAnnotations\");\n        assertThat(answer.getJavaPackageOption()).isEqualTo(\"org.kie.kogito.codegen.data\");\n        assertThat(answer.getFields()).hasSize(3);\n\n        Map<String, Integer> fields = answer.getFields();\n        assertThat(fields).isNotNull()\n                .containsEntry(\"YES\", 1)\n                .containsEntry(\"MAYBE\", 2)\n                .containsEntry(\"NO\", 3);\n    }", "signature": "void testAnswerWithAnnotationsProtoFile()", "full_signature": "@Test void testAnswerWithAnnotationsProtoFile()", "class_method_signature": "ReflectionProtoGeneratorTest.testAnswerWithAnnotationsProtoFile()", "testcase": true, "constructor": false, "invocations": ["generate", "singleton", "isNotNull", "assertThat", "isEqualTo", "assertThat", "getPackageName", "isEqualTo", "assertThat", "getSyntax", "hasSize", "assertThat", "getEnums", "get", "getEnums", "isNotNull", "assertThat", "isEqualTo", "assertThat", "getName", "isEqualTo", "assertThat", "getJavaPackageOption", "hasSize", "assertThat", "getFields", "getFields", "containsEntry", "containsEntry", "containsEntry", "isNotNull", "assertThat"]}, "focal_class": {"identifier": "ReflectionProtoGenerator", "superclass": "extends AbstractProtoGenerator<Class<?>>", "interfaces": "", "fields": [], "methods": [{"identifier": "generate", "parameters": "(String packageName, Collection<Class<?>> dataModel, String... headers)", "modifiers": "public", "return": "Proto", "signature": "Proto generate(String packageName, Collection<Class<?>> dataModel, String... headers)", "full_signature": "public Proto generate(String packageName, Collection<Class<?>> dataModel, String... headers)", "class_method_signature": "ReflectionProtoGenerator.generate(String packageName, Collection<Class<?>> dataModel, String... headers)", "testcase": false, "constructor": false}, {"identifier": "generate", "parameters": "(String messageComment, String fieldComment, String packageName, Class<?> dataModel, String... headers)", "modifiers": "@Override public", "return": "Proto", "signature": "Proto generate(String messageComment, String fieldComment, String packageName, Class<?> dataModel, String... headers)", "full_signature": "@Override public Proto generate(String messageComment, String fieldComment, String packageName, Class<?> dataModel, String... headers)", "class_method_signature": "ReflectionProtoGenerator.generate(String messageComment, String fieldComment, String packageName, Class<?> dataModel, String... headers)", "testcase": false, "constructor": false}, {"identifier": "extractDataClasses", "parameters": "(Collection<Class<?>> input, String targetDirectory)", "modifiers": "public", "return": "Collection<Class<?>>", "signature": "Collection<Class<?>> extractDataClasses(Collection<Class<?>> input, String targetDirectory)", "full_signature": "public Collection<Class<?>> extractDataClasses(Collection<Class<?>> input, String targetDirectory)", "class_method_signature": "ReflectionProtoGenerator.extractDataClasses(Collection<Class<?>> input, String targetDirectory)", "testcase": false, "constructor": false}, {"identifier": "messageFromClass", "parameters": "(Proto proto, Class<?> clazz, String packageName, String messageComment, String fieldComment)", "modifiers": "protected", "return": "ProtoMessage", "signature": "ProtoMessage messageFromClass(Proto proto, Class<?> clazz, String packageName, String messageComment, String fieldComment)", "full_signature": "protected ProtoMessage messageFromClass(Proto proto, Class<?> clazz, String packageName, String messageComment, String fieldComment)", "class_method_signature": "ReflectionProtoGenerator.messageFromClass(Proto proto, Class<?> clazz, String packageName, String messageComment, String fieldComment)", "testcase": false, "constructor": false}, {"identifier": "enumFromClass", "parameters": "(Proto proto, Class<?> clazz, String packageName)", "modifiers": "protected", "return": "ProtoEnum", "signature": "ProtoEnum enumFromClass(Proto proto, Class<?> clazz, String packageName)", "full_signature": "protected ProtoEnum enumFromClass(Proto proto, Class<?> clazz, String packageName)", "class_method_signature": "ReflectionProtoGenerator.enumFromClass(Proto proto, Class<?> clazz, String packageName)", "testcase": false, "constructor": false}, {"identifier": "addEnumField", "parameters": "(Field field, ProtoEnum pEnum)", "modifiers": "private", "return": "void", "signature": "void addEnumField(Field field, ProtoEnum pEnum)", "full_signature": "private void addEnumField(Field field, ProtoEnum pEnum)", "class_method_signature": "ReflectionProtoGenerator.addEnumField(Field field, ProtoEnum pEnum)", "testcase": false, "constructor": false}, {"identifier": "generateModelClassProto", "parameters": "(Class<?> modelClazz, String targetDirectory)", "modifiers": "protected", "return": "void", "signature": "void generateModelClassProto(Class<?> modelClazz, String targetDirectory)", "full_signature": "protected void generateModelClassProto(Class<?> modelClazz, String targetDirectory)", "class_method_signature": "ReflectionProtoGenerator.generateModelClassProto(Class<?> modelClazz, String targetDirectory)", "testcase": false, "constructor": false}], "file": "kogito-codegen/src/main/java/org/kie/kogito/codegen/process/persistence/proto/ReflectionProtoGenerator.java"}, "focal_method": {"identifier": "generate", "parameters": "(String packageName, Collection<Class<?>> dataModel, String... headers)", "modifiers": "public", "return": "Proto", "body": "public Proto generate(String packageName, Collection<Class<?>> dataModel, String... headers) {\n        try {\n            Proto proto = new Proto(packageName, headers);\n            for (Class<?> clazz : dataModel) {\n                if (clazz.isEnum()) {\n                    enumFromClass(proto, clazz, null);\n                } else {\n                    messageFromClass(proto, clazz, null, null, null);\n                }\n            }\n            return proto;\n        } catch (Exception e) {\n            throw new RuntimeException(\"Error while generating proto for data model\", e);\n        }\n    }", "signature": "Proto generate(String packageName, Collection<Class<?>> dataModel, String... headers)", "full_signature": "public Proto generate(String packageName, Collection<Class<?>> dataModel, String... headers)", "class_method_signature": "ReflectionProtoGenerator.generate(String packageName, Collection<Class<?>> dataModel, String... headers)", "testcase": false, "constructor": false, "invocations": ["isEnum", "enumFromClass", "messageFromClass"]}, "repository": {"repo_id": 174306645, "url": "https://github.com/kiegroup/kogito-runtimes", "stars": 78, "created": "3/7/2019 8:49:09 AM +00:00", "updates": "2020-01-26T20:41:49+00:00", "fork": "False", "license": "licensed"}}