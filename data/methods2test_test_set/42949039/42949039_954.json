{"test_class": {"identifier": "RetentionExpirationExporterAppTest", "superclass": "extends AbstractExporterTest", "interfaces": "", "fields": [{"original_string": "@Rule\n    public EnvironmentVariables environmentVariables = new EnvironmentVariables();", "modifier": "@Rule\n    public", "type": "EnvironmentVariables", "declarator": "environmentVariables = new EnvironmentVariables()", "var_name": "environmentVariables"}, {"original_string": "private RetentionExpirationExporterApp retentionExpirationExporterApp = new RetentionExpirationExporterApp()\n    {\n        protected ApplicationContext createApplicationContext()\n        {\n            return applicationContext;\n        }\n    };", "modifier": "private", "type": "RetentionExpirationExporterApp", "declarator": "retentionExpirationExporterApp = new RetentionExpirationExporterApp()\n    {\n        protected ApplicationContext createApplicationContext()\n        {\n            return applicationContext;\n        }\n    }", "var_name": "retentionExpirationExporterApp"}], "file": "herd-code/herd-tools/herd-retention-expiration-exporter/src/test/java/org/finra/herd/tools/retention/exporter/RetentionExpirationExporterAppTest.java"}, "test_case": {"identifier": "testParseCommandLineArgumentsSslTrueEnvPassword", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testParseCommandLineArgumentsSslTrueEnvPassword()\n    {\n        environmentVariables.set(\"HERD_PASSWORD\", WEB_SERVICE_HTTPS_PASSWORD);\n        String[] arguments =\n            {\"--namespace\", NAMESPACE, \"--businessObjectDefinitionName\", BUSINESS_OBJECT_DEFINITION_NAME, \"--localOutputFile\", LOCAL_OUTPUT_FILE,\n                \"--regServerHost\", WEB_SERVICE_HOSTNAME, \"--regServerPort\", WEB_SERVICE_HTTPS_PORT.toString(), \"--udcServerHost\", UDC_SERVICE_HOSTNAME, \"--ssl\",\n                \"true\", \"--username\", WEB_SERVICE_HTTPS_USERNAME, \"-E\", \"true\", \"--trustSelfSignedCertificate\", \"true\", \"--disableHostnameVerification\",\n                \"true\"};\n        assertNull(retentionExpirationExporterApp.parseCommandLineArguments(arguments, applicationContext));\n\n        environmentVariables.clear(\"HERD_PASSWORD\");\n    }", "signature": "void testParseCommandLineArgumentsSslTrueEnvPassword()", "full_signature": "@Test public void testParseCommandLineArgumentsSslTrueEnvPassword()", "class_method_signature": "RetentionExpirationExporterAppTest.testParseCommandLineArgumentsSslTrueEnvPassword()", "testcase": true, "constructor": false, "invocations": ["set", "toString", "assertNull", "parseCommandLineArguments", "clear"]}, "focal_class": {"identifier": "RetentionExpirationExporterApp", "superclass": "", "interfaces": "", "fields": [{"original_string": "static final String APPLICATION_NAME = \"herd-retention-expiration-exporter-app\";", "modifier": "static final", "type": "String", "declarator": "APPLICATION_NAME = \"herd-retention-expiration-exporter-app\"", "var_name": "APPLICATION_NAME"}, {"original_string": "private static final Logger LOGGER = LoggerFactory.getLogger(RetentionExpirationExporterApp.class);", "modifier": "private static final", "type": "Logger", "declarator": "LOGGER = LoggerFactory.getLogger(RetentionExpirationExporterApp.class)", "var_name": "LOGGER"}, {"original_string": "private ArgumentParser argParser;", "modifier": "private", "type": "ArgumentParser", "declarator": "argParser", "var_name": "argParser"}, {"original_string": "private Option businessObjectDefinitionNameOpt;", "modifier": "private", "type": "Option", "declarator": "businessObjectDefinitionNameOpt", "var_name": "businessObjectDefinitionNameOpt"}, {"original_string": "private Boolean disableHostnameVerification;", "modifier": "private", "type": "Boolean", "declarator": "disableHostnameVerification", "var_name": "disableHostnameVerification"}, {"original_string": "private Option disableHostnameVerificationOpt;", "modifier": "private", "type": "Option", "declarator": "disableHostnameVerificationOpt", "var_name": "disableHostnameVerificationOpt"}, {"original_string": "private Option localOutputFileOpt;", "modifier": "private", "type": "Option", "declarator": "localOutputFileOpt", "var_name": "localOutputFileOpt"}, {"original_string": "private Option namespaceOpt;", "modifier": "private", "type": "Option", "declarator": "namespaceOpt", "var_name": "namespaceOpt"}, {"original_string": "private Option passwordOpt;", "modifier": "private", "type": "Option", "declarator": "passwordOpt", "var_name": "passwordOpt"}, {"original_string": "private Option enableEnvVariablesOpt;", "modifier": "private", "type": "Option", "declarator": "enableEnvVariablesOpt", "var_name": "enableEnvVariablesOpt"}, {"original_string": "private Option regServerHostOpt;", "modifier": "private", "type": "Option", "declarator": "regServerHostOpt", "var_name": "regServerHostOpt"}, {"original_string": "private Integer regServerPort;", "modifier": "private", "type": "Integer", "declarator": "regServerPort", "var_name": "regServerPort"}, {"original_string": "private Boolean trustSelfSignedCertificate;", "modifier": "private", "type": "Boolean", "declarator": "trustSelfSignedCertificate", "var_name": "trustSelfSignedCertificate"}, {"original_string": "private Option trustSelfSignedCertificateOpt;", "modifier": "private", "type": "Option", "declarator": "trustSelfSignedCertificateOpt", "var_name": "trustSelfSignedCertificateOpt"}, {"original_string": "private Option udcServerHostOpt;", "modifier": "private", "type": "Option", "declarator": "udcServerHostOpt", "var_name": "udcServerHostOpt"}, {"original_string": "private Boolean useSsl;", "modifier": "private", "type": "Boolean", "declarator": "useSsl", "var_name": "useSsl"}, {"original_string": "private Option usernameOpt;", "modifier": "private", "type": "Option", "declarator": "usernameOpt", "var_name": "usernameOpt"}], "methods": [{"identifier": "RetentionExpirationExporterApp", "parameters": "()", "modifiers": "", "return": "", "signature": " RetentionExpirationExporterApp()", "full_signature": "  RetentionExpirationExporterApp()", "class_method_signature": "RetentionExpirationExporterApp.RetentionExpirationExporterApp()", "testcase": false, "constructor": true}, {"identifier": "main", "parameters": "(String[] args)", "modifiers": "@SuppressWarnings(\"PMD.DoNotCallSystemExit\") // Using System.exit is allowed for an actual application to exit. public static", "return": "void", "signature": "void main(String[] args)", "full_signature": "@SuppressWarnings(\"PMD.DoNotCallSystemExit\") // Using System.exit is allowed for an actual application to exit. public static void main(String[] args)", "class_method_signature": "RetentionExpirationExporterApp.main(String[] args)", "testcase": false, "constructor": false}, {"identifier": "go", "parameters": "(String[] args)", "modifiers": "", "return": "ToolsCommonConstants.ReturnValue", "signature": "ToolsCommonConstants.ReturnValue go(String[] args)", "full_signature": " ToolsCommonConstants.ReturnValue go(String[] args)", "class_method_signature": "RetentionExpirationExporterApp.go(String[] args)", "testcase": false, "constructor": false}, {"identifier": "parseCommandLineArguments", "parameters": "(String[] args, ApplicationContext applicationContext)", "modifiers": "@SuppressWarnings(\"PMD.SystemPrintln\") @SuppressFBWarnings(value = \"VA_FORMAT_STRING_USES_NEWLINE\", justification = \"We will use the standard carriage return character.\")", "return": "ToolsCommonConstants.ReturnValue", "signature": "ToolsCommonConstants.ReturnValue parseCommandLineArguments(String[] args, ApplicationContext applicationContext)", "full_signature": "@SuppressWarnings(\"PMD.SystemPrintln\") @SuppressFBWarnings(value = \"VA_FORMAT_STRING_USES_NEWLINE\", justification = \"We will use the standard carriage return character.\") ToolsCommonConstants.ReturnValue parseCommandLineArguments(String[] args, ApplicationContext applicationContext)", "class_method_signature": "RetentionExpirationExporterApp.parseCommandLineArguments(String[] args, ApplicationContext applicationContext)", "testcase": false, "constructor": false}, {"identifier": "createApplicationContext", "parameters": "()", "modifiers": "private", "return": "ApplicationContext", "signature": "ApplicationContext createApplicationContext()", "full_signature": "private ApplicationContext createApplicationContext()", "class_method_signature": "RetentionExpirationExporterApp.createApplicationContext()", "testcase": false, "constructor": false}], "file": "herd-code/herd-tools/herd-retention-expiration-exporter/src/main/java/org/finra/herd/tools/retention/exporter/RetentionExpirationExporterApp.java"}, "focal_method": {"identifier": "parseCommandLineArguments", "parameters": "(String[] args, ApplicationContext applicationContext)", "modifiers": "@SuppressWarnings(\"PMD.SystemPrintln\") @SuppressFBWarnings(value = \"VA_FORMAT_STRING_USES_NEWLINE\", justification = \"We will use the standard carriage return character.\")", "return": "ToolsCommonConstants.ReturnValue", "body": "@SuppressWarnings(\"PMD.SystemPrintln\")\n    @SuppressFBWarnings(value = \"VA_FORMAT_STRING_USES_NEWLINE\", justification = \"We will use the standard carriage return character.\")\n    ToolsCommonConstants.ReturnValue parseCommandLineArguments(String[] args, ApplicationContext applicationContext)\n    {\n        try\n        {\n            namespaceOpt = argParser.addArgument(\"n\", \"namespace\", true, \"Namespace.\", true);\n            businessObjectDefinitionNameOpt = argParser.addArgument(\"b\", \"businessObjectDefinitionName\", true, \"Business object definition.\", true);\n            localOutputFileOpt = argParser.addArgument(\"o\", \"localOutputFile\", true, \"The path to files on your local file system.\", true);\n            regServerHostOpt = argParser.addArgument(\"H\", \"regServerHost\", true, \"Registration Service hostname.\", true);\n            Option regServerPortOpt = argParser.addArgument(\"P\", \"regServerPort\", true, \"Registration Service port.\", true);\n            udcServerHostOpt = argParser.addArgument(\"c\", \"udcServerHost\", true, \"UDC application server hostname.\", true);\n            Option sslOpt = argParser.addArgument(\"s\", \"ssl\", true, \"Enable or disable SSL (HTTPS).\", false);\n            usernameOpt = argParser.addArgument(\"u\", \"username\", true, \"The username for HTTPS client authentication.\", false);\n            passwordOpt = argParser.addArgument(\"w\", \"password\", true, \"The password used for HTTPS client authentication.\", false);\n            enableEnvVariablesOpt = argParser\n                .addArgument(\"E\", \"enableEnvVariables\", true, \"The enableEnvVariables used for HTTPS client authentication through environment provided var.\",\n                    false);\n            trustSelfSignedCertificateOpt =\n                argParser.addArgument(\"C\", \"trustSelfSignedCertificate\", true, \"If set to true, makes HTTPS client trust self-signed certificate.\", false);\n            disableHostnameVerificationOpt =\n                argParser.addArgument(\"d\", \"disableHostnameVerification\", true, \"If set to true, turns off hostname verification.\", false);\n            Option helpOpt = argParser.addArgument(\"h\", \"help\", false, \"Display usage information and exit.\", false);\n            Option versionOpt = argParser.addArgument(\"v\", \"version\", false, \"Display version information and exit.\", false);\n\n            // Parse command line arguments without failing on any missing required arguments by passing \"false\" as the second argument.\n            argParser.parseArguments(args, false);\n\n            // If help option was specified, then display usage information and return success.\n            if (argParser.getBooleanValue(helpOpt))\n            {\n                System.out.println(argParser.getUsageInformation());\n                return ToolsCommonConstants.ReturnValue.SUCCESS;\n            }\n\n            // If version option was specified, then display version information and return success.\n            if (argParser.getBooleanValue(versionOpt))\n            {\n                BuildInformation buildInformation = applicationContext.getBean(BuildInformation.class);\n                System.out.println(String\n                    .format(ToolsCommonConstants.BUILD_INFO_STRING_FORMAT, buildInformation.getBuildDate(), buildInformation.getBuildNumber(),\n                        buildInformation.getBuildOs(), buildInformation.getBuildUser()));\n                return ToolsCommonConstants.ReturnValue.SUCCESS;\n            }\n\n            // Parse command line arguments for the second time, enforcing the required arguments by passing \"true\" as the second argument.\n            argParser.parseArguments(args, true);\n\n            // Extract boolean option values passing \"false\" as a default value.\n            useSsl = argParser.getStringValueAsBoolean(sslOpt, false);\n            trustSelfSignedCertificate = argParser.getStringValueAsBoolean(trustSelfSignedCertificateOpt, false);\n            disableHostnameVerification = argParser.getStringValueAsBoolean(disableHostnameVerificationOpt, false);\n\n            if (useSsl)\n            {\n                // Username is required when useSsl is enabled.\n                if (StringUtils.isBlank(argParser.getStringValue(usernameOpt)))\n                {\n                    throw new ParseException(\"Username is required when SSL is enabled.\");\n                }\n                // Password or enableEnvVariables with corresponding env var is required when useSsl is enabled.\n                ToolsArgumentHelper.validateCliEnvArgument(argParser, passwordOpt, enableEnvVariablesOpt);\n            }\n\n            // Extract all Integer option values here to catch any NumberFormatException exceptions.\n            regServerPort = argParser.getIntegerValue(regServerPortOpt);\n        }\n        catch (ParseException ex)\n        {\n            // Log a friendly error and return a failure which will cause the application to exit.\n            LOGGER.error(\"Error parsing command line arguments: \" + ex.getMessage() + \"\\n\" + argParser.getUsageInformation());\n            return ToolsCommonConstants.ReturnValue.FAILURE;\n        }\n\n        // The command line arguments were all parsed successfully so return null to continue processing.\n        return null;\n    }", "signature": "ToolsCommonConstants.ReturnValue parseCommandLineArguments(String[] args, ApplicationContext applicationContext)", "full_signature": "@SuppressWarnings(\"PMD.SystemPrintln\") @SuppressFBWarnings(value = \"VA_FORMAT_STRING_USES_NEWLINE\", justification = \"We will use the standard carriage return character.\") ToolsCommonConstants.ReturnValue parseCommandLineArguments(String[] args, ApplicationContext applicationContext)", "class_method_signature": "RetentionExpirationExporterApp.parseCommandLineArguments(String[] args, ApplicationContext applicationContext)", "testcase": false, "constructor": false, "invocations": ["addArgument", "addArgument", "addArgument", "addArgument", "addArgument", "addArgument", "addArgument", "addArgument", "addArgument", "addArgument", "addArgument", "addArgument", "addArgument", "addArgument", "parseArguments", "getBooleanValue", "println", "getUsageInformation", "getBooleanValue", "getBean", "println", "format", "getBuildDate", "getBuildNumber", "getBuildOs", "getBuildUser", "parseArguments", "getStringValueAsBoolean", "getStringValueAsBoolean", "getStringValueAsBoolean", "isBlank", "getStringValue", "validateCliEnvArgument", "getIntegerValue", "error", "getMessage", "getUsageInformation"]}, "repository": {"repo_id": 42949039, "url": "https://github.com/FINRAOS/herd", "language": "Java", "is_fork": false, "fork_count": 36, "stargazer_count": 120, "size": 205797, "license": "licensed"}}