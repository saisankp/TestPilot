{"test_class": {"identifier": "VelocityMailTemplateServiceTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "@Mock\n    private VelocityEngine velocityEngineMock;", "modifier": "@Mock\n    private", "type": "VelocityEngine", "declarator": "velocityEngineMock", "var_name": "velocityEngineMock"}, {"original_string": "@Mock\n    private Template velocityTemplateMock;", "modifier": "@Mock\n    private", "type": "Template", "declarator": "velocityTemplateMock", "var_name": "velocityTemplateMock"}, {"original_string": "private VelocityMailTemplateService velocityMailTemplateService;", "modifier": "private", "type": "VelocityMailTemplateService", "declarator": "velocityMailTemplateService", "var_name": "velocityMailTemplateService"}], "file": "backend/project-board/src/test/java/de/adesso/projectboard/adapter/mail/VelocityMailTemplateServiceTest.java"}, "test_case": {"identifier": "mergeContextMergesExpectedTemplateAndContext", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void mergeContextMergesExpectedTemplateAndContext() {\n        // given\n        var templatePath = \"TestTemplate.vm\";\n        var contextMap = Map.<String, Object>of(\"key1\", \"value1\", \"key2\", 2L);\n        var expectedResult = \"Nice context merge!\";\n\n        given(velocityEngineMock.getTemplate(templatePath)).willReturn(velocityTemplateMock);\n        doAnswer(invocation -> {\n            var actualWriter = (StringWriter) invocation.getArgument(1);\n            actualWriter.append(expectedResult);\n\n            return null;\n        }).when(velocityTemplateMock).merge(\n                argThat(new VelocityContextArgumentMatcher(contextMap)),\n                argThat(new StringWriterArgumentMatcher(\"\"))\n        );\n\n        // when\n        var actualResult = velocityMailTemplateService.mergeTemplate(templatePath, contextMap);\n\n        // then\n        assertThat(actualResult).isEqualTo(expectedResult);\n    }", "signature": "void mergeContextMergesExpectedTemplateAndContext()", "full_signature": "@Test public void mergeContextMergesExpectedTemplateAndContext()", "class_method_signature": "VelocityMailTemplateServiceTest.mergeContextMergesExpectedTemplateAndContext()", "testcase": true, "constructor": false, "invocations": ["of", "willReturn", "given", "getTemplate", "merge", "when", "doAnswer", "getArgument", "append", "argThat", "argThat", "mergeTemplate", "isEqualTo", "assertThat"]}, "focal_class": {"identifier": "VelocityMailTemplateService", "superclass": "", "interfaces": "", "fields": [{"original_string": "static final String SUBJECT_DELIMITER = \"--!--SUBJECT--!--\";", "modifier": "static final", "type": "String", "declarator": "SUBJECT_DELIMITER = \"--!--SUBJECT--!--\"", "var_name": "SUBJECT_DELIMITER"}, {"original_string": "static final String TEXT_DELIMITER = \"--!--TEXT--!--\";", "modifier": "static final", "type": "String", "declarator": "TEXT_DELIMITER = \"--!--TEXT--!--\"", "var_name": "TEXT_DELIMITER"}, {"original_string": "private final VelocityEngine velocityEngine;", "modifier": "private final", "type": "VelocityEngine", "declarator": "velocityEngine", "var_name": "velocityEngine"}], "methods": [{"identifier": "VelocityMailTemplateService", "parameters": "(VelocityEngine velocityEngine)", "modifiers": "public", "return": "", "signature": " VelocityMailTemplateService(VelocityEngine velocityEngine)", "full_signature": "public  VelocityMailTemplateService(VelocityEngine velocityEngine)", "class_method_signature": "VelocityMailTemplateService.VelocityMailTemplateService(VelocityEngine velocityEngine)", "testcase": false, "constructor": true}, {"identifier": "mergeTemplate", "parameters": "(@NotNull String templatePath, Map<String, Object> contextMap)", "modifiers": "public", "return": "String", "signature": "String mergeTemplate(@NotNull String templatePath, Map<String, Object> contextMap)", "full_signature": "public String mergeTemplate(@NotNull String templatePath, Map<String, Object> contextMap)", "class_method_signature": "VelocityMailTemplateService.mergeTemplate(@NotNull String templatePath, Map<String, Object> contextMap)", "testcase": false, "constructor": false}, {"identifier": "getSubjectAndText", "parameters": "(@NotNull String templatePath, Map<String, Object> contextMap)", "modifiers": "public", "return": "Pair<String, String>", "signature": "Pair<String, String> getSubjectAndText(@NotNull String templatePath, Map<String, Object> contextMap)", "full_signature": "public Pair<String, String> getSubjectAndText(@NotNull String templatePath, Map<String, Object> contextMap)", "class_method_signature": "VelocityMailTemplateService.getSubjectAndText(@NotNull String templatePath, Map<String, Object> contextMap)", "testcase": false, "constructor": false}, {"identifier": "getSubStringBetweenDelimiters", "parameters": "(String origin, String firstDelimiter, String secondDelimiter)", "modifiers": "", "return": "String", "signature": "String getSubStringBetweenDelimiters(String origin, String firstDelimiter, String secondDelimiter)", "full_signature": " String getSubStringBetweenDelimiters(String origin, String firstDelimiter, String secondDelimiter)", "class_method_signature": "VelocityMailTemplateService.getSubStringBetweenDelimiters(String origin, String firstDelimiter, String secondDelimiter)", "testcase": false, "constructor": false}], "file": "backend/project-board/src/main/java/de/adesso/projectboard/adapter/mail/VelocityMailTemplateService.java"}, "focal_method": {"identifier": "mergeTemplate", "parameters": "(@NotNull String templatePath, Map<String, Object> contextMap)", "modifiers": "public", "return": "String", "body": "public String mergeTemplate(@NotNull String templatePath, Map<String, Object> contextMap) {\n        var velocityTemplate = velocityEngine.getTemplate(templatePath);\n        var velocityContext = new VelocityContext(new HashMap<>(contextMap));\n        var writer = new StringWriter();\n        velocityTemplate.merge(velocityContext, writer);\n\n        return writer.toString();\n    }", "signature": "String mergeTemplate(@NotNull String templatePath, Map<String, Object> contextMap)", "full_signature": "public String mergeTemplate(@NotNull String templatePath, Map<String, Object> contextMap)", "class_method_signature": "VelocityMailTemplateService.mergeTemplate(@NotNull String templatePath, Map<String, Object> contextMap)", "testcase": false, "constructor": false, "invocations": ["getTemplate", "merge", "toString"]}, "repository": {"repo_id": 144251992, "url": "https://github.com/adessoAG/project-board", "language": "Java", "is_fork": false, "fork_count": 1, "stargazer_count": 8, "size": 2608, "license": "licensed"}}