{"test_class": {"identifier": "PublishDelegateTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "protected PublishDelegate publishDelegateTestObject;", "modifier": "protected", "type": "PublishDelegate", "declarator": "publishDelegateTestObject", "var_name": "publishDelegateTestObject"}, {"original_string": "private Long contextId = 1L;", "modifier": "private", "type": "Long", "declarator": "contextId = 1L", "var_name": "contextId"}, {"original_string": "private ContextType contextType = ContextType.COURSE;", "modifier": "private", "type": "ContextType", "declarator": "contextType = ContextType.COURSE", "var_name": "contextType"}, {"original_string": "private String sourceType = ForumNotificationTypeHandler.FORUM_SOURCE_TYPE;", "modifier": "private", "type": "String", "declarator": "sourceType = ForumNotificationTypeHandler.FORUM_SOURCE_TYPE", "var_name": "sourceType"}, {"original_string": "private String contextTitle = \"ContextTestTitle\";", "modifier": "private", "type": "String", "declarator": "contextTitle = \"ContextTestTitle\"", "var_name": "contextTitle"}, {"original_string": "private Long subcontextId = 2L;", "modifier": "private", "type": "Long", "declarator": "subcontextId = 2L", "var_name": "subcontextId"}, {"original_string": "private Long sourceId = 3L;", "modifier": "private", "type": "Long", "declarator": "sourceId = 3L", "var_name": "sourceId"}, {"original_string": "private String sourceTitle = \"SourceTitle\";", "modifier": "private", "type": "String", "declarator": "sourceTitle = \"SourceTitle\"", "var_name": "sourceTitle"}, {"original_string": "private String sourceEntryTitle = \"SourceEntryTitle\";", "modifier": "private", "type": "String", "declarator": "sourceEntryTitle = \"SourceEntryTitle\"", "var_name": "sourceEntryTitle"}, {"original_string": "private Long sourceEntryId = 4L;", "modifier": "private", "type": "Long", "declarator": "sourceEntryId = 4L", "var_name": "sourceEntryId"}, {"original_string": "private Identity creatorIdentity;", "modifier": "private", "type": "Identity", "declarator": "creatorIdentity", "var_name": "creatorIdentity"}], "file": "OLAT-LMS/src/test/java/org/olat/lms/core/notification/impl/PublishDelegateTest.java"}, "test_case": {"identifier": "publishEvent_noPublisherExists", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void publishEvent_noPublisherExists() {\n        when(publishDelegateTestObject.publisherDao.findPublisher(contextId, contextType, sourceId, sourceType)).thenReturn(null);\n        PublishEventTO invalidPublishEventTO = PublishEventTO.getValidInstance(ContextType.COURSE, contextId, contextTitle, subcontextId,\n                ForumNotificationTypeHandler.FORUM_SOURCE_TYPE, sourceId, sourceTitle, sourceEntryTitle, creatorIdentity, EventType.NEW);\n        invalidPublishEventTO.setSourceEntryId(\"4\");\n        assertEquals(\"\", 0, publishDelegateTestObject.publishEvent(invalidPublishEventTO));\n    }", "signature": "void publishEvent_noPublisherExists()", "full_signature": "@Test public void publishEvent_noPublisherExists()", "class_method_signature": "PublishDelegateTest.publishEvent_noPublisherExists()", "testcase": true, "constructor": false, "invocations": ["thenReturn", "when", "findPublisher", "getValidInstance", "setSourceEntryId", "assertEquals", "publishEvent"]}, "focal_class": {"identifier": "PublishDelegate", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final Logger log = LoggerHelper.getLogger();", "modifier": "private static final", "type": "Logger", "declarator": "log = LoggerHelper.getLogger()", "var_name": "log"}, {"original_string": "@Autowired\n    PublisherDao publisherDao;", "modifier": "@Autowired", "type": "PublisherDao", "declarator": "publisherDao", "var_name": "publisherDao"}, {"original_string": "@Autowired\n    NotificationEventDao notificationEventDao;", "modifier": "@Autowired", "type": "NotificationEventDao", "declarator": "notificationEventDao", "var_name": "notificationEventDao"}], "methods": [{"identifier": "publishEvent", "parameters": "(PublishEventTO publishEventTO)", "modifiers": "public", "return": "int", "signature": "int publishEvent(PublishEventTO publishEventTO)", "full_signature": "public int publishEvent(PublishEventTO publishEventTO)", "class_method_signature": "PublishDelegate.publishEvent(PublishEventTO publishEventTO)", "testcase": false, "constructor": false}, {"identifier": "getPublisher", "parameters": "(PublishEventTO publishEventTO)", "modifiers": "", "return": "Publisher", "signature": "Publisher getPublisher(PublishEventTO publishEventTO)", "full_signature": " Publisher getPublisher(PublishEventTO publishEventTO)", "class_method_signature": "PublishDelegate.getPublisher(PublishEventTO publishEventTO)", "testcase": false, "constructor": false}, {"identifier": "publisherExists", "parameters": "(PublishEventTO publishEventTO)", "modifiers": "", "return": "boolean", "signature": "boolean publisherExists(PublishEventTO publishEventTO)", "full_signature": " boolean publisherExists(PublishEventTO publishEventTO)", "class_method_signature": "PublishDelegate.publisherExists(PublishEventTO publishEventTO)", "testcase": false, "constructor": false}, {"identifier": "createAttributesFrom", "parameters": "(PublishEventTO publishEventTO)", "modifiers": "", "return": "Map<String, String>", "signature": "Map<String, String> createAttributesFrom(PublishEventTO publishEventTO)", "full_signature": " Map<String, String> createAttributesFrom(PublishEventTO publishEventTO)", "class_method_signature": "PublishDelegate.createAttributesFrom(PublishEventTO publishEventTO)", "testcase": false, "constructor": false}], "file": "OLAT-LMS/src/main/java/org/olat/lms/core/notification/impl/PublishDelegate.java"}, "focal_method": {"identifier": "publishEvent", "parameters": "(PublishEventTO publishEventTO)", "modifiers": "public", "return": "int", "body": "public int publishEvent(PublishEventTO publishEventTO) {\n        Publisher publisher = getPublisher(publishEventTO);\n        if (publisher == null) {\n            // if there are no subscriptions, no publisher was created, that is OK\n            log.info(\"found no publisher for context-type=\" + publishEventTO.getContextType() + \" context-id=\" + publishEventTO.getContextId() + \" source-type=\"\n                    + publishEventTO.getSourceType() + \" source-id=\" + publishEventTO.getSourceId());\n        } else {\n            log.debug(\"publishEvent: create NotificationEvents for ContextTitle=\" + publishEventTO.getContextTitle() + \" SourceTitle=\" + publishEventTO.getSourceTitle());\n            List<NotificationEvent> notificationEvents = notificationEventDao.createAndSaveNotificationEvents(publisher, createAttributesFrom(publishEventTO));\n            return notificationEvents.size();\n        }\n        return 0;\n    }", "signature": "int publishEvent(PublishEventTO publishEventTO)", "full_signature": "public int publishEvent(PublishEventTO publishEventTO)", "class_method_signature": "PublishDelegate.publishEvent(PublishEventTO publishEventTO)", "testcase": false, "constructor": false, "invocations": ["getPublisher", "info", "getContextType", "getContextId", "getSourceType", "getSourceId", "debug", "getContextTitle", "getSourceTitle", "createAndSaveNotificationEvents", "createAttributesFrom", "size"]}, "repository": {"repo_id": 22589840, "url": "https://github.com/huihoo/olat", "language": "Java", "is_fork": false, "fork_count": 11, "stargazer_count": 10, "size": 69738, "license": "licensed"}}