{"test_class": {"identifier": "CrossValidationTest", "superclass": "", "interfaces": "", "fields": [], "file": "modules/ml/src/test/java/org/apache/ignite/ml/selection/cv/CrossValidationTest.java"}, "test_case": {"identifier": "testBasicFunctionality", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testBasicFunctionality() {\n        Map<Integer, double[]> data = new HashMap<>();\n\n        for (int i = 0; i < twoLinearlySeparableClasses.length; i++)\n            data.put(i, twoLinearlySeparableClasses[i]);\n\n        LogisticRegressionSGDTrainer trainer = new LogisticRegressionSGDTrainer()\n            .withUpdatesStgy(new UpdatesStrategy<>(new SimpleGDUpdateCalculator(0.2),\n                SimpleGDParameterUpdate.SUM_LOCAL, SimpleGDParameterUpdate.AVG))\n            .withMaxIterations(100000)\n            .withLocIterations(100)\n            .withBatchSize(14)\n            .withSeed(123L);\n\n        Vectorizer<Integer, double[], Integer, Double> vectorizer = new DoubleArrayVectorizer<Integer>().labeled(Vectorizer.LabelCoordinate.FIRST);\n\n        DebugCrossValidation<LogisticRegressionModel, Double, Integer, double[]> scoreCalculator =\n            new DebugCrossValidation<>();\n\n        int folds = 4;\n\n        BinaryClassificationMetrics metrics = (BinaryClassificationMetrics) new BinaryClassificationMetrics()\n            .withMetric(BinaryClassificationMetricValues::accuracy);\n\n        scoreCalculator\n            .withUpstreamMap(data)\n            .withAmountOfParts(1)\n            .withTrainer(trainer)\n            .withMetric(metrics)\n            .withPreprocessor(vectorizer)\n            .withAmountOfFolds(folds)\n            .isRunningOnPipeline(false);\n\n        double[] scores = scoreCalculator.scoreByFolds();\n\n        assertEquals(0.8389830508474576, scores[0], 1e-6);\n        assertEquals(0.9402985074626866, scores[1], 1e-6);\n        assertEquals(0.8809523809523809, scores[2], 1e-6);\n        assertEquals(0.9921259842519685, scores[3], 1e-6);\n    }", "signature": "void testBasicFunctionality()", "full_signature": "@Test public void testBasicFunctionality()", "class_method_signature": "CrossValidationTest.testBasicFunctionality()", "testcase": true, "constructor": false, "invocations": ["put", "withSeed", "withBatchSize", "withLocIterations", "withMaxIterations", "withUpdatesStgy", "labeled", "withMetric", "isRunningOnPipeline", "withAmountOfFolds", "withPreprocessor", "withMetric", "withTrainer", "withAmountOfParts", "withUpstreamMap", "scoreByFolds", "assertEquals", "assertEquals", "assertEquals", "assertEquals"]}, "focal_class": {"identifier": "CrossValidation", "superclass": "extends AbstractCrossValidation<M, L, K, V>", "interfaces": "", "fields": [{"original_string": "private Ignite ignite;", "modifier": "private", "type": "Ignite", "declarator": "ignite", "var_name": "ignite"}, {"original_string": "private IgniteCache<K, V> upstreamCache;", "modifier": "private", "type": "IgniteCache<K, V>", "declarator": "upstreamCache", "var_name": "upstreamCache"}], "methods": [{"identifier": "scoreByFolds", "parameters": "()", "modifiers": "@Override public", "return": "double[]", "signature": "double[] scoreByFolds()", "full_signature": "@Override public double[] scoreByFolds()", "class_method_signature": "CrossValidation.scoreByFolds()", "testcase": false, "constructor": false}, {"identifier": "scorePipelineOnIgnite", "parameters": "()", "modifiers": "private", "return": "double[]", "signature": "double[] scorePipelineOnIgnite()", "full_signature": "private double[] scorePipelineOnIgnite()", "class_method_signature": "CrossValidation.scorePipelineOnIgnite()", "testcase": false, "constructor": false}, {"identifier": "scoreOnIgnite", "parameters": "()", "modifiers": "private", "return": "double[]", "signature": "double[] scoreOnIgnite()", "full_signature": "private double[] scoreOnIgnite()", "class_method_signature": "CrossValidation.scoreOnIgnite()", "testcase": false, "constructor": false}, {"identifier": "withIgnite", "parameters": "(Ignite ignite)", "modifiers": "public", "return": "CrossValidation<M, L, K, V>", "signature": "CrossValidation<M, L, K, V> withIgnite(Ignite ignite)", "full_signature": "public CrossValidation<M, L, K, V> withIgnite(Ignite ignite)", "class_method_signature": "CrossValidation.withIgnite(Ignite ignite)", "testcase": false, "constructor": false}, {"identifier": "withUpstreamCache", "parameters": "(IgniteCache<K, V> upstreamCache)", "modifiers": "public", "return": "CrossValidation<M, L, K, V>", "signature": "CrossValidation<M, L, K, V> withUpstreamCache(IgniteCache<K, V> upstreamCache)", "full_signature": "public CrossValidation<M, L, K, V> withUpstreamCache(IgniteCache<K, V> upstreamCache)", "class_method_signature": "CrossValidation.withUpstreamCache(IgniteCache<K, V> upstreamCache)", "testcase": false, "constructor": false}], "file": "modules/ml/src/main/java/org/apache/ignite/ml/selection/cv/CrossValidation.java"}, "focal_method": {"identifier": "scoreByFolds", "parameters": "()", "modifiers": "@Override public", "return": "double[]", "body": "@Override public double[] scoreByFolds() {\n        double[] locScores;\n\n        locScores = isRunningOnPipeline ? scorePipelineOnIgnite() : scoreOnIgnite();\n\n        return locScores;\n    }", "signature": "double[] scoreByFolds()", "full_signature": "@Override public double[] scoreByFolds()", "class_method_signature": "CrossValidation.scoreByFolds()", "testcase": false, "constructor": false, "invocations": ["scorePipelineOnIgnite", "scoreOnIgnite"]}, "repository": {"repo_id": 170496871, "url": "https://github.com/gridgain/gridgain", "stars": 46, "created": "2/13/2019 11:31:35 AM +00:00", "updates": "2020-01-27T16:02:24+00:00", "fork": "False", "license": "licensed"}}