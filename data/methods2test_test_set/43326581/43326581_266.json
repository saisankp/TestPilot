{"test_class": {"identifier": "AttachmentContentDownloaderTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private final Duration downloadTimeout = durationOf(2, TimeUnit.SECONDS);", "modifier": "private final", "type": "Duration", "declarator": "downloadTimeout = durationOf(2, TimeUnit.SECONDS)", "var_name": "downloadTimeout"}, {"original_string": "private AttachmentContentDownloader attachmentContentDownloader;", "modifier": "private", "type": "AttachmentContentDownloader", "declarator": "attachmentContentDownloader", "var_name": "attachmentContentDownloader"}], "file": "libraries/lib-datahandler/src/test/java/org/eclipse/sw360/datahandler/couchdb/AttachmentContentDownloaderTest.java"}, "test_case": {"identifier": "testTheCouchDbUrl", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testTheCouchDbUrl() throws Exception {\n        AttachmentContent attachmentContent = mock(AttachmentContent.class);\n\n        when(attachmentContent.getRemoteUrl()).thenReturn(DatabaseTestProperties.COUCH_DB_URL);\n\n        try (InputStream download = attachmentContentDownloader.download(attachmentContent, downloadTimeout)) {\n            String read = CharStreams.toString(new InputStreamReader(download));\n            assertThat(read, is(not(nullOrEmpty())));\n            assertThat(read, containsString(\"couchdb\"));\n        }\n    }", "signature": "void testTheCouchDbUrl()", "full_signature": "@Test public void testTheCouchDbUrl()", "class_method_signature": "AttachmentContentDownloaderTest.testTheCouchDbUrl()", "testcase": true, "constructor": false, "invocations": ["mock", "thenReturn", "when", "getRemoteUrl", "download", "toString", "assertThat", "is", "not", "nullOrEmpty", "assertThat", "containsString"]}, "focal_class": {"identifier": "AttachmentContentDownloader", "superclass": "", "interfaces": "", "fields": [], "methods": [{"identifier": "download", "parameters": "(AttachmentContent attachmentContent, Duration timeout)", "modifiers": "public", "return": "InputStream", "signature": "InputStream download(AttachmentContent attachmentContent, Duration timeout)", "full_signature": "public InputStream download(AttachmentContent attachmentContent, Duration timeout)", "class_method_signature": "AttachmentContentDownloader.download(AttachmentContent attachmentContent, Duration timeout)", "testcase": false, "constructor": false}], "file": "libraries/lib-datahandler/src/main/java/org/eclipse/sw360/datahandler/couchdb/AttachmentContentDownloader.java"}, "focal_method": {"identifier": "download", "parameters": "(AttachmentContent attachmentContent, Duration timeout)", "modifiers": "public", "return": "InputStream", "body": "public InputStream download(AttachmentContent attachmentContent, Duration timeout) throws IOException {\n        int millisTimeout = ((Number) timeout.toMillis()).intValue();\n\n        URL remoteURL = new URL(attachmentContent.getRemoteUrl());\n        URLConnection urlConnection = remoteURL.openConnection();\n\n        urlConnection.setConnectTimeout(millisTimeout);\n        urlConnection.setReadTimeout(millisTimeout);\n\n        InputStream downloadStream = urlConnection.getInputStream();\n        return new BufferedInputStream(downloadStream);\n    }", "signature": "InputStream download(AttachmentContent attachmentContent, Duration timeout)", "full_signature": "public InputStream download(AttachmentContent attachmentContent, Duration timeout)", "class_method_signature": "AttachmentContentDownloader.download(AttachmentContent attachmentContent, Duration timeout)", "testcase": false, "constructor": false, "invocations": ["intValue", "toMillis", "getRemoteUrl", "openConnection", "setConnectTimeout", "setReadTimeout", "getInputStream"]}, "repository": {"repo_id": 43326581, "url": "https://github.com/sw360/sw360portal", "language": "Java", "is_fork": false, "fork_count": 23, "stargazer_count": 31, "size": 8770, "license": "licensed"}}