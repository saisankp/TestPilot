{"test_class": {"identifier": "SshUtilsTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private SshUtils spy;", "modifier": "private", "type": "SshUtils", "declarator": "spy", "var_name": "spy"}, {"original_string": "private ThreadUtils threadUtils;", "modifier": "private", "type": "ThreadUtils", "declarator": "threadUtils", "var_name": "threadUtils"}, {"original_string": "private int CONNECT_TIMEOUT = 60000;", "modifier": "private", "type": "int", "declarator": "CONNECT_TIMEOUT = 60000", "var_name": "CONNECT_TIMEOUT"}, {"original_string": "private Session sshSession;", "modifier": "private", "type": "Session", "declarator": "sshSession", "var_name": "sshSession"}, {"original_string": "private Connection sshConnectionWithHost;", "modifier": "private", "type": "Connection", "declarator": "sshConnectionWithHost", "var_name": "sshConnectionWithHost"}], "file": "autonomic-plugin-common/src/test/java/br/com/autonomiccs/autonomic/plugin/common/utils/SshUtilsTest.java"}, "test_case": {"identifier": "waitUntilCommandFinishesTest", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void waitUntilCommandFinishesTest() {\n        Mockito.when(sshSession.getExitStatus()).thenReturn(null, null, new Integer(1));\n        Mockito.doNothing().when(threadUtils).sleepThread(Mockito.anyInt());\n\n        spy.waitUntilCommandFinishes(\"hostIp\", \"command\", sshSession);\n\n        Mockito.verify(sshSession, Mockito.times(3)).getExitStatus();\n        Mockito.verify(threadUtils, Mockito.times(2)).sleepThread(Mockito.eq(5));\n    }", "signature": "void waitUntilCommandFinishesTest()", "full_signature": "@Test public void waitUntilCommandFinishesTest()", "class_method_signature": "SshUtilsTest.waitUntilCommandFinishesTest()", "testcase": true, "constructor": false, "invocations": ["thenReturn", "when", "getExitStatus", "sleepThread", "when", "doNothing", "anyInt", "waitUntilCommandFinishes", "getExitStatus", "verify", "times", "sleepThread", "verify", "times", "eq"]}, "focal_class": {"identifier": "SshUtils", "superclass": "", "interfaces": "implements InitializingBean", "fields": [{"original_string": "private Logger logger = Logger.getLogger(this.getClass());", "modifier": "private", "type": "Logger", "declarator": "logger = Logger.getLogger(this.getClass())", "var_name": "logger"}, {"original_string": "private int CONNECT_TIMEOUT = 60000;", "modifier": "private", "type": "int", "declarator": "CONNECT_TIMEOUT = 60000", "var_name": "CONNECT_TIMEOUT"}, {"original_string": "@Autowired\n    protected ThreadUtils threadUtils;", "modifier": "@Autowired\n    protected", "type": "ThreadUtils", "declarator": "threadUtils", "var_name": "threadUtils"}, {"original_string": "private File certificate;", "modifier": "private", "type": "File", "declarator": "certificate", "var_name": "certificate"}], "methods": [{"identifier": "authenticateSshSessionWithPublicKey", "parameters": "(Connection sshConnection)", "modifiers": "protected", "return": "Session", "signature": "Session authenticateSshSessionWithPublicKey(Connection sshConnection)", "full_signature": "protected Session authenticateSshSessionWithPublicKey(Connection sshConnection)", "class_method_signature": "SshUtils.authenticateSshSessionWithPublicKey(Connection sshConnection)", "testcase": false, "constructor": false}, {"identifier": "getSshConnectionWithHost", "parameters": "(String address)", "modifiers": "protected", "return": "Connection", "signature": "Connection getSshConnectionWithHost(String address)", "full_signature": "protected Connection getSshConnectionWithHost(String address)", "class_method_signature": "SshUtils.getSshConnectionWithHost(String address)", "testcase": false, "constructor": false}, {"identifier": "executeCommandOnHostViaSsh", "parameters": "(String hostIp, String command)", "modifiers": "public", "return": "void", "signature": "void executeCommandOnHostViaSsh(String hostIp, String command)", "full_signature": "public void executeCommandOnHostViaSsh(String hostIp, String command)", "class_method_signature": "SshUtils.executeCommandOnHostViaSsh(String hostIp, String command)", "testcase": false, "constructor": false}, {"identifier": "waitUntilCommandFinishes", "parameters": "(String hostIp, String command, Session sshSession)", "modifiers": "protected", "return": "void", "signature": "void waitUntilCommandFinishes(String hostIp, String command, Session sshSession)", "full_signature": "protected void waitUntilCommandFinishes(String hostIp, String command, Session sshSession)", "class_method_signature": "SshUtils.waitUntilCommandFinishes(String hostIp, String command, Session sshSession)", "testcase": false, "constructor": false}, {"identifier": "sendFileToHost", "parameters": "(File localfilePath, String remoteFileName, String remotePath, String address)", "modifiers": "public", "return": "void", "signature": "void sendFileToHost(File localfilePath, String remoteFileName, String remotePath, String address)", "full_signature": "public void sendFileToHost(File localfilePath, String remoteFileName, String remotePath, String address)", "class_method_signature": "SshUtils.sendFileToHost(File localfilePath, String remoteFileName, String remotePath, String address)", "testcase": false, "constructor": false}, {"identifier": "afterPropertiesSet", "parameters": "()", "modifiers": "@Override public", "return": "void", "signature": "void afterPropertiesSet()", "full_signature": "@Override public void afterPropertiesSet()", "class_method_signature": "SshUtils.afterPropertiesSet()", "testcase": false, "constructor": false}], "file": "autonomic-plugin-common/src/main/java/br/com/autonomiccs/autonomic/plugin/common/utils/SshUtils.java"}, "focal_method": {"identifier": "waitUntilCommandFinishes", "parameters": "(String hostIp, String command, Session sshSession)", "modifiers": "protected", "return": "void", "body": "protected void waitUntilCommandFinishes(String hostIp, String command, Session sshSession) {\n        Integer exitStatus = sshSession.getExitStatus();\n        while (exitStatus == null) {\n            exitStatus = sshSession.getExitStatus();\n            threadUtils.sleepThread(5);\n        }\n        logger.info(String.format(\"Command [%s] executed on [%s] has the following exitStatus [%d]\", command, hostIp, exitStatus));\n    }", "signature": "void waitUntilCommandFinishes(String hostIp, String command, Session sshSession)", "full_signature": "protected void waitUntilCommandFinishes(String hostIp, String command, Session sshSession)", "class_method_signature": "SshUtils.waitUntilCommandFinishes(String hostIp, String command, Session sshSession)", "testcase": false, "constructor": false, "invocations": ["getExitStatus", "getExitStatus", "sleepThread", "info", "format"]}, "repository": {"repo_id": 56359101, "url": "https://github.com/Autonomiccs/autonomiccs-platform", "language": "Java", "is_fork": false, "fork_count": 7, "stargazer_count": 17, "size": 944, "license": "licensed"}}