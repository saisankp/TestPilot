{"test_class": {"identifier": "JavaFragmentEngineTest", "superclass": "", "interfaces": "", "fields": [], "file": "java-fragment/src/test/java/org/unidal/script/java/JavaFragmentEngineTest.java"}, "test_case": {"identifier": "test", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n   public void test() throws ScriptException {\n      ScriptEngineManager mgr = new ScriptEngineManager();\n      ScriptEngine engine = mgr.getEngineByExtension(\"js\");\n      String json = \"{\\\"status\\\":1,\\\"list\\\":{\\\"1\\\":{\\\"id\\\":\\\"111868\\\",\\\"name\\\":\\\"\\\\u989c\\\\u826f\\\",\\\"quality\\\":\\\"1\\\",\\\"level\\\":\\\"23\\\",\\\"exp\\\":\\\"41976\\\",\\\"levelupexp\\\":\\\"42320\\\",\\\"image\\\":\\\"21\\\",\\\"type\\\":\\\"1\\\",\\\"turn\\\":\\\"2\\\",\\\"isturn\\\":0,\\\"ratio\\\":1,\\\"pid\\\":\\\"76053\\\",\\\"ispractice\\\":1},\\\"2\\\":{\\\"id\\\":\\\"133789\\\",\\\"name\\\":\\\"\\\\u6587\\\\u4e11\\\",\\\"quality\\\":\\\"1\\\",\\\"level\\\":\\\"19\\\",\\\"exp\\\":\\\"2492\\\",\\\"levelupexp\\\":\\\"28880\\\",\\\"image\\\":\\\"18\\\",\\\"type\\\":\\\"1\\\",\\\"turn\\\":\\\"1\\\",\\\"isturn\\\":0,\\\"ratio\\\":1,\\\"pid\\\":0,\\\"ispractice\\\":0},\\\"3\\\":{\\\"id\\\":\\\"150693\\\",\\\"name\\\":\\\"\\\\u7530\\\\u4e30\\\",\\\"quality\\\":\\\"1\\\",\\\"level\\\":\\\"19\\\",\\\"exp\\\":\\\"2462\\\",\\\"levelupexp\\\":\\\"28880\\\",\\\"image\\\":\\\"17\\\",\\\"type\\\":\\\"2\\\",\\\"turn\\\":\\\"1\\\",\\\"isturn\\\":0,\\\"ratio\\\":1,\\\"pid\\\":0,\\\"ispractice\\\":0},\\\"4\\\":{\\\"id\\\":\\\"228506\\\",\\\"name\\\":\\\"\\\\u8881\\\\u7ecd\\\",\\\"quality\\\":\\\"1\\\",\\\"level\\\":\\\"5\\\",\\\"exp\\\":\\\"1134\\\",\\\"levelupexp\\\":\\\"2000\\\",\\\"image\\\":\\\"22\\\",\\\"type\\\":\\\"1\\\",\\\"turn\\\":\\\"1\\\",\\\"isturn\\\":0,\\\"ratio\\\":1,\\\"pid\\\":0,\\\"ispractice\\\":0},\\\"5\\\":{\\\"id\\\":\\\"204208\\\",\\\"name\\\":\\\"\\\\u8521\\\\u6587\\\\u59ec\\\",\\\"quality\\\":\\\"1\\\",\\\"level\\\":\\\"44\\\",\\\"exp\\\":\\\"108954\\\",\\\"levelupexp\\\":\\\"154880\\\",\\\"image\\\":\\\"5\\\",\\\"type\\\":\\\"2\\\",\\\"turn\\\":\\\"0\\\",\\\"isturn\\\":0,\\\"ratio\\\":1,\\\"pid\\\":0,\\\"ispractice\\\":0}},\\\"rule\\\":{\\\"1\\\":{\\\"paytype\\\":1,\\\"hour\\\":8,\\\"cost\\\":6300},\\\"2\\\":{\\\"paytype\\\":1,\\\"hour\\\":24,\\\"cost\\\":16065},\\\"3\\\":{\\\"paytype\\\":2,\\\"hour\\\":24,\\\"cost\\\":2},\\\"4\\\":{\\\"paytype\\\":2,\\\"hour\\\":72,\\\"cost\\\":20}},\\\"place\\\":{\\\"1\\\":{\\\"id\\\":\\\"76053\\\",\\\"gid\\\":\\\"111868\\\",\\\"image\\\":\\\"21\\\",\\\"squence\\\":\\\"1\\\",\\\"level\\\":\\\"1\\\",\\\"type\\\":\\\"2\\\",\\\"quality\\\":\\\"1\\\",\\\"cd\\\":84210},\\\"2\\\":{\\\"id\\\":\\\"76054\\\",\\\"gid\\\":\\\"0\\\",\\\"image\\\":0,\\\"squence\\\":\\\"2\\\",\\\"level\\\":\\\"1\\\",\\\"type\\\":\\\"0\\\",\\\"quality\\\":0,\\\"cd\\\":0},\\\"3\\\":{\\\"id\\\":\\\"128898\\\",\\\"gid\\\":\\\"0\\\",\\\"image\\\":0,\\\"squence\\\":\\\"3\\\",\\\"level\\\":\\\"1\\\",\\\"type\\\":\\\"0\\\",\\\"quality\\\":0,\\\"cd\\\":0},\\\"4\\\":{\\\"id\\\":\\\"188678\\\",\\\"gid\\\":\\\"0\\\",\\\"image\\\":0,\\\"squence\\\":\\\"4\\\",\\\"level\\\":\\\"1\\\",\\\"type\\\":\\\"0\\\",\\\"quality\\\":0,\\\"cd\\\":0}},\\\"leap\\\":0,\\\"mop\\\":[],\\\"freetimes\\\":\\\"12\\\"}\";\n      String script = \"var gs='',ps=''; for (var i in o.list) gs+=o.list[i].id+','; for (var i in o.place) ps+=o.place[i].id+':'+o.place[i].gid+','; gs+'|'+ps;\";\n\n      Object result = engine.eval(\"var o=\" + json + \";\" + script);\n\n      System.out.println(result);\n   }", "signature": "void test()", "full_signature": "@Test public void test()", "class_method_signature": "JavaFragmentEngineTest.test()", "testcase": true, "constructor": false, "invocations": ["getEngineByExtension", "eval", "println"]}, "focal_class": {"identifier": "JavaFragmentEngine", "superclass": "extends AbstractScriptEngine", "interfaces": "", "fields": [{"original_string": "public static final String OUTPUT_DIRECTORY = \"java.fragment.output.directory\";", "modifier": "public static final", "type": "String", "declarator": "OUTPUT_DIRECTORY = \"java.fragment.output.directory\"", "var_name": "OUTPUT_DIRECTORY"}, {"original_string": "private ScriptEngineFactory m_factory;", "modifier": "private", "type": "ScriptEngineFactory", "declarator": "m_factory", "var_name": "m_factory"}, {"original_string": "private JavaFragmentCompiler m_compiler;", "modifier": "private", "type": "JavaFragmentCompiler", "declarator": "m_compiler", "var_name": "m_compiler"}], "methods": [{"identifier": "JavaFragmentEngine", "parameters": "(JavaFragmentEngineFactory factory)", "modifiers": "", "return": "", "signature": " JavaFragmentEngine(JavaFragmentEngineFactory factory)", "full_signature": "  JavaFragmentEngine(JavaFragmentEngineFactory factory)", "class_method_signature": "JavaFragmentEngine.JavaFragmentEngine(JavaFragmentEngineFactory factory)", "testcase": false, "constructor": true}, {"identifier": "createBindings", "parameters": "()", "modifiers": "@Override public", "return": "Bindings", "signature": "Bindings createBindings()", "full_signature": "@Override public Bindings createBindings()", "class_method_signature": "JavaFragmentEngine.createBindings()", "testcase": false, "constructor": false}, {"identifier": "eval", "parameters": "(Reader script, ScriptContext context)", "modifiers": "@Override public", "return": "Object", "signature": "Object eval(Reader script, ScriptContext context)", "full_signature": "@Override public Object eval(Reader script, ScriptContext context)", "class_method_signature": "JavaFragmentEngine.eval(Reader script, ScriptContext context)", "testcase": false, "constructor": false}, {"identifier": "eval", "parameters": "(String script, ScriptContext context)", "modifiers": "@Override public", "return": "Object", "signature": "Object eval(String script, ScriptContext context)", "full_signature": "@Override public Object eval(String script, ScriptContext context)", "class_method_signature": "JavaFragmentEngine.eval(String script, ScriptContext context)", "testcase": false, "constructor": false}, {"identifier": "getCompilable", "parameters": "()", "modifiers": "private", "return": "Compilable", "signature": "Compilable getCompilable()", "full_signature": "private Compilable getCompilable()", "class_method_signature": "JavaFragmentEngine.getCompilable()", "testcase": false, "constructor": false}, {"identifier": "getFactory", "parameters": "()", "modifiers": "@Override public", "return": "ScriptEngineFactory", "signature": "ScriptEngineFactory getFactory()", "full_signature": "@Override public ScriptEngineFactory getFactory()", "class_method_signature": "JavaFragmentEngine.getFactory()", "testcase": false, "constructor": false}], "file": "java-fragment/src/main/java/org/unidal/script/java/JavaFragmentEngine.java"}, "focal_method": {"identifier": "eval", "parameters": "(Reader script, ScriptContext context)", "modifiers": "@Override public", "return": "Object", "body": "@Override\n   public Object eval(Reader script, ScriptContext context) throws ScriptException {\n      CompiledScript compiledScript = getCompilable().compile(script);\n\n      return compiledScript.eval(context);\n   }", "signature": "Object eval(Reader script, ScriptContext context)", "full_signature": "@Override public Object eval(Reader script, ScriptContext context)", "class_method_signature": "JavaFragmentEngine.eval(Reader script, ScriptContext context)", "testcase": false, "constructor": false, "invocations": ["compile", "getCompilable", "eval"]}, "repository": {"repo_id": 6627230, "url": "https://github.com/unidal/frameworks", "language": "Java", "is_fork": false, "fork_count": 96, "stargazer_count": 100, "size": 3009, "license": "licensed"}}