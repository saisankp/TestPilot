{"test_class": {"identifier": "RestRulesTest", "superclass": "extends JerseyTest", "interfaces": "", "fields": [{"original_string": "private static ObjectMapper objectMapper = new ObjectMapper();", "modifier": "private static", "type": "ObjectMapper", "declarator": "objectMapper = new ObjectMapper()", "var_name": "objectMapper"}], "file": "bigdata-intro/cep-intro/siddhi-kafka-rest/src/test/java/net/redborder/cep/rest/RestRulesTest.java"}, "test_case": {"identifier": "remove", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void remove() throws Exception {\n        // Create a rule that will be added\n        Map<String, Object> elementMap = new HashMap<>();\n        Map<String, String> outputTopics = new HashMap<>();\n        outputTopics.put(\"outputStream\", \"outputTopic\");\n        elementMap.put(\"id\", \"rule_to_delete\");\n        elementMap.put(\"input\", Arrays.asList(\"test\"));\n        elementMap.put(\"output\", outputTopics);\n        elementMap.put(\"executionPlan\", \"from test select a, b insert into outputStream;\");\n\n        // Serialize the map as a json string\n        String json = objectMapper.writeValueAsString(elementMap);\n\n        // Call the REST API to add the rule\n        Entity<String> entity = Entity.json(json);\n        Response response = target(\"/v1/\").request(MediaType.APPLICATION_JSON_TYPE).post(entity);\n        assertEquals(Response.Status.OK.getStatusCode(), response.getStatus());\n\n        // Now remove it\n        response = target(\"/v1/rule_to_delete\").request(MediaType.APPLICATION_JSON_TYPE).delete();\n        assertEquals(Response.Status.OK.getStatusCode(), response.getStatus());\n    }", "signature": "void remove()", "full_signature": "@Test public void remove()", "class_method_signature": "RestRulesTest.remove()", "testcase": true, "constructor": false, "invocations": ["put", "put", "put", "asList", "put", "put", "writeValueAsString", "json", "post", "request", "target", "assertEquals", "getStatusCode", "getStatus", "delete", "request", "target", "assertEquals", "getStatusCode", "getStatus"]}, "focal_class": {"identifier": "RestRules", "superclass": "", "interfaces": "", "fields": [{"original_string": "private final Logger log = LoggerFactory.getLogger(RestRules.class);", "modifier": "private final", "type": "Logger", "declarator": "log = LoggerFactory.getLogger(RestRules.class)", "var_name": "log"}, {"original_string": "private ObjectMapper mapper = new ObjectMapper();", "modifier": "private", "type": "ObjectMapper", "declarator": "mapper = new ObjectMapper()", "var_name": "mapper"}], "methods": [{"identifier": "add", "parameters": "(String json)", "modifiers": "@POST @Consumes(MediaType.APPLICATION_JSON) @Produces(MediaType.APPLICATION_JSON) public", "return": "Response", "signature": "Response add(String json)", "full_signature": "@POST @Consumes(MediaType.APPLICATION_JSON) @Produces(MediaType.APPLICATION_JSON) public Response add(String json)", "class_method_signature": "RestRules.add(String json)", "testcase": false, "constructor": false}, {"identifier": "remove", "parameters": "(@PathParam(\"id\") String id)", "modifiers": "@DELETE @Path(\"/{id}\") @Produces(MediaType.APPLICATION_JSON) public", "return": "Response", "signature": "Response remove(@PathParam(\"id\") String id)", "full_signature": "@DELETE @Path(\"/{id}\") @Produces(MediaType.APPLICATION_JSON) public Response remove(@PathParam(\"id\") String id)", "class_method_signature": "RestRules.remove(@PathParam(\"id\") String id)", "testcase": false, "constructor": false}, {"identifier": "synchronize", "parameters": "(String json)", "modifiers": "@POST @Path(\"/synchronize\") @Consumes (MediaType.APPLICATION_JSON) @Produces(MediaType.APPLICATION_JSON) public", "return": "Response", "signature": "Response synchronize(String json)", "full_signature": "@POST @Path(\"/synchronize\") @Consumes (MediaType.APPLICATION_JSON) @Produces(MediaType.APPLICATION_JSON) public Response synchronize(String json)", "class_method_signature": "RestRules.synchronize(String json)", "testcase": false, "constructor": false}, {"identifier": "list", "parameters": "()", "modifiers": "@GET @Produces(MediaType.APPLICATION_JSON) public", "return": "Response", "signature": "Response list()", "full_signature": "@GET @Produces(MediaType.APPLICATION_JSON) public Response list()", "class_method_signature": "RestRules.list()", "testcase": false, "constructor": false}, {"identifier": "parseMap", "parameters": "(String str)", "modifiers": "private", "return": "Map<String, Object>", "signature": "Map<String, Object> parseMap(String str)", "full_signature": "private Map<String, Object> parseMap(String str)", "class_method_signature": "RestRules.parseMap(String str)", "testcase": false, "constructor": false}, {"identifier": "parseList", "parameters": "(String str)", "modifiers": "private", "return": "List<Map<String, Object>>", "signature": "List<Map<String, Object>> parseList(String str)", "full_signature": "private List<Map<String, Object>> parseList(String str)", "class_method_signature": "RestRules.parseList(String str)", "testcase": false, "constructor": false}, {"identifier": "toMap", "parameters": "(Throwable e, Response.Status status)", "modifiers": "private", "return": "Map<String, Object>", "signature": "Map<String, Object> toMap(Throwable e, Response.Status status)", "full_signature": "private Map<String, Object> toMap(Throwable e, Response.Status status)", "class_method_signature": "RestRules.toMap(Throwable e, Response.Status status)", "testcase": false, "constructor": false}], "file": "bigdata-intro/cep-intro/siddhi-kafka-rest/src/main/java/net/redborder/cep/rest/RestRules.java"}, "focal_method": {"identifier": "remove", "parameters": "(@PathParam(\"id\") String id)", "modifiers": "@DELETE @Path(\"/{id}\") @Produces(MediaType.APPLICATION_JSON) public", "return": "Response", "body": "@DELETE\n    @Path(\"/{id}\")\n    @Produces(MediaType.APPLICATION_JSON)\n    public Response remove(@PathParam(\"id\") String id) {\n        RestListener listener = RestManager.getListener();\n        Response response;\n\n        // Check if the listener accepted the operation\n        try {\n            log.info(\"Remove request with id: {}\", id);\n            listener.remove(id);\n            response = Response.ok().build();\n        } catch (RestNotFoundException e) {\n            log.info(\"Remove request invalid: {}\", e.getMessage());\n            e.printStackTrace();\n            response = Response.status(Response.Status.NOT_FOUND)\n                    .entity(toMap(e, Response.Status.NOT_FOUND))\n                    .build();\n        } catch (Exception e) {\n            e.printStackTrace();\n            response = Response.serverError()\n                    .entity(toMap(e, Response.Status.INTERNAL_SERVER_ERROR))\n                    .build();\n        }\n\n        return response;\n    }", "signature": "Response remove(@PathParam(\"id\") String id)", "full_signature": "@DELETE @Path(\"/{id}\") @Produces(MediaType.APPLICATION_JSON) public Response remove(@PathParam(\"id\") String id)", "class_method_signature": "RestRules.remove(@PathParam(\"id\") String id)", "testcase": false, "constructor": false, "invocations": ["getListener", "info", "remove", "build", "ok", "info", "getMessage", "printStackTrace", "build", "entity", "status", "toMap", "printStackTrace", "build", "entity", "serverError", "toMap"]}, "repository": {"repo_id": 44512524, "url": "https://github.com/zqhxuyuan/bigdata", "language": "Java", "is_fork": false, "fork_count": 6, "stargazer_count": 8, "size": 91550, "license": "licensed"}}