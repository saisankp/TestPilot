{"test_class": {"identifier": "RandomRobinLookupStrategyTest", "superclass": "extends AbstractLookupStrategyTest", "interfaces": "", "fields": [], "file": "microservices/src/test/java/io/silverware/microservices/silver/services/lookup/RandomRobinLookupStrategyTest.java"}, "test_case": {"identifier": "testGetService", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n   public void testGetService() throws Exception {\n      Set<Object> expectedResult = new HashSet<>(asList(\"1\", \"2\", \"3\"));\n      ThreadLocalRandom rnd = ThreadLocalRandom.current();\n      new Expectations(Context.class, ThreadLocalRandom.class) {{\n         context.lookupMicroservice(META_DATA);\n         times = 4;\n         result = expectedResult;\n         rnd.nextInt(anyInt);\n         times = 4;\n         result = 1;\n      }};\n\n      List<Object> result = new ArrayList<>();\n      for (int i = 0; i < 4; i++) {\n         result.add(strategy.getService());\n      }\n      assertThat(result).containsExactly(\"2\", \"2\", \"2\", \"2\");\n\n   }", "signature": "void testGetService()", "full_signature": "@Test public void testGetService()", "class_method_signature": "RandomRobinLookupStrategyTest.testGetService()", "testcase": true, "constructor": false, "invocations": ["asList", "current", "lookupMicroservice", "nextInt", "add", "getService", "containsExactly", "assertThat"]}, "focal_class": {"identifier": "RandomRobinLookupStrategy", "superclass": "extends AbstractLookupStrategy", "interfaces": "", "fields": [], "methods": [{"identifier": "getService", "parameters": "()", "modifiers": "@Override public", "return": "Object", "signature": "Object getService()", "full_signature": "@Override public Object getService()", "class_method_signature": "RandomRobinLookupStrategy.getService()", "testcase": false, "constructor": false}], "file": "microservices/src/main/java/io/silverware/microservices/silver/services/lookup/RandomRobinLookupStrategy.java"}, "focal_method": {"identifier": "getService", "parameters": "()", "modifiers": "@Override public", "return": "Object", "body": "@Override\n   public Object getService() {\n      Set<Object> services = context.lookupMicroservice(metaData);\n      if (services.isEmpty()) {\n         throw new RuntimeException(\"No service found for: \" + metaData);\n      }\n      return services.toArray()[ThreadLocalRandom.current().nextInt(services.size())];\n   }", "signature": "Object getService()", "full_signature": "@Override public Object getService()", "class_method_signature": "RandomRobinLookupStrategy.getService()", "testcase": false, "constructor": false, "invocations": ["lookupMicroservice", "isEmpty", "toArray", "nextInt", "current", "size"]}, "repository": {"repo_id": 30619741, "url": "https://github.com/SilverThings/SilverWare", "language": "Java", "is_fork": false, "fork_count": 12, "stargazer_count": 21, "size": 3333, "license": "licensed"}}