{"test_class": {"identifier": "IndexCreatorsTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private CollectionName collection;", "modifier": "private", "type": "CollectionName", "declarator": "collection", "var_name": "collection"}, {"original_string": "private StringWriter body;", "modifier": "private", "type": "StringWriter", "declarator": "body", "var_name": "body"}], "file": "CoreFeatures/Database-postgresql/PostgresSchema/src/test/java/info/smart_tools/smartactors/database_postgresql/postgres_schema/indexes/IndexCreatorsTest.java"}, "test_case": {"identifier": "testOrderedIndex", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testOrderedIndex() throws Exception {\n        IObject options = new DSObject(\"{ \\\"ordered\\\": [ \\\"a\\\", \\\"b\\\" ] }\");\n        IndexCreators.writeIndexes(body, collection, options);\n        assertEquals(\"CREATE INDEX ON test_collection USING BTREE ((document#>'{a}'));\\n\" +\n                     \"CREATE INDEX ON test_collection USING BTREE ((document#>'{b}'));\\n\",\n                body.toString());\n    }", "signature": "void testOrderedIndex()", "full_signature": "@Test public void testOrderedIndex()", "class_method_signature": "IndexCreatorsTest.testOrderedIndex()", "testcase": true, "constructor": false, "invocations": ["writeIndexes", "assertEquals", "toString"]}, "focal_class": {"identifier": "IndexCreators", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final Map<String, IndexWriterResolver> INDEX_WRITERS = new HashMap<String, IndexWriterResolver>() {{\n        put(\"ordered\", (indexDefinition) -> IndexCreators::writeOrderedIndex);\n        put(\"datetime\", (indexDefinition) -> IndexCreators::writeDatetimeIndex);\n        put(\"tags\", (indexDefinition) -> IndexCreators::writeTagsIndex);\n        put(\"fulltext\", FulltextIndexWriter::resolve);\n    }};", "modifier": "private static final", "type": "Map<String, IndexWriterResolver>", "declarator": "INDEX_WRITERS = new HashMap<String, IndexWriterResolver>() {{\n        put(\"ordered\", (indexDefinition) -> IndexCreators::writeOrderedIndex);\n        put(\"datetime\", (indexDefinition) -> IndexCreators::writeDatetimeIndex);\n        put(\"tags\", (indexDefinition) -> IndexCreators::writeTagsIndex);\n        put(\"fulltext\", FulltextIndexWriter::resolve);\n    }}", "var_name": "INDEX_WRITERS"}], "methods": [{"identifier": "IndexCreators", "parameters": "()", "modifiers": "private", "return": "", "signature": " IndexCreators()", "full_signature": "private  IndexCreators()", "class_method_signature": "IndexCreators.IndexCreators()", "testcase": false, "constructor": true}, {"identifier": "writeIndexes", "parameters": "(Writer body, CollectionName collection, IObject options)", "modifiers": "public static", "return": "void", "signature": "void writeIndexes(Writer body, CollectionName collection, IObject options)", "full_signature": "public static void writeIndexes(Writer body, CollectionName collection, IObject options)", "class_method_signature": "IndexCreators.writeIndexes(Writer body, CollectionName collection, IObject options)", "testcase": false, "constructor": false}, {"identifier": "writeCreateIndex", "parameters": "(final String indexType, final Writer body, final CollectionName collection, IObject options)", "modifiers": "private static", "return": "void", "signature": "void writeCreateIndex(final String indexType, final Writer body, final CollectionName collection, IObject options)", "full_signature": "private static void writeCreateIndex(final String indexType, final Writer body, final CollectionName collection, IObject options)", "class_method_signature": "IndexCreators.writeCreateIndex(final String indexType, final Writer body, final CollectionName collection, IObject options)", "testcase": false, "constructor": false}, {"identifier": "writeOrderedIndex", "parameters": "(final Writer body, final CollectionName collection,\n                                          final List<FieldPath> fields)", "modifiers": "private static", "return": "void", "signature": "void writeOrderedIndex(final Writer body, final CollectionName collection,\n                                          final List<FieldPath> fields)", "full_signature": "private static void writeOrderedIndex(final Writer body, final CollectionName collection,\n                                          final List<FieldPath> fields)", "class_method_signature": "IndexCreators.writeOrderedIndex(final Writer body, final CollectionName collection,\n                                          final List<FieldPath> fields)", "testcase": false, "constructor": false}, {"identifier": "writeDatetimeIndex", "parameters": "(final Writer body, final CollectionName collection,\n                                           final List<FieldPath> fields)", "modifiers": "private static", "return": "void", "signature": "void writeDatetimeIndex(final Writer body, final CollectionName collection,\n                                           final List<FieldPath> fields)", "full_signature": "private static void writeDatetimeIndex(final Writer body, final CollectionName collection,\n                                           final List<FieldPath> fields)", "class_method_signature": "IndexCreators.writeDatetimeIndex(final Writer body, final CollectionName collection,\n                                           final List<FieldPath> fields)", "testcase": false, "constructor": false}, {"identifier": "writeTagsIndex", "parameters": "(final Writer body, final CollectionName collection,\n                                       final List<FieldPath> fields)", "modifiers": "private static", "return": "void", "signature": "void writeTagsIndex(final Writer body, final CollectionName collection,\n                                       final List<FieldPath> fields)", "full_signature": "private static void writeTagsIndex(final Writer body, final CollectionName collection,\n                                       final List<FieldPath> fields)", "class_method_signature": "IndexCreators.writeTagsIndex(final Writer body, final CollectionName collection,\n                                       final List<FieldPath> fields)", "testcase": false, "constructor": false}], "file": "CoreFeatures/Database-postgresql/PostgresSchema/src/main/java/info/smart_tools/smartactors/database_postgresql/postgres_schema/indexes/IndexCreators.java"}, "focal_method": {"identifier": "writeIndexes", "parameters": "(Writer body, CollectionName collection, IObject options)", "modifiers": "public static", "return": "void", "body": "public static void writeIndexes(Writer body, CollectionName collection, IObject options) throws Exception {\n        try {\n            if (options == null) {\n                // no indexes definition, ignoring\n                return;\n            }\n            for (String indexType : INDEX_WRITERS.keySet()) {\n                writeCreateIndex(indexType, body, collection, options);\n            }\n        } catch (ReadValueException e) {\n            // no indexes definition, ignoring\n        }\n    }", "signature": "void writeIndexes(Writer body, CollectionName collection, IObject options)", "full_signature": "public static void writeIndexes(Writer body, CollectionName collection, IObject options)", "class_method_signature": "IndexCreators.writeIndexes(Writer body, CollectionName collection, IObject options)", "testcase": false, "constructor": false, "invocations": ["keySet", "writeCreateIndex"]}, "repository": {"repo_id": 52972024, "url": "https://github.com/SmartTools/smartactors-core", "language": "Java", "is_fork": false, "fork_count": 7, "stargazer_count": 17, "size": 58816, "license": "licensed"}}