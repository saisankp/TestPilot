{"test_class": {"identifier": "SystemAccountAuthenticatorTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static Connection con;", "modifier": "private static", "type": "Connection", "declarator": "con", "var_name": "con"}, {"original_string": "private static PasswordEncryptor encryptor = getEncryptor();", "modifier": "private static", "type": "PasswordEncryptor", "declarator": "encryptor = getEncryptor()", "var_name": "encryptor"}, {"original_string": "private static final String COMPONENT_BASE_PATH = \"com/nablarch/example/app/web/common/authentication/\";", "modifier": "private static final", "type": "String", "declarator": "COMPONENT_BASE_PATH = \"com/nablarch/example/app/web/common/authentication/\"", "var_name": "COMPONENT_BASE_PATH"}], "file": "examples/nablarch/src/test/java/com/nablarch/example/app/web/common/authentication/SystemAccountAuthenticatorTest.java"}, "test_case": {"identifier": "testUserIsNotFound", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testUserIsNotFound() {\n\n        SystemAccountAuthenticator authenticator = createPasswordAuthenticator(\"20130802\");\n\n        try {\n            authenticator.authenticate(\"no exists\", \"password\");\n            fail(\"\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3059\u308b\u306e\u3067\u3001\u3053\u3053\u306f\u901a\u904e\u3057\u306a\u3044\");\n        } catch (AuthenticationFailedException e) {\n            assertThat(e.getUserId(), is(\"no exists\"));\n        }\n    }", "signature": "void testUserIsNotFound()", "full_signature": "@Test public void testUserIsNotFound()", "class_method_signature": "SystemAccountAuthenticatorTest.testUserIsNotFound()", "testcase": true, "constructor": false, "invocations": ["createPasswordAuthenticator", "authenticate", "fail", "assertThat", "getUserId", "is"]}, "focal_class": {"identifier": "SystemAccountAuthenticator", "superclass": "", "interfaces": "implements PasswordAuthenticator", "fields": [{"original_string": "private int failedCountToLock;", "modifier": "private", "type": "int", "declarator": "failedCountToLock", "var_name": "failedCountToLock"}, {"original_string": "private PasswordEncryptor passwordEncryptor;", "modifier": "private", "type": "PasswordEncryptor", "declarator": "passwordEncryptor", "var_name": "passwordEncryptor"}, {"original_string": "private SimpleDbTransactionManager dbManager;", "modifier": "private", "type": "SimpleDbTransactionManager", "declarator": "dbManager", "var_name": "dbManager"}, {"original_string": "private static final String SQL_ID_PREFIX = SystemAccountAuthenticator.class.getName() + '#';", "modifier": "private static final", "type": "String", "declarator": "SQL_ID_PREFIX = SystemAccountAuthenticator.class.getName() + '#'", "var_name": "SQL_ID_PREFIX"}], "methods": [{"identifier": "SystemAccountAuthenticator", "parameters": "()", "modifiers": "public", "return": "", "signature": " SystemAccountAuthenticator()", "full_signature": "public  SystemAccountAuthenticator()", "class_method_signature": "SystemAccountAuthenticator.SystemAccountAuthenticator()", "testcase": false, "constructor": true}, {"identifier": "setFailedCountToLock", "parameters": "(int failedCountToLock)", "modifiers": "public", "return": "void", "signature": "void setFailedCountToLock(int failedCountToLock)", "full_signature": "public void setFailedCountToLock(int failedCountToLock)", "class_method_signature": "SystemAccountAuthenticator.setFailedCountToLock(int failedCountToLock)", "testcase": false, "constructor": false}, {"identifier": "setPasswordEncryptor", "parameters": "(PasswordEncryptor passwordEncryptor)", "modifiers": "public", "return": "void", "signature": "void setPasswordEncryptor(PasswordEncryptor passwordEncryptor)", "full_signature": "public void setPasswordEncryptor(PasswordEncryptor passwordEncryptor)", "class_method_signature": "SystemAccountAuthenticator.setPasswordEncryptor(PasswordEncryptor passwordEncryptor)", "testcase": false, "constructor": false}, {"identifier": "setDbManager", "parameters": "(SimpleDbTransactionManager dbManager)", "modifiers": "public", "return": "void", "signature": "void setDbManager(SimpleDbTransactionManager dbManager)", "full_signature": "public void setDbManager(SimpleDbTransactionManager dbManager)", "class_method_signature": "SystemAccountAuthenticator.setDbManager(SimpleDbTransactionManager dbManager)", "testcase": false, "constructor": false}, {"identifier": "authenticate", "parameters": "(final String userId, final String password)", "modifiers": "public", "return": "void", "signature": "void authenticate(final String userId, final String password)", "full_signature": "public void authenticate(final String userId, final String password)", "class_method_signature": "SystemAccountAuthenticator.authenticate(final String userId, final String password)", "testcase": false, "constructor": false}, {"identifier": "authenticate", "parameters": "(SystemAccount account, String password, Date businessDate)", "modifiers": "private", "return": "void", "signature": "void authenticate(SystemAccount account, String password, Date businessDate)", "full_signature": "private void authenticate(SystemAccount account, String password, Date businessDate)", "class_method_signature": "SystemAccountAuthenticator.authenticate(SystemAccount account, String password, Date businessDate)", "testcase": false, "constructor": false}, {"identifier": "expiredPassword", "parameters": "(SystemAccount account, Date businessDate)", "modifiers": "private", "return": "boolean", "signature": "boolean expiredPassword(SystemAccount account, Date businessDate)", "full_signature": "private boolean expiredPassword(SystemAccount account, Date businessDate)", "class_method_signature": "SystemAccountAuthenticator.expiredPassword(SystemAccount account, Date businessDate)", "testcase": false, "constructor": false}, {"identifier": "isChecksFailedCount", "parameters": "()", "modifiers": "private", "return": "boolean", "signature": "boolean isChecksFailedCount()", "full_signature": "private boolean isChecksFailedCount()", "class_method_signature": "SystemAccountAuthenticator.isChecksFailedCount()", "testcase": false, "constructor": false}, {"identifier": "updateAuthenticationSucceed", "parameters": "(final Integer id)", "modifiers": "private", "return": "void", "signature": "void updateAuthenticationSucceed(final Integer id)", "full_signature": "private void updateAuthenticationSucceed(final Integer id)", "class_method_signature": "SystemAccountAuthenticator.updateAuthenticationSucceed(final Integer id)", "testcase": false, "constructor": false}, {"identifier": "updateAuthenticationFailed", "parameters": "(final Integer id, final Short failedCount)", "modifiers": "private", "return": "void", "signature": "void updateAuthenticationFailed(final Integer id, final Short failedCount)", "full_signature": "private void updateAuthenticationFailed(final Integer id, final Short failedCount)", "class_method_signature": "SystemAccountAuthenticator.updateAuthenticationFailed(final Integer id, final Short failedCount)", "testcase": false, "constructor": false}], "file": "examples/nablarch/src/main/java/com/nablarch/example/app/web/common/authentication/SystemAccountAuthenticator.java"}, "focal_method": {"identifier": "authenticate", "parameters": "(final String userId, final String password)", "modifiers": "public", "return": "void", "body": "public void authenticate(final String userId, final String password)\n        throws AuthenticationFailedException, UserIdLockedException, PasswordExpiredException {\n\n        if (userId == null || password == null) {\n            throw new AuthenticationFailedException(userId);\n        }\n\n        // \u6709\u52b9\u671f\u9650\u306f\u65e5\u4ed8\u5358\u4f4d\u3067\u7ba1\u7406\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u73fe\u5728\u65e5\u6642\u304b\u3089\u6642\u9593\u3092\u5207\u308a\u6368\u3066\u305f\u65e5\u4ed8\u3092\u4f7f\u7528\u3059\u308b\u3002\n        Date sysDate = new Timestamp(DateUtil.getDate(SystemTimeUtil.getDateString()).getTime());\n        final SystemAccount account;\n        try {\n            account = UniversalDao.findBySqlFile(\n                    SystemAccount.class,\n                    \"FIND_SYSTEM_ACCOUNT\", new Object[]{userId, sysDate});\n        } catch (NoDataException e) {\n            // \u30e6\u30fc\u30b6ID\u306b\u4e00\u81f4\u3059\u308b\u30e6\u30fc\u30b6\u30fc\u304c\u898b\u3064\u304b\u3089\u306a\u3044\u5834\u5408\n            throw new AuthenticationFailedException(userId);\n        }\n\n        authenticate(account, password, sysDate);\n    }", "signature": "void authenticate(final String userId, final String password)", "full_signature": "public void authenticate(final String userId, final String password)", "class_method_signature": "SystemAccountAuthenticator.authenticate(final String userId, final String password)", "testcase": false, "constructor": false, "invocations": ["getTime", "getDate", "getDateString", "findBySqlFile", "authenticate"]}, "repository": {"repo_id": 8771890, "url": "https://github.com/kawasima/waitt", "language": "Java", "is_fork": false, "fork_count": 5, "stargazer_count": 15, "size": 1108, "license": "licensed"}}