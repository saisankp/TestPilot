{"test_class": {"identifier": "MailServiceTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "@Autowired\n\tprivate MailService mailService;", "modifier": "@Autowired\n\tprivate", "type": "MailService", "declarator": "mailService", "var_name": "mailService"}], "file": "spring-boot-2.x_mail/src/test/java/cn/lijunkui/mail/MailServiceTest.java"}, "test_case": {"identifier": "sendInlineResourceMail", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n\tpublic void sendInlineResourceMail() {\n\t\tString html= \"<!DOCTYPE html>\\r\\n\" + \n\t\t\t\t\"<html>\\r\\n\" + \n\t\t\t\t\"<head>\\r\\n\" + \n\t\t\t\t\"<meta charset=\\\"UTF-8\\\">\\r\\n\" + \n\t\t\t\t\"<title>Insert title here</title>\\r\\n\" + \n\t\t\t\t\"</head>\\r\\n\" + \n\t\t\t\t\"<body>\\r\\n\" + \n\t\t\t\t\"<img src=\\\"cid:image1\\\"/> \"+\n\t\t\t\t\"<img src=\\\"cid:image2\\\"/> \"+\n\t\t\t\t\"\t<font color=\\\"red\\\">\u53d1\u9001html</font>\\r\\n\" + \n\t\t\t\t\"</body>\\r\\n\" + \n\t\t\t\t\"</html>\";\n\t\tList<InlineResource> list = new ArrayList<InlineResource>();\n\t\tString path = MailServiceTest.class.getClassLoader().getResource(\"image.jpg\").getPath();\n\t\t\n\t\tInlineResource resource = new InlineResource(\"image1\",path);\n\t\tInlineResource resource2 = new InlineResource(\"image2\",path);\n\t\t\n\t\tlist.add(resource2);\n\t\tlist.add(resource);\n\t\tmailService.sendInlineResourceMail(\"ljk163wy@163.com\", \"\u5934\u50cf\u56fe\u7247\", html,list);\n\t\t//mailService.sendInlineResourceMail(\"******@163.com\", \"\u8fd9\u662f\u4e00\u4e2a\u6d4b\u8bd5\u90ae\u4ef6\", html,list);\n\t}", "signature": "void sendInlineResourceMail()", "full_signature": "@Test public void sendInlineResourceMail()", "class_method_signature": "MailServiceTest.sendInlineResourceMail()", "testcase": true, "constructor": false, "invocations": ["getPath", "getResource", "getClassLoader", "add", "add", "sendInlineResourceMail"]}, "focal_class": {"identifier": "MailService", "superclass": "", "interfaces": "", "fields": [{"original_string": "private final Logger logger = LoggerFactory.getLogger(this.getClass());", "modifier": "private final", "type": "Logger", "declarator": "logger = LoggerFactory.getLogger(this.getClass())", "var_name": "logger"}, {"original_string": "@Autowired\n\tprivate JavaMailSender sender;", "modifier": "@Autowired\n\tprivate", "type": "JavaMailSender", "declarator": "sender", "var_name": "sender"}, {"original_string": "@Value(\"${spring.mail.username}\")\n\tprivate String formMail;", "modifier": "@Value(\"${spring.mail.username}\")\n\tprivate", "type": "String", "declarator": "formMail", "var_name": "formMail"}], "methods": [{"identifier": "sendSimpleMail", "parameters": "(String toMail,String subject,String content)", "modifiers": "public", "return": "void", "signature": "void sendSimpleMail(String toMail,String subject,String content)", "full_signature": "public void sendSimpleMail(String toMail,String subject,String content)", "class_method_signature": "MailService.sendSimpleMail(String toMail,String subject,String content)", "testcase": false, "constructor": false}, {"identifier": "sendHtmlMail", "parameters": "(String toMail,String subject,String content)", "modifiers": "public", "return": "void", "signature": "void sendHtmlMail(String toMail,String subject,String content)", "full_signature": "public void sendHtmlMail(String toMail,String subject,String content)", "class_method_signature": "MailService.sendHtmlMail(String toMail,String subject,String content)", "testcase": false, "constructor": false}, {"identifier": "sendInlineResourceMail", "parameters": "(String toMail,String subject,String content,List<InlineResource> resourceist)", "modifiers": "public", "return": "void", "signature": "void sendInlineResourceMail(String toMail,String subject,String content,List<InlineResource> resourceist)", "full_signature": "public void sendInlineResourceMail(String toMail,String subject,String content,List<InlineResource> resourceist)", "class_method_signature": "MailService.sendInlineResourceMail(String toMail,String subject,String content,List<InlineResource> resourceist)", "testcase": false, "constructor": false}, {"identifier": "sendInlineResourceMailForGroupSending", "parameters": "(String[] toMail,String subject,String content,List<InlineResource> resourceist)", "modifiers": "public", "return": "void", "signature": "void sendInlineResourceMailForGroupSending(String[] toMail,String subject,String content,List<InlineResource> resourceist)", "full_signature": "public void sendInlineResourceMailForGroupSending(String[] toMail,String subject,String content,List<InlineResource> resourceist)", "class_method_signature": "MailService.sendInlineResourceMailForGroupSending(String[] toMail,String subject,String content,List<InlineResource> resourceist)", "testcase": false, "constructor": false}, {"identifier": "sendAttachmentsMail", "parameters": "(String toMail,String subject,String content,String filePath)", "modifiers": "public", "return": "void", "signature": "void sendAttachmentsMail(String toMail,String subject,String content,String filePath)", "full_signature": "public void sendAttachmentsMail(String toMail,String subject,String content,String filePath)", "class_method_signature": "MailService.sendAttachmentsMail(String toMail,String subject,String content,String filePath)", "testcase": false, "constructor": false}], "file": "spring-boot-2.x_mail/src/main/java/cn/lijunkui/mail/MailService.java"}, "focal_method": {"identifier": "sendInlineResourceMail", "parameters": "(String toMail,String subject,String content,List<InlineResource> resourceist)", "modifiers": "public", "return": "void", "body": "public void sendInlineResourceMail(String toMail,String subject,String content,List<InlineResource> resourceist) {\n\t\tMimeMessage message = sender.createMimeMessage();\n\t\ttry {\n\t\t\tMimeMessageHelper helper = new MimeMessageHelper(message, true);\n\t\t\thelper.setFrom(formMail);\n\t\t\thelper.setCc(formMail);// \u90ae\u4ef6\u6284\u9001\u7ed9\u81ea\u5df1\u9632\u6b62\u53d1\u9001\u4e0d\u6210\u529f\uff01com.sun.mail.smtp.SMTPSendFailedException: 554 DT:SPM 126 smtp9\n\t\t\thelper.setTo(toMail);\n\t\t\thelper.setSubject(subject);\n\t\t\thelper.setText(content, true);\n\t\t\tfor (InlineResource inlineResource : resourceist) {\n\t\t\t\tFileSystemResource res = new FileSystemResource(new File(inlineResource.getPath()));\n\t\t\t\thelper.addInline(inlineResource.getCid(),res);\n\t\t\t}\n\t\t\tsender.send(message);\n\t\t\tlogger.info(\"\u5d4c\u5165\u9759\u6001\u8d44\u6e90\u7684\u90ae\u4ef6\u5df2\u7ecf\u53d1\u9001\u3002\");\n\t\t} catch (MessagingException e) {\n\t\t\tlogger.error(\"\u53d1\u9001\u5d4c\u5165\u9759\u6001\u8d44\u6e90\u7684\u90ae\u4ef6\u65f6\u53d1\u751f\u5f02\u5e38\uff01\", e);\n\t\t\te.printStackTrace();\n\t\t}catch (Exception e) {\n\t\t\tlogger.error(\"\u53d1\u9001\u5d4c\u5165\u9759\u6001\u8d44\u6e90\u7684\u90ae\u4ef6\u65f6\u53d1\u751f\u5f02\u5e38\uff01\", e);\n\t\t\te.printStackTrace();\n\t\t}\n\t}", "signature": "void sendInlineResourceMail(String toMail,String subject,String content,List<InlineResource> resourceist)", "full_signature": "public void sendInlineResourceMail(String toMail,String subject,String content,List<InlineResource> resourceist)", "class_method_signature": "MailService.sendInlineResourceMail(String toMail,String subject,String content,List<InlineResource> resourceist)", "testcase": false, "constructor": false, "invocations": ["createMimeMessage", "setFrom", "setCc", "setTo", "setSubject", "setText", "getPath", "addInline", "getCid", "send", "info", "error", "printStackTrace", "error", "printStackTrace"]}, "repository": {"repo_id": 157791342, "url": "https://github.com/zhuoqianmingyue/springbootexamples", "language": "Java", "is_fork": false, "fork_count": 83, "stargazer_count": 140, "size": 1587, "license": "licensed"}}