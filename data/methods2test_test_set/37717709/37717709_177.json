{"test_class": {"identifier": "TestSrgsXmlOptionConverter", "superclass": "", "interfaces": "", "fields": [], "file": "org.jvoicexml/src/test/java/org/jvoicexml/interpreter/formitem/TestSrgsXmlOptionConverter.java"}, "test_case": {"identifier": "testCreateDtmfGrammar", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testCreateDtmfGrammar() throws Exception  {\n        final VoiceXmlDocument document = new VoiceXmlDocument();\n        final Vxml vxml = document.getVxml();\n        final Form form = vxml.appendChild(Form.class);\n        final Field field = form.appendChild(Field.class);\n        final Option option1 = field.appendChild(Option.class);\n        option1.addText(\"one\");\n        option1.setDtmf(\"1\");\n        final Option option2 = field.appendChild(Option.class);\n        option2.addText(\"two\");\n        final Option option3 = field.appendChild(Option.class);\n        option3.addText(\"three\");\n        option3.setDtmf(\"3\");\n        final Collection<Option> options = field.getChildNodes(Option.class);\n        final OptionConverter converter = new SrgsXmlOptionConverter();\n        final Grammar grammar = converter.createDtmfGrammar(options);\n        final Rule rule = grammar.getRootRule();\n        Assert.assertNotNull(rule);\n        final OneOf oneof = rule.getChildNodes(OneOf.class).iterator().next();\n        Assert.assertNotNull(oneof);\n        final Collection<Item> items = oneof.getChildNodes(Item.class);\n        Assert.assertEquals(2, items.size());\n        final Iterator<Item> iterator = items.iterator();\n        final Item item1 = iterator.next();\n        Assert.assertEquals(option1.getDtmf(), item1.getTextContent());\n        final Item item3 = iterator.next();\n        Assert.assertEquals(option3.getDtmf(), item3.getTextContent());\n    }", "signature": "void testCreateDtmfGrammar()", "full_signature": "@Test public void testCreateDtmfGrammar()", "class_method_signature": "TestSrgsXmlOptionConverter.testCreateDtmfGrammar()", "testcase": true, "constructor": false, "invocations": ["getVxml", "appendChild", "appendChild", "appendChild", "addText", "setDtmf", "appendChild", "addText", "appendChild", "addText", "setDtmf", "getChildNodes", "createDtmfGrammar", "getRootRule", "assertNotNull", "next", "iterator", "getChildNodes", "assertNotNull", "getChildNodes", "assertEquals", "size", "iterator", "next", "assertEquals", "getDtmf", "getTextContent", "next", "assertEquals", "getDtmf", "getTextContent"]}, "focal_class": {"identifier": "SrgsXmlOptionConverter", "superclass": "", "interfaces": "implements OptionConverter", "fields": [{"original_string": "private static final Logger LOGGER =\n            LogManager.getLogger(SrgsXmlOptionConverter.class);", "modifier": "private static final", "type": "Logger", "declarator": "LOGGER =\n            LogManager.getLogger(SrgsXmlOptionConverter.class)", "var_name": "LOGGER"}, {"original_string": "private static long sequence = 0;", "modifier": "private static", "type": "long", "declarator": "sequence = 0", "var_name": "sequence"}], "methods": [{"identifier": "getName", "parameters": "(final ModeType type)", "modifiers": "private static synchronized", "return": "String", "signature": "String getName(final ModeType type)", "full_signature": "private static synchronized String getName(final ModeType type)", "class_method_signature": "SrgsXmlOptionConverter.getName(final ModeType type)", "testcase": false, "constructor": false}, {"identifier": "createVoiceGrammar", "parameters": "(final Collection<Option> options,\n            final Locale language)", "modifiers": "@Override public", "return": "Grammar", "signature": "Grammar createVoiceGrammar(final Collection<Option> options,\n            final Locale language)", "full_signature": "@Override public Grammar createVoiceGrammar(final Collection<Option> options,\n            final Locale language)", "class_method_signature": "SrgsXmlOptionConverter.createVoiceGrammar(final Collection<Option> options,\n            final Locale language)", "testcase": false, "constructor": false}, {"identifier": "createDtmfGrammar", "parameters": "(final Collection<Option> options)", "modifiers": "@Override public", "return": "Grammar", "signature": "Grammar createDtmfGrammar(final Collection<Option> options)", "full_signature": "@Override public Grammar createDtmfGrammar(final Collection<Option> options)", "class_method_signature": "SrgsXmlOptionConverter.createDtmfGrammar(final Collection<Option> options)", "testcase": false, "constructor": false}], "file": "org.jvoicexml/src/main/java/org/jvoicexml/interpreter/formitem/SrgsXmlOptionConverter.java"}, "focal_method": {"identifier": "createDtmfGrammar", "parameters": "(final Collection<Option> options)", "modifiers": "@Override public", "return": "Grammar", "body": "@Override\n    public Grammar createDtmfGrammar(final Collection<Option> options) {\n        if ((options == null) || options.isEmpty()) {\n            return null;\n        }\n        try {\n            final SrgsXmlDocument document = new SrgsXmlDocument();\n            final Grammar grammar = document.getGrammar();\n            grammar.setType(GrammarType.SRGS_XML);\n            final Rule rule = grammar.appendChild(Rule.class);\n            final String name = getName(ModeType.DTMF);\n            rule.setId(name);\n            grammar.setRoot(rule);\n            final OneOf oneof = rule.appendChild(OneOf.class);\n            boolean hasDtmf = false;\n            for (Option option : options) {\n                final String dtmf = option.getDtmf();\n                if (dtmf != null) {\n                    final Item item = oneof.appendChild(Item.class);\n                    item.addText(dtmf);\n                    hasDtmf = true;\n                }\n            }\n            if (hasDtmf) {\n                return grammar;\n            } else {\n                return null;\n            }\n        } catch (ParserConfigurationException e) {\n            LOGGER.warn(e.getMessage(), e);\n            return null;\n        }\n    }", "signature": "Grammar createDtmfGrammar(final Collection<Option> options)", "full_signature": "@Override public Grammar createDtmfGrammar(final Collection<Option> options)", "class_method_signature": "SrgsXmlOptionConverter.createDtmfGrammar(final Collection<Option> options)", "testcase": false, "constructor": false, "invocations": ["isEmpty", "getGrammar", "setType", "appendChild", "getName", "setId", "setRoot", "appendChild", "getDtmf", "appendChild", "addText", "warn", "getMessage"]}, "repository": {"repo_id": 37717709, "url": "https://github.com/JVoiceXML/JVoiceXML", "language": "Java", "is_fork": false, "fork_count": 32, "stargazer_count": 50, "size": 436089, "license": "licensed"}}