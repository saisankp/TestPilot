{"test_class": {"identifier": "DataSetDefRegistryCDITest", "superclass": "extends BaseCDITest", "interfaces": "", "fields": [{"original_string": "@Mock\n    DataSetProviderRegistryCDI dataSetProviderRegistry;", "modifier": "@Mock", "type": "DataSetProviderRegistryCDI", "declarator": "dataSetProviderRegistry", "var_name": "dataSetProviderRegistry"}, {"original_string": "@Mock\n    SchedulerCDI scheduler;", "modifier": "@Mock", "type": "SchedulerCDI", "declarator": "scheduler", "var_name": "scheduler"}, {"original_string": "@Mock\n    ExceptionManager exceptionManager;", "modifier": "@Mock", "type": "ExceptionManager", "declarator": "exceptionManager", "var_name": "exceptionManager"}, {"original_string": "@Mock\n    Event<DataSetDefModifiedEvent> dataSetDefModifiedEvent;", "modifier": "@Mock", "type": "Event<DataSetDefModifiedEvent>", "declarator": "dataSetDefModifiedEvent", "var_name": "dataSetDefModifiedEvent"}, {"original_string": "@Mock\n    Event<DataSetDefRegisteredEvent> dataSetDefRegisteredEvent;", "modifier": "@Mock", "type": "Event<DataSetDefRegisteredEvent>", "declarator": "dataSetDefRegisteredEvent", "var_name": "dataSetDefRegisteredEvent"}, {"original_string": "@Mock\n    Event<DataSetDefRemovedEvent> dataSetDefRemovedEvent;", "modifier": "@Mock", "type": "Event<DataSetDefRemovedEvent>", "declarator": "dataSetDefRemovedEvent", "var_name": "dataSetDefRemovedEvent"}, {"original_string": "@Mock\n    Event<DataSetStaleEvent> dataSetStaleEvent;", "modifier": "@Mock", "type": "Event<DataSetStaleEvent>", "declarator": "dataSetStaleEvent", "var_name": "dataSetStaleEvent"}, {"original_string": "DataSetDefRegistryCDI dataSetDefRegistry;", "modifier": "", "type": "DataSetDefRegistryCDI", "declarator": "dataSetDefRegistry", "var_name": "dataSetDefRegistry"}, {"original_string": "public DataSetDef dataSetDef = DataSetDefFactory\n            .newCSVDataSetDef()\n            .uuid(\"testDset\")\n            .buildDef();", "modifier": "public", "type": "DataSetDef", "declarator": "dataSetDef = DataSetDefFactory\n            .newCSVDataSetDef()\n            .uuid(\"testDset\")\n            .buildDef()", "var_name": "dataSetDef"}], "file": "dashbuilder-backend/dashbuilder-dataset-cdi/src/test/java/org/dashbuilder/dataset/DataSetDefRegistryCDITest.java"}, "test_case": {"identifier": "testRegistryDataSetDef", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testRegistryDataSetDef() throws Exception {\n        dataSetDefRegistry.registerDataSetDef(dataSetDef);\n\n        verify(getIOService()).write(any(Path.class), anyString());\n        verify(dataSetDefRegisteredEvent).fire(any(DataSetDefRegisteredEvent.class));\n    }", "signature": "void testRegistryDataSetDef()", "full_signature": "@Test public void testRegistryDataSetDef()", "class_method_signature": "DataSetDefRegistryCDITest.testRegistryDataSetDef()", "testcase": true, "constructor": false, "invocations": ["registerDataSetDef", "write", "verify", "getIOService", "any", "anyString", "fire", "verify", "any"]}, "focal_class": {"identifier": "DataSetDefRegistryCDI", "superclass": "extends DataSetDefRegistryImpl", "interfaces": "implements CSVFileStorage", "fields": [{"original_string": "public static final String DATASET_EXT = \".dset\";", "modifier": "public static final", "type": "String", "declarator": "DATASET_EXT = \".dset\"", "var_name": "DATASET_EXT"}, {"original_string": "public static final String CSV_EXT = \".csv\";", "modifier": "public static final", "type": "String", "declarator": "CSV_EXT = \".csv\"", "var_name": "CSV_EXT"}, {"original_string": "protected int maxCsvLength;", "modifier": "protected", "type": "int", "declarator": "maxCsvLength", "var_name": "maxCsvLength"}, {"original_string": "protected IOService ioService;", "modifier": "protected", "type": "IOService", "declarator": "ioService", "var_name": "ioService"}, {"original_string": "protected ExceptionManager exceptionManager;", "modifier": "protected", "type": "ExceptionManager", "declarator": "exceptionManager", "var_name": "exceptionManager"}, {"original_string": "protected UUIDGenerator uuidGenerator;", "modifier": "protected", "type": "UUIDGenerator", "declarator": "uuidGenerator", "var_name": "uuidGenerator"}, {"original_string": "protected Event<DataSetDefModifiedEvent> dataSetDefModifiedEvent;", "modifier": "protected", "type": "Event<DataSetDefModifiedEvent>", "declarator": "dataSetDefModifiedEvent", "var_name": "dataSetDefModifiedEvent"}, {"original_string": "protected Event<DataSetDefRegisteredEvent> dataSetDefRegisteredEvent;", "modifier": "protected", "type": "Event<DataSetDefRegisteredEvent>", "declarator": "dataSetDefRegisteredEvent", "var_name": "dataSetDefRegisteredEvent"}, {"original_string": "protected Event<DataSetDefRemovedEvent> dataSetDefRemovedEvent;", "modifier": "protected", "type": "Event<DataSetDefRemovedEvent>", "declarator": "dataSetDefRemovedEvent", "var_name": "dataSetDefRemovedEvent"}, {"original_string": "protected Event<DataSetStaleEvent> dataSetStaleEvent;", "modifier": "protected", "type": "Event<DataSetStaleEvent>", "declarator": "dataSetStaleEvent", "var_name": "dataSetStaleEvent"}, {"original_string": "protected FileSystem fileSystem;", "modifier": "protected", "type": "FileSystem", "declarator": "fileSystem", "var_name": "fileSystem"}, {"original_string": "protected Path root;", "modifier": "protected", "type": "Path", "declarator": "root", "var_name": "root"}], "methods": [{"identifier": "DataSetDefRegistryCDI", "parameters": "()", "modifiers": "public", "return": "", "signature": " DataSetDefRegistryCDI()", "full_signature": "public  DataSetDefRegistryCDI()", "class_method_signature": "DataSetDefRegistryCDI.DataSetDefRegistryCDI()", "testcase": false, "constructor": true}, {"identifier": "DataSetDefRegistryCDI", "parameters": "(@Config(\"10485760\" /* 10 Mb */) int maxCsvLength,\n                                 @Named(\"ioStrategy\") IOService ioService,\n                                 DataSetProviderRegistryCDI dataSetProviderRegistry,\n                                 SchedulerCDI scheduler,\n                                 ExceptionManager exceptionManager,\n                                 Event<DataSetDefModifiedEvent> dataSetDefModifiedEvent,\n                                 Event<DataSetDefRegisteredEvent> dataSetDefRegisteredEvent,\n                                 Event<DataSetDefRemovedEvent> dataSetDefRemovedEvent,\n                                 Event<DataSetStaleEvent> dataSetStaleEvent)", "modifiers": "@Inject public", "return": "", "signature": " DataSetDefRegistryCDI(@Config(\"10485760\" /* 10 Mb */) int maxCsvLength,\n                                 @Named(\"ioStrategy\") IOService ioService,\n                                 DataSetProviderRegistryCDI dataSetProviderRegistry,\n                                 SchedulerCDI scheduler,\n                                 ExceptionManager exceptionManager,\n                                 Event<DataSetDefModifiedEvent> dataSetDefModifiedEvent,\n                                 Event<DataSetDefRegisteredEvent> dataSetDefRegisteredEvent,\n                                 Event<DataSetDefRemovedEvent> dataSetDefRemovedEvent,\n                                 Event<DataSetStaleEvent> dataSetStaleEvent)", "full_signature": "@Inject public  DataSetDefRegistryCDI(@Config(\"10485760\" /* 10 Mb */) int maxCsvLength,\n                                 @Named(\"ioStrategy\") IOService ioService,\n                                 DataSetProviderRegistryCDI dataSetProviderRegistry,\n                                 SchedulerCDI scheduler,\n                                 ExceptionManager exceptionManager,\n                                 Event<DataSetDefModifiedEvent> dataSetDefModifiedEvent,\n                                 Event<DataSetDefRegisteredEvent> dataSetDefRegisteredEvent,\n                                 Event<DataSetDefRemovedEvent> dataSetDefRemovedEvent,\n                                 Event<DataSetStaleEvent> dataSetStaleEvent)", "class_method_signature": "DataSetDefRegistryCDI.DataSetDefRegistryCDI(@Config(\"10485760\" /* 10 Mb */) int maxCsvLength,\n                                 @Named(\"ioStrategy\") IOService ioService,\n                                 DataSetProviderRegistryCDI dataSetProviderRegistry,\n                                 SchedulerCDI scheduler,\n                                 ExceptionManager exceptionManager,\n                                 Event<DataSetDefModifiedEvent> dataSetDefModifiedEvent,\n                                 Event<DataSetDefRegisteredEvent> dataSetDefRegisteredEvent,\n                                 Event<DataSetDefRemovedEvent> dataSetDefRemovedEvent,\n                                 Event<DataSetStaleEvent> dataSetStaleEvent)", "testcase": false, "constructor": true}, {"identifier": "init", "parameters": "()", "modifiers": "@PostConstruct public", "return": "void", "signature": "void init()", "full_signature": "@PostConstruct public void init()", "class_method_signature": "DataSetDefRegistryCDI.init()", "testcase": false, "constructor": false}, {"identifier": "getDataSetDefJsonMarshaller", "parameters": "()", "modifiers": "public", "return": "DataSetDefJSONMarshaller", "signature": "DataSetDefJSONMarshaller getDataSetDefJsonMarshaller()", "full_signature": "public DataSetDefJSONMarshaller getDataSetDefJsonMarshaller()", "class_method_signature": "DataSetDefRegistryCDI.getDataSetDefJsonMarshaller()", "testcase": false, "constructor": false}, {"identifier": "onDataSetDefStale", "parameters": "(DataSetDef def)", "modifiers": "protected", "return": "void", "signature": "void onDataSetDefStale(DataSetDef def)", "full_signature": "protected void onDataSetDefStale(DataSetDef def)", "class_method_signature": "DataSetDefRegistryCDI.onDataSetDefStale(DataSetDef def)", "testcase": false, "constructor": false}, {"identifier": "onDataSetDefModified", "parameters": "(DataSetDef olDef,\n                                        DataSetDef newDef)", "modifiers": "protected", "return": "void", "signature": "void onDataSetDefModified(DataSetDef olDef,\n                                        DataSetDef newDef)", "full_signature": "protected void onDataSetDefModified(DataSetDef olDef,\n                                        DataSetDef newDef)", "class_method_signature": "DataSetDefRegistryCDI.onDataSetDefModified(DataSetDef olDef,\n                                        DataSetDef newDef)", "testcase": false, "constructor": false}, {"identifier": "onDataSetDefRegistered", "parameters": "(DataSetDef newDef)", "modifiers": "protected", "return": "void", "signature": "void onDataSetDefRegistered(DataSetDef newDef)", "full_signature": "protected void onDataSetDefRegistered(DataSetDef newDef)", "class_method_signature": "DataSetDefRegistryCDI.onDataSetDefRegistered(DataSetDef newDef)", "testcase": false, "constructor": false}, {"identifier": "onDataSetDefRemoved", "parameters": "(DataSetDef oldDef)", "modifiers": "protected", "return": "void", "signature": "void onDataSetDefRemoved(DataSetDef oldDef)", "full_signature": "protected void onDataSetDefRemoved(DataSetDef oldDef)", "class_method_signature": "DataSetDefRegistryCDI.onDataSetDefRemoved(DataSetDef oldDef)", "testcase": false, "constructor": false}, {"identifier": "initFileSystem", "parameters": "()", "modifiers": "protected", "return": "void", "signature": "void initFileSystem()", "full_signature": "protected void initFileSystem()", "class_method_signature": "DataSetDefRegistryCDI.initFileSystem()", "testcase": false, "constructor": false}, {"identifier": "registerDataSetDefs", "parameters": "()", "modifiers": "protected", "return": "void", "signature": "void registerDataSetDefs()", "full_signature": "protected void registerDataSetDefs()", "class_method_signature": "DataSetDefRegistryCDI.registerDataSetDefs()", "testcase": false, "constructor": false}, {"identifier": "resolveVfsPath", "parameters": "(DataSetDef def)", "modifiers": "public", "return": "org.uberfire.backend.vfs.Path", "signature": "org.uberfire.backend.vfs.Path resolveVfsPath(DataSetDef def)", "full_signature": "public org.uberfire.backend.vfs.Path resolveVfsPath(DataSetDef def)", "class_method_signature": "DataSetDefRegistryCDI.resolveVfsPath(DataSetDef def)", "testcase": false, "constructor": false}, {"identifier": "resolveNioPath", "parameters": "(DataSetDef def)", "modifiers": "protected", "return": "Path", "signature": "Path resolveNioPath(DataSetDef def)", "full_signature": "protected Path resolveNioPath(DataSetDef def)", "class_method_signature": "DataSetDefRegistryCDI.resolveNioPath(DataSetDef def)", "testcase": false, "constructor": false}, {"identifier": "registerDataSetDef", "parameters": "(DataSetDef def,\n                                   String subjectId,\n                                   String message)", "modifiers": "@Override public", "return": "void", "signature": "void registerDataSetDef(DataSetDef def,\n                                   String subjectId,\n                                   String message)", "full_signature": "@Override public void registerDataSetDef(DataSetDef def,\n                                   String subjectId,\n                                   String message)", "class_method_signature": "DataSetDefRegistryCDI.registerDataSetDef(DataSetDef def,\n                                   String subjectId,\n                                   String message)", "testcase": false, "constructor": false}, {"identifier": "removeDataSetDef", "parameters": "(String uuid,\n                                       String subjectId,\n                                       String message)", "modifiers": "@Override public", "return": "DataSetDef", "signature": "DataSetDef removeDataSetDef(String uuid,\n                                       String subjectId,\n                                       String message)", "full_signature": "@Override public DataSetDef removeDataSetDef(String uuid,\n                                       String subjectId,\n                                       String message)", "class_method_signature": "DataSetDefRegistryCDI.removeDataSetDef(String uuid,\n                                       String subjectId,\n                                       String message)", "testcase": false, "constructor": false}, {"identifier": "removeDataSetDef", "parameters": "(org.uberfire.backend.vfs.Path path,\n                                 String subjectId,\n                                 String comment)", "modifiers": "public", "return": "void", "signature": "void removeDataSetDef(org.uberfire.backend.vfs.Path path,\n                                 String subjectId,\n                                 String comment)", "full_signature": "public void removeDataSetDef(org.uberfire.backend.vfs.Path path,\n                                 String subjectId,\n                                 String comment)", "class_method_signature": "DataSetDefRegistryCDI.removeDataSetDef(org.uberfire.backend.vfs.Path path,\n                                 String subjectId,\n                                 String comment)", "testcase": false, "constructor": false}, {"identifier": "removeDataSetDef", "parameters": "(DataSetDef def,\n                                       String subjectId,\n                                       String message)", "modifiers": "public", "return": "DataSetDef", "signature": "DataSetDef removeDataSetDef(DataSetDef def,\n                                       String subjectId,\n                                       String message)", "full_signature": "public DataSetDef removeDataSetDef(DataSetDef def,\n                                       String subjectId,\n                                       String message)", "class_method_signature": "DataSetDefRegistryCDI.removeDataSetDef(DataSetDef def,\n                                       String subjectId,\n                                       String message)", "testcase": false, "constructor": false}, {"identifier": "listDataSetDefs", "parameters": "()", "modifiers": "public", "return": "Collection<DataSetDef>", "signature": "Collection<DataSetDef> listDataSetDefs()", "full_signature": "public Collection<DataSetDef> listDataSetDefs()", "class_method_signature": "DataSetDefRegistryCDI.listDataSetDefs()", "testcase": false, "constructor": false}, {"identifier": "loadDataSetDef", "parameters": "(org.uberfire.backend.vfs.Path path)", "modifiers": "public", "return": "DataSetDef", "signature": "DataSetDef loadDataSetDef(org.uberfire.backend.vfs.Path path)", "full_signature": "public DataSetDef loadDataSetDef(org.uberfire.backend.vfs.Path path)", "class_method_signature": "DataSetDefRegistryCDI.loadDataSetDef(org.uberfire.backend.vfs.Path path)", "testcase": false, "constructor": false}, {"identifier": "copyDataSetDef", "parameters": "(DataSetDef def,\n                                     String newName,\n                                     String subjectId,\n                                     String message)", "modifiers": "public", "return": "DataSetDef", "signature": "DataSetDef copyDataSetDef(DataSetDef def,\n                                     String newName,\n                                     String subjectId,\n                                     String message)", "full_signature": "public DataSetDef copyDataSetDef(DataSetDef def,\n                                     String newName,\n                                     String subjectId,\n                                     String message)", "class_method_signature": "DataSetDefRegistryCDI.copyDataSetDef(DataSetDef def,\n                                     String newName,\n                                     String subjectId,\n                                     String message)", "testcase": false, "constructor": false}, {"identifier": "createTempFile", "parameters": "(String fileName)", "modifiers": "public", "return": "Path", "signature": "Path createTempFile(String fileName)", "full_signature": "public Path createTempFile(String fileName)", "class_method_signature": "DataSetDefRegistryCDI.createTempFile(String fileName)", "testcase": false, "constructor": false}, {"identifier": "deleteTempFiles", "parameters": "()", "modifiers": "public", "return": "void", "signature": "void deleteTempFiles()", "full_signature": "public void deleteTempFiles()", "class_method_signature": "DataSetDefRegistryCDI.deleteTempFiles()", "testcase": false, "constructor": false}, {"identifier": "getDataSetsPath", "parameters": "()", "modifiers": "protected", "return": "Path", "signature": "Path getDataSetsPath()", "full_signature": "protected Path getDataSetsPath()", "class_method_signature": "DataSetDefRegistryCDI.getDataSetsPath()", "testcase": false, "constructor": false}, {"identifier": "getTempPath", "parameters": "()", "modifiers": "protected", "return": "Path", "signature": "Path getTempPath()", "full_signature": "protected Path getTempPath()", "class_method_signature": "DataSetDefRegistryCDI.getTempPath()", "testcase": false, "constructor": false}, {"identifier": "resolveTempPath", "parameters": "(String fileName)", "modifiers": "protected", "return": "Path", "signature": "Path resolveTempPath(String fileName)", "full_signature": "protected Path resolveTempPath(String fileName)", "class_method_signature": "DataSetDefRegistryCDI.resolveTempPath(String fileName)", "testcase": false, "constructor": false}, {"identifier": "convert", "parameters": "(Path path)", "modifiers": "protected", "return": "org.uberfire.backend.vfs.Path", "signature": "org.uberfire.backend.vfs.Path convert(Path path)", "full_signature": "protected org.uberfire.backend.vfs.Path convert(Path path)", "class_method_signature": "DataSetDefRegistryCDI.convert(Path path)", "testcase": false, "constructor": false}, {"identifier": "convert", "parameters": "(org.uberfire.backend.vfs.Path path)", "modifiers": "protected", "return": "Path", "signature": "Path convert(org.uberfire.backend.vfs.Path path)", "full_signature": "protected Path convert(org.uberfire.backend.vfs.Path path)", "class_method_signature": "DataSetDefRegistryCDI.convert(org.uberfire.backend.vfs.Path path)", "testcase": false, "constructor": false}, {"identifier": "getCSVString", "parameters": "(CSVDataSetDef def)", "modifiers": "@Override public", "return": "String", "signature": "String getCSVString(CSVDataSetDef def)", "full_signature": "@Override public String getCSVString(CSVDataSetDef def)", "class_method_signature": "DataSetDefRegistryCDI.getCSVString(CSVDataSetDef def)", "testcase": false, "constructor": false}, {"identifier": "getCSVInputStream", "parameters": "(CSVDataSetDef def)", "modifiers": "@Override public", "return": "InputStream", "signature": "InputStream getCSVInputStream(CSVDataSetDef def)", "full_signature": "@Override public InputStream getCSVInputStream(CSVDataSetDef def)", "class_method_signature": "DataSetDefRegistryCDI.getCSVInputStream(CSVDataSetDef def)", "testcase": false, "constructor": false}, {"identifier": "deleteCSVFile", "parameters": "(CSVDataSetDef def)", "modifiers": "@Override public", "return": "void", "signature": "void deleteCSVFile(CSVDataSetDef def)", "full_signature": "@Override public void deleteCSVFile(CSVDataSetDef def)", "class_method_signature": "DataSetDefRegistryCDI.deleteCSVFile(CSVDataSetDef def)", "testcase": false, "constructor": false}, {"identifier": "saveCSVFile", "parameters": "(CSVDataSetDef def)", "modifiers": "@Override public", "return": "void", "signature": "void saveCSVFile(CSVDataSetDef def)", "full_signature": "@Override public void saveCSVFile(CSVDataSetDef def)", "class_method_signature": "DataSetDefRegistryCDI.saveCSVFile(CSVDataSetDef def)", "testcase": false, "constructor": false}, {"identifier": "resolveCsvPath", "parameters": "(CSVDataSetDef def)", "modifiers": "protected", "return": "Path", "signature": "Path resolveCsvPath(CSVDataSetDef def)", "full_signature": "protected Path resolveCsvPath(CSVDataSetDef def)", "class_method_signature": "DataSetDefRegistryCDI.resolveCsvPath(CSVDataSetDef def)", "testcase": false, "constructor": false}, {"identifier": "resolveCsvTempPath", "parameters": "(CSVDataSetDef def)", "modifiers": "protected", "return": "Path", "signature": "Path resolveCsvTempPath(CSVDataSetDef def)", "full_signature": "protected Path resolveCsvTempPath(CSVDataSetDef def)", "class_method_signature": "DataSetDefRegistryCDI.resolveCsvTempPath(CSVDataSetDef def)", "testcase": false, "constructor": false}], "file": "dashbuilder-backend/dashbuilder-dataset-cdi/src/main/java/org/dashbuilder/dataset/DataSetDefRegistryCDI.java"}, "focal_method": {"identifier": "registerDataSetDef", "parameters": "(DataSetDef def,\n                                   String subjectId,\n                                   String message)", "modifiers": "@Override public", "return": "void", "body": "@Override\n    public void registerDataSetDef(DataSetDef def,\n                                   String subjectId,\n                                   String message) {\n\n        if (def.getUUID() == null) {\n            final String uuid = uuidGenerator.newUuid();\n            def.setUUID(uuid);\n        }\n\n        if (subjectId == null || message == null) {\n            ioService.startBatch(fileSystem);\n        } else {\n            ioService.startBatch(fileSystem,\n                                 new CommentedOption(subjectId,\n                                                     message));\n        }\n\n        try {\n            String defJson = getDataSetDefJsonMarshaller().toJsonString(def);\n            Path defPath = resolveNioPath(def);\n            ioService.write(defPath,\n                            defJson);\n\n            // CSV specific\n            if (def instanceof CSVDataSetDef) {\n                saveCSVFile((CSVDataSetDef) def);\n            }\n            super.registerDataSetDef(def,\n                                     subjectId,\n                                     message);\n        } catch (Exception e) {\n            throw exceptionManager.handleException(\n                    new Exception(\"Can't register the data set definition\\n\" + def,\n                                  e));\n        } finally {\n            ioService.endBatch();\n        }\n    }", "signature": "void registerDataSetDef(DataSetDef def,\n                                   String subjectId,\n                                   String message)", "full_signature": "@Override public void registerDataSetDef(DataSetDef def,\n                                   String subjectId,\n                                   String message)", "class_method_signature": "DataSetDefRegistryCDI.registerDataSetDef(DataSetDef def,\n                                   String subjectId,\n                                   String message)", "testcase": false, "constructor": false, "invocations": ["getUUID", "newUuid", "setUUID", "startBatch", "startBatch", "toJsonString", "getDataSetDefJsonMarshaller", "resolveNioPath", "write", "saveCSVFile", "registerDataSetDef", "handleException", "endBatch"]}, "repository": {"repo_id": 17898911, "url": "https://github.com/dashbuilder/dashbuilder", "language": "Java", "is_fork": false, "fork_count": 119, "stargazer_count": 160, "size": 10456, "license": "licensed"}}