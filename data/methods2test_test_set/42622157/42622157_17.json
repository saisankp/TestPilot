{"test_class": {"identifier": "EnvironmentTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final File configDirectory = new File(System.getProperty(\"user.home\") + \"/.winery\");", "modifier": "private static final", "type": "File", "declarator": "configDirectory = new File(System.getProperty(\"user.home\") + \"/.winery\")", "var_name": "configDirectory"}, {"original_string": "private static final File configFile = new File(configDirectory + \"/winery.yml\");", "modifier": "private static final", "type": "File", "declarator": "configFile = new File(configDirectory + \"/winery.yml\")", "var_name": "configFile"}], "file": "org.eclipse.winery.common/src/test/java/org/eclipse/winery/common/configuration/EnvironmentTest.java"}, "test_case": {"identifier": "testSave", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testSave() {\n        YAMLConfiguration configuration = Environment.getInstance().getConfiguration();\n        configuration.setProperty(\"ui.features.foo\", false);\n        configuration.setProperty(\"ui.features.bar\", true);\n        configuration.setProperty(\"ui.endpoints.quaz\", \"\");\n        Environment.getInstance().save();\n        Environment.getInstance().setConfiguration(null);\n        configuration = Environment.getInstance().getConfiguration();\n        assertFalse(configuration.getBoolean(\"ui.features.foo\"));\n        assertTrue(configuration.getBoolean(\"ui.features.bar\"));\n        assertEquals(configuration.getString(\"ui.endpoints.quaz\"), \"\");\n    }", "signature": "void testSave()", "full_signature": "@Test public void testSave()", "class_method_signature": "EnvironmentTest.testSave()", "testcase": true, "constructor": false, "invocations": ["getConfiguration", "getInstance", "setProperty", "setProperty", "setProperty", "save", "getInstance", "setConfiguration", "getInstance", "getConfiguration", "getInstance", "assertFalse", "getBoolean", "assertTrue", "getBoolean", "assertEquals", "getString"]}, "focal_class": {"identifier": "Environment", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final Logger LOGGER = LoggerFactory.getLogger(Environment.class);", "modifier": "private static final", "type": "Logger", "declarator": "LOGGER = LoggerFactory.getLogger(Environment.class)", "var_name": "LOGGER"}, {"original_string": "private static final String DEFAULT_CONFIG_NAME = \"winery.yml\";", "modifier": "private static final", "type": "String", "declarator": "DEFAULT_CONFIG_NAME = \"winery.yml\"", "var_name": "DEFAULT_CONFIG_NAME"}, {"original_string": "private static final String TEST_CONFIG_NAME = \"wineryTest.yml\";", "modifier": "private static final", "type": "String", "declarator": "TEST_CONFIG_NAME = \"wineryTest.yml\"", "var_name": "TEST_CONFIG_NAME"}, {"original_string": "private static final File DEFAULT_CONFIG_DIRECTORY = new File(System.getProperty(\"user.home\"), \".winery\");", "modifier": "private static final", "type": "File", "declarator": "DEFAULT_CONFIG_DIRECTORY = new File(System.getProperty(\"user.home\"), \".winery\")", "var_name": "DEFAULT_CONFIG_DIRECTORY"}, {"original_string": "private static final File DEFAULT_CONFIG_FILE = new File(DEFAULT_CONFIG_DIRECTORY, DEFAULT_CONFIG_NAME);", "modifier": "private static final", "type": "File", "declarator": "DEFAULT_CONFIG_FILE = new File(DEFAULT_CONFIG_DIRECTORY, DEFAULT_CONFIG_NAME)", "var_name": "DEFAULT_CONFIG_FILE"}, {"original_string": "private static final File LINUX_CONFIG_FILE = new File(\"/opt/winery/.winery\", DEFAULT_CONFIG_NAME);", "modifier": "private static final", "type": "File", "declarator": "LINUX_CONFIG_FILE = new File(\"/opt/winery/.winery\", DEFAULT_CONFIG_NAME)", "var_name": "LINUX_CONFIG_FILE"}, {"original_string": "private static Environment instance;", "modifier": "private static", "type": "Environment", "declarator": "instance", "var_name": "instance"}, {"original_string": "private File configFile;", "modifier": "private", "type": "File", "declarator": "configFile", "var_name": "configFile"}, {"original_string": "private FileTime lastChange;", "modifier": "private", "type": "FileTime", "declarator": "lastChange", "var_name": "lastChange"}, {"original_string": "private YAMLConfiguration config;", "modifier": "private", "type": "YAMLConfiguration", "declarator": "config", "var_name": "config"}], "methods": [{"identifier": "Environment", "parameters": "()", "modifiers": "private", "return": "", "signature": " Environment()", "full_signature": "private  Environment()", "class_method_signature": "Environment.Environment()", "testcase": false, "constructor": true}, {"identifier": "getInstance", "parameters": "()", "modifiers": "protected static", "return": "Environment", "signature": "Environment getInstance()", "full_signature": "protected static Environment getInstance()", "class_method_signature": "Environment.getInstance()", "testcase": false, "constructor": false}, {"identifier": "getConfigDirectory", "parameters": "()", "modifiers": "public", "return": "File", "signature": "File getConfigDirectory()", "full_signature": "public File getConfigDirectory()", "class_method_signature": "Environment.getConfigDirectory()", "testcase": false, "constructor": false}, {"identifier": "getDefaultConfigInputStream", "parameters": "()", "modifiers": "static", "return": "InputStream", "signature": "InputStream getDefaultConfigInputStream()", "full_signature": "static InputStream getDefaultConfigInputStream()", "class_method_signature": "Environment.getDefaultConfigInputStream()", "testcase": false, "constructor": false}, {"identifier": "getTestConfigInputStream", "parameters": "()", "modifiers": "static", "return": "InputStream", "signature": "InputStream getTestConfigInputStream()", "full_signature": "static InputStream getTestConfigInputStream()", "class_method_signature": "Environment.getTestConfigInputStream()", "testcase": false, "constructor": false}, {"identifier": "getConfiguration", "parameters": "()", "modifiers": "protected", "return": "YAMLConfiguration", "signature": "YAMLConfiguration getConfiguration()", "full_signature": "protected YAMLConfiguration getConfiguration()", "class_method_signature": "Environment.getConfiguration()", "testcase": false, "constructor": false}, {"identifier": "setConfiguration", "parameters": "(YAMLConfiguration configuration)", "modifiers": "protected", "return": "void", "signature": "void setConfiguration(YAMLConfiguration configuration)", "full_signature": "protected void setConfiguration(YAMLConfiguration configuration)", "class_method_signature": "Environment.setConfiguration(YAMLConfiguration configuration)", "testcase": false, "constructor": false}, {"identifier": "checkConfigurationForUpdate", "parameters": "()", "modifiers": "", "return": "boolean", "signature": "boolean checkConfigurationForUpdate()", "full_signature": " boolean checkConfigurationForUpdate()", "class_method_signature": "Environment.checkConfigurationForUpdate()", "testcase": false, "constructor": false}, {"identifier": "getConfigFromFile", "parameters": "()", "modifiers": "private", "return": "void", "signature": "void getConfigFromFile()", "full_signature": "private void getConfigFromFile()", "class_method_signature": "Environment.getConfigFromFile()", "testcase": false, "constructor": false}, {"identifier": "copyDefaultConfigFile", "parameters": "()", "modifiers": "private", "return": "void", "signature": "void copyDefaultConfigFile()", "full_signature": "private void copyDefaultConfigFile()", "class_method_signature": "Environment.copyDefaultConfigFile()", "testcase": false, "constructor": false}, {"identifier": "reloadAccountabilityConfiguration", "parameters": "(InputStream defaultConfigInputStream)", "modifiers": "", "return": "void", "signature": "void reloadAccountabilityConfiguration(InputStream defaultConfigInputStream)", "full_signature": " void reloadAccountabilityConfiguration(InputStream defaultConfigInputStream)", "class_method_signature": "Environment.reloadAccountabilityConfiguration(InputStream defaultConfigInputStream)", "testcase": false, "constructor": false}, {"identifier": "save", "parameters": "()", "modifiers": "protected", "return": "void", "signature": "void save()", "full_signature": "protected void save()", "class_method_signature": "Environment.save()", "testcase": false, "constructor": false}, {"identifier": "updateConfig", "parameters": "()", "modifiers": "", "return": "void", "signature": "void updateConfig()", "full_signature": " void updateConfig()", "class_method_signature": "Environment.updateConfig()", "testcase": false, "constructor": false}], "file": "org.eclipse.winery.common/src/main/java/org/eclipse/winery/common/configuration/Environment.java"}, "focal_method": {"identifier": "save", "parameters": "()", "modifiers": "protected", "return": "void", "body": "protected void save() {\n        if (configFile != null) {\n            try (FileWriter writer = new FileWriter(configFile)) {\n                this.getConfiguration().write(writer);\n            } catch (Exception e) {\n                LOGGER.warn(\"Error saving the config file: {}\", e.getMessage(), e);\n            }\n        }\n    }", "signature": "void save()", "full_signature": "protected void save()", "class_method_signature": "Environment.save()", "testcase": false, "constructor": false, "invocations": ["write", "getConfiguration", "warn", "getMessage"]}, "repository": {"repo_id": 42622157, "url": "https://github.com/eclipse/winery", "stars": 34, "created": "9/17/2015 12:31:44 AM +00:00", "updates": "2020-01-22T09:32:00+00:00", "fork": "False", "license": "licensed"}}