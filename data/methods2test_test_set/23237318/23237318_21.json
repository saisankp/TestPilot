{"test_class": {"identifier": "ActionRequestUtilTest", "superclass": "", "interfaces": "", "fields": [], "file": "core/src/test/java/com/quantiply/elasticsearch/ActionRequestUtilTest.java"}, "test_case": {"identifier": "testGetIndexRequestKeyFromOldCamusHeader", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testGetIndexRequestKeyFromOldCamusHeader() throws Exception {\n        ActionRequestKey requestKey = ActionRequestUtil.getIndexRequestFromCamusHeader(getOldHeader(), getOldHeaderSchema());\n        assertEquals(requestKey.getAction(), Action.INDEX);\n        assertEquals(99L, requestKey.getPartitionTsUnixMs().longValue());\n        assertEquals(99L, requestKey.getEventTsUnixMs().longValue());\n        assertEquals(\"testId\", requestKey.getId().toString());\n    }", "signature": "void testGetIndexRequestKeyFromOldCamusHeader()", "full_signature": "@Test public void testGetIndexRequestKeyFromOldCamusHeader()", "class_method_signature": "ActionRequestUtilTest.testGetIndexRequestKeyFromOldCamusHeader()", "testcase": true, "constructor": false, "invocations": ["getIndexRequestFromCamusHeader", "getOldHeader", "getOldHeaderSchema", "assertEquals", "getAction", "assertEquals", "longValue", "getPartitionTsUnixMs", "assertEquals", "longValue", "getEventTsUnixMs", "assertEquals", "toString", "getId"]}, "focal_class": {"identifier": "ActionRequestUtil", "superclass": "", "interfaces": "", "fields": [], "methods": [{"identifier": "getIndexRequestKeyFromCamus", "parameters": "(IndexedRecord msg)", "modifiers": "public static", "return": "ActionRequestKey", "signature": "ActionRequestKey getIndexRequestKeyFromCamus(IndexedRecord msg)", "full_signature": "public static ActionRequestKey getIndexRequestKeyFromCamus(IndexedRecord msg)", "class_method_signature": "ActionRequestUtil.getIndexRequestKeyFromCamus(IndexedRecord msg)", "testcase": false, "constructor": false}, {"identifier": "getIndexRequestFromCamusHeader", "parameters": "(IndexedRecord header, Schema headerSchema)", "modifiers": "public static", "return": "ActionRequestKey", "signature": "ActionRequestKey getIndexRequestFromCamusHeader(IndexedRecord header, Schema headerSchema)", "full_signature": "public static ActionRequestKey getIndexRequestFromCamusHeader(IndexedRecord header, Schema headerSchema)", "class_method_signature": "ActionRequestUtil.getIndexRequestFromCamusHeader(IndexedRecord header, Schema headerSchema)", "testcase": false, "constructor": false}], "file": "core/src/main/java/com/quantiply/elasticsearch/ActionRequestUtil.java"}, "focal_method": {"identifier": "getIndexRequestFromCamusHeader", "parameters": "(IndexedRecord header, Schema headerSchema)", "modifiers": "public static", "return": "ActionRequestKey", "body": "public static ActionRequestKey getIndexRequestFromCamusHeader(IndexedRecord header, Schema headerSchema) {\n        ActionRequestKey.Builder builder = ActionRequestKey.newBuilder();\n        builder.setAction(Action.INDEX);\n        if (header != null && headerSchema != null) {\n            Schema.Field tsField = headerSchema.getField(\"time\");\n            Schema.Field idField = headerSchema.getField(\"id\");\n            if (tsField == null) {\n                //For backward compatibility\n                tsField = headerSchema.getField(\"timestamp\");\n            }\n            if (tsField != null) {\n                Object ts = header.get(tsField.pos());\n                if (ts instanceof Long) {\n                    builder.setEventTsUnixMs((Long) ts);\n                    builder.setPartitionTsUnixMs((Long) ts);\n                }\n            }\n            if (idField != null) {\n                Object id = header.get(idField.pos());\n                if (id instanceof CharSequence) {\n                    builder.setId((CharSequence) id);\n                }\n            }\n        }\n        return builder.build();\n    }", "signature": "ActionRequestKey getIndexRequestFromCamusHeader(IndexedRecord header, Schema headerSchema)", "full_signature": "public static ActionRequestKey getIndexRequestFromCamusHeader(IndexedRecord header, Schema headerSchema)", "class_method_signature": "ActionRequestUtil.getIndexRequestFromCamusHeader(IndexedRecord header, Schema headerSchema)", "testcase": false, "constructor": false, "invocations": ["newBuilder", "setAction", "getField", "getField", "getField", "get", "pos", "setEventTsUnixMs", "setPartitionTsUnixMs", "get", "pos", "setId", "build"]}, "repository": {"repo_id": 23237318, "url": "https://github.com/quantiply/rico", "language": "Java", "is_fork": false, "fork_count": 1, "stargazer_count": 8, "size": 5128, "license": "licensed"}}