{"test_class": {"identifier": "PartitionOperationTest", "superclass": "", "interfaces": "", "fields": [], "file": "core/src/test/java/com/nextdoor/bender/partition/PartitionOperationTest.java"}, "test_case": {"identifier": "testGetEvaluatedPartitionsFieldNotFoundException", "parameters": "()", "modifiers": "@Test(expected = OperationException.class) public", "return": "void", "body": "@Test(expected = OperationException.class)\n  public void testGetEvaluatedPartitionsFieldNotFoundException() throws FieldNotFoundException {\n    List<PartitionSpec> partitionSpecs = new ArrayList<PartitionSpec>(1);\n    List<String> sources = Arrays.asList(\"one\");\n    PartitionSpec spec = new PartitionSpec(\"foo\", sources, PartitionSpec.Interpreter.STRING);\n    partitionSpecs.add(spec);\n\n    PartitionOperation op = new PartitionOperation(partitionSpecs);\n    InternalEvent ievent = new InternalEvent(\"foo\", null, 1);\n    DummyStringEvent devent = spy(new DummyStringEvent(\"baz\"));\n    ievent.setEventObj(devent);\n\n    doThrow(FieldNotFoundException.class).when(devent).getFieldAsString(any());\n\n    try {\n      op.perform(ievent);\n    } catch (OperationException e) {\n      assertEquals(\"unable to find value for partition 'foo'\", e.getMessage());\n      throw e;\n    }\n  }", "signature": "void testGetEvaluatedPartitionsFieldNotFoundException()", "full_signature": "@Test(expected = OperationException.class) public void testGetEvaluatedPartitionsFieldNotFoundException()", "class_method_signature": "PartitionOperationTest.testGetEvaluatedPartitionsFieldNotFoundException()", "testcase": true, "constructor": false, "invocations": ["asList", "add", "spy", "setEventObj", "getFieldAsString", "when", "doThrow", "any", "perform", "assertEquals", "getMessage"]}, "focal_class": {"identifier": "PartitionOperation", "superclass": "", "interfaces": "implements EventOperation", "fields": [{"original_string": "private final List<PartitionSpec> partitionSpecs;", "modifier": "private final", "type": "List<PartitionSpec>", "declarator": "partitionSpecs", "var_name": "partitionSpecs"}], "methods": [{"identifier": "PartitionOperation", "parameters": "(final List<PartitionSpec> partitionSpecs)", "modifiers": "public", "return": "", "signature": " PartitionOperation(final List<PartitionSpec> partitionSpecs)", "full_signature": "public  PartitionOperation(final List<PartitionSpec> partitionSpecs)", "class_method_signature": "PartitionOperation.PartitionOperation(final List<PartitionSpec> partitionSpecs)", "testcase": false, "constructor": true}, {"identifier": "getPartitions", "parameters": "(DeserializedEvent devent)", "modifiers": "protected", "return": "LinkedHashMap<String, String>", "signature": "LinkedHashMap<String, String> getPartitions(DeserializedEvent devent)", "full_signature": "protected LinkedHashMap<String, String> getPartitions(DeserializedEvent devent)", "class_method_signature": "PartitionOperation.getPartitions(DeserializedEvent devent)", "testcase": false, "constructor": false}, {"identifier": "perform", "parameters": "(InternalEvent ievent)", "modifiers": "@Override public", "return": "InternalEvent", "signature": "InternalEvent perform(InternalEvent ievent)", "full_signature": "@Override public InternalEvent perform(InternalEvent ievent)", "class_method_signature": "PartitionOperation.perform(InternalEvent ievent)", "testcase": false, "constructor": false}], "file": "core/src/main/java/com/nextdoor/bender/partition/PartitionOperation.java"}, "focal_method": {"identifier": "perform", "parameters": "(InternalEvent ievent)", "modifiers": "@Override public", "return": "InternalEvent", "body": "@Override\n  public InternalEvent perform(InternalEvent ievent) {\n    ievent.setPartitions(getPartitions(ievent.getEventObj()));\n    return ievent;\n  }", "signature": "InternalEvent perform(InternalEvent ievent)", "full_signature": "@Override public InternalEvent perform(InternalEvent ievent)", "class_method_signature": "PartitionOperation.perform(InternalEvent ievent)", "testcase": false, "constructor": false, "invocations": ["setPartitions", "getPartitions", "getEventObj"]}, "repository": {"repo_id": 75955378, "url": "https://github.com/Nextdoor/bender", "language": "Java", "is_fork": false, "fork_count": 15, "stargazer_count": 163, "size": 1503, "license": "licensed"}}