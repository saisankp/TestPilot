{"test_class": {"identifier": "SuppressFastInfosetCompressionTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final String ANY_HEADER_VALUE = \"value\";", "modifier": "private static final", "type": "String", "declarator": "ANY_HEADER_VALUE = \"value\"", "var_name": "ANY_HEADER_VALUE"}, {"original_string": "@Mock\n    private HttpServletResponse response;", "modifier": "@Mock\n    private", "type": "HttpServletResponse", "declarator": "response", "var_name": "response"}, {"original_string": "@Mock\n    private WilmaHttpRequest request;", "modifier": "@Mock\n    private", "type": "WilmaHttpRequest", "declarator": "request", "var_name": "request"}, {"original_string": "@Mock\n    private ParameterList parameterMap;", "modifier": "@Mock\n    private", "type": "ParameterList", "declarator": "parameterMap", "var_name": "parameterMap"}, {"original_string": "private SuppressFastInfosetCompression underTest;", "modifier": "private", "type": "SuppressFastInfosetCompression", "declarator": "underTest", "var_name": "underTest"}], "file": "wilma-application/modules/wilma-stub-configuration-support/src/test/java/com/epam/wilma/stubconfig/response/formatter/SuppressFastInfosetCompressionTest.java"}, "test_case": {"identifier": "testFormatTemplateWithoutExistingHeader", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testFormatTemplateWithoutExistingHeader() {\n        //GIVEN\n        //SetUp\n        given(request.getHeader(SuppressFastInfosetCompression.ACCEPT_HEADER_KEY)).willReturn(SuppressFastInfosetCompression.ACCEPT_VALUE_FASTINFOSET);\n        given(response.getHeader(SuppressFastInfosetCompression.HEADER_KEY_SUPPRESS_ENCODING)).willReturn(null);\n        //WHEN\n        underTest.formatResponse(request, response, null, parameterMap);\n        //THEN\n        verify(response).addHeader(SuppressFastInfosetCompression.HEADER_KEY_SUPPRESS_ENCODING, SuppressFastInfosetCompression.FASTINFOSET);\n    }", "signature": "void testFormatTemplateWithoutExistingHeader()", "full_signature": "@Test public void testFormatTemplateWithoutExistingHeader()", "class_method_signature": "SuppressFastInfosetCompressionTest.testFormatTemplateWithoutExistingHeader()", "testcase": true, "constructor": false, "invocations": ["willReturn", "given", "getHeader", "willReturn", "given", "getHeader", "formatResponse", "addHeader", "verify"]}, "focal_class": {"identifier": "SuppressFastInfosetCompression", "superclass": "", "interfaces": "implements ResponseFormatter", "fields": [{"original_string": "static final String FASTINFOSET = \"fastinfoset\";", "modifier": "static final", "type": "String", "declarator": "FASTINFOSET = \"fastinfoset\"", "var_name": "FASTINFOSET"}, {"original_string": "static final String ACCEPT_VALUE_FASTINFOSET = \"application/fastinfoset\";", "modifier": "static final", "type": "String", "declarator": "ACCEPT_VALUE_FASTINFOSET = \"application/fastinfoset\"", "var_name": "ACCEPT_VALUE_FASTINFOSET"}, {"original_string": "static final String ACCEPT_HEADER_KEY = \"Accept\";", "modifier": "static final", "type": "String", "declarator": "ACCEPT_HEADER_KEY = \"Accept\"", "var_name": "ACCEPT_HEADER_KEY"}, {"original_string": "static final String HEADER_KEY_SUPPRESS_ENCODING = \"Wilma-Suppress-Encoding\";", "modifier": "static final", "type": "String", "declarator": "HEADER_KEY_SUPPRESS_ENCODING = \"Wilma-Suppress-Encoding\"", "var_name": "HEADER_KEY_SUPPRESS_ENCODING"}], "methods": [{"identifier": "formatResponse", "parameters": "(WilmaHttpRequest wilmaRequest, HttpServletResponse resp,\n                                 byte[] responseResource, ParameterList params)", "modifiers": "@Override public", "return": "byte[]", "signature": "byte[] formatResponse(WilmaHttpRequest wilmaRequest, HttpServletResponse resp,\n                                 byte[] responseResource, ParameterList params)", "full_signature": "@Override public byte[] formatResponse(WilmaHttpRequest wilmaRequest, HttpServletResponse resp,\n                                 byte[] responseResource, ParameterList params)", "class_method_signature": "SuppressFastInfosetCompression.formatResponse(WilmaHttpRequest wilmaRequest, HttpServletResponse resp,\n                                 byte[] responseResource, ParameterList params)", "testcase": false, "constructor": false}], "file": "wilma-application/modules/wilma-stub-configuration-support/src/main/java/com/epam/wilma/stubconfig/response/formatter/SuppressFastInfosetCompression.java"}, "focal_method": {"identifier": "formatResponse", "parameters": "(WilmaHttpRequest wilmaRequest, HttpServletResponse resp,\n                                 byte[] responseResource, ParameterList params)", "modifiers": "@Override public", "return": "byte[]", "body": "@Override\n    public byte[] formatResponse(WilmaHttpRequest wilmaRequest, HttpServletResponse resp,\n                                 byte[] responseResource, ParameterList params) {\n        //force turn off gzip compression usage for this answer\n        String acceptHeader = wilmaRequest.getHeader(ACCEPT_HEADER_KEY);\n        if (acceptHeader != null && acceptHeader.contains(ACCEPT_VALUE_FASTINFOSET)) {\n            String existingHeaderContent = resp.getHeader(HEADER_KEY_SUPPRESS_ENCODING);\n            String newHeaderContent = existingHeaderContent == null ? FASTINFOSET : existingHeaderContent + \",\" + FASTINFOSET;\n            resp.addHeader(HEADER_KEY_SUPPRESS_ENCODING, newHeaderContent);\n        }\n        //we don't touch the body part\n        return responseResource;\n    }", "signature": "byte[] formatResponse(WilmaHttpRequest wilmaRequest, HttpServletResponse resp,\n                                 byte[] responseResource, ParameterList params)", "full_signature": "@Override public byte[] formatResponse(WilmaHttpRequest wilmaRequest, HttpServletResponse resp,\n                                 byte[] responseResource, ParameterList params)", "class_method_signature": "SuppressFastInfosetCompression.formatResponse(WilmaHttpRequest wilmaRequest, HttpServletResponse resp,\n                                 byte[] responseResource, ParameterList params)", "testcase": false, "constructor": false, "invocations": ["getHeader", "contains", "getHeader", "addHeader"]}, "repository": {"repo_id": 29603649, "url": "https://github.com/epam/Wilma", "language": "Java", "is_fork": false, "fork_count": 8, "stargazer_count": 35, "size": 5732, "license": "licensed"}}