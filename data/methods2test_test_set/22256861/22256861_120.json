{"test_class": {"identifier": "ValidatorTest", "superclass": "", "interfaces": "", "fields": [], "file": "s3tbx-slstr-pdu-stitching/src/test/java/org/esa/s3tbx/slstr/pdu/stitching/ValidatorTest.java"}, "test_case": {"identifier": "testValidateOrbitReference_DifferentOrbitReference", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testValidateOrbitReference_DifferentOrbitReference() throws ParserConfigurationException, IOException, SAXException, URISyntaxException {\n        final File[] slstrFiles = TestUtils.getSlstrFiles();\n        Document[] manifests = new Document[slstrFiles.length + 1];\n        for (int i = 0; i < slstrFiles.length; i++) {\n            manifests[i] = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(slstrFiles[i]);\n        }\n        String orbitRef =\n                \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\\n\" +\n                        \"          <sentinel-safe:orbitReference>\\n\" +\n                        \"            <sentinel-safe:orbitNumber groundTrackDirection=\\\"descending\\\" type=\\\"start\\\">60627</sentinel-safe:orbitNumber>\\n\" +\n                        \"            <sentinel-safe:relativeOrbitNumber groundTrackDirection=\\\"descending\\\" type=\\\"start\\\">182</sentinel-safe:relativeOrbitNumber>\\n\" +\n                        \"            <sentinel-safe:passNumber groundTrackDirection=\\\"descending\\\" type=\\\"start\\\">121254</sentinel-safe:passNumber>\\n\" +\n                        \"            <sentinel-safe:relativePassNumber groundTrackDirection=\\\"descending\\\" type=\\\"start\\\">364</sentinel-safe:relativePassNumber>\\n\" +\n                        \"            <sentinel-safe:cycleNumber>158</sentinel-safe:cycleNumber>\\n\" +\n                        \"            <sentinel-safe:phaseIdentifier>2</sentinel-safe:phaseIdentifier>\\n\" +\n                        \"          </sentinel-safe:orbitReference>\";\n        final DocumentBuilder documentBuilder = DocumentBuilderFactory.newInstance().newDocumentBuilder();\n        manifests[manifests.length - 1] =\n                documentBuilder.parse(new InputSource(new ByteArrayInputStream(orbitRef.getBytes(\"utf-8\"))));\n        try {\n            Validator.validateOrbitReference(manifests);\n            fail(\"Exception expected\");\n        } catch (PDUStitchingException e) {\n            assertEquals(\"Invalid orbit reference due to different element sentinel-safe:phaseIdentifier\", e.getMessage());\n        }\n    }", "signature": "void testValidateOrbitReference_DifferentOrbitReference()", "full_signature": "@Test public void testValidateOrbitReference_DifferentOrbitReference()", "class_method_signature": "ValidatorTest.testValidateOrbitReference_DifferentOrbitReference()", "testcase": true, "constructor": false, "invocations": ["getSlstrFiles", "parse", "newDocumentBuilder", "newInstance", "newDocumentBuilder", "newInstance", "parse", "getBytes", "validateOrbitReference", "fail", "assertEquals", "getMessage"]}, "focal_class": {"identifier": "Validator", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final String SLSTR_L1B_NAME_PATTERN = \"S3.?_SL_1_RBT_.*(.SEN3)?\";", "modifier": "private static final", "type": "String", "declarator": "SLSTR_L1B_NAME_PATTERN = \"S3.?_SL_1_RBT_.*(.SEN3)?\"", "var_name": "SLSTR_L1B_NAME_PATTERN"}], "methods": [{"identifier": "validate", "parameters": "(File[] manifestFiles)", "modifiers": "public static", "return": "void", "signature": "void validate(File[] manifestFiles)", "full_signature": "public static void validate(File[] manifestFiles)", "class_method_signature": "Validator.validate(File[] manifestFiles)", "testcase": false, "constructor": false}, {"identifier": "validateSlstrProductFiles", "parameters": "(File[] slstrProductFiles)", "modifiers": "static", "return": "void", "signature": "void validateSlstrProductFiles(File[] slstrProductFiles)", "full_signature": "static void validateSlstrProductFiles(File[] slstrProductFiles)", "class_method_signature": "Validator.validateSlstrProductFiles(File[] slstrProductFiles)", "testcase": false, "constructor": false}, {"identifier": "validateOrbitReference", "parameters": "(Document[] manifests)", "modifiers": "static", "return": "void", "signature": "void validateOrbitReference(Document[] manifests)", "full_signature": "static void validateOrbitReference(Document[] manifests)", "class_method_signature": "Validator.validateOrbitReference(Document[] manifests)", "testcase": false, "constructor": false}, {"identifier": "validateAdjacency", "parameters": "(Document[] manifests)", "modifiers": "static", "return": "void", "signature": "void validateAdjacency(Document[] manifests)", "full_signature": "static void validateAdjacency(Document[] manifests)", "class_method_signature": "Validator.validateAdjacency(Document[] manifests)", "testcase": false, "constructor": false}], "file": "s3tbx-slstr-pdu-stitching/src/main/java/org/esa/s3tbx/slstr/pdu/stitching/Validator.java"}, "focal_method": {"identifier": "validateOrbitReference", "parameters": "(Document[] manifests)", "modifiers": "static", "return": "void", "body": "static void validateOrbitReference(Document[] manifests) throws PDUStitchingException {\n        if (manifests.length < 2) {\n            return;\n        }\n        String[] tagNames = new String[]{\"sentinel-safe:orbitNumber\", \"sentinel-safe:relativeOrbitNumber\",\n                \"sentinel-safe:passNumber\", \"sentinel-safe:relativePassNumber\",\n                \"sentinel-safe:cycleNumber\", \"sentinel-safe:phaseIdentifier\",\n                \"sentinel-safe:epoch\", \"sentinel-safe:x\", \"sentinel-safe:y\", \"sentinel-safe:z\"\n        };\n        for (String tagName : tagNames) {\n            final NodeList referenceNodes = manifests[0].getElementsByTagName(tagName);\n            for (int j = 1; j < manifests.length; j++) {\n                final NodeList testNodes = manifests[j].getElementsByTagName(tagName);\n                if (referenceNodes.getLength() != testNodes.getLength()) {\n                    throw new PDUStitchingException(\"Invalid orbit reference due to different element \" + tagName);\n                }\n                for (int k = 0; k < referenceNodes.getLength(); k++) {\n                    referenceNodes.item(k).normalize();\n                    testNodes.item(k).normalize();\n                    if (!referenceNodes.item(k).isEqualNode(testNodes.item(k))) {\n                        throw new PDUStitchingException(\"Invalid orbit reference due to different element \" + tagName);\n                    }\n                }\n            }\n        }\n    }", "signature": "void validateOrbitReference(Document[] manifests)", "full_signature": "static void validateOrbitReference(Document[] manifests)", "class_method_signature": "Validator.validateOrbitReference(Document[] manifests)", "testcase": false, "constructor": false, "invocations": ["getElementsByTagName", "getElementsByTagName", "getLength", "getLength", "getLength", "normalize", "item", "normalize", "item", "isEqualNode", "item", "item"]}, "repository": {"repo_id": 22256861, "url": "https://github.com/senbox-org/s3tbx", "stars": 22, "created": "7/25/2014 12:57:22 PM +00:00", "updates": "2020-01-27T10:23:46+00:00", "fork": "False", "license": "licensed"}}