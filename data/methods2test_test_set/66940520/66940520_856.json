{"test_class": {"identifier": "DataValidatorTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "@Mock\n    private CategoryService categoryService;", "modifier": "@Mock\n    private", "type": "CategoryService", "declarator": "categoryService", "var_name": "categoryService"}, {"original_string": "@Mock\n    private OrganisationUnitService organisationUnitService;", "modifier": "@Mock\n    private", "type": "OrganisationUnitService", "declarator": "organisationUnitService", "var_name": "organisationUnitService"}, {"original_string": "@Mock\n    private DataSetService dataSetService;", "modifier": "@Mock\n    private", "type": "DataSetService", "declarator": "dataSetService", "var_name": "dataSetService"}, {"original_string": "@Mock\n    private IdentifiableObjectManager idObjectManager;", "modifier": "@Mock\n    private", "type": "IdentifiableObjectManager", "declarator": "idObjectManager", "var_name": "idObjectManager"}, {"original_string": "@Mock\n    private InputUtils inputUtils;", "modifier": "@Mock\n    private", "type": "InputUtils", "declarator": "inputUtils", "var_name": "inputUtils"}, {"original_string": "@Mock\n    private FileResourceService fileResourceService;", "modifier": "@Mock\n    private", "type": "FileResourceService", "declarator": "fileResourceService", "var_name": "fileResourceService"}, {"original_string": "@Mock\n    private I18nManager i18nManager;", "modifier": "@Mock\n    private", "type": "I18nManager", "declarator": "i18nManager", "var_name": "i18nManager"}, {"original_string": "@Mock\n    private CalendarService calendarService;", "modifier": "@Mock\n    private", "type": "CalendarService", "declarator": "calendarService", "var_name": "calendarService"}, {"original_string": "@Mock\n    private AggregateAccessManager accessManager;", "modifier": "@Mock\n    private", "type": "AggregateAccessManager", "declarator": "accessManager", "var_name": "accessManager"}, {"original_string": "@Mock\n    private DataValidator dataValidator;", "modifier": "@Mock\n    private", "type": "DataValidator", "declarator": "dataValidator", "var_name": "dataValidator"}, {"original_string": "@Rule\n    public MockitoRule mockitoRule = rule();", "modifier": "@Rule\n    public", "type": "MockitoRule", "declarator": "mockitoRule = rule()", "var_name": "mockitoRule"}, {"original_string": "private Period periodJan;", "modifier": "private", "type": "Period", "declarator": "periodJan", "var_name": "periodJan"}, {"original_string": "private Period periodFeb;", "modifier": "private", "type": "Period", "declarator": "periodFeb", "var_name": "periodFeb"}, {"original_string": "private Period periodMar;", "modifier": "private", "type": "Period", "declarator": "periodMar", "var_name": "periodMar"}, {"original_string": "private DataSet dataSetA;", "modifier": "private", "type": "DataSet", "declarator": "dataSetA", "var_name": "dataSetA"}, {"original_string": "private DataElement dataElementA;", "modifier": "private", "type": "DataElement", "declarator": "dataElementA", "var_name": "dataElementA"}, {"original_string": "private CategoryOption categoryOptionA;", "modifier": "private", "type": "CategoryOption", "declarator": "categoryOptionA", "var_name": "categoryOptionA"}, {"original_string": "private CategoryOptionCombo optionComboA;", "modifier": "private", "type": "CategoryOptionCombo", "declarator": "optionComboA", "var_name": "optionComboA"}, {"original_string": "private Date jan15;", "modifier": "private", "type": "Date", "declarator": "jan15", "var_name": "jan15"}, {"original_string": "private Date feb15;", "modifier": "private", "type": "Date", "declarator": "feb15", "var_name": "feb15"}], "file": "dhis-2/dhis-web/dhis-web-api/src/test/java/org/hisp/dhis/webapi/controller/datavalue/DataValidatorTest.java"}, "test_case": {"identifier": "testValidateAttributeOptionComboWithEarlyData", "parameters": "()", "modifiers": "@Test( expected = WebMessageException.class ) public", "return": "void", "body": "@Test( expected = WebMessageException.class )\n    public void testValidateAttributeOptionComboWithEarlyData()\n        throws WebMessageException\n    {\n        // Given\n        categoryOptionA.setStartDate( feb15 );\n\n        // Then\n        dataValidator.validateAttributeOptionCombo( optionComboA, periodJan, dataSetA, dataElementA );\n    }", "signature": "void testValidateAttributeOptionComboWithEarlyData()", "full_signature": "@Test( expected = WebMessageException.class ) public void testValidateAttributeOptionComboWithEarlyData()", "class_method_signature": "DataValidatorTest.testValidateAttributeOptionComboWithEarlyData()", "testcase": true, "constructor": false, "invocations": ["setStartDate", "validateAttributeOptionCombo"]}, "focal_class": {"identifier": "DataValidator", "superclass": "", "interfaces": "", "fields": [{"original_string": "private final CategoryService categoryService;", "modifier": "private final", "type": "CategoryService", "declarator": "categoryService", "var_name": "categoryService"}, {"original_string": "private final OrganisationUnitService organisationUnitService;", "modifier": "private final", "type": "OrganisationUnitService", "declarator": "organisationUnitService", "var_name": "organisationUnitService"}, {"original_string": "private final DataSetService dataSetService;", "modifier": "private final", "type": "DataSetService", "declarator": "dataSetService", "var_name": "dataSetService"}, {"original_string": "private final IdentifiableObjectManager idObjectManager;", "modifier": "private final", "type": "IdentifiableObjectManager", "declarator": "idObjectManager", "var_name": "idObjectManager"}, {"original_string": "private final InputUtils inputUtils;", "modifier": "private final", "type": "InputUtils", "declarator": "inputUtils", "var_name": "inputUtils"}, {"original_string": "private final FileResourceService fileResourceService;", "modifier": "private final", "type": "FileResourceService", "declarator": "fileResourceService", "var_name": "fileResourceService"}, {"original_string": "private final I18nManager i18nManager;", "modifier": "private final", "type": "I18nManager", "declarator": "i18nManager", "var_name": "i18nManager"}, {"original_string": "private final CalendarService calendarService;", "modifier": "private final", "type": "CalendarService", "declarator": "calendarService", "var_name": "calendarService"}, {"original_string": "private final AggregateAccessManager accessManager;", "modifier": "private final", "type": "AggregateAccessManager", "declarator": "accessManager", "var_name": "accessManager"}], "methods": [{"identifier": "DataValidator", "parameters": "( final CategoryService categoryService, final OrganisationUnitService organisationUnitService,\n        final DataSetService dataSetService, final IdentifiableObjectManager idObjectManager,\n        final InputUtils inputUtils, final FileResourceService fileResourceService, final I18nManager i18nManager,\n        final CalendarService calendarService, final AggregateAccessManager accessManager )", "modifiers": "public", "return": "", "signature": " DataValidator( final CategoryService categoryService, final OrganisationUnitService organisationUnitService,\n        final DataSetService dataSetService, final IdentifiableObjectManager idObjectManager,\n        final InputUtils inputUtils, final FileResourceService fileResourceService, final I18nManager i18nManager,\n        final CalendarService calendarService, final AggregateAccessManager accessManager )", "full_signature": "public  DataValidator( final CategoryService categoryService, final OrganisationUnitService organisationUnitService,\n        final DataSetService dataSetService, final IdentifiableObjectManager idObjectManager,\n        final InputUtils inputUtils, final FileResourceService fileResourceService, final I18nManager i18nManager,\n        final CalendarService calendarService, final AggregateAccessManager accessManager )", "class_method_signature": "DataValidator.DataValidator( final CategoryService categoryService, final OrganisationUnitService organisationUnitService,\n        final DataSetService dataSetService, final IdentifiableObjectManager idObjectManager,\n        final InputUtils inputUtils, final FileResourceService fileResourceService, final I18nManager i18nManager,\n        final CalendarService calendarService, final AggregateAccessManager accessManager )", "testcase": false, "constructor": true}, {"identifier": "getAndValidateDataElementAccess", "parameters": "( final String deUid )", "modifiers": "", "return": "DataElement", "signature": "DataElement getAndValidateDataElementAccess( final String deUid )", "full_signature": " DataElement getAndValidateDataElementAccess( final String deUid )", "class_method_signature": "DataValidator.getAndValidateDataElementAccess( final String deUid )", "testcase": false, "constructor": false}, {"identifier": "getAndValidateCategoryOptionCombo", "parameters": "( final String coUid,\n        final boolean requireCategoryOptionCombo )", "modifiers": "", "return": "CategoryOptionCombo", "signature": "CategoryOptionCombo getAndValidateCategoryOptionCombo( final String coUid,\n        final boolean requireCategoryOptionCombo )", "full_signature": " CategoryOptionCombo getAndValidateCategoryOptionCombo( final String coUid,\n        final boolean requireCategoryOptionCombo )", "class_method_signature": "DataValidator.getAndValidateCategoryOptionCombo( final String coUid,\n        final boolean requireCategoryOptionCombo )", "testcase": false, "constructor": false}, {"identifier": "getAndValidateAttributeOptionCombo", "parameters": "( final String ccUid, final String cp )", "modifiers": "", "return": "CategoryOptionCombo", "signature": "CategoryOptionCombo getAndValidateAttributeOptionCombo( final String ccUid, final String cp )", "full_signature": " CategoryOptionCombo getAndValidateAttributeOptionCombo( final String ccUid, final String cp )", "class_method_signature": "DataValidator.getAndValidateAttributeOptionCombo( final String ccUid, final String cp )", "testcase": false, "constructor": false}, {"identifier": "getAndValidatePeriod", "parameters": "( final String pe )", "modifiers": "", "return": "Period", "signature": "Period getAndValidatePeriod( final String pe )", "full_signature": " Period getAndValidatePeriod( final String pe )", "class_method_signature": "DataValidator.getAndValidatePeriod( final String pe )", "testcase": false, "constructor": false}, {"identifier": "validateOrganisationUnitPeriod", "parameters": "( final OrganisationUnit organisationUnit, final Period period )", "modifiers": "", "return": "void", "signature": "void validateOrganisationUnitPeriod( final OrganisationUnit organisationUnit, final Period period )", "full_signature": " void validateOrganisationUnitPeriod( final OrganisationUnit organisationUnit, final Period period )", "class_method_signature": "DataValidator.validateOrganisationUnitPeriod( final OrganisationUnit organisationUnit, final Period period )", "testcase": false, "constructor": false}, {"identifier": "getAndValidateOrganisationUnit", "parameters": "( final String ouUid )", "modifiers": "", "return": "OrganisationUnit", "signature": "OrganisationUnit getAndValidateOrganisationUnit( final String ouUid )", "full_signature": " OrganisationUnit getAndValidateOrganisationUnit( final String ouUid )", "class_method_signature": "DataValidator.getAndValidateOrganisationUnit( final String ouUid )", "testcase": false, "constructor": false}, {"identifier": "getAndValidateOptionalDataSet", "parameters": "( final String dsUid, final DataElement dataElement )", "modifiers": "", "return": "DataSet", "signature": "DataSet getAndValidateOptionalDataSet( final String dsUid, final DataElement dataElement )", "full_signature": " DataSet getAndValidateOptionalDataSet( final String dsUid, final DataElement dataElement )", "class_method_signature": "DataValidator.getAndValidateOptionalDataSet( final String dsUid, final DataElement dataElement )", "testcase": false, "constructor": false}, {"identifier": "validateInvalidFuturePeriod", "parameters": "( final Period period, final DataElement dataElement )", "modifiers": "", "return": "void", "signature": "void validateInvalidFuturePeriod( final Period period, final DataElement dataElement )", "full_signature": " void validateInvalidFuturePeriod( final Period period, final DataElement dataElement )", "class_method_signature": "DataValidator.validateInvalidFuturePeriod( final Period period, final DataElement dataElement )", "testcase": false, "constructor": false}, {"identifier": "validateAttributeOptionCombo", "parameters": "( final CategoryOptionCombo attributeOptionCombo,\n        final Period period, final DataSet dataSet, final DataElement dataElement )", "modifiers": "", "return": "void", "signature": "void validateAttributeOptionCombo( final CategoryOptionCombo attributeOptionCombo,\n        final Period period, final DataSet dataSet, final DataElement dataElement )", "full_signature": " void validateAttributeOptionCombo( final CategoryOptionCombo attributeOptionCombo,\n        final Period period, final DataSet dataSet, final DataElement dataElement )", "class_method_signature": "DataValidator.validateAttributeOptionCombo( final CategoryOptionCombo attributeOptionCombo,\n        final Period period, final DataSet dataSet, final DataElement dataElement )", "testcase": false, "constructor": false}, {"identifier": "validateDataSetNotLocked", "parameters": "( final User user, final DataElement dataElement, final Period period,\n        final DataSet dataSet, final OrganisationUnit organisationUnit, final CategoryOptionCombo attributeOptionCombo )", "modifiers": "", "return": "void", "signature": "void validateDataSetNotLocked( final User user, final DataElement dataElement, final Period period,\n        final DataSet dataSet, final OrganisationUnit organisationUnit, final CategoryOptionCombo attributeOptionCombo )", "full_signature": " void validateDataSetNotLocked( final User user, final DataElement dataElement, final Period period,\n        final DataSet dataSet, final OrganisationUnit organisationUnit, final CategoryOptionCombo attributeOptionCombo )", "class_method_signature": "DataValidator.validateDataSetNotLocked( final User user, final DataElement dataElement, final Period period,\n        final DataSet dataSet, final OrganisationUnit organisationUnit, final CategoryOptionCombo attributeOptionCombo )", "testcase": false, "constructor": false}, {"identifier": "validateDataInputPeriodForDataElementAndPeriod", "parameters": "( final DataElement dataElement, final DataSet dataSet,\n        final Period period )", "modifiers": "", "return": "void", "signature": "void validateDataInputPeriodForDataElementAndPeriod( final DataElement dataElement, final DataSet dataSet,\n        final Period period )", "full_signature": " void validateDataInputPeriodForDataElementAndPeriod( final DataElement dataElement, final DataSet dataSet,\n        final Period period )", "class_method_signature": "DataValidator.validateDataInputPeriodForDataElementAndPeriod( final DataElement dataElement, final DataSet dataSet,\n        final Period period )", "testcase": false, "constructor": false}, {"identifier": "validateAndSetAssigned", "parameters": "( final String fileResourceUid )", "modifiers": "", "return": "FileResource", "signature": "FileResource validateAndSetAssigned( final String fileResourceUid )", "full_signature": " FileResource validateAndSetAssigned( final String fileResourceUid )", "class_method_signature": "DataValidator.validateAndSetAssigned( final String fileResourceUid )", "testcase": false, "constructor": false}, {"identifier": "validateComment", "parameters": "( final String comment )", "modifiers": "", "return": "void", "signature": "void validateComment( final String comment )", "full_signature": " void validateComment( final String comment )", "class_method_signature": "DataValidator.validateComment( final String comment )", "testcase": false, "constructor": false}, {"identifier": "validateOptionSet", "parameters": "( final String dataValue, final OptionSet optionSet, final DataElement dataElement )", "modifiers": "", "return": "void", "signature": "void validateOptionSet( final String dataValue, final OptionSet optionSet, final DataElement dataElement )", "full_signature": " void validateOptionSet( final String dataValue, final OptionSet optionSet, final DataElement dataElement )", "class_method_signature": "DataValidator.validateOptionSet( final String dataValue, final OptionSet optionSet, final DataElement dataElement )", "testcase": false, "constructor": false}, {"identifier": "validateAndNormalizeDataValue", "parameters": "( final String dataValue, final DataElement dataElement )", "modifiers": "", "return": "String", "signature": "String validateAndNormalizeDataValue( final String dataValue, final DataElement dataElement )", "full_signature": " String validateAndNormalizeDataValue( final String dataValue, final DataElement dataElement )", "class_method_signature": "DataValidator.validateAndNormalizeDataValue( final String dataValue, final DataElement dataElement )", "testcase": false, "constructor": false}, {"identifier": "checkCategoryOptionComboAccess", "parameters": "( final User user, final CategoryOptionCombo categoryOptionCombo )", "modifiers": "", "return": "void", "signature": "void checkCategoryOptionComboAccess( final User user, final CategoryOptionCombo categoryOptionCombo )", "full_signature": " void checkCategoryOptionComboAccess( final User user, final CategoryOptionCombo categoryOptionCombo )", "class_method_signature": "DataValidator.checkCategoryOptionComboAccess( final User user, final CategoryOptionCombo categoryOptionCombo )", "testcase": false, "constructor": false}, {"identifier": "checkAttributeOptionComboAccess", "parameters": "( final User user, final CategoryOptionCombo attributeOptionCombo )", "modifiers": "", "return": "void", "signature": "void checkAttributeOptionComboAccess( final User user, final CategoryOptionCombo attributeOptionCombo )", "full_signature": " void checkAttributeOptionComboAccess( final User user, final CategoryOptionCombo attributeOptionCombo )", "class_method_signature": "DataValidator.checkAttributeOptionComboAccess( final User user, final CategoryOptionCombo attributeOptionCombo )", "testcase": false, "constructor": false}, {"identifier": "checkDataValueSharing", "parameters": "( final User user, final DataValue dataValue )", "modifiers": "", "return": "void", "signature": "void checkDataValueSharing( final User user, final DataValue dataValue )", "full_signature": " void checkDataValueSharing( final User user, final DataValue dataValue )", "class_method_signature": "DataValidator.checkDataValueSharing( final User user, final DataValue dataValue )", "testcase": false, "constructor": false}], "file": "dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/datavalue/DataValidator.java"}, "focal_method": {"identifier": "validateAttributeOptionCombo", "parameters": "( final CategoryOptionCombo attributeOptionCombo,\n        final Period period, final DataSet dataSet, final DataElement dataElement )", "modifiers": "", "return": "void", "body": "void validateAttributeOptionCombo( final CategoryOptionCombo attributeOptionCombo,\n        final Period period, final DataSet dataSet, final DataElement dataElement )\n        throws WebMessageException\n    {\n        for ( CategoryOption option : attributeOptionCombo.getCategoryOptions() )\n        {\n            if ( option.getStartDate() != null && period.getEndDate().before( option.getStartDate() ) )\n            {\n                throw new WebMessageException( conflict( \"Period \" + period.getIsoDate() + \" is before start date \"\n                    + i18nManager.getI18nFormat().formatDate( option.getStartDate() )\n                    + \" for attributeOption '\" + option.getName() + \"'\" ) );\n            }\n\n            if ( option.getEndDate() != null && period.getStartDate().after( option.getAdjustedEndDate( dataSet, dataElement ) ) )\n            {\n                throw new WebMessageException( conflict( \"Period \" + period.getIsoDate() + \" is after end date \"\n                    + i18nManager.getI18nFormat().formatDate( option.getAdjustedEndDate( dataSet, dataElement ) )\n                    + \" for attributeOption '\" + option.getName() + \"'\" ) );\n            }\n        }\n    }", "signature": "void validateAttributeOptionCombo( final CategoryOptionCombo attributeOptionCombo,\n        final Period period, final DataSet dataSet, final DataElement dataElement )", "full_signature": " void validateAttributeOptionCombo( final CategoryOptionCombo attributeOptionCombo,\n        final Period period, final DataSet dataSet, final DataElement dataElement )", "class_method_signature": "DataValidator.validateAttributeOptionCombo( final CategoryOptionCombo attributeOptionCombo,\n        final Period period, final DataSet dataSet, final DataElement dataElement )", "testcase": false, "constructor": false, "invocations": ["getCategoryOptions", "getStartDate", "before", "getEndDate", "getStartDate", "conflict", "getIsoDate", "formatDate", "getI18nFormat", "getStartDate", "getName", "getEndDate", "after", "getStartDate", "getAdjustedEndDate", "conflict", "getIsoDate", "formatDate", "getI18nFormat", "getAdjustedEndDate", "getName"]}, "repository": {"repo_id": 66940520, "url": "https://github.com/dhis2/dhis2-core", "stars": 151, "created": "8/30/2016 12:57:05 PM +00:00", "updates": "2020-01-24T18:06:36+00:00", "fork": "False", "license": "licensed"}}