{"test_class": {"identifier": "CreateWalletPresenterTest", "superclass": "extends BaseTestCase", "interfaces": "", "fields": [{"original_string": "private  CreateWalletContract.View view;", "modifier": "private", "type": "CreateWalletContract.View", "declarator": "view", "var_name": "view"}, {"original_string": "private CreateWalletPresenter presenter;", "modifier": "private", "type": "CreateWalletPresenter", "declarator": "presenter", "var_name": "presenter"}], "file": "wallet/src/test/java/com/platon/aton/component/ui/presenter/CreateWalletPresenterTest.java"}, "test_case": {"identifier": "testCreateHDWallet", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testCreateHDWallet(){\n        String name = \"Ella\";\n        String password = \"123456\";\n        String repeatPassword = \"1234567\";\n\n        presenter.createWallet(name,password,repeatPassword,WalletType.HD_WALLET);\n\n        Mockito.verify(view).showPasswordError(null,true);\n    }", "signature": "void testCreateHDWallet()", "full_signature": "@Test public void testCreateHDWallet()", "class_method_signature": "CreateWalletPresenterTest.testCreateHDWallet()", "testcase": true, "constructor": false, "invocations": ["createWallet", "showPasswordError", "verify"]}, "focal_class": {"identifier": "CreateWalletPresenter", "superclass": "extends BasePresenter<CreateWalletContract.View>", "interfaces": "implements CreateWalletContract.Presenter", "fields": [], "methods": [{"identifier": "loadDBWalletNumber", "parameters": "()", "modifiers": "@Override public", "return": "void", "signature": "void loadDBWalletNumber()", "full_signature": "@Override public void loadDBWalletNumber()", "class_method_signature": "CreateWalletPresenter.loadDBWalletNumber()", "testcase": false, "constructor": false}, {"identifier": "createWallet", "parameters": "(String name, String password, String repeatPassword,  @WalletType int walletType)", "modifiers": "@SuppressLint(\"CheckResult\") @Override public", "return": "void", "signature": "void createWallet(String name, String password, String repeatPassword,  @WalletType int walletType)", "full_signature": "@SuppressLint(\"CheckResult\") @Override public void createWallet(String name, String password, String repeatPassword,  @WalletType int walletType)", "class_method_signature": "CreateWalletPresenter.createWallet(String name, String password, String repeatPassword,  @WalletType int walletType)", "testcase": false, "constructor": false}, {"identifier": "createOrdinaryWallet", "parameters": "(String name,String password)", "modifiers": "private", "return": "void", "signature": "void createOrdinaryWallet(String name,String password)", "full_signature": "private void createOrdinaryWallet(String name,String password)", "class_method_signature": "CreateWalletPresenter.createOrdinaryWallet(String name,String password)", "testcase": false, "constructor": false}, {"identifier": "createHDWallet", "parameters": "(String name,String password)", "modifiers": "private", "return": "void", "signature": "void createHDWallet(String name,String password)", "full_signature": "private void createHDWallet(String name,String password)", "class_method_signature": "CreateWalletPresenter.createHDWallet(String name,String password)", "testcase": false, "constructor": false}], "file": "wallet/src/main/java/com/platon/aton/component/ui/presenter/CreateWalletPresenter.java"}, "focal_method": {"identifier": "createHDWallet", "parameters": "(String name,String password)", "modifiers": "private", "return": "void", "body": "private void createHDWallet(String name,String password){\n\n        WalletManager.getInstance()\n                .createWalletList(name, password)\n                .doOnSuccess(new Consumer<List<Wallet>>() {\n                    @Override\n                    public void accept(List<Wallet> walletList) throws Exception {\n\n                        //save db\n                        List<WalletEntity> walletEntities = new ArrayList<>();\n                        for(int i = 0; i < walletList.size(); i++) {\n                            Wallet wallet = walletList.get(i);\n                            WalletEntity walletEntity = wallet.buildWalletInfoEntity();\n                            if(i == 1){\n                                walletEntity.setShow(true);\n                            }\n                            walletEntities.add(walletEntity);\n                        }\n                        WalletDao.insertWalletInfoList(walletEntities);\n\n                        //save cache\n                        Wallet subFirstWallet = walletList.get(1);\n                        //subFirstWallet.setBackedUpPrompt(true);\n                        subFirstWallet.setShow(true);\n                        WalletManager.getInstance().addAndSelectedWalletStatusNotice(subFirstWallet);\n                        //WalletManager.getInstance().addWallet(subFirstWallet);\n\n\n                        PreferenceTool.putBoolean(Constants.Preference.KEY_OPERATE_MENU_FLAG, false);\n                    }\n                })\n                .compose(RxUtils.getSingleSchedulerTransformer())\n                .compose(RxUtils.bindToLifecycle(getView()))\n                .compose(LoadingTransformer.bindToSingleLifecycle(currentActivity()))\n                .subscribe(new Consumer<List<Wallet>>() {\n                    @Override\n                    public void accept(List<Wallet> walletList) throws Exception {\n                        if (isViewAttached()) {\n                            //EventPublisher.getInstance().sendWalletNumberChangeEvent();\n                            BackupWalletActivity.actionStart(currentActivity(), walletList.get(1));\n                            currentActivity().finish();\n                        }\n                    }\n                }, new Consumer<Throwable>() {\n                    @Override\n                    public void accept(Throwable throwable) throws Exception {\n                        if (isViewAttached() && throwable instanceof CustomThrowable) {\n                            CustomThrowable customThrowable = (CustomThrowable) throwable;\n                            if (customThrowable.getDetailMsgRes() != -1) {\n                                showLongToast(customThrowable.getDetailMsgRes());\n                            }\n                        }\n                    }\n                });\n\n    }", "signature": "void createHDWallet(String name,String password)", "full_signature": "private void createHDWallet(String name,String password)", "class_method_signature": "CreateWalletPresenter.createHDWallet(String name,String password)", "testcase": false, "constructor": false, "invocations": ["subscribe", "compose", "compose", "compose", "doOnSuccess", "createWalletList", "getInstance", "size", "get", "buildWalletInfoEntity", "setShow", "add", "insertWalletInfoList", "get", "setShow", "addAndSelectedWalletStatusNotice", "getInstance", "putBoolean", "getSingleSchedulerTransformer", "bindToLifecycle", "getView", "bindToSingleLifecycle", "currentActivity", "isViewAttached", "actionStart", "currentActivity", "get", "finish", "currentActivity", "isViewAttached", "getDetailMsgRes", "showLongToast", "getDetailMsgRes"]}, "repository": {"repo_id": 166324888, "url": "https://github.com/PlatONnetwork/ATON-Android", "language": "Java", "is_fork": false, "fork_count": 13, "stargazer_count": 8, "size": 118901, "license": "licensed"}}