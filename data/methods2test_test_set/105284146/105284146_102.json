{"test_class": {"identifier": "DefaultLimitViolationDetectorTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private Network network;", "modifier": "private", "type": "Network", "declarator": "network", "var_name": "network"}, {"original_string": "private Line line1;", "modifier": "private", "type": "Line", "declarator": "line1", "var_name": "line1"}, {"original_string": "private Line line2;", "modifier": "private", "type": "Line", "declarator": "line2", "var_name": "line2"}, {"original_string": "private VoltageLevel voltageLevelHv1;", "modifier": "private", "type": "VoltageLevel", "declarator": "voltageLevelHv1", "var_name": "voltageLevelHv1"}, {"original_string": "private LimitViolationDetector detector;", "modifier": "private", "type": "LimitViolationDetector", "declarator": "detector", "var_name": "detector"}, {"original_string": "private List<LimitViolation> violationsCollector;", "modifier": "private", "type": "List<LimitViolation>", "declarator": "violationsCollector", "var_name": "violationsCollector"}], "file": "security-analysis-api/src/test/java/com/powsybl/security/detectors/DefaultLimitViolationDetectorTest.java"}, "test_case": {"identifier": "detectHighVoltageViolation", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void detectHighVoltageViolation() {\n\n        voltageLevelHv1.getBusView().getBusStream()\n                .forEach(b -> detector.checkVoltage(b, 520, violationsCollector::add));\n\n        Assertions.assertThat(violationsCollector)\n                .hasSize(1)\n                .allSatisfy(v -> {\n                    Assert.assertEquals(LimitViolationType.HIGH_VOLTAGE, v.getLimitType());\n                    assertEquals(500, v.getLimit(), 0d);\n                    assertEquals(520, v.getValue(), 0d);\n                    assertNull(v.getSide());\n                    assertEquals(Integer.MAX_VALUE, v.getAcceptableDuration());\n                });\n    }", "signature": "void detectHighVoltageViolation()", "full_signature": "@Test public void detectHighVoltageViolation()", "class_method_signature": "DefaultLimitViolationDetectorTest.detectHighVoltageViolation()", "testcase": true, "constructor": false, "invocations": ["forEach", "getBusStream", "getBusView", "checkVoltage", "allSatisfy", "hasSize", "assertThat", "assertEquals", "getLimitType", "assertEquals", "getLimit", "assertEquals", "getValue", "assertNull", "getSide", "assertEquals", "getAcceptableDuration"]}, "focal_class": {"identifier": "DefaultLimitViolationDetector", "superclass": "extends AbstractContingencyBlindDetector", "interfaces": "", "fields": [{"original_string": "private final float limitReduction;", "modifier": "private final", "type": "float", "declarator": "limitReduction", "var_name": "limitReduction"}, {"original_string": "private final Set<Security.CurrentLimitType> currentLimitTypes;", "modifier": "private final", "type": "Set<Security.CurrentLimitType>", "declarator": "currentLimitTypes", "var_name": "currentLimitTypes"}], "methods": [{"identifier": "DefaultLimitViolationDetector", "parameters": "(float limitReduction, Collection<Security.CurrentLimitType> currentLimitTypes)", "modifiers": "public", "return": "", "signature": " DefaultLimitViolationDetector(float limitReduction, Collection<Security.CurrentLimitType> currentLimitTypes)", "full_signature": "public  DefaultLimitViolationDetector(float limitReduction, Collection<Security.CurrentLimitType> currentLimitTypes)", "class_method_signature": "DefaultLimitViolationDetector.DefaultLimitViolationDetector(float limitReduction, Collection<Security.CurrentLimitType> currentLimitTypes)", "testcase": false, "constructor": true}, {"identifier": "DefaultLimitViolationDetector", "parameters": "(Collection<Security.CurrentLimitType> currentLimitTypes)", "modifiers": "public", "return": "", "signature": " DefaultLimitViolationDetector(Collection<Security.CurrentLimitType> currentLimitTypes)", "full_signature": "public  DefaultLimitViolationDetector(Collection<Security.CurrentLimitType> currentLimitTypes)", "class_method_signature": "DefaultLimitViolationDetector.DefaultLimitViolationDetector(Collection<Security.CurrentLimitType> currentLimitTypes)", "testcase": false, "constructor": true}, {"identifier": "DefaultLimitViolationDetector", "parameters": "()", "modifiers": "public", "return": "", "signature": " DefaultLimitViolationDetector()", "full_signature": "public  DefaultLimitViolationDetector()", "class_method_signature": "DefaultLimitViolationDetector.DefaultLimitViolationDetector()", "testcase": false, "constructor": true}, {"identifier": "checkPermanentLimit", "parameters": "(Branch branch, Branch.Side side, double value, Consumer<LimitViolation> consumer)", "modifiers": "private", "return": "void", "signature": "void checkPermanentLimit(Branch branch, Branch.Side side, double value, Consumer<LimitViolation> consumer)", "full_signature": "private void checkPermanentLimit(Branch branch, Branch.Side side, double value, Consumer<LimitViolation> consumer)", "class_method_signature": "DefaultLimitViolationDetector.checkPermanentLimit(Branch branch, Branch.Side side, double value, Consumer<LimitViolation> consumer)", "testcase": false, "constructor": false}, {"identifier": "checkCurrent", "parameters": "(Branch branch, Branch.Side side, double value, Consumer<LimitViolation> consumer)", "modifiers": "@Override public", "return": "void", "signature": "void checkCurrent(Branch branch, Branch.Side side, double value, Consumer<LimitViolation> consumer)", "full_signature": "@Override public void checkCurrent(Branch branch, Branch.Side side, double value, Consumer<LimitViolation> consumer)", "class_method_signature": "DefaultLimitViolationDetector.checkCurrent(Branch branch, Branch.Side side, double value, Consumer<LimitViolation> consumer)", "testcase": false, "constructor": false}, {"identifier": "checkVoltage", "parameters": "(Bus bus, double value, Consumer<LimitViolation> consumer)", "modifiers": "@Override public", "return": "void", "signature": "void checkVoltage(Bus bus, double value, Consumer<LimitViolation> consumer)", "full_signature": "@Override public void checkVoltage(Bus bus, double value, Consumer<LimitViolation> consumer)", "class_method_signature": "DefaultLimitViolationDetector.checkVoltage(Bus bus, double value, Consumer<LimitViolation> consumer)", "testcase": false, "constructor": false}], "file": "security-analysis-api/src/main/java/com/powsybl/security/detectors/DefaultLimitViolationDetector.java"}, "focal_method": {"identifier": "checkVoltage", "parameters": "(Bus bus, double value, Consumer<LimitViolation> consumer)", "modifiers": "@Override public", "return": "void", "body": "@Override\n    public void checkVoltage(Bus bus, double value, Consumer<LimitViolation> consumer) {\n        VoltageLevel vl = bus.getVoltageLevel();\n        if (!Double.isNaN(vl.getLowVoltageLimit()) && value <= vl.getLowVoltageLimit()) {\n            consumer.accept(new LimitViolation(vl.getId(), vl.getOptionalName().orElse(null), LimitViolationType.LOW_VOLTAGE,\n                    vl.getLowVoltageLimit(), limitReduction, value));\n        }\n\n        if (!Double.isNaN(vl.getHighVoltageLimit()) && value >= vl.getHighVoltageLimit()) {\n            consumer.accept(new LimitViolation(vl.getId(), vl.getOptionalName().orElse(null), LimitViolationType.HIGH_VOLTAGE,\n                    vl.getHighVoltageLimit(), limitReduction, value));\n        }\n    }", "signature": "void checkVoltage(Bus bus, double value, Consumer<LimitViolation> consumer)", "full_signature": "@Override public void checkVoltage(Bus bus, double value, Consumer<LimitViolation> consumer)", "class_method_signature": "DefaultLimitViolationDetector.checkVoltage(Bus bus, double value, Consumer<LimitViolation> consumer)", "testcase": false, "constructor": false, "invocations": ["getVoltageLevel", "isNaN", "getLowVoltageLimit", "getLowVoltageLimit", "accept", "getId", "orElse", "getOptionalName", "getLowVoltageLimit", "isNaN", "getHighVoltageLimit", "getHighVoltageLimit", "accept", "getId", "orElse", "getOptionalName", "getHighVoltageLimit"]}, "repository": {"repo_id": 105284146, "url": "https://github.com/powsybl/powsybl-core", "stars": 53, "created": "9/29/2017 2:51:18 PM +00:00", "updates": "2020-01-27T10:39:13+00:00", "fork": "False", "license": "licensed"}}