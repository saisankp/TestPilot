{"test_class": {"identifier": "RepositoryImplTest", "superclass": "extends AbstractDateAwareTests", "interfaces": "implements C32DocumentDao, MessageSendable", "fields": [{"original_string": "RepositoryImpl repo;", "modifier": "", "type": "RepositoryImpl", "declarator": "repo", "var_name": "repo"}, {"original_string": "List<C32DocumentEntity> docsInsertedList;", "modifier": "", "type": "List<C32DocumentEntity>", "declarator": "docsInsertedList", "var_name": "docsInsertedList"}, {"original_string": "List<C32DocumentEntity> docsUpdatedList;", "modifier": "", "type": "List<C32DocumentEntity>", "declarator": "docsUpdatedList", "var_name": "docsUpdatedList"}, {"original_string": "List<C32DocumentEntity> docsRetrieved;", "modifier": "", "type": "List<C32DocumentEntity>", "declarator": "docsRetrieved", "var_name": "docsRetrieved"}, {"original_string": "List<AsyncRetrieveMessage> asyncMessageList;", "modifier": "", "type": "List<AsyncRetrieveMessage>", "declarator": "asyncMessageList", "var_name": "asyncMessageList"}, {"original_string": "JmsTemplate jmsTemplate;", "modifier": "", "type": "JmsTemplate", "declarator": "jmsTemplate", "var_name": "jmsTemplate"}], "file": "das/das_wrap_nwhin/src/test/java/org/osehra/das/repo/bluebutton/RepositoryImplTest.java"}, "test_case": {"identifier": "getStatus_todayAlreadyRequested", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n\tpublic void getStatus_todayAlreadyRequested() {\n\t\tdocsRetrieved = new ArrayList<C32DocumentEntity>(1);\n\t\tdocsRetrieved.add(new C32DocumentEntity(\"223344\", \"223344v10\", new java.sql.Timestamp(new Date().getTime()), \"incomplete\"));\n\t\tList<DocStatus> list = repo.getStatus(\"223344\", \"jill\");\n\t\tAssert.assertEquals(1, list.size());\n\t\t\n\t\tAssert.assertEquals(0, asyncMessageList.size());\n\t\tAssert.assertEquals(0, docsUpdatedList.size());\n\t\tAssert.assertEquals(0, docsInsertedList.size());\n\t}", "signature": "void getStatus_todayAlreadyRequested()", "full_signature": "@Test public void getStatus_todayAlreadyRequested()", "class_method_signature": "RepositoryImplTest.getStatus_todayAlreadyRequested()", "testcase": true, "constructor": false, "invocations": ["add", "getTime", "getStatus", "assertEquals", "size", "assertEquals", "size", "assertEquals", "size", "assertEquals", "size"]}, "focal_class": {"identifier": "RepositoryImpl", "superclass": "extends AbstractC32DaoAware", "interfaces": "implements Repository", "fields": [{"original_string": "protected MessageSendable messageSender;", "modifier": "protected", "type": "MessageSendable", "declarator": "messageSender", "var_name": "messageSender"}, {"original_string": "protected static final Log logger = LogFactory.getLog(RepositoryImpl.class);", "modifier": "protected static final", "type": "Log", "declarator": "logger = LogFactory.getLog(RepositoryImpl.class)", "var_name": "logger"}], "methods": [{"identifier": "getMessageSender", "parameters": "()", "modifiers": "public", "return": "MessageSendable", "signature": "MessageSendable getMessageSender()", "full_signature": "public MessageSendable getMessageSender()", "class_method_signature": "RepositoryImpl.getMessageSender()", "testcase": false, "constructor": false}, {"identifier": "setMessageSender", "parameters": "(MessageSendable messageSender)", "modifiers": "public", "return": "void", "signature": "void setMessageSender(MessageSendable messageSender)", "full_signature": "public void setMessageSender(MessageSendable messageSender)", "class_method_signature": "RepositoryImpl.setMessageSender(MessageSendable messageSender)", "testcase": false, "constructor": false}, {"identifier": "getStatus", "parameters": "(String patientId, String patientName)", "modifiers": "@Override public", "return": "List<DocStatus>", "signature": "List<DocStatus> getStatus(String patientId, String patientName)", "full_signature": "@Override public List<DocStatus> getStatus(String patientId, String patientName)", "class_method_signature": "RepositoryImpl.getStatus(String patientId, String patientName)", "testcase": false, "constructor": false}, {"identifier": "getDocument", "parameters": "(Date docDate, String patientId)", "modifiers": "@Override public", "return": "C32Document", "signature": "C32Document getDocument(Date docDate, String patientId)", "full_signature": "@Override public C32Document getDocument(Date docDate, String patientId)", "class_method_signature": "RepositoryImpl.getDocument(Date docDate, String patientId)", "testcase": false, "constructor": false}, {"identifier": "saveIncompleteDocument", "parameters": "(Date docDate, String ptId)", "modifiers": "protected", "return": "void", "signature": "void saveIncompleteDocument(Date docDate, String ptId)", "full_signature": "protected void saveIncompleteDocument(Date docDate, String ptId)", "class_method_signature": "RepositoryImpl.saveIncompleteDocument(Date docDate, String ptId)", "testcase": false, "constructor": false}, {"identifier": "getC32Doc", "parameters": "(C32DocumentEntity doc)", "modifiers": "protected", "return": "C32Document", "signature": "C32Document getC32Doc(C32DocumentEntity doc)", "full_signature": "protected C32Document getC32Doc(C32DocumentEntity doc)", "class_method_signature": "RepositoryImpl.getC32Doc(C32DocumentEntity doc)", "testcase": false, "constructor": false}, {"identifier": "getDocumentByDate", "parameters": "(Date today, List<C32DocumentEntity> docList)", "modifiers": "protected", "return": "C32DocumentEntity", "signature": "C32DocumentEntity getDocumentByDate(Date today, List<C32DocumentEntity> docList)", "full_signature": "protected C32DocumentEntity getDocumentByDate(Date today, List<C32DocumentEntity> docList)", "class_method_signature": "RepositoryImpl.getDocumentByDate(Date today, List<C32DocumentEntity> docList)", "testcase": false, "constructor": false}, {"identifier": "getCompletedDocuments", "parameters": "(List<C32DocumentEntity> docList)", "modifiers": "protected", "return": "List<C32DocumentEntity>", "signature": "List<C32DocumentEntity> getCompletedDocuments(List<C32DocumentEntity> docList)", "full_signature": "protected List<C32DocumentEntity> getCompletedDocuments(List<C32DocumentEntity> docList)", "class_method_signature": "RepositoryImpl.getCompletedDocuments(List<C32DocumentEntity> docList)", "testcase": false, "constructor": false}, {"identifier": "getAllStoredDocuments", "parameters": "(String patientId)", "modifiers": "protected", "return": "List<C32DocumentEntity>", "signature": "List<C32DocumentEntity> getAllStoredDocuments(String patientId)", "full_signature": "protected List<C32DocumentEntity> getAllStoredDocuments(String patientId)", "class_method_signature": "RepositoryImpl.getAllStoredDocuments(String patientId)", "testcase": false, "constructor": false}, {"identifier": "buildStatusList", "parameters": "(List<C32DocumentEntity> docList)", "modifiers": "protected", "return": "List<DocStatus>", "signature": "List<DocStatus> buildStatusList(List<C32DocumentEntity> docList)", "full_signature": "protected List<DocStatus> buildStatusList(List<C32DocumentEntity> docList)", "class_method_signature": "RepositoryImpl.buildStatusList(List<C32DocumentEntity> docList)", "testcase": false, "constructor": false}, {"identifier": "getDocStatuses", "parameters": "(List<C32DocumentEntity> docList)", "modifiers": "protected", "return": "List<DocStatus>", "signature": "List<DocStatus> getDocStatuses(List<C32DocumentEntity> docList)", "full_signature": "protected List<DocStatus> getDocStatuses(List<C32DocumentEntity> docList)", "class_method_signature": "RepositoryImpl.getDocStatuses(List<C32DocumentEntity> docList)", "testcase": false, "constructor": false}, {"identifier": "getLimitedStatuses", "parameters": "(Date today, List<C32DocumentEntity> docList)", "modifiers": "protected", "return": "List<C32DocumentEntity>", "signature": "List<C32DocumentEntity> getLimitedStatuses(Date today, List<C32DocumentEntity> docList)", "full_signature": "protected List<C32DocumentEntity> getLimitedStatuses(Date today, List<C32DocumentEntity> docList)", "class_method_signature": "RepositoryImpl.getLimitedStatuses(Date today, List<C32DocumentEntity> docList)", "testcase": false, "constructor": false}, {"identifier": "sendMessageToRetrieve", "parameters": "(final Date today, final String patientId, final String ptName)", "modifiers": "protected", "return": "void", "signature": "void sendMessageToRetrieve(final Date today, final String patientId, final String ptName)", "full_signature": "protected void sendMessageToRetrieve(final Date today, final String patientId, final String ptName)", "class_method_signature": "RepositoryImpl.sendMessageToRetrieve(final Date today, final String patientId, final String ptName)", "testcase": false, "constructor": false}], "file": "das/das_wrap_nwhin/src/main/java/org/osehra/das/repo/bluebutton/RepositoryImpl.java"}, "focal_method": {"identifier": "getStatus", "parameters": "(String patientId, String patientName)", "modifiers": "@Override public", "return": "List<DocStatus>", "body": "@Override\n\tpublic List<DocStatus> getStatus(String patientId, String patientName) {\n\t\tList<C32DocumentEntity> docList = getAllStoredDocuments(patientId);\n\n\t\tDate today = new Date();\n\t\t\n\t\tif (getDocumentByDate(today, docList)==null) {\n\t\t\tsaveIncompleteDocument(today, patientId);\n\t\t\tsendMessageToRetrieve(today, patientId, patientName);\n\t\t\tdocList = getAllStoredDocuments(patientId);\n\t\t}\n\t\tdocList = getLimitedStatuses(today, docList);\n\t\treturn getDocStatuses(docList);\n\t}", "signature": "List<DocStatus> getStatus(String patientId, String patientName)", "full_signature": "@Override public List<DocStatus> getStatus(String patientId, String patientName)", "class_method_signature": "RepositoryImpl.getStatus(String patientId, String patientName)", "testcase": false, "constructor": false, "invocations": ["getAllStoredDocuments", "getDocumentByDate", "saveIncompleteDocument", "sendMessageToRetrieve", "getAllStoredDocuments", "getLimitedStatuses", "getDocStatuses"]}, "repository": {"repo_id": 7023911, "url": "https://github.com/WorldVistA/Blue-Button-Document-Adapter", "language": "Java", "is_fork": false, "fork_count": 3, "stargazer_count": 5, "size": 2081, "license": "licensed"}}