{"test_class": {"identifier": "KTableFilterTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "final private Serde<Integer> intSerde = Serdes.Integer();", "modifier": "final private", "type": "Serde<Integer>", "declarator": "intSerde = Serdes.Integer()", "var_name": "intSerde"}, {"original_string": "final private Serde<String> stringSerde = Serdes.String();", "modifier": "final private", "type": "Serde<String>", "declarator": "stringSerde = Serdes.String()", "var_name": "stringSerde"}, {"original_string": "private KStreamTestDriver driver = null;", "modifier": "private", "type": "KStreamTestDriver", "declarator": "driver = null", "var_name": "driver"}, {"original_string": "private File stateDir = null;", "modifier": "private", "type": "File", "declarator": "stateDir = null", "var_name": "stateDir"}], "file": "streams/src/test/java/org/apache/kafka/streams/kstream/internals/KTableFilterTest.java"}, "test_case": {"identifier": "testSendingOldValue", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testSendingOldValue() throws IOException {\n        KStreamBuilder builder = new KStreamBuilder();\n\n        String topic1 = \"topic1\";\n\n        KTableImpl<String, Integer, Integer> table1 =\n                (KTableImpl<String, Integer, Integer>) builder.table(stringSerde, intSerde, topic1);\n        KTableImpl<String, Integer, Integer> table2 = (KTableImpl<String, Integer, Integer>) table1.filter(\n                new Predicate<String, Integer>() {\n                    @Override\n                    public boolean test(String key, Integer value) {\n                        return (value % 2) == 0;\n                    }\n                });\n\n        table2.enableSendingOldValues();\n\n        MockProcessorSupplier<String, Integer> proc1 = new MockProcessorSupplier<>();\n        MockProcessorSupplier<String, Integer> proc2 = new MockProcessorSupplier<>();\n\n        builder.addProcessor(\"proc1\", proc1, table1.name);\n        builder.addProcessor(\"proc2\", proc2, table2.name);\n\n        driver = new KStreamTestDriver(builder, stateDir, null, null);\n\n        driver.process(topic1, \"A\", 1);\n        driver.process(topic1, \"B\", 1);\n        driver.process(topic1, \"C\", 1);\n\n        proc1.checkAndClearProcessResult(\"A:(1<-null)\", \"B:(1<-null)\", \"C:(1<-null)\");\n        proc2.checkEmptyAndClearProcessResult();\n\n        driver.process(topic1, \"A\", 2);\n        driver.process(topic1, \"B\", 2);\n\n        proc1.checkAndClearProcessResult(\"A:(2<-1)\", \"B:(2<-1)\");\n        proc2.checkAndClearProcessResult(\"A:(2<-null)\", \"B:(2<-null)\");\n\n        driver.process(topic1, \"A\", 3);\n\n        proc1.checkAndClearProcessResult(\"A:(3<-2)\");\n        proc2.checkAndClearProcessResult(\"A:(null<-2)\");\n\n        driver.process(topic1, \"A\", null);\n        driver.process(topic1, \"B\", null);\n\n        proc1.checkAndClearProcessResult(\"A:(null<-3)\", \"B:(null<-2)\");\n        proc2.checkAndClearProcessResult(\"B:(null<-2)\");\n    }", "signature": "void testSendingOldValue()", "full_signature": "@Test public void testSendingOldValue()", "class_method_signature": "KTableFilterTest.testSendingOldValue()", "testcase": true, "constructor": false, "invocations": ["table", "filter", "enableSendingOldValues", "addProcessor", "addProcessor", "process", "process", "process", "checkAndClearProcessResult", "checkEmptyAndClearProcessResult", "process", "process", "checkAndClearProcessResult", "checkAndClearProcessResult", "process", "checkAndClearProcessResult", "checkAndClearProcessResult", "process", "process", "checkAndClearProcessResult", "checkAndClearProcessResult"]}, "focal_class": {"identifier": "KTableFilter", "superclass": "", "interfaces": "implements KTableProcessorSupplier<K, V, V>", "fields": [{"original_string": "private final KTableImpl<K, ?, V> parent;", "modifier": "private final", "type": "KTableImpl<K, ?, V>", "declarator": "parent", "var_name": "parent"}, {"original_string": "private final Predicate<K, V> predicate;", "modifier": "private final", "type": "Predicate<K, V>", "declarator": "predicate", "var_name": "predicate"}, {"original_string": "private final boolean filterNot;", "modifier": "private final", "type": "boolean", "declarator": "filterNot", "var_name": "filterNot"}, {"original_string": "private boolean sendOldValues = false;", "modifier": "private", "type": "boolean", "declarator": "sendOldValues = false", "var_name": "sendOldValues"}], "methods": [{"identifier": "KTableFilter", "parameters": "(KTableImpl<K, ?, V> parent, Predicate<K, V> predicate, boolean filterNot)", "modifiers": "public", "return": "", "signature": " KTableFilter(KTableImpl<K, ?, V> parent, Predicate<K, V> predicate, boolean filterNot)", "full_signature": "public  KTableFilter(KTableImpl<K, ?, V> parent, Predicate<K, V> predicate, boolean filterNot)", "class_method_signature": "KTableFilter.KTableFilter(KTableImpl<K, ?, V> parent, Predicate<K, V> predicate, boolean filterNot)", "testcase": false, "constructor": true}, {"identifier": "get", "parameters": "()", "modifiers": "@Override public", "return": "Processor<K, Change<V>>", "signature": "Processor<K, Change<V>> get()", "full_signature": "@Override public Processor<K, Change<V>> get()", "class_method_signature": "KTableFilter.get()", "testcase": false, "constructor": false}, {"identifier": "view", "parameters": "()", "modifiers": "@Override public", "return": "KTableValueGetterSupplier<K, V>", "signature": "KTableValueGetterSupplier<K, V> view()", "full_signature": "@Override public KTableValueGetterSupplier<K, V> view()", "class_method_signature": "KTableFilter.view()", "testcase": false, "constructor": false}, {"identifier": "enableSendingOldValues", "parameters": "()", "modifiers": "@Override public", "return": "void", "signature": "void enableSendingOldValues()", "full_signature": "@Override public void enableSendingOldValues()", "class_method_signature": "KTableFilter.enableSendingOldValues()", "testcase": false, "constructor": false}, {"identifier": "computeValue", "parameters": "(K key, V value)", "modifiers": "private", "return": "V", "signature": "V computeValue(K key, V value)", "full_signature": "private V computeValue(K key, V value)", "class_method_signature": "KTableFilter.computeValue(K key, V value)", "testcase": false, "constructor": false}], "file": "streams/src/main/java/org/apache/kafka/streams/kstream/internals/KTableFilter.java"}, "focal_method": {"identifier": "enableSendingOldValues", "parameters": "()", "modifiers": "@Override public", "return": "void", "body": "@Override\n    public void enableSendingOldValues() {\n        parent.enableSendingOldValues();\n        sendOldValues = true;\n    }", "signature": "void enableSendingOldValues()", "full_signature": "@Override public void enableSendingOldValues()", "class_method_signature": "KTableFilter.enableSendingOldValues()", "testcase": false, "constructor": false, "invocations": ["enableSendingOldValues"]}, "repository": {"repo_id": 135978112, "url": "https://github.com/anurnomeru/kafka-0.10.0.1-source-reading", "language": "Java", "is_fork": false, "fork_count": 1, "stargazer_count": 7, "size": 2953, "license": "licensed"}}