{"test_class": {"identifier": "InMemoryDBSectionProcessingStrategyTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private InMemoryDatabase inMemoryDatabase;", "modifier": "private", "type": "InMemoryDatabase", "declarator": "inMemoryDatabase", "var_name": "inMemoryDatabase"}, {"original_string": "private IObject mockObject;", "modifier": "private", "type": "IObject", "declarator": "mockObject", "var_name": "mockObject"}], "file": "Starters/InMemoryDatabaseServiceStarter/InMemoryDatabaseStarter/src/test/java/info/smart_tools/smartactors/in_memory_database_service_starter/in_memory_database_starter/InMemoryDBSectionProcessingStrategyTest.java"}, "test_case": {"identifier": "testLoadingConfig", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testLoadingConfig() throws InvalidArgumentException, ResolutionException, ConfigurationProcessingException, ChangeValueException, IDatabaseException {\n        List<String> iObjects = new LinkedList<>();\n        iObjects.add(\"{\\\"foo\\\": \\\"bar\\\"}\");\n        iObjects.add(\"{\\\"foo1\\\": \\\"bar1\\\"}\");\n        IObject inMemoryDatabaseConfig = new DSObject(\"{\\\"name\\\":\\\"my_collection_name\\\"}\");\n        List<IObject> inMemoryDb = new ArrayList<>();\n        DSObject config = new DSObject();\n        inMemoryDatabaseConfig.setValue(new FieldName(\"documents\"), iObjects);\n        inMemoryDb.add(inMemoryDatabaseConfig);\n        InMemoryDBSectionProcessingStrategy sectionProcessingStrategy = new InMemoryDBSectionProcessingStrategy();\n        config.setValue(new FieldName(\"inMemoryDb\"), inMemoryDb);\n        sectionProcessingStrategy.onLoadConfig(config);\n        verify(inMemoryDatabase).createCollection(\"my_collection_name\");\n        verify(inMemoryDatabase, times(2)).insert(mockObject, \"my_collection_name\");\n    }", "signature": "void testLoadingConfig()", "full_signature": "@Test public void testLoadingConfig()", "class_method_signature": "InMemoryDBSectionProcessingStrategyTest.testLoadingConfig()", "testcase": true, "constructor": false, "invocations": ["add", "add", "setValue", "add", "setValue", "onLoadConfig", "createCollection", "verify", "insert", "verify", "times"]}, "focal_class": {"identifier": "InMemoryDBSectionProcessingStrategy", "superclass": "", "interfaces": "implements ISectionStrategy", "fields": [{"original_string": "private final IFieldName name;", "modifier": "private final", "type": "IFieldName", "declarator": "name", "var_name": "name"}, {"original_string": "private final IFieldName nameFieldName;", "modifier": "private final", "type": "IFieldName", "declarator": "nameFieldName", "var_name": "nameFieldName"}, {"original_string": "private final IFieldName documentsFieldName;", "modifier": "private final", "type": "IFieldName", "declarator": "documentsFieldName", "var_name": "documentsFieldName"}], "methods": [{"identifier": "InMemoryDBSectionProcessingStrategy", "parameters": "()", "modifiers": "", "return": "", "signature": " InMemoryDBSectionProcessingStrategy()", "full_signature": "  InMemoryDBSectionProcessingStrategy()", "class_method_signature": "InMemoryDBSectionProcessingStrategy.InMemoryDBSectionProcessingStrategy()", "testcase": false, "constructor": true}, {"identifier": "onLoadConfig", "parameters": "(final IObject config)", "modifiers": "@Override public", "return": "void", "signature": "void onLoadConfig(final IObject config)", "full_signature": "@Override public void onLoadConfig(final IObject config)", "class_method_signature": "InMemoryDBSectionProcessingStrategy.onLoadConfig(final IObject config)", "testcase": false, "constructor": false}, {"identifier": "getSectionName", "parameters": "()", "modifiers": "@Override public", "return": "IFieldName", "signature": "IFieldName getSectionName()", "full_signature": "@Override public IFieldName getSectionName()", "class_method_signature": "InMemoryDBSectionProcessingStrategy.getSectionName()", "testcase": false, "constructor": false}], "file": "Starters/InMemoryDatabaseServiceStarter/InMemoryDatabaseStarter/src/main/java/info/smart_tools/smartactors/in_memory_database_service_starter/in_memory_database_starter/InMemoryDBSectionProcessingStrategy.java"}, "focal_method": {"identifier": "onLoadConfig", "parameters": "(final IObject config)", "modifiers": "@Override public", "return": "void", "body": "@Override\n    public void onLoadConfig(final IObject config) throws ConfigurationProcessingException {\n        try {\n            List<IObject> databaseObject = (List<IObject>) config.getValue(name);\n            IDatabase dataBase = IOC.resolve(Keys.getOrAdd(InMemoryDatabase.class.getCanonicalName()));\n            for (IObject collection : databaseObject) {\n                String collectionName = (String) collection.getValue(nameFieldName);\n                dataBase.createCollection(collectionName);\n                List<String> documents = (List<String>) collection.getValue(documentsFieldName);\n                for (String document : documents) {\n                    dataBase.insert(IOC.resolve(Keys.getOrAdd(\"IObjectByString\"), document), collectionName);\n                }\n            }\n        } catch (ReadValueException | InvalidArgumentException e) {\n            throw new ConfigurationProcessingException(\"Error occurred loading \\\"inMemoryDb\\\" configuration section.\", e);\n        } catch (ResolutionException e) {\n            throw new ConfigurationProcessingException(\"Error occurred resolving \\\"InMemoryDatabase\\\".\", e);\n        } catch (IDatabaseException e) {\n            throw new ConfigurationProcessingException(e);\n        }\n    }", "signature": "void onLoadConfig(final IObject config)", "full_signature": "@Override public void onLoadConfig(final IObject config)", "class_method_signature": "InMemoryDBSectionProcessingStrategy.onLoadConfig(final IObject config)", "testcase": false, "constructor": false, "invocations": ["getValue", "resolve", "getOrAdd", "getCanonicalName", "getValue", "createCollection", "getValue", "insert", "resolve", "getOrAdd"]}, "repository": {"repo_id": 52972024, "url": "https://github.com/SmartTools/smartactors-core", "language": "Java", "is_fork": false, "fork_count": 7, "stargazer_count": 17, "size": 58816, "license": "licensed"}}