{"test_class": {"identifier": "urn_perun_group_attribute_def_virt_adDisplayName_o365muTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private final urn_perun_group_attribute_def_virt_adDisplayName_o365mu classInstance = new urn_perun_group_attribute_def_virt_adDisplayName_o365mu();", "modifier": "private final", "type": "urn_perun_group_attribute_def_virt_adDisplayName_o365mu", "declarator": "classInstance = new urn_perun_group_attribute_def_virt_adDisplayName_o365mu()", "var_name": "classInstance"}, {"original_string": "private final AttributeDefinition adDisplayNameO365MuAttrDef = classInstance.getAttributeDefinition();", "modifier": "private final", "type": "AttributeDefinition", "declarator": "adDisplayNameO365MuAttrDef = classInstance.getAttributeDefinition()", "var_name": "adDisplayNameO365MuAttrDef"}, {"original_string": "private final Group groupA = setUpGroup(1, null, \"groupA\", \"A\");", "modifier": "private final", "type": "Group", "declarator": "groupA = setUpGroup(1, null, \"groupA\", \"A\")", "var_name": "groupA"}, {"original_string": "private final Group groupB = setUpGroup(2, 1, \"groupB\", \"B\");", "modifier": "private final", "type": "Group", "declarator": "groupB = setUpGroup(2, 1, \"groupB\", \"B\")", "var_name": "groupB"}, {"original_string": "private final Group groupC = setUpGroup(3, 2, \"groupC\", \"C\");", "modifier": "private final", "type": "Group", "declarator": "groupC = setUpGroup(3, 2, \"groupC\", \"C\")", "var_name": "groupC"}, {"original_string": "private final Group groupD = setUpGroup(4, 3, \"groupD\", \"D\");", "modifier": "private final", "type": "Group", "declarator": "groupD = setUpGroup(4, 3, \"groupD\", \"D\")", "var_name": "groupD"}, {"original_string": "private final Group groupE = setUpGroup(5, 4, \"groupE\", \"E\");", "modifier": "private final", "type": "Group", "declarator": "groupE = setUpGroup(5, 4, \"groupE\", \"E\")", "var_name": "groupE"}, {"original_string": "private final Group groupF = setUpGroup(6, 1, \"groupF\", \"F\");", "modifier": "private final", "type": "Group", "declarator": "groupF = setUpGroup(6, 1, \"groupF\", \"F\")", "var_name": "groupF"}, {"original_string": "private final Group groupWithoutAttributes = setUpGroup(7, null, \"groupWithoutAttributes\", \"groupWithoutAttributes\");", "modifier": "private final", "type": "Group", "declarator": "groupWithoutAttributes = setUpGroup(7, null, \"groupWithoutAttributes\", \"groupWithoutAttributes\")", "var_name": "groupWithoutAttributes"}, {"original_string": "private final AttributeDefinition defaultAdDisplayNameAttrDef = setUpGroupAttributeDefinition(1, \"adDisplayName:o365mu\", String.class.getName());", "modifier": "private final", "type": "AttributeDefinition", "declarator": "defaultAdDisplayNameAttrDef = setUpGroupAttributeDefinition(1, \"adDisplayName:o365mu\", String.class.getName())", "var_name": "defaultAdDisplayNameAttrDef"}, {"original_string": "private final AttributeDefinition inetCisprAttrDef = setUpGroupAttributeDefinition(2, \"inetCispr\", String.class.getName());", "modifier": "private final", "type": "AttributeDefinition", "declarator": "inetCisprAttrDef = setUpGroupAttributeDefinition(2, \"inetCispr\", String.class.getName())", "var_name": "inetCisprAttrDef"}, {"original_string": "private final AttributeDefinition inetGroupNameCSAttrDef = setUpGroupAttributeDefinition(3, \"inetGroupNameCS\", String.class.getName());", "modifier": "private final", "type": "AttributeDefinition", "declarator": "inetGroupNameCSAttrDef = setUpGroupAttributeDefinition(3, \"inetGroupNameCS\", String.class.getName())", "var_name": "inetGroupNameCSAttrDef"}, {"original_string": "private final AttributeDefinition inetGroupNameAbbENAttrDef = setUpGroupAttributeDefinition(4, \"inetGroupNameAbbEN\", String.class.getName());", "modifier": "private final", "type": "AttributeDefinition", "declarator": "inetGroupNameAbbENAttrDef = setUpGroupAttributeDefinition(4, \"inetGroupNameAbbEN\", String.class.getName())", "var_name": "inetGroupNameAbbENAttrDef"}, {"original_string": "private final AttributeDefinition inetWorkplacesTypeCSAttrDef = setUpGroupAttributeDefinition(5, \"inetWorkplacesTypeCS\", String.class.getName());", "modifier": "private final", "type": "AttributeDefinition", "declarator": "inetWorkplacesTypeCSAttrDef = setUpGroupAttributeDefinition(5, \"inetWorkplacesTypeCS\", String.class.getName())", "var_name": "inetWorkplacesTypeCSAttrDef"}, {"original_string": "private final String typeOfWorkplacesA = \"typeA\";", "modifier": "private final", "type": "String", "declarator": "typeOfWorkplacesA = \"typeA\"", "var_name": "typeOfWorkplacesA"}, {"original_string": "private final String typeOfWorkplacesB = \"typeB\";", "modifier": "private final", "type": "String", "declarator": "typeOfWorkplacesB = \"typeB\"", "var_name": "typeOfWorkplacesB"}, {"original_string": "private final String typeOfWorkplacesC = \"typeC\";", "modifier": "private final", "type": "String", "declarator": "typeOfWorkplacesC = \"typeC\"", "var_name": "typeOfWorkplacesC"}, {"original_string": "private final String predefinedDisplayName = \"specialTestingPredefinedDisplayName\";", "modifier": "private final", "type": "String", "declarator": "predefinedDisplayName = \"specialTestingPredefinedDisplayName\"", "var_name": "predefinedDisplayName"}, {"original_string": "private PerunSessionImpl sess;", "modifier": "private", "type": "PerunSessionImpl", "declarator": "sess", "var_name": "sess"}], "file": "perun-core/src/test/java/cz/metacentrum/perun/core/impl/modules/attributes/urn_perun_group_attribute_def_virt_adDisplayName_o365muTest.java"}, "test_case": {"identifier": "getAttributeValueForGroupE", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n\tpublic void getAttributeValueForGroupE() {\n\t\tString attributeValue = classInstance.getAttributeValue(sess, groupE, adDisplayNameO365MuAttrDef).valueAsString();\n\t\tassertNotNull(attributeValue);\n\t\tassertEquals(groupE.getName() + \", \" + groupC.getDescription() + \", \" + typeOfWorkplacesC, attributeValue);\n\t}", "signature": "void getAttributeValueForGroupE()", "full_signature": "@Test public void getAttributeValueForGroupE()", "class_method_signature": "urn_perun_group_attribute_def_virt_adDisplayName_o365muTest.getAttributeValueForGroupE()", "testcase": true, "constructor": false, "invocations": ["valueAsString", "getAttributeValue", "assertNotNull", "assertEquals", "getName", "getDescription"]}, "focal_class": {"identifier": "urn_perun_group_attribute_def_virt_adDisplayName_o365mu", "superclass": "extends GroupVirtualAttributesModuleAbstract", "interfaces": "implements GroupVirtualAttributesModuleImplApi", "fields": [{"original_string": "private final static Logger log = LoggerFactory.getLogger(urn_perun_group_attribute_def_virt_adDisplayName_o365mu.class);", "modifier": "private final static", "type": "Logger", "declarator": "log = LoggerFactory.getLogger(urn_perun_group_attribute_def_virt_adDisplayName_o365mu.class)", "var_name": "log"}, {"original_string": "private static final String A_G_D_AD_DISPLAY_NAME_O365MU = AttributesManager.NS_GROUP_ATTR_DEF + \":adDisplayName:o365mu\";", "modifier": "private static final", "type": "String", "declarator": "A_G_D_AD_DISPLAY_NAME_O365MU = AttributesManager.NS_GROUP_ATTR_DEF + \":adDisplayName:o365mu\"", "var_name": "A_G_D_AD_DISPLAY_NAME_O365MU"}, {"original_string": "private static final String A_G_D_INET_CISPR = AttributesManager.NS_GROUP_ATTR_DEF + \":inetCispr\";", "modifier": "private static final", "type": "String", "declarator": "A_G_D_INET_CISPR = AttributesManager.NS_GROUP_ATTR_DEF + \":inetCispr\"", "var_name": "A_G_D_INET_CISPR"}, {"original_string": "private static final String A_G_D_INET_GROUP_NAME_CS = AttributesManager.NS_GROUP_ATTR_DEF + \":inetGroupNameCS\";", "modifier": "private static final", "type": "String", "declarator": "A_G_D_INET_GROUP_NAME_CS = AttributesManager.NS_GROUP_ATTR_DEF + \":inetGroupNameCS\"", "var_name": "A_G_D_INET_GROUP_NAME_CS"}, {"original_string": "private static final String A_G_D_INET_GROUP_NAME_ABB_EN = AttributesManager.NS_GROUP_ATTR_DEF + \":inetGroupNameAbbEN\";", "modifier": "private static final", "type": "String", "declarator": "A_G_D_INET_GROUP_NAME_ABB_EN = AttributesManager.NS_GROUP_ATTR_DEF + \":inetGroupNameAbbEN\"", "var_name": "A_G_D_INET_GROUP_NAME_ABB_EN"}, {"original_string": "private static final String A_G_D_INET_WORKPLACES_TYPE_CS = AttributesManager.NS_GROUP_ATTR_DEF + \":inetWorkplacesTypeCS\";", "modifier": "private static final", "type": "String", "declarator": "A_G_D_INET_WORKPLACES_TYPE_CS = AttributesManager.NS_GROUP_ATTR_DEF + \":inetWorkplacesTypeCS\"", "var_name": "A_G_D_INET_WORKPLACES_TYPE_CS"}, {"original_string": "private static final Pattern partOfUniversityPattern = Pattern.compile(\"^[1-9][1-9][0]{4}$\");", "modifier": "private static final", "type": "Pattern", "declarator": "partOfUniversityPattern = Pattern.compile(\"^[1-9][1-9][0]{4}$\")", "var_name": "partOfUniversityPattern"}, {"original_string": "private static final Pattern otherWorkplacesPattern = Pattern.compile(\"^[1-9][0-9]{5}$\");", "modifier": "private static final", "type": "Pattern", "declarator": "otherWorkplacesPattern = Pattern.compile(\"^[1-9][0-9]{5}$\")", "var_name": "otherWorkplacesPattern"}, {"original_string": "private static final String TOP_LEVEL_GROUP_CISPR = \"000000\";", "modifier": "private static final", "type": "String", "declarator": "TOP_LEVEL_GROUP_CISPR = \"000000\"", "var_name": "TOP_LEVEL_GROUP_CISPR"}, {"original_string": "private static final String TOP_LEVEL_PREFIX = \"MUNI\";", "modifier": "private static final", "type": "String", "declarator": "TOP_LEVEL_PREFIX = \"MUNI\"", "var_name": "TOP_LEVEL_PREFIX"}], "methods": [{"identifier": "getAttributeValue", "parameters": "(PerunSessionImpl sess, Group group, AttributeDefinition attributeDefinition)", "modifiers": "@Override public", "return": "Attribute", "signature": "Attribute getAttributeValue(PerunSessionImpl sess, Group group, AttributeDefinition attributeDefinition)", "full_signature": "@Override public Attribute getAttributeValue(PerunSessionImpl sess, Group group, AttributeDefinition attributeDefinition)", "class_method_signature": "urn_perun_group_attribute_def_virt_adDisplayName_o365mu.getAttributeValue(PerunSessionImpl sess, Group group, AttributeDefinition attributeDefinition)", "testcase": false, "constructor": false}, {"identifier": "getParentGroupAbbreviation", "parameters": "(PerunSessionImpl sess, Group group)", "modifiers": "private", "return": "String", "signature": "String getParentGroupAbbreviation(PerunSessionImpl sess, Group group)", "full_signature": "private String getParentGroupAbbreviation(PerunSessionImpl sess, Group group)", "class_method_signature": "urn_perun_group_attribute_def_virt_adDisplayName_o365mu.getParentGroupAbbreviation(PerunSessionImpl sess, Group group)", "testcase": false, "constructor": false}, {"identifier": "getStringValueOfGroupAttribute", "parameters": "(PerunSessionImpl sess, Group group, String nameOfAttribute)", "modifiers": "private", "return": "String", "signature": "String getStringValueOfGroupAttribute(PerunSessionImpl sess, Group group, String nameOfAttribute)", "full_signature": "private String getStringValueOfGroupAttribute(PerunSessionImpl sess, Group group, String nameOfAttribute)", "class_method_signature": "urn_perun_group_attribute_def_virt_adDisplayName_o365mu.getStringValueOfGroupAttribute(PerunSessionImpl sess, Group group, String nameOfAttribute)", "testcase": false, "constructor": false}, {"identifier": "getAttributeDefinition", "parameters": "()", "modifiers": "@Override public", "return": "AttributeDefinition", "signature": "AttributeDefinition getAttributeDefinition()", "full_signature": "@Override public AttributeDefinition getAttributeDefinition()", "class_method_signature": "urn_perun_group_attribute_def_virt_adDisplayName_o365mu.getAttributeDefinition()", "testcase": false, "constructor": false}], "file": "perun-core/src/main/java/cz/metacentrum/perun/core/impl/modules/attributes/urn_perun_group_attribute_def_virt_adDisplayName_o365mu.java"}, "focal_method": {"identifier": "getAttributeValue", "parameters": "(PerunSessionImpl sess, Group group, AttributeDefinition attributeDefinition)", "modifiers": "@Override public", "return": "Attribute", "body": "@Override\n\tpublic Attribute getAttributeValue(PerunSessionImpl sess, Group group, AttributeDefinition attributeDefinition) {\n\t\tAttribute attribute = new Attribute(attributeDefinition);\n\n\t\tString defaultAdDisplayName = getStringValueOfGroupAttribute(sess, group, A_G_D_AD_DISPLAY_NAME_O365MU);\n\t\tif(defaultAdDisplayName != null) {\n\t\t\t//there is a default value and we can take it\n\t\t\tattribute.setValue(defaultAdDisplayName);\n\t\t\treturn attribute;\n\t\t}\n\n\t\t//If there is no way to take default value, count a new one from other attributes (if possible)\n\t\t//if any of these values are null, return empty attribute instead\n\t\tString cispr = getStringValueOfGroupAttribute(sess, group, A_G_D_INET_CISPR);\n\t\tif (cispr == null) return attribute;\n\t\tString typeOfWorkplaces = getStringValueOfGroupAttribute(sess, group, A_G_D_INET_WORKPLACES_TYPE_CS);\n\t\tif (typeOfWorkplaces == null) return attribute;\n\n\t\tString finalName = null;\n\t\tMatcher partOfUniversityMatcher = partOfUniversityPattern.matcher(cispr);\n\t\tMatcher otherWorkplacesMatcher = otherWorkplacesPattern.matcher(cispr);\n\n\t\t//Now there is a hardcoded logic defined by the prefix of number in CISPR\n\t\tif (cispr.equals(TOP_LEVEL_GROUP_CISPR)) {\n\t\t\t//if this is top level group, use predefined name + type of workplaces (defined by specific tree where group exists)\n\t\t\tfinalName = TOP_LEVEL_PREFIX + \", \" + typeOfWorkplaces;\n\t\t} else if (partOfUniversityMatcher.matches()) {\n\t\t\t//if this workplace is part of university with cispr [1-9][1-9]0000, use name of group + type of workplaces\n\t\t\tString groupNameCS = getStringValueOfGroupAttribute(sess, group, A_G_D_INET_GROUP_NAME_CS);\n\t\t\t//we need not-null name of group to count this value correctly\n\t\t\tif(groupNameCS == null) return attribute;\n\t\t\tfinalName = groupNameCS + \", \" + typeOfWorkplaces;\n\t\t} else if (otherWorkplacesMatcher.matches()) {\n\t\t\t//other parts of university with expression as [1-9][0-9]{5}\n\t\t\t//for these groups we need to find parent group with part of university cispr and use also abbreviation for it in the final name\n\t\t\tString groupNameCS = getStringValueOfGroupAttribute(sess, group, A_G_D_INET_GROUP_NAME_CS);\n\t\t\tif (groupNameCS != null) {\n\t\t\t\tString abbreviation = getParentGroupAbbreviation(sess, group);\n\t\t\t\t//we can use abbreviation only if exists\n\t\t\t\tif (abbreviation != null) {\n\t\t\t\t\tfinalName = groupNameCS + \", \" + abbreviation + \", \" + typeOfWorkplaces;\n\t\t\t\t} else {\n\t\t\t\t\tfinalName = groupNameCS + \", \" + typeOfWorkplaces;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t//for other type of groups as ^[0][0-9]{5}$ (except 000000) we don't want to generate any displayName\n\n\t\tattribute.setValue(finalName);\n\t\treturn attribute;\n\t}", "signature": "Attribute getAttributeValue(PerunSessionImpl sess, Group group, AttributeDefinition attributeDefinition)", "full_signature": "@Override public Attribute getAttributeValue(PerunSessionImpl sess, Group group, AttributeDefinition attributeDefinition)", "class_method_signature": "urn_perun_group_attribute_def_virt_adDisplayName_o365mu.getAttributeValue(PerunSessionImpl sess, Group group, AttributeDefinition attributeDefinition)", "testcase": false, "constructor": false, "invocations": ["getStringValueOfGroupAttribute", "setValue", "getStringValueOfGroupAttribute", "getStringValueOfGroupAttribute", "matcher", "matcher", "equals", "matches", "getStringValueOfGroupAttribute", "matches", "getStringValueOfGroupAttribute", "getParentGroupAbbreviation", "setValue"]}, "repository": {"repo_id": 4085998, "url": "https://github.com/CESNET/perun", "stars": 38, "created": "4/20/2012 11:55:38 AM +00:00", "updates": "2020-01-27T09:51:13+00:00", "fork": "False", "license": "licensed"}}