{"test_class": {"identifier": "AsyncOperationCollectionTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private IAsyncOperationCollection collection;", "modifier": "private", "type": "IAsyncOperationCollection", "declarator": "collection", "var_name": "collection"}, {"original_string": "private IStorageConnection connection;", "modifier": "private", "type": "IStorageConnection", "declarator": "connection", "var_name": "connection"}, {"original_string": "private String collectionName;", "modifier": "private", "type": "String", "declarator": "collectionName", "var_name": "collectionName"}, {"original_string": "private IField collectionNameField;", "modifier": "private", "type": "IField", "declarator": "collectionNameField", "var_name": "collectionNameField"}, {"original_string": "private IField keyNameField;", "modifier": "private", "type": "IField", "declarator": "keyNameField", "var_name": "keyNameField"}, {"original_string": "private IField keyValueField;", "modifier": "private", "type": "IField", "declarator": "keyValueField", "var_name": "keyValueField"}, {"original_string": "private IField specificKeyNameField;", "modifier": "private", "type": "IField", "declarator": "specificKeyNameField", "var_name": "specificKeyNameField"}, {"original_string": "private IField documentField;", "modifier": "private", "type": "IField", "declarator": "documentField", "var_name": "documentField"}, {"original_string": "private IField idField;", "modifier": "private", "type": "IField", "declarator": "idField", "var_name": "idField"}, {"original_string": "private IField isActiveField;", "modifier": "private", "type": "IField", "declarator": "isActiveField", "var_name": "isActiveField"}, {"original_string": "private IField searchResultField;", "modifier": "private", "type": "IField", "declarator": "searchResultField", "var_name": "searchResultField"}], "file": "CoreFeatures/Database/AsyncOperationCollection/src/test/java/info/smart_tools/smartactors/database/async_operation_collection/AsyncOperationCollectionTest.java"}, "test_case": {"identifier": "ShouldThrowGetItemException_When_NestedTaskIsNull", "parameters": "()", "modifiers": "@Test(expected = GetAsyncOperationException.class) public", "return": "void", "body": "@Test(expected = GetAsyncOperationException.class)\n    public void ShouldThrowGetItemException_When_NestedTaskIsNull() throws Exception {\n\n        when(IOC.resolve(any(), any(), any(), any(), any())).thenThrow(new ResolutionException(\"\"));\n        collection.getAsyncOperation(\"key\");\n    }", "signature": "void ShouldThrowGetItemException_When_NestedTaskIsNull()", "full_signature": "@Test(expected = GetAsyncOperationException.class) public void ShouldThrowGetItemException_When_NestedTaskIsNull()", "class_method_signature": "AsyncOperationCollectionTest.ShouldThrowGetItemException_When_NestedTaskIsNull()", "testcase": true, "constructor": false, "invocations": ["thenThrow", "when", "resolve", "any", "any", "any", "any", "any", "getAsyncOperation"]}, "focal_class": {"identifier": "AsyncOperationCollection", "superclass": "", "interfaces": "implements IAsyncOperationCollection", "fields": [{"original_string": "private IPool connectionPool;", "modifier": "private", "type": "IPool", "declarator": "connectionPool", "var_name": "connectionPool"}, {"original_string": "private String collectionName;", "modifier": "private", "type": "String", "declarator": "collectionName", "var_name": "collectionName"}, {"original_string": "private IField idField;", "modifier": "private", "type": "IField", "declarator": "idField", "var_name": "idField"}], "methods": [{"identifier": "AsyncOperationCollection", "parameters": "(final IPool connectionPool, final String collectionName)", "modifiers": "public", "return": "", "signature": " AsyncOperationCollection(final IPool connectionPool, final String collectionName)", "full_signature": "public  AsyncOperationCollection(final IPool connectionPool, final String collectionName)", "class_method_signature": "AsyncOperationCollection.AsyncOperationCollection(final IPool connectionPool, final String collectionName)", "testcase": false, "constructor": true}, {"identifier": "getAsyncOperation", "parameters": "(final String token)", "modifiers": "@Override public", "return": "IObject", "signature": "IObject getAsyncOperation(final String token)", "full_signature": "@Override public IObject getAsyncOperation(final String token)", "class_method_signature": "AsyncOperationCollection.getAsyncOperation(final String token)", "testcase": false, "constructor": false}, {"identifier": "createAsyncOperation", "parameters": "(final IObject data, final String token, final String expiredTime)", "modifiers": "@Override public", "return": "void", "signature": "void createAsyncOperation(final IObject data, final String token, final String expiredTime)", "full_signature": "@Override public void createAsyncOperation(final IObject data, final String token, final String expiredTime)", "class_method_signature": "AsyncOperationCollection.createAsyncOperation(final IObject data, final String token, final String expiredTime)", "testcase": false, "constructor": false}, {"identifier": "delete", "parameters": "(final String token)", "modifiers": "@Override public", "return": "void", "signature": "void delete(final String token)", "full_signature": "@Override public void delete(final String token)", "class_method_signature": "AsyncOperationCollection.delete(final String token)", "testcase": false, "constructor": false}, {"identifier": "complete", "parameters": "(final IObject document)", "modifiers": "@Override public", "return": "void", "signature": "void complete(final IObject document)", "full_signature": "@Override public void complete(final IObject document)", "class_method_signature": "AsyncOperationCollection.complete(final IObject document)", "testcase": false, "constructor": false}], "file": "CoreFeatures/Database/AsyncOperationCollection/src/main/java/info/smart_tools/smartactors/database/async_operation_collection/AsyncOperationCollection.java"}, "focal_method": {"identifier": "getAsyncOperation", "parameters": "(final String token)", "modifiers": "@Override public", "return": "IObject", "body": "@Override\n    public IObject getAsyncOperation(final String token) throws GetAsyncOperationException {\n        try (IPoolGuard guard = new PoolGuard(connectionPool)) {\n            IObject result = IOC.resolve(Keys.getOrAdd(\"info.smart_tools.smartactors.iobject.iobject.IObject\"));\n\n            IDatabaseTask getItemTask = IOC.resolve(\n                Keys.getOrAdd(\"db.async_ops_collection.get\"),\n                guard.getObject(),\n                collectionName,\n                token,\n                (IAction<IObject[]>) docs -> {\n                    try {\n                        result.setValue(new FieldName(\"result\"), docs[0]);\n                    } catch (ChangeValueException e) {\n                        throw new ActionExecuteException(e);\n                    }\n                }\n            );\n            getItemTask.execute();\n\n            IObject searchResult = (IObject) result.getValue(IOC.resolve(Keys.getOrAdd(\"info.smart_tools.smartactors.iobject.ifield_name.IFieldName\"), \"result\"));\n            if (searchResult == null) {\n                throw new GetAsyncOperationException(\"Can't find operation.\");\n            }\n\n            return searchResult;\n        } catch (ResolutionException e) {\n            throw new GetAsyncOperationException(\"Can't resolve object during get operation.\", e);\n        } catch (InvalidArgumentException e) {\n            throw new GetAsyncOperationException(\"Can't register strategy for getItem task.\", e);\n        } catch (PoolGuardException e) {\n            throw new GetAsyncOperationException(\"Can't get connection from pool.\", e);\n        } catch (ReadValueException e) {\n            throw new GetAsyncOperationException(\"Error during preparing read task.\", e);\n        } catch (TaskExecutionException e) {\n            throw new GetAsyncOperationException(\"Error during execution read task.\", e);\n        }\n    }", "signature": "IObject getAsyncOperation(final String token)", "full_signature": "@Override public IObject getAsyncOperation(final String token)", "class_method_signature": "AsyncOperationCollection.getAsyncOperation(final String token)", "testcase": false, "constructor": false, "invocations": ["resolve", "getOrAdd", "resolve", "getOrAdd", "getObject", "setValue", "execute", "getValue", "resolve", "getOrAdd"]}, "repository": {"repo_id": 52972024, "url": "https://github.com/SmartTools/smartactors-core", "language": "Java", "is_fork": false, "fork_count": 7, "stargazer_count": 17, "size": 58816, "license": "licensed"}}