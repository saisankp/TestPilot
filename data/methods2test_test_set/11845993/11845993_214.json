{"test_class": {"identifier": "HttpClientTest", "superclass": "extends AbstractEmbeddedServerTest", "interfaces": "", "fields": [{"original_string": "private HttpClient httpClient = new HttpClient();", "modifier": "private", "type": "HttpClient", "declarator": "httpClient = new HttpClient()", "var_name": "httpClient"}], "file": "stagemonitor-core/src/test/java/org/stagemonitor/core/util/HttpClientTest.java"}, "test_case": {"identifier": "testBasicAuthException", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n\tpublic void testBasicAuthException() throws Exception {\n\t\tstartWithHandler(new AbstractHandler() {\n\t\t\t@Override\n\t\t\tpublic void handle(String target, Request baseRequest, HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException {\n\t\t\t\tbaseRequest.setHandled(true);\n\t\t\t\tresponse.sendError(HttpServletResponse.SC_UNAUTHORIZED);\n\t\t\t}\n\t\t});\n\n\t\tfinal String url = \"http://user:pass@localhost:\" + getPort() + \"/foo?bar=baz\";\n\t\tfinal String urlWithoutAuth = \"http://localhost:\" + getPort() + \"/foo?bar=baz\";\n\t\thttpClient.send(HttpRequestBuilder.<Integer>forUrl(url)\n\t\t\t\t.successHandler((httpRequest, is, statusCode, e) -> {\n\t\t\t\t\tfail();\n\t\t\t\t\treturn null;\n\t\t\t\t})\n\t\t\t\t.errorHandler((httpRequest, is, statusCode, e) -> {\n\t\t\t\t\tassertThat(statusCode).isEqualTo(401);\n\t\t\t\t\tassertThat(e.getMessage())\n\t\t\t\t\t\t\t.doesNotContain(url)\n\t\t\t\t\t\t\t.contains(urlWithoutAuth);\n\t\t\t\t\treturn null;\n\t\t\t\t})\n\t\t\t\t.build());\n\t}", "signature": "void testBasicAuthException()", "full_signature": "@Test public void testBasicAuthException()", "class_method_signature": "HttpClientTest.testBasicAuthException()", "testcase": true, "constructor": false, "invocations": ["startWithHandler", "setHandled", "sendError", "getPort", "getPort", "send", "build", "errorHandler", "successHandler", "forUrl", "fail", "isEqualTo", "assertThat", "contains", "doesNotContain", "assertThat", "getMessage"]}, "focal_class": {"identifier": "HttpClient", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final long CONNECT_TIMEOUT_SEC = 5;", "modifier": "private static final", "type": "long", "declarator": "CONNECT_TIMEOUT_SEC = 5", "var_name": "CONNECT_TIMEOUT_SEC"}, {"original_string": "private static final long READ_TIMEOUT_SEC = 15;", "modifier": "private static final", "type": "long", "declarator": "READ_TIMEOUT_SEC = 15", "var_name": "READ_TIMEOUT_SEC"}, {"original_string": "private final Logger logger = LoggerFactory.getLogger(getClass());", "modifier": "private final", "type": "Logger", "declarator": "logger = LoggerFactory.getLogger(getClass())", "var_name": "logger"}], "methods": [{"identifier": "send", "parameters": "(String method, String url, final List<String> requestBodyLines)", "modifiers": "public", "return": "void", "signature": "void send(String method, String url, final List<String> requestBodyLines)", "full_signature": "public void send(String method, String url, final List<String> requestBodyLines)", "class_method_signature": "HttpClient.send(String method, String url, final List<String> requestBodyLines)", "testcase": false, "constructor": false}, {"identifier": "send", "parameters": "(final String method, final String url, final Map<String, String> headerFields,\n\t\t\t\t\t  OutputStreamHandler outputStreamHandler, ResponseHandler<T> responseHandler)", "modifiers": "public", "return": "T", "signature": "T send(final String method, final String url, final Map<String, String> headerFields,\n\t\t\t\t\t  OutputStreamHandler outputStreamHandler, ResponseHandler<T> responseHandler)", "full_signature": "public T send(final String method, final String url, final Map<String, String> headerFields,\n\t\t\t\t\t  OutputStreamHandler outputStreamHandler, ResponseHandler<T> responseHandler)", "class_method_signature": "HttpClient.send(final String method, final String url, final Map<String, String> headerFields,\n\t\t\t\t\t  OutputStreamHandler outputStreamHandler, ResponseHandler<T> responseHandler)", "testcase": false, "constructor": false}, {"identifier": "send", "parameters": "(final HttpRequest<T> request)", "modifiers": "public", "return": "T", "signature": "T send(final HttpRequest<T> request)", "full_signature": "public T send(final HttpRequest<T> request)", "class_method_signature": "HttpClient.send(final HttpRequest<T> request)", "testcase": false, "constructor": false}, {"identifier": "getResponseCodeIfPossible", "parameters": "(HttpURLConnection connection)", "modifiers": "private", "return": "Integer", "signature": "Integer getResponseCodeIfPossible(HttpURLConnection connection)", "full_signature": "private Integer getResponseCodeIfPossible(HttpURLConnection connection)", "class_method_signature": "HttpClient.getResponseCodeIfPossible(HttpURLConnection connection)", "testcase": false, "constructor": false}, {"identifier": "getBasicAuthFromUserInfo", "parameters": "(URL url)", "modifiers": "public static", "return": "String", "signature": "String getBasicAuthFromUserInfo(URL url)", "full_signature": "public static String getBasicAuthFromUserInfo(URL url)", "class_method_signature": "HttpClient.getBasicAuthFromUserInfo(URL url)", "testcase": false, "constructor": false}, {"identifier": "removeUserInfo", "parameters": "(String url)", "modifiers": "public static", "return": "String", "signature": "String removeUserInfo(String url)", "full_signature": "public static String removeUserInfo(String url)", "class_method_signature": "HttpClient.removeUserInfo(String url)", "testcase": false, "constructor": false}], "file": "stagemonitor-core/src/main/java/org/stagemonitor/core/util/HttpClient.java"}, "focal_method": {"identifier": "send", "parameters": "(String method, String url, final List<String> requestBodyLines)", "modifiers": "public", "return": "void", "body": "public void send(String method, String url, final List<String> requestBodyLines) {\n\t\tsend(HttpRequestBuilder.<Integer>forUrl(url)\n\t\t\t\t.method(method)\n\t\t\t\t.body(requestBodyLines)\n\t\t\t\t.build());\n\t}", "signature": "void send(String method, String url, final List<String> requestBodyLines)", "full_signature": "public void send(String method, String url, final List<String> requestBodyLines)", "class_method_signature": "HttpClient.send(String method, String url, final List<String> requestBodyLines)", "testcase": false, "constructor": false, "invocations": ["send", "build", "body", "method", "forUrl"]}, "repository": {"repo_id": 11845993, "url": "https://github.com/stagemonitor/stagemonitor", "language": "Java", "is_fork": false, "fork_count": 268, "stargazer_count": 1585, "size": 10342, "license": "licensed"}}