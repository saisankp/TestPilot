{"test_class": {"identifier": "TodoControllerTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final String CREATION_TIME = TestDateUtil.CURRENT_TIMESTAMP;", "modifier": "private static final", "type": "String", "declarator": "CREATION_TIME = TestDateUtil.CURRENT_TIMESTAMP", "var_name": "CREATION_TIME"}, {"original_string": "private static final String DESCRIPTION = \"description\";", "modifier": "private static final", "type": "String", "declarator": "DESCRIPTION = \"description\"", "var_name": "DESCRIPTION"}, {"original_string": "private static final Long ID = 1L;", "modifier": "private static final", "type": "Long", "declarator": "ID = 1L", "var_name": "ID"}, {"original_string": "private static final String MODIFICATION_TIME = TestDateUtil.CURRENT_TIMESTAMP;", "modifier": "private static final", "type": "String", "declarator": "MODIFICATION_TIME = TestDateUtil.CURRENT_TIMESTAMP", "var_name": "MODIFICATION_TIME"}, {"original_string": "private static final String TITLE = \"title\";", "modifier": "private static final", "type": "String", "declarator": "TITLE = \"title\"", "var_name": "TITLE"}, {"original_string": "private static final String SEARCH_TERM = \"IT\";", "modifier": "private static final", "type": "String", "declarator": "SEARCH_TERM = \"IT\"", "var_name": "SEARCH_TERM"}, {"original_string": "private static final int PAGE_NUMBER = 0;", "modifier": "private static final", "type": "int", "declarator": "PAGE_NUMBER = 0", "var_name": "PAGE_NUMBER"}, {"original_string": "private static final String PAGE_NUMBER_STRING = PAGE_NUMBER + \"\";", "modifier": "private static final", "type": "String", "declarator": "PAGE_NUMBER_STRING = PAGE_NUMBER + \"\"", "var_name": "PAGE_NUMBER_STRING"}, {"original_string": "private static final int PAGE_SIZE = 10;", "modifier": "private static final", "type": "int", "declarator": "PAGE_SIZE = 10", "var_name": "PAGE_SIZE"}, {"original_string": "private static final String PAGE_SIZE_STRING = PAGE_SIZE + \"\";", "modifier": "private static final", "type": "String", "declarator": "PAGE_SIZE_STRING = PAGE_SIZE + \"\"", "var_name": "PAGE_SIZE_STRING"}, {"original_string": "private static final String SORT_FIELD = \"id\";", "modifier": "private static final", "type": "String", "declarator": "SORT_FIELD = \"id\"", "var_name": "SORT_FIELD"}, {"original_string": "private static final String SORT_ORDER = \"DESC\";", "modifier": "private static final", "type": "String", "declarator": "SORT_ORDER = \"DESC\"", "var_name": "SORT_ORDER"}, {"original_string": "private static final long TOTAL_NUMBER_OF_ITEMS = 1L;", "modifier": "private static final", "type": "long", "declarator": "TOTAL_NUMBER_OF_ITEMS = 1L", "var_name": "TOTAL_NUMBER_OF_ITEMS"}, {"original_string": "private static final int ONE_ITEM_FOUND = 1;", "modifier": "private static final", "type": "int", "declarator": "ONE_ITEM_FOUND = 1", "var_name": "ONE_ITEM_FOUND"}, {"original_string": "private static final int ONE_PAGE_FOUND = 1;", "modifier": "private static final", "type": "int", "declarator": "ONE_PAGE_FOUND = 1", "var_name": "ONE_PAGE_FOUND"}, {"original_string": "private static final int ZERO_ITEMS_FOUND = 0;", "modifier": "private static final", "type": "int", "declarator": "ZERO_ITEMS_FOUND = 0", "var_name": "ZERO_ITEMS_FOUND"}, {"original_string": "private static final int ZERO_PAGES_FOUND = 0;", "modifier": "private static final", "type": "int", "declarator": "ZERO_PAGES_FOUND = 0", "var_name": "ZERO_PAGES_FOUND"}, {"original_string": "private MockMvc mockMvc;", "modifier": "private", "type": "MockMvc", "declarator": "mockMvc", "var_name": "mockMvc"}, {"original_string": "@Autowired\n    private ObjectMapper objectMapper;", "modifier": "@Autowired\n    private", "type": "ObjectMapper", "declarator": "objectMapper", "var_name": "objectMapper"}, {"original_string": "@Autowired\n    private TodoCrudService todoCrudServiceMock;", "modifier": "@Autowired\n    private", "type": "TodoCrudService", "declarator": "todoCrudServiceMock", "var_name": "todoCrudServiceMock"}, {"original_string": "@Autowired\n    private TodoSearchService todoSearchServiceMock;", "modifier": "@Autowired\n    private", "type": "TodoSearchService", "declarator": "todoSearchServiceMock", "var_name": "todoSearchServiceMock"}, {"original_string": "@Autowired\n    private WebApplicationContext webAppContext;", "modifier": "@Autowired\n    private", "type": "WebApplicationContext", "declarator": "webAppContext", "var_name": "webAppContext"}], "file": "jooq-only/src/test/java/net/petrikainulainen/spring/jooq/todo/controller/TodoControllerTest.java"}, "test_case": {"identifier": "findBySearchTerm_OneTodoEntryFound_ShouldReturnTodoEntriesAsJsonDocument", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void findBySearchTerm_OneTodoEntryFound_ShouldReturnTodoEntriesAsJsonDocument() throws Exception {\n        TodoDTO foundTodoEntry = new TodoDTOBuilder()\n                .creationTime(CREATION_TIME)\n                .description(DESCRIPTION)\n                .id(ID)\n                .modificationTime(MODIFICATION_TIME)\n                .title(TITLE)\n                .build();\n\n        Page<TodoDTO> searchResults = new PageBuilder<TodoDTO>()\n                .itemsOnPage(foundTodoEntry)\n                .pageNumber(PAGE_NUMBER)\n                .pageSize(PAGE_SIZE)\n                .totalNumberOfItems(TOTAL_NUMBER_OF_ITEMS)\n                .build();\n\n        when(todoSearchServiceMock.findBySearchTerm(eq(SEARCH_TERM), isA(Pageable.class))).thenReturn(searchResults);\n\n        mockMvc.perform(get(\"/api/todo/search\")\n                .param(WebTestConstants.REQUEST_PARAM_SEARCH_TERM, SEARCH_TERM)\n                .param(WebTestConstants.REQUEST_PARAM_PAGE_NUMBER, PAGE_NUMBER_STRING)\n                .param(WebTestConstants.REQUEST_PARAM_PAGE_SIZE, PAGE_SIZE_STRING)\n                .param(WebTestConstants.REQUEST_PARAM_SORT, WebTestUtil.createSortParameterValue(SORT_FIELD, SORT_ORDER))\n        )\n                .andExpect(status().isOk())\n                .andExpect(content().contentType(WebTestConstants.APPLICATION_JSON_UTF8))\n                .andExpect(jsonPath(\"$.number\", is(PAGE_NUMBER)))\n                .andExpect(jsonPath(\"$.size\", is(PAGE_SIZE)))\n                .andExpect(jsonPath(\"$.numberOfElements\", is(ONE_ITEM_FOUND)))\n                .andExpect(jsonPath(\"$.firstPage\", is(true)))\n                .andExpect(jsonPath(\"$.lastPage\", is(true)))\n                .andExpect(jsonPath(\"$.totalPages\", is(ONE_PAGE_FOUND)))\n                .andExpect(jsonPath(\"$.totalElements\", is(ONE_ITEM_FOUND)))\n                .andExpect(jsonPath(\"$.content\", hasSize(1)))\n                .andExpect(jsonPath(\"$.content[0].id\", is(ID.intValue())))\n                .andExpect(jsonPath(\"$.content[0].creationTime\", is(CREATION_TIME)))\n                .andExpect(jsonPath(\"$.content[0].description\", is(DESCRIPTION)))\n                .andExpect(jsonPath(\"$.content[0].modificationTime\", is(MODIFICATION_TIME)))\n                .andExpect(jsonPath(\"$.content[0].title\", is(TITLE)));\n\n        ArgumentCaptor<Pageable> pageableArgument = ArgumentCaptor.forClass(Pageable.class);\n\n        verify(todoSearchServiceMock, times(1)).findBySearchTerm(eq(SEARCH_TERM), pageableArgument.capture());\n        verifyNoMoreInteractions(todoSearchServiceMock);\n        verifyZeroInteractions(todoCrudServiceMock);\n\n        Pageable pageSpecification = pageableArgument.getValue();\n\n        assertThat(pageSpecification.getPageNumber()).isEqualTo(PAGE_NUMBER);\n        assertThat(pageSpecification.getPageSize()).isEqualTo(PAGE_SIZE);\n\n        Sort sortSpecification = pageSpecification.getSort();\n        assertThat(sortSpecification.getOrderFor(SORT_FIELD).getDirection()).isEqualTo(Sort.Direction.fromString(SORT_ORDER));\n    }", "signature": "void findBySearchTerm_OneTodoEntryFound_ShouldReturnTodoEntriesAsJsonDocument()", "full_signature": "@Test public void findBySearchTerm_OneTodoEntryFound_ShouldReturnTodoEntriesAsJsonDocument()", "class_method_signature": "TodoControllerTest.findBySearchTerm_OneTodoEntryFound_ShouldReturnTodoEntriesAsJsonDocument()", "testcase": true, "constructor": false, "invocations": ["build", "title", "modificationTime", "id", "description", "creationTime", "build", "totalNumberOfItems", "pageSize", "pageNumber", "itemsOnPage", "thenReturn", "when", "findBySearchTerm", "eq", "isA", "andExpect", "andExpect", "andExpect", "andExpect", "andExpect", "andExpect", "andExpect", "andExpect", "andExpect", "andExpect", "andExpect", "andExpect", "andExpect", "andExpect", "andExpect", "perform", "param", "param", "param", "param", "get", "createSortParameterValue", "isOk", "status", "contentType", "content", "jsonPath", "is", "jsonPath", "is", "jsonPath", "is", "jsonPath", "is", "jsonPath", "is", "jsonPath", "is", "jsonPath", "is", "jsonPath", "hasSize", "jsonPath", "is", "intValue", "jsonPath", "is", "jsonPath", "is", "jsonPath", "is", "jsonPath", "is", "forClass", "findBySearchTerm", "verify", "times", "eq", "capture", "verifyNoMoreInteractions", "verifyZeroInteractions", "getValue", "isEqualTo", "assertThat", "getPageNumber", "isEqualTo", "assertThat", "getPageSize", "getSort", "isEqualTo", "assertThat", "getDirection", "getOrderFor", "fromString"]}, "focal_class": {"identifier": "TodoController", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final Logger LOGGER = LoggerFactory.getLogger(TodoController.class);", "modifier": "private static final", "type": "Logger", "declarator": "LOGGER = LoggerFactory.getLogger(TodoController.class)", "var_name": "LOGGER"}, {"original_string": "private final TodoCrudService crudService;", "modifier": "private final", "type": "TodoCrudService", "declarator": "crudService", "var_name": "crudService"}, {"original_string": "private final TodoSearchService searchService;", "modifier": "private final", "type": "TodoSearchService", "declarator": "searchService", "var_name": "searchService"}], "methods": [{"identifier": "TodoController", "parameters": "(TodoCrudService crudService, TodoSearchService searchService)", "modifiers": "@Autowired public", "return": "", "signature": " TodoController(TodoCrudService crudService, TodoSearchService searchService)", "full_signature": "@Autowired public  TodoController(TodoCrudService crudService, TodoSearchService searchService)", "class_method_signature": "TodoController.TodoController(TodoCrudService crudService, TodoSearchService searchService)", "testcase": false, "constructor": true}, {"identifier": "add", "parameters": "(@RequestBody @Valid TodoDTO dto)", "modifiers": "@RequestMapping(method = RequestMethod.POST) @ResponseStatus(HttpStatus.CREATED) public", "return": "TodoDTO", "signature": "TodoDTO add(@RequestBody @Valid TodoDTO dto)", "full_signature": "@RequestMapping(method = RequestMethod.POST) @ResponseStatus(HttpStatus.CREATED) public TodoDTO add(@RequestBody @Valid TodoDTO dto)", "class_method_signature": "TodoController.add(@RequestBody @Valid TodoDTO dto)", "testcase": false, "constructor": false}, {"identifier": "delete", "parameters": "(@PathVariable(\"id\") Long id)", "modifiers": "@RequestMapping(value = \"/{id}\", method = RequestMethod.DELETE) public", "return": "TodoDTO", "signature": "TodoDTO delete(@PathVariable(\"id\") Long id)", "full_signature": "@RequestMapping(value = \"/{id}\", method = RequestMethod.DELETE) public TodoDTO delete(@PathVariable(\"id\") Long id)", "class_method_signature": "TodoController.delete(@PathVariable(\"id\") Long id)", "testcase": false, "constructor": false}, {"identifier": "findAll", "parameters": "()", "modifiers": "@RequestMapping(method = RequestMethod.GET) public", "return": "List<TodoDTO>", "signature": "List<TodoDTO> findAll()", "full_signature": "@RequestMapping(method = RequestMethod.GET) public List<TodoDTO> findAll()", "class_method_signature": "TodoController.findAll()", "testcase": false, "constructor": false}, {"identifier": "findById", "parameters": "(@PathVariable(\"id\") Long id)", "modifiers": "@RequestMapping(value = \"/{id}\", method = RequestMethod.GET) public", "return": "TodoDTO", "signature": "TodoDTO findById(@PathVariable(\"id\") Long id)", "full_signature": "@RequestMapping(value = \"/{id}\", method = RequestMethod.GET) public TodoDTO findById(@PathVariable(\"id\") Long id)", "class_method_signature": "TodoController.findById(@PathVariable(\"id\") Long id)", "testcase": false, "constructor": false}, {"identifier": "findBySearchTerm", "parameters": "(@RequestParam(\"searchTerm\") String searchTerm, Pageable pageable)", "modifiers": "@RequestMapping(value = \"/search\", method = RequestMethod.GET) public", "return": "Page<TodoDTO>", "signature": "Page<TodoDTO> findBySearchTerm(@RequestParam(\"searchTerm\") String searchTerm, Pageable pageable)", "full_signature": "@RequestMapping(value = \"/search\", method = RequestMethod.GET) public Page<TodoDTO> findBySearchTerm(@RequestParam(\"searchTerm\") String searchTerm, Pageable pageable)", "class_method_signature": "TodoController.findBySearchTerm(@RequestParam(\"searchTerm\") String searchTerm, Pageable pageable)", "testcase": false, "constructor": false}, {"identifier": "update", "parameters": "(@PathVariable(\"id\") Long id, @RequestBody @Valid TodoDTO dto)", "modifiers": "@RequestMapping(value = \"/{id}\", method = RequestMethod.PUT) public", "return": "TodoDTO", "signature": "TodoDTO update(@PathVariable(\"id\") Long id, @RequestBody @Valid TodoDTO dto)", "full_signature": "@RequestMapping(value = \"/{id}\", method = RequestMethod.PUT) public TodoDTO update(@PathVariable(\"id\") Long id, @RequestBody @Valid TodoDTO dto)", "class_method_signature": "TodoController.update(@PathVariable(\"id\") Long id, @RequestBody @Valid TodoDTO dto)", "testcase": false, "constructor": false}], "file": "jooq-only/src/main/java/net/petrikainulainen/spring/jooq/todo/controller/TodoController.java"}, "focal_method": {"identifier": "findBySearchTerm", "parameters": "(@RequestParam(\"searchTerm\") String searchTerm, Pageable pageable)", "modifiers": "@RequestMapping(value = \"/search\", method = RequestMethod.GET) public", "return": "Page<TodoDTO>", "body": "@RequestMapping(value = \"/search\", method = RequestMethod.GET)\n    public Page<TodoDTO> findBySearchTerm(@RequestParam(\"searchTerm\") String searchTerm, Pageable pageable) {\n        LOGGER.info(\"Finding {} todo entries for page {} by using search term: {}\",\n                pageable.getPageSize(),\n                pageable.getPageNumber(),\n                searchTerm\n        );\n\n        Page<TodoDTO> todoEntries = searchService.findBySearchTerm(searchTerm, pageable);\n\n        LOGGER.info(\"Found {} todo entries for page: {}\",\n                todoEntries.getNumberOfElements(),\n                todoEntries.getNumber()\n        );\n\n        return todoEntries;\n    }", "signature": "Page<TodoDTO> findBySearchTerm(@RequestParam(\"searchTerm\") String searchTerm, Pageable pageable)", "full_signature": "@RequestMapping(value = \"/search\", method = RequestMethod.GET) public Page<TodoDTO> findBySearchTerm(@RequestParam(\"searchTerm\") String searchTerm, Pageable pageable)", "class_method_signature": "TodoController.findBySearchTerm(@RequestParam(\"searchTerm\") String searchTerm, Pageable pageable)", "testcase": false, "constructor": false, "invocations": ["info", "getPageSize", "getPageNumber", "findBySearchTerm", "info", "getNumberOfElements", "getNumber"]}, "repository": {"repo_id": 15566188, "url": "https://github.com/pkainulainen/jooq-with-spring-examples", "language": "Java", "is_fork": false, "fork_count": 51, "stargazer_count": 70, "size": 370, "license": "licensed"}}