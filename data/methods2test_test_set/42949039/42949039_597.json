{"test_class": {"identifier": "SearchIndexServiceImplTest", "superclass": "extends AbstractServiceTest", "interfaces": "", "fields": [{"original_string": "@Mock\n    private AlternateKeyHelper alternateKeyHelper;", "modifier": "@Mock\n    private", "type": "AlternateKeyHelper", "declarator": "alternateKeyHelper", "var_name": "alternateKeyHelper"}, {"original_string": "@Mock\n    private BusinessObjectDefinitionDao businessObjectDefinitionDao;", "modifier": "@Mock\n    private", "type": "BusinessObjectDefinitionDao", "declarator": "businessObjectDefinitionDao", "var_name": "businessObjectDefinitionDao"}, {"original_string": "@Mock\n    private BusinessObjectDefinitionHelper businessObjectDefinitionHelper;", "modifier": "@Mock\n    private", "type": "BusinessObjectDefinitionHelper", "declarator": "businessObjectDefinitionHelper", "var_name": "businessObjectDefinitionHelper"}, {"original_string": "@Mock\n    private ConfigurationDaoHelper configurationDaoHelper;", "modifier": "@Mock\n    private", "type": "ConfigurationDaoHelper", "declarator": "configurationDaoHelper", "var_name": "configurationDaoHelper"}, {"original_string": "@Mock\n    private ConfigurationHelper configurationHelper;", "modifier": "@Mock\n    private", "type": "ConfigurationHelper", "declarator": "configurationHelper", "var_name": "configurationHelper"}, {"original_string": "@Mock\n    private IndexFunctionsDao indexFunctionDao;", "modifier": "@Mock\n    private", "type": "IndexFunctionsDao", "declarator": "indexFunctionDao", "var_name": "indexFunctionDao"}, {"original_string": "@Mock\n    private SearchIndexDao searchIndexDao;", "modifier": "@Mock\n    private", "type": "SearchIndexDao", "declarator": "searchIndexDao", "var_name": "searchIndexDao"}, {"original_string": "@Mock\n    private SearchIndexDaoHelper searchIndexDaoHelper;", "modifier": "@Mock\n    private", "type": "SearchIndexDaoHelper", "declarator": "searchIndexDaoHelper", "var_name": "searchIndexDaoHelper"}, {"original_string": "@Mock\n    private SearchIndexHelperService searchIndexHelperService;", "modifier": "@Mock\n    private", "type": "SearchIndexHelperService", "declarator": "searchIndexHelperService", "var_name": "searchIndexHelperService"}, {"original_string": "@InjectMocks\n    private SearchIndexServiceImpl searchIndexServiceImpl;", "modifier": "@InjectMocks\n    private", "type": "SearchIndexServiceImpl", "declarator": "searchIndexServiceImpl", "var_name": "searchIndexServiceImpl"}, {"original_string": "@Mock\n    private SearchIndexStatusDaoHelper searchIndexStatusDaoHelper;", "modifier": "@Mock\n    private", "type": "SearchIndexStatusDaoHelper", "declarator": "searchIndexStatusDaoHelper", "var_name": "searchIndexStatusDaoHelper"}, {"original_string": "@Mock\n    private SearchIndexTypeDaoHelper searchIndexTypeDaoHelper;", "modifier": "@Mock\n    private", "type": "SearchIndexTypeDaoHelper", "declarator": "searchIndexTypeDaoHelper", "var_name": "searchIndexTypeDaoHelper"}, {"original_string": "@Mock\n    private TagDao tagDao;", "modifier": "@Mock\n    private", "type": "TagDao", "declarator": "tagDao", "var_name": "tagDao"}], "file": "herd-code/herd-service/src/test/java/org/finra/herd/service/impl/SearchIndexServiceImplTest.java"}, "test_case": {"identifier": "testCreateSearchIndexStatisticsNoIndexCreationDate", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testCreateSearchIndexStatisticsNoIndexCreationDate()\n    {\n        // Create a search index get settings response without the index creation date setting.\n        ImmutableOpenMap<String, Settings> getIndexResponseSettings = ImmutableOpenMap.<String, Settings>builder()\n            .fPut(SEARCH_INDEX_NAME, Settings.builder().put(IndexMetadata.SETTING_INDEX_UUID, SEARCH_INDEX_STATISTICS_INDEX_UUID).build()).build();\n\n        // Mock an index docs stats object.\n        DocsStats mockedDocsStats = mock(DocsStats.class);\n        when(mockedDocsStats.getCount()).thenReturn(SEARCH_INDEX_STATISTICS_NUMBER_OF_ACTIVE_DOCUMENTS);\n        when(mockedDocsStats.getDeleted()).thenReturn(SEARCH_INDEX_STATISTICS_NUMBER_OF_DELETED_DOCUMENTS);\n\n        // Get a search index settings created.\n        SearchIndexStatistics response = searchIndexServiceImpl.createSearchIndexStatistics(getIndexResponseSettings.get(SEARCH_INDEX_NAME), mockedDocsStats, 0L);\n\n        // Verify the external calls.\n        verifyNoMoreInteractions(alternateKeyHelper, businessObjectDefinitionDao, businessObjectDefinitionHelper, configurationDaoHelper, configurationHelper,\n            searchIndexDao, searchIndexDaoHelper, searchIndexHelperService, searchIndexStatusDaoHelper, searchIndexTypeDaoHelper);\n\n        // Validate the returned object.\n        assertEquals(new SearchIndexStatistics(NO_SEARCH_INDEX_STATISTICS_CREATION_DATE, SEARCH_INDEX_STATISTICS_NUMBER_OF_ACTIVE_DOCUMENTS,\n            SEARCH_INDEX_STATISTICS_NUMBER_OF_DELETED_DOCUMENTS, SEARCH_INDEX_STATISTICS_INDEX_UUID, 0L), response);\n    }", "signature": "void testCreateSearchIndexStatisticsNoIndexCreationDate()", "full_signature": "@Test public void testCreateSearchIndexStatisticsNoIndexCreationDate()", "class_method_signature": "SearchIndexServiceImplTest.testCreateSearchIndexStatisticsNoIndexCreationDate()", "testcase": true, "constructor": false, "invocations": ["build", "fPut", "builder", "build", "put", "builder", "mock", "thenReturn", "when", "getCount", "thenReturn", "when", "getDeleted", "createSearchIndexStatistics", "get", "verifyNoMoreInteractions", "assertEquals"]}, "focal_class": {"identifier": "SearchIndexServiceImpl", "superclass": "", "interfaces": "implements SearchIndexService", "fields": [{"original_string": "@Autowired\n    private AlternateKeyHelper alternateKeyHelper;", "modifier": "@Autowired\n    private", "type": "AlternateKeyHelper", "declarator": "alternateKeyHelper", "var_name": "alternateKeyHelper"}, {"original_string": "@Autowired\n    private ConfigurationDaoHelper configurationDaoHelper;", "modifier": "@Autowired\n    private", "type": "ConfigurationDaoHelper", "declarator": "configurationDaoHelper", "var_name": "configurationDaoHelper"}, {"original_string": "@Autowired\n    private ConfigurationHelper configurationHelper;", "modifier": "@Autowired\n    private", "type": "ConfigurationHelper", "declarator": "configurationHelper", "var_name": "configurationHelper"}, {"original_string": "@Autowired\n    private SearchIndexDao searchIndexDao;", "modifier": "@Autowired\n    private", "type": "SearchIndexDao", "declarator": "searchIndexDao", "var_name": "searchIndexDao"}, {"original_string": "@Autowired\n    private SearchIndexDaoHelper searchIndexDaoHelper;", "modifier": "@Autowired\n    private", "type": "SearchIndexDaoHelper", "declarator": "searchIndexDaoHelper", "var_name": "searchIndexDaoHelper"}, {"original_string": "@Autowired\n    private SearchIndexHelperService searchIndexHelperService;", "modifier": "@Autowired\n    private", "type": "SearchIndexHelperService", "declarator": "searchIndexHelperService", "var_name": "searchIndexHelperService"}, {"original_string": "@Autowired\n    private SearchIndexStatusDaoHelper searchIndexStatusDaoHelper;", "modifier": "@Autowired\n    private", "type": "SearchIndexStatusDaoHelper", "declarator": "searchIndexStatusDaoHelper", "var_name": "searchIndexStatusDaoHelper"}, {"original_string": "@Autowired\n    private SearchIndexTypeDaoHelper searchIndexTypeDaoHelper;", "modifier": "@Autowired\n    private", "type": "SearchIndexTypeDaoHelper", "declarator": "searchIndexTypeDaoHelper", "var_name": "searchIndexTypeDaoHelper"}, {"original_string": "@Autowired\n    private IndexFunctionsDao indexFunctionsDao;", "modifier": "@Autowired\n    private", "type": "IndexFunctionsDao", "declarator": "indexFunctionsDao", "var_name": "indexFunctionsDao"}], "methods": [{"identifier": "createSearchIndex", "parameters": "(SearchIndexCreateRequest request)", "modifiers": "@Override public", "return": "SearchIndex", "signature": "SearchIndex createSearchIndex(SearchIndexCreateRequest request)", "full_signature": "@Override public SearchIndex createSearchIndex(SearchIndexCreateRequest request)", "class_method_signature": "SearchIndexServiceImpl.createSearchIndex(SearchIndexCreateRequest request)", "testcase": false, "constructor": false}, {"identifier": "deleteSearchIndex", "parameters": "(SearchIndexKey searchIndexKey)", "modifiers": "@Override public", "return": "SearchIndex", "signature": "SearchIndex deleteSearchIndex(SearchIndexKey searchIndexKey)", "full_signature": "@Override public SearchIndex deleteSearchIndex(SearchIndexKey searchIndexKey)", "class_method_signature": "SearchIndexServiceImpl.deleteSearchIndex(SearchIndexKey searchIndexKey)", "testcase": false, "constructor": false}, {"identifier": "getSearchIndex", "parameters": "(SearchIndexKey searchIndexKey)", "modifiers": "@Override public", "return": "SearchIndex", "signature": "SearchIndex getSearchIndex(SearchIndexKey searchIndexKey)", "full_signature": "@Override public SearchIndex getSearchIndex(SearchIndexKey searchIndexKey)", "class_method_signature": "SearchIndexServiceImpl.getSearchIndex(SearchIndexKey searchIndexKey)", "testcase": false, "constructor": false}, {"identifier": "getSearchIndexes", "parameters": "()", "modifiers": "@Override public", "return": "SearchIndexKeys", "signature": "SearchIndexKeys getSearchIndexes()", "full_signature": "@Override public SearchIndexKeys getSearchIndexes()", "class_method_signature": "SearchIndexServiceImpl.getSearchIndexes()", "testcase": false, "constructor": false}, {"identifier": "createSearchIndexEntity", "parameters": "(SearchIndexCreateRequest request, SearchIndexTypeEntity searchIndexTypeEntity,\n        SearchIndexStatusEntity searchIndexStatusEntity)", "modifiers": "protected", "return": "SearchIndexEntity", "signature": "SearchIndexEntity createSearchIndexEntity(SearchIndexCreateRequest request, SearchIndexTypeEntity searchIndexTypeEntity,\n        SearchIndexStatusEntity searchIndexStatusEntity)", "full_signature": "protected SearchIndexEntity createSearchIndexEntity(SearchIndexCreateRequest request, SearchIndexTypeEntity searchIndexTypeEntity,\n        SearchIndexStatusEntity searchIndexStatusEntity)", "class_method_signature": "SearchIndexServiceImpl.createSearchIndexEntity(SearchIndexCreateRequest request, SearchIndexTypeEntity searchIndexTypeEntity,\n        SearchIndexStatusEntity searchIndexStatusEntity)", "testcase": false, "constructor": false}, {"identifier": "createSearchIndexFromEntity", "parameters": "(SearchIndexEntity searchIndexEntity)", "modifiers": "protected", "return": "SearchIndex", "signature": "SearchIndex createSearchIndexFromEntity(SearchIndexEntity searchIndexEntity)", "full_signature": "protected SearchIndex createSearchIndexFromEntity(SearchIndexEntity searchIndexEntity)", "class_method_signature": "SearchIndexServiceImpl.createSearchIndexFromEntity(SearchIndexEntity searchIndexEntity)", "testcase": false, "constructor": false}, {"identifier": "createSearchIndexHelper", "parameters": "(SearchIndexKey searchIndexKey, String searchIndexType)", "modifiers": "protected", "return": "void", "signature": "void createSearchIndexHelper(SearchIndexKey searchIndexKey, String searchIndexType)", "full_signature": "protected void createSearchIndexHelper(SearchIndexKey searchIndexKey, String searchIndexType)", "class_method_signature": "SearchIndexServiceImpl.createSearchIndexHelper(SearchIndexKey searchIndexKey, String searchIndexType)", "testcase": false, "constructor": false}, {"identifier": "createSearchIndexStatistics", "parameters": "(Settings settings, DocsStats docsStats, long indexCount)", "modifiers": "protected", "return": "SearchIndexStatistics", "signature": "SearchIndexStatistics createSearchIndexStatistics(Settings settings, DocsStats docsStats, long indexCount)", "full_signature": "protected SearchIndexStatistics createSearchIndexStatistics(Settings settings, DocsStats docsStats, long indexCount)", "class_method_signature": "SearchIndexServiceImpl.createSearchIndexStatistics(Settings settings, DocsStats docsStats, long indexCount)", "testcase": false, "constructor": false}, {"identifier": "deleteSearchIndexHelper", "parameters": "(String searchIndexName)", "modifiers": "protected", "return": "void", "signature": "void deleteSearchIndexHelper(String searchIndexName)", "full_signature": "protected void deleteSearchIndexHelper(String searchIndexName)", "class_method_signature": "SearchIndexServiceImpl.deleteSearchIndexHelper(String searchIndexName)", "testcase": false, "constructor": false}, {"identifier": "validateSearchIndexCreateRequest", "parameters": "(SearchIndexCreateRequest request)", "modifiers": "private", "return": "void", "signature": "void validateSearchIndexCreateRequest(SearchIndexCreateRequest request)", "full_signature": "private void validateSearchIndexCreateRequest(SearchIndexCreateRequest request)", "class_method_signature": "SearchIndexServiceImpl.validateSearchIndexCreateRequest(SearchIndexCreateRequest request)", "testcase": false, "constructor": false}, {"identifier": "validateSearchIndexKey", "parameters": "(SearchIndexKey key)", "modifiers": "private", "return": "void", "signature": "void validateSearchIndexKey(SearchIndexKey key)", "full_signature": "private void validateSearchIndexKey(SearchIndexKey key)", "class_method_signature": "SearchIndexServiceImpl.validateSearchIndexKey(SearchIndexKey key)", "testcase": false, "constructor": false}, {"identifier": "setSearchIndexName", "parameters": "(String searchIndexType)", "modifiers": "private", "return": "String", "signature": "String setSearchIndexName(String searchIndexType)", "full_signature": "private String setSearchIndexName(String searchIndexType)", "class_method_signature": "SearchIndexServiceImpl.setSearchIndexName(String searchIndexType)", "testcase": false, "constructor": false}], "file": "herd-code/herd-service/src/main/java/org/finra/herd/service/impl/SearchIndexServiceImpl.java"}, "focal_method": {"identifier": "createSearchIndexStatistics", "parameters": "(Settings settings, DocsStats docsStats, long indexCount)", "modifiers": "protected", "return": "SearchIndexStatistics", "body": "protected SearchIndexStatistics createSearchIndexStatistics(Settings settings, DocsStats docsStats, long indexCount)\n    {\n        SearchIndexStatistics searchIndexStatistics = new SearchIndexStatistics();\n\n        Long creationDate = settings.getAsLong(IndexMetadata.SETTING_CREATION_DATE, -1L);\n        if (creationDate != -1L)\n        {\n            DateTime creationDateTime = new DateTime(creationDate, DateTimeZone.UTC);\n            searchIndexStatistics.setIndexCreationDate(HerdDateUtils.getXMLGregorianCalendarValue(creationDateTime.toDate()));\n        }\n\n        searchIndexStatistics.setIndexNumberOfActiveDocuments(docsStats.getCount());\n        searchIndexStatistics.setIndexNumberOfDeletedDocuments(docsStats.getDeleted());\n        searchIndexStatistics.setIndexUuid(settings.get(IndexMetadata.SETTING_INDEX_UUID));\n        searchIndexStatistics.setIndexCount(indexCount);\n\n        return searchIndexStatistics;\n    }", "signature": "SearchIndexStatistics createSearchIndexStatistics(Settings settings, DocsStats docsStats, long indexCount)", "full_signature": "protected SearchIndexStatistics createSearchIndexStatistics(Settings settings, DocsStats docsStats, long indexCount)", "class_method_signature": "SearchIndexServiceImpl.createSearchIndexStatistics(Settings settings, DocsStats docsStats, long indexCount)", "testcase": false, "constructor": false, "invocations": ["getAsLong", "setIndexCreationDate", "getXMLGregorianCalendarValue", "toDate", "setIndexNumberOfActiveDocuments", "getCount", "setIndexNumberOfDeletedDocuments", "getDeleted", "setIndexUuid", "get", "setIndexCount"]}, "repository": {"repo_id": 42949039, "url": "https://github.com/FINRAOS/herd", "language": "Java", "is_fork": false, "fork_count": 36, "stargazer_count": 120, "size": 205797, "license": "licensed"}}