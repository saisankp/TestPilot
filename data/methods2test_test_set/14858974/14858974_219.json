{"test_class": {"identifier": "AddUserTaskTest", "superclass": "", "interfaces": "", "fields": [], "file": "server/src/test/java/org/axway/grapes/server/webapp/tasks/AddUserTaskTest.java"}, "test_case": {"identifier": "testAddUser", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n\tpublic void testAddUser() throws UnknownHostException, AuthenticationException {\n\t\tfinal TestingRepositoryHandler repoHandler = new TestingRepositoryHandler();\n\t\t\n\t\tfinal AddUserTask addUser = new AddUserTask(repoHandler);\n\t\tfinal ImmutableMultimap.Builder<String, String> builder = new Builder<String, String>();\n\t\tbuilder.put(ServerAPI.USER_PARAM, \"user\");\n\t\tbuilder.put(ServerAPI.PASSWORD_PARAM, \"password\");\n\t\tException exception = null;\n\t\t\n\t\ttry {\n\t\t\taddUser.execute(builder.build(), mock(PrintWriter.class));\n\t\t} catch (Exception e) {\n\t\t\texception = e;\n\t\t}\n\t\t\n\t\tassertNull(exception);\n\t\t\n\t\tfinal DbCredential credential = repoHandler.getCredential(\"user\");\n\t\tassertEquals(\"user\", credential.getUser());\n\t\tassertEquals(GrapesAuthenticator.encrypt(\"password\"), credential.getPassword());\n\t\t\n\t}", "signature": "void testAddUser()", "full_signature": "@Test public void testAddUser()", "class_method_signature": "AddUserTaskTest.testAddUser()", "testcase": true, "constructor": false, "invocations": ["put", "put", "execute", "build", "mock", "assertNull", "getCredential", "assertEquals", "getUser", "assertEquals", "encrypt", "getPassword"]}, "focal_class": {"identifier": "AddUserTask", "superclass": "extends Task", "interfaces": "", "fields": [{"original_string": "private final RepositoryHandler repoHandler;", "modifier": "private final", "type": "RepositoryHandler", "declarator": "repoHandler", "var_name": "repoHandler"}], "methods": [{"identifier": "AddUserTask", "parameters": "(final RepositoryHandler repoHandler)", "modifiers": "public", "return": "", "signature": " AddUserTask(final RepositoryHandler repoHandler)", "full_signature": "public  AddUserTask(final RepositoryHandler repoHandler)", "class_method_signature": "AddUserTask.AddUserTask(final RepositoryHandler repoHandler)", "testcase": false, "constructor": true}, {"identifier": "execute", "parameters": "(final ImmutableMultimap<String, String> args, final PrintWriter printer)", "modifiers": "@Override public", "return": "void", "signature": "void execute(final ImmutableMultimap<String, String> args, final PrintWriter printer)", "full_signature": "@Override public void execute(final ImmutableMultimap<String, String> args, final PrintWriter printer)", "class_method_signature": "AddUserTask.execute(final ImmutableMultimap<String, String> args, final PrintWriter printer)", "testcase": false, "constructor": false}], "file": "server/src/main/java/org/axway/grapes/server/webapp/tasks/AddUserTask.java"}, "focal_method": {"identifier": "execute", "parameters": "(final ImmutableMultimap<String, String> args, final PrintWriter printer)", "modifiers": "@Override public", "return": "void", "body": "@Override\n\tpublic void execute(final ImmutableMultimap<String, String> args, final PrintWriter printer) throws AuthenticationException {\n\t\tprinter.println(\"Adding/update credentials ...\");\n        final DbCredential credential = new DbCredential();\n\t\tcredential.setUser(args.get(ServerAPI.USER_PARAM).asList().get(0));\n\t\tcredential.setPassword(GrapesAuthenticator.encrypt(args.get(ServerAPI.PASSWORD_PARAM).asList().get(0)));\n        \n        if(!credential.isHealthy()){\n            printer.println(\"ERROR: Bad request! The provided credential are unhealthy or incomplete.\");\n            return;\n        }\n        \n\t\trepoHandler.store(credential);\n\n\t\tprinter.println(\"Task performed successfully.\");\n\t}", "signature": "void execute(final ImmutableMultimap<String, String> args, final PrintWriter printer)", "full_signature": "@Override public void execute(final ImmutableMultimap<String, String> args, final PrintWriter printer)", "class_method_signature": "AddUserTask.execute(final ImmutableMultimap<String, String> args, final PrintWriter printer)", "testcase": false, "constructor": false, "invocations": ["println", "setUser", "get", "asList", "get", "setPassword", "encrypt", "get", "asList", "get", "isHealthy", "println", "store", "println"]}, "repository": {"repo_id": 14858974, "url": "https://github.com/Axway/Grapes", "language": "Java", "is_fork": false, "fork_count": 9, "stargazer_count": 8, "size": 3620, "license": "licensed"}}