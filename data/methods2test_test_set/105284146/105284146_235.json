{"test_class": {"identifier": "XMLImporterTest", "superclass": "extends AbstractConverterTest", "interfaces": "", "fields": [{"original_string": "private XMLImporter importer;", "modifier": "private", "type": "XMLImporter", "declarator": "importer", "var_name": "importer"}], "file": "iidm/iidm-xml-converter/src/test/java/com/powsybl/iidm/xml/XMLImporterTest.java"}, "test_case": {"identifier": "importData", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void importData() {\n        // should be ok\n        assertNotNull(importer.importData(new FileDataSource(fileSystem.getPath(\"/\"), \"test0\"), null));\n\n        // should fail because file that does not exist\n        try {\n            importer.importData(new FileDataSource(fileSystem.getPath(\"/\"), \"test4\"), null);\n            fail();\n        } catch (RuntimeException ignored) {\n        }\n\n        // extension plugin will be not found but default option just warn\n        assertNotNull(importer.importData(new FileDataSource(fileSystem.getPath(\"/\"), \"test5\"), null));\n\n        // extension plugin will be not found but option is set to throw an exception\n        // (deprecated parameter name)\n        Properties params = new Properties();\n        params.put(\"throwExceptionIfExtensionNotFound\", \"true\");\n        try {\n            importer.importData(new FileDataSource(fileSystem.getPath(\"/\"), \"test5\"), params);\n            fail();\n        } catch (RuntimeException ignored) {\n        }\n\n        // extension plugin will be not found but option is set to throw an exception\n        // (parameter name following same naming convention of XmlExporter)\n        Properties params2 = new Properties();\n        params2.put(\"iidm.import.xml.throw-exception-if-extension-not-found\", \"true\");\n        try {\n            importer.importData(new FileDataSource(fileSystem.getPath(\"/\"), \"test5\"), params2);\n            fail();\n        } catch (RuntimeException ignored) {\n        }\n\n        // read file with id mapping\n        Network network = importer.importData(new FileDataSource(fileSystem.getPath(\"/\"), \"test6\"), params);\n        assertNotNull(network.getSubstation(\"X1\")); // and not P1 !!!!!\n\n        Network network2 = importer.importData(new FileDataSource(fileSystem.getPath(\"/\"), \"test7\"), null);\n        assertNotNull(network2.getSubstation(\"P1\"));\n    }", "signature": "void importData()", "full_signature": "@Test public void importData()", "class_method_signature": "XMLImporterTest.importData()", "testcase": true, "constructor": false, "invocations": ["assertNotNull", "importData", "getPath", "importData", "getPath", "fail", "assertNotNull", "importData", "getPath", "put", "importData", "getPath", "fail", "put", "importData", "getPath", "fail", "importData", "getPath", "assertNotNull", "getSubstation", "importData", "getPath", "assertNotNull", "getSubstation"]}, "focal_class": {"identifier": "XMLImporter", "superclass": "", "interfaces": "implements Importer", "fields": [{"original_string": "private static final Logger LOGGER = LoggerFactory.getLogger(XMLImporter.class);", "modifier": "private static final", "type": "Logger", "declarator": "LOGGER = LoggerFactory.getLogger(XMLImporter.class)", "var_name": "LOGGER"}, {"original_string": "private static final String[] EXTENSIONS = {\"xiidm\", \"iidm\", \"xml\", \"iidm.xml\"};", "modifier": "private static final", "type": "String[]", "declarator": "EXTENSIONS = {\"xiidm\", \"iidm\", \"xml\", \"iidm.xml\"}", "var_name": "EXTENSIONS"}, {"original_string": "private static final Supplier<XMLInputFactory> XML_INPUT_FACTORY_SUPPLIER = Suppliers.memoize(XMLInputFactory::newInstance);", "modifier": "private static final", "type": "Supplier<XMLInputFactory>", "declarator": "XML_INPUT_FACTORY_SUPPLIER = Suppliers.memoize(XMLInputFactory::newInstance)", "var_name": "XML_INPUT_FACTORY_SUPPLIER"}, {"original_string": "public static final String THROW_EXCEPTION_IF_EXTENSION_NOT_FOUND = \"iidm.import.xml.throw-exception-if-extension-not-found\";", "modifier": "public static final", "type": "String", "declarator": "THROW_EXCEPTION_IF_EXTENSION_NOT_FOUND = \"iidm.import.xml.throw-exception-if-extension-not-found\"", "var_name": "THROW_EXCEPTION_IF_EXTENSION_NOT_FOUND"}, {"original_string": "public static final String EXTENSIONS_LIST = \"iidm.import.xml.extensions\";", "modifier": "public static final", "type": "String", "declarator": "EXTENSIONS_LIST = \"iidm.import.xml.extensions\"", "var_name": "EXTENSIONS_LIST"}, {"original_string": "private static final Parameter THROW_EXCEPTION_IF_EXTENSION_NOT_FOUND_PARAMETER\n            = new Parameter(THROW_EXCEPTION_IF_EXTENSION_NOT_FOUND, ParameterType.BOOLEAN, \"Throw exception if extension not found\", Boolean.FALSE)\n            .addAdditionalNames(\"throwExceptionIfExtensionNotFound\");", "modifier": "private static final", "type": "Parameter", "declarator": "THROW_EXCEPTION_IF_EXTENSION_NOT_FOUND_PARAMETER\n            = new Parameter(THROW_EXCEPTION_IF_EXTENSION_NOT_FOUND, ParameterType.BOOLEAN, \"Throw exception if extension not found\", Boolean.FALSE)\n            .addAdditionalNames(\"throwExceptionIfExtensionNotFound\")", "var_name": "THROW_EXCEPTION_IF_EXTENSION_NOT_FOUND_PARAMETER"}, {"original_string": "private static final Parameter EXTENSIONS_LIST_PARAMETER\n            = new Parameter(EXTENSIONS_LIST, ParameterType.STRING_LIST, \"The list of extension files \", null);", "modifier": "private static final", "type": "Parameter", "declarator": "EXTENSIONS_LIST_PARAMETER\n            = new Parameter(EXTENSIONS_LIST, ParameterType.STRING_LIST, \"The list of extension files \", null)", "var_name": "EXTENSIONS_LIST_PARAMETER"}, {"original_string": "private final ParameterDefaultValueConfig defaultValueConfig;", "modifier": "private final", "type": "ParameterDefaultValueConfig", "declarator": "defaultValueConfig", "var_name": "defaultValueConfig"}, {"original_string": "static final String SUFFIX_MAPPING = \"_mapping\";", "modifier": "static final", "type": "String", "declarator": "SUFFIX_MAPPING = \"_mapping\"", "var_name": "SUFFIX_MAPPING"}], "methods": [{"identifier": "XMLImporter", "parameters": "()", "modifiers": "public", "return": "", "signature": " XMLImporter()", "full_signature": "public  XMLImporter()", "class_method_signature": "XMLImporter.XMLImporter()", "testcase": false, "constructor": true}, {"identifier": "XMLImporter", "parameters": "(PlatformConfig platformConfig)", "modifiers": "public", "return": "", "signature": " XMLImporter(PlatformConfig platformConfig)", "full_signature": "public  XMLImporter(PlatformConfig platformConfig)", "class_method_signature": "XMLImporter.XMLImporter(PlatformConfig platformConfig)", "testcase": false, "constructor": true}, {"identifier": "getFormat", "parameters": "()", "modifiers": "@Override public", "return": "String", "signature": "String getFormat()", "full_signature": "@Override public String getFormat()", "class_method_signature": "XMLImporter.getFormat()", "testcase": false, "constructor": false}, {"identifier": "getParameters", "parameters": "()", "modifiers": "@Override public", "return": "List<Parameter>", "signature": "List<Parameter> getParameters()", "full_signature": "@Override public List<Parameter> getParameters()", "class_method_signature": "XMLImporter.getParameters()", "testcase": false, "constructor": false}, {"identifier": "getComment", "parameters": "()", "modifiers": "@Override public", "return": "String", "signature": "String getComment()", "full_signature": "@Override public String getComment()", "class_method_signature": "XMLImporter.getComment()", "testcase": false, "constructor": false}, {"identifier": "findExtension", "parameters": "(ReadOnlyDataSource dataSource)", "modifiers": "private", "return": "String", "signature": "String findExtension(ReadOnlyDataSource dataSource)", "full_signature": "private String findExtension(ReadOnlyDataSource dataSource)", "class_method_signature": "XMLImporter.findExtension(ReadOnlyDataSource dataSource)", "testcase": false, "constructor": false}, {"identifier": "exists", "parameters": "(ReadOnlyDataSource dataSource)", "modifiers": "@Override public", "return": "boolean", "signature": "boolean exists(ReadOnlyDataSource dataSource)", "full_signature": "@Override public boolean exists(ReadOnlyDataSource dataSource)", "class_method_signature": "XMLImporter.exists(ReadOnlyDataSource dataSource)", "testcase": false, "constructor": false}, {"identifier": "exists", "parameters": "(ReadOnlyDataSource dataSource, String ext)", "modifiers": "private", "return": "boolean", "signature": "boolean exists(ReadOnlyDataSource dataSource, String ext)", "full_signature": "private boolean exists(ReadOnlyDataSource dataSource, String ext)", "class_method_signature": "XMLImporter.exists(ReadOnlyDataSource dataSource, String ext)", "testcase": false, "constructor": false}, {"identifier": "copy", "parameters": "(ReadOnlyDataSource fromDataSource, DataSource toDataSource)", "modifiers": "@Override public", "return": "void", "signature": "void copy(ReadOnlyDataSource fromDataSource, DataSource toDataSource)", "full_signature": "@Override public void copy(ReadOnlyDataSource fromDataSource, DataSource toDataSource)", "class_method_signature": "XMLImporter.copy(ReadOnlyDataSource fromDataSource, DataSource toDataSource)", "testcase": false, "constructor": false}, {"identifier": "importData", "parameters": "(ReadOnlyDataSource dataSource, NetworkFactory networkFactory, Properties parameters)", "modifiers": "@Override public", "return": "Network", "signature": "Network importData(ReadOnlyDataSource dataSource, NetworkFactory networkFactory, Properties parameters)", "full_signature": "@Override public Network importData(ReadOnlyDataSource dataSource, NetworkFactory networkFactory, Properties parameters)", "class_method_signature": "XMLImporter.importData(ReadOnlyDataSource dataSource, NetworkFactory networkFactory, Properties parameters)", "testcase": false, "constructor": false}, {"identifier": "createImportOptions", "parameters": "(Properties parameters)", "modifiers": "private", "return": "ImportOptions", "signature": "ImportOptions createImportOptions(Properties parameters)", "full_signature": "private ImportOptions createImportOptions(Properties parameters)", "class_method_signature": "XMLImporter.createImportOptions(Properties parameters)", "testcase": false, "constructor": false}], "file": "iidm/iidm-xml-converter/src/main/java/com/powsybl/iidm/xml/XMLImporter.java"}, "focal_method": {"identifier": "importData", "parameters": "(ReadOnlyDataSource dataSource, NetworkFactory networkFactory, Properties parameters)", "modifiers": "@Override public", "return": "Network", "body": "@Override\n    public Network importData(ReadOnlyDataSource dataSource, NetworkFactory networkFactory, Properties parameters) {\n        Objects.requireNonNull(dataSource);\n        Network network;\n\n        ImportOptions options = createImportOptions(parameters);\n        long startTime = System.currentTimeMillis();\n        try {\n            String ext = findExtension(dataSource);\n            if (ext == null) {\n                throw new PowsyblException(\"File \" + dataSource.getBaseName()\n                        + \".\" + Joiner.on(\"|\").join(EXTENSIONS) + \" not found\");\n            }\n\n            network = NetworkXml.read(dataSource, networkFactory, options, ext);\n            LOGGER.debug(\"XIIDM import done in {} ms\", System.currentTimeMillis() - startTime);\n        } catch (IOException e) {\n            throw new PowsyblException(e);\n        }\n        return network;\n    }", "signature": "Network importData(ReadOnlyDataSource dataSource, NetworkFactory networkFactory, Properties parameters)", "full_signature": "@Override public Network importData(ReadOnlyDataSource dataSource, NetworkFactory networkFactory, Properties parameters)", "class_method_signature": "XMLImporter.importData(ReadOnlyDataSource dataSource, NetworkFactory networkFactory, Properties parameters)", "testcase": false, "constructor": false, "invocations": ["requireNonNull", "createImportOptions", "currentTimeMillis", "findExtension", "getBaseName", "join", "on", "read", "debug", "currentTimeMillis"]}, "repository": {"repo_id": 105284146, "url": "https://github.com/powsybl/powsybl-core", "stars": 53, "created": "9/29/2017 2:51:18 PM +00:00", "updates": "2020-01-27T10:39:13+00:00", "fork": "False", "license": "licensed"}}