{"test_class": {"identifier": "RestImplTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private RestImpl rest;", "modifier": "private", "type": "RestImpl", "declarator": "rest", "var_name": "rest"}, {"original_string": "private DefaultMockServer mockServer;", "modifier": "private", "type": "DefaultMockServer", "declarator": "mockServer", "var_name": "mockServer"}, {"original_string": "@Mock\n    private TokenProvider tokenProvider;", "modifier": "@Mock\n    private", "type": "TokenProvider", "declarator": "tokenProvider", "var_name": "tokenProvider"}, {"original_string": "@Mock\n    private LoginCallback loginCallback;", "modifier": "@Mock\n    private", "type": "LoginCallback", "declarator": "loginCallback", "var_name": "loginCallback"}, {"original_string": "@Mock\n    private PaginatedCallback<Attachment> attachmentCallback;", "modifier": "@Mock\n    private", "type": "PaginatedCallback<Attachment>", "declarator": "attachmentCallback", "var_name": "attachmentCallback"}, {"original_string": "@Mock\n    private PaginatedCallback<Message> messagesCallback;", "modifier": "@Mock\n    private", "type": "PaginatedCallback<Message>", "declarator": "messagesCallback", "var_name": "messagesCallback"}, {"original_string": "@Mock\n    private PaginatedCallback<User> usersCallback;", "modifier": "@Mock\n    private", "type": "PaginatedCallback<User>", "declarator": "usersCallback", "var_name": "usersCallback"}, {"original_string": "@Mock\n    private SimpleListCallback<Subscription> subscriptionsCallback;", "modifier": "@Mock\n    private", "type": "SimpleListCallback<Subscription>", "declarator": "subscriptionsCallback", "var_name": "subscriptionsCallback"}, {"original_string": "@Captor\n    private ArgumentCaptor<Token> tokenCaptor;", "modifier": "@Captor\n    private", "type": "ArgumentCaptor<Token>", "declarator": "tokenCaptor", "var_name": "tokenCaptor"}, {"original_string": "@Captor\n    private ArgumentCaptor<List<Attachment>> attachmentsCaptor;", "modifier": "@Captor\n    private", "type": "ArgumentCaptor<List<Attachment>>", "declarator": "attachmentsCaptor", "var_name": "attachmentsCaptor"}, {"original_string": "@Captor\n    private ArgumentCaptor<List<User>> usersCaptor;", "modifier": "@Captor\n    private", "type": "ArgumentCaptor<List<User>>", "declarator": "usersCaptor", "var_name": "usersCaptor"}, {"original_string": "@Captor\n    private ArgumentCaptor<List<Message>> messagesCaptor;", "modifier": "@Captor\n    private", "type": "ArgumentCaptor<List<Message>>", "declarator": "messagesCaptor", "var_name": "messagesCaptor"}, {"original_string": "@Captor\n    private ArgumentCaptor<List<Subscription>> subscriptionsCaptor;", "modifier": "@Captor\n    private", "type": "ArgumentCaptor<List<Subscription>>", "declarator": "subscriptionsCaptor", "var_name": "subscriptionsCaptor"}, {"original_string": "@Captor\n    private ArgumentCaptor<RocketChatException> exceptionCaptor;", "modifier": "@Captor\n    private", "type": "ArgumentCaptor<RocketChatException>", "declarator": "exceptionCaptor", "var_name": "exceptionCaptor"}, {"original_string": "private static final int DEFAULT_TIMEOUT = 200;", "modifier": "private static final", "type": "int", "declarator": "DEFAULT_TIMEOUT = 200", "var_name": "DEFAULT_TIMEOUT"}], "file": "rocketchat-core/src/test/java/com/rocketchat/core/RestImplTest.java"}, "test_case": {"identifier": "testGetRoomFavoriteMessagesShouldFailWithNullCallback", "parameters": "()", "modifiers": "@Test(expected = NullPointerException.class) public", "return": "void", "body": "@Test(expected = NullPointerException.class)\n    public void testGetRoomFavoriteMessagesShouldFailWithNullCallback() {\n        rest.getRoomFavoriteMessages(\"roomId\", BaseRoom.RoomType.PUBLIC, 0, null);\n    }", "signature": "void testGetRoomFavoriteMessagesShouldFailWithNullCallback()", "full_signature": "@Test(expected = NullPointerException.class) public void testGetRoomFavoriteMessagesShouldFailWithNullCallback()", "class_method_signature": "RestImplTest.testGetRoomFavoriteMessagesShouldFailWithNullCallback()", "testcase": true, "constructor": false, "invocations": ["getRoomFavoriteMessages"]}, "focal_class": {"identifier": "RestImpl", "superclass": "", "interfaces": "", "fields": [{"original_string": "private final OkHttpClient client;", "modifier": "private final", "type": "OkHttpClient", "declarator": "client", "var_name": "client"}, {"original_string": "private final HttpUrl baseUrl;", "modifier": "private final", "type": "HttpUrl", "declarator": "baseUrl", "var_name": "baseUrl"}, {"original_string": "private final TokenProvider tokenProvider;", "modifier": "private final", "type": "TokenProvider", "declarator": "tokenProvider", "var_name": "tokenProvider"}, {"original_string": "private final Moshi moshi;", "modifier": "private final", "type": "Moshi", "declarator": "moshi", "var_name": "moshi"}, {"original_string": "private final Logger logger;", "modifier": "private final", "type": "Logger", "declarator": "logger", "var_name": "logger"}], "methods": [{"identifier": "RestImpl", "parameters": "(OkHttpClient client, Moshi moshi, HttpUrl baseUrl, TokenProvider tokenProvider, Logger logger)", "modifiers": "", "return": "", "signature": " RestImpl(OkHttpClient client, Moshi moshi, HttpUrl baseUrl, TokenProvider tokenProvider, Logger logger)", "full_signature": "  RestImpl(OkHttpClient client, Moshi moshi, HttpUrl baseUrl, TokenProvider tokenProvider, Logger logger)", "class_method_signature": "RestImpl.RestImpl(OkHttpClient client, Moshi moshi, HttpUrl baseUrl, TokenProvider tokenProvider, Logger logger)", "testcase": false, "constructor": true}, {"identifier": "signin", "parameters": "(String username, String password, final LoginCallback loginCallback)", "modifiers": "", "return": "void", "signature": "void signin(String username, String password, final LoginCallback loginCallback)", "full_signature": " void signin(String username, String password, final LoginCallback loginCallback)", "class_method_signature": "RestImpl.signin(String username, String password, final LoginCallback loginCallback)", "testcase": false, "constructor": false}, {"identifier": "serverInfo", "parameters": "(final ServerInfoCallback callback)", "modifiers": "", "return": "void", "signature": "void serverInfo(final ServerInfoCallback callback)", "full_signature": " void serverInfo(final ServerInfoCallback callback)", "class_method_signature": "RestImpl.serverInfo(final ServerInfoCallback callback)", "testcase": false, "constructor": false}, {"identifier": "pinMessage", "parameters": "(String messageId, final SimpleCallback callback)", "modifiers": "", "return": "void", "signature": "void pinMessage(String messageId, final SimpleCallback callback)", "full_signature": " void pinMessage(String messageId, final SimpleCallback callback)", "class_method_signature": "RestImpl.pinMessage(String messageId, final SimpleCallback callback)", "testcase": false, "constructor": false}, {"identifier": "getRoomMembers", "parameters": "(String roomId,\n                        BaseRoom.RoomType roomType,\n                        int offset,\n                        BaseUser.SortBy sortBy,\n                        Sort sort,\n                        final PaginatedCallback<User> callback)", "modifiers": "", "return": "void", "signature": "void getRoomMembers(String roomId,\n                        BaseRoom.RoomType roomType,\n                        int offset,\n                        BaseUser.SortBy sortBy,\n                        Sort sort,\n                        final PaginatedCallback<User> callback)", "full_signature": " void getRoomMembers(String roomId,\n                        BaseRoom.RoomType roomType,\n                        int offset,\n                        BaseUser.SortBy sortBy,\n                        Sort sort,\n                        final PaginatedCallback<User> callback)", "class_method_signature": "RestImpl.getRoomMembers(String roomId,\n                        BaseRoom.RoomType roomType,\n                        int offset,\n                        BaseUser.SortBy sortBy,\n                        Sort sort,\n                        final PaginatedCallback<User> callback)", "testcase": false, "constructor": false}, {"identifier": "getRoomFavoriteMessages", "parameters": "(String roomId,\n                                 BaseRoom.RoomType roomType,\n                                 int offset,\n                                 final PaginatedCallback<Message> callback)", "modifiers": "", "return": "void", "signature": "void getRoomFavoriteMessages(String roomId,\n                                 BaseRoom.RoomType roomType,\n                                 int offset,\n                                 final PaginatedCallback<Message> callback)", "full_signature": " void getRoomFavoriteMessages(String roomId,\n                                 BaseRoom.RoomType roomType,\n                                 int offset,\n                                 final PaginatedCallback<Message> callback)", "class_method_signature": "RestImpl.getRoomFavoriteMessages(String roomId,\n                                 BaseRoom.RoomType roomType,\n                                 int offset,\n                                 final PaginatedCallback<Message> callback)", "testcase": false, "constructor": false}, {"identifier": "getUserGroupList", "parameters": "(final SimpleListCallback<Subscription> callback)", "modifiers": "", "return": "void", "signature": "void getUserGroupList(final SimpleListCallback<Subscription> callback)", "full_signature": " void getUserGroupList(final SimpleListCallback<Subscription> callback)", "class_method_signature": "RestImpl.getUserGroupList(final SimpleListCallback<Subscription> callback)", "testcase": false, "constructor": false}, {"identifier": "getUserChannelList", "parameters": "(final SimpleListCallback<Subscription> callback)", "modifiers": "", "return": "void", "signature": "void getUserChannelList(final SimpleListCallback<Subscription> callback)", "full_signature": " void getUserChannelList(final SimpleListCallback<Subscription> callback)", "class_method_signature": "RestImpl.getUserChannelList(final SimpleListCallback<Subscription> callback)", "testcase": false, "constructor": false}, {"identifier": "getUserDirectMessageList", "parameters": "(final SimpleListCallback<Subscription> callback)", "modifiers": "", "return": "void", "signature": "void getUserDirectMessageList(final SimpleListCallback<Subscription> callback)", "full_signature": " void getUserDirectMessageList(final SimpleListCallback<Subscription> callback)", "class_method_signature": "RestImpl.getUserDirectMessageList(final SimpleListCallback<Subscription> callback)", "testcase": false, "constructor": false}, {"identifier": "getRoomPinnedMessages", "parameters": "(String roomId,\n                               BaseRoom.RoomType roomType,\n                               int offset,\n                               final PaginatedCallback<Message> callback)", "modifiers": "", "return": "void", "signature": "void getRoomPinnedMessages(String roomId,\n                               BaseRoom.RoomType roomType,\n                               int offset,\n                               final PaginatedCallback<Message> callback)", "full_signature": " void getRoomPinnedMessages(String roomId,\n                               BaseRoom.RoomType roomType,\n                               int offset,\n                               final PaginatedCallback<Message> callback)", "class_method_signature": "RestImpl.getRoomPinnedMessages(String roomId,\n                               BaseRoom.RoomType roomType,\n                               int offset,\n                               final PaginatedCallback<Message> callback)", "testcase": false, "constructor": false}, {"identifier": "getRoomFiles", "parameters": "(String roomId,\n                      BaseRoom.RoomType roomType,\n                      int offset,\n                      Attachment.SortBy sortBy,\n                      Sort sort,\n                      final PaginatedCallback<Attachment> callback)", "modifiers": "", "return": "void", "signature": "void getRoomFiles(String roomId,\n                      BaseRoom.RoomType roomType,\n                      int offset,\n                      Attachment.SortBy sortBy,\n                      Sort sort,\n                      final PaginatedCallback<Attachment> callback)", "full_signature": " void getRoomFiles(String roomId,\n                      BaseRoom.RoomType roomType,\n                      int offset,\n                      Attachment.SortBy sortBy,\n                      Sort sort,\n                      final PaginatedCallback<Attachment> callback)", "class_method_signature": "RestImpl.getRoomFiles(String roomId,\n                      BaseRoom.RoomType roomType,\n                      int offset,\n                      Attachment.SortBy sortBy,\n                      Sort sort,\n                      final PaginatedCallback<Attachment> callback)", "testcase": false, "constructor": false}, {"identifier": "ERROR_HANDLER", "parameters": "(final Callback callback)", "modifiers": "private static", "return": "ErrorCallback", "signature": "ErrorCallback ERROR_HANDLER(final Callback callback)", "full_signature": "private static ErrorCallback ERROR_HANDLER(final Callback callback)", "class_method_signature": "RestImpl.ERROR_HANDLER(final Callback callback)", "testcase": false, "constructor": false}, {"identifier": "handleSimpleRestCall", "parameters": "(Request request,\n                                          final Type type,\n                                          final ValueCallback<T> valueCallback,\n                                          final ErrorCallback errorCallback)", "modifiers": "private", "return": "void", "signature": "void handleSimpleRestCall(Request request,\n                                          final Type type,\n                                          final ValueCallback<T> valueCallback,\n                                          final ErrorCallback errorCallback)", "full_signature": "private void handleSimpleRestCall(Request request,\n                                          final Type type,\n                                          final ValueCallback<T> valueCallback,\n                                          final ErrorCallback errorCallback)", "class_method_signature": "RestImpl.handleSimpleRestCall(Request request,\n                                          final Type type,\n                                          final ValueCallback<T> valueCallback,\n                                          final ErrorCallback errorCallback)", "testcase": false, "constructor": false}, {"identifier": "getRestApiMethodNameByRoomType", "parameters": "(BaseRoom.RoomType roomType, String method)", "modifiers": "private", "return": "String", "signature": "String getRestApiMethodNameByRoomType(BaseRoom.RoomType roomType, String method)", "full_signature": "private String getRestApiMethodNameByRoomType(BaseRoom.RoomType roomType, String method)", "class_method_signature": "RestImpl.getRestApiMethodNameByRoomType(BaseRoom.RoomType roomType, String method)", "testcase": false, "constructor": false}, {"identifier": "requestUrl", "parameters": "(HttpUrl baseUrl, String method)", "modifiers": "private", "return": "HttpUrl.Builder", "signature": "HttpUrl.Builder requestUrl(HttpUrl baseUrl, String method)", "full_signature": "private HttpUrl.Builder requestUrl(HttpUrl baseUrl, String method)", "class_method_signature": "RestImpl.requestUrl(HttpUrl baseUrl, String method)", "testcase": false, "constructor": false}, {"identifier": "requestBuilder", "parameters": "(HttpUrl httpUrl)", "modifiers": "private", "return": "Request.Builder", "signature": "Request.Builder requestBuilder(HttpUrl httpUrl)", "full_signature": "private Request.Builder requestBuilder(HttpUrl httpUrl)", "class_method_signature": "RestImpl.requestBuilder(HttpUrl httpUrl)", "testcase": false, "constructor": false}, {"identifier": "processCallbackError", "parameters": "(Response response, ErrorCallback callback)", "modifiers": "private", "return": "void", "signature": "void processCallbackError(Response response, ErrorCallback callback)", "full_signature": "private void processCallbackError(Response response, ErrorCallback callback)", "class_method_signature": "RestImpl.processCallbackError(Response response, ErrorCallback callback)", "testcase": false, "constructor": false}], "file": "rocketchat-core/src/main/java/com/rocketchat/core/RestImpl.java"}, "focal_method": {"identifier": "getRoomFavoriteMessages", "parameters": "(String roomId,\n                                 BaseRoom.RoomType roomType,\n                                 int offset,\n                                 final PaginatedCallback<Message> callback)", "modifiers": "", "return": "void", "body": "void getRoomFavoriteMessages(String roomId,\n                                 BaseRoom.RoomType roomType,\n                                 int offset,\n                                 final PaginatedCallback<Message> callback) {\n        String userId = tokenProvider.getToken().userId();\n        checkNotNull(userId, \"userId == null\");\n        checkNotNull(roomId, \"roomId == null\");\n        checkNotNull(roomType, \"roomType == null\");\n        checkNotNull(callback, \"callback == null\");\n\n        HttpUrl httpUrl = requestUrl(baseUrl, getRestApiMethodNameByRoomType(roomType, \"messages\"))\n                .addQueryParameter(\"roomId\", roomId)\n                .addQueryParameter(\"offset\", String.valueOf(offset))\n                .addQueryParameter(\"query\", \"{\\\"starred._id\\\":{\\\"$in\\\":[\\\"\" + userId + \"\\\"]}}\")\n                .build();\n\n        Request request = requestBuilder(httpUrl)\n                .get()\n                .build();\n\n        client.newCall(request).enqueue(new okhttp3.Callback() {\n            @Override\n            public void onFailure(Call call, IOException e) {\n                callback.onError(new RocketChatNetworkErrorException(\"network error\", e));\n            }\n\n            @Override\n            public void onResponse(Call call, Response response) throws IOException {\n                if (!response.isSuccessful()) {\n                    processCallbackError(response, ERROR_HANDLER(callback));\n                    return;\n                }\n\n                try {\n                    JSONObject json = new JSONObject(response.body().string());\n                    logger.info(\"Response = \" + json.toString());\n\n                    Type type = Types.newParameterizedType(List.class, Message.class);\n                    JsonAdapter<List<Message>> adapter = moshi.adapter(type);\n                    List<Message> messageList = adapter.fromJson(json.getJSONArray(\"messages\").toString());\n\n                    callback.onSuccess(messageList, json.optInt(\"total\"));\n                } catch (JSONException e) {\n                    callback.onError(new RocketChatInvalidResponseException(e.getMessage(), e));\n                }\n            }\n        });\n    }", "signature": "void getRoomFavoriteMessages(String roomId,\n                                 BaseRoom.RoomType roomType,\n                                 int offset,\n                                 final PaginatedCallback<Message> callback)", "full_signature": " void getRoomFavoriteMessages(String roomId,\n                                 BaseRoom.RoomType roomType,\n                                 int offset,\n                                 final PaginatedCallback<Message> callback)", "class_method_signature": "RestImpl.getRoomFavoriteMessages(String roomId,\n                                 BaseRoom.RoomType roomType,\n                                 int offset,\n                                 final PaginatedCallback<Message> callback)", "testcase": false, "constructor": false, "invocations": ["userId", "getToken", "checkNotNull", "checkNotNull", "checkNotNull", "checkNotNull", "build", "addQueryParameter", "addQueryParameter", "addQueryParameter", "requestUrl", "getRestApiMethodNameByRoomType", "valueOf", "build", "get", "requestBuilder", "enqueue", "newCall", "onError", "isSuccessful", "processCallbackError", "ERROR_HANDLER", "string", "body", "info", "toString", "newParameterizedType", "adapter", "fromJson", "toString", "getJSONArray", "onSuccess", "optInt", "onError", "getMessage"]}, "repository": {"repo_id": 93714543, "url": "https://github.com/RocketChat/Rocket.Chat.Java.SDK", "language": "Java", "is_fork": false, "fork_count": 22, "stargazer_count": 26, "size": 2962, "license": "licensed"}}