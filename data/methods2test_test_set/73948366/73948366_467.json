{"test_class": {"identifier": "InstanceAWSECSProviderTest", "superclass": "", "interfaces": "", "fields": [], "file": "libs/java/instance_provider/src/test/java/com/yahoo/athenz/instance/provider/impl/InstanceAWSECSProviderTest.java"}, "test_case": {"identifier": "testGetInstanceId", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testGetInstanceId() {\n        InstanceAWSECSProvider provider = new InstanceAWSECSProvider();\n        provider.initialize(\"provider\", \"com.yahoo.athenz.instance.provider.impl.InstanceAWSECSProvider\", null, null);\n\n        AWSAttestationData data = new AWSAttestationData();\n        data.setTaskid(\"task1234\");\n        assertEquals(provider.getInstanceId(data, null), \"task1234\");\n        \n        data.setTaskid(null);\n        Struct doc = new Struct();\n        doc.put(InstanceAWSProvider.ATTR_INSTANCE_ID, \"data1234\");\n        assertEquals(provider.getInstanceId(data, doc), \"data1234\");\n\n        data.setTaskid(\"\");\n        assertEquals(provider.getInstanceId(data, doc), \"data1234\");\n        \n        data.setTaskid(\"task1234\");\n        assertEquals(provider.getInstanceId(data, doc), \"task1234\");\n    }", "signature": "void testGetInstanceId()", "full_signature": "@Test public void testGetInstanceId()", "class_method_signature": "InstanceAWSECSProviderTest.testGetInstanceId()", "testcase": true, "constructor": false, "invocations": ["initialize", "setTaskid", "assertEquals", "getInstanceId", "setTaskid", "put", "assertEquals", "getInstanceId", "setTaskid", "assertEquals", "getInstanceId", "setTaskid", "assertEquals", "getInstanceId"]}, "focal_class": {"identifier": "InstanceAWSECSProvider", "superclass": "extends InstanceAWSProvider", "interfaces": "", "fields": [], "methods": [{"identifier": "initialize", "parameters": "(String provider, String providerEndpoint, SSLContext sslcontext,\n            KeyStore keyStore)", "modifiers": "@Override public", "return": "void", "signature": "void initialize(String provider, String providerEndpoint, SSLContext sslcontext,\n            KeyStore keyStore)", "full_signature": "@Override public void initialize(String provider, String providerEndpoint, SSLContext sslcontext,\n            KeyStore keyStore)", "class_method_signature": "InstanceAWSECSProvider.initialize(String provider, String providerEndpoint, SSLContext sslcontext,\n            KeyStore keyStore)", "testcase": false, "constructor": false}, {"identifier": "getInstanceId", "parameters": "(AWSAttestationData info, Struct instanceDocument)", "modifiers": "@Override", "return": "String", "signature": "String getInstanceId(AWSAttestationData info, Struct instanceDocument)", "full_signature": "@Override String getInstanceId(AWSAttestationData info, Struct instanceDocument)", "class_method_signature": "InstanceAWSECSProvider.getInstanceId(AWSAttestationData info, Struct instanceDocument)", "testcase": false, "constructor": false}], "file": "libs/java/instance_provider/src/main/java/com/yahoo/athenz/instance/provider/impl/InstanceAWSECSProvider.java"}, "focal_method": {"identifier": "getInstanceId", "parameters": "(AWSAttestationData info, Struct instanceDocument)", "modifiers": "@Override", "return": "String", "body": "@Override\n    String getInstanceId(AWSAttestationData info, Struct instanceDocument) {\n        \n        // we're going to look for container task id first\n        // only if that's not present (as backup), we'll\n        // return the instance document id\n        \n        String instanceId = info.getTaskid();\n        if (instanceId == null || instanceId.isEmpty()) {\n            instanceId = instanceDocument.getString(ATTR_INSTANCE_ID);\n        }\n        return instanceId;\n    }", "signature": "String getInstanceId(AWSAttestationData info, Struct instanceDocument)", "full_signature": "@Override String getInstanceId(AWSAttestationData info, Struct instanceDocument)", "class_method_signature": "InstanceAWSECSProvider.getInstanceId(AWSAttestationData info, Struct instanceDocument)", "testcase": false, "constructor": false, "invocations": ["getTaskid", "isEmpty", "getString"]}, "repository": {"repo_id": 73948366, "url": "https://github.com/yahoo/athenz", "stars": 394, "created": "11/16/2016 6:23:08 PM +00:00", "updates": "2020-01-27T15:36:13+00:00", "fork": "False", "license": "licensed"}}