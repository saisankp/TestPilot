{"test_class": {"identifier": "ReferenceBeanBuilderTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "@DubboReference(\n            interfaceClass = CharSequence.class,\n            interfaceName = \"java.lang.CharSequence\",\n            version = \"1.0.0\", group = \"TEST_GROUP\", url = \"dubbo://localhost:12345\",\n            client = \"client\", generic = true, injvm = true,\n            check = false, init = false, lazy = true,\n            stubevent = true, reconnect = \"reconnect\", sticky = true,\n            proxy = \"javassist\", stub = \"java.lang.CharSequence\", cluster = \"failover\",\n            connections = 3, callbacks = 1, onconnect = \"onconnect\", ondisconnect = \"ondisconnect\",\n            owner = \"owner\", layer = \"layer\", retries = 1,\n            loadbalance = \"random\", async = true, actives = 3,\n            sent = true, mock = \"mock\", validation = \"validation\",\n            timeout = 3, cache = \"cache\", filter = {\"echo\", \"generic\", \"accesslog\"},\n            listener = {\"deprecated\"}, parameters = {\"n1=v1  \", \"n2 = v2 \", \"  n3 =   v3  \"},\n            application = \"application\",\n            module = \"module\", consumer = \"consumer\", monitor = \"monitor\", registry = {\"registry\"},\n            // @since 2.7.3\n            id = \"reference\",\n            // @since 2.7.8\n            services = {\"service1\", \"service2\", \"service3\", \"service2\", \"service1\"}\n    )\n    private static final Object TEST_FIELD = new Object();", "modifier": "@DubboReference(\n            interfaceClass = CharSequence.class,\n            interfaceName = \"java.lang.CharSequence\",\n            version = \"1.0.0\", group = \"TEST_GROUP\", url = \"dubbo://localhost:12345\",\n            client = \"client\", generic = true, injvm = true,\n            check = false, init = false, lazy = true,\n            stubevent = true, reconnect = \"reconnect\", sticky = true,\n            proxy = \"javassist\", stub = \"java.lang.CharSequence\", cluster = \"failover\",\n            connections = 3, callbacks = 1, onconnect = \"onconnect\", ondisconnect = \"ondisconnect\",\n            owner = \"owner\", layer = \"layer\", retries = 1,\n            loadbalance = \"random\", async = true, actives = 3,\n            sent = true, mock = \"mock\", validation = \"validation\",\n            timeout = 3, cache = \"cache\", filter = {\"echo\", \"generic\", \"accesslog\"},\n            listener = {\"deprecated\"}, parameters = {\"n1=v1  \", \"n2 = v2 \", \"  n3 =   v3  \"},\n            application = \"application\",\n            module = \"module\", consumer = \"consumer\", monitor = \"monitor\", registry = {\"registry\"},\n            // @since 2.7.3\n            id = \"reference\",\n            // @since 2.7.8\n            services = {\"service1\", \"service2\", \"service3\", \"service2\", \"service1\"}\n    )\n    private static final", "type": "Object", "declarator": "TEST_FIELD = new Object()", "var_name": "TEST_FIELD"}, {"original_string": "@Autowired\n    private ApplicationContext context;", "modifier": "@Autowired\n    private", "type": "ApplicationContext", "declarator": "context", "var_name": "context"}], "file": "dubbo-config/dubbo-config-spring/src/test/java/org/apache/dubbo/config/spring/beans/factory/annotation/ReferenceBeanBuilderTest.java"}, "test_case": {"identifier": "testBuild", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testBuild() throws Exception {\n        DubboReference reference = findAnnotation(findField(getClass(), \"TEST_FIELD\"), DubboReference.class);\n        AnnotationAttributes attributes = AnnotationUtils.getAnnotationAttributes(reference, false, false);\n        ReferenceBeanBuilder beanBuilder = ReferenceBeanBuilder.create(attributes, context);\n        beanBuilder.interfaceClass(CharSequence.class);\n        ReferenceBean referenceBean = beanBuilder.build();\n        Assert.assertEquals(CharSequence.class, referenceBean.getInterfaceClass());\n        Assert.assertEquals(\"1.0.0\", referenceBean.getVersion());\n        Assert.assertEquals(\"TEST_GROUP\", referenceBean.getGroup());\n        Assert.assertEquals(\"dubbo://localhost:12345\", referenceBean.getUrl());\n        Assert.assertEquals(\"client\", referenceBean.getClient());\n        Assert.assertEquals(true, referenceBean.isGeneric());\n        Assert.assertTrue(referenceBean.isInjvm());\n        Assert.assertEquals(false, referenceBean.isCheck());\n        Assert.assertFalse(referenceBean.isInit());\n        Assert.assertEquals(true, referenceBean.getLazy());\n        Assert.assertEquals(true, referenceBean.getStubevent());\n        Assert.assertEquals(\"reconnect\", referenceBean.getReconnect());\n        Assert.assertEquals(true, referenceBean.getSticky());\n        Assert.assertEquals(\"javassist\", referenceBean.getProxy());\n        Assert.assertEquals(\"java.lang.CharSequence\", referenceBean.getStub());\n        Assert.assertEquals(\"failover\", referenceBean.getCluster());\n        Assert.assertEquals(Integer.valueOf(3), referenceBean.getConnections());\n        Assert.assertEquals(Integer.valueOf(1), referenceBean.getCallbacks());\n        Assert.assertEquals(\"onconnect\", referenceBean.getOnconnect());\n        Assert.assertEquals(\"ondisconnect\", referenceBean.getOndisconnect());\n        Assert.assertEquals(\"owner\", referenceBean.getOwner());\n        Assert.assertEquals(\"layer\", referenceBean.getLayer());\n        Assert.assertEquals(Integer.valueOf(1), referenceBean.getRetries());\n        Assert.assertEquals(\"random\", referenceBean.getLoadbalance());\n        Assert.assertEquals(true, referenceBean.isAsync());\n        Assert.assertEquals(Integer.valueOf(3), referenceBean.getActives());\n        Assert.assertEquals(true, referenceBean.getSent());\n        Assert.assertEquals(\"mock\", referenceBean.getMock());\n        Assert.assertEquals(\"validation\", referenceBean.getValidation());\n        Assert.assertEquals(Integer.valueOf(3), referenceBean.getTimeout());\n        Assert.assertEquals(\"cache\", referenceBean.getCache());\n        Assert.assertEquals(\"echo,generic,accesslog\", referenceBean.getFilter());\n        Assert.assertEquals(\"deprecated\", referenceBean.getListener());\n        Assert.assertEquals(\"reference\", referenceBean.getId());\n        Assert.assertEquals(ofSet(\"service1\", \"service2\", \"service3\"), referenceBean.getSubscribedServices());\n\n        // parameters\n        Map<String, String> parameters = new HashMap<String, String>();\n        parameters.put(\"n1\", \"v1\");\n        parameters.put(\"n2\", \"v2\");\n        parameters.put(\"n3\", \"v3\");\n        Assert.assertEquals(parameters, referenceBean.getParameters());\n\n        // Asserts Null fields\n        Assertions.assertThrows(IllegalStateException.class, () -> referenceBean.getApplication());\n        Assert.assertNull(referenceBean.getModule());\n        Assert.assertNull(referenceBean.getConsumer());\n        Assert.assertNull(referenceBean.getMonitor());\n        Assert.assertEquals(Collections.emptyList(), referenceBean.getRegistries());\n    }", "signature": "void testBuild()", "full_signature": "@Test public void testBuild()", "class_method_signature": "ReferenceBeanBuilderTest.testBuild()", "testcase": true, "constructor": false, "invocations": ["findAnnotation", "findField", "getClass", "getAnnotationAttributes", "create", "interfaceClass", "build", "assertEquals", "getInterfaceClass", "assertEquals", "getVersion", "assertEquals", "getGroup", "assertEquals", "getUrl", "assertEquals", "getClient", "assertEquals", "isGeneric", "assertTrue", "isInjvm", "assertEquals", "isCheck", "assertFalse", "isInit", "assertEquals", "getLazy", "assertEquals", "getStubevent", "assertEquals", "getReconnect", "assertEquals", "getSticky", "assertEquals", "getProxy", "assertEquals", "getStub", "assertEquals", "getCluster", "assertEquals", "valueOf", "getConnections", "assertEquals", "valueOf", "getCallbacks", "assertEquals", "getOnconnect", "assertEquals", "getOndisconnect", "assertEquals", "getOwner", "assertEquals", "getLayer", "assertEquals", "valueOf", "getRetries", "assertEquals", "getLoadbalance", "assertEquals", "isAsync", "assertEquals", "valueOf", "getActives", "assertEquals", "getSent", "assertEquals", "getMock", "assertEquals", "getValidation", "assertEquals", "valueOf", "getTimeout", "assertEquals", "getCache", "assertEquals", "getFilter", "assertEquals", "getListener", "assertEquals", "getId", "assertEquals", "ofSet", "getSubscribedServices", "put", "put", "put", "assertEquals", "getParameters", "assertThrows", "getApplication", "assertNull", "getModule", "assertNull", "getConsumer", "assertNull", "getMonitor", "assertEquals", "emptyList", "getRegistries"]}, "focal_class": {"identifier": "ReferenceBeanBuilder", "superclass": "extends AnnotatedInterfaceConfigBeanBuilder<ReferenceBean>", "interfaces": "", "fields": [{"original_string": "static final String[] IGNORE_FIELD_NAMES = of(\"application\", \"module\", \"consumer\", \"monitor\", \"registry\");", "modifier": "static final", "type": "String[]", "declarator": "IGNORE_FIELD_NAMES = of(\"application\", \"module\", \"consumer\", \"monitor\", \"registry\")", "var_name": "IGNORE_FIELD_NAMES"}], "methods": [{"identifier": "ReferenceBeanBuilder", "parameters": "(AnnotationAttributes attributes, ApplicationContext applicationContext)", "modifiers": "private", "return": "", "signature": " ReferenceBeanBuilder(AnnotationAttributes attributes, ApplicationContext applicationContext)", "full_signature": "private  ReferenceBeanBuilder(AnnotationAttributes attributes, ApplicationContext applicationContext)", "class_method_signature": "ReferenceBeanBuilder.ReferenceBeanBuilder(AnnotationAttributes attributes, ApplicationContext applicationContext)", "testcase": false, "constructor": true}, {"identifier": "configureInterface", "parameters": "(AnnotationAttributes attributes, ReferenceBean referenceBean)", "modifiers": "private", "return": "void", "signature": "void configureInterface(AnnotationAttributes attributes, ReferenceBean referenceBean)", "full_signature": "private void configureInterface(AnnotationAttributes attributes, ReferenceBean referenceBean)", "class_method_signature": "ReferenceBeanBuilder.configureInterface(AnnotationAttributes attributes, ReferenceBean referenceBean)", "testcase": false, "constructor": false}, {"identifier": "configureConsumerConfig", "parameters": "(AnnotationAttributes attributes, ReferenceBean<?> referenceBean)", "modifiers": "private", "return": "void", "signature": "void configureConsumerConfig(AnnotationAttributes attributes, ReferenceBean<?> referenceBean)", "full_signature": "private void configureConsumerConfig(AnnotationAttributes attributes, ReferenceBean<?> referenceBean)", "class_method_signature": "ReferenceBeanBuilder.configureConsumerConfig(AnnotationAttributes attributes, ReferenceBean<?> referenceBean)", "testcase": false, "constructor": false}, {"identifier": "configureMethodConfig", "parameters": "(AnnotationAttributes attributes, ReferenceBean<?> referenceBean)", "modifiers": "", "return": "void", "signature": "void configureMethodConfig(AnnotationAttributes attributes, ReferenceBean<?> referenceBean)", "full_signature": " void configureMethodConfig(AnnotationAttributes attributes, ReferenceBean<?> referenceBean)", "class_method_signature": "ReferenceBeanBuilder.configureMethodConfig(AnnotationAttributes attributes, ReferenceBean<?> referenceBean)", "testcase": false, "constructor": false}, {"identifier": "doBuild", "parameters": "()", "modifiers": "@Override protected", "return": "ReferenceBean", "signature": "ReferenceBean doBuild()", "full_signature": "@Override protected ReferenceBean doBuild()", "class_method_signature": "ReferenceBeanBuilder.doBuild()", "testcase": false, "constructor": false}, {"identifier": "preConfigureBean", "parameters": "(AnnotationAttributes attributes, ReferenceBean referenceBean)", "modifiers": "@Override protected", "return": "void", "signature": "void preConfigureBean(AnnotationAttributes attributes, ReferenceBean referenceBean)", "full_signature": "@Override protected void preConfigureBean(AnnotationAttributes attributes, ReferenceBean referenceBean)", "class_method_signature": "ReferenceBeanBuilder.preConfigureBean(AnnotationAttributes attributes, ReferenceBean referenceBean)", "testcase": false, "constructor": false}, {"identifier": "resolveModuleConfigBeanName", "parameters": "(AnnotationAttributes attributes)", "modifiers": "@Override protected", "return": "String", "signature": "String resolveModuleConfigBeanName(AnnotationAttributes attributes)", "full_signature": "@Override protected String resolveModuleConfigBeanName(AnnotationAttributes attributes)", "class_method_signature": "ReferenceBeanBuilder.resolveModuleConfigBeanName(AnnotationAttributes attributes)", "testcase": false, "constructor": false}, {"identifier": "resolveApplicationConfigBeanName", "parameters": "(AnnotationAttributes attributes)", "modifiers": "@Override protected", "return": "String", "signature": "String resolveApplicationConfigBeanName(AnnotationAttributes attributes)", "full_signature": "@Override protected String resolveApplicationConfigBeanName(AnnotationAttributes attributes)", "class_method_signature": "ReferenceBeanBuilder.resolveApplicationConfigBeanName(AnnotationAttributes attributes)", "testcase": false, "constructor": false}, {"identifier": "resolveRegistryConfigBeanNames", "parameters": "(AnnotationAttributes attributes)", "modifiers": "@Override protected", "return": "String[]", "signature": "String[] resolveRegistryConfigBeanNames(AnnotationAttributes attributes)", "full_signature": "@Override protected String[] resolveRegistryConfigBeanNames(AnnotationAttributes attributes)", "class_method_signature": "ReferenceBeanBuilder.resolveRegistryConfigBeanNames(AnnotationAttributes attributes)", "testcase": false, "constructor": false}, {"identifier": "resolveMonitorConfigBeanName", "parameters": "(AnnotationAttributes attributes)", "modifiers": "@Override protected", "return": "String", "signature": "String resolveMonitorConfigBeanName(AnnotationAttributes attributes)", "full_signature": "@Override protected String resolveMonitorConfigBeanName(AnnotationAttributes attributes)", "class_method_signature": "ReferenceBeanBuilder.resolveMonitorConfigBeanName(AnnotationAttributes attributes)", "testcase": false, "constructor": false}, {"identifier": "postConfigureBean", "parameters": "(AnnotationAttributes attributes, ReferenceBean bean)", "modifiers": "@Override protected", "return": "void", "signature": "void postConfigureBean(AnnotationAttributes attributes, ReferenceBean bean)", "full_signature": "@Override protected void postConfigureBean(AnnotationAttributes attributes, ReferenceBean bean)", "class_method_signature": "ReferenceBeanBuilder.postConfigureBean(AnnotationAttributes attributes, ReferenceBean bean)", "testcase": false, "constructor": false}, {"identifier": "create", "parameters": "(Reference reference, ClassLoader classLoader,\n                                              ApplicationContext applicationContext)", "modifiers": "@Deprecated public static", "return": "ReferenceBeanBuilder", "signature": "ReferenceBeanBuilder create(Reference reference, ClassLoader classLoader,\n                                              ApplicationContext applicationContext)", "full_signature": "@Deprecated public static ReferenceBeanBuilder create(Reference reference, ClassLoader classLoader,\n                                              ApplicationContext applicationContext)", "class_method_signature": "ReferenceBeanBuilder.create(Reference reference, ClassLoader classLoader,\n                                              ApplicationContext applicationContext)", "testcase": false, "constructor": false}, {"identifier": "create", "parameters": "(AnnotationAttributes attributes, ApplicationContext applicationContext)", "modifiers": "public static", "return": "ReferenceBeanBuilder", "signature": "ReferenceBeanBuilder create(AnnotationAttributes attributes, ApplicationContext applicationContext)", "full_signature": "public static ReferenceBeanBuilder create(AnnotationAttributes attributes, ApplicationContext applicationContext)", "class_method_signature": "ReferenceBeanBuilder.create(AnnotationAttributes attributes, ApplicationContext applicationContext)", "testcase": false, "constructor": false}], "file": "dubbo-config/dubbo-config-spring/src/main/java/org/apache/dubbo/config/spring/beans/factory/annotation/ReferenceBeanBuilder.java"}, "focal_method": {"identifier": "create", "parameters": "(Reference reference, ClassLoader classLoader,\n                                              ApplicationContext applicationContext)", "modifiers": "@Deprecated public static", "return": "ReferenceBeanBuilder", "body": "@Deprecated\n    public static ReferenceBeanBuilder create(Reference reference, ClassLoader classLoader,\n                                              ApplicationContext applicationContext) {\n        return create(fromMap(getAttributes(reference, applicationContext.getEnvironment(), true)), applicationContext);\n    }", "signature": "ReferenceBeanBuilder create(Reference reference, ClassLoader classLoader,\n                                              ApplicationContext applicationContext)", "full_signature": "@Deprecated public static ReferenceBeanBuilder create(Reference reference, ClassLoader classLoader,\n                                              ApplicationContext applicationContext)", "class_method_signature": "ReferenceBeanBuilder.create(Reference reference, ClassLoader classLoader,\n                                              ApplicationContext applicationContext)", "testcase": false, "constructor": false, "invocations": ["create", "fromMap", "getAttributes", "getEnvironment"]}, "repository": {"repo_id": 4710920, "url": "https://github.com/apache/dubbo", "stars": 30960, "created": "6/19/2012 7:56:02 AM +00:00", "updates": "2020-01-27T14:21:03+00:00", "fork": "False", "license": "licensed"}}