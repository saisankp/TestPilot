{"test_class": {"identifier": "HostResourcesServiceTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "@InjectMocks\n    private HostResourcesService hostResourcesService;", "modifier": "@InjectMocks\n    private", "type": "HostResourcesService", "declarator": "hostResourcesService", "var_name": "hostResourcesService"}, {"original_string": "@Mock\n    private ServiceOfferingDao serviceOfferingDao;", "modifier": "@Mock\n    private", "type": "ServiceOfferingDao", "declarator": "serviceOfferingDao", "var_name": "serviceOfferingDao"}, {"original_string": "@Mock\n    private ConfigurationDao configurationDao;", "modifier": "@Mock\n    private", "type": "ConfigurationDao", "declarator": "configurationDao", "var_name": "configurationDao"}, {"original_string": "@Mock\n    private VMInstanceDao vmInstanceDao;", "modifier": "@Mock\n    private", "type": "VMInstanceDao", "declarator": "vmInstanceDao", "var_name": "vmInstanceDao"}, {"original_string": "private Random random = new Random();", "modifier": "private", "type": "Random", "declarator": "random = new Random()", "var_name": "random"}, {"original_string": "private HostResourcesTestUtils hostResourcesUtils = new HostResourcesTestUtils();", "modifier": "private", "type": "HostResourcesTestUtils", "declarator": "hostResourcesUtils = new HostResourcesTestUtils()", "var_name": "hostResourcesUtils"}, {"original_string": "private VMInstanceVO vmInstance;", "modifier": "private", "type": "VMInstanceVO", "declarator": "vmInstance", "var_name": "vmInstance"}], "file": "autonomic-algorithms-commons/src/test/java/br/com/autonomiccs/autonomic/algorithms/commons/services/HostResourcesServiceTest.java"}, "test_case": {"identifier": "calculateHostResourcesAllocatedTest", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void calculateHostResourcesAllocatedTest() {\n        HostResources hostResources = new HostResources();\n        hostResourcesUtils.createHostWithSmallVms(hostResources, 1);\n        hostResourcesService.calculateHostResourcesAllocated(hostResources);\n\n        Assert.assertEquals(512l, hostResources.getUsedMemoryInMegaBytes());\n        Assert.assertEquals(1000l, hostResources.getUsedCpu());\n    }", "signature": "void calculateHostResourcesAllocatedTest()", "full_signature": "@Test public void calculateHostResourcesAllocatedTest()", "class_method_signature": "HostResourcesServiceTest.calculateHostResourcesAllocatedTest()", "testcase": true, "constructor": false, "invocations": ["createHostWithSmallVms", "calculateHostResourcesAllocated", "assertEquals", "getUsedMemoryInMegaBytes", "assertEquals", "getUsedCpu"]}, "focal_class": {"identifier": "HostResourcesService", "superclass": "", "interfaces": "", "fields": [{"original_string": "private final static String CPU_OVERPROVISIONING_CONFIGURARTION_NAME = \"cpu.overprovisioning.factor\";", "modifier": "private final static", "type": "String", "declarator": "CPU_OVERPROVISIONING_CONFIGURARTION_NAME = \"cpu.overprovisioning.factor\"", "var_name": "CPU_OVERPROVISIONING_CONFIGURARTION_NAME"}, {"original_string": "private final static String MEMORY_OVERPROVISIONING_CONFIGURARTION_NAME = \"mem.overprovisioning.factor\";", "modifier": "private final static", "type": "String", "declarator": "MEMORY_OVERPROVISIONING_CONFIGURARTION_NAME = \"mem.overprovisioning.factor\"", "var_name": "MEMORY_OVERPROVISIONING_CONFIGURARTION_NAME"}, {"original_string": "@Inject\n    private ServiceOfferingDao serviceOfferingDao;", "modifier": "@Inject\n    private", "type": "ServiceOfferingDao", "declarator": "serviceOfferingDao", "var_name": "serviceOfferingDao"}, {"original_string": "@Inject\n    private ConfigurationDao configurationDao;", "modifier": "@Inject\n    private", "type": "ConfigurationDao", "declarator": "configurationDao", "var_name": "configurationDao"}, {"original_string": "@Inject\n    private VMInstanceDao vmInstanceDao;", "modifier": "@Inject\n    private", "type": "VMInstanceDao", "declarator": "vmInstanceDao", "var_name": "vmInstanceDao"}], "methods": [{"identifier": "createAndConfigureHostResources", "parameters": "(HostVO hostVo)", "modifiers": "public", "return": "HostResources", "signature": "HostResources createAndConfigureHostResources(HostVO hostVo)", "full_signature": "public HostResources createAndConfigureHostResources(HostVO hostVo)", "class_method_signature": "HostResourcesService.createAndConfigureHostResources(HostVO hostVo)", "testcase": false, "constructor": false}, {"identifier": "createHostResources", "parameters": "(HostVO hostVO)", "modifiers": "public", "return": "HostResources", "signature": "HostResources createHostResources(HostVO hostVO)", "full_signature": "public HostResources createHostResources(HostVO hostVO)", "class_method_signature": "HostResourcesService.createHostResources(HostVO hostVO)", "testcase": false, "constructor": false}, {"identifier": "listVmsFromHost", "parameters": "(HostResources host)", "modifiers": "protected", "return": "List<VmResources>", "signature": "List<VmResources> listVmsFromHost(HostResources host)", "full_signature": "protected List<VmResources> listVmsFromHost(HostResources host)", "class_method_signature": "HostResourcesService.listVmsFromHost(HostResources host)", "testcase": false, "constructor": false}, {"identifier": "isVmCurrentlyUsingHostResource", "parameters": "(VMInstanceVO vmInstance)", "modifiers": "protected", "return": "boolean", "signature": "boolean isVmCurrentlyUsingHostResource(VMInstanceVO vmInstance)", "full_signature": "protected boolean isVmCurrentlyUsingHostResource(VMInstanceVO vmInstance)", "class_method_signature": "HostResourcesService.isVmCurrentlyUsingHostResource(VMInstanceVO vmInstance)", "testcase": false, "constructor": false}, {"identifier": "calculateHostResourcesAllocated", "parameters": "(HostResources host)", "modifiers": "protected", "return": "void", "signature": "void calculateHostResourcesAllocated(HostResources host)", "full_signature": "protected void calculateHostResourcesAllocated(HostResources host)", "class_method_signature": "HostResourcesService.calculateHostResourcesAllocated(HostResources host)", "testcase": false, "constructor": false}, {"identifier": "loadHostOverprovisioningFactors", "parameters": "(HostResources host)", "modifiers": "protected", "return": "void", "signature": "void loadHostOverprovisioningFactors(HostResources host)", "full_signature": "protected void loadHostOverprovisioningFactors(HostResources host)", "class_method_signature": "HostResourcesService.loadHostOverprovisioningFactors(HostResources host)", "testcase": false, "constructor": false}], "file": "autonomic-algorithms-commons/src/main/java/br/com/autonomiccs/autonomic/algorithms/commons/services/HostResourcesService.java"}, "focal_method": {"identifier": "calculateHostResourcesAllocated", "parameters": "(HostResources host)", "modifiers": "protected", "return": "void", "body": "protected void calculateHostResourcesAllocated(HostResources host) {\n        List<VmResources> vmsFromHost = host.getVmsResources();\n        long usedCpu = 0;\n        long usedMemory = 0;\n        for (VmResources vm : vmsFromHost) {\n            usedMemory += vm.getMemoryInMegaBytes();\n            usedCpu += vm.getCpuSpeed() * vm.getNumberOfCpus();\n        }\n        host.setUsedCpu(usedCpu);\n        host.setUsedMemoryInMegaBytes(usedMemory);\n    }", "signature": "void calculateHostResourcesAllocated(HostResources host)", "full_signature": "protected void calculateHostResourcesAllocated(HostResources host)", "class_method_signature": "HostResourcesService.calculateHostResourcesAllocated(HostResources host)", "testcase": false, "constructor": false, "invocations": ["getVmsResources", "getMemoryInMegaBytes", "getCpuSpeed", "getNumberOfCpus", "setUsedCpu", "setUsedMemoryInMegaBytes"]}, "repository": {"repo_id": 56359101, "url": "https://github.com/Autonomiccs/autonomiccs-platform", "language": "Java", "is_fork": false, "fork_count": 7, "stargazer_count": 17, "size": 944, "license": "licensed"}}