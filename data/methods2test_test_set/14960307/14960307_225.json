{"test_class": {"identifier": "BeanUtilTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final Logger logger = LoggerFactory.getLogger(BeanUtilTest.class);", "modifier": "private static final", "type": "Logger", "declarator": "logger = LoggerFactory.getLogger(BeanUtilTest.class)", "var_name": "logger"}], "file": "ch-commons-util/src/test/java/com/cloudhopper/commons/util/BeanUtilTest.java"}, "test_case": {"identifier": "getBeanPropertyOnlyAdder", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void getBeanPropertyOnlyAdder() throws Exception {\n        TestBeanD bean = new TestBeanD();\n\n        // use utility class to get the \"bean\" property\n        BeanProperty property = BeanUtil.findBeanProperty(bean.getClass(), \"host\", true);\n\n        Assert.assertEquals(String.class, property.getType());\n        Assert.assertEquals(\"host\", property.getName());\n        Assert.assertEquals(false, property.canGet());\n        Assert.assertEquals(false, property.canSet());\n        Assert.assertEquals(true, property.canAdd());\n        Assert.assertEquals(null, property.getField());\n        Assert.assertEquals(TestBeanD.class.getDeclaredMethod(\"addHost\", String.class), property.getAddMethod());\n        Assert.assertEquals(null, property.getSetMethod());\n        Assert.assertEquals(null, property.getGetMethod());\n    }", "signature": "void getBeanPropertyOnlyAdder()", "full_signature": "@Test public void getBeanPropertyOnlyAdder()", "class_method_signature": "BeanUtilTest.getBeanPropertyOnlyAdder()", "testcase": true, "constructor": false, "invocations": ["findBeanProperty", "getClass", "assertEquals", "getType", "assertEquals", "getName", "assertEquals", "canGet", "assertEquals", "canSet", "assertEquals", "canAdd", "assertEquals", "getField", "assertEquals", "getDeclaredMethod", "getAddMethod", "assertEquals", "getSetMethod", "assertEquals", "getGetMethod"]}, "focal_class": {"identifier": "BeanUtil", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static Logger logger = LoggerFactory.getLogger(BeanUtil.class);", "modifier": "private static", "type": "Logger", "declarator": "logger = LoggerFactory.getLogger(BeanUtil.class)", "var_name": "logger"}], "methods": [{"identifier": "findBeanProperty", "parameters": "(Class type, String propertyName, boolean caseSensitive)", "modifiers": "public static", "return": "BeanProperty", "signature": "BeanProperty findBeanProperty(Class type, String propertyName, boolean caseSensitive)", "full_signature": "public static BeanProperty findBeanProperty(Class type, String propertyName, boolean caseSensitive)", "class_method_signature": "BeanUtil.findBeanProperty(Class type, String propertyName, boolean caseSensitive)", "testcase": false, "constructor": false}], "file": "ch-commons-util/src/main/java/com/cloudhopper/commons/util/BeanUtil.java"}, "focal_method": {"identifier": "findBeanProperty", "parameters": "(Class type, String propertyName, boolean caseSensitive)", "modifiers": "public static", "return": "BeanProperty", "body": "public static BeanProperty findBeanProperty(Class type, String propertyName, boolean caseSensitive) throws IllegalAccessException {\n        // bean property we'd return if found\n        BeanProperty beanProperty = null;\n\n        // class we'll start our search from\n        Class classType = type;\n\n        //\n        // search for field first - loop thru all classes\n        //\n        while (classType != null && !classType.equals(Object.class)) {\n            // search all declared fields\n            for (Field f : classType.getDeclaredFields()) {\n                // grab this field's name\n                String fieldName = f.getName();\n                // check if its the property we're searching for\n                if ((!caseSensitive && fieldName.equalsIgnoreCase(propertyName)) || (caseSensitive && fieldName.equals(propertyName))) {\n                    // success, we found the method we're looking for\n                    Class fieldType = f.getType();\n                    // make sure its accessible\n                    f.setAccessible(true);\n                    // create the BeanProperty we're going to use\n                    beanProperty = new BeanProperty(propertyName, fieldType, f);\n                    // done with this loop, break out of it\n                    break;\n                }\n            }\n            // move onto the superclass\n            classType = classType.getSuperclass();\n        }\n\n        String capitalizedName = StringUtil.capitalize(propertyName);\n        String getMethodName = \"get\" + capitalizedName;\n        String setMethodName = \"set\" + capitalizedName;\n        String addMethodName = \"add\" + capitalizedName;\n\n        \n        // if we get here and the beanProperty does not exist, then we need\n        // to search thru the hierarchy of classes for a setter or getter\n        // method that matches the name\n        if (beanProperty == null) {\n            // class we'll start our search from\n            classType = type;\n            while (classType != null && !classType.equals(Object.class)) {\n                // search all declared fields\n                for (Method m : classType.getDeclaredMethods()) {\n                    // grab this methods's name\n                    String methodName = m.getName();\n                    // is this a getter we've been looking for?\n                    if ((!caseSensitive && methodName.equalsIgnoreCase(getMethodName)) || (caseSensitive && methodName.equals(getMethodName))) {\n                        // check to make sure this accepts no arguments\n                        if (m.getParameterTypes().length == 0) {\n                            // success, we found the getter method\n                            beanProperty = new BeanProperty(propertyName, m.getReturnType(), null);\n                            m.setAccessible(true);\n                            beanProperty.getMethod = m;\n                            break;\n                        }\n                    // is this a setter we've been looking for?\n                    } else if ((!caseSensitive && methodName.equalsIgnoreCase(setMethodName)) || (caseSensitive && methodName.equals(setMethodName))) {\n                        // check to make sure this accepts 1 argument\n                        if (m.getParameterTypes().length == 1) {\n                            // success, we found the setter method\n                            beanProperty = new BeanProperty(propertyName, m.getParameterTypes()[0], null);\n                            m.setAccessible(true);\n                            beanProperty.setMethod = m;\n                            break;\n                        }\n                    // is this a adder we've been looking for?\n                    } else if ((!caseSensitive && methodName.equalsIgnoreCase(addMethodName)) || (caseSensitive && methodName.equals(addMethodName))) {\n                        // check to make sure this accepts 1 argument\n                        if (m.getParameterTypes().length == 1) {\n                            // success, we found the adder method\n                            beanProperty = new BeanProperty(propertyName, m.getParameterTypes()[0], null);\n                            m.setAccessible(true);\n                            beanProperty.addMethod = m;\n                            break;\n                        }\n                    }\n                }\n                // move onto the superclass\n                classType = classType.getSuperclass();\n            }\n        }\n\n        // if we get here and beanProperty exists, then we need to search for\n        // whether its getter/setter methods also exist\n        if (beanProperty != null) {\n            if (beanProperty.getMethod == null) {\n                try {\n                    // look for a \"getter\" method\n                    Method getMethod = ClassUtil.getMethod(type, getMethodName, beanProperty.getType(), null, caseSensitive);\n                    // set to accessible?\n                    getMethod.setAccessible(true);\n                    beanProperty.getMethod = getMethod;\n                } catch (NoSuchMethodException e) {\n                    // its okay if this happens, ignore\n                }\n            }\n\n            if (beanProperty.setMethod == null) {\n                try {\n                    // look for a \"setter\" method\n                    Method setMethod = ClassUtil.getMethod(type, setMethodName, null, beanProperty.getType(), caseSensitive);\n                    // set to accessible?\n                    setMethod.setAccessible(true);\n                    beanProperty.setMethod = setMethod;\n                } catch (NoSuchMethodException e) {\n                    // its okay if this happens, ignore\n                }\n            }\n\n            if (beanProperty.addMethod == null) {\n                try {\n                    // look for a \"adder\" method\n                    Method addMethod = ClassUtil.getMethod(type, addMethodName, null, beanProperty.getType(), caseSensitive);\n                    // set to accessible?\n                    addMethod.setAccessible(true);\n                    beanProperty.addMethod = addMethod;\n                } catch (NoSuchMethodException e) {\n                    // its okay if this happens, ignore\n                }\n            }\n        }\n\n        return beanProperty;\n    }", "signature": "BeanProperty findBeanProperty(Class type, String propertyName, boolean caseSensitive)", "full_signature": "public static BeanProperty findBeanProperty(Class type, String propertyName, boolean caseSensitive)", "class_method_signature": "BeanUtil.findBeanProperty(Class type, String propertyName, boolean caseSensitive)", "testcase": false, "constructor": false, "invocations": ["equals", "getDeclaredFields", "getName", "equalsIgnoreCase", "equals", "getType", "setAccessible", "getSuperclass", "capitalize", "equals", "getDeclaredMethods", "getName", "equalsIgnoreCase", "equals", "getParameterTypes", "getReturnType", "setAccessible", "equalsIgnoreCase", "equals", "getParameterTypes", "getParameterTypes", "setAccessible", "equalsIgnoreCase", "equals", "getParameterTypes", "getParameterTypes", "setAccessible", "getSuperclass", "getMethod", "getType", "setAccessible", "getMethod", "getType", "setAccessible", "getMethod", "getType", "setAccessible"]}, "repository": {"repo_id": 14960307, "url": "https://github.com/twitter/cloudhopper-commons", "language": "Java", "is_fork": false, "fork_count": 40, "stargazer_count": 36, "size": 6452, "license": "licensed"}}