{"test_class": {"identifier": "TraceCommonServiceTest", "superclass": "", "interfaces": "", "fields": [], "file": "ui/src/test/java/org/glowroot/ui/TraceCommonServiceTest.java"}, "test_case": {"identifier": "test", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void test() throws Exception {\n        // given\n        List<Trace.Entry> entries = Lists.newArrayList();\n        entries.add(Trace.Entry.newBuilder().setDepth(0).build());\n        entries.add(Trace.Entry.newBuilder().setDepth(1).build());\n        // when\n        String json = TraceCommonService.entriesToJson(entries);\n        // then\n        assertThat(json).isEqualTo(\"[{\\\"startOffsetNanos\\\":0,\\\"durationNanos\\\":0,\\\"message\\\":\\\"\\\",\"\n                + \"\\\"childEntries\\\":[{\\\"startOffsetNanos\\\":0,\\\"durationNanos\\\":0,\\\"message\\\":\\\"\\\"}]\"\n                + \"}]\");\n    }", "signature": "void test()", "full_signature": "@Test public void test()", "class_method_signature": "TraceCommonServiceTest.test()", "testcase": true, "constructor": false, "invocations": ["newArrayList", "add", "build", "setDepth", "newBuilder", "add", "build", "setDepth", "newBuilder", "entriesToJson", "isEqualTo", "assertThat"]}, "focal_class": {"identifier": "TraceCommonService", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final JsonFactory jsonFactory = new JsonFactory();", "modifier": "private static final", "type": "JsonFactory", "declarator": "jsonFactory = new JsonFactory()", "var_name": "jsonFactory"}, {"original_string": "private final TraceRepository traceRepository;", "modifier": "private final", "type": "TraceRepository", "declarator": "traceRepository", "var_name": "traceRepository"}, {"original_string": "private final LiveTraceRepository liveTraceRepository;", "modifier": "private final", "type": "LiveTraceRepository", "declarator": "liveTraceRepository", "var_name": "liveTraceRepository"}, {"original_string": "private final AgentDisplayRepository agentDisplayRepository;", "modifier": "private final", "type": "AgentDisplayRepository", "declarator": "agentDisplayRepository", "var_name": "agentDisplayRepository"}], "methods": [{"identifier": "TraceCommonService", "parameters": "(TraceRepository traceRepository, LiveTraceRepository liveTraceRepository,\n            AgentDisplayRepository agentDisplayRepository)", "modifiers": "", "return": "", "signature": " TraceCommonService(TraceRepository traceRepository, LiveTraceRepository liveTraceRepository,\n            AgentDisplayRepository agentDisplayRepository)", "full_signature": "  TraceCommonService(TraceRepository traceRepository, LiveTraceRepository liveTraceRepository,\n            AgentDisplayRepository agentDisplayRepository)", "class_method_signature": "TraceCommonService.TraceCommonService(TraceRepository traceRepository, LiveTraceRepository liveTraceRepository,\n            AgentDisplayRepository agentDisplayRepository)", "testcase": false, "constructor": true}, {"identifier": "getHeaderJson", "parameters": "(String agentId, String traceId, boolean checkLiveTraces)", "modifiers": "@Nullable", "return": "String", "signature": "String getHeaderJson(String agentId, String traceId, boolean checkLiveTraces)", "full_signature": "@Nullable String getHeaderJson(String agentId, String traceId, boolean checkLiveTraces)", "class_method_signature": "TraceCommonService.getHeaderJson(String agentId, String traceId, boolean checkLiveTraces)", "testcase": false, "constructor": false}, {"identifier": "getEntriesJson", "parameters": "(String agentId, String traceId, boolean checkLiveTraces)", "modifiers": "@Nullable", "return": "String", "signature": "String getEntriesJson(String agentId, String traceId, boolean checkLiveTraces)", "full_signature": "@Nullable String getEntriesJson(String agentId, String traceId, boolean checkLiveTraces)", "class_method_signature": "TraceCommonService.getEntriesJson(String agentId, String traceId, boolean checkLiveTraces)", "testcase": false, "constructor": false}, {"identifier": "getQueriesJson", "parameters": "(String agentId, String traceId, boolean checkLiveTraces)", "modifiers": "@Nullable", "return": "String", "signature": "String getQueriesJson(String agentId, String traceId, boolean checkLiveTraces)", "full_signature": "@Nullable String getQueriesJson(String agentId, String traceId, boolean checkLiveTraces)", "class_method_signature": "TraceCommonService.getQueriesJson(String agentId, String traceId, boolean checkLiveTraces)", "testcase": false, "constructor": false}, {"identifier": "getMainThreadProfileJson", "parameters": "(String agentId, String traceId, boolean checkLiveTraces)", "modifiers": "@Nullable", "return": "String", "signature": "String getMainThreadProfileJson(String agentId, String traceId, boolean checkLiveTraces)", "full_signature": "@Nullable String getMainThreadProfileJson(String agentId, String traceId, boolean checkLiveTraces)", "class_method_signature": "TraceCommonService.getMainThreadProfileJson(String agentId, String traceId, boolean checkLiveTraces)", "testcase": false, "constructor": false}, {"identifier": "getAuxThreadProfileJson", "parameters": "(String agentId, String traceId, boolean checkLiveTraces)", "modifiers": "@Nullable", "return": "String", "signature": "String getAuxThreadProfileJson(String agentId, String traceId, boolean checkLiveTraces)", "full_signature": "@Nullable String getAuxThreadProfileJson(String agentId, String traceId, boolean checkLiveTraces)", "class_method_signature": "TraceCommonService.getAuxThreadProfileJson(String agentId, String traceId, boolean checkLiveTraces)", "testcase": false, "constructor": false}, {"identifier": "getMainThreadProfile", "parameters": "(String agentId, String traceId, boolean checkLiveTraces)", "modifiers": "@Nullable", "return": "Profile", "signature": "Profile getMainThreadProfile(String agentId, String traceId, boolean checkLiveTraces)", "full_signature": "@Nullable Profile getMainThreadProfile(String agentId, String traceId, boolean checkLiveTraces)", "class_method_signature": "TraceCommonService.getMainThreadProfile(String agentId, String traceId, boolean checkLiveTraces)", "testcase": false, "constructor": false}, {"identifier": "getAuxThreadProfile", "parameters": "(String agentId, String traceId, boolean checkLiveTraces)", "modifiers": "@Nullable", "return": "Profile", "signature": "Profile getAuxThreadProfile(String agentId, String traceId, boolean checkLiveTraces)", "full_signature": "@Nullable Profile getAuxThreadProfile(String agentId, String traceId, boolean checkLiveTraces)", "class_method_signature": "TraceCommonService.getAuxThreadProfile(String agentId, String traceId, boolean checkLiveTraces)", "testcase": false, "constructor": false}, {"identifier": "getExport", "parameters": "(String agentId, String traceId, boolean checkLiveTraces)", "modifiers": "@Nullable", "return": "TraceExport", "signature": "TraceExport getExport(String agentId, String traceId, boolean checkLiveTraces)", "full_signature": "@Nullable TraceExport getExport(String agentId, String traceId, boolean checkLiveTraces)", "class_method_signature": "TraceCommonService.getExport(String agentId, String traceId, boolean checkLiveTraces)", "testcase": false, "constructor": false}, {"identifier": "getStoredHeader", "parameters": "(String agentId, String traceId,\n            RetryCountdown retryCountdown)", "modifiers": "private @Nullable", "return": "HeaderPlus", "signature": "HeaderPlus getStoredHeader(String agentId, String traceId,\n            RetryCountdown retryCountdown)", "full_signature": "private @Nullable HeaderPlus getStoredHeader(String agentId, String traceId,\n            RetryCountdown retryCountdown)", "class_method_signature": "TraceCommonService.getStoredHeader(String agentId, String traceId,\n            RetryCountdown retryCountdown)", "testcase": false, "constructor": false}, {"identifier": "getStoredEntries", "parameters": "(String agentId, String traceId,\n            RetryCountdown retryCountdown)", "modifiers": "private @Nullable", "return": "Entries", "signature": "Entries getStoredEntries(String agentId, String traceId,\n            RetryCountdown retryCountdown)", "full_signature": "private @Nullable Entries getStoredEntries(String agentId, String traceId,\n            RetryCountdown retryCountdown)", "class_method_signature": "TraceCommonService.getStoredEntries(String agentId, String traceId,\n            RetryCountdown retryCountdown)", "testcase": false, "constructor": false}, {"identifier": "getStoredQueries", "parameters": "(String agentId, String traceId,\n            RetryCountdown retryCountdown)", "modifiers": "private @Nullable", "return": "Queries", "signature": "Queries getStoredQueries(String agentId, String traceId,\n            RetryCountdown retryCountdown)", "full_signature": "private @Nullable Queries getStoredQueries(String agentId, String traceId,\n            RetryCountdown retryCountdown)", "class_method_signature": "TraceCommonService.getStoredQueries(String agentId, String traceId,\n            RetryCountdown retryCountdown)", "testcase": false, "constructor": false}, {"identifier": "getStoredEntriesAndQueriesForExport", "parameters": "(String agentId,\n            String traceId, RetryCountdown retryCountdown)", "modifiers": "private @Nullable", "return": "EntriesAndQueries", "signature": "EntriesAndQueries getStoredEntriesAndQueriesForExport(String agentId,\n            String traceId, RetryCountdown retryCountdown)", "full_signature": "private @Nullable EntriesAndQueries getStoredEntriesAndQueriesForExport(String agentId,\n            String traceId, RetryCountdown retryCountdown)", "class_method_signature": "TraceCommonService.getStoredEntriesAndQueriesForExport(String agentId,\n            String traceId, RetryCountdown retryCountdown)", "testcase": false, "constructor": false}, {"identifier": "getStoredMainThreadProfile", "parameters": "(String agentId, String traceId,\n            RetryCountdown retryCountdown)", "modifiers": "private @Nullable", "return": "Profile", "signature": "Profile getStoredMainThreadProfile(String agentId, String traceId,\n            RetryCountdown retryCountdown)", "full_signature": "private @Nullable Profile getStoredMainThreadProfile(String agentId, String traceId,\n            RetryCountdown retryCountdown)", "class_method_signature": "TraceCommonService.getStoredMainThreadProfile(String agentId, String traceId,\n            RetryCountdown retryCountdown)", "testcase": false, "constructor": false}, {"identifier": "getStoredAuxThreadProfile", "parameters": "(String agentId, String traceId,\n            RetryCountdown retryCountdown)", "modifiers": "private @Nullable", "return": "Profile", "signature": "Profile getStoredAuxThreadProfile(String agentId, String traceId,\n            RetryCountdown retryCountdown)", "full_signature": "private @Nullable Profile getStoredAuxThreadProfile(String agentId, String traceId,\n            RetryCountdown retryCountdown)", "class_method_signature": "TraceCommonService.getStoredAuxThreadProfile(String agentId, String traceId,\n            RetryCountdown retryCountdown)", "testcase": false, "constructor": false}, {"identifier": "toJson", "parameters": "(@Nullable Entries entries)", "modifiers": "private static @Nullable", "return": "String", "signature": "String toJson(@Nullable Entries entries)", "full_signature": "private static @Nullable String toJson(@Nullable Entries entries)", "class_method_signature": "TraceCommonService.toJson(@Nullable Entries entries)", "testcase": false, "constructor": false}, {"identifier": "toJson", "parameters": "(@Nullable Queries queries)", "modifiers": "private static @Nullable", "return": "String", "signature": "String toJson(@Nullable Queries queries)", "full_signature": "private static @Nullable String toJson(@Nullable Queries queries)", "class_method_signature": "TraceCommonService.toJson(@Nullable Queries queries)", "testcase": false, "constructor": false}, {"identifier": "entriesToJson", "parameters": "(List<Trace.Entry> entries)", "modifiers": "@VisibleForTesting static @Nullable", "return": "String", "signature": "String entriesToJson(List<Trace.Entry> entries)", "full_signature": "@VisibleForTesting static @Nullable String entriesToJson(List<Trace.Entry> entries)", "class_method_signature": "TraceCommonService.entriesToJson(List<Trace.Entry> entries)", "testcase": false, "constructor": false}, {"identifier": "queriesToJson", "parameters": "(List<Aggregate.Query> queries)", "modifiers": "@VisibleForTesting static @Nullable", "return": "String", "signature": "String queriesToJson(List<Aggregate.Query> queries)", "full_signature": "@VisibleForTesting static @Nullable String queriesToJson(List<Aggregate.Query> queries)", "class_method_signature": "TraceCommonService.queriesToJson(List<Aggregate.Query> queries)", "testcase": false, "constructor": false}, {"identifier": "sharedQueryTextsToJson", "parameters": "(\n            List<Trace.SharedQueryText> sharedQueryTexts)", "modifiers": "private static @Nullable", "return": "String", "signature": "String sharedQueryTextsToJson(\n            List<Trace.SharedQueryText> sharedQueryTexts)", "full_signature": "private static @Nullable String sharedQueryTextsToJson(\n            List<Trace.SharedQueryText> sharedQueryTexts)", "class_method_signature": "TraceCommonService.sharedQueryTextsToJson(\n            List<Trace.SharedQueryText> sharedQueryTexts)", "testcase": false, "constructor": false}, {"identifier": "writeEntries", "parameters": "(JsonGenerator jg, List<Trace.Entry> entries)", "modifiers": "private static", "return": "void", "signature": "void writeEntries(JsonGenerator jg, List<Trace.Entry> entries)", "full_signature": "private static void writeEntries(JsonGenerator jg, List<Trace.Entry> entries)", "class_method_signature": "TraceCommonService.writeEntries(JsonGenerator jg, List<Trace.Entry> entries)", "testcase": false, "constructor": false}, {"identifier": "writeQueries", "parameters": "(JsonGenerator jg, List<Aggregate.Query> queries)", "modifiers": "private static", "return": "void", "signature": "void writeQueries(JsonGenerator jg, List<Aggregate.Query> queries)", "full_signature": "private static void writeQueries(JsonGenerator jg, List<Aggregate.Query> queries)", "class_method_signature": "TraceCommonService.writeQueries(JsonGenerator jg, List<Aggregate.Query> queries)", "testcase": false, "constructor": false}, {"identifier": "writeSharedQueryTexts", "parameters": "(JsonGenerator jg,\n            List<Trace.SharedQueryText> sharedQueryTexts)", "modifiers": "private static", "return": "void", "signature": "void writeSharedQueryTexts(JsonGenerator jg,\n            List<Trace.SharedQueryText> sharedQueryTexts)", "full_signature": "private static void writeSharedQueryTexts(JsonGenerator jg,\n            List<Trace.SharedQueryText> sharedQueryTexts)", "class_method_signature": "TraceCommonService.writeSharedQueryTexts(JsonGenerator jg,\n            List<Trace.SharedQueryText> sharedQueryTexts)", "testcase": false, "constructor": false}, {"identifier": "toJson", "parameters": "(@Nullable Profile profile)", "modifiers": "private static @Nullable", "return": "String", "signature": "String toJson(@Nullable Profile profile)", "full_signature": "private static @Nullable String toJson(@Nullable Profile profile)", "class_method_signature": "TraceCommonService.toJson(@Nullable Profile profile)", "testcase": false, "constructor": false}, {"identifier": "toJsonLiveHeader", "parameters": "(String agentId, Trace.Header header)", "modifiers": "private", "return": "String", "signature": "String toJsonLiveHeader(String agentId, Trace.Header header)", "full_signature": "private String toJsonLiveHeader(String agentId, Trace.Header header)", "class_method_signature": "TraceCommonService.toJsonLiveHeader(String agentId, Trace.Header header)", "testcase": false, "constructor": false}, {"identifier": "toJsonRepoHeader", "parameters": "(String agentId, HeaderPlus header)", "modifiers": "private", "return": "String", "signature": "String toJsonRepoHeader(String agentId, HeaderPlus header)", "full_signature": "private String toJsonRepoHeader(String agentId, HeaderPlus header)", "class_method_signature": "TraceCommonService.toJsonRepoHeader(String agentId, HeaderPlus header)", "testcase": false, "constructor": false}, {"identifier": "toJson", "parameters": "(String agentId, Trace.Header header, boolean active,\n            Existence entriesExistence, Existence queriesExistence, Existence profileExistence)", "modifiers": "private", "return": "String", "signature": "String toJson(String agentId, Trace.Header header, boolean active,\n            Existence entriesExistence, Existence queriesExistence, Existence profileExistence)", "full_signature": "private String toJson(String agentId, Trace.Header header, boolean active,\n            Existence entriesExistence, Existence queriesExistence, Existence profileExistence)", "class_method_signature": "TraceCommonService.toJson(String agentId, Trace.Header header, boolean active,\n            Existence entriesExistence, Existence queriesExistence, Existence profileExistence)", "testcase": false, "constructor": false}, {"identifier": "writeJson", "parameters": "(Trace.Entry entry, JsonGenerator jg)", "modifiers": "private static", "return": "void", "signature": "void writeJson(Trace.Entry entry, JsonGenerator jg)", "full_signature": "private static void writeJson(Trace.Entry entry, JsonGenerator jg)", "class_method_signature": "TraceCommonService.writeJson(Trace.Entry entry, JsonGenerator jg)", "testcase": false, "constructor": false}, {"identifier": "writeJson", "parameters": "(Aggregate.Query query, JsonGenerator jg)", "modifiers": "private static", "return": "void", "signature": "void writeJson(Aggregate.Query query, JsonGenerator jg)", "full_signature": "private static void writeJson(Aggregate.Query query, JsonGenerator jg)", "class_method_signature": "TraceCommonService.writeJson(Aggregate.Query query, JsonGenerator jg)", "testcase": false, "constructor": false}, {"identifier": "writeDetailEntries", "parameters": "(List<Trace.DetailEntry> detailEntries, JsonGenerator jg)", "modifiers": "private static", "return": "void", "signature": "void writeDetailEntries(List<Trace.DetailEntry> detailEntries, JsonGenerator jg)", "full_signature": "private static void writeDetailEntries(List<Trace.DetailEntry> detailEntries, JsonGenerator jg)", "class_method_signature": "TraceCommonService.writeDetailEntries(List<Trace.DetailEntry> detailEntries, JsonGenerator jg)", "testcase": false, "constructor": false}, {"identifier": "writeValue", "parameters": "(Trace.DetailValue value, JsonGenerator jg)", "modifiers": "private static", "return": "void", "signature": "void writeValue(Trace.DetailValue value, JsonGenerator jg)", "full_signature": "private static void writeValue(Trace.DetailValue value, JsonGenerator jg)", "class_method_signature": "TraceCommonService.writeValue(Trace.DetailValue value, JsonGenerator jg)", "testcase": false, "constructor": false}, {"identifier": "writeError", "parameters": "(Trace.Error error, JsonGenerator jg)", "modifiers": "private static", "return": "void", "signature": "void writeError(Trace.Error error, JsonGenerator jg)", "full_signature": "private static void writeError(Trace.Error error, JsonGenerator jg)", "class_method_signature": "TraceCommonService.writeError(Trace.Error error, JsonGenerator jg)", "testcase": false, "constructor": false}, {"identifier": "writeThrowable", "parameters": "(Proto.Throwable throwable, boolean hasEnclosing,\n            JsonGenerator jg)", "modifiers": "private static", "return": "void", "signature": "void writeThrowable(Proto.Throwable throwable, boolean hasEnclosing,\n            JsonGenerator jg)", "full_signature": "private static void writeThrowable(Proto.Throwable throwable, boolean hasEnclosing,\n            JsonGenerator jg)", "class_method_signature": "TraceCommonService.writeThrowable(Proto.Throwable throwable, boolean hasEnclosing,\n            JsonGenerator jg)", "testcase": false, "constructor": false}, {"identifier": "writeTimer", "parameters": "(Trace.Timer timer, JsonGenerator jg)", "modifiers": "private static", "return": "void", "signature": "void writeTimer(Trace.Timer timer, JsonGenerator jg)", "full_signature": "private static void writeTimer(Trace.Timer timer, JsonGenerator jg)", "class_method_signature": "TraceCommonService.writeTimer(Trace.Timer timer, JsonGenerator jg)", "testcase": false, "constructor": false}, {"identifier": "writeOldThreadStats", "parameters": "(Trace.OldThreadStats threadStats, JsonGenerator jg)", "modifiers": "private static", "return": "void", "signature": "void writeOldThreadStats(Trace.OldThreadStats threadStats, JsonGenerator jg)", "full_signature": "private static void writeOldThreadStats(Trace.OldThreadStats threadStats, JsonGenerator jg)", "class_method_signature": "TraceCommonService.writeOldThreadStats(Trace.OldThreadStats threadStats, JsonGenerator jg)", "testcase": false, "constructor": false}, {"identifier": "writeThreadStats", "parameters": "(Trace.ThreadStats threadStats, JsonGenerator jg)", "modifiers": "private static", "return": "void", "signature": "void writeThreadStats(Trace.ThreadStats threadStats, JsonGenerator jg)", "full_signature": "private static void writeThreadStats(Trace.ThreadStats threadStats, JsonGenerator jg)", "class_method_signature": "TraceCommonService.writeThreadStats(Trace.ThreadStats threadStats, JsonGenerator jg)", "testcase": false, "constructor": false}, {"identifier": "writeStackTraceElement", "parameters": "(Proto.StackTraceElement stackTraceElement,\n            JsonGenerator jg)", "modifiers": "private static", "return": "void", "signature": "void writeStackTraceElement(Proto.StackTraceElement stackTraceElement,\n            JsonGenerator jg)", "full_signature": "private static void writeStackTraceElement(Proto.StackTraceElement stackTraceElement,\n            JsonGenerator jg)", "class_method_signature": "TraceCommonService.writeStackTraceElement(Proto.StackTraceElement stackTraceElement,\n            JsonGenerator jg)", "testcase": false, "constructor": false}, {"identifier": "getFileName", "parameters": "(Trace.Header header)", "modifiers": "private static", "return": "String", "signature": "String getFileName(Trace.Header header)", "full_signature": "private static String getFileName(Trace.Header header)", "class_method_signature": "TraceCommonService.getFileName(Trace.Header header)", "testcase": false, "constructor": false}], "file": "ui/src/main/java/org/glowroot/ui/TraceCommonService.java"}, "focal_method": {"identifier": "entriesToJson", "parameters": "(List<Trace.Entry> entries)", "modifiers": "@VisibleForTesting static @Nullable", "return": "String", "body": "@VisibleForTesting\n    static @Nullable String entriesToJson(List<Trace.Entry> entries) throws IOException {\n        if (entries.isEmpty()) {\n            return null;\n        }\n        StringBuilder sb = new StringBuilder();\n        JsonGenerator jg = jsonFactory.createGenerator(CharStreams.asWriter(sb));\n        try {\n            writeEntries(jg, entries);\n        } finally {\n            jg.close();\n        }\n        return sb.toString();\n    }", "signature": "String entriesToJson(List<Trace.Entry> entries)", "full_signature": "@VisibleForTesting static @Nullable String entriesToJson(List<Trace.Entry> entries)", "class_method_signature": "TraceCommonService.entriesToJson(List<Trace.Entry> entries)", "testcase": false, "constructor": false, "invocations": ["isEmpty", "createGenerator", "asWriter", "writeEntries", "close", "toString"]}, "repository": {"repo_id": 16336212, "url": "https://github.com/glowroot/glowroot", "stars": 736, "created": "1/29/2014 5:25:58 AM +00:00", "updates": "2020-01-24T11:13:42+00:00", "fork": "False", "license": "licensed"}}