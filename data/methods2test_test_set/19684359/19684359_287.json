{"test_class": {"identifier": "GoogleCloudStorageGrpcWriteChannelTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final String BUCKET_NAME = \"bucket-name\";", "modifier": "private static final", "type": "String", "declarator": "BUCKET_NAME = \"bucket-name\"", "var_name": "BUCKET_NAME"}, {"original_string": "private static final String OBJECT_NAME = \"object-name\";", "modifier": "private static final", "type": "String", "declarator": "OBJECT_NAME = \"object-name\"", "var_name": "OBJECT_NAME"}, {"original_string": "private static final String UPLOAD_ID = \"upload-id\";", "modifier": "private static final", "type": "String", "declarator": "UPLOAD_ID = \"upload-id\"", "var_name": "UPLOAD_ID"}, {"original_string": "private static final String CONTENT_TYPE = \"image/jpeg\";", "modifier": "private static final", "type": "String", "declarator": "CONTENT_TYPE = \"image/jpeg\"", "var_name": "CONTENT_TYPE"}, {"original_string": "private static final StartResumableWriteRequest START_REQUEST =\n      StartResumableWriteRequest.newBuilder()\n          .setInsertObjectSpec(\n              InsertObjectSpec.newBuilder()\n                  .setResource(\n                      Object.newBuilder()\n                          .setBucket(BUCKET_NAME)\n                          .setName(OBJECT_NAME)\n                          .setContentType(CONTENT_TYPE)))\n          .build();", "modifier": "private static final", "type": "StartResumableWriteRequest", "declarator": "START_REQUEST =\n      StartResumableWriteRequest.newBuilder()\n          .setInsertObjectSpec(\n              InsertObjectSpec.newBuilder()\n                  .setResource(\n                      Object.newBuilder()\n                          .setBucket(BUCKET_NAME)\n                          .setName(OBJECT_NAME)\n                          .setContentType(CONTENT_TYPE)))\n          .build()", "var_name": "START_REQUEST"}, {"original_string": "private static final QueryWriteStatusRequest WRITE_STATUS_REQUEST =\n      QueryWriteStatusRequest.newBuilder().setUploadId(UPLOAD_ID).build();", "modifier": "private static final", "type": "QueryWriteStatusRequest", "declarator": "WRITE_STATUS_REQUEST =\n      QueryWriteStatusRequest.newBuilder().setUploadId(UPLOAD_ID).build()", "var_name": "WRITE_STATUS_REQUEST"}, {"original_string": "private StorageStub stub;", "modifier": "private", "type": "StorageStub", "declarator": "stub", "var_name": "stub"}, {"original_string": "private FakeService fakeService;", "modifier": "private", "type": "FakeService", "declarator": "fakeService", "var_name": "fakeService"}, {"original_string": "private ExecutorService executor = Executors.newCachedThreadPool();", "modifier": "private", "type": "ExecutorService", "declarator": "executor = Executors.newCachedThreadPool()", "var_name": "executor"}], "file": "gcsio/src/test/java/com/google/cloud/hadoop/gcsio/GoogleCloudStorageGrpcWriteChannelTest.java"}, "test_case": {"identifier": "getItemInfoReturnsNullBeforeClose", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n  public void getItemInfoReturnsNullBeforeClose() throws Exception {\n    GoogleCloudStorageGrpcWriteChannel writeChannel = newWriteChannel();\n\n    ByteString data = ByteString.copyFromUtf8(\"test data\");\n    writeChannel.initialize();\n    writeChannel.write(data.asReadOnlyByteBuffer());\n\n    assertNull(writeChannel.getItemInfo());\n  }", "signature": "void getItemInfoReturnsNullBeforeClose()", "full_signature": "@Test public void getItemInfoReturnsNullBeforeClose()", "class_method_signature": "GoogleCloudStorageGrpcWriteChannelTest.getItemInfoReturnsNullBeforeClose()", "testcase": true, "constructor": false, "invocations": ["newWriteChannel", "copyFromUtf8", "initialize", "write", "asReadOnlyByteBuffer", "assertNull", "getItemInfo"]}, "focal_class": {"identifier": "GoogleCloudStorageGrpcWriteChannel", "superclass": "extends BaseAbstractGoogleAsyncWriteChannel<Object>", "interfaces": "implements GoogleCloudStorageItemInfo.Provider", "fields": [{"original_string": "static final int GCS_MINIMUM_CHUNK_SIZE = 256 * 1024;", "modifier": "static final", "type": "int", "declarator": "GCS_MINIMUM_CHUNK_SIZE = 256 * 1024", "var_name": "GCS_MINIMUM_CHUNK_SIZE"}, {"original_string": "private static final Duration START_RESUMABLE_WRITE_TIMEOUT = Duration.ofMinutes(1);", "modifier": "private static final", "type": "Duration", "declarator": "START_RESUMABLE_WRITE_TIMEOUT = Duration.ofMinutes(1)", "var_name": "START_RESUMABLE_WRITE_TIMEOUT"}, {"original_string": "private static final Duration QUERY_WRITE_STATUS_TIMEOUT = Duration.ofMinutes(1);", "modifier": "private static final", "type": "Duration", "declarator": "QUERY_WRITE_STATUS_TIMEOUT = Duration.ofMinutes(1)", "var_name": "QUERY_WRITE_STATUS_TIMEOUT"}, {"original_string": "private static final Duration WRITE_STREAM_TIMEOUT = Duration.ofMinutes(10);", "modifier": "private static final", "type": "Duration", "declarator": "WRITE_STREAM_TIMEOUT = Duration.ofMinutes(10)", "var_name": "WRITE_STREAM_TIMEOUT"}, {"original_string": "private static final int UPLOAD_RETRIES = 5;", "modifier": "private static final", "type": "int", "declarator": "UPLOAD_RETRIES = 5", "var_name": "UPLOAD_RETRIES"}, {"original_string": "private static final int NUMBER_OF_REQUESTS_TO_RETAIN = 5;", "modifier": "private static final", "type": "int", "declarator": "NUMBER_OF_REQUESTS_TO_RETAIN = 5", "var_name": "NUMBER_OF_REQUESTS_TO_RETAIN"}, {"original_string": "private static final ImmutableSet<Code> TRANSIENT_ERRORS =\n      ImmutableSet.of(\n          Code.DEADLINE_EXCEEDED, Code.RESOURCE_EXHAUSTED, Code.INTERNAL, Code.UNAVAILABLE);", "modifier": "private static final", "type": "ImmutableSet<Code>", "declarator": "TRANSIENT_ERRORS =\n      ImmutableSet.of(\n          Code.DEADLINE_EXCEEDED, Code.RESOURCE_EXHAUSTED, Code.INTERNAL, Code.UNAVAILABLE)", "var_name": "TRANSIENT_ERRORS"}, {"original_string": "private final StorageStub stub;", "modifier": "private final", "type": "StorageStub", "declarator": "stub", "var_name": "stub"}, {"original_string": "private final StorageResourceId resourceId;", "modifier": "private final", "type": "StorageResourceId", "declarator": "resourceId", "var_name": "resourceId"}, {"original_string": "private final CreateObjectOptions createOptions;", "modifier": "private final", "type": "CreateObjectOptions", "declarator": "createOptions", "var_name": "createOptions"}, {"original_string": "private final ObjectWriteConditions writeConditions;", "modifier": "private final", "type": "ObjectWriteConditions", "declarator": "writeConditions", "var_name": "writeConditions"}, {"original_string": "private final String requesterPaysProject;", "modifier": "private final", "type": "String", "declarator": "requesterPaysProject", "var_name": "requesterPaysProject"}, {"original_string": "private GoogleCloudStorageItemInfo completedItemInfo = null;", "modifier": "private", "type": "GoogleCloudStorageItemInfo", "declarator": "completedItemInfo = null", "var_name": "completedItemInfo"}], "methods": [{"identifier": "GoogleCloudStorageGrpcWriteChannel", "parameters": "(\n      StorageStub stub,\n      ExecutorService threadPool,\n      AsyncWriteChannelOptions channelOptions,\n      StorageResourceId resourceId,\n      CreateObjectOptions createOptions,\n      ObjectWriteConditions writeConditions,\n      String requesterPaysProject)", "modifiers": "", "return": "", "signature": " GoogleCloudStorageGrpcWriteChannel(\n      StorageStub stub,\n      ExecutorService threadPool,\n      AsyncWriteChannelOptions channelOptions,\n      StorageResourceId resourceId,\n      CreateObjectOptions createOptions,\n      ObjectWriteConditions writeConditions,\n      String requesterPaysProject)", "full_signature": "  GoogleCloudStorageGrpcWriteChannel(\n      StorageStub stub,\n      ExecutorService threadPool,\n      AsyncWriteChannelOptions channelOptions,\n      StorageResourceId resourceId,\n      CreateObjectOptions createOptions,\n      ObjectWriteConditions writeConditions,\n      String requesterPaysProject)", "class_method_signature": "GoogleCloudStorageGrpcWriteChannel.GoogleCloudStorageGrpcWriteChannel(\n      StorageStub stub,\n      ExecutorService threadPool,\n      AsyncWriteChannelOptions channelOptions,\n      StorageResourceId resourceId,\n      CreateObjectOptions createOptions,\n      ObjectWriteConditions writeConditions,\n      String requesterPaysProject)", "testcase": false, "constructor": true}, {"identifier": "getResourceString", "parameters": "()", "modifiers": "@Override protected", "return": "String", "signature": "String getResourceString()", "full_signature": "@Override protected String getResourceString()", "class_method_signature": "GoogleCloudStorageGrpcWriteChannel.getResourceString()", "testcase": false, "constructor": false}, {"identifier": "handleResponse", "parameters": "(Object response)", "modifiers": "@Override public", "return": "void", "signature": "void handleResponse(Object response)", "full_signature": "@Override public void handleResponse(Object response)", "class_method_signature": "GoogleCloudStorageGrpcWriteChannel.handleResponse(Object response)", "testcase": false, "constructor": false}, {"identifier": "startUpload", "parameters": "(InputStream pipeSource)", "modifiers": "@Override public", "return": "void", "signature": "void startUpload(InputStream pipeSource)", "full_signature": "@Override public void startUpload(InputStream pipeSource)", "class_method_signature": "GoogleCloudStorageGrpcWriteChannel.startUpload(InputStream pipeSource)", "testcase": false, "constructor": false}, {"identifier": "getItemInfo", "parameters": "()", "modifiers": "@Override public", "return": "GoogleCloudStorageItemInfo", "signature": "GoogleCloudStorageItemInfo getItemInfo()", "full_signature": "@Override public GoogleCloudStorageItemInfo getItemInfo()", "class_method_signature": "GoogleCloudStorageGrpcWriteChannel.getItemInfo()", "testcase": false, "constructor": false}], "file": "gcsio/src/main/java/com/google/cloud/hadoop/gcsio/GoogleCloudStorageGrpcWriteChannel.java"}, "focal_method": {"identifier": "getItemInfo", "parameters": "()", "modifiers": "@Override public", "return": "GoogleCloudStorageItemInfo", "body": "@Override\n  public GoogleCloudStorageItemInfo getItemInfo() {\n    return this.completedItemInfo;\n  }", "signature": "GoogleCloudStorageItemInfo getItemInfo()", "full_signature": "@Override public GoogleCloudStorageItemInfo getItemInfo()", "class_method_signature": "GoogleCloudStorageGrpcWriteChannel.getItemInfo()", "testcase": false, "constructor": false, "invocations": []}, "repository": {"repo_id": 19684359, "url": "https://github.com/GoogleCloudDataproc/bigdata-interop", "stars": 178, "created": "5/12/2014 3:11:55 AM +00:00", "updates": "2020-01-23T23:10:40+00:00", "fork": "False", "license": "licensed"}}