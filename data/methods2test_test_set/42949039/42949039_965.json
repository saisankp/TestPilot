{"test_class": {"identifier": "RetentionExpirationDestroyerControllerTest", "superclass": "extends AbstractRetentionExpirationDestroyerTest", "interfaces": "", "fields": [], "file": "herd-code/herd-tools/herd-retention-expiration-destroyer/src/test/java/org/finra/herd/tools/retention/destroyer/RetentionExpirationDestroyerControllerTest.java"}, "test_case": {"identifier": "testGetBusinessObjectDataKeysMissingCsvHeader", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testGetBusinessObjectDataKeysMissingCsvHeader() throws IOException\n    {\n        // Create an input CSV file without a header.\n        File inputCsvFile = new File(LOCAL_INPUT_FILE);\n        FileUtils.writeStringToFile(inputCsvFile, STRING_VALUE, StandardCharsets.UTF_8);\n\n        // Try to get business object data keys when CSV file does not have an expected header.\n        try\n        {\n            retentionExpirationDestroyerController.getBusinessObjectDataKeys(inputCsvFile);\n            fail();\n        }\n        catch (IllegalArgumentException e)\n        {\n            assertEquals(String.format(\"Input file \\\"%s\\\" does not contain the expected CSV file header.\", inputCsvFile.toString()), e.getMessage());\n        }\n    }", "signature": "void testGetBusinessObjectDataKeysMissingCsvHeader()", "full_signature": "@Test public void testGetBusinessObjectDataKeysMissingCsvHeader()", "class_method_signature": "RetentionExpirationDestroyerControllerTest.testGetBusinessObjectDataKeysMissingCsvHeader()", "testcase": true, "constructor": false, "invocations": ["writeStringToFile", "getBusinessObjectDataKeys", "fail", "assertEquals", "format", "toString", "getMessage"]}, "focal_class": {"identifier": "RetentionExpirationDestroyerController", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final String[] CSV_FILE_HEADER_COLUMNS =\n        {\"Namespace\", \"Business Object Definition Name\", \"Business Object Format Usage\", \"Business Object Format File Type\", \"Business Object Format Version\",\n            \"Primary Partition Value\", \"Sub-Partition Value 1\", \"Sub-Partition Value 2\", \"Sub-Partition Value 3\", \"Sub-Partition Value 4\",\n            \"Business Object Data Version\", \"Business Object Definition Display Name\", \"Business Object Definition URI\"};", "modifier": "private static final", "type": "String[]", "declarator": "CSV_FILE_HEADER_COLUMNS =\n        {\"Namespace\", \"Business Object Definition Name\", \"Business Object Format Usage\", \"Business Object Format File Type\", \"Business Object Format Version\",\n            \"Primary Partition Value\", \"Sub-Partition Value 1\", \"Sub-Partition Value 2\", \"Sub-Partition Value 3\", \"Sub-Partition Value 4\",\n            \"Business Object Data Version\", \"Business Object Definition Display Name\", \"Business Object Definition URI\"}", "var_name": "CSV_FILE_HEADER_COLUMNS"}, {"original_string": "private static final Logger LOGGER = LoggerFactory.getLogger(RetentionExpirationDestroyerController.class);", "modifier": "private static final", "type": "Logger", "declarator": "LOGGER = LoggerFactory.getLogger(RetentionExpirationDestroyerController.class)", "var_name": "LOGGER"}, {"original_string": "@Autowired\n    private JsonHelper jsonHelper;", "modifier": "@Autowired\n    private", "type": "JsonHelper", "declarator": "jsonHelper", "var_name": "jsonHelper"}, {"original_string": "@Autowired\n    private RetentionExpirationDestroyerWebClient retentionExpirationDestroyerWebClient;", "modifier": "@Autowired\n    private", "type": "RetentionExpirationDestroyerWebClient", "declarator": "retentionExpirationDestroyerWebClient", "var_name": "retentionExpirationDestroyerWebClient"}], "methods": [{"identifier": "performRetentionExpirationDestruction", "parameters": "(File localInputFile, RegServerAccessParamsDto regServerAccessParamsDto)", "modifiers": "public", "return": "void", "signature": "void performRetentionExpirationDestruction(File localInputFile, RegServerAccessParamsDto regServerAccessParamsDto)", "full_signature": "public void performRetentionExpirationDestruction(File localInputFile, RegServerAccessParamsDto regServerAccessParamsDto)", "class_method_signature": "RetentionExpirationDestroyerController.performRetentionExpirationDestruction(File localInputFile, RegServerAccessParamsDto regServerAccessParamsDto)", "testcase": false, "constructor": false}, {"identifier": "getBusinessObjectDataKey", "parameters": "(String[] line, int lineNumber, File inputCsvFile)", "modifiers": "protected", "return": "BusinessObjectDataKey", "signature": "BusinessObjectDataKey getBusinessObjectDataKey(String[] line, int lineNumber, File inputCsvFile)", "full_signature": "protected BusinessObjectDataKey getBusinessObjectDataKey(String[] line, int lineNumber, File inputCsvFile)", "class_method_signature": "RetentionExpirationDestroyerController.getBusinessObjectDataKey(String[] line, int lineNumber, File inputCsvFile)", "testcase": false, "constructor": false}, {"identifier": "getBusinessObjectDataKeys", "parameters": "(File inputCsvFile)", "modifiers": "protected", "return": "List<BusinessObjectDataKey>", "signature": "List<BusinessObjectDataKey> getBusinessObjectDataKeys(File inputCsvFile)", "full_signature": "protected List<BusinessObjectDataKey> getBusinessObjectDataKeys(File inputCsvFile)", "class_method_signature": "RetentionExpirationDestroyerController.getBusinessObjectDataKeys(File inputCsvFile)", "testcase": false, "constructor": false}], "file": "herd-code/herd-tools/herd-retention-expiration-destroyer/src/main/java/org/finra/herd/tools/retention/destroyer/RetentionExpirationDestroyerController.java"}, "focal_method": {"identifier": "getBusinessObjectDataKeys", "parameters": "(File inputCsvFile)", "modifiers": "protected", "return": "List<BusinessObjectDataKey>", "body": "protected List<BusinessObjectDataKey> getBusinessObjectDataKeys(File inputCsvFile) throws IOException\n    {\n        List<BusinessObjectDataKey> businessObjectDataKeyList = new ArrayList<>();\n\n        // Read the input CSV file and populate business object data key list.\n        try (CSVReader csvReader = new CSVReader(new InputStreamReader(new FileInputStream(inputCsvFile), StandardCharsets.UTF_8)))\n        {\n            String[] line;\n\n            // Validate required header of the CSV input file.\n            if ((line = csvReader.readNext()) == null || !Arrays.equals(line, CSV_FILE_HEADER_COLUMNS))\n            {\n                throw new IllegalArgumentException(String.format(\"Input file \\\"%s\\\" does not contain the expected CSV file header.\", inputCsvFile.toString()));\n            }\n\n            // Process the input CSV file line by line.\n            int lineCount = 2;\n            while ((line = csvReader.readNext()) != null)\n            {\n                businessObjectDataKeyList.add(getBusinessObjectDataKey(line, lineCount++, inputCsvFile));\n            }\n        }\n\n        return businessObjectDataKeyList;\n    }", "signature": "List<BusinessObjectDataKey> getBusinessObjectDataKeys(File inputCsvFile)", "full_signature": "protected List<BusinessObjectDataKey> getBusinessObjectDataKeys(File inputCsvFile)", "class_method_signature": "RetentionExpirationDestroyerController.getBusinessObjectDataKeys(File inputCsvFile)", "testcase": false, "constructor": false, "invocations": ["readNext", "equals", "format", "toString", "readNext", "add", "getBusinessObjectDataKey"]}, "repository": {"repo_id": 42949039, "url": "https://github.com/FINRAOS/herd", "language": "Java", "is_fork": false, "fork_count": 36, "stargazer_count": 120, "size": 205797, "license": "licensed"}}