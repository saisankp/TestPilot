{"test_class": {"identifier": "TransformationEngineTest", "superclass": "extends TestHelper", "interfaces": "", "fields": [{"original_string": "@Mock\n    private ApplicationContext applicationContext;", "modifier": "@Mock\n    private", "type": "ApplicationContext", "declarator": "applicationContext", "var_name": "applicationContext"}, {"original_string": "@InjectMocks\n    private TransformationEngine transformationEngine;", "modifier": "@InjectMocks\n    private", "type": "TransformationEngine", "declarator": "transformationEngine", "var_name": "transformationEngine"}], "file": "butterfly-core/src/test/java/com/paypal/butterfly/core/TransformationEngineTest.java"}, "test_case": {"identifier": "abortTest", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void abortTest() throws IOException, URISyntaxException, ExecutionException, InterruptedException {\n        File appFolder = new File(getClass().getResource(\"/test-app-2\").toURI());\n\n        File transformedAppFolder = Files.createTempDir();\n        FileUtils.copyDirectory(appFolder, transformedAppFolder);\n        System.out.printf(\"Transformed sample app folder: %s\\n\", transformedAppFolder.getAbsolutePath());\n\n        Application application = new ApplicationImpl(transformedAppFolder);\n        Configuration configuration = new ConfigurationImpl(null);\n\n        TransformationTemplate transformationTemplate = new JavaEEToSpringBoot();\n        AbstractTransformationRequest transformation = new TemplateTransformationRequest(application, transformationTemplate, configuration);\n\n        TransformationResult transformationResult = transformationEngine.perform(transformation).get();\n\n        assertNotNull(transformationResult);\n        assertFalse(transformationResult.isSuccessful());\n        assertEquals(transformationResult.getTransformationRequest().getConfiguration(), configuration);\n        assertFalse(transformationResult.hasManualInstructions());\n        assertNull(transformationResult.getManualInstructionsFile());\n        assertEquals(transformationResult.getTransformedApplicationDir(), transformedAppFolder);\n        assertNotNull(transformationResult.getAbortDetails());\n\n        List<TransformationMetrics> metricsList = transformationResult.getMetrics();\n        assertNotNull(metricsList);\n        assertEquals(metricsList.size(), 1);\n\n        TransformationMetrics metrics = metricsList.get(0);\n        assertNull(metrics.getFromVersion());\n        assertNull(metrics.getToVersion());\n\n        TransformationStatistics statistics = metrics.getStatistics();\n        assertEquals(statistics.getTUExecutionResultValueCount(), 1);\n        assertEquals(statistics.getManualInstructionsCount(), 0);\n        assertEquals(statistics.getPerformResultErrorCount(), 0);\n        assertEquals(statistics.getPerformResultSkippedConditionCount(), 0);\n        assertEquals(statistics.getPerformResultSkippedDependencyCount(), 0);\n        assertEquals(statistics.getTOExecutionResultErrorCount(), 0);\n        assertEquals(statistics.getTOExecutionResultWarningCount(), 0);\n        assertEquals(statistics.getTUExecutionResultErrorCount(), 1);\n        assertEquals(statistics.getTUExecutionResultWarningCount(), 0);\n\n        AbortDetails abortDetails = transformationResult.getAbortDetails();\n\n        assertTrue(abortDetails.toString().startsWith(\"{\\n\" +\n                \"  \\\"templateName\\\": \\\"ButterflySpringBootExtension:JavaEEToSpringBoot\\\",\\n\" +\n                \"  \\\"templateClassName\\\": \\\"com.paypal.butterfly.extensions.springboot.JavaEEToSpringBoot\\\",\\n\" +\n                \"  \\\"utilityName\\\": \\\"ButterflySpringBootExtension:JavaEEToSpringBoot-2-Abort\\\",\\n\" +\n                \"  \\\"utilityClassName\\\": \\\"com.paypal.butterfly.extensions.api.utilities.Abort\\\",\\n\" +\n                \"  \\\"abortMessage\\\": \\\"This application does not have a root pom.xml file\\\",\\n\" +\n                \"  \\\"exceptionClassName\\\": \\\"com.paypal.butterfly.extensions.api.exception.TransformationUtilityException\\\",\\n\" +\n                \"  \\\"exceptionMessage\\\": \\\"Abort transformation utility has been executed\\\",\\n\" +\n                \"  \\\"exceptionStackTrace\\\": \\\"com.paypal.butterfly.extensions.api.exception.TransformationUtilityException: Abort transformation utility has been executed\"));\n\n        assertEquals(abortDetails.getTemplateName(), ButterflySpringBootExtension.class.getSimpleName() + \":\" + JavaEEToSpringBoot.class.getSimpleName());\n        assertEquals(abortDetails.getTemplateClassName(), JavaEEToSpringBoot.class.getName());\n        assertEquals(abortDetails.getUtilityName(), \"ButterflySpringBootExtension:JavaEEToSpringBoot-2-Abort\");\n        assertEquals(abortDetails.getUtilityClassName(), Abort.class.getName());\n        assertEquals(abortDetails.getAbortMessage(), \"This application does not have a root pom.xml file\");\n        assertEquals(abortDetails.getExceptionClassName(), TransformationUtilityException.class.getName());\n        assertEquals(abortDetails.getExceptionMessage(), \"Abort transformation utility has been executed\");\n        assertNotNull(abortDetails.getExceptionStackTrace());\n        assertTrue(abortDetails.getExceptionStackTrace().startsWith(TransformationUtilityException.class.getName() + \": Abort transformation utility has been executed\\n\\tat \" + Abort.class.getName() + \".execution(\"));\n    }", "signature": "void abortTest()", "full_signature": "@Test public void abortTest()", "class_method_signature": "TransformationEngineTest.abortTest()", "testcase": true, "constructor": false, "invocations": ["toURI", "getResource", "getClass", "createTempDir", "copyDirectory", "printf", "getAbsolutePath", "get", "perform", "assertNotNull", "assertFalse", "isSuccessful", "assertEquals", "getConfiguration", "getTransformationRequest", "assertFalse", "hasManualInstructions", "assertNull", "getManualInstructionsFile", "assertEquals", "getTransformedApplicationDir", "assertNotNull", "getAbortDetails", "getMetrics", "assertNotNull", "assertEquals", "size", "get", "assertNull", "getFromVersion", "assertNull", "getToVersion", "getStatistics", "assertEquals", "getTUExecutionResultValueCount", "assertEquals", "getManualInstructionsCount", "assertEquals", "getPerformResultErrorCount", "assertEquals", "getPerformResultSkippedConditionCount", "assertEquals", "getPerformResultSkippedDependencyCount", "assertEquals", "getTOExecutionResultErrorCount", "assertEquals", "getTOExecutionResultWarningCount", "assertEquals", "getTUExecutionResultErrorCount", "assertEquals", "getTUExecutionResultWarningCount", "getAbortDetails", "assertTrue", "startsWith", "toString", "assertEquals", "getTemplateName", "getSimpleName", "getSimpleName", "assertEquals", "getTemplateClassName", "getName", "assertEquals", "getUtilityName", "assertEquals", "getUtilityClassName", "getName", "assertEquals", "getAbortMessage", "assertEquals", "getExceptionClassName", "getName", "assertEquals", "getExceptionMessage", "assertNotNull", "getExceptionStackTrace", "assertTrue", "startsWith", "getExceptionStackTrace", "getName", "getName"]}, "focal_class": {"identifier": "TransformationEngine", "superclass": "", "interfaces": "", "fields": [{"original_string": "private Collection<TransformationListener> transformationListeners;", "modifier": "private", "type": "Collection<TransformationListener>", "declarator": "transformationListeners", "var_name": "transformationListeners"}, {"original_string": "@Autowired\n    private ApplicationContext applicationContext;", "modifier": "@Autowired\n    private", "type": "ApplicationContext", "declarator": "applicationContext", "var_name": "applicationContext"}, {"original_string": "private ManualInstructionsHandler manualInstructionsHandler;", "modifier": "private", "type": "ManualInstructionsHandler", "declarator": "manualInstructionsHandler", "var_name": "manualInstructionsHandler"}, {"original_string": "private TransformationValidator validator;", "modifier": "private", "type": "TransformationValidator", "declarator": "validator", "var_name": "validator"}, {"original_string": "private static final int MIN_THREAD_POOL_SIZE = Runtime.getRuntime().availableProcessors();", "modifier": "private static final", "type": "int", "declarator": "MIN_THREAD_POOL_SIZE = Runtime.getRuntime().availableProcessors()", "var_name": "MIN_THREAD_POOL_SIZE"}, {"original_string": "private static final int MAX_THREAD_POOL_SIZE = MIN_THREAD_POOL_SIZE * 2;", "modifier": "private static final", "type": "int", "declarator": "MAX_THREAD_POOL_SIZE = MIN_THREAD_POOL_SIZE * 2", "var_name": "MAX_THREAD_POOL_SIZE"}, {"original_string": "private ExecutorService executor = new ThreadPoolExecutor(MIN_THREAD_POOL_SIZE, MAX_THREAD_POOL_SIZE, 5, TimeUnit.MINUTES, new LinkedBlockingQueue<>());", "modifier": "private", "type": "ExecutorService", "declarator": "executor = new ThreadPoolExecutor(MIN_THREAD_POOL_SIZE, MAX_THREAD_POOL_SIZE, 5, TimeUnit.MINUTES, new LinkedBlockingQueue<>())", "var_name": "executor"}], "methods": [{"identifier": "setupListeners", "parameters": "()", "modifiers": "@PostConstruct", "return": "void", "signature": "void setupListeners()", "full_signature": "@PostConstruct void setupListeners()", "class_method_signature": "TransformationEngine.setupListeners()", "testcase": false, "constructor": false}, {"identifier": "perform", "parameters": "(TransformationRequest transformationRequest)", "modifiers": "", "return": "CompletableFuture<TransformationResult>", "signature": "CompletableFuture<TransformationResult> perform(TransformationRequest transformationRequest)", "full_signature": " CompletableFuture<TransformationResult> perform(TransformationRequest transformationRequest)", "class_method_signature": "TransformationEngine.perform(TransformationRequest transformationRequest)", "testcase": false, "constructor": false}, {"identifier": "shutdownExecutor", "parameters": "()", "modifiers": "@PreDestroy", "return": "void", "signature": "void shutdownExecutor()", "full_signature": "@PreDestroy void shutdownExecutor()", "class_method_signature": "TransformationEngine.shutdownExecutor()", "testcase": false, "constructor": false}], "file": "butterfly-core/src/main/java/com/paypal/butterfly/core/TransformationEngine.java"}, "focal_method": {"identifier": "perform", "parameters": "(TransformationRequest transformationRequest)", "modifiers": "", "return": "CompletableFuture<TransformationResult>", "body": "CompletableFuture<TransformationResult> perform(TransformationRequest transformationRequest) {\n        return CompletableFuture.supplyAsync(\n                Transformer.createTransformer(transformationRequest, transformationListeners, manualInstructionsHandler, validator),\n                executor\n        );\n    }", "signature": "CompletableFuture<TransformationResult> perform(TransformationRequest transformationRequest)", "full_signature": " CompletableFuture<TransformationResult> perform(TransformationRequest transformationRequest)", "class_method_signature": "TransformationEngine.perform(TransformationRequest transformationRequest)", "testcase": false, "constructor": false, "invocations": ["supplyAsync", "createTransformer"]}, "repository": {"repo_id": 104398040, "url": "https://github.com/paypal/butterfly", "language": "Java", "is_fork": false, "fork_count": 42, "stargazer_count": 26, "size": 6906, "license": "licensed"}}