{"test_class": {"identifier": "MessageDispatcherTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final Instant NOW = Instant.now();", "modifier": "private static final", "type": "Instant", "declarator": "NOW = Instant.now()", "var_name": "NOW"}, {"original_string": "@Mock\n    private SQSProxy sqsProxy;", "modifier": "@Mock\n    private", "type": "SQSProxy", "declarator": "sqsProxy", "var_name": "sqsProxy"}, {"original_string": "@Mock\n    private MessageProcessorProxy messageProcessorProxy;", "modifier": "@Mock\n    private", "type": "MessageProcessorProxy", "declarator": "messageProcessorProxy", "var_name": "messageProcessorProxy"}, {"original_string": "private MessageDispatcher dispatcher;", "modifier": "private", "type": "MessageDispatcher", "declarator": "dispatcher", "var_name": "dispatcher"}], "file": "aws-serverless-sqs-event-source-app/src/test/java/com/amazonaws/serverless/sqseventsource/MessageDispatcherTest.java"}, "test_case": {"identifier": "getEstimatedCapacity_noMessagesProcessed", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void getEstimatedCapacity_noMessagesProcessed() throws Exception {\n        assertThat(dispatcher.getEstimatedCapacity(NOW), is(Integer.MAX_VALUE));\n    }", "signature": "void getEstimatedCapacity_noMessagesProcessed()", "full_signature": "@Test public void getEstimatedCapacity_noMessagesProcessed()", "class_method_signature": "MessageDispatcherTest.getEstimatedCapacity_noMessagesProcessed()", "testcase": true, "constructor": false, "invocations": ["assertThat", "getEstimatedCapacity", "is"]}, "focal_class": {"identifier": "MessageDispatcher", "superclass": "", "interfaces": "", "fields": [{"original_string": "static final int DEFAULT_RETRY_DELAY_IN_SECONDS = 10;", "modifier": "static final", "type": "int", "declarator": "DEFAULT_RETRY_DELAY_IN_SECONDS = 10", "var_name": "DEFAULT_RETRY_DELAY_IN_SECONDS"}, {"original_string": "@NonNull\n    private final SQSProxy sqsProxy;", "modifier": "@NonNull\n    private final", "type": "SQSProxy", "declarator": "sqsProxy", "var_name": "sqsProxy"}, {"original_string": "@NonNull\n    private final MessageProcessorProxy messageProcessorProxy;", "modifier": "@NonNull\n    private final", "type": "MessageProcessorProxy", "declarator": "messageProcessorProxy", "var_name": "messageProcessorProxy"}, {"original_string": "@NonNull\n    private final Clock clock;", "modifier": "@NonNull\n    private final", "type": "Clock", "declarator": "clock", "var_name": "clock"}, {"original_string": "private MessageProcessingStats stats = new MessageProcessingStats();", "modifier": "private", "type": "MessageProcessingStats", "declarator": "stats = new MessageProcessingStats()", "var_name": "stats"}], "methods": [{"identifier": "MessageDispatcher", "parameters": "(final SQSProxy sqsProxy, final MessageProcessorProxy messageProcessorProxy)", "modifiers": "public", "return": "", "signature": " MessageDispatcher(final SQSProxy sqsProxy, final MessageProcessorProxy messageProcessorProxy)", "full_signature": "public  MessageDispatcher(final SQSProxy sqsProxy, final MessageProcessorProxy messageProcessorProxy)", "class_method_signature": "MessageDispatcher.MessageDispatcher(final SQSProxy sqsProxy, final MessageProcessorProxy messageProcessorProxy)", "testcase": false, "constructor": true}, {"identifier": "dispatch", "parameters": "(final List<Message> messages)", "modifiers": "public", "return": "void", "signature": "void dispatch(final List<Message> messages)", "full_signature": "public void dispatch(final List<Message> messages)", "class_method_signature": "MessageDispatcher.dispatch(final List<Message> messages)", "testcase": false, "constructor": false}, {"identifier": "logFailedMessageResults", "parameters": "(List<SQSMessageResult> results)", "modifiers": "private", "return": "void", "signature": "void logFailedMessageResults(List<SQSMessageResult> results)", "full_signature": "private void logFailedMessageResults(List<SQSMessageResult> results)", "class_method_signature": "MessageDispatcher.logFailedMessageResults(List<SQSMessageResult> results)", "testcase": false, "constructor": false}, {"identifier": "deleteMessages", "parameters": "(final List<Message> messages, final List<SQSMessageResult> results)", "modifiers": "private", "return": "void", "signature": "void deleteMessages(final List<Message> messages, final List<SQSMessageResult> results)", "full_signature": "private void deleteMessages(final List<Message> messages, final List<SQSMessageResult> results)", "class_method_signature": "MessageDispatcher.deleteMessages(final List<Message> messages, final List<SQSMessageResult> results)", "testcase": false, "constructor": false}, {"identifier": "retryMessages", "parameters": "(final List<Message> messages, final List<SQSMessageResult> results)", "modifiers": "private", "return": "void", "signature": "void retryMessages(final List<Message> messages, final List<SQSMessageResult> results)", "full_signature": "private void retryMessages(final List<Message> messages, final List<SQSMessageResult> results)", "class_method_signature": "MessageDispatcher.retryMessages(final List<Message> messages, final List<SQSMessageResult> results)", "testcase": false, "constructor": false}, {"identifier": "getRetryDelay", "parameters": "(final SQSMessageResult result)", "modifiers": "private", "return": "int", "signature": "int getRetryDelay(final SQSMessageResult result)", "full_signature": "private int getRetryDelay(final SQSMessageResult result)", "class_method_signature": "MessageDispatcher.getRetryDelay(final SQSMessageResult result)", "testcase": false, "constructor": false}, {"identifier": "reset", "parameters": "()", "modifiers": "public", "return": "void", "signature": "void reset()", "full_signature": "public void reset()", "class_method_signature": "MessageDispatcher.reset()", "testcase": false, "constructor": false}, {"identifier": "getEstimatedCapacity", "parameters": "(Instant cutoff)", "modifiers": "public", "return": "int", "signature": "int getEstimatedCapacity(Instant cutoff)", "full_signature": "public int getEstimatedCapacity(Instant cutoff)", "class_method_signature": "MessageDispatcher.getEstimatedCapacity(Instant cutoff)", "testcase": false, "constructor": false}], "file": "aws-serverless-sqs-event-source-app/src/main/java/com/amazonaws/serverless/sqseventsource/MessageDispatcher.java"}, "focal_method": {"identifier": "getEstimatedCapacity", "parameters": "(Instant cutoff)", "modifiers": "public", "return": "int", "body": "public int getEstimatedCapacity(Instant cutoff) {\n        // special case: if we haven't processed anything yet, just say we can process a lot of messages\n        if (!stats.hasSamples()) {\n            log.info(\"No message processing stats yet. Returning estimated capacity of INT_MAX\");\n            return Integer.MAX_VALUE;\n        }\n        return stats.getEstimatedCapacity(Duration.between(Instant.now(clock), cutoff));\n    }", "signature": "int getEstimatedCapacity(Instant cutoff)", "full_signature": "public int getEstimatedCapacity(Instant cutoff)", "class_method_signature": "MessageDispatcher.getEstimatedCapacity(Instant cutoff)", "testcase": false, "constructor": false, "invocations": ["hasSamples", "info", "getEstimatedCapacity", "between", "now"]}, "repository": {"repo_id": 123649054, "url": "https://github.com/awslabs/aws-serverless-sqs-event-source", "language": "Java", "is_fork": false, "fork_count": 13, "stargazer_count": 33, "size": 79, "license": "licensed"}}