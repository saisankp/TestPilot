{"test_class": {"identifier": "GrpcClientRequestTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "Key<String> b3Key = Key.of(\"b3\", Metadata.ASCII_STRING_MARSHALLER);", "modifier": "", "type": "Key<String>", "declarator": "b3Key = Key.of(\"b3\", Metadata.ASCII_STRING_MARSHALLER)", "var_name": "b3Key"}, {"original_string": "MethodDescriptor<?, ?> methodDescriptor = TestObjects.METHOD_DESCRIPTOR;", "modifier": "", "type": "MethodDescriptor<?, ?>", "declarator": "methodDescriptor = TestObjects.METHOD_DESCRIPTOR", "var_name": "methodDescriptor"}, {"original_string": "CallOptions callOptions = CallOptions.DEFAULT;", "modifier": "", "type": "CallOptions", "declarator": "callOptions = CallOptions.DEFAULT", "var_name": "callOptions"}, {"original_string": "ClientCall<?, ?> call = mock(ClientCall.class);", "modifier": "", "type": "ClientCall<?, ?>", "declarator": "call = mock(ClientCall.class)", "var_name": "call"}, {"original_string": "Metadata headers = new Metadata();", "modifier": "", "type": "Metadata", "declarator": "headers = new Metadata()", "var_name": "headers"}, {"original_string": "GrpcClientRequest request =\n    new GrpcClientRequest(singletonMap(\"b3\", b3Key), methodDescriptor, callOptions, call, headers);", "modifier": "", "type": "GrpcClientRequest", "declarator": "request =\n    new GrpcClientRequest(singletonMap(\"b3\", b3Key), methodDescriptor, callOptions, call, headers)", "var_name": "request"}], "file": "instrumentation/grpc/src/test/java/brave/grpc/GrpcClientRequestTest.java"}, "test_case": {"identifier": "propagationField_replace", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test public void propagationField_replace() {\n    headers.put(b3Key, \"0\");\n\n    request.propagationField(\"b3\", \"1\");\n\n    assertThat(request.headers.get(b3Key)).isEqualTo(\"1\");\n  }", "signature": "void propagationField_replace()", "full_signature": "@Test public void propagationField_replace()", "class_method_signature": "GrpcClientRequestTest.propagationField_replace()", "testcase": true, "constructor": false, "invocations": ["put", "propagationField", "isEqualTo", "assertThat", "get"]}, "focal_class": {"identifier": "GrpcClientRequest", "superclass": "extends RpcClientRequest", "interfaces": "implements GrpcRequest", "fields": [{"original_string": "final Map<String, Key<String>> nameToKey;", "modifier": "final", "type": "Map<String, Key<String>>", "declarator": "nameToKey", "var_name": "nameToKey"}, {"original_string": "final MethodDescriptor<?, ?> methodDescriptor;", "modifier": "final", "type": "MethodDescriptor<?, ?>", "declarator": "methodDescriptor", "var_name": "methodDescriptor"}, {"original_string": "final CallOptions callOptions;", "modifier": "final", "type": "CallOptions", "declarator": "callOptions", "var_name": "callOptions"}, {"original_string": "final ClientCall<?, ?> call;", "modifier": "final", "type": "ClientCall<?, ?>", "declarator": "call", "var_name": "call"}, {"original_string": "final Metadata headers;", "modifier": "final", "type": "Metadata", "declarator": "headers", "var_name": "headers"}], "methods": [{"identifier": "GrpcClientRequest", "parameters": "(Map<String, Key<String>> nameToKey, MethodDescriptor<?, ?> methodDescriptor,\n      CallOptions callOptions, ClientCall<?, ?> call, Metadata headers)", "modifiers": "", "return": "", "signature": " GrpcClientRequest(Map<String, Key<String>> nameToKey, MethodDescriptor<?, ?> methodDescriptor,\n      CallOptions callOptions, ClientCall<?, ?> call, Metadata headers)", "full_signature": "  GrpcClientRequest(Map<String, Key<String>> nameToKey, MethodDescriptor<?, ?> methodDescriptor,\n      CallOptions callOptions, ClientCall<?, ?> call, Metadata headers)", "class_method_signature": "GrpcClientRequest.GrpcClientRequest(Map<String, Key<String>> nameToKey, MethodDescriptor<?, ?> methodDescriptor,\n      CallOptions callOptions, ClientCall<?, ?> call, Metadata headers)", "testcase": false, "constructor": true}, {"identifier": "unwrap", "parameters": "()", "modifiers": "@Override public", "return": "Object", "signature": "Object unwrap()", "full_signature": "@Override public Object unwrap()", "class_method_signature": "GrpcClientRequest.unwrap()", "testcase": false, "constructor": false}, {"identifier": "method", "parameters": "()", "modifiers": "@Override public", "return": "String", "signature": "String method()", "full_signature": "@Override public String method()", "class_method_signature": "GrpcClientRequest.method()", "testcase": false, "constructor": false}, {"identifier": "service", "parameters": "()", "modifiers": "@Override public", "return": "String", "signature": "String service()", "full_signature": "@Override public String service()", "class_method_signature": "GrpcClientRequest.service()", "testcase": false, "constructor": false}, {"identifier": "methodDescriptor", "parameters": "()", "modifiers": "@Override public", "return": "MethodDescriptor<?, ?>", "signature": "MethodDescriptor<?, ?> methodDescriptor()", "full_signature": "@Override public MethodDescriptor<?, ?> methodDescriptor()", "class_method_signature": "GrpcClientRequest.methodDescriptor()", "testcase": false, "constructor": false}, {"identifier": "callOptions", "parameters": "()", "modifiers": "public", "return": "CallOptions", "signature": "CallOptions callOptions()", "full_signature": "public CallOptions callOptions()", "class_method_signature": "GrpcClientRequest.callOptions()", "testcase": false, "constructor": false}, {"identifier": "call", "parameters": "()", "modifiers": "public", "return": "ClientCall<?, ?>", "signature": "ClientCall<?, ?> call()", "full_signature": "public ClientCall<?, ?> call()", "class_method_signature": "GrpcClientRequest.call()", "testcase": false, "constructor": false}, {"identifier": "headers", "parameters": "()", "modifiers": "@Override public", "return": "Metadata", "signature": "Metadata headers()", "full_signature": "@Override public Metadata headers()", "class_method_signature": "GrpcClientRequest.headers()", "testcase": false, "constructor": false}, {"identifier": "propagationField", "parameters": "(String keyName, String value)", "modifiers": "@Override protected", "return": "void", "signature": "void propagationField(String keyName, String value)", "full_signature": "@Override protected void propagationField(String keyName, String value)", "class_method_signature": "GrpcClientRequest.propagationField(String keyName, String value)", "testcase": false, "constructor": false}], "file": "instrumentation/grpc/src/main/java/brave/grpc/GrpcClientRequest.java"}, "focal_method": {"identifier": "propagationField", "parameters": "(String keyName, String value)", "modifiers": "@Override protected", "return": "void", "body": "@Override protected void propagationField(String keyName, String value) {\n\n    if (keyName == null) throw new NullPointerException(\"keyName == null\");\n    if (value == null) throw new NullPointerException(\"value == null\");\n    Key<String> key = nameToKey.get(keyName);\n    if (key == null) {\n      assert false : \"We currently don't support setting headers except propagation fields\";\n      return;\n    }\n    headers.removeAll(key);\n    headers.put(key, value);\n  }", "signature": "void propagationField(String keyName, String value)", "full_signature": "@Override protected void propagationField(String keyName, String value)", "class_method_signature": "GrpcClientRequest.propagationField(String keyName, String value)", "testcase": false, "constructor": false, "invocations": ["get", "removeAll", "put"]}, "repository": {"repo_id": 9278888, "url": "https://github.com/openzipkin/brave", "stars": 1754, "created": "4/7/2013 3:48:18 PM +00:00", "updates": "2020-01-26T11:52:41+00:00", "fork": "False", "license": "licensed"}}