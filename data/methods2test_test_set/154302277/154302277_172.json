{"test_class": {"identifier": "GetConfigurationObjectServiceSmr5Test", "superclass": "", "interfaces": "", "fields": [{"original_string": "private GetConfigurationObjectServiceSmr5 instance;", "modifier": "private", "type": "GetConfigurationObjectServiceSmr5", "declarator": "instance", "var_name": "instance"}, {"original_string": "@Mock\n    private GetResult getResult;", "modifier": "@Mock\n    private", "type": "GetResult", "declarator": "getResult", "var_name": "getResult"}, {"original_string": "@Mock\n    private DataObject nonBitString;", "modifier": "@Mock\n    private", "type": "DataObject", "declarator": "nonBitString", "var_name": "nonBitString"}], "file": "osgp/protocol-adapter-dlms/osgp-protocol-adapter-dlms/src/test/java/org/opensmartgridplatform/adapter/protocol/dlms/domain/commands/configuration/service/GetConfigurationObjectServiceSmr5Test.java"}, "test_case": {"identifier": "getConfigurationObjectResultDataNotBitString", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void getConfigurationObjectResultDataNotBitString() throws ProtocolAdapterException {\n\n        // SETUP\n        when(this.getResult.getResultData()).thenReturn(this.nonBitString);\n\n        assertThatExceptionOfType(ProtocolAdapterException.class).isThrownBy(() -> {\n            // CALL\n            this.instance.getConfigurationObject(this.getResult);\n        });\n    }", "signature": "void getConfigurationObjectResultDataNotBitString()", "full_signature": "@Test public void getConfigurationObjectResultDataNotBitString()", "class_method_signature": "GetConfigurationObjectServiceSmr5Test.getConfigurationObjectResultDataNotBitString()", "testcase": true, "constructor": false, "invocations": ["thenReturn", "when", "getResultData", "isThrownBy", "assertThatExceptionOfType", "getConfigurationObject"]}, "focal_class": {"identifier": "GetConfigurationObjectServiceSmr5", "superclass": "extends GetConfigurationObjectService", "interfaces": "", "fields": [{"original_string": "private static final Logger LOGGER = LoggerFactory.getLogger(GetConfigurationObjectServiceSmr5.class);", "modifier": "private static final", "type": "Logger", "declarator": "LOGGER = LoggerFactory.getLogger(GetConfigurationObjectServiceSmr5.class)", "var_name": "LOGGER"}, {"original_string": "private final DlmsHelper dlmsHelper;", "modifier": "private final", "type": "DlmsHelper", "declarator": "dlmsHelper", "var_name": "dlmsHelper"}], "methods": [{"identifier": "GetConfigurationObjectServiceSmr5", "parameters": "(final DlmsHelper dlmsHelper)", "modifiers": "public", "return": "", "signature": " GetConfigurationObjectServiceSmr5(final DlmsHelper dlmsHelper)", "full_signature": "public  GetConfigurationObjectServiceSmr5(final DlmsHelper dlmsHelper)", "class_method_signature": "GetConfigurationObjectServiceSmr5.GetConfigurationObjectServiceSmr5(final DlmsHelper dlmsHelper)", "testcase": false, "constructor": true}, {"identifier": "handles", "parameters": "(final Protocol protocol)", "modifiers": "@Override public", "return": "boolean", "signature": "boolean handles(final Protocol protocol)", "full_signature": "@Override public boolean handles(final Protocol protocol)", "class_method_signature": "GetConfigurationObjectServiceSmr5.handles(final Protocol protocol)", "testcase": false, "constructor": false}, {"identifier": "getConfigurationObject", "parameters": "(final GetResult result)", "modifiers": "@Override", "return": "ConfigurationObjectDto", "signature": "ConfigurationObjectDto getConfigurationObject(final GetResult result)", "full_signature": "@Override ConfigurationObjectDto getConfigurationObject(final GetResult result)", "class_method_signature": "GetConfigurationObjectServiceSmr5.getConfigurationObject(final GetResult result)", "testcase": false, "constructor": false}, {"identifier": "getFlagType", "parameters": "(final int bitPosition)", "modifiers": "@Override", "return": "Optional<ConfigurationFlagTypeDto>", "signature": "Optional<ConfigurationFlagTypeDto> getFlagType(final int bitPosition)", "full_signature": "@Override Optional<ConfigurationFlagTypeDto> getFlagType(final int bitPosition)", "class_method_signature": "GetConfigurationObjectServiceSmr5.getFlagType(final int bitPosition)", "testcase": false, "constructor": false}], "file": "osgp/protocol-adapter-dlms/osgp-protocol-adapter-dlms/src/main/java/org/opensmartgridplatform/adapter/protocol/dlms/domain/commands/configuration/service/GetConfigurationObjectServiceSmr5.java"}, "focal_method": {"identifier": "getConfigurationObject", "parameters": "(final GetResult result)", "modifiers": "@Override", "return": "ConfigurationObjectDto", "body": "@Override\n    ConfigurationObjectDto getConfigurationObject(final GetResult result) throws ProtocolAdapterException {\n\n        final DataObject resultData = result.getResultData();\n        if (resultData == null || !resultData.isBitString()) {\n            LOGGER.warn(\"Configuration object result data is not a BitString: {}\", resultData);\n            throw new ProtocolAdapterException(\n                    \"Expected bit-string data as Configuration object result data, but got: \" + (\n                            resultData == null ? \"null\" : resultData.getType()));\n        }\n        LOGGER.info(\"SMR5 Configuration object current BitString: {}\", this.dlmsHelper.getDebugInfo(resultData));\n\n        final BitString bitString = resultData.getValue();\n        final byte[] flagByteArray = bitString.getBitString();\n        final List<ConfigurationFlagDto> configurationFlagDtos = this.toConfigurationFlags(flagByteArray);\n        final ConfigurationFlagsDto configurationFlagsDto = new ConfigurationFlagsDto(configurationFlagDtos);\n        return new ConfigurationObjectDto(configurationFlagsDto);\n    }", "signature": "ConfigurationObjectDto getConfigurationObject(final GetResult result)", "full_signature": "@Override ConfigurationObjectDto getConfigurationObject(final GetResult result)", "class_method_signature": "GetConfigurationObjectServiceSmr5.getConfigurationObject(final GetResult result)", "testcase": false, "constructor": false, "invocations": ["getResultData", "isBitString", "warn", "getType", "info", "getDebugInfo", "getValue", "getBitString", "toConfigurationFlags"]}, "repository": {"repo_id": 154302277, "url": "https://github.com/OSGP/open-smart-grid-platform", "stars": 30, "created": "10/23/2018 9:41:12 AM +00:00", "updates": "2020-01-26T20:15:09+00:00", "fork": "False", "license": "licensed"}}