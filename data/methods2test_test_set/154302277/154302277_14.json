{"test_class": {"identifier": "TransactionalDeviceLogItemServiceTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private final Date now = DateTime.now().toDate();", "modifier": "private final", "type": "Date", "declarator": "now = DateTime.now().toDate()", "var_name": "now"}, {"original_string": "@InjectMocks\n    private TransactionalDeviceLogItemService transactionalDeviceLogItemService;", "modifier": "@InjectMocks\n    private", "type": "TransactionalDeviceLogItemService", "declarator": "transactionalDeviceLogItemService", "var_name": "transactionalDeviceLogItemService"}, {"original_string": "@Mock\n    private DeviceLogItemSlicingRepository deviceLogItemSlicingRepository;", "modifier": "@Mock\n    private", "type": "DeviceLogItemSlicingRepository", "declarator": "deviceLogItemSlicingRepository", "var_name": "deviceLogItemSlicingRepository"}], "file": "osgp/platform/osgp-adapter-domain-core/src/test/java/org/opensmartgridplatform/adapter/domain/core/application/services/TransactionalDeviceLogItemServiceTest.java"}, "test_case": {"identifier": "serviceReturnsOneDeviceLogItem", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void serviceReturnsOneDeviceLogItem() {\n        final Slice<DeviceLogItem> mockSlice = this.mockSliceOfDeviceLogItems(1);\n        final PageRequest pageRequest = PageRequest.of(0, 10, Sort.Direction.DESC, \"id\");\n        Mockito.when(this.deviceLogItemSlicingRepository.findByCreationTimeBefore(this.now, pageRequest))\n                .thenReturn(mockSlice);\n\n        final List<DeviceLogItem> deviceLogItems = this.transactionalDeviceLogItemService\n                .findDeviceLogItemsBeforeDate(this.now, 10);\n        assertThat(deviceLogItems.size()).isEqualTo(1);\n    }", "signature": "void serviceReturnsOneDeviceLogItem()", "full_signature": "@Test public void serviceReturnsOneDeviceLogItem()", "class_method_signature": "TransactionalDeviceLogItemServiceTest.serviceReturnsOneDeviceLogItem()", "testcase": true, "constructor": false, "invocations": ["mockSliceOfDeviceLogItems", "of", "thenReturn", "when", "findByCreationTimeBefore", "findDeviceLogItemsBeforeDate", "isEqualTo", "assertThat", "size"]}, "focal_class": {"identifier": "TransactionalDeviceLogItemService", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final Logger LOGGER = LoggerFactory.getLogger(TransactionalDeviceLogItemService.class);", "modifier": "private static final", "type": "Logger", "declarator": "LOGGER = LoggerFactory.getLogger(TransactionalDeviceLogItemService.class)", "var_name": "LOGGER"}, {"original_string": "@Autowired\n    private DeviceLogItemSlicingRepository deviceLogItemSlicingRepository;", "modifier": "@Autowired\n    private", "type": "DeviceLogItemSlicingRepository", "declarator": "deviceLogItemSlicingRepository", "var_name": "deviceLogItemSlicingRepository"}], "methods": [{"identifier": "findDeviceLogItemsBeforeDate", "parameters": "(final Date date, final int pageSize)", "modifiers": "public", "return": "List<DeviceLogItem>", "signature": "List<DeviceLogItem> findDeviceLogItemsBeforeDate(final Date date, final int pageSize)", "full_signature": "public List<DeviceLogItem> findDeviceLogItemsBeforeDate(final Date date, final int pageSize)", "class_method_signature": "TransactionalDeviceLogItemService.findDeviceLogItemsBeforeDate(final Date date, final int pageSize)", "testcase": false, "constructor": false}, {"identifier": "deleteDeviceLogItems", "parameters": "(final List<DeviceLogItem> deviceLogItems)", "modifiers": "public", "return": "void", "signature": "void deleteDeviceLogItems(final List<DeviceLogItem> deviceLogItems)", "full_signature": "public void deleteDeviceLogItems(final List<DeviceLogItem> deviceLogItems)", "class_method_signature": "TransactionalDeviceLogItemService.deleteDeviceLogItems(final List<DeviceLogItem> deviceLogItems)", "testcase": false, "constructor": false}], "file": "osgp/platform/osgp-adapter-domain-core/src/main/java/org/opensmartgridplatform/adapter/domain/core/application/services/TransactionalDeviceLogItemService.java"}, "focal_method": {"identifier": "findDeviceLogItemsBeforeDate", "parameters": "(final Date date, final int pageSize)", "modifiers": "public", "return": "List<DeviceLogItem>", "body": "public List<DeviceLogItem> findDeviceLogItemsBeforeDate(final Date date, final int pageSize) {\n        final PageRequest pageRequest = PageRequest.of(0, pageSize, Sort.Direction.DESC, \"id\");\n        final Slice<DeviceLogItem> slice = this.deviceLogItemSlicingRepository.findByCreationTimeBefore(date,\n                pageRequest);\n        final List<DeviceLogItem> deviceLogItems = slice.getContent();\n        LOGGER.info(\"Found {} device log items with date time before {}.\", deviceLogItems.size(), date);\n\n        return deviceLogItems;\n    }", "signature": "List<DeviceLogItem> findDeviceLogItemsBeforeDate(final Date date, final int pageSize)", "full_signature": "public List<DeviceLogItem> findDeviceLogItemsBeforeDate(final Date date, final int pageSize)", "class_method_signature": "TransactionalDeviceLogItemService.findDeviceLogItemsBeforeDate(final Date date, final int pageSize)", "testcase": false, "constructor": false, "invocations": ["of", "findByCreationTimeBefore", "getContent", "info", "size"]}, "repository": {"repo_id": 154302277, "url": "https://github.com/OSGP/open-smart-grid-platform", "stars": 30, "created": "10/23/2018 9:41:12 AM +00:00", "updates": "2020-01-26T20:15:09+00:00", "fork": "False", "license": "licensed"}}