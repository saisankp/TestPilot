{"test_class": {"identifier": "SaveBmiServiceTest", "superclass": "", "interfaces": "", "fields": [], "file": "tech07/BmiCalculator/app/src/test/java/com/advanced_android/bmicalculator/SaveBmiServiceTest.java"}, "test_case": {"identifier": "onHandleIntent", "parameters": "", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void onHandleIntent\u306b\u6b63\u3057\u304f\u30c7\u30fc\u30bf\u304c\u5165\u3063\u305fIntent\u3092\u6e21\u305b\u3070\u30c7\u30fc\u30bf\u4fdd\u5b58\u3068Broadcast\u304c\u884c\u308f\u308c\u308b() {\n        //\u6e96\u5099\uff1aSaveBmiService\u306b\u6e21\u3059Intent\u3092\u7528\u610f\n        BmiValue bmiValue = mock(BmiValue.class);\n        Intent intent = mock(Intent.class);\n        when(intent.getSerializableExtra(SaveBmiService.PARAM_KEY_BMI_VALUE)).thenReturn(bmiValue);\n\n        //\u6e96\u5099\uff1aSaveBmiService\u306e\u5404\u30e1\u30bd\u30c3\u30c9\u306f\u4f55\u3082\u3057\u306a\u3044\u3088\u3046\u306b\u3059\u308b\n        SaveBmiService service = spy(new SaveBmiService());\n        doReturn(false).when(service).saveToRemoteServer((BmiValue)any());\n        doNothing().when(service).sendLocalBroadcast(anyBoolean());\n\n        //\u30c6\u30b9\u30c8\u3068\u30e1\u30bd\u30c3\u30c9\u547c\u3073\u51fa\u3057\u306e\u78ba\u8a8d\n        service.onHandleIntent(intent);\n        verify(service, times(1)).sendLocalBroadcast(anyBoolean());\n        verify(service, times(1)).saveToRemoteServer((BmiValue)any());\n    }", "signature": "void onHandleIntent", "full_signature": "@Test public void onHandleIntent", "class_method_signature": "SaveBmiServiceTest.onHandleIntent", "testcase": true, "constructor": false, "invocations": ["mock", "mock", "thenReturn", "when", "getSerializableExtra", "spy", "saveToRemoteServer", "when", "doReturn", "any", "sendLocalBroadcast", "when", "doNothing", "anyBoolean", "onHandleIntent", "sendLocalBroadcast", "verify", "times", "anyBoolean", "saveToRemoteServer", "verify", "times", "any"]}, "focal_class": {"identifier": "SaveBmiService", "superclass": "extends IntentService", "interfaces": "", "fields": [{"original_string": "public static final String ACTION_RESULT = SaveBmiService.class.getName() + \".ACTION_RESULT\";", "modifier": "public static final", "type": "String", "declarator": "ACTION_RESULT = SaveBmiService.class.getName() + \".ACTION_RESULT\"", "var_name": "ACTION_RESULT"}, {"original_string": "public static final String PARAM_RESULT = \"param_result\";", "modifier": "public static final", "type": "String", "declarator": "PARAM_RESULT = \"param_result\"", "var_name": "PARAM_RESULT"}, {"original_string": "static final String PARAM_KEY_BMI_VALUE = \"bmi_value\";", "modifier": "static final", "type": "String", "declarator": "PARAM_KEY_BMI_VALUE = \"bmi_value\"", "var_name": "PARAM_KEY_BMI_VALUE"}, {"original_string": "private LocalBroadcastManager mLocalBroadcastManager;", "modifier": "private", "type": "LocalBroadcastManager", "declarator": "mLocalBroadcastManager", "var_name": "mLocalBroadcastManager"}], "methods": [{"identifier": "SaveBmiService", "parameters": "()", "modifiers": "public", "return": "", "signature": " SaveBmiService()", "full_signature": "public  SaveBmiService()", "class_method_signature": "SaveBmiService.SaveBmiService()", "testcase": false, "constructor": true}, {"identifier": "onCreate", "parameters": "()", "modifiers": "@Override public", "return": "void", "signature": "void onCreate()", "full_signature": "@Override public void onCreate()", "class_method_signature": "SaveBmiService.onCreate()", "testcase": false, "constructor": false}, {"identifier": "onHandleIntent", "parameters": "(Intent intent)", "modifiers": "@Override protected", "return": "void", "signature": "void onHandleIntent(Intent intent)", "full_signature": "@Override protected void onHandleIntent(Intent intent)", "class_method_signature": "SaveBmiService.onHandleIntent(Intent intent)", "testcase": false, "constructor": false}, {"identifier": "saveToRemoteServer", "parameters": "(BmiValue bmiValue)", "modifiers": "@VisibleForTesting", "return": "boolean", "signature": "boolean saveToRemoteServer(BmiValue bmiValue)", "full_signature": "@VisibleForTesting boolean saveToRemoteServer(BmiValue bmiValue)", "class_method_signature": "SaveBmiService.saveToRemoteServer(BmiValue bmiValue)", "testcase": false, "constructor": false}, {"identifier": "sendLocalBroadcast", "parameters": "(boolean result)", "modifiers": "@VisibleForTesting", "return": "void", "signature": "void sendLocalBroadcast(boolean result)", "full_signature": "@VisibleForTesting void sendLocalBroadcast(boolean result)", "class_method_signature": "SaveBmiService.sendLocalBroadcast(boolean result)", "testcase": false, "constructor": false}, {"identifier": "setLocalBroadcastManager", "parameters": "(LocalBroadcastManager manager)", "modifiers": "@VisibleForTesting", "return": "void", "signature": "void setLocalBroadcastManager(LocalBroadcastManager manager)", "full_signature": "@VisibleForTesting void setLocalBroadcastManager(LocalBroadcastManager manager)", "class_method_signature": "SaveBmiService.setLocalBroadcastManager(LocalBroadcastManager manager)", "testcase": false, "constructor": false}, {"identifier": "start", "parameters": "(Context context, BmiValue bmiValue)", "modifiers": "public static", "return": "void", "signature": "void start(Context context, BmiValue bmiValue)", "full_signature": "public static void start(Context context, BmiValue bmiValue)", "class_method_signature": "SaveBmiService.start(Context context, BmiValue bmiValue)", "testcase": false, "constructor": false}], "file": "tech07/BmiCalculator/app/src/main/java/com/advanced_android/bmicalculator/SaveBmiService.java"}, "focal_method": {"identifier": "onHandleIntent", "parameters": "(Intent intent)", "modifiers": "@Override protected", "return": "void", "body": "@Override\n    protected void onHandleIntent(Intent intent) {\n        if (intent == null) {\n            return;\n        }\n\n        Serializable extra = intent.getSerializableExtra(PARAM_KEY_BMI_VALUE);\n        if (extra == null || !(extra instanceof BmiValue)) {\n            return;\n        }\n\n        BmiValue bmiValue = (BmiValue)extra;\n        boolean result = saveToRemoteServer(bmiValue);\n        sendLocalBroadcast(result);\n    }", "signature": "void onHandleIntent(Intent intent)", "full_signature": "@Override protected void onHandleIntent(Intent intent)", "class_method_signature": "SaveBmiService.onHandleIntent(Intent intent)", "testcase": false, "constructor": false, "invocations": ["getSerializableExtra", "saveToRemoteServer", "sendLocalBroadcast"]}, "repository": {"repo_id": 55954702, "url": "https://github.com/advanced-android-book/samples", "language": "Java", "is_fork": false, "fork_count": 18, "stargazer_count": 64, "size": 3132, "license": "licensed"}}