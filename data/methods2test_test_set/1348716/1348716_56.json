{"test_class": {"identifier": "DefineProductCategoryPreviewControllerTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final String ADMIN_VIEW = \"redirect:/AdminAction.do?method=load\";", "modifier": "private static final", "type": "String", "declarator": "ADMIN_VIEW = \"redirect:/AdminAction.do?method=load\"", "var_name": "ADMIN_VIEW"}, {"original_string": "private DefineProductCategoryPreviewController productCategoryPreviewController;", "modifier": "private", "type": "DefineProductCategoryPreviewController", "declarator": "productCategoryPreviewController", "var_name": "productCategoryPreviewController"}, {"original_string": "@Mock\n    private AdminServiceFacade adminServiceFacade;", "modifier": "@Mock\n    private", "type": "AdminServiceFacade", "declarator": "adminServiceFacade", "var_name": "adminServiceFacade"}, {"original_string": "@Mock\n    private BindingResult bindingResult;", "modifier": "@Mock\n    private", "type": "BindingResult", "declarator": "bindingResult", "var_name": "bindingResult"}], "file": "userInterface/src/test/java/org/mifos/ui/core/controller/DefineProductCategoryPreviewControllerTest.java"}, "test_case": {"identifier": "cancelShouldRedirectToAdminView", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void cancelShouldRedirectToAdminView() throws Exception {\n\n        // setup\n        ProductCategoryFormBean expectedFormBean = new ProductCategoryFormBean();\n\n        // exercise test\n        ModelAndView returnedView = productCategoryPreviewController.processFormSubmit(\"Cancel\", \"\", expectedFormBean, bindingResult);\n\n        // verification\n        Assert.assertThat(returnedView.getViewName(), is(ADMIN_VIEW));\n    }", "signature": "void cancelShouldRedirectToAdminView()", "full_signature": "@Test public void cancelShouldRedirectToAdminView()", "class_method_signature": "DefineProductCategoryPreviewControllerTest.cancelShouldRedirectToAdminView()", "testcase": true, "constructor": false, "invocations": ["processFormSubmit", "assertThat", "getViewName", "is"]}, "focal_class": {"identifier": "DefineProductCategoryPreviewController", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final String REDIRECT_TO_ADMIN = \"redirect:/AdminAction.do?method=load\";", "modifier": "private static final", "type": "String", "declarator": "REDIRECT_TO_ADMIN = \"redirect:/AdminAction.do?method=load\"", "var_name": "REDIRECT_TO_ADMIN"}, {"original_string": "private static final String CANCEL_PARAM = \"CANCEL\";", "modifier": "private static final", "type": "String", "declarator": "CANCEL_PARAM = \"CANCEL\"", "var_name": "CANCEL_PARAM"}, {"original_string": "private static final String EDIT_PARAM = \"EDIT\";", "modifier": "private static final", "type": "String", "declarator": "EDIT_PARAM = \"EDIT\"", "var_name": "EDIT_PARAM"}, {"original_string": "@Autowired\n    private AdminServiceFacade adminServiceFacade;", "modifier": "@Autowired\n    private", "type": "AdminServiceFacade", "declarator": "adminServiceFacade", "var_name": "adminServiceFacade"}], "methods": [{"identifier": "DefineProductCategoryPreviewController", "parameters": "(final AdminServiceFacade adminServiceFacade)", "modifiers": "public", "return": "", "signature": " DefineProductCategoryPreviewController(final AdminServiceFacade adminServiceFacade)", "full_signature": "public  DefineProductCategoryPreviewController(final AdminServiceFacade adminServiceFacade)", "class_method_signature": "DefineProductCategoryPreviewController.DefineProductCategoryPreviewController(final AdminServiceFacade adminServiceFacade)", "testcase": false, "constructor": true}, {"identifier": "DefineProductCategoryPreviewController", "parameters": "()", "modifiers": "protected", "return": "", "signature": " DefineProductCategoryPreviewController()", "full_signature": "protected  DefineProductCategoryPreviewController()", "class_method_signature": "DefineProductCategoryPreviewController.DefineProductCategoryPreviewController()", "testcase": false, "constructor": true}, {"identifier": "showPopulatedForm", "parameters": "(ProductCategoryFormBean formBean)", "modifiers": "@RequestMapping(method = RequestMethod.GET) public", "return": "ModelAndView", "signature": "ModelAndView showPopulatedForm(ProductCategoryFormBean formBean)", "full_signature": "@RequestMapping(method = RequestMethod.GET) public ModelAndView showPopulatedForm(ProductCategoryFormBean formBean)", "class_method_signature": "DefineProductCategoryPreviewController.showPopulatedForm(ProductCategoryFormBean formBean)", "testcase": false, "constructor": false}, {"identifier": "getProductCategoryTypes", "parameters": "()", "modifiers": "private", "return": "Map<String, String>", "signature": "Map<String, String> getProductCategoryTypes()", "full_signature": "private Map<String, String> getProductCategoryTypes()", "class_method_signature": "DefineProductCategoryPreviewController.getProductCategoryTypes()", "testcase": false, "constructor": false}, {"identifier": "processFormSubmit", "parameters": "(@RequestParam(value = CANCEL_PARAM, required = false) String cancel,\n            @RequestParam(value = EDIT_PARAM, required = false) String edit,\n            @ModelAttribute(\"formBean\") ProductCategoryFormBean bean,\n            BindingResult result)", "modifiers": "@RequestMapping(method = RequestMethod.POST) public", "return": "ModelAndView", "signature": "ModelAndView processFormSubmit(@RequestParam(value = CANCEL_PARAM, required = false) String cancel,\n            @RequestParam(value = EDIT_PARAM, required = false) String edit,\n            @ModelAttribute(\"formBean\") ProductCategoryFormBean bean,\n            BindingResult result)", "full_signature": "@RequestMapping(method = RequestMethod.POST) public ModelAndView processFormSubmit(@RequestParam(value = CANCEL_PARAM, required = false) String cancel,\n            @RequestParam(value = EDIT_PARAM, required = false) String edit,\n            @ModelAttribute(\"formBean\") ProductCategoryFormBean bean,\n            BindingResult result)", "class_method_signature": "DefineProductCategoryPreviewController.processFormSubmit(@RequestParam(value = CANCEL_PARAM, required = false) String cancel,\n            @RequestParam(value = EDIT_PARAM, required = false) String edit,\n            @ModelAttribute(\"formBean\") ProductCategoryFormBean bean,\n            BindingResult result)", "testcase": false, "constructor": false}], "file": "userInterface/src/main/java/org/mifos/ui/core/controller/DefineProductCategoryPreviewController.java"}, "focal_method": {"identifier": "processFormSubmit", "parameters": "(@RequestParam(value = CANCEL_PARAM, required = false) String cancel,\n            @RequestParam(value = EDIT_PARAM, required = false) String edit,\n            @ModelAttribute(\"formBean\") ProductCategoryFormBean bean,\n            BindingResult result)", "modifiers": "@RequestMapping(method = RequestMethod.POST) public", "return": "ModelAndView", "body": "@RequestMapping(method = RequestMethod.POST)\n    public ModelAndView processFormSubmit(@RequestParam(value = CANCEL_PARAM, required = false) String cancel,\n            @RequestParam(value = EDIT_PARAM, required = false) String edit,\n            @ModelAttribute(\"formBean\") ProductCategoryFormBean bean,\n            BindingResult result) {\n        ModelAndView modelAndView = new ModelAndView(\"defineNewCategory\");\n        if (StringUtils.isNotBlank(cancel)) {\n            modelAndView.setViewName(REDIRECT_TO_ADMIN);\n        } else if (StringUtils.isNotBlank(edit)) {\n            modelAndView.setViewName(\"defineNewCategory\");\n            modelAndView.addObject(\"formBean\", bean);\n            modelAndView.addObject(\"typeList\", this.getProductCategoryTypes());\n        } else if (result.hasErrors()) {\n            modelAndView.setViewName(\"newProductCategoryPreview\");\n            modelAndView.addObject(\"formBean\", bean);\n        } else {\n            CreateOrUpdateProductCategory productCategory = new CreateOrUpdateProductCategory(Short.parseShort(bean.getProductTypeId()), bean.getProductCategoryName(),\n                    bean.getProductCategoryDesc(), Short.parseShort(bean.getProductCategoryStatusId()), bean.getGlobalPrdCategoryNum());\n\n            try {\n                this.adminServiceFacade.createProductCategory(productCategory);\n                modelAndView.setViewName(REDIRECT_TO_ADMIN);\n            } catch (BusinessRuleException e) {\n                ObjectError error = new ObjectError(\"formBean\", new String[] { e.getMessageKey() }, new Object[] {}, \"default: \");\n                result.addError(error);\n                modelAndView.setViewName(\"newProductCategoryPreview\");\n                modelAndView.addObject(\"formBean\", bean);\n            }\n        }\n        return modelAndView;\n    }", "signature": "ModelAndView processFormSubmit(@RequestParam(value = CANCEL_PARAM, required = false) String cancel,\n            @RequestParam(value = EDIT_PARAM, required = false) String edit,\n            @ModelAttribute(\"formBean\") ProductCategoryFormBean bean,\n            BindingResult result)", "full_signature": "@RequestMapping(method = RequestMethod.POST) public ModelAndView processFormSubmit(@RequestParam(value = CANCEL_PARAM, required = false) String cancel,\n            @RequestParam(value = EDIT_PARAM, required = false) String edit,\n            @ModelAttribute(\"formBean\") ProductCategoryFormBean bean,\n            BindingResult result)", "class_method_signature": "DefineProductCategoryPreviewController.processFormSubmit(@RequestParam(value = CANCEL_PARAM, required = false) String cancel,\n            @RequestParam(value = EDIT_PARAM, required = false) String edit,\n            @ModelAttribute(\"formBean\") ProductCategoryFormBean bean,\n            BindingResult result)", "testcase": false, "constructor": false, "invocations": ["isNotBlank", "setViewName", "isNotBlank", "setViewName", "addObject", "addObject", "getProductCategoryTypes", "hasErrors", "setViewName", "addObject", "parseShort", "getProductTypeId", "getProductCategoryName", "getProductCategoryDesc", "parseShort", "getProductCategoryStatusId", "getGlobalPrdCategoryNum", "createProductCategory", "setViewName", "getMessageKey", "addError", "setViewName", "addObject"]}, "repository": {"repo_id": 1348716, "url": "https://github.com/mifos/head", "language": "Java", "is_fork": false, "fork_count": 91, "stargazer_count": 55, "size": 532732, "license": "licensed"}}