{"test_class": {"identifier": "ProjectImportPortletTest", "superclass": "extends TestCase", "interfaces": "", "fields": [{"original_string": "private final String name = \"name\";", "modifier": "private final", "type": "String", "declarator": "name = \"name\"", "var_name": "name"}, {"original_string": "private final String password = \"password\";", "modifier": "private final", "type": "String", "declarator": "password = \"password\"", "var_name": "password"}, {"original_string": "private final String newURL = \"newURL\";", "modifier": "private final", "type": "String", "declarator": "newURL = \"newURL\"", "var_name": "newURL"}, {"original_string": "@Mock\n    private PortletSession session;", "modifier": "@Mock\n    private", "type": "PortletSession", "declarator": "session", "var_name": "session"}, {"original_string": "@Mock\n    private JSONObject responseData;", "modifier": "@Mock\n    private", "type": "JSONObject", "declarator": "responseData", "var_name": "responseData"}], "file": "frontend/sw360-portlet/src/test/java/org/eclipse/sw360/portal/portlets/projectimport/ProjectImportPortletTest.java"}, "test_case": {"identifier": "testUpdateInputSourceWithUrlUpdatesResponse", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testUpdateInputSourceWithUrlUpdatesResponse() throws Exception {\n\n        ProjectImportPortlet.LoginState loginState = new ProjectImportPortlet.LoginState();\n        RemoteCredentials remoteCredentials = new RemoteCredentials();\n        remoteCredentials.setUsername(name);\n        remoteCredentials.setPassword(password);\n        remoteCredentials.setServerUrl(newURL);\n\n        new ProjectImportPortlet().setNewImportSource(\n                remoteCredentials,\n                session,\n                responseData,\n                loginState);\n\n        verify(responseData).put(ProjectImportConstants.RESPONSE__STATUS, ProjectImportConstants.RESPONSE__DB_CHANGED);\n        verify(responseData).put(ProjectImportConstants.RESPONSE__DB_URL, newURL);\n    }", "signature": "void testUpdateInputSourceWithUrlUpdatesResponse()", "full_signature": "@Test public void testUpdateInputSourceWithUrlUpdatesResponse()", "class_method_signature": "ProjectImportPortletTest.testUpdateInputSourceWithUrlUpdatesResponse()", "testcase": true, "constructor": false, "invocations": ["setUsername", "setPassword", "setServerUrl", "setNewImportSource", "put", "verify", "put", "verify"]}, "focal_class": {"identifier": "ProjectImportPortlet", "superclass": "extends Sw360Portlet", "interfaces": "", "fields": [{"original_string": "private static final Logger log = Logger.getLogger(ProjectImportPortlet.class);", "modifier": "private static final", "type": "Logger", "declarator": "log = Logger.getLogger(ProjectImportPortlet.class)", "var_name": "log"}, {"original_string": "private static ProjectImportService.Iface projectImportClient = new ThriftClients().makeProjectImportClient();", "modifier": "private static", "type": "ProjectImportService.Iface", "declarator": "projectImportClient = new ThriftClients().makeProjectImportClient()", "var_name": "projectImportClient"}], "methods": [{"identifier": "getRemoteCredentialsFromSession", "parameters": "(PortletSession session)", "modifiers": "private", "return": "RemoteCredentials", "signature": "RemoteCredentials getRemoteCredentialsFromSession(PortletSession session)", "full_signature": "private RemoteCredentials getRemoteCredentialsFromSession(PortletSession session)", "class_method_signature": "ProjectImportPortlet.getRemoteCredentialsFromSession(PortletSession session)", "testcase": false, "constructor": false}, {"identifier": "putRemoteCredentialsIntoSession", "parameters": "(PortletSession session, RemoteCredentials remoteCredentials)", "modifiers": "private", "return": "void", "signature": "void putRemoteCredentialsIntoSession(PortletSession session, RemoteCredentials remoteCredentials)", "full_signature": "private void putRemoteCredentialsIntoSession(PortletSession session, RemoteCredentials remoteCredentials)", "class_method_signature": "ProjectImportPortlet.putRemoteCredentialsIntoSession(PortletSession session, RemoteCredentials remoteCredentials)", "testcase": false, "constructor": false}, {"identifier": "doView", "parameters": "(RenderRequest request, RenderResponse response)", "modifiers": "@Override public", "return": "void", "signature": "void doView(RenderRequest request, RenderResponse response)", "full_signature": "@Override public void doView(RenderRequest request, RenderResponse response)", "class_method_signature": "ProjectImportPortlet.doView(RenderRequest request, RenderResponse response)", "testcase": false, "constructor": false}, {"identifier": "getProjectIdsForImport", "parameters": "(PortletRequest request)", "modifiers": "private", "return": "List<String>", "signature": "List<String> getProjectIdsForImport(PortletRequest request)", "full_signature": "private List<String> getProjectIdsForImport(PortletRequest request)", "class_method_signature": "ProjectImportPortlet.getProjectIdsForImport(PortletRequest request)", "testcase": false, "constructor": false}, {"identifier": "isImportSuccessful", "parameters": "(ImportStatus importStatus)", "modifiers": "private", "return": "boolean", "signature": "boolean isImportSuccessful(ImportStatus importStatus)", "full_signature": "private boolean isImportSuccessful(ImportStatus importStatus)", "class_method_signature": "ProjectImportPortlet.isImportSuccessful(ImportStatus importStatus)", "testcase": false, "constructor": false}, {"identifier": "importDatasources", "parameters": "(List<String> toImport, User user, RemoteCredentials remoteCredentials)", "modifiers": "private", "return": "ImportStatus", "signature": "ImportStatus importDatasources(List<String> toImport, User user, RemoteCredentials remoteCredentials)", "full_signature": "private ImportStatus importDatasources(List<String> toImport, User user, RemoteCredentials remoteCredentials)", "class_method_signature": "ProjectImportPortlet.importDatasources(List<String> toImport, User user, RemoteCredentials remoteCredentials)", "testcase": false, "constructor": false}, {"identifier": "loadImportables", "parameters": "(RemoteCredentials remoteCredentials, String projectName)", "modifiers": "private", "return": "List<Project>", "signature": "List<Project> loadImportables(RemoteCredentials remoteCredentials, String projectName)", "full_signature": "private List<Project> loadImportables(RemoteCredentials remoteCredentials, String projectName)", "class_method_signature": "ProjectImportPortlet.loadImportables(RemoteCredentials remoteCredentials, String projectName)", "testcase": false, "constructor": false}, {"identifier": "getIdName", "parameters": "()", "modifiers": "private", "return": "String", "signature": "String getIdName()", "full_signature": "private String getIdName()", "class_method_signature": "ProjectImportPortlet.getIdName()", "testcase": false, "constructor": false}, {"identifier": "serveResource", "parameters": "(ResourceRequest request, ResourceResponse response)", "modifiers": "@Override public", "return": "void", "signature": "void serveResource(ResourceRequest request, ResourceResponse response)", "full_signature": "@Override public void serveResource(ResourceRequest request, ResourceResponse response)", "class_method_signature": "ProjectImportPortlet.serveResource(ResourceRequest request, ResourceResponse response)", "testcase": false, "constructor": false}, {"identifier": "handleRequestedAjaxAction", "parameters": "(String requestedAction, ResourceRequest request, ResourceResponse response, LoginState loginState)", "modifiers": "public", "return": "JSONObject", "signature": "JSONObject handleRequestedAjaxAction(String requestedAction, ResourceRequest request, ResourceResponse response, LoginState loginState)", "full_signature": "public JSONObject handleRequestedAjaxAction(String requestedAction, ResourceRequest request, ResourceResponse response, LoginState loginState)", "class_method_signature": "ProjectImportPortlet.handleRequestedAjaxAction(String requestedAction, ResourceRequest request, ResourceResponse response, LoginState loginState)", "testcase": false, "constructor": false}, {"identifier": "validateCredentials", "parameters": "(RemoteCredentials credentials)", "modifiers": "private", "return": "boolean", "signature": "boolean validateCredentials(RemoteCredentials credentials)", "full_signature": "private boolean validateCredentials(RemoteCredentials credentials)", "class_method_signature": "ProjectImportPortlet.validateCredentials(RemoteCredentials credentials)", "testcase": false, "constructor": false}, {"identifier": "importBdpProjects", "parameters": "(User user, List<String> selectedIds, JSONObject responseData, RemoteCredentials remoteCredentials)", "modifiers": "private", "return": "void", "signature": "void importBdpProjects(User user, List<String> selectedIds, JSONObject responseData, RemoteCredentials remoteCredentials)", "full_signature": "private void importBdpProjects(User user, List<String> selectedIds, JSONObject responseData, RemoteCredentials remoteCredentials)", "class_method_signature": "ProjectImportPortlet.importBdpProjects(User user, List<String> selectedIds, JSONObject responseData, RemoteCredentials remoteCredentials)", "testcase": false, "constructor": false}, {"identifier": "setNewImportSource", "parameters": "(RemoteCredentials newCredentials, PortletSession session, JSONObject responseData, LoginState loginState)", "modifiers": "", "return": "void", "signature": "void setNewImportSource(RemoteCredentials newCredentials, PortletSession session, JSONObject responseData, LoginState loginState)", "full_signature": " void setNewImportSource(RemoteCredentials newCredentials, PortletSession session, JSONObject responseData, LoginState loginState)", "class_method_signature": "ProjectImportPortlet.setNewImportSource(RemoteCredentials newCredentials, PortletSession session, JSONObject responseData, LoginState loginState)", "testcase": false, "constructor": false}, {"identifier": "updateImportables", "parameters": "(JSONObject responseData, LoginState loginState, RemoteCredentials remoteCredentials, String projectName)", "modifiers": "private", "return": "void", "signature": "void updateImportables(JSONObject responseData, LoginState loginState, RemoteCredentials remoteCredentials, String projectName)", "full_signature": "private void updateImportables(JSONObject responseData, LoginState loginState, RemoteCredentials remoteCredentials, String projectName)", "class_method_signature": "ProjectImportPortlet.updateImportables(JSONObject responseData, LoginState loginState, RemoteCredentials remoteCredentials, String projectName)", "testcase": false, "constructor": false}], "file": "frontend/sw360-portlet/src/main/java/org/eclipse/sw360/portal/portlets/projectimport/ProjectImportPortlet.java"}, "focal_method": {"identifier": "setNewImportSource", "parameters": "(RemoteCredentials newCredentials, PortletSession session, JSONObject responseData, LoginState loginState)", "modifiers": "", "return": "void", "body": "void setNewImportSource(RemoteCredentials newCredentials, PortletSession session, JSONObject responseData, LoginState loginState) {\n\n        String serverUrl = nullToEmpty(newCredentials.getServerUrl());\n\n        if (serverUrl.isEmpty()) {\n            loginState.logout();\n            responseData.put(ProjectImportConstants.RESPONSE__STATUS,\n                    ProjectImportConstants.RESPONSE__DB_URL_NOT_SET);\n        } else {\n            putRemoteCredentialsIntoSession(session, newCredentials);\n            responseData.put(ProjectImportConstants.RESPONSE__STATUS,\n                    ProjectImportConstants.RESPONSE__DB_CHANGED);\n            responseData.put(ProjectImportConstants.RESPONSE__DB_URL, serverUrl);\n            loginState.login(serverUrl);\n        }\n    }", "signature": "void setNewImportSource(RemoteCredentials newCredentials, PortletSession session, JSONObject responseData, LoginState loginState)", "full_signature": " void setNewImportSource(RemoteCredentials newCredentials, PortletSession session, JSONObject responseData, LoginState loginState)", "class_method_signature": "ProjectImportPortlet.setNewImportSource(RemoteCredentials newCredentials, PortletSession session, JSONObject responseData, LoginState loginState)", "testcase": false, "constructor": false, "invocations": ["nullToEmpty", "getServerUrl", "isEmpty", "logout", "put", "putRemoteCredentialsIntoSession", "put", "put", "login"]}, "repository": {"repo_id": 43326581, "url": "https://github.com/sw360/sw360portal", "language": "Java", "is_fork": false, "fork_count": 23, "stargazer_count": 31, "size": 8770, "license": "licensed"}}