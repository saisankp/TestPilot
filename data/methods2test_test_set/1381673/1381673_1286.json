{"test_class": {"identifier": "CommonCodegenUtilsTest", "superclass": "", "interfaces": "", "fields": [], "file": "kie-pmml-trusty/kie-pmml-compiler/kie-pmml-compiler-commons/src/test/java/org/kie/pmml/compiler/commons/utils/CommonCodegenUtilsTest.java"}, "test_case": {"identifier": "addMapPopulation", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void addMapPopulation() {\n        final Map<String, MethodDeclaration> toAdd = IntStream.range(0, 5).boxed().collect(Collectors.toMap(index -> \"KEY_\" + index, index -> getMethodDeclaration(\"METHOD_\" + index)));\n        BlockStmt body = new BlockStmt();\n        String mapName = \"MAP_NAME\";\n        CommonCodegenUtils.addMapPopulation(toAdd, body, mapName);\n        NodeList<Statement> statements = body.getStatements();\n        assertEquals(toAdd.size(), statements.size());\n        for (Statement statement : statements) {\n            assertTrue(statement instanceof ExpressionStmt);\n            ExpressionStmt expressionStmt = (ExpressionStmt) statement;\n            com.github.javaparser.ast.expr.Expression expression = expressionStmt.getExpression();\n            assertTrue(expression instanceof MethodCallExpr);\n            MethodCallExpr methodCallExpr = (MethodCallExpr) expression;\n            final NodeList<com.github.javaparser.ast.expr.Expression> arguments = methodCallExpr.getArguments();\n            assertEquals(2, arguments.size());\n            assertTrue(arguments.get(0) instanceof StringLiteralExpr);\n            assertTrue(arguments.get(1) instanceof MethodReferenceExpr);\n            MethodReferenceExpr methodReferenceExpr = (MethodReferenceExpr) arguments.get(1);\n            assertTrue(methodReferenceExpr.getScope() instanceof ThisExpr);\n            final com.github.javaparser.ast.expr.Expression scope = methodCallExpr.getScope().orElse(null);\n            assertNotNull(scope);\n            assertTrue(scope instanceof NameExpr);\n            assertEquals(mapName, ((NameExpr) scope).getNameAsString());\n        }\n        for (Map.Entry<String, MethodDeclaration> entry : toAdd.entrySet()) {\n            int matchingDeclarations = (int) statements.stream().filter(statement -> {\n                ExpressionStmt expressionStmt = (ExpressionStmt) statement;\n                com.github.javaparser.ast.expr.Expression expression = expressionStmt.getExpression();\n                MethodCallExpr methodCallExpr = (MethodCallExpr) expression;\n                final NodeList<com.github.javaparser.ast.expr.Expression> arguments = methodCallExpr.getArguments();\n                if (!entry.getKey().equals(((StringLiteralExpr) arguments.get(0)).getValue())) {\n                    return false;\n                }\n                MethodReferenceExpr methodReferenceExpr = (MethodReferenceExpr) arguments.get(1);\n                return entry.getValue().getName().asString().equals(methodReferenceExpr.getIdentifier());\n            }).count();\n            assertEquals(1, matchingDeclarations);\n        }\n    }", "signature": "void addMapPopulation()", "full_signature": "@Test public void addMapPopulation()", "class_method_signature": "CommonCodegenUtilsTest.addMapPopulation()", "testcase": true, "constructor": false, "invocations": ["collect", "boxed", "range", "toMap", "getMethodDeclaration", "addMapPopulation", "getStatements", "assertEquals", "size", "size", "assertTrue", "getExpression", "assertTrue", "getArguments", "assertEquals", "size", "assertTrue", "get", "assertTrue", "get", "get", "assertTrue", "getScope", "orElse", "getScope", "assertNotNull", "assertTrue", "assertEquals", "getNameAsString", "entrySet", "count", "filter", "stream", "getExpression", "getArguments", "equals", "getKey", "getValue", "get", "get", "equals", "asString", "getName", "getValue", "getIdentifier", "assertEquals"]}, "focal_class": {"identifier": "CommonCodegenUtils", "superclass": "", "interfaces": "", "fields": [{"original_string": "public static String OPTIONAL_FILTERED_KIEPMMLNAMEVALUE_NAME =\"kiePMMLNameValue\";", "modifier": "public static", "type": "String", "declarator": "OPTIONAL_FILTERED_KIEPMMLNAMEVALUE_NAME =\"kiePMMLNameValue\"", "var_name": "OPTIONAL_FILTERED_KIEPMMLNAMEVALUE_NAME"}, {"original_string": "static final String LAMBDA_PARAMETER_NAME = \"lmbdParam\";", "modifier": "static final", "type": "String", "declarator": "LAMBDA_PARAMETER_NAME = \"lmbdParam\"", "var_name": "LAMBDA_PARAMETER_NAME"}, {"original_string": "static final String METHOD_NAME_TEMPLATE = \"%s%s\";", "modifier": "static final", "type": "String", "declarator": "METHOD_NAME_TEMPLATE = \"%s%s\"", "var_name": "METHOD_NAME_TEMPLATE"}, {"original_string": "static final String PARAMETER_NAME_TEMPLATE = \"param%s\";", "modifier": "static final", "type": "String", "declarator": "PARAMETER_NAME_TEMPLATE = \"param%s\"", "var_name": "PARAMETER_NAME_TEMPLATE"}], "methods": [{"identifier": "CommonCodegenUtils", "parameters": "()", "modifiers": "private", "return": "", "signature": " CommonCodegenUtils()", "full_signature": "private  CommonCodegenUtils()", "class_method_signature": "CommonCodegenUtils.CommonCodegenUtils()", "testcase": false, "constructor": true}, {"identifier": "populateMethodDeclarations", "parameters": "(final ClassOrInterfaceDeclaration toPopulate,\n                                                  final Collection<MethodDeclaration> methodDeclarations)", "modifiers": "public static", "return": "void", "signature": "void populateMethodDeclarations(final ClassOrInterfaceDeclaration toPopulate,\n                                                  final Collection<MethodDeclaration> methodDeclarations)", "full_signature": "public static void populateMethodDeclarations(final ClassOrInterfaceDeclaration toPopulate,\n                                                  final Collection<MethodDeclaration> methodDeclarations)", "class_method_signature": "CommonCodegenUtils.populateMethodDeclarations(final ClassOrInterfaceDeclaration toPopulate,\n                                                  final Collection<MethodDeclaration> methodDeclarations)", "testcase": false, "constructor": false}, {"identifier": "getFilteredKiePMMLNameValueExpression", "parameters": "(final String kiePMMLNameValueListParam,\n                                                                       final String fieldNameToRef,\n                                                                       boolean stringLiteralComparison)", "modifiers": "public static", "return": "ExpressionStmt", "signature": "ExpressionStmt getFilteredKiePMMLNameValueExpression(final String kiePMMLNameValueListParam,\n                                                                       final String fieldNameToRef,\n                                                                       boolean stringLiteralComparison)", "full_signature": "public static ExpressionStmt getFilteredKiePMMLNameValueExpression(final String kiePMMLNameValueListParam,\n                                                                       final String fieldNameToRef,\n                                                                       boolean stringLiteralComparison)", "class_method_signature": "CommonCodegenUtils.getFilteredKiePMMLNameValueExpression(final String kiePMMLNameValueListParam,\n                                                                       final String fieldNameToRef,\n                                                                       boolean stringLiteralComparison)", "testcase": false, "constructor": false}, {"identifier": "addMapPopulation", "parameters": "(final Map<String, MethodDeclaration> toAdd,\n                                        final BlockStmt body,\n                                        final String mapName)", "modifiers": "public static", "return": "void", "signature": "void addMapPopulation(final Map<String, MethodDeclaration> toAdd,\n                                        final BlockStmt body,\n                                        final String mapName)", "full_signature": "public static void addMapPopulation(final Map<String, MethodDeclaration> toAdd,\n                                        final BlockStmt body,\n                                        final String mapName)", "class_method_signature": "CommonCodegenUtils.addMapPopulation(final Map<String, MethodDeclaration> toAdd,\n                                        final BlockStmt body,\n                                        final String mapName)", "testcase": false, "constructor": false}, {"identifier": "getMethodDeclaration", "parameters": "(final String methodName,\n                                                         final Map<String, ClassOrInterfaceType> parameterNameTypeMap)", "modifiers": "public static", "return": "MethodDeclaration", "signature": "MethodDeclaration getMethodDeclaration(final String methodName,\n                                                         final Map<String, ClassOrInterfaceType> parameterNameTypeMap)", "full_signature": "public static MethodDeclaration getMethodDeclaration(final String methodName,\n                                                         final Map<String, ClassOrInterfaceType> parameterNameTypeMap)", "class_method_signature": "CommonCodegenUtils.getMethodDeclaration(final String methodName,\n                                                         final Map<String, ClassOrInterfaceType> parameterNameTypeMap)", "testcase": false, "constructor": false}, {"identifier": "getMethodDeclaration", "parameters": "(final String methodName)", "modifiers": "public static", "return": "MethodDeclaration", "signature": "MethodDeclaration getMethodDeclaration(final String methodName)", "full_signature": "public static MethodDeclaration getMethodDeclaration(final String methodName)", "class_method_signature": "CommonCodegenUtils.getMethodDeclaration(final String methodName)", "testcase": false, "constructor": false}, {"identifier": "getReturnStmt", "parameters": "(final String returnedVariableName)", "modifiers": "public static", "return": "ReturnStmt", "signature": "ReturnStmt getReturnStmt(final String returnedVariableName)", "full_signature": "public static ReturnStmt getReturnStmt(final String returnedVariableName)", "class_method_signature": "CommonCodegenUtils.getReturnStmt(final String returnedVariableName)", "testcase": false, "constructor": false}, {"identifier": "getTypedClassOrInterfaceType", "parameters": "(final String className,\n                                                                    final List<String> typesName )", "modifiers": "public static", "return": "ClassOrInterfaceType", "signature": "ClassOrInterfaceType getTypedClassOrInterfaceType(final String className,\n                                                                    final List<String> typesName )", "full_signature": "public static ClassOrInterfaceType getTypedClassOrInterfaceType(final String className,\n                                                                    final List<String> typesName )", "class_method_signature": "CommonCodegenUtils.getTypedClassOrInterfaceType(final String className,\n                                                                    final List<String> typesName )", "testcase": false, "constructor": false}, {"identifier": "setAssignExpressionValue", "parameters": "( final BlockStmt body, final String assignExpressionName, final Expression value)", "modifiers": "public static", "return": "void", "signature": "void setAssignExpressionValue( final BlockStmt body, final String assignExpressionName, final Expression value)", "full_signature": "public static void setAssignExpressionValue( final BlockStmt body, final String assignExpressionName, final Expression value)", "class_method_signature": "CommonCodegenUtils.setAssignExpressionValue( final BlockStmt body, final String assignExpressionName, final Expression value)", "testcase": false, "constructor": false}, {"identifier": "getAssignExpression", "parameters": "(final BlockStmt body, final String assignExpressionName)", "modifiers": "public static", "return": "Optional<AssignExpr>", "signature": "Optional<AssignExpr> getAssignExpression(final BlockStmt body, final String assignExpressionName)", "full_signature": "public static Optional<AssignExpr> getAssignExpression(final BlockStmt body, final String assignExpressionName)", "class_method_signature": "CommonCodegenUtils.getAssignExpression(final BlockStmt body, final String assignExpressionName)", "testcase": false, "constructor": false}, {"identifier": "getExplicitConstructorInvocationStmt", "parameters": "(final BlockStmt body)", "modifiers": "public static", "return": "Optional<ExplicitConstructorInvocationStmt>", "signature": "Optional<ExplicitConstructorInvocationStmt> getExplicitConstructorInvocationStmt(final BlockStmt body)", "full_signature": "public static Optional<ExplicitConstructorInvocationStmt> getExplicitConstructorInvocationStmt(final BlockStmt body)", "class_method_signature": "CommonCodegenUtils.getExplicitConstructorInvocationStmt(final BlockStmt body)", "testcase": false, "constructor": false}, {"identifier": "setExplicitConstructorInvocationArgument", "parameters": "(final ExplicitConstructorInvocationStmt constructorInvocationStmt, final String parameterName, final String value)", "modifiers": "public static", "return": "void", "signature": "void setExplicitConstructorInvocationArgument(final ExplicitConstructorInvocationStmt constructorInvocationStmt, final String parameterName, final String value)", "full_signature": "public static void setExplicitConstructorInvocationArgument(final ExplicitConstructorInvocationStmt constructorInvocationStmt, final String parameterName, final String value)", "class_method_signature": "CommonCodegenUtils.setExplicitConstructorInvocationArgument(final ExplicitConstructorInvocationStmt constructorInvocationStmt, final String parameterName, final String value)", "testcase": false, "constructor": false}, {"identifier": "getExplicitConstructorInvocationParameter", "parameters": "(final ExplicitConstructorInvocationStmt constructorInvocationStmt, final String parameterName)", "modifiers": "public static", "return": "Optional<NameExpr>", "signature": "Optional<NameExpr> getExplicitConstructorInvocationParameter(final ExplicitConstructorInvocationStmt constructorInvocationStmt, final String parameterName)", "full_signature": "public static Optional<NameExpr> getExplicitConstructorInvocationParameter(final ExplicitConstructorInvocationStmt constructorInvocationStmt, final String parameterName)", "class_method_signature": "CommonCodegenUtils.getExplicitConstructorInvocationParameter(final ExplicitConstructorInvocationStmt constructorInvocationStmt, final String parameterName)", "testcase": false, "constructor": false}, {"identifier": "getMethodDeclaration", "parameters": "(final ClassOrInterfaceDeclaration classOrInterfaceDeclaration, final String methodName)", "modifiers": "public static", "return": "Optional<MethodDeclaration>", "signature": "Optional<MethodDeclaration> getMethodDeclaration(final ClassOrInterfaceDeclaration classOrInterfaceDeclaration, final String methodName)", "full_signature": "public static Optional<MethodDeclaration> getMethodDeclaration(final ClassOrInterfaceDeclaration classOrInterfaceDeclaration, final String methodName)", "class_method_signature": "CommonCodegenUtils.getMethodDeclaration(final ClassOrInterfaceDeclaration classOrInterfaceDeclaration, final String methodName)", "testcase": false, "constructor": false}, {"identifier": "addMethod", "parameters": "(final MethodDeclaration methodTemplate,\n                                                 final ClassOrInterfaceDeclaration tableTemplate,\n                                                 final String methodName)", "modifiers": "public static", "return": "MethodDeclaration", "signature": "MethodDeclaration addMethod(final MethodDeclaration methodTemplate,\n                                                 final ClassOrInterfaceDeclaration tableTemplate,\n                                                 final String methodName)", "full_signature": "public static MethodDeclaration addMethod(final MethodDeclaration methodTemplate,\n                                                 final ClassOrInterfaceDeclaration tableTemplate,\n                                                 final String methodName)", "class_method_signature": "CommonCodegenUtils.addMethod(final MethodDeclaration methodTemplate,\n                                                 final ClassOrInterfaceDeclaration tableTemplate,\n                                                 final String methodName)", "testcase": false, "constructor": false}, {"identifier": "getVariableDeclarator", "parameters": "(final BlockStmt body, final String variableName)", "modifiers": "public static", "return": "Optional<VariableDeclarator>", "signature": "Optional<VariableDeclarator> getVariableDeclarator(final BlockStmt body, final String variableName)", "full_signature": "public static Optional<VariableDeclarator> getVariableDeclarator(final BlockStmt body, final String variableName)", "class_method_signature": "CommonCodegenUtils.getVariableDeclarator(final BlockStmt body, final String variableName)", "testcase": false, "constructor": false}], "file": "kie-pmml-trusty/kie-pmml-compiler/kie-pmml-compiler-commons/src/main/java/org/kie/pmml/compiler/commons/utils/CommonCodegenUtils.java"}, "focal_method": {"identifier": "addMapPopulation", "parameters": "(final Map<String, MethodDeclaration> toAdd,\n                                        final BlockStmt body,\n                                        final String mapName)", "modifiers": "public static", "return": "void", "body": "public static void addMapPopulation(final Map<String, MethodDeclaration> toAdd,\n                                        final BlockStmt body,\n                                        final String mapName) {\n        toAdd.forEach((s, methodDeclaration) -> {\n            MethodReferenceExpr methodReferenceExpr = new MethodReferenceExpr();\n            methodReferenceExpr.setScope(new ThisExpr());\n            methodReferenceExpr.setIdentifier(methodDeclaration.getNameAsString());\n            NodeList<Expression> expressions = NodeList.nodeList(new StringLiteralExpr(s), methodReferenceExpr);\n            body.addStatement(new MethodCallExpr(new NameExpr(mapName), \"put\", expressions));\n        });\n    }", "signature": "void addMapPopulation(final Map<String, MethodDeclaration> toAdd,\n                                        final BlockStmt body,\n                                        final String mapName)", "full_signature": "public static void addMapPopulation(final Map<String, MethodDeclaration> toAdd,\n                                        final BlockStmt body,\n                                        final String mapName)", "class_method_signature": "CommonCodegenUtils.addMapPopulation(final Map<String, MethodDeclaration> toAdd,\n                                        final BlockStmt body,\n                                        final String mapName)", "testcase": false, "constructor": false, "invocations": ["forEach", "setScope", "setIdentifier", "getNameAsString", "nodeList", "addStatement"]}, "repository": {"repo_id": 1381673, "url": "https://github.com/kiegroup/drools", "stars": 2733, "created": "2/18/2011 8:37:05 AM +00:00", "updates": "2020-01-27T13:12:15+00:00", "fork": "False", "license": "licensed"}}