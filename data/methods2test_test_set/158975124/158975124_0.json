{"test_class": {"identifier": "TsFileSerDeTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private TsFileSerDe tsFileSerDer;", "modifier": "private", "type": "TsFileSerDe", "declarator": "tsFileSerDer", "var_name": "tsFileSerDer"}, {"original_string": "private List<String> columnNames;", "modifier": "private", "type": "List<String>", "declarator": "columnNames", "var_name": "columnNames"}, {"original_string": "private List<TypeInfo> columnTypes;", "modifier": "private", "type": "List<TypeInfo>", "declarator": "columnTypes", "var_name": "columnTypes"}, {"original_string": "private JobConf job;", "modifier": "private", "type": "JobConf", "declarator": "job", "var_name": "job"}, {"original_string": "private Properties tbl;", "modifier": "private", "type": "Properties", "declarator": "tbl", "var_name": "tbl"}], "file": "hive-connector/src/test/java/org/apache/iotdb/hive/TsFileSerDeTest.java"}, "test_case": {"identifier": "testDeserialize", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n  public void testDeserialize() {\n    try {\n      tsFileSerDer.initialize(job, tbl);\n    } catch (SerDeException e) {\n      e.printStackTrace();\n      fail();\n    }\n    assertEquals(PrimitiveObjectInspector.PrimitiveCategory.LONG, ((PrimitiveTypeInfo)columnTypes.get(0)).getPrimitiveCategory());\n\n    Writable worryWritable1 = new Text();\n    try {\n      tsFileSerDer.deserialize(worryWritable1);\n      fail(\"Expect a TsFileSerDeException to be thrown!\");\n    } catch (SerDeException e) {\n      assertEquals(\"Expecting a MapWritable\", e.getMessage());\n    }\n\n    MapWritable worryWritable2 = new MapWritable();\n    worryWritable2.put(new Text(\"device_id\"), new Text(\"device_2\"));\n    worryWritable2.put(new Text(\"time_stamp\"), new LongWritable(1L));\n    worryWritable2.put(new Text(\"sensor_1\"), new LongWritable(1L));\n    try {\n      assertNull(tsFileSerDer.deserialize(worryWritable2));\n    } catch (SerDeException e) {\n      fail(\"Don't expect a TsFileSerDeException to be Thrown!\");\n    }\n\n    MapWritable worryWritable3 = new MapWritable();\n    worryWritable3.put(new Text(\"device_id\"), new Text(\"device_1\"));\n    worryWritable3.put(new Text(\"time_stamp\"), new LongWritable(1L));\n    worryWritable3.put(new Text(\"sensor_1\"), new IntWritable(1));\n    try {\n      tsFileSerDer.deserialize(worryWritable3);\n      fail(\"Expect a TsFileSerDeException to be thrown!\");\n    } catch (SerDeException e) {\n      assertEquals(\"Unexpected data type: \"\n                      + worryWritable3.get(new Text(\"sensor_1\")).getClass().getName()\n                      + \" for Date TypeInfo: \"\n                      + PrimitiveObjectInspector.PrimitiveCategory.LONG,\n              e.getMessage());\n    }\n\n    MapWritable writable = new MapWritable();\n    writable.put(new Text(\"device_id\"), new Text(\"device_1\"));\n    writable.put(new Text(\"time_stamp\"), new LongWritable(1L));\n    writable.put(new Text(\"sensor_1\"), new LongWritable(1000000L));\n    try {\n      Object result = tsFileSerDer.deserialize(writable);\n      assertTrue(result instanceof List);\n      List<Object> row = (List<Object>) result;\n      assertEquals(columnNames.size(), row.size());\n      assertEquals(1L, row.get(0));\n      assertEquals(1000000L, row.get(1));\n    } catch (SerDeException e) {\n      fail(\"Don't expect a TsFileSerDeException to be Thrown!\");\n    }\n\n  }", "signature": "void testDeserialize()", "full_signature": "@Test public void testDeserialize()", "class_method_signature": "TsFileSerDeTest.testDeserialize()", "testcase": true, "constructor": false, "invocations": ["initialize", "printStackTrace", "fail", "assertEquals", "getPrimitiveCategory", "get", "deserialize", "fail", "assertEquals", "getMessage", "put", "put", "put", "assertNull", "deserialize", "fail", "put", "put", "put", "deserialize", "fail", "assertEquals", "getName", "getClass", "get", "getMessage", "put", "put", "put", "deserialize", "assertTrue", "assertEquals", "size", "size", "assertEquals", "get", "assertEquals", "get", "fail"]}, "focal_class": {"identifier": "TsFileSerDe", "superclass": "extends AbstractSerDe", "interfaces": "", "fields": [{"original_string": "private static final Logger logger = LoggerFactory.getLogger(TsFileSerDe.class);", "modifier": "private static final", "type": "Logger", "declarator": "logger = LoggerFactory.getLogger(TsFileSerDe.class)", "var_name": "logger"}, {"original_string": "public static final String DEVICE_ID = \"device_id\";", "modifier": "public static final", "type": "String", "declarator": "DEVICE_ID = \"device_id\"", "var_name": "DEVICE_ID"}, {"original_string": "private List<String> columnNames;", "modifier": "private", "type": "List<String>", "declarator": "columnNames", "var_name": "columnNames"}, {"original_string": "private List<TypeInfo> columnTypes;", "modifier": "private", "type": "List<TypeInfo>", "declarator": "columnTypes", "var_name": "columnTypes"}, {"original_string": "private TsFileDeserializer tsFileDeserializer = null;", "modifier": "private", "type": "TsFileDeserializer", "declarator": "tsFileDeserializer = null", "var_name": "tsFileDeserializer"}, {"original_string": "private ObjectInspector oi;", "modifier": "private", "type": "ObjectInspector", "declarator": "oi", "var_name": "oi"}, {"original_string": "private String deviceId;", "modifier": "private", "type": "String", "declarator": "deviceId", "var_name": "deviceId"}], "methods": [{"identifier": "initialize", "parameters": "(@Nullable Configuration conf, Properties tbl)", "modifiers": "@Override public", "return": "void", "signature": "void initialize(@Nullable Configuration conf, Properties tbl)", "full_signature": "@Override public void initialize(@Nullable Configuration conf, Properties tbl)", "class_method_signature": "TsFileSerDe.initialize(@Nullable Configuration conf, Properties tbl)", "testcase": false, "constructor": false}, {"identifier": "getSerializedClass", "parameters": "()", "modifiers": "@Override public", "return": "Class<? extends Writable>", "signature": "Class<? extends Writable> getSerializedClass()", "full_signature": "@Override public Class<? extends Writable> getSerializedClass()", "class_method_signature": "TsFileSerDe.getSerializedClass()", "testcase": false, "constructor": false}, {"identifier": "serialize", "parameters": "(Object obj, ObjectInspector objInspector)", "modifiers": "@Override public", "return": "Writable", "signature": "Writable serialize(Object obj, ObjectInspector objInspector)", "full_signature": "@Override public Writable serialize(Object obj, ObjectInspector objInspector)", "class_method_signature": "TsFileSerDe.serialize(Object obj, ObjectInspector objInspector)", "testcase": false, "constructor": false}, {"identifier": "getSerDeStats", "parameters": "()", "modifiers": "@Override public", "return": "SerDeStats", "signature": "SerDeStats getSerDeStats()", "full_signature": "@Override public SerDeStats getSerDeStats()", "class_method_signature": "TsFileSerDe.getSerDeStats()", "testcase": false, "constructor": false}, {"identifier": "deserialize", "parameters": "(Writable blob)", "modifiers": "@Override public", "return": "Object", "signature": "Object deserialize(Writable blob)", "full_signature": "@Override public Object deserialize(Writable blob)", "class_method_signature": "TsFileSerDe.deserialize(Writable blob)", "testcase": false, "constructor": false}, {"identifier": "getObjectInspector", "parameters": "()", "modifiers": "@Override public", "return": "ObjectInspector", "signature": "ObjectInspector getObjectInspector()", "full_signature": "@Override public ObjectInspector getObjectInspector()", "class_method_signature": "TsFileSerDe.getObjectInspector()", "testcase": false, "constructor": false}, {"identifier": "createObjectInspector", "parameters": "()", "modifiers": "private", "return": "ObjectInspector", "signature": "ObjectInspector createObjectInspector()", "full_signature": "private ObjectInspector createObjectInspector()", "class_method_signature": "TsFileSerDe.createObjectInspector()", "testcase": false, "constructor": false}, {"identifier": "createObjectInspectorWorker", "parameters": "(TypeInfo ti)", "modifiers": "private", "return": "ObjectInspector", "signature": "ObjectInspector createObjectInspectorWorker(TypeInfo ti)", "full_signature": "private ObjectInspector createObjectInspectorWorker(TypeInfo ti)", "class_method_signature": "TsFileSerDe.createObjectInspectorWorker(TypeInfo ti)", "testcase": false, "constructor": false}, {"identifier": "supportedCategories", "parameters": "(TypeInfo ti)", "modifiers": "private", "return": "boolean", "signature": "boolean supportedCategories(TypeInfo ti)", "full_signature": "private boolean supportedCategories(TypeInfo ti)", "class_method_signature": "TsFileSerDe.supportedCategories(TypeInfo ti)", "testcase": false, "constructor": false}, {"identifier": "getDeserializer", "parameters": "()", "modifiers": "private", "return": "TsFileDeserializer", "signature": "TsFileDeserializer getDeserializer()", "full_signature": "private TsFileDeserializer getDeserializer()", "class_method_signature": "TsFileSerDe.getDeserializer()", "testcase": false, "constructor": false}], "file": "hive-connector/src/main/java/org/apache/iotdb/hive/TsFileSerDe.java"}, "focal_method": {"identifier": "deserialize", "parameters": "(Writable blob)", "modifiers": "@Override public", "return": "Object", "body": "@Override\n  public Object deserialize(Writable blob) throws SerDeException {\n    return getDeserializer().deserialize(columnNames, columnTypes, blob, deviceId);\n  }", "signature": "Object deserialize(Writable blob)", "full_signature": "@Override public Object deserialize(Writable blob)", "class_method_signature": "TsFileSerDe.deserialize(Writable blob)", "testcase": false, "constructor": false, "invocations": ["deserialize", "getDeserializer"]}, "repository": {"repo_id": 158975124, "url": "https://github.com/apache/incubator-iotdb", "stars": 449, "created": "11/24/2018 9:29:17 PM +00:00", "updates": "2020-01-21T08:10:15+00:00", "fork": "False", "license": "licensed"}}