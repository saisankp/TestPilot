{"test_class": {"identifier": "AggregatingLocalMasterReadinessResolverTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private final TitusRuntime titusRuntime = TitusRuntimes.internal();", "modifier": "private final", "type": "TitusRuntime", "declarator": "titusRuntime = TitusRuntimes.internal()", "var_name": "titusRuntime"}, {"original_string": "private final LocalMasterReadinessResolver delegate1 = Mockito.mock(LocalMasterReadinessResolver.class);", "modifier": "private final", "type": "LocalMasterReadinessResolver", "declarator": "delegate1 = Mockito.mock(LocalMasterReadinessResolver.class)", "var_name": "delegate1"}, {"original_string": "private final LocalMasterReadinessResolver delegate2 = Mockito.mock(LocalMasterReadinessResolver.class);", "modifier": "private final", "type": "LocalMasterReadinessResolver", "declarator": "delegate2 = Mockito.mock(LocalMasterReadinessResolver.class)", "var_name": "delegate2"}, {"original_string": "private final EmitterProcessor<ReadinessStatus> delegate1Processor = EmitterProcessor.create(1);", "modifier": "private final", "type": "EmitterProcessor<ReadinessStatus>", "declarator": "delegate1Processor = EmitterProcessor.create(1)", "var_name": "delegate1Processor"}, {"original_string": "private final EmitterProcessor<ReadinessStatus> delegate2Processor = EmitterProcessor.create(1);", "modifier": "private final", "type": "EmitterProcessor<ReadinessStatus>", "declarator": "delegate2Processor = EmitterProcessor.create(1)", "var_name": "delegate2Processor"}, {"original_string": "private AggregatingLocalMasterReadinessResolver resolver;", "modifier": "private", "type": "AggregatingLocalMasterReadinessResolver", "declarator": "resolver", "var_name": "resolver"}], "file": "titus-api/src/test/java/com/netflix/titus/api/supervisor/service/resolver/AggregatingLocalMasterReadinessResolverTest.java"}, "test_case": {"identifier": "testAggregation", "parameters": "()", "modifiers": "@Test(timeout = 30_000) public", "return": "void", "body": "@Test(timeout = 30_000)\n    public void testAggregation() {\n        Iterator<ReadinessStatus> it = resolver.observeLocalMasterReadinessUpdates().toIterable().iterator();\n\n        // Enabled + Disabled == Disabled\n        delegate1Processor.onNext(newStatus(ReadinessState.Enabled));\n        delegate2Processor.onNext(newStatus(ReadinessState.Disabled));\n        Assertions.assertThat(it.next().getState()).isEqualTo(ReadinessState.Disabled);\n\n        // Enabled + Enabled == Enabled\n        delegate2Processor.onNext(newStatus(ReadinessState.Enabled));\n        Assertions.assertThat(it.next().getState()).isEqualTo(ReadinessState.Enabled);\n\n        // Disabled + Enabled == Disabled\n        delegate1Processor.onNext(newStatus(ReadinessState.Disabled));\n        Assertions.assertThat(it.next().getState()).isEqualTo(ReadinessState.Disabled);\n    }", "signature": "void testAggregation()", "full_signature": "@Test(timeout = 30_000) public void testAggregation()", "class_method_signature": "AggregatingLocalMasterReadinessResolverTest.testAggregation()", "testcase": true, "constructor": false, "invocations": ["iterator", "toIterable", "observeLocalMasterReadinessUpdates", "onNext", "newStatus", "onNext", "newStatus", "isEqualTo", "assertThat", "getState", "next", "onNext", "newStatus", "isEqualTo", "assertThat", "getState", "next", "onNext", "newStatus", "isEqualTo", "assertThat", "getState", "next"]}, "focal_class": {"identifier": "AggregatingLocalMasterReadinessResolver", "superclass": "", "interfaces": "implements LocalMasterReadinessResolver", "fields": [{"original_string": "private final Flux<ReadinessStatus> stream;", "modifier": "private final", "type": "Flux<ReadinessStatus>", "declarator": "stream", "var_name": "stream"}, {"original_string": "private final Clock clock;", "modifier": "private final", "type": "Clock", "declarator": "clock", "var_name": "clock"}], "methods": [{"identifier": "AggregatingLocalMasterReadinessResolver", "parameters": "(List<LocalMasterReadinessResolver> delegates, TitusRuntime titusRuntime)", "modifiers": "public", "return": "", "signature": " AggregatingLocalMasterReadinessResolver(List<LocalMasterReadinessResolver> delegates, TitusRuntime titusRuntime)", "full_signature": "public  AggregatingLocalMasterReadinessResolver(List<LocalMasterReadinessResolver> delegates, TitusRuntime titusRuntime)", "class_method_signature": "AggregatingLocalMasterReadinessResolver.AggregatingLocalMasterReadinessResolver(List<LocalMasterReadinessResolver> delegates, TitusRuntime titusRuntime)", "testcase": false, "constructor": true}, {"identifier": "observeLocalMasterReadinessUpdates", "parameters": "()", "modifiers": "@Override public", "return": "Flux<ReadinessStatus>", "signature": "Flux<ReadinessStatus> observeLocalMasterReadinessUpdates()", "full_signature": "@Override public Flux<ReadinessStatus> observeLocalMasterReadinessUpdates()", "class_method_signature": "AggregatingLocalMasterReadinessResolver.observeLocalMasterReadinessUpdates()", "testcase": false, "constructor": false}, {"identifier": "combine", "parameters": "(Object[] values)", "modifiers": "private", "return": "ReadinessStatus", "signature": "ReadinessStatus combine(Object[] values)", "full_signature": "private ReadinessStatus combine(Object[] values)", "class_method_signature": "AggregatingLocalMasterReadinessResolver.combine(Object[] values)", "testcase": false, "constructor": false}], "file": "titus-api/src/main/java/com/netflix/titus/api/supervisor/service/resolver/AggregatingLocalMasterReadinessResolver.java"}, "focal_method": {"identifier": "observeLocalMasterReadinessUpdates", "parameters": "()", "modifiers": "@Override public", "return": "Flux<ReadinessStatus>", "body": "@Override\n    public Flux<ReadinessStatus> observeLocalMasterReadinessUpdates() {\n        return stream;\n    }", "signature": "Flux<ReadinessStatus> observeLocalMasterReadinessUpdates()", "full_signature": "@Override public Flux<ReadinessStatus> observeLocalMasterReadinessUpdates()", "class_method_signature": "AggregatingLocalMasterReadinessResolver.observeLocalMasterReadinessUpdates()", "testcase": false, "constructor": false, "invocations": []}, "repository": {"repo_id": 107330274, "url": "https://github.com/Netflix/titus-control-plane", "stars": 241, "created": "10/17/2017 10:20:55 PM +00:00", "updates": "2020-01-25T13:01:05+00:00", "fork": "False", "license": "licensed"}}