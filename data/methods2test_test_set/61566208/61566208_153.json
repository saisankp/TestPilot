{"test_class": {"identifier": "ComponentEventRestServiceTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static Logger logger = LoggerFactory.getLogger( ComponentEventRestServiceTest.class );", "modifier": "private static", "type": "Logger", "declarator": "logger = LoggerFactory.getLogger( ComponentEventRestServiceTest.class )", "var_name": "logger"}, {"original_string": "private ConnectorStatistics connectorStatistics;", "modifier": "private", "type": "ConnectorStatistics", "declarator": "connectorStatistics", "var_name": "connectorStatistics"}, {"original_string": "private Server server;", "modifier": "private", "type": "Server", "declarator": "server", "var_name": "server"}], "file": "modules/hms-core/src/test/java/com/vmware/vrack/hms/rest/services/ComponentEventRestServiceTest.java"}, "test_case": {"identifier": "getComponentEvents_monitor_HMS_On_STARTED", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void getComponentEvents_monitor_HMS_On_STARTED()\n        throws Exception\n    {\n        insertNodeInNodeMap( getServerNode() );\n        addBoardServiceForNode();\n\n        server = initMocks( AbstractLifeCycle.STARTED );\n\n        ComponentEventRestService restService = new ComponentEventRestService();\n        List<Event> hmsEvents = restService.getComponentEvents();\n        assertNotNull( hmsEvents );\n        assertTrue( hmsEvents.size() > 0 );\n        Event event = hmsEvents.get( 0 );\n        assertNotNull( event );\n        Header header = event.getHeader();\n        assertEquals( \"HMS\", header.getAgent() );\n        assertEquals( \"HMS_AGENT_UP\", header.getEventName().name() );\n        assertEquals( \"NORMAL\", header.getEventType().name() );\n        assertEquals( \"[MANAGEMENT, SOFTWARE]\", header.getEventCategoryList().toString() );\n        assertEquals( \"INFORMATIONAL\", header.getSeverity().name() );\n        // assertEquals(\"?\", header.getComponentIdentifier());\n\n        Body body = event.getBody();\n        Map<String, String> data = body.getData();\n        assertEquals( \"DISCRETE\", data.get( \"unit\" ) );\n        assertEquals( \"HMS_OOBAGENT_STATUS\", data.get( \"eventId\" ) );\n        assertEquals( \"HMS Agent is up\", data.get( \"value\" ) );\n        // assertEquals(\"Hms Agent is Up\", data.get(\"value\"));\n        assertEquals( \"HMS_AGENT_UP\", data.get( \"eventName\" ) );\n        assertEquals( \"HMS Agent is up - rack {RACK_NAME}\", body.getDescription() );\n\n        resetMocks( server );\n\n    }", "signature": "void getComponentEvents_monitor_HMS_On_STARTED()", "full_signature": "@Test public void getComponentEvents_monitor_HMS_On_STARTED()", "class_method_signature": "ComponentEventRestServiceTest.getComponentEvents_monitor_HMS_On_STARTED()", "testcase": true, "constructor": false, "invocations": ["insertNodeInNodeMap", "getServerNode", "addBoardServiceForNode", "initMocks", "getComponentEvents", "assertNotNull", "assertTrue", "size", "get", "assertNotNull", "getHeader", "assertEquals", "getAgent", "assertEquals", "name", "getEventName", "assertEquals", "name", "getEventType", "assertEquals", "toString", "getEventCategoryList", "assertEquals", "name", "getSeverity", "getBody", "getData", "assertEquals", "get", "assertEquals", "get", "assertEquals", "get", "assertEquals", "get", "assertEquals", "getDescription", "resetMocks"]}, "focal_class": {"identifier": "ComponentEventRestService", "superclass": "", "interfaces": "", "fields": [{"original_string": "private ServerNodeConnector serverConnector = ServerNodeConnector.getInstance();", "modifier": "private", "type": "ServerNodeConnector", "declarator": "serverConnector = ServerNodeConnector.getInstance()", "var_name": "serverConnector"}, {"original_string": "private SwitchNodeConnector switchConnector = SwitchNodeConnector.getInstance();", "modifier": "private", "type": "SwitchNodeConnector", "declarator": "switchConnector = SwitchNodeConnector.getInstance()", "var_name": "switchConnector"}, {"original_string": "private Logger logger = LoggerFactory.getLogger( ComponentEventRestService.class );", "modifier": "private", "type": "Logger", "declarator": "logger = LoggerFactory.getLogger( ComponentEventRestService.class )", "var_name": "logger"}], "methods": [{"identifier": "getComponnetEvents", "parameters": "( @PathParam( \"host_id\" ) String host_id,\n                                           @PathParam( \"event_source\" ) EventComponent event_source )", "modifiers": "@GET @Path( \"/host/{host_id}/{event_source}\" ) @Produces( \"application/json\" ) public", "return": "List<Event>", "signature": "List<Event> getComponnetEvents( @PathParam( \"host_id\" ) String host_id,\n                                           @PathParam( \"event_source\" ) EventComponent event_source )", "full_signature": "@GET @Path( \"/host/{host_id}/{event_source}\" ) @Produces( \"application/json\" ) public List<Event> getComponnetEvents( @PathParam( \"host_id\" ) String host_id,\n                                           @PathParam( \"event_source\" ) EventComponent event_source )", "class_method_signature": "ComponentEventRestService.getComponnetEvents( @PathParam( \"host_id\" ) String host_id,\n                                           @PathParam( \"event_source\" ) EventComponent event_source )", "testcase": false, "constructor": false}, {"identifier": "getComponnetNmeEvents", "parameters": "( @PathParam( \"host_id\" ) String host_id )", "modifiers": "@GET @Path( \"/host/nme/{host_id}\" ) @Produces( \"application/json\" ) public", "return": "List<Event>", "signature": "List<Event> getComponnetNmeEvents( @PathParam( \"host_id\" ) String host_id )", "full_signature": "@GET @Path( \"/host/nme/{host_id}\" ) @Produces( \"application/json\" ) public List<Event> getComponnetNmeEvents( @PathParam( \"host_id\" ) String host_id )", "class_method_signature": "ComponentEventRestService.getComponnetNmeEvents( @PathParam( \"host_id\" ) String host_id )", "testcase": false, "constructor": false}, {"identifier": "getComponentEvents", "parameters": "()", "modifiers": "@GET @Path( value = \"/host/HMS\" ) @Produces( \"application/json\" ) public", "return": "List<Event>", "signature": "List<Event> getComponentEvents()", "full_signature": "@GET @Path( value = \"/host/HMS\" ) @Produces( \"application/json\" ) public List<Event> getComponentEvents()", "class_method_signature": "ComponentEventRestService.getComponentEvents()", "testcase": false, "constructor": false}, {"identifier": "getSwitchComponentEvents", "parameters": "( @PathParam( \"switch_id\" ) String switchId,\n                                                 @PathParam( \"event_source\" ) EventComponent eventSource )", "modifiers": "@GET @Path( \"/switches/{switch_id}/{event_source}\" ) @Produces( \"application/json\" ) public", "return": "List<Event>", "signature": "List<Event> getSwitchComponentEvents( @PathParam( \"switch_id\" ) String switchId,\n                                                 @PathParam( \"event_source\" ) EventComponent eventSource )", "full_signature": "@GET @Path( \"/switches/{switch_id}/{event_source}\" ) @Produces( \"application/json\" ) public List<Event> getSwitchComponentEvents( @PathParam( \"switch_id\" ) String switchId,\n                                                 @PathParam( \"event_source\" ) EventComponent eventSource )", "class_method_signature": "ComponentEventRestService.getSwitchComponentEvents( @PathParam( \"switch_id\" ) String switchId,\n                                                 @PathParam( \"event_source\" ) EventComponent eventSource )", "testcase": false, "constructor": false}, {"identifier": "getSwitchComponentNmeEvents", "parameters": "( @PathParam( \"switch_id\" ) String switchId )", "modifiers": "@GET @Path( \"/switches/nme/{switch_id}\" ) @Produces( \"application/json\" ) public", "return": "List<Event>", "signature": "List<Event> getSwitchComponentNmeEvents( @PathParam( \"switch_id\" ) String switchId )", "full_signature": "@GET @Path( \"/switches/nme/{switch_id}\" ) @Produces( \"application/json\" ) public List<Event> getSwitchComponentNmeEvents( @PathParam( \"switch_id\" ) String switchId )", "class_method_signature": "ComponentEventRestService.getSwitchComponentNmeEvents( @PathParam( \"switch_id\" ) String switchId )", "testcase": false, "constructor": false}, {"identifier": "executeServerMonitorTask", "parameters": "( ServerNode node, ServerComponent component )", "modifiers": "private", "return": "void", "signature": "void executeServerMonitorTask( ServerNode node, ServerComponent component )", "full_signature": "private void executeServerMonitorTask( ServerNode node, ServerComponent component )", "class_method_signature": "ComponentEventRestService.executeServerMonitorTask( ServerNode node, ServerComponent component )", "testcase": false, "constructor": false}, {"identifier": "executeSwitchMonitorTask", "parameters": "( HmsNode node, SwitchComponentEnum component, SwitchRoleType switchrole )", "modifiers": "private", "return": "void", "signature": "void executeSwitchMonitorTask( HmsNode node, SwitchComponentEnum component, SwitchRoleType switchrole )", "full_signature": "private void executeSwitchMonitorTask( HmsNode node, SwitchComponentEnum component, SwitchRoleType switchrole )", "class_method_signature": "ComponentEventRestService.executeSwitchMonitorTask( HmsNode node, SwitchComponentEnum component, SwitchRoleType switchrole )", "testcase": false, "constructor": false}, {"identifier": "executeHealthMonitorTask", "parameters": "( ServerNode node, ServerComponent component )", "modifiers": "private", "return": "void", "signature": "void executeHealthMonitorTask( ServerNode node, ServerComponent component )", "full_signature": "private void executeHealthMonitorTask( ServerNode node, ServerComponent component )", "class_method_signature": "ComponentEventRestService.executeHealthMonitorTask( ServerNode node, ServerComponent component )", "testcase": false, "constructor": false}], "file": "modules/hms-core/src/main/java/com/vmware/vrack/hms/rest/services/ComponentEventRestService.java"}, "focal_method": {"identifier": "getComponentEvents", "parameters": "()", "modifiers": "@GET @Path( value = \"/host/HMS\" ) @Produces( \"application/json\" ) public", "return": "List<Event>", "body": "@GET\n    @Path( value = \"/host/HMS\" )\n    @Produces( \"application/json\" )\n    public List<Event> getComponentEvents()\n        throws HmsException\n    {\n\n        ServerNode node = ServerNodeConnector.getInstance().getApplicationNode();\n        try\n        {\n            executeHealthMonitorTask( node, ServerComponent.HMS );\n            List<Event> eventList = EventMonitoringSubscriptionHolder.getEventList( node, ServerComponent.HMS );\n            return eventList;\n        }\n        catch ( HmsException e )\n        {\n            throw new HMSRestException( Status.INTERNAL_SERVER_ERROR.getStatusCode(), \"Server Error\", e.getMessage() );\n        }\n        catch ( Exception e )\n        {\n            throw new HMSRestException( Status.INTERNAL_SERVER_ERROR.getStatusCode(), \"Server Error\", e.getMessage() );\n        }\n    }", "signature": "List<Event> getComponentEvents()", "full_signature": "@GET @Path( value = \"/host/HMS\" ) @Produces( \"application/json\" ) public List<Event> getComponentEvents()", "class_method_signature": "ComponentEventRestService.getComponentEvents()", "testcase": false, "constructor": false, "invocations": ["getApplicationNode", "getInstance", "executeHealthMonitorTask", "getEventList", "getStatusCode", "getMessage", "getStatusCode", "getMessage"]}, "repository": {"repo_id": 61566208, "url": "https://github.com/vmware-archive/OHMS", "language": "Java", "is_fork": false, "fork_count": 6, "stargazer_count": 14, "size": 16092, "license": "licensed"}}