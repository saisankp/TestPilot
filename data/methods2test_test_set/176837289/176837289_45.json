{"test_class": {"identifier": "SessionCacheFetcherTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final String GCS = \"https://www.googleapis.com/auth/devstorage.read_write\";", "modifier": "private static final", "type": "String", "declarator": "GCS = \"https://www.googleapis.com/auth/devstorage.read_write\"", "var_name": "GCS"}, {"original_string": "private static final String BIGQUERY = \"https://www.googleapis.com/auth/bigquery\";", "modifier": "private static final", "type": "String", "declarator": "BIGQUERY = \"https://www.googleapis.com/auth/bigquery\"", "var_name": "BIGQUERY"}, {"original_string": "private static final String ALICE = \"alice@EXAMPLE.COM\";", "modifier": "private static final", "type": "String", "declarator": "ALICE = \"alice@EXAMPLE.COM\"", "var_name": "ALICE"}, {"original_string": "private static final String MOCK_BUCKET = \"//storage.googleapis.com/projects/_/buckets/example\";", "modifier": "private static final", "type": "String", "declarator": "MOCK_BUCKET = \"//storage.googleapis.com/projects/_/buckets/example\"", "var_name": "MOCK_BUCKET"}, {"original_string": "private static final Long SESSION_RENEW_PERIOD = 80000000L;", "modifier": "private static final", "type": "Long", "declarator": "SESSION_RENEW_PERIOD = 80000000L", "var_name": "SESSION_RENEW_PERIOD"}, {"original_string": "private static final Long SESSION_MAXIMUM_LIFETIME = 80000000L;", "modifier": "private static final", "type": "Long", "declarator": "SESSION_MAXIMUM_LIFETIME = 80000000L", "var_name": "SESSION_MAXIMUM_LIFETIME"}, {"original_string": "@ClassRule\n    public static SettingsOverride settingsOverride = new SettingsOverride(Map.of(\n        AppSettings.SESSION_LOCAL_CACHE_TIME, \"1234\",\n        AppSettings.SESSION_RENEW_PERIOD, SESSION_RENEW_PERIOD.toString(),\n        AppSettings.SESSION_MAXIMUM_LIFETIME, SESSION_MAXIMUM_LIFETIME.toString(),\n        AppSettings.DATABASE_BACKEND, \"com.google.cloud.broker.database.backends.DummyDatabaseBackend\",\n        AppSettings.ENCRYPTION_BACKEND, \"com.google.cloud.broker.encryption.backends.DummyEncryptionBackend\"\n    ));", "modifier": "@ClassRule\n    public static", "type": "SettingsOverride", "declarator": "settingsOverride = new SettingsOverride(Map.of(\n        AppSettings.SESSION_LOCAL_CACHE_TIME, \"1234\",\n        AppSettings.SESSION_RENEW_PERIOD, SESSION_RENEW_PERIOD.toString(),\n        AppSettings.SESSION_MAXIMUM_LIFETIME, SESSION_MAXIMUM_LIFETIME.toString(),\n        AppSettings.DATABASE_BACKEND, \"com.google.cloud.broker.database.backends.DummyDatabaseBackend\",\n        AppSettings.ENCRYPTION_BACKEND, \"com.google.cloud.broker.encryption.backends.DummyEncryptionBackend\"\n    ))", "var_name": "settingsOverride"}], "file": "code/broker-server/src/test/java/com/google/cloud/broker/apps/brokerserver/sessions/SessionCacheFetcherTest.java"}, "test_case": {"identifier": "testFromJSON", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testFromJSON() {\n        SessionCacheFetcher fetcher = new SessionCacheFetcher(\"xxxx\");\n        String json = \"{\" +\n            \"\\\"id\\\": \\\"abcd\\\", \" +\n            \"\\\"creationTime\\\": 1000000000000, \" +\n            \"\\\"owner\\\": \\\"bob@EXAMPLE.COM\\\", \" +\n            \"\\\"renewer\\\": \\\"yarn@BAZ.NET\\\", \" +\n            \"\\\"scopes\\\": \\\"\" + BIGQUERY + \"\\\", \" +\n            \"\\\"target\\\": \\\"gs://blah\\\", \" +\n            \"\\\"expiresAt\\\": 2000000000000\" +\n        \"}\";\n        Session session;\n        try {\n            session = (Session) fetcher.fromJson(json);\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n        assertEquals(\"abcd\", session.getId());\n        assertEquals(1000000000000L, session.getCreationTime().longValue());\n        assertEquals(\"bob@EXAMPLE.COM\", session.getOwner());\n        assertEquals(\"yarn@BAZ.NET\", session.getRenewer());\n        assertEquals(BIGQUERY, session.getScopes());\n        assertEquals(\"gs://blah\", session.getTarget());\n        assertEquals(2000000000000L, session.getExpiresAt().longValue());\n    }", "signature": "void testFromJSON()", "full_signature": "@Test public void testFromJSON()", "class_method_signature": "SessionCacheFetcherTest.testFromJSON()", "testcase": true, "constructor": false, "invocations": ["fromJson", "assertEquals", "getId", "assertEquals", "longValue", "getCreationTime", "assertEquals", "getOwner", "assertEquals", "getRenewer", "assertEquals", "getScopes", "assertEquals", "getTarget", "assertEquals", "longValue", "getExpiresAt"]}, "focal_class": {"identifier": "SessionCacheFetcher", "superclass": "extends CacheFetcher", "interfaces": "", "fields": [{"original_string": "private String rawToken;", "modifier": "private", "type": "String", "declarator": "rawToken", "var_name": "rawToken"}], "methods": [{"identifier": "SessionCacheFetcher", "parameters": "(String rawToken)", "modifiers": "public", "return": "", "signature": " SessionCacheFetcher(String rawToken)", "full_signature": "public  SessionCacheFetcher(String rawToken)", "class_method_signature": "SessionCacheFetcher.SessionCacheFetcher(String rawToken)", "testcase": false, "constructor": true}, {"identifier": "getCacheKey", "parameters": "()", "modifiers": "@Override protected", "return": "String", "signature": "String getCacheKey()", "full_signature": "@Override protected String getCacheKey()", "class_method_signature": "SessionCacheFetcher.getCacheKey()", "testcase": false, "constructor": false}, {"identifier": "getLocalCacheTime", "parameters": "()", "modifiers": "@Override protected", "return": "int", "signature": "int getLocalCacheTime()", "full_signature": "@Override protected int getLocalCacheTime()", "class_method_signature": "SessionCacheFetcher.getLocalCacheTime()", "testcase": false, "constructor": false}, {"identifier": "getRemoteCacheTime", "parameters": "()", "modifiers": "@Override protected", "return": "int", "signature": "int getRemoteCacheTime()", "full_signature": "@Override protected int getRemoteCacheTime()", "class_method_signature": "SessionCacheFetcher.getRemoteCacheTime()", "testcase": false, "constructor": false}, {"identifier": "computeResult", "parameters": "()", "modifiers": "@Override protected", "return": "Object", "signature": "Object computeResult()", "full_signature": "@Override protected Object computeResult()", "class_method_signature": "SessionCacheFetcher.computeResult()", "testcase": false, "constructor": false}, {"identifier": "fromJson", "parameters": "(String json)", "modifiers": "@Override protected", "return": "Object", "signature": "Object fromJson(String json)", "full_signature": "@Override protected Object fromJson(String json)", "class_method_signature": "SessionCacheFetcher.fromJson(String json)", "testcase": false, "constructor": false}], "file": "code/broker-server/src/main/java/com/google/cloud/broker/apps/brokerserver/sessions/SessionCacheFetcher.java"}, "focal_method": {"identifier": "fromJson", "parameters": "(String json)", "modifiers": "@Override protected", "return": "Object", "body": "@Override\n    protected Object fromJson(String json) throws IOException {\n        ObjectMapper objectMapper = new ObjectMapper();\n        return objectMapper.readValue(json, Session.class);\n    }", "signature": "Object fromJson(String json)", "full_signature": "@Override protected Object fromJson(String json)", "class_method_signature": "SessionCacheFetcher.fromJson(String json)", "testcase": false, "constructor": false, "invocations": ["readValue"]}, "repository": {"repo_id": 176837289, "url": "https://github.com/GoogleCloudPlatform/gcp-token-broker", "language": "Java", "is_fork": false, "fork_count": 25, "stargazer_count": 27, "size": 1700, "license": "licensed"}}