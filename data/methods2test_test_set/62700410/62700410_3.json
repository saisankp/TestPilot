{"test_class": {"identifier": "TestImageLoader", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static long seed = 10;", "modifier": "private static", "type": "long", "declarator": "seed = 10", "var_name": "seed"}, {"original_string": "private static Random rng = new Random(seed);", "modifier": "private static", "type": "Random", "declarator": "rng = new Random(seed)", "var_name": "rng"}], "file": "datavec-data/datavec-data-image/src/test/java/org/datavec/image/loader/TestImageLoader.java"}, "test_case": {"identifier": "testToINDArrayBGR", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testToINDArrayBGR() throws Exception {\n        BufferedImage img = makeRandomBufferedImage(false);\n        int w = img.getWidth();\n        int h = img.getHeight();\n        int ch = 3;\n\n        ImageLoader loader = new ImageLoader(0, 0, ch);\n        INDArray arr = loader.toINDArrayBGR(img);\n\n        long[] shape = arr.shape();\n        assertEquals(3, shape.length);\n        assertEquals(ch, shape[0]);\n        assertEquals(h, shape[1]);\n        assertEquals(w, shape[2]);\n\n        for (int i = 0; i < h; ++i) {\n            for (int j = 0; j < w; ++j) {\n                int srcColor = img.getRGB(j, i);\n                int a = 0xff << 24;\n                int r = arr.getInt(2, i, j) << 16;\n                int g = arr.getInt(1, i, j) << 8;\n                int b = arr.getInt(0, i, j) & 0xff;\n                int dstColor = a | r | g | b;\n                assertEquals(srcColor, dstColor);\n            }\n        }\n    }", "signature": "void testToINDArrayBGR()", "full_signature": "@Test public void testToINDArrayBGR()", "class_method_signature": "TestImageLoader.testToINDArrayBGR()", "testcase": true, "constructor": false, "invocations": ["makeRandomBufferedImage", "getWidth", "getHeight", "toINDArrayBGR", "shape", "assertEquals", "assertEquals", "assertEquals", "assertEquals", "getRGB", "getInt", "getInt", "getInt", "assertEquals"]}, "focal_class": {"identifier": "ImageLoader", "superclass": "extends BaseImageLoader", "interfaces": "", "fields": [], "methods": [{"identifier": "ImageLoader", "parameters": "()", "modifiers": "public", "return": "", "signature": " ImageLoader()", "full_signature": "public  ImageLoader()", "class_method_signature": "ImageLoader.ImageLoader()", "testcase": false, "constructor": true}, {"identifier": "ImageLoader", "parameters": "(int height, int width)", "modifiers": "public", "return": "", "signature": " ImageLoader(int height, int width)", "full_signature": "public  ImageLoader(int height, int width)", "class_method_signature": "ImageLoader.ImageLoader(int height, int width)", "testcase": false, "constructor": true}, {"identifier": "ImageLoader", "parameters": "(int height, int width, int channels)", "modifiers": "public", "return": "", "signature": " ImageLoader(int height, int width, int channels)", "full_signature": "public  ImageLoader(int height, int width, int channels)", "class_method_signature": "ImageLoader.ImageLoader(int height, int width, int channels)", "testcase": false, "constructor": true}, {"identifier": "ImageLoader", "parameters": "(int height, int width, int channels, boolean centerCropIfNeeded)", "modifiers": "public", "return": "", "signature": " ImageLoader(int height, int width, int channels, boolean centerCropIfNeeded)", "full_signature": "public  ImageLoader(int height, int width, int channels, boolean centerCropIfNeeded)", "class_method_signature": "ImageLoader.ImageLoader(int height, int width, int channels, boolean centerCropIfNeeded)", "testcase": false, "constructor": true}, {"identifier": "asRowVector", "parameters": "(File f)", "modifiers": "public", "return": "INDArray", "signature": "INDArray asRowVector(File f)", "full_signature": "public INDArray asRowVector(File f)", "class_method_signature": "ImageLoader.asRowVector(File f)", "testcase": false, "constructor": false}, {"identifier": "asRowVector", "parameters": "(InputStream inputStream)", "modifiers": "public", "return": "INDArray", "signature": "INDArray asRowVector(InputStream inputStream)", "full_signature": "public INDArray asRowVector(InputStream inputStream)", "class_method_signature": "ImageLoader.asRowVector(InputStream inputStream)", "testcase": false, "constructor": false}, {"identifier": "asRowVector", "parameters": "(BufferedImage image)", "modifiers": "public", "return": "INDArray", "signature": "INDArray asRowVector(BufferedImage image)", "full_signature": "public INDArray asRowVector(BufferedImage image)", "class_method_signature": "ImageLoader.asRowVector(BufferedImage image)", "testcase": false, "constructor": false}, {"identifier": "toRaveledTensor", "parameters": "(File file)", "modifiers": "public", "return": "INDArray", "signature": "INDArray toRaveledTensor(File file)", "full_signature": "public INDArray toRaveledTensor(File file)", "class_method_signature": "ImageLoader.toRaveledTensor(File file)", "testcase": false, "constructor": false}, {"identifier": "toRaveledTensor", "parameters": "(InputStream is)", "modifiers": "public", "return": "INDArray", "signature": "INDArray toRaveledTensor(InputStream is)", "full_signature": "public INDArray toRaveledTensor(InputStream is)", "class_method_signature": "ImageLoader.toRaveledTensor(InputStream is)", "testcase": false, "constructor": false}, {"identifier": "toRaveledTensor", "parameters": "(BufferedImage image)", "modifiers": "public", "return": "INDArray", "signature": "INDArray toRaveledTensor(BufferedImage image)", "full_signature": "public INDArray toRaveledTensor(BufferedImage image)", "class_method_signature": "ImageLoader.toRaveledTensor(BufferedImage image)", "testcase": false, "constructor": false}, {"identifier": "toBgr", "parameters": "(File file)", "modifiers": "public", "return": "INDArray", "signature": "INDArray toBgr(File file)", "full_signature": "public INDArray toBgr(File file)", "class_method_signature": "ImageLoader.toBgr(File file)", "testcase": false, "constructor": false}, {"identifier": "toBgr", "parameters": "(InputStream inputStream)", "modifiers": "public", "return": "INDArray", "signature": "INDArray toBgr(InputStream inputStream)", "full_signature": "public INDArray toBgr(InputStream inputStream)", "class_method_signature": "ImageLoader.toBgr(InputStream inputStream)", "testcase": false, "constructor": false}, {"identifier": "toBgrImage", "parameters": "(InputStream inputStream)", "modifiers": "private", "return": "org.datavec.image.data.Image", "signature": "org.datavec.image.data.Image toBgrImage(InputStream inputStream)", "full_signature": "private org.datavec.image.data.Image toBgrImage(InputStream inputStream)", "class_method_signature": "ImageLoader.toBgrImage(InputStream inputStream)", "testcase": false, "constructor": false}, {"identifier": "toBgr", "parameters": "(BufferedImage image)", "modifiers": "public", "return": "INDArray", "signature": "INDArray toBgr(BufferedImage image)", "full_signature": "public INDArray toBgr(BufferedImage image)", "class_method_signature": "ImageLoader.toBgr(BufferedImage image)", "testcase": false, "constructor": false}, {"identifier": "asMatrix", "parameters": "(File f)", "modifiers": "public", "return": "INDArray", "signature": "INDArray asMatrix(File f)", "full_signature": "public INDArray asMatrix(File f)", "class_method_signature": "ImageLoader.asMatrix(File f)", "testcase": false, "constructor": false}, {"identifier": "asMatrix", "parameters": "(InputStream inputStream)", "modifiers": "public", "return": "INDArray", "signature": "INDArray asMatrix(InputStream inputStream)", "full_signature": "public INDArray asMatrix(InputStream inputStream)", "class_method_signature": "ImageLoader.asMatrix(InputStream inputStream)", "testcase": false, "constructor": false}, {"identifier": "asImageMatrix", "parameters": "(File f)", "modifiers": "@Override public", "return": "org.datavec.image.data.Image", "signature": "org.datavec.image.data.Image asImageMatrix(File f)", "full_signature": "@Override public org.datavec.image.data.Image asImageMatrix(File f)", "class_method_signature": "ImageLoader.asImageMatrix(File f)", "testcase": false, "constructor": false}, {"identifier": "asImageMatrix", "parameters": "(InputStream inputStream)", "modifiers": "@Override public", "return": "org.datavec.image.data.Image", "signature": "org.datavec.image.data.Image asImageMatrix(InputStream inputStream)", "full_signature": "@Override public org.datavec.image.data.Image asImageMatrix(InputStream inputStream)", "class_method_signature": "ImageLoader.asImageMatrix(InputStream inputStream)", "testcase": false, "constructor": false}, {"identifier": "asMatrix", "parameters": "(BufferedImage image)", "modifiers": "public", "return": "INDArray", "signature": "INDArray asMatrix(BufferedImage image)", "full_signature": "public INDArray asMatrix(BufferedImage image)", "class_method_signature": "ImageLoader.asMatrix(BufferedImage image)", "testcase": false, "constructor": false}, {"identifier": "asImageMiniBatches", "parameters": "(File f, int numMiniBatches, int numRowsPerSlice)", "modifiers": "public", "return": "INDArray", "signature": "INDArray asImageMiniBatches(File f, int numMiniBatches, int numRowsPerSlice)", "full_signature": "public INDArray asImageMiniBatches(File f, int numMiniBatches, int numRowsPerSlice)", "class_method_signature": "ImageLoader.asImageMiniBatches(File f, int numMiniBatches, int numRowsPerSlice)", "testcase": false, "constructor": false}, {"identifier": "flattenedImageFromFile", "parameters": "(File f)", "modifiers": "public", "return": "int[]", "signature": "int[] flattenedImageFromFile(File f)", "full_signature": "public int[] flattenedImageFromFile(File f)", "class_method_signature": "ImageLoader.flattenedImageFromFile(File f)", "testcase": false, "constructor": false}, {"identifier": "fromFile", "parameters": "(File file)", "modifiers": "public", "return": "int[][]", "signature": "int[][] fromFile(File file)", "full_signature": "public int[][] fromFile(File file)", "class_method_signature": "ImageLoader.fromFile(File file)", "testcase": false, "constructor": false}, {"identifier": "fromFileMultipleChannels", "parameters": "(File file)", "modifiers": "public", "return": "int[][][]", "signature": "int[][][] fromFileMultipleChannels(File file)", "full_signature": "public int[][][] fromFileMultipleChannels(File file)", "class_method_signature": "ImageLoader.fromFileMultipleChannels(File file)", "testcase": false, "constructor": false}, {"identifier": "toImage", "parameters": "(INDArray matrix)", "modifiers": "public static", "return": "BufferedImage", "signature": "BufferedImage toImage(INDArray matrix)", "full_signature": "public static BufferedImage toImage(INDArray matrix)", "class_method_signature": "ImageLoader.toImage(INDArray matrix)", "testcase": false, "constructor": false}, {"identifier": "rasterData", "parameters": "(INDArray matrix)", "modifiers": "private static", "return": "int[]", "signature": "int[] rasterData(INDArray matrix)", "full_signature": "private static int[] rasterData(INDArray matrix)", "class_method_signature": "ImageLoader.rasterData(INDArray matrix)", "testcase": false, "constructor": false}, {"identifier": "toBufferedImageRGB", "parameters": "(INDArray arr, BufferedImage image)", "modifiers": "public", "return": "void", "signature": "void toBufferedImageRGB(INDArray arr, BufferedImage image)", "full_signature": "public void toBufferedImageRGB(INDArray arr, BufferedImage image)", "class_method_signature": "ImageLoader.toBufferedImageRGB(INDArray arr, BufferedImage image)", "testcase": false, "constructor": false}, {"identifier": "toBufferedImage", "parameters": "(Image img, int type)", "modifiers": "public static", "return": "BufferedImage", "signature": "BufferedImage toBufferedImage(Image img, int type)", "full_signature": "public static BufferedImage toBufferedImage(Image img, int type)", "class_method_signature": "ImageLoader.toBufferedImage(Image img, int type)", "testcase": false, "constructor": false}, {"identifier": "toIntArrayArray", "parameters": "(BufferedImage image)", "modifiers": "protected", "return": "int[][]", "signature": "int[][] toIntArrayArray(BufferedImage image)", "full_signature": "protected int[][] toIntArrayArray(BufferedImage image)", "class_method_signature": "ImageLoader.toIntArrayArray(BufferedImage image)", "testcase": false, "constructor": false}, {"identifier": "toINDArrayBGR", "parameters": "(BufferedImage image)", "modifiers": "protected", "return": "INDArray", "signature": "INDArray toINDArrayBGR(BufferedImage image)", "full_signature": "protected INDArray toINDArrayBGR(BufferedImage image)", "class_method_signature": "ImageLoader.toINDArrayBGR(BufferedImage image)", "testcase": false, "constructor": false}, {"identifier": "centerCropIfNeeded", "parameters": "(BufferedImage img)", "modifiers": "public", "return": "BufferedImage", "signature": "BufferedImage centerCropIfNeeded(BufferedImage img)", "full_signature": "public BufferedImage centerCropIfNeeded(BufferedImage img)", "class_method_signature": "ImageLoader.centerCropIfNeeded(BufferedImage img)", "testcase": false, "constructor": false}, {"identifier": "scalingIfNeed", "parameters": "(BufferedImage image, boolean needAlpha)", "modifiers": "protected", "return": "BufferedImage", "signature": "BufferedImage scalingIfNeed(BufferedImage image, boolean needAlpha)", "full_signature": "protected BufferedImage scalingIfNeed(BufferedImage image, boolean needAlpha)", "class_method_signature": "ImageLoader.scalingIfNeed(BufferedImage image, boolean needAlpha)", "testcase": false, "constructor": false}, {"identifier": "scalingIfNeed", "parameters": "(BufferedImage image, long dstHeight, long dstWidth, boolean needAlpha)", "modifiers": "protected", "return": "BufferedImage", "signature": "BufferedImage scalingIfNeed(BufferedImage image, long dstHeight, long dstWidth, boolean needAlpha)", "full_signature": "protected BufferedImage scalingIfNeed(BufferedImage image, long dstHeight, long dstWidth, boolean needAlpha)", "class_method_signature": "ImageLoader.scalingIfNeed(BufferedImage image, long dstHeight, long dstWidth, boolean needAlpha)", "testcase": false, "constructor": false}], "file": "datavec-data/datavec-data-image/src/main/java/org/datavec/image/loader/ImageLoader.java"}, "focal_method": {"identifier": "toINDArrayBGR", "parameters": "(BufferedImage image)", "modifiers": "protected", "return": "INDArray", "body": "protected INDArray toINDArrayBGR(BufferedImage image) {\n        int height = image.getHeight();\n        int width = image.getWidth();\n        int bands = image.getSampleModel().getNumBands();\n\n        byte[] pixels = ((DataBufferByte) image.getRaster().getDataBuffer()).getData();\n        int[] shape = new int[] {height, width, bands};\n\n        INDArray ret2 = Nd4j.create(1, pixels.length);\n        for (int i = 0; i < ret2.length(); i++) {\n            ret2.putScalar(i, ((int) pixels[i]) & 0xFF);\n        }\n        return ret2.reshape(shape).permute(2, 0, 1);\n    }", "signature": "INDArray toINDArrayBGR(BufferedImage image)", "full_signature": "protected INDArray toINDArrayBGR(BufferedImage image)", "class_method_signature": "ImageLoader.toINDArrayBGR(BufferedImage image)", "testcase": false, "constructor": false, "invocations": ["getHeight", "getWidth", "getNumBands", "getSampleModel", "getData", "getDataBuffer", "getRaster", "create", "length", "putScalar", "permute", "reshape"]}, "repository": {"repo_id": 62700410, "url": "https://github.com/deeplearning4j/DataVec", "language": "Java", "is_fork": false, "fork_count": 174, "stargazer_count": 260, "size": 39842, "license": "licensed"}}