{"test_class": {"identifier": "WebViewAdUrlGeneratorTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private WebViewAdUrlGenerator subject;", "modifier": "private", "type": "WebViewAdUrlGenerator", "declarator": "subject", "var_name": "subject"}, {"original_string": "private static final String TEST_UDID = \"20b013c721c\";", "modifier": "private static final", "type": "String", "declarator": "TEST_UDID = \"20b013c721c\"", "var_name": "TEST_UDID"}, {"original_string": "private String expectedUdid;", "modifier": "private", "type": "String", "declarator": "expectedUdid", "var_name": "expectedUdid"}, {"original_string": "private Configuration configuration;", "modifier": "private", "type": "Configuration", "declarator": "configuration", "var_name": "configuration"}, {"original_string": "private MoPubShadowTelephonyManager shadowTelephonyManager;", "modifier": "private", "type": "MoPubShadowTelephonyManager", "declarator": "shadowTelephonyManager", "var_name": "shadowTelephonyManager"}, {"original_string": "private ShadowConnectivityManager shadowConnectivityManager;", "modifier": "private", "type": "ShadowConnectivityManager", "declarator": "shadowConnectivityManager", "var_name": "shadowConnectivityManager"}, {"original_string": "private Activity context;", "modifier": "private", "type": "Activity", "declarator": "context", "var_name": "context"}, {"original_string": "private MethodBuilder methodBuilder;", "modifier": "private", "type": "MethodBuilder", "declarator": "methodBuilder", "var_name": "methodBuilder"}], "file": "MoPubAd/mopub-sdk/src/test/java/com/mopub/mobileads/WebViewAdUrlGeneratorTest.java"}, "test_case": {"identifier": "generateAdUrl_shouldIncludeAllFields", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void generateAdUrl_shouldIncludeAllFields() throws Exception {\n        final String expectedAdUrl = new AdUrlBuilder(expectedUdid)\n                .withAdUnitId(\"adUnitId\")\n                .withQuery(\"key%3Avalue\")\n                .withLatLon(\"20.1%2C30.0\", \"1\")\n                .withMcc(\"123\")\n                .withMnc(\"456\")\n                .withCountryIso(\"expected%20country\")\n                .withCarrierName(\"expected%20carrier\")\n                .withExternalStoragePermission(false)\n                .build();\n\n        shadowTelephonyManager.setNetworkOperator(\"123456\");\n        shadowTelephonyManager.setNetworkCountryIso(\"expected country\");\n        shadowTelephonyManager.setNetworkOperatorName(\"expected carrier\");\n\n        Location location = new Location(\"\");\n        location.setLatitude(20.1);\n        location.setLongitude(30.0);\n        location.setAccuracy(1.23f); // should get rounded to \"1\"\n\n        String adUrl = subject\n                .withAdUnitId(\"adUnitId\")\n                .withKeywords(\"key:value\")\n                .withLocation(location)\n                .generateUrlString(\"ads.mopub.com\");\n\n        assertThat(adUrl).isEqualTo(expectedAdUrl);\n    }", "signature": "void generateAdUrl_shouldIncludeAllFields()", "full_signature": "@Test public void generateAdUrl_shouldIncludeAllFields()", "class_method_signature": "WebViewAdUrlGeneratorTest.generateAdUrl_shouldIncludeAllFields()", "testcase": true, "constructor": false, "invocations": ["build", "withExternalStoragePermission", "withCarrierName", "withCountryIso", "withMnc", "withMcc", "withLatLon", "withQuery", "withAdUnitId", "setNetworkOperator", "setNetworkCountryIso", "setNetworkOperatorName", "setLatitude", "setLongitude", "setAccuracy", "generateUrlString", "withLocation", "withKeywords", "withAdUnitId", "isEqualTo", "assertThat"]}, "focal_class": {"identifier": "WebViewAdUrlGenerator", "superclass": "extends AdUrlGenerator", "interfaces": "", "fields": [{"original_string": "private final boolean mIsStorePictureSupported;", "modifier": "private final", "type": "boolean", "declarator": "mIsStorePictureSupported", "var_name": "mIsStorePictureSupported"}], "methods": [{"identifier": "WebViewAdUrlGenerator", "parameters": "(Context context, boolean isStorePictureSupported)", "modifiers": "public", "return": "", "signature": " WebViewAdUrlGenerator(Context context, boolean isStorePictureSupported)", "full_signature": "public  WebViewAdUrlGenerator(Context context, boolean isStorePictureSupported)", "class_method_signature": "WebViewAdUrlGenerator.WebViewAdUrlGenerator(Context context, boolean isStorePictureSupported)", "testcase": false, "constructor": true}, {"identifier": "generateUrlString", "parameters": "(String serverHostname)", "modifiers": "@Override public", "return": "String", "signature": "String generateUrlString(String serverHostname)", "full_signature": "@Override public String generateUrlString(String serverHostname)", "class_method_signature": "WebViewAdUrlGenerator.generateUrlString(String serverHostname)", "testcase": false, "constructor": false}], "file": "MoPubAd/mopub-sdk/src/main/java/com/mopub/mobileads/WebViewAdUrlGenerator.java"}, "focal_method": {"identifier": "generateUrlString", "parameters": "(String serverHostname)", "modifiers": "@Override public", "return": "String", "body": "@Override\n    public String generateUrlString(String serverHostname) {\n        initUrlString(serverHostname, Constants.AD_HANDLER);\n\n        final ClientMetadata clientMetadata = ClientMetadata.getInstance(mContext);\n\n        setApiVersion(\"6\");\n\n        setAdUnitId(mAdUnitId);\n\n        setSdkVersion(clientMetadata.getSdkVersion());\n\n        setDeviceInfo(clientMetadata.getDeviceManufacturer(),\n                clientMetadata.getDeviceModel(),\n                clientMetadata.getDeviceProduct());\n\n        setUdid(clientMetadata.getAdvertisingId());\n\n        setDoNotTrack(clientMetadata.isDoNotTrackSet());\n\n        setKeywords(mKeywords);\n\n        setLocation(mLocation);\n\n        setTimezone(DateAndTime.getTimeZoneOffsetString());\n\n        setOrientation(clientMetadata.getOrientationString());\n\n        setDensity(clientMetadata.getDensity());\n\n        setMraidFlag(true);\n\n        String networkOperator = clientMetadata.getNetworkOperatorForUrl();\n        setMccCode(networkOperator);\n        setMncCode(networkOperator);\n\n        setIsoCountryCode(clientMetadata.getIsoCountryCode());\n        setCarrierName(clientMetadata.getNetworkOperatorName());\n\n        setNetworkType(clientMetadata.getActiveNetworkType());\n\n        setAppVersion(clientMetadata.getAppVersion());\n\n        setExternalStoragePermission(mIsStorePictureSupported);\n\n        setTwitterAppInstalledFlag();\n\n        return getFinalUrlString();\n    }", "signature": "String generateUrlString(String serverHostname)", "full_signature": "@Override public String generateUrlString(String serverHostname)", "class_method_signature": "WebViewAdUrlGenerator.generateUrlString(String serverHostname)", "testcase": false, "constructor": false, "invocations": ["initUrlString", "getInstance", "setApiVersion", "setAdUnitId", "setSdkVersion", "getSdkVersion", "setDeviceInfo", "getDeviceManufacturer", "getDeviceModel", "getDeviceProduct", "setUdid", "getAdvertisingId", "setDoNotTrack", "isDoNotTrackSet", "setKeywords", "setLocation", "setTimezone", "getTimeZoneOffsetString", "setOrientation", "getOrientationString", "setDensity", "getDensity", "setMraidFlag", "getNetworkOperatorForUrl", "setMccCode", "setMncCode", "setIsoCountryCode", "getIsoCountryCode", "setCarrierName", "getNetworkOperatorName", "setNetworkType", "getActiveNetworkType", "setAppVersion", "getAppVersion", "setExternalStoragePermission", "setTwitterAppInstalledFlag", "getFinalUrlString"]}, "repository": {"repo_id": 38092182, "url": "https://github.com/harshalbenake/hbworkspace2-100", "language": "Java", "is_fork": false, "fork_count": 160, "stargazer_count": 191, "size": 307516, "license": "licensed"}}