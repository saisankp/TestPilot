{"test_class": {"identifier": "MessagePartCreatorsTest", "superclass": "", "interfaces": "", "fields": [], "file": "CommonFeatures/Email/EmailActor/src/test/java/info/smart_tools/smartactors/email/email_actor/email/MessagePartCreatorsTest.java"}, "test_case": {"identifier": "Should_MessagePartCreatorsCreateTextAndFileParts", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void Should_MessagePartCreatorsCreateTextAndFileParts()\n            throws Exception {\n        IObject context = new DSObject();\n        SMTPMessageAdaptor messageAdaptor = mock(SMTPMessageAdaptor.class);\n        List<IObject> partsParameters = Collections.singletonList(\n                new DSObject(\"{\\\"type\\\":\\\"text\\\",\\\"mime\\\":\\\"text/html\\\",\\\"text\\\":\\\"TeXt\\\"}\"));\n\n        ArgumentMatcher<MimeBodyPart> partMatcher = new ArgumentMatcher<MimeBodyPart>() {\n            @Override\n            public boolean matches(Object o) {\n                MimeBodyPart part = (MimeBodyPart)o;\n                try {\n                    return part.getDataHandler().getContentType().equals(\"text/html\") && part.getContent().equals(\"TeXt\");\n                } catch (MessagingException | IOException e) {\n                    return false;\n                }\n            }\n        };\n\n        MessagePartCreators.addAllPartsTo(messageAdaptor, context, partsParameters);\n\n        verify(messageAdaptor).addPart(argThat(partMatcher));\n    }", "signature": "void Should_MessagePartCreatorsCreateTextAndFileParts()", "full_signature": "@Test public void Should_MessagePartCreatorsCreateTextAndFileParts()", "class_method_signature": "MessagePartCreatorsTest.Should_MessagePartCreatorsCreateTextAndFileParts()", "testcase": true, "constructor": false, "invocations": ["mock", "singletonList", "equals", "getContentType", "getDataHandler", "equals", "getContent", "addAllPartsTo", "addPart", "verify", "argThat"]}, "focal_class": {"identifier": "MessagePartCreators", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static Map<String, MessagePartCreator> creatorsMap = new HashMap<>();", "modifier": "private static", "type": "Map<String, MessagePartCreator>", "declarator": "creatorsMap = new HashMap<>()", "var_name": "creatorsMap"}, {"original_string": "private static Field partType_Part_F;", "modifier": "private static", "type": "Field", "declarator": "partType_Part_F", "var_name": "partType_Part_F"}, {"original_string": "private static Field partText_TextPart_F;", "modifier": "private static", "type": "Field", "declarator": "partText_TextPart_F", "var_name": "partText_TextPart_F"}, {"original_string": "private static Field partMime_Part_F;", "modifier": "private static", "type": "Field", "declarator": "partMime_Part_F", "var_name": "partMime_Part_F"}, {"original_string": "private static Field sourcePath_FilePart_F;", "modifier": "private static", "type": "Field", "declarator": "sourcePath_FilePart_F", "var_name": "sourcePath_FilePart_F"}, {"original_string": "private static Field attachmentName_FilePart_F;", "modifier": "private static", "type": "Field", "declarator": "attachmentName_FilePart_F", "var_name": "attachmentName_FilePart_F"}, {"original_string": "private static IField sourceF;", "modifier": "private static", "type": "IField", "declarator": "sourceF", "var_name": "sourceF"}], "methods": [{"identifier": "addAllPartsTo", "parameters": "(final SMTPMessageAdaptor smtpMessage, final IObject context, final List<IObject> parts)", "modifiers": "public static", "return": "void", "signature": "void addAllPartsTo(final SMTPMessageAdaptor smtpMessage, final IObject context, final List<IObject> parts)", "full_signature": "public static void addAllPartsTo(final SMTPMessageAdaptor smtpMessage, final IObject context, final List<IObject> parts)", "class_method_signature": "MessagePartCreators.addAllPartsTo(final SMTPMessageAdaptor smtpMessage, final IObject context, final List<IObject> parts)", "testcase": false, "constructor": false}, {"identifier": "add", "parameters": "(String name, MessagePartCreator creator)", "modifiers": "public static", "return": "void", "signature": "void add(String name, MessagePartCreator creator)", "full_signature": "public static void add(String name, MessagePartCreator creator)", "class_method_signature": "MessagePartCreators.add(String name, MessagePartCreator creator)", "testcase": false, "constructor": false}], "file": "CommonFeatures/Email/EmailActor/src/main/java/info/smart_tools/smartactors/email/email_actor/email/MessagePartCreators.java"}, "focal_method": {"identifier": "addAllPartsTo", "parameters": "(final SMTPMessageAdaptor smtpMessage, final IObject context, final List<IObject> parts)", "modifiers": "public static", "return": "void", "body": "public static void addAllPartsTo(final SMTPMessageAdaptor smtpMessage, final IObject context, final List<IObject> parts) throws Exception {\n        for (IObject part : parts) {\n            try {\n                creatorsMap\n                        .get(partType_Part_F.in(part))\n                        .addPartTo(smtpMessage, context, part);\n            } catch (NullPointerException e) {\n                throw new PartCreatorException(\"Part type not found.\", e);\n            } catch (ChangeValueException | ReadValueException | MessagingException e) {\n                throw new PartCreatorException(\"Failed to create message part.\", e);\n            } catch (InvalidArgumentException e) {\n                throw new Exception(\"Failed to extract type\", e);\n            }\n        }\n    }", "signature": "void addAllPartsTo(final SMTPMessageAdaptor smtpMessage, final IObject context, final List<IObject> parts)", "full_signature": "public static void addAllPartsTo(final SMTPMessageAdaptor smtpMessage, final IObject context, final List<IObject> parts)", "class_method_signature": "MessagePartCreators.addAllPartsTo(final SMTPMessageAdaptor smtpMessage, final IObject context, final List<IObject> parts)", "testcase": false, "constructor": false, "invocations": ["addPartTo", "get", "in"]}, "repository": {"repo_id": 52972024, "url": "https://github.com/SmartTools/smartactors-core", "language": "Java", "is_fork": false, "fork_count": 7, "stargazer_count": 17, "size": 58816, "license": "licensed"}}