{"test_class": {"identifier": "ChannelTypeResourceTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private ChannelTypeResource channelTypeResource;", "modifier": "private", "type": "ChannelTypeResource", "declarator": "channelTypeResource", "var_name": "channelTypeResource"}, {"original_string": "private @Mock ChannelTypeRegistry channelTypeRegistry;", "modifier": "private @Mock", "type": "ChannelTypeRegistry", "declarator": "channelTypeRegistry", "var_name": "channelTypeRegistry"}, {"original_string": "private @Mock ConfigDescriptionRegistry configDescriptionRegistry;", "modifier": "private @Mock", "type": "ConfigDescriptionRegistry", "declarator": "configDescriptionRegistry", "var_name": "configDescriptionRegistry"}, {"original_string": "private @Mock LocaleServiceImpl localeService;", "modifier": "private @Mock", "type": "LocaleServiceImpl", "declarator": "localeService", "var_name": "localeService"}, {"original_string": "private @Mock ProfileTypeRegistry profileTypeRegistry;", "modifier": "private @Mock", "type": "ProfileTypeRegistry", "declarator": "profileTypeRegistry", "var_name": "profileTypeRegistry"}], "file": "bundles/org.openhab.core.io.rest.core/src/test/java/org/openhab/core/io/rest/core/internal/channel/ChannelTypeResourceTest.java"}, "test_case": {"identifier": "returnLinkableItemTypesForTriggerChannelType", "parameters": "()", "modifiers": "@SuppressWarnings(\"unchecked\") @Test public", "return": "void", "body": "@SuppressWarnings(\"unchecked\")\n    @Test\n    public void returnLinkableItemTypesForTriggerChannelType() throws IOException {\n        ChannelTypeUID channelTypeUID = new ChannelTypeUID(\"binding\", \"ct\");\n        ChannelType channelType = ChannelTypeBuilder.trigger(channelTypeUID, \"Label\").build();\n\n        when(channelTypeRegistry.getChannelType(channelTypeUID)).thenReturn(channelType);\n\n        TriggerProfileType profileType = mock(TriggerProfileType.class);\n        when(profileType.getSupportedChannelTypeUIDs()).thenReturn(List.of(channelTypeUID));\n        when(profileType.getSupportedItemTypes()).thenReturn(List.of(\"Switch\", \"Dimmer\"));\n\n        when(profileTypeRegistry.getProfileTypes()).thenReturn(List.of(profileType));\n\n        Response response = channelTypeResource.getLinkableItemTypes(channelTypeUID.getAsString());\n\n        verify(channelTypeRegistry).getChannelType(channelTypeUID);\n        verify(profileTypeRegistry).getProfileTypes();\n        assertThat(response.getStatus(), is(200));\n        assertThat((Set<String>) response.getEntity(), IsIterableContaining.hasItems(\"Switch\", \"Dimmer\"));\n    }", "signature": "void returnLinkableItemTypesForTriggerChannelType()", "full_signature": "@SuppressWarnings(\"unchecked\") @Test public void returnLinkableItemTypesForTriggerChannelType()", "class_method_signature": "ChannelTypeResourceTest.returnLinkableItemTypesForTriggerChannelType()", "testcase": true, "constructor": false, "invocations": ["build", "trigger", "thenReturn", "when", "getChannelType", "mock", "thenReturn", "when", "getSupportedChannelTypeUIDs", "of", "thenReturn", "when", "getSupportedItemTypes", "of", "thenReturn", "when", "getProfileTypes", "of", "getLinkableItemTypes", "getAsString", "getChannelType", "verify", "getProfileTypes", "verify", "assertThat", "getStatus", "is", "assertThat", "getEntity", "hasItems"]}, "focal_class": {"identifier": "ChannelTypeResource", "superclass": "", "interfaces": "implements RESTResource", "fields": [{"original_string": "public static final String PATH_CHANNEL_TYPES = \"channel-types\";", "modifier": "public static final", "type": "String", "declarator": "PATH_CHANNEL_TYPES = \"channel-types\"", "var_name": "PATH_CHANNEL_TYPES"}, {"original_string": "private final ChannelTypeRegistry channelTypeRegistry;", "modifier": "private final", "type": "ChannelTypeRegistry", "declarator": "channelTypeRegistry", "var_name": "channelTypeRegistry"}, {"original_string": "private final ConfigDescriptionRegistry configDescriptionRegistry;", "modifier": "private final", "type": "ConfigDescriptionRegistry", "declarator": "configDescriptionRegistry", "var_name": "configDescriptionRegistry"}, {"original_string": "private final LocaleService localeService;", "modifier": "private final", "type": "LocaleService", "declarator": "localeService", "var_name": "localeService"}, {"original_string": "private final ProfileTypeRegistry profileTypeRegistry;", "modifier": "private final", "type": "ProfileTypeRegistry", "declarator": "profileTypeRegistry", "var_name": "profileTypeRegistry"}], "methods": [{"identifier": "ChannelTypeResource", "parameters": "( //\n            final @Reference ChannelTypeRegistry channelTypeRegistry,\n            final @Reference ConfigDescriptionRegistry configDescriptionRegistry,\n            final @Reference LocaleService localeService, //\n            final @Reference ProfileTypeRegistry profileTypeRegistry)", "modifiers": "@Activate public", "return": "", "signature": " ChannelTypeResource( //\n            final @Reference ChannelTypeRegistry channelTypeRegistry,\n            final @Reference ConfigDescriptionRegistry configDescriptionRegistry,\n            final @Reference LocaleService localeService, //\n            final @Reference ProfileTypeRegistry profileTypeRegistry)", "full_signature": "@Activate public  ChannelTypeResource( //\n            final @Reference ChannelTypeRegistry channelTypeRegistry,\n            final @Reference ConfigDescriptionRegistry configDescriptionRegistry,\n            final @Reference LocaleService localeService, //\n            final @Reference ProfileTypeRegistry profileTypeRegistry)", "class_method_signature": "ChannelTypeResource.ChannelTypeResource( //\n            final @Reference ChannelTypeRegistry channelTypeRegistry,\n            final @Reference ConfigDescriptionRegistry configDescriptionRegistry,\n            final @Reference LocaleService localeService, //\n            final @Reference ProfileTypeRegistry profileTypeRegistry)", "testcase": false, "constructor": true}, {"identifier": "getAll", "parameters": "(\n            @HeaderParam(HttpHeaders.ACCEPT_LANGUAGE) @Parameter(description = \"language\") @Nullable String language,\n            @QueryParam(\"prefixes\") @Parameter(description = \"filter UIDs by prefix (multiple comma-separated prefixes allowed, for example: 'system,mqtt')\") @Nullable String prefixes)", "modifiers": "@GET @Produces(MediaType.APPLICATION_JSON) @Operation(summary = \"Gets all available channel types.\", responses = { @ApiResponse(responseCode = \"200\", description = \"OK\", content = @Content(array = @ArraySchema(schema = @Schema(implementation = ChannelTypeDTO.class), uniqueItems = true))) }) public", "return": "Response", "signature": "Response getAll(\n            @HeaderParam(HttpHeaders.ACCEPT_LANGUAGE) @Parameter(description = \"language\") @Nullable String language,\n            @QueryParam(\"prefixes\") @Parameter(description = \"filter UIDs by prefix (multiple comma-separated prefixes allowed, for example: 'system,mqtt')\") @Nullable String prefixes)", "full_signature": "@GET @Produces(MediaType.APPLICATION_JSON) @Operation(summary = \"Gets all available channel types.\", responses = { @ApiResponse(responseCode = \"200\", description = \"OK\", content = @Content(array = @ArraySchema(schema = @Schema(implementation = ChannelTypeDTO.class), uniqueItems = true))) }) public Response getAll(\n            @HeaderParam(HttpHeaders.ACCEPT_LANGUAGE) @Parameter(description = \"language\") @Nullable String language,\n            @QueryParam(\"prefixes\") @Parameter(description = \"filter UIDs by prefix (multiple comma-separated prefixes allowed, for example: 'system,mqtt')\") @Nullable String prefixes)", "class_method_signature": "ChannelTypeResource.getAll(\n            @HeaderParam(HttpHeaders.ACCEPT_LANGUAGE) @Parameter(description = \"language\") @Nullable String language,\n            @QueryParam(\"prefixes\") @Parameter(description = \"filter UIDs by prefix (multiple comma-separated prefixes allowed, for example: 'system,mqtt')\") @Nullable String prefixes)", "testcase": false, "constructor": false}, {"identifier": "getByUID", "parameters": "(\n            @PathParam(\"channelTypeUID\") @Parameter(description = \"channelTypeUID\") String channelTypeUID,\n            @HeaderParam(HttpHeaders.ACCEPT_LANGUAGE) @Parameter(description = \"language\") @Nullable String language)", "modifiers": "@GET @Path(\"/{channelTypeUID}\") @Produces(MediaType.APPLICATION_JSON) @Operation(summary = \"Gets channel type by UID.\", responses = { @ApiResponse(responseCode = \"200\", description = \"Channel type with provided channelTypeUID does not exist.\", content = @Content(schema = @Schema(implementation = ChannelTypeDTO.class))), @ApiResponse(responseCode = \"404\", description = \"No content\") }) public", "return": "Response", "signature": "Response getByUID(\n            @PathParam(\"channelTypeUID\") @Parameter(description = \"channelTypeUID\") String channelTypeUID,\n            @HeaderParam(HttpHeaders.ACCEPT_LANGUAGE) @Parameter(description = \"language\") @Nullable String language)", "full_signature": "@GET @Path(\"/{channelTypeUID}\") @Produces(MediaType.APPLICATION_JSON) @Operation(summary = \"Gets channel type by UID.\", responses = { @ApiResponse(responseCode = \"200\", description = \"Channel type with provided channelTypeUID does not exist.\", content = @Content(schema = @Schema(implementation = ChannelTypeDTO.class))), @ApiResponse(responseCode = \"404\", description = \"No content\") }) public Response getByUID(\n            @PathParam(\"channelTypeUID\") @Parameter(description = \"channelTypeUID\") String channelTypeUID,\n            @HeaderParam(HttpHeaders.ACCEPT_LANGUAGE) @Parameter(description = \"language\") @Nullable String language)", "class_method_signature": "ChannelTypeResource.getByUID(\n            @PathParam(\"channelTypeUID\") @Parameter(description = \"channelTypeUID\") String channelTypeUID,\n            @HeaderParam(HttpHeaders.ACCEPT_LANGUAGE) @Parameter(description = \"language\") @Nullable String language)", "testcase": false, "constructor": false}, {"identifier": "getLinkableItemTypes", "parameters": "(\n            @PathParam(\"channelTypeUID\") @Parameter(description = \"channelTypeUID\") String channelTypeUID)", "modifiers": "@GET @Path(\"/{channelTypeUID}/linkableItemTypes\") @Produces(MediaType.APPLICATION_JSON) @Operation(summary = \"Gets the item types the given trigger channel type UID can be linked to.\", responses = { @ApiResponse(responseCode = \"200\", description = \"OK\", content = @Content(array = @ArraySchema(schema = @Schema(implementation = String.class), uniqueItems = true))), @ApiResponse(responseCode = \"204\", description = \"No content: channel type has no linkable items or is no trigger channel.\"), @ApiResponse(responseCode = \"404\", description = \"Given channel type UID not found.\") }) public", "return": "Response", "signature": "Response getLinkableItemTypes(\n            @PathParam(\"channelTypeUID\") @Parameter(description = \"channelTypeUID\") String channelTypeUID)", "full_signature": "@GET @Path(\"/{channelTypeUID}/linkableItemTypes\") @Produces(MediaType.APPLICATION_JSON) @Operation(summary = \"Gets the item types the given trigger channel type UID can be linked to.\", responses = { @ApiResponse(responseCode = \"200\", description = \"OK\", content = @Content(array = @ArraySchema(schema = @Schema(implementation = String.class), uniqueItems = true))), @ApiResponse(responseCode = \"204\", description = \"No content: channel type has no linkable items or is no trigger channel.\"), @ApiResponse(responseCode = \"404\", description = \"Given channel type UID not found.\") }) public Response getLinkableItemTypes(\n            @PathParam(\"channelTypeUID\") @Parameter(description = \"channelTypeUID\") String channelTypeUID)", "class_method_signature": "ChannelTypeResource.getLinkableItemTypes(\n            @PathParam(\"channelTypeUID\") @Parameter(description = \"channelTypeUID\") String channelTypeUID)", "testcase": false, "constructor": false}, {"identifier": "convertToChannelTypeDTO", "parameters": "(ChannelType channelType, Locale locale)", "modifiers": "private", "return": "ChannelTypeDTO", "signature": "ChannelTypeDTO convertToChannelTypeDTO(ChannelType channelType, Locale locale)", "full_signature": "private ChannelTypeDTO convertToChannelTypeDTO(ChannelType channelType, Locale locale)", "class_method_signature": "ChannelTypeResource.convertToChannelTypeDTO(ChannelType channelType, Locale locale)", "testcase": false, "constructor": false}], "file": "bundles/org.openhab.core.io.rest.core/src/main/java/org/openhab/core/io/rest/core/internal/channel/ChannelTypeResource.java"}, "focal_method": {"identifier": "getLinkableItemTypes", "parameters": "(\n            @PathParam(\"channelTypeUID\") @Parameter(description = \"channelTypeUID\") String channelTypeUID)", "modifiers": "@GET @Path(\"/{channelTypeUID}/linkableItemTypes\") @Produces(MediaType.APPLICATION_JSON) @Operation(summary = \"Gets the item types the given trigger channel type UID can be linked to.\", responses = { @ApiResponse(responseCode = \"200\", description = \"OK\", content = @Content(array = @ArraySchema(schema = @Schema(implementation = String.class), uniqueItems = true))), @ApiResponse(responseCode = \"204\", description = \"No content: channel type has no linkable items or is no trigger channel.\"), @ApiResponse(responseCode = \"404\", description = \"Given channel type UID not found.\") }) public", "return": "Response", "body": "@GET\n    @Path(\"/{channelTypeUID}/linkableItemTypes\")\n    @Produces(MediaType.APPLICATION_JSON)\n    @Operation(summary = \"Gets the item types the given trigger channel type UID can be linked to.\", responses = {\n            @ApiResponse(responseCode = \"200\", description = \"OK\", content = @Content(array = @ArraySchema(schema = @Schema(implementation = String.class), uniqueItems = true))),\n            @ApiResponse(responseCode = \"204\", description = \"No content: channel type has no linkable items or is no trigger channel.\"),\n            @ApiResponse(responseCode = \"404\", description = \"Given channel type UID not found.\") })\n    public Response getLinkableItemTypes(\n            @PathParam(\"channelTypeUID\") @Parameter(description = \"channelTypeUID\") String channelTypeUID) {\n        ChannelTypeUID ctUID = new ChannelTypeUID(channelTypeUID);\n        ChannelType channelType = channelTypeRegistry.getChannelType(ctUID);\n        if (channelType == null) {\n            return Response.status(Status.NOT_FOUND).build();\n        }\n        if (channelType.getKind() != ChannelKind.TRIGGER) {\n            return Response.noContent().build();\n        }\n\n        Set<String> result = new HashSet<>();\n        for (ProfileType profileType : profileTypeRegistry.getProfileTypes()) {\n            if (profileType instanceof TriggerProfileType) {\n                if (((TriggerProfileType) profileType).getSupportedChannelTypeUIDs().contains(ctUID)) {\n                    for (String itemType : profileType.getSupportedItemTypes()) {\n                        result.add(itemType);\n                    }\n                }\n            }\n        }\n        if (result.isEmpty()) {\n            return Response.noContent().build();\n        }\n\n        return Response.ok(result).build();\n    }", "signature": "Response getLinkableItemTypes(\n            @PathParam(\"channelTypeUID\") @Parameter(description = \"channelTypeUID\") String channelTypeUID)", "full_signature": "@GET @Path(\"/{channelTypeUID}/linkableItemTypes\") @Produces(MediaType.APPLICATION_JSON) @Operation(summary = \"Gets the item types the given trigger channel type UID can be linked to.\", responses = { @ApiResponse(responseCode = \"200\", description = \"OK\", content = @Content(array = @ArraySchema(schema = @Schema(implementation = String.class), uniqueItems = true))), @ApiResponse(responseCode = \"204\", description = \"No content: channel type has no linkable items or is no trigger channel.\"), @ApiResponse(responseCode = \"404\", description = \"Given channel type UID not found.\") }) public Response getLinkableItemTypes(\n            @PathParam(\"channelTypeUID\") @Parameter(description = \"channelTypeUID\") String channelTypeUID)", "class_method_signature": "ChannelTypeResource.getLinkableItemTypes(\n            @PathParam(\"channelTypeUID\") @Parameter(description = \"channelTypeUID\") String channelTypeUID)", "testcase": false, "constructor": false, "invocations": ["getChannelType", "build", "status", "getKind", "build", "noContent", "getProfileTypes", "contains", "getSupportedChannelTypeUIDs", "getSupportedItemTypes", "add", "isEmpty", "build", "noContent", "build", "ok"]}, "repository": {"repo_id": 48337670, "url": "https://github.com/openhab/openhab-core", "stars": 241, "created": "12/20/2015 9:23:20 PM +00:00", "updates": "2020-01-27T16:55:53+00:00", "fork": "False", "license": "licensed"}}