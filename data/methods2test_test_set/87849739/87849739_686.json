{"test_class": {"identifier": "SearchSourceTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final String SORT = \"sort(+/attributes/counter,+/thingId)\";", "modifier": "private static final", "type": "String", "declarator": "SORT = \"sort(+/attributes/counter,+/thingId)\"", "var_name": "SORT"}, {"original_string": "private static final JsonFieldSelector SORT_FIELDS = JsonFieldSelector.newInstance(\"attributes/counter\", \"thingId\");", "modifier": "private static final", "type": "JsonFieldSelector", "declarator": "SORT_FIELDS = JsonFieldSelector.newInstance(\"attributes/counter\", \"thingId\")", "var_name": "SORT_FIELDS"}, {"original_string": "private ActorSystem actorSystem;", "modifier": "private", "type": "ActorSystem", "declarator": "actorSystem", "var_name": "actorSystem"}, {"original_string": "private Materializer materializer;", "modifier": "private", "type": "Materializer", "declarator": "materializer", "var_name": "materializer"}, {"original_string": "private TestProbe pubSubMediatorProbe;", "modifier": "private", "type": "TestProbe", "declarator": "pubSubMediatorProbe", "var_name": "pubSubMediatorProbe"}, {"original_string": "private TestProbe conciergeForwarderProbe;", "modifier": "private", "type": "TestProbe", "declarator": "conciergeForwarderProbe", "var_name": "conciergeForwarderProbe"}, {"original_string": "private DittoHeaders dittoHeaders;", "modifier": "private", "type": "DittoHeaders", "declarator": "dittoHeaders", "var_name": "dittoHeaders"}, {"original_string": "private TestPublisher.Probe<Object> sourceProbe;", "modifier": "private", "type": "TestPublisher.Probe<Object>", "declarator": "sourceProbe", "var_name": "sourceProbe"}, {"original_string": "private TestSubscriber.Probe<Object> sinkProbe;", "modifier": "private", "type": "TestSubscriber.Probe<Object>", "declarator": "sinkProbe", "var_name": "sinkProbe"}], "file": "services/utils/search/src/test/java/org/eclipse/ditto/services/utils/search/SearchSourceTest.java"}, "test_case": {"identifier": "clientError", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void clientError() {\n        startTestSearchSource(null, null);\n        sinkProbe.request(1L);\n        conciergeForwarderProbe.expectMsg(streamThings(null));\n        conciergeForwarderProbe.reply(InvalidRqlExpressionException.newBuilder().build());\n        assertThat(sinkProbe.expectError()).isInstanceOf(InvalidRqlExpressionException.class);\n    }", "signature": "void clientError()", "full_signature": "@Test public void clientError()", "class_method_signature": "SearchSourceTest.clientError()", "testcase": true, "constructor": false, "invocations": ["startTestSearchSource", "request", "expectMsg", "streamThings", "reply", "build", "newBuilder", "isInstanceOf", "assertThat", "expectError"]}, "focal_class": {"identifier": "SearchSource", "superclass": "", "interfaces": "", "fields": [{"original_string": "private final DittoLogger LOGGER = DittoLoggerFactory.getLogger(SearchSource.class);", "modifier": "private final", "type": "DittoLogger", "declarator": "LOGGER = DittoLoggerFactory.getLogger(SearchSource.class)", "var_name": "LOGGER"}, {"original_string": "private final ActorRef pubSubMediator;", "modifier": "private final", "type": "ActorRef", "declarator": "pubSubMediator", "var_name": "pubSubMediator"}, {"original_string": "private final ActorRef conciergeForwarder;", "modifier": "private final", "type": "ActorRef", "declarator": "conciergeForwarder", "var_name": "conciergeForwarder"}, {"original_string": "private final Duration thingsAskTimeout;", "modifier": "private final", "type": "Duration", "declarator": "thingsAskTimeout", "var_name": "thingsAskTimeout"}, {"original_string": "private final Duration searchAskTimeout;", "modifier": "private final", "type": "Duration", "declarator": "searchAskTimeout", "var_name": "searchAskTimeout"}, {"original_string": "@Nullable private final JsonFieldSelector fields;", "modifier": "@Nullable private final", "type": "JsonFieldSelector", "declarator": "fields", "var_name": "fields"}, {"original_string": "private final JsonFieldSelector sortFields;", "modifier": "private final", "type": "JsonFieldSelector", "declarator": "sortFields", "var_name": "sortFields"}, {"original_string": "private final StreamThings streamThings;", "modifier": "private final", "type": "StreamThings", "declarator": "streamThings", "var_name": "streamThings"}, {"original_string": "private final boolean thingIdOnly;", "modifier": "private final", "type": "boolean", "declarator": "thingIdOnly", "var_name": "thingIdOnly"}, {"original_string": "private final String lastThingId;", "modifier": "private final", "type": "String", "declarator": "lastThingId", "var_name": "lastThingId"}], "methods": [{"identifier": "SearchSource", "parameters": "(final ActorRef pubSubMediator,\n            final ActorRef conciergeForwarder,\n            final Duration thingsAskTimeout,\n            final Duration searchAskTimeout,\n            @Nullable final JsonFieldSelector fields,\n            final JsonFieldSelector sortFields,\n            final StreamThings streamThings,\n            final String lastThingId)", "modifiers": "", "return": "", "signature": " SearchSource(final ActorRef pubSubMediator,\n            final ActorRef conciergeForwarder,\n            final Duration thingsAskTimeout,\n            final Duration searchAskTimeout,\n            @Nullable final JsonFieldSelector fields,\n            final JsonFieldSelector sortFields,\n            final StreamThings streamThings,\n            final String lastThingId)", "full_signature": "  SearchSource(final ActorRef pubSubMediator,\n            final ActorRef conciergeForwarder,\n            final Duration thingsAskTimeout,\n            final Duration searchAskTimeout,\n            @Nullable final JsonFieldSelector fields,\n            final JsonFieldSelector sortFields,\n            final StreamThings streamThings,\n            final String lastThingId)", "class_method_signature": "SearchSource.SearchSource(final ActorRef pubSubMediator,\n            final ActorRef conciergeForwarder,\n            final Duration thingsAskTimeout,\n            final Duration searchAskTimeout,\n            @Nullable final JsonFieldSelector fields,\n            final JsonFieldSelector sortFields,\n            final StreamThings streamThings,\n            final String lastThingId)", "testcase": false, "constructor": true}, {"identifier": "newBuilder", "parameters": "()", "modifiers": "public static", "return": "SearchSourceBuilder", "signature": "SearchSourceBuilder newBuilder()", "full_signature": "public static SearchSourceBuilder newBuilder()", "class_method_signature": "SearchSource.newBuilder()", "testcase": false, "constructor": false}, {"identifier": "start", "parameters": "(final Consumer<ResumeSourceBuilder<?, ?>> configurer)", "modifiers": "public", "return": "Source<JsonObject, NotUsed>", "signature": "Source<JsonObject, NotUsed> start(final Consumer<ResumeSourceBuilder<?, ?>> configurer)", "full_signature": "public Source<JsonObject, NotUsed> start(final Consumer<ResumeSourceBuilder<?, ?>> configurer)", "class_method_signature": "SearchSource.start(final Consumer<ResumeSourceBuilder<?, ?>> configurer)", "testcase": false, "constructor": false}, {"identifier": "startAsPair", "parameters": "(final Consumer<ResumeSourceBuilder<?, ?>> configurer)", "modifiers": "public", "return": "Source<Pair<String, JsonObject>, NotUsed>", "signature": "Source<Pair<String, JsonObject>, NotUsed> startAsPair(final Consumer<ResumeSourceBuilder<?, ?>> configurer)", "full_signature": "public Source<Pair<String, JsonObject>, NotUsed> startAsPair(final Consumer<ResumeSourceBuilder<?, ?>> configurer)", "class_method_signature": "SearchSource.startAsPair(final Consumer<ResumeSourceBuilder<?, ?>> configurer)", "testcase": false, "constructor": false}, {"identifier": "mapError", "parameters": "(final Throwable error)", "modifiers": "private", "return": "Optional<Throwable>", "signature": "Optional<Throwable> mapError(final Throwable error)", "full_signature": "private Optional<Throwable> mapError(final Throwable error)", "class_method_signature": "SearchSource.mapError(final Throwable error)", "testcase": false, "constructor": false}, {"identifier": "resume", "parameters": "(final String lastThingId)", "modifiers": "private", "return": "Source<Pair<String, JsonObject>, NotUsed>", "signature": "Source<Pair<String, JsonObject>, NotUsed> resume(final String lastThingId)", "full_signature": "private Source<Pair<String, JsonObject>, NotUsed> resume(final String lastThingId)", "class_method_signature": "SearchSource.resume(final String lastThingId)", "testcase": false, "constructor": false}, {"identifier": "nextSeed", "parameters": "(final List<Pair<String, JsonObject>> finalElements)", "modifiers": "private", "return": "String", "signature": "String nextSeed(final List<Pair<String, JsonObject>> finalElements)", "full_signature": "private String nextSeed(final List<Pair<String, JsonObject>> finalElements)", "class_method_signature": "SearchSource.nextSeed(final List<Pair<String, JsonObject>> finalElements)", "testcase": false, "constructor": false}, {"identifier": "streamThingsFrom", "parameters": "(final String lastThingId)", "modifiers": "private", "return": "Source<StreamThings, NotUsed>", "signature": "Source<StreamThings, NotUsed> streamThingsFrom(final String lastThingId)", "full_signature": "private Source<StreamThings, NotUsed> streamThingsFrom(final String lastThingId)", "class_method_signature": "SearchSource.streamThingsFrom(final String lastThingId)", "testcase": false, "constructor": false}, {"identifier": "retrieveSortValues", "parameters": "(final String thingId)", "modifiers": "private", "return": "Source<JsonArray, NotUsed>", "signature": "Source<JsonArray, NotUsed> retrieveSortValues(final String thingId)", "full_signature": "private Source<JsonArray, NotUsed> retrieveSortValues(final String thingId)", "class_method_signature": "SearchSource.retrieveSortValues(final String thingId)", "testcase": false, "constructor": false}, {"identifier": "retrieveThingForElement", "parameters": "(final String thingId)", "modifiers": "private", "return": "Source<Pair<String, JsonObject>, NotUsed>", "signature": "Source<Pair<String, JsonObject>, NotUsed> retrieveThingForElement(final String thingId)", "full_signature": "private Source<Pair<String, JsonObject>, NotUsed> retrieveThingForElement(final String thingId)", "class_method_signature": "SearchSource.retrieveThingForElement(final String thingId)", "testcase": false, "constructor": false}, {"identifier": "retrieveThing", "parameters": "(final String thingId,\n            @Nullable final JsonFieldSelector selector)", "modifiers": "private", "return": "Source<JsonObject, NotUsed>", "signature": "Source<JsonObject, NotUsed> retrieveThing(final String thingId,\n            @Nullable final JsonFieldSelector selector)", "full_signature": "private Source<JsonObject, NotUsed> retrieveThing(final String thingId,\n            @Nullable final JsonFieldSelector selector)", "class_method_signature": "SearchSource.retrieveThing(final String thingId,\n            @Nullable final JsonFieldSelector selector)", "testcase": false, "constructor": false}, {"identifier": "getDittoHeaders", "parameters": "()", "modifiers": "private", "return": "DittoHeaders", "signature": "DittoHeaders getDittoHeaders()", "full_signature": "private DittoHeaders getDittoHeaders()", "class_method_signature": "SearchSource.getDittoHeaders()", "testcase": false, "constructor": false}, {"identifier": "expectMsgClass", "parameters": "(final Class<T> clazz)", "modifiers": "private", "return": "Flow<Object, T, NotUsed>", "signature": "Flow<Object, T, NotUsed> expectMsgClass(final Class<T> clazz)", "full_signature": "private Flow<Object, T, NotUsed> expectMsgClass(final Class<T> clazz)", "class_method_signature": "SearchSource.expectMsgClass(final Class<T> clazz)", "testcase": false, "constructor": false}], "file": "services/utils/search/src/main/java/org/eclipse/ditto/services/utils/search/SearchSource.java"}, "focal_method": {"identifier": "newBuilder", "parameters": "()", "modifiers": "public static", "return": "SearchSourceBuilder", "body": "public static SearchSourceBuilder newBuilder() {\n        return new SearchSourceBuilder();\n    }", "signature": "SearchSourceBuilder newBuilder()", "full_signature": "public static SearchSourceBuilder newBuilder()", "class_method_signature": "SearchSource.newBuilder()", "testcase": false, "constructor": false, "invocations": []}, "repository": {"repo_id": 87849739, "url": "https://github.com/eclipse/ditto", "stars": 139, "created": "4/10/2017 7:29:57 PM +00:00", "updates": "2020-01-27T14:02:39+00:00", "fork": "False", "license": "licensed"}}