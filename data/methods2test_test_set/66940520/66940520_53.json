{"test_class": {"identifier": "OptionObjectBundleHookTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private OptionObjectBundleHook hook = new OptionObjectBundleHook();", "modifier": "private", "type": "OptionObjectBundleHook", "declarator": "hook = new OptionObjectBundleHook()", "var_name": "hook"}, {"original_string": "private Preheat preheat = new Preheat();", "modifier": "private", "type": "Preheat", "declarator": "preheat = new Preheat()", "var_name": "preheat"}], "file": "dhis-2/dhis-services/dhis-service-dxf2/src/test/java/org/hisp/dhis/dxf2/metadata/objectbundle/hooks/OptionObjectBundleHookTest.java"}, "test_case": {"identifier": "validate", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void validate()\n    {\n        OptionSet optionSet = new OptionSet();\n        optionSet.setUid( \"optionSet1\" );\n\n        Option option = new Option();\n        option.setName( \"optionName\" );\n        option.setCode( \"optionCode\" );\n        optionSet.addOption( option );\n\n        OptionSet persistedOptionSet = new OptionSet();\n        persistedOptionSet.setUid( \"optionSet1\" );\n\n        Option persistedOption = new Option();\n        persistedOption.setName( \"optionName\" );\n        persistedOption.setCode( \"optionCode\" );\n        persistedOptionSet.addOption( persistedOption );\n\n        preheat.put( PreheatIdentifier.UID, persistedOptionSet );\n\n        ObjectBundleParams objectBundleParams = new ObjectBundleParams();\n        objectBundleParams.setPreheatIdentifier( PreheatIdentifier.UID );\n        ObjectBundle bundle = new ObjectBundle( objectBundleParams, preheat,\n            Collections.singletonMap( OptionSet.class, Collections.singletonList( persistedOptionSet ) ) );\n\n        List<ErrorReport> errors = hook.validate( option, bundle );\n\n        Assert.assertNotNull( errors );\n        Assert.assertEquals( 1, errors.size() );\n        Assert.assertEquals( ErrorCode.E4028, errors.get( 0 ).getErrorCode() );\n    }", "signature": "void validate()", "full_signature": "@Test public void validate()", "class_method_signature": "OptionObjectBundleHookTest.validate()", "testcase": true, "constructor": false, "invocations": ["setUid", "setName", "setCode", "addOption", "setUid", "setName", "setCode", "addOption", "put", "setPreheatIdentifier", "singletonMap", "singletonList", "validate", "assertNotNull", "assertEquals", "size", "assertEquals", "getErrorCode", "get"]}, "focal_class": {"identifier": "OptionObjectBundleHook", "superclass": "extends AbstractObjectBundleHook", "interfaces": "", "fields": [], "methods": [{"identifier": "validate", "parameters": "( T object, ObjectBundle bundle )", "modifiers": "@Override public", "return": "List<ErrorReport>", "signature": "List<ErrorReport> validate( T object, ObjectBundle bundle )", "full_signature": "@Override public List<ErrorReport> validate( T object, ObjectBundle bundle )", "class_method_signature": "OptionObjectBundleHook.validate( T object, ObjectBundle bundle )", "testcase": false, "constructor": false}, {"identifier": "preCreate", "parameters": "( T object, ObjectBundle bundle )", "modifiers": "@Override public", "return": "void", "signature": "void preCreate( T object, ObjectBundle bundle )", "full_signature": "@Override public void preCreate( T object, ObjectBundle bundle )", "class_method_signature": "OptionObjectBundleHook.preCreate( T object, ObjectBundle bundle )", "testcase": false, "constructor": false}, {"identifier": "checkDuplicateOption", "parameters": "( OptionSet optionSet, Option checkOption )", "modifiers": "private", "return": "List<ErrorReport>", "signature": "List<ErrorReport> checkDuplicateOption( OptionSet optionSet, Option checkOption )", "full_signature": "private List<ErrorReport> checkDuplicateOption( OptionSet optionSet, Option checkOption )", "class_method_signature": "OptionObjectBundleHook.checkDuplicateOption( OptionSet optionSet, Option checkOption )", "testcase": false, "constructor": false}], "file": "dhis-2/dhis-services/dhis-service-dxf2/src/main/java/org/hisp/dhis/dxf2/metadata/objectbundle/hooks/OptionObjectBundleHook.java"}, "focal_method": {"identifier": "validate", "parameters": "( T object, ObjectBundle bundle )", "modifiers": "@Override public", "return": "List<ErrorReport>", "body": "@Override\n    public <T extends IdentifiableObject> List<ErrorReport> validate( T object, ObjectBundle bundle )\n    {\n        List<ErrorReport> errors = new ArrayList<>();\n\n        if ( !(object instanceof Option) ) return new ArrayList<>();\n\n        final Option option = (Option) object;\n\n        if ( option.getOptionSet() != null )\n        {\n            OptionSet optionSet = bundle.getPreheat().get( bundle.getPreheatIdentifier(), OptionSet.class, option.getOptionSet() );\n\n            errors.addAll( checkDuplicateOption( optionSet, option ) );\n        }\n\n        return errors;\n    }", "signature": "List<ErrorReport> validate( T object, ObjectBundle bundle )", "full_signature": "@Override public List<ErrorReport> validate( T object, ObjectBundle bundle )", "class_method_signature": "OptionObjectBundleHook.validate( T object, ObjectBundle bundle )", "testcase": false, "constructor": false, "invocations": ["getOptionSet", "get", "getPreheat", "getPreheatIdentifier", "getOptionSet", "addAll", "checkDuplicateOption"]}, "repository": {"repo_id": 66940520, "url": "https://github.com/dhis2/dhis2-core", "stars": 151, "created": "8/30/2016 12:57:05 PM +00:00", "updates": "2020-01-24T18:06:36+00:00", "fork": "False", "license": "licensed"}}