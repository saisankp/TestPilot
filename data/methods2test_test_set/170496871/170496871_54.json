{"test_class": {"identifier": "GridAffinityAssignmentV2Test", "superclass": "", "interfaces": "", "fields": [{"original_string": "protected DiscoveryMetricsProvider metrics = new SerializableMetricsProvider();", "modifier": "protected", "type": "DiscoveryMetricsProvider", "declarator": "metrics = new SerializableMetricsProvider()", "var_name": "metrics"}, {"original_string": "protected IgniteProductVersion ver = new IgniteProductVersion();", "modifier": "protected", "type": "IgniteProductVersion", "declarator": "ver = new IgniteProductVersion()", "var_name": "ver"}, {"original_string": "private ClusterNode clusterNode1 = node(metrics, ver, \"1\");", "modifier": "private", "type": "ClusterNode", "declarator": "clusterNode1 = node(metrics, ver, \"1\")", "var_name": "clusterNode1"}, {"original_string": "private ClusterNode clusterNode2 = node(metrics, ver, \"2\");", "modifier": "private", "type": "ClusterNode", "declarator": "clusterNode2 = node(metrics, ver, \"2\")", "var_name": "clusterNode2"}, {"original_string": "private ClusterNode clusterNode3 = node(metrics, ver, \"3\");", "modifier": "private", "type": "ClusterNode", "declarator": "clusterNode3 = node(metrics, ver, \"3\")", "var_name": "clusterNode3"}, {"original_string": "private ClusterNode clusterNode4 = node(metrics, ver, \"4\");", "modifier": "private", "type": "ClusterNode", "declarator": "clusterNode4 = node(metrics, ver, \"4\")", "var_name": "clusterNode4"}, {"original_string": "private ClusterNode clusterNode5 = node(metrics, ver, \"5\");", "modifier": "private", "type": "ClusterNode", "declarator": "clusterNode5 = node(metrics, ver, \"5\")", "var_name": "clusterNode5"}, {"original_string": "private ClusterNode clusterNode6 = node(metrics, ver, \"6\");", "modifier": "private", "type": "ClusterNode", "declarator": "clusterNode6 = node(metrics, ver, \"6\")", "var_name": "clusterNode6"}, {"original_string": "private List<ClusterNode> clusterNodes = new ArrayList<ClusterNode>() {{\n        add(clusterNode1);\n        add(clusterNode2);\n        add(clusterNode3);\n        add(clusterNode4);\n        add(clusterNode5);\n        add(clusterNode6);\n    }};", "modifier": "private", "type": "List<ClusterNode>", "declarator": "clusterNodes = new ArrayList<ClusterNode>() {{\n        add(clusterNode1);\n        add(clusterNode2);\n        add(clusterNode3);\n        add(clusterNode4);\n        add(clusterNode5);\n        add(clusterNode6);\n    }}", "var_name": "clusterNodes"}], "file": "modules/core/src/test/java/org/apache/ignite/internal/processors/affinity/GridAffinityAssignmentV2Test.java"}, "test_case": {"identifier": "testSerialization", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testSerialization() throws IOException, ClassNotFoundException {\n        List<ClusterNode> nodes = new ArrayList<>();\n\n        for (int i = 0; i < 10; i++)\n            nodes.add(node(metrics, ver, \"1\" + i));\n\n        GridAffinityAssignmentV2 gridAffinityAssignment2 = new GridAffinityAssignmentV2(\n            new AffinityTopologyVersion(1, 0),\n            new ArrayList<List<ClusterNode>>() {{\n                add(nodes);\n            }},\n            new ArrayList<>()\n        );\n\n        ByteArrayOutputStream byteArrOutputStream = new ByteArrayOutputStream();\n\n        ObjectOutputStream outputStream = new ObjectOutputStream(byteArrOutputStream);\n\n        outputStream.writeObject(gridAffinityAssignment2);\n\n        ObjectInputStream inputStream = new ObjectInputStream(new ByteArrayInputStream(byteArrOutputStream.toByteArray()));\n\n        GridAffinityAssignmentV2 deserialized = (GridAffinityAssignmentV2)inputStream.readObject();\n\n        assertEquals(deserialized.topologyVersion(), gridAffinityAssignment2.topologyVersion());\n    }", "signature": "void testSerialization()", "full_signature": "@Test public void testSerialization()", "class_method_signature": "GridAffinityAssignmentV2Test.testSerialization()", "testcase": true, "constructor": false, "invocations": ["add", "node", "add", "writeObject", "toByteArray", "readObject", "assertEquals", "topologyVersion", "topologyVersion"]}, "focal_class": {"identifier": "GridAffinityAssignmentV2", "superclass": "extends IgniteDataTransferObject", "interfaces": "implements AffinityAssignment", "fields": [{"original_string": "private static final long serialVersionUID = 0L;", "modifier": "private static final", "type": "long", "declarator": "serialVersionUID = 0L", "var_name": "serialVersionUID"}, {"original_string": "private AffinityTopologyVersion topVer;", "modifier": "private", "type": "AffinityTopologyVersion", "declarator": "topVer", "var_name": "topVer"}, {"original_string": "private List<List<ClusterNode>> assignment;", "modifier": "private", "type": "List<List<ClusterNode>>", "declarator": "assignment", "var_name": "assignment"}, {"original_string": "private Map<UUID, Set<Integer>> primary;", "modifier": "private", "type": "Map<UUID, Set<Integer>>", "declarator": "primary", "var_name": "primary"}, {"original_string": "private Map<UUID, Set<Integer>> backup;", "modifier": "private", "type": "Map<UUID, Set<Integer>>", "declarator": "backup", "var_name": "backup"}, {"original_string": "private Set<Integer> primariesDifferentToIdeal;", "modifier": "private", "type": "Set<Integer>", "declarator": "primariesDifferentToIdeal", "var_name": "primariesDifferentToIdeal"}, {"original_string": "private transient volatile List<Collection<UUID>> assignmentIds;", "modifier": "private transient volatile", "type": "List<Collection<UUID>>", "declarator": "assignmentIds", "var_name": "assignmentIds"}, {"original_string": "private transient volatile Set<ClusterNode> nodes;", "modifier": "private transient volatile", "type": "Set<ClusterNode>", "declarator": "nodes", "var_name": "nodes"}, {"original_string": "private transient volatile Set<ClusterNode> primaryPartsNodes;", "modifier": "private transient volatile", "type": "Set<ClusterNode>", "declarator": "primaryPartsNodes", "var_name": "primaryPartsNodes"}, {"original_string": "private transient List<List<ClusterNode>> idealAssignment;", "modifier": "private transient", "type": "List<List<ClusterNode>>", "declarator": "idealAssignment", "var_name": "idealAssignment"}], "methods": [{"identifier": "GridAffinityAssignmentV2", "parameters": "()", "modifiers": "public", "return": "", "signature": " GridAffinityAssignmentV2()", "full_signature": "public  GridAffinityAssignmentV2()", "class_method_signature": "GridAffinityAssignmentV2.GridAffinityAssignmentV2()", "testcase": false, "constructor": true}, {"identifier": "GridAffinityAssignmentV2", "parameters": "(AffinityTopologyVersion topVer)", "modifiers": "", "return": "", "signature": " GridAffinityAssignmentV2(AffinityTopologyVersion topVer)", "full_signature": "  GridAffinityAssignmentV2(AffinityTopologyVersion topVer)", "class_method_signature": "GridAffinityAssignmentV2.GridAffinityAssignmentV2(AffinityTopologyVersion topVer)", "testcase": false, "constructor": true}, {"identifier": "GridAffinityAssignmentV2", "parameters": "(AffinityTopologyVersion topVer,\n        List<List<ClusterNode>> assignment,\n        List<List<ClusterNode>> idealAssignment\n    )", "modifiers": "public", "return": "", "signature": " GridAffinityAssignmentV2(AffinityTopologyVersion topVer,\n        List<List<ClusterNode>> assignment,\n        List<List<ClusterNode>> idealAssignment\n    )", "full_signature": "public  GridAffinityAssignmentV2(AffinityTopologyVersion topVer,\n        List<List<ClusterNode>> assignment,\n        List<List<ClusterNode>> idealAssignment\n    )", "class_method_signature": "GridAffinityAssignmentV2.GridAffinityAssignmentV2(AffinityTopologyVersion topVer,\n        List<List<ClusterNode>> assignment,\n        List<List<ClusterNode>> idealAssignment\n    )", "testcase": false, "constructor": true}, {"identifier": "GridAffinityAssignmentV2", "parameters": "(AffinityTopologyVersion topVer, GridAffinityAssignmentV2 aff)", "modifiers": "", "return": "", "signature": " GridAffinityAssignmentV2(AffinityTopologyVersion topVer, GridAffinityAssignmentV2 aff)", "full_signature": "  GridAffinityAssignmentV2(AffinityTopologyVersion topVer, GridAffinityAssignmentV2 aff)", "class_method_signature": "GridAffinityAssignmentV2.GridAffinityAssignmentV2(AffinityTopologyVersion topVer, GridAffinityAssignmentV2 aff)", "testcase": false, "constructor": true}, {"identifier": "idealAssignment", "parameters": "()", "modifiers": "@Override public", "return": "List<List<ClusterNode>>", "signature": "List<List<ClusterNode>> idealAssignment()", "full_signature": "@Override public List<List<ClusterNode>> idealAssignment()", "class_method_signature": "GridAffinityAssignmentV2.idealAssignment()", "testcase": false, "constructor": false}, {"identifier": "assignment", "parameters": "()", "modifiers": "@Override public", "return": "List<List<ClusterNode>>", "signature": "List<List<ClusterNode>> assignment()", "full_signature": "@Override public List<List<ClusterNode>> assignment()", "class_method_signature": "GridAffinityAssignmentV2.assignment()", "testcase": false, "constructor": false}, {"identifier": "topologyVersion", "parameters": "()", "modifiers": "@Override public", "return": "AffinityTopologyVersion", "signature": "AffinityTopologyVersion topologyVersion()", "full_signature": "@Override public AffinityTopologyVersion topologyVersion()", "class_method_signature": "GridAffinityAssignmentV2.topologyVersion()", "testcase": false, "constructor": false}, {"identifier": "get", "parameters": "(int part)", "modifiers": "@Override public", "return": "List<ClusterNode>", "signature": "List<ClusterNode> get(int part)", "full_signature": "@Override public List<ClusterNode> get(int part)", "class_method_signature": "GridAffinityAssignmentV2.get(int part)", "testcase": false, "constructor": false}, {"identifier": "getIds", "parameters": "(int part)", "modifiers": "@Override public", "return": "Collection<UUID>", "signature": "Collection<UUID> getIds(int part)", "full_signature": "@Override public Collection<UUID> getIds(int part)", "class_method_signature": "GridAffinityAssignmentV2.getIds(int part)", "testcase": false, "constructor": false}, {"identifier": "getOrCreateAssignmentsIds", "parameters": "(int part)", "modifiers": "private", "return": "Collection<UUID>", "signature": "Collection<UUID> getOrCreateAssignmentsIds(int part)", "full_signature": "private Collection<UUID> getOrCreateAssignmentsIds(int part)", "class_method_signature": "GridAffinityAssignmentV2.getOrCreateAssignmentsIds(int part)", "testcase": false, "constructor": false}, {"identifier": "nodes", "parameters": "()", "modifiers": "@Override public", "return": "Set<ClusterNode>", "signature": "Set<ClusterNode> nodes()", "full_signature": "@Override public Set<ClusterNode> nodes()", "class_method_signature": "GridAffinityAssignmentV2.nodes()", "testcase": false, "constructor": false}, {"identifier": "primaryPartitionNodes", "parameters": "()", "modifiers": "@Override public", "return": "Set<ClusterNode>", "signature": "Set<ClusterNode> primaryPartitionNodes()", "full_signature": "@Override public Set<ClusterNode> primaryPartitionNodes()", "class_method_signature": "GridAffinityAssignmentV2.primaryPartitionNodes()", "testcase": false, "constructor": false}, {"identifier": "primaryPartitions", "parameters": "(UUID nodeId)", "modifiers": "@Override public", "return": "Set<Integer>", "signature": "Set<Integer> primaryPartitions(UUID nodeId)", "full_signature": "@Override public Set<Integer> primaryPartitions(UUID nodeId)", "class_method_signature": "GridAffinityAssignmentV2.primaryPartitions(UUID nodeId)", "testcase": false, "constructor": false}, {"identifier": "backupPartitions", "parameters": "(UUID nodeId)", "modifiers": "@Override public", "return": "Set<Integer>", "signature": "Set<Integer> backupPartitions(UUID nodeId)", "full_signature": "@Override public Set<Integer> backupPartitions(UUID nodeId)", "class_method_signature": "GridAffinityAssignmentV2.backupPartitions(UUID nodeId)", "testcase": false, "constructor": false}, {"identifier": "partitionPrimariesDifferentToIdeal", "parameters": "()", "modifiers": "@Override public", "return": "Set<Integer>", "signature": "Set<Integer> partitionPrimariesDifferentToIdeal()", "full_signature": "@Override public Set<Integer> partitionPrimariesDifferentToIdeal()", "class_method_signature": "GridAffinityAssignmentV2.partitionPrimariesDifferentToIdeal()", "testcase": false, "constructor": false}, {"identifier": "hashCode", "parameters": "()", "modifiers": "@Override public", "return": "int", "signature": "int hashCode()", "full_signature": "@Override public int hashCode()", "class_method_signature": "GridAffinityAssignmentV2.hashCode()", "testcase": false, "constructor": false}, {"identifier": "equals", "parameters": "(Object o)", "modifiers": "@SuppressWarnings(\"SimplifiableIfStatement\") @Override public", "return": "boolean", "signature": "boolean equals(Object o)", "full_signature": "@SuppressWarnings(\"SimplifiableIfStatement\") @Override public boolean equals(Object o)", "class_method_signature": "GridAffinityAssignmentV2.equals(Object o)", "testcase": false, "constructor": false}, {"identifier": "toString", "parameters": "()", "modifiers": "@Override public", "return": "String", "signature": "String toString()", "full_signature": "@Override public String toString()", "class_method_signature": "GridAffinityAssignmentV2.toString()", "testcase": false, "constructor": false}, {"identifier": "writeExternalData", "parameters": "(ObjectOutput out)", "modifiers": "@Override protected", "return": "void", "signature": "void writeExternalData(ObjectOutput out)", "full_signature": "@Override protected void writeExternalData(ObjectOutput out)", "class_method_signature": "GridAffinityAssignmentV2.writeExternalData(ObjectOutput out)", "testcase": false, "constructor": false}, {"identifier": "readExternalData", "parameters": "(byte protoVer, ObjectInput in)", "modifiers": "@Override protected", "return": "void", "signature": "void readExternalData(byte protoVer, ObjectInput in)", "full_signature": "@Override protected void readExternalData(byte protoVer, ObjectInput in)", "class_method_signature": "GridAffinityAssignmentV2.readExternalData(byte protoVer, ObjectInput in)", "testcase": false, "constructor": false}], "file": "modules/core/src/main/java/org/apache/ignite/internal/processors/affinity/GridAffinityAssignmentV2.java"}, "focal_method": {"identifier": "topologyVersion", "parameters": "()", "modifiers": "@Override public", "return": "AffinityTopologyVersion", "body": "@Override public AffinityTopologyVersion topologyVersion() {\n        return topVer;\n    }", "signature": "AffinityTopologyVersion topologyVersion()", "full_signature": "@Override public AffinityTopologyVersion topologyVersion()", "class_method_signature": "GridAffinityAssignmentV2.topologyVersion()", "testcase": false, "constructor": false, "invocations": []}, "repository": {"repo_id": 170496871, "url": "https://github.com/gridgain/gridgain", "stars": 46, "created": "2/13/2019 11:31:35 AM +00:00", "updates": "2020-01-27T16:02:24+00:00", "fork": "False", "license": "licensed"}}