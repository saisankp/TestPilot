{"test_class": {"identifier": "LookoutRegistryMetricReaderTest", "superclass": "extends AbstractTestBase", "interfaces": "", "fields": [{"original_string": "@Autowired\n    private List<MetricReaderPublicMetrics> metricReaderPublicMetrics   = null;", "modifier": "@Autowired\n    private", "type": "List<MetricReaderPublicMetrics>", "declarator": "metricReaderPublicMetrics   = null", "var_name": "metricReaderPublicMetrics"}, {"original_string": "@Autowired\n    private LookoutRegistryMetricReader     lookoutRegistryMetricReader = null;", "modifier": "@Autowired\n    private", "type": "LookoutRegistryMetricReader", "declarator": "lookoutRegistryMetricReader = null", "var_name": "lookoutRegistryMetricReader"}], "file": "client/lookout-sofa-boot-starter/src/test/java/com/alipay/lookout/starter/support/reader/LookoutRegistryMetricReaderTest.java"}, "test_case": {"identifier": "testFindOne", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testFindOne() throws Exception {\n        assertNull(lookoutRegistryMetricReader.findOne(\"\"));\n        assertTrue(this.metricReaderPublicMetrics != null\n                   && this.metricReaderPublicMetrics.size() > 0);\n        assertNotNull(testRestTemplate);\n        String endpointId = \"mappings\";\n        String restUrl = urlHttpPrefix + \"/\" + endpointId;\n        ResponseEntity<String> response = testRestTemplate.getForEntity(restUrl, String.class);\n        assertTrue(StringUtils.isNotBlank(response.getBody()));\n        //\n        Metric metric = this.lookoutRegistryMetricReader\n            .findOne(LookoutSpringBootMetricsImpl.LOOKOUT_GAUGE_PREFIX + \"response.\" + endpointId);\n        assertTrue(metric != null);\n    }", "signature": "void testFindOne()", "full_signature": "@Test public void testFindOne()", "class_method_signature": "LookoutRegistryMetricReaderTest.testFindOne()", "testcase": true, "constructor": false, "invocations": ["assertNull", "findOne", "assertTrue", "size", "assertNotNull", "getForEntity", "assertTrue", "isNotBlank", "getBody", "findOne", "assertTrue"]}, "focal_class": {"identifier": "LookoutRegistryMetricReader", "superclass": "", "interfaces": "implements MetricReader, MetricRegistryListener", "fields": [{"original_string": "private final SpringBootActuatorRegistry springBootActuatorRegistry;", "modifier": "private final", "type": "SpringBootActuatorRegistry", "declarator": "springBootActuatorRegistry", "var_name": "springBootActuatorRegistry"}], "methods": [{"identifier": "LookoutRegistryMetricReader", "parameters": "(SpringBootActuatorRegistry springBootActuatorRegistry)", "modifiers": "public", "return": "", "signature": " LookoutRegistryMetricReader(SpringBootActuatorRegistry springBootActuatorRegistry)", "full_signature": "public  LookoutRegistryMetricReader(SpringBootActuatorRegistry springBootActuatorRegistry)", "class_method_signature": "LookoutRegistryMetricReader.LookoutRegistryMetricReader(SpringBootActuatorRegistry springBootActuatorRegistry)", "testcase": false, "constructor": true}, {"identifier": "findOne", "parameters": "(String metricName)", "modifiers": "@Override public", "return": "Metric<?>", "signature": "Metric<?> findOne(String metricName)", "full_signature": "@Override public Metric<?> findOne(String metricName)", "class_method_signature": "LookoutRegistryMetricReader.findOne(String metricName)", "testcase": false, "constructor": false}, {"identifier": "findMetricsById", "parameters": "(Id id)", "modifiers": "private", "return": "List<Metric>", "signature": "List<Metric> findMetricsById(Id id)", "full_signature": "private List<Metric> findMetricsById(Id id)", "class_method_signature": "LookoutRegistryMetricReader.findMetricsById(Id id)", "testcase": false, "constructor": false}, {"identifier": "findAll", "parameters": "()", "modifiers": "@Override public", "return": "Iterable<Metric<?>>", "signature": "Iterable<Metric<?>> findAll()", "full_signature": "@Override public Iterable<Metric<?>> findAll()", "class_method_signature": "LookoutRegistryMetricReader.findAll()", "testcase": false, "constructor": false}, {"identifier": "count", "parameters": "()", "modifiers": "@Override public", "return": "long", "signature": "long count()", "full_signature": "@Override public long count()", "class_method_signature": "LookoutRegistryMetricReader.count()", "testcase": false, "constructor": false}, {"identifier": "onRemoved", "parameters": "(com.alipay.lookout.api.Metric metric)", "modifiers": "@Override public", "return": "void", "signature": "void onRemoved(com.alipay.lookout.api.Metric metric)", "full_signature": "@Override public void onRemoved(com.alipay.lookout.api.Metric metric)", "class_method_signature": "LookoutRegistryMetricReader.onRemoved(com.alipay.lookout.api.Metric metric)", "testcase": false, "constructor": false}, {"identifier": "onAdded", "parameters": "(com.alipay.lookout.api.Metric metric)", "modifiers": "@Override public", "return": "void", "signature": "void onAdded(com.alipay.lookout.api.Metric metric)", "full_signature": "@Override public void onAdded(com.alipay.lookout.api.Metric metric)", "class_method_signature": "LookoutRegistryMetricReader.onAdded(com.alipay.lookout.api.Metric metric)", "testcase": false, "constructor": false}], "file": "client/lookout-sofa-boot-starter/src/main/java/com/alipay/lookout/starter/support/reader/LookoutRegistryMetricReader.java"}, "focal_method": {"identifier": "findOne", "parameters": "(String metricName)", "modifiers": "@Override public", "return": "Metric<?>", "body": "@Override\n    public Metric<?> findOne(String metricName) {\n        if (StringUtils.isBlank(metricName)) {\n            return null;\n        }\n        //Standard Actuator Implementation\n        Id id = this.springBootActuatorRegistry.createId(metricName);\n        List<Metric> metricList = findMetricsById(id);\n        if (metricList != null && metricList.size() > 0) {\n            //Converted to lookout Metrics,default first\n            return metricList.get(0);\n        } else {\n            return null;\n        }\n    }", "signature": "Metric<?> findOne(String metricName)", "full_signature": "@Override public Metric<?> findOne(String metricName)", "class_method_signature": "LookoutRegistryMetricReader.findOne(String metricName)", "testcase": false, "constructor": false, "invocations": ["isBlank", "createId", "findMetricsById", "size", "get"]}, "repository": {"repo_id": 133381280, "url": "https://github.com/sofastack/sofa-lookout", "language": "Java", "is_fork": false, "fork_count": 113, "stargazer_count": 318, "size": 1394, "license": "licensed"}}