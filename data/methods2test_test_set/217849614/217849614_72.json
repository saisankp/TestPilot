{"test_class": {"identifier": "GuavaBloomFilterTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final GuavaBloomFilterFactory testingFactory = new GuavaBloomFilterFactory();", "modifier": "private static final", "type": "GuavaBloomFilterFactory", "declarator": "testingFactory = new GuavaBloomFilterFactory()", "var_name": "testingFactory"}, {"original_string": "private static final ExpirableBloomFilterConfig defaultTestingConfig = new ExpirableBloomFilterConfig();", "modifier": "private static final", "type": "ExpirableBloomFilterConfig", "declarator": "defaultTestingConfig = new ExpirableBloomFilterConfig()", "var_name": "defaultTestingConfig"}], "file": "filter-service-core/src/test/java/cn/leancloud/filter/service/GuavaBloomFilterTest.java"}, "test_case": {"identifier": "testExpiredFilter", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testExpiredFilter() {\n        final AdjustableTimer timer = new AdjustableTimer();\n        final ZonedDateTime creation = ZonedDateTime.now(ZoneOffset.UTC);\n        final ZonedDateTime expiration = creation.plusSeconds(10);\n        final GuavaBloomFilter filter = new GuavaBloomFilter(\n                1000,\n                0.001,\n                creation,\n                expiration,\n                null,\n                timer);\n        timer.setNow(expiration);\n        assertThat(filter.expired()).isFalse();\n        timer.setNow(expiration.plusSeconds(1));\n        assertThat(filter.expired()).isTrue();\n    }", "signature": "void testExpiredFilter()", "full_signature": "@Test public void testExpiredFilter()", "class_method_signature": "GuavaBloomFilterTest.testExpiredFilter()", "testcase": true, "constructor": false, "invocations": ["now", "plusSeconds", "setNow", "isFalse", "assertThat", "expired", "setNow", "plusSeconds", "isTrue", "assertThat", "expired"]}, "focal_class": {"identifier": "GuavaBloomFilter", "superclass": "", "interfaces": "implements ExpirableBloomFilter", "fields": [{"original_string": "private static final DateTimeFormatter ISO_8601_FORMATTER = DateTimeFormatter.ofPattern(\"yyyy-MM-dd'T'HH:mm:ss.SSSXXX\");", "modifier": "private static final", "type": "DateTimeFormatter", "declarator": "ISO_8601_FORMATTER = DateTimeFormatter.ofPattern(\"yyyy-MM-dd'T'HH:mm:ss.SSSXXX\")", "var_name": "ISO_8601_FORMATTER"}, {"original_string": "private final ZonedDateTime created;", "modifier": "private final", "type": "ZonedDateTime", "declarator": "created", "var_name": "created"}, {"original_string": "@JsonIgnore\n    private final com.google.common.hash.BloomFilter<CharSequence> filter;", "modifier": "@JsonIgnore\n    private final", "type": "com.google.common.hash.BloomFilter<CharSequence>", "declarator": "filter", "var_name": "filter"}, {"original_string": "@Nullable\n    private final Duration validPeriodAfterAccess;", "modifier": "@Nullable\n    private final", "type": "Duration", "declarator": "validPeriodAfterAccess", "var_name": "validPeriodAfterAccess"}, {"original_string": "private final double fpp;", "modifier": "private final", "type": "double", "declarator": "fpp", "var_name": "fpp"}, {"original_string": "private final int expectedInsertions;", "modifier": "private final", "type": "int", "declarator": "expectedInsertions", "var_name": "expectedInsertions"}, {"original_string": "private final Timer timer;", "modifier": "private final", "type": "Timer", "declarator": "timer", "var_name": "timer"}, {"original_string": "private ZonedDateTime expiration;", "modifier": "private", "type": "ZonedDateTime", "declarator": "expiration", "var_name": "expiration"}], "methods": [{"identifier": "readFrom", "parameters": "(InputStream in)", "modifiers": "static", "return": "GuavaBloomFilter", "signature": "GuavaBloomFilter readFrom(InputStream in)", "full_signature": "static GuavaBloomFilter readFrom(InputStream in)", "class_method_signature": "GuavaBloomFilter.readFrom(InputStream in)", "testcase": false, "constructor": false}, {"identifier": "GuavaBloomFilter", "parameters": "(@JsonProperty(\"expectedInsertions\") int expectedInsertions,\n                     @JsonProperty(\"fpp\") double fpp,\n                     @JsonProperty(\"created\") ZonedDateTime created,\n                     @JsonProperty(\"expiration\") ZonedDateTime expiration,\n                     @Nullable @JsonProperty(\"validPeriodAfterAccess\") Duration validPeriodAfterAccess)", "modifiers": "@JsonCreator", "return": "", "signature": " GuavaBloomFilter(@JsonProperty(\"expectedInsertions\") int expectedInsertions,\n                     @JsonProperty(\"fpp\") double fpp,\n                     @JsonProperty(\"created\") ZonedDateTime created,\n                     @JsonProperty(\"expiration\") ZonedDateTime expiration,\n                     @Nullable @JsonProperty(\"validPeriodAfterAccess\") Duration validPeriodAfterAccess)", "full_signature": "@JsonCreator  GuavaBloomFilter(@JsonProperty(\"expectedInsertions\") int expectedInsertions,\n                     @JsonProperty(\"fpp\") double fpp,\n                     @JsonProperty(\"created\") ZonedDateTime created,\n                     @JsonProperty(\"expiration\") ZonedDateTime expiration,\n                     @Nullable @JsonProperty(\"validPeriodAfterAccess\") Duration validPeriodAfterAccess)", "class_method_signature": "GuavaBloomFilter.GuavaBloomFilter(@JsonProperty(\"expectedInsertions\") int expectedInsertions,\n                     @JsonProperty(\"fpp\") double fpp,\n                     @JsonProperty(\"created\") ZonedDateTime created,\n                     @JsonProperty(\"expiration\") ZonedDateTime expiration,\n                     @Nullable @JsonProperty(\"validPeriodAfterAccess\") Duration validPeriodAfterAccess)", "testcase": false, "constructor": true}, {"identifier": "GuavaBloomFilter", "parameters": "(int expectedInsertions,\n                     double fpp,\n                     ZonedDateTime created,\n                     ZonedDateTime expiration,\n                     @Nullable Duration validPeriodAfterAccess,\n                     Timer timer)", "modifiers": "", "return": "", "signature": " GuavaBloomFilter(int expectedInsertions,\n                     double fpp,\n                     ZonedDateTime created,\n                     ZonedDateTime expiration,\n                     @Nullable Duration validPeriodAfterAccess,\n                     Timer timer)", "full_signature": "  GuavaBloomFilter(int expectedInsertions,\n                     double fpp,\n                     ZonedDateTime created,\n                     ZonedDateTime expiration,\n                     @Nullable Duration validPeriodAfterAccess,\n                     Timer timer)", "class_method_signature": "GuavaBloomFilter.GuavaBloomFilter(int expectedInsertions,\n                     double fpp,\n                     ZonedDateTime created,\n                     ZonedDateTime expiration,\n                     @Nullable Duration validPeriodAfterAccess,\n                     Timer timer)", "testcase": false, "constructor": true}, {"identifier": "GuavaBloomFilter", "parameters": "(int expectedInsertions,\n                             double fpp,\n                             ZonedDateTime created,\n                             ZonedDateTime expiration,\n                             @Nullable Duration validPeriodAfterAccess,\n                             com.google.common.hash.BloomFilter<CharSequence> filter,\n                             Timer timer)", "modifiers": "private", "return": "", "signature": " GuavaBloomFilter(int expectedInsertions,\n                             double fpp,\n                             ZonedDateTime created,\n                             ZonedDateTime expiration,\n                             @Nullable Duration validPeriodAfterAccess,\n                             com.google.common.hash.BloomFilter<CharSequence> filter,\n                             Timer timer)", "full_signature": "private  GuavaBloomFilter(int expectedInsertions,\n                             double fpp,\n                             ZonedDateTime created,\n                             ZonedDateTime expiration,\n                             @Nullable Duration validPeriodAfterAccess,\n                             com.google.common.hash.BloomFilter<CharSequence> filter,\n                             Timer timer)", "class_method_signature": "GuavaBloomFilter.GuavaBloomFilter(int expectedInsertions,\n                             double fpp,\n                             ZonedDateTime created,\n                             ZonedDateTime expiration,\n                             @Nullable Duration validPeriodAfterAccess,\n                             com.google.common.hash.BloomFilter<CharSequence> filter,\n                             Timer timer)", "testcase": false, "constructor": true}, {"identifier": "created", "parameters": "()", "modifiers": "@JsonSerialize(using = ZonedDateTimeSerializer.class) @JsonDeserialize(using = ZonedDateTimeDeserializer.class) public", "return": "ZonedDateTime", "signature": "ZonedDateTime created()", "full_signature": "@JsonSerialize(using = ZonedDateTimeSerializer.class) @JsonDeserialize(using = ZonedDateTimeDeserializer.class) public ZonedDateTime created()", "class_method_signature": "GuavaBloomFilter.created()", "testcase": false, "constructor": false}, {"identifier": "expiration", "parameters": "()", "modifiers": "@Override @JsonSerialize(using = ZonedDateTimeSerializer.class) @JsonDeserialize(using = ZonedDateTimeDeserializer.class) public synchronized", "return": "ZonedDateTime", "signature": "ZonedDateTime expiration()", "full_signature": "@Override @JsonSerialize(using = ZonedDateTimeSerializer.class) @JsonDeserialize(using = ZonedDateTimeDeserializer.class) public synchronized ZonedDateTime expiration()", "class_method_signature": "GuavaBloomFilter.expiration()", "testcase": false, "constructor": false}, {"identifier": "fpp", "parameters": "()", "modifiers": "@Override @JsonGetter(\"fpp\") public", "return": "double", "signature": "double fpp()", "full_signature": "@Override @JsonGetter(\"fpp\") public double fpp()", "class_method_signature": "GuavaBloomFilter.fpp()", "testcase": false, "constructor": false}, {"identifier": "expectedInsertions", "parameters": "()", "modifiers": "@Override @JsonGetter(\"expectedInsertions\") public", "return": "int", "signature": "int expectedInsertions()", "full_signature": "@Override @JsonGetter(\"expectedInsertions\") public int expectedInsertions()", "class_method_signature": "GuavaBloomFilter.expectedInsertions()", "testcase": false, "constructor": false}, {"identifier": "set", "parameters": "(String value)", "modifiers": "@Override public", "return": "boolean", "signature": "boolean set(String value)", "full_signature": "@Override public boolean set(String value)", "class_method_signature": "GuavaBloomFilter.set(String value)", "testcase": false, "constructor": false}, {"identifier": "expired", "parameters": "()", "modifiers": "@Override public", "return": "boolean", "signature": "boolean expired()", "full_signature": "@Override public boolean expired()", "class_method_signature": "GuavaBloomFilter.expired()", "testcase": false, "constructor": false}, {"identifier": "mightContain", "parameters": "(String value)", "modifiers": "@Override public", "return": "boolean", "signature": "boolean mightContain(String value)", "full_signature": "@Override public boolean mightContain(String value)", "class_method_signature": "GuavaBloomFilter.mightContain(String value)", "testcase": false, "constructor": false}, {"identifier": "writeTo", "parameters": "(OutputStream out)", "modifiers": "public", "return": "void", "signature": "void writeTo(OutputStream out)", "full_signature": "public void writeTo(OutputStream out)", "class_method_signature": "GuavaBloomFilter.writeTo(OutputStream out)", "testcase": false, "constructor": false}, {"identifier": "equals", "parameters": "(Object o)", "modifiers": "@Override public", "return": "boolean", "signature": "boolean equals(Object o)", "full_signature": "@Override public boolean equals(Object o)", "class_method_signature": "GuavaBloomFilter.equals(Object o)", "testcase": false, "constructor": false}, {"identifier": "hashCode", "parameters": "()", "modifiers": "@Override public", "return": "int", "signature": "int hashCode()", "full_signature": "@Override public int hashCode()", "class_method_signature": "GuavaBloomFilter.hashCode()", "testcase": false, "constructor": false}, {"identifier": "toString", "parameters": "()", "modifiers": "@Override public", "return": "String", "signature": "String toString()", "full_signature": "@Override public String toString()", "class_method_signature": "GuavaBloomFilter.toString()", "testcase": false, "constructor": false}, {"identifier": "validPeriodAfterAccess", "parameters": "()", "modifiers": "@Nullable @JsonInclude(Include.NON_NULL) @JsonGetter(\"validPeriodAfterAccess\") @JsonSerialize(using = DurationSerializer.class) @JsonDeserialize(using = DurationDeserializer.class)", "return": "Duration", "signature": "Duration validPeriodAfterAccess()", "full_signature": "@Nullable @JsonInclude(Include.NON_NULL) @JsonGetter(\"validPeriodAfterAccess\") @JsonSerialize(using = DurationSerializer.class) @JsonDeserialize(using = DurationDeserializer.class) Duration validPeriodAfterAccess()", "class_method_signature": "GuavaBloomFilter.validPeriodAfterAccess()", "testcase": false, "constructor": false}, {"identifier": "tryExtendExpiration", "parameters": "()", "modifiers": "private", "return": "void", "signature": "void tryExtendExpiration()", "full_signature": "private void tryExtendExpiration()", "class_method_signature": "GuavaBloomFilter.tryExtendExpiration()", "testcase": false, "constructor": false}], "file": "filter-service-core/src/main/java/cn/leancloud/filter/service/GuavaBloomFilter.java"}, "focal_method": {"identifier": "expired", "parameters": "()", "modifiers": "@Override public", "return": "boolean", "body": "@Override\n    public boolean expired() {\n        if (validPeriodAfterAccess == null) {\n            return timer.utcNow().isAfter(expiration);\n        } else {\n            synchronized (this) {\n                return timer.utcNow().isAfter(expiration);\n            }\n        }\n    }", "signature": "boolean expired()", "full_signature": "@Override public boolean expired()", "class_method_signature": "GuavaBloomFilter.expired()", "testcase": false, "constructor": false, "invocations": ["isAfter", "utcNow", "isAfter", "utcNow"]}, "repository": {"repo_id": 217849614, "url": "https://github.com/leancloud/filter-service", "language": "Java", "is_fork": false, "fork_count": 0, "stargazer_count": 14, "size": 2797, "license": "licensed"}}