{"test_class": {"identifier": "QueueingEventSubjectTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private QueueingEventSubject<String> eventSubject;", "modifier": "private", "type": "QueueingEventSubject<String>", "declarator": "eventSubject", "var_name": "eventSubject"}, {"original_string": "private RecordingConsumer<String> receiver;", "modifier": "private", "type": "RecordingConsumer<String>", "declarator": "receiver", "var_name": "receiver"}], "file": "mobius-extras/src/test/java/com/spotify/mobius/extras/QueueingEventSubjectTest.java"}, "test_case": {"identifier": "shouldThrowWhenCapacityExceeded", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n  public void shouldThrowWhenCapacityExceeded() throws Exception {\n    eventSubject.accept(\"a\");\n    eventSubject.accept(\"b\");\n    eventSubject.accept(\"c\");\n\n    assertThatThrownBy(() -> eventSubject.accept(\"noo, too many things\"))\n        .isInstanceOf(IllegalStateException.class);\n  }", "signature": "void shouldThrowWhenCapacityExceeded()", "full_signature": "@Test public void shouldThrowWhenCapacityExceeded()", "class_method_signature": "QueueingEventSubjectTest.shouldThrowWhenCapacityExceeded()", "testcase": true, "constructor": false, "invocations": ["accept", "accept", "accept", "isInstanceOf", "assertThatThrownBy", "accept"]}, "focal_class": {"identifier": "QueueingEventSubject", "superclass": "", "interfaces": "implements EventSource<E>, Consumer<E>", "fields": [{"original_string": "private final BlockingQueue<E> queue;", "modifier": "private final", "type": "BlockingQueue<E>", "declarator": "queue", "var_name": "queue"}, {"original_string": "private State state;", "modifier": "private", "type": "State", "declarator": "state", "var_name": "state"}, {"original_string": "private Consumer<E> subscriber;", "modifier": "private", "type": "Consumer<E>", "declarator": "subscriber", "var_name": "subscriber"}], "methods": [{"identifier": "QueueingEventSubject", "parameters": "(int capacity)", "modifiers": "public", "return": "", "signature": " QueueingEventSubject(int capacity)", "full_signature": "public  QueueingEventSubject(int capacity)", "class_method_signature": "QueueingEventSubject.QueueingEventSubject(int capacity)", "testcase": false, "constructor": true}, {"identifier": "subscribe", "parameters": "(Consumer<E> eventConsumer)", "modifiers": "@Nonnull @Override public", "return": "Disposable", "signature": "Disposable subscribe(Consumer<E> eventConsumer)", "full_signature": "@Nonnull @Override public Disposable subscribe(Consumer<E> eventConsumer)", "class_method_signature": "QueueingEventSubject.subscribe(Consumer<E> eventConsumer)", "testcase": false, "constructor": false}, {"identifier": "accept", "parameters": "(E value)", "modifiers": "@Override public", "return": "void", "signature": "void accept(E value)", "full_signature": "@Override public void accept(E value)", "class_method_signature": "QueueingEventSubject.accept(E value)", "testcase": false, "constructor": false}, {"identifier": "unsubscribe", "parameters": "()", "modifiers": "private synchronized", "return": "void", "signature": "void unsubscribe()", "full_signature": "private synchronized void unsubscribe()", "class_method_signature": "QueueingEventSubject.unsubscribe()", "testcase": false, "constructor": false}], "file": "mobius-extras/src/main/java/com/spotify/mobius/extras/QueueingEventSubject.java"}, "focal_method": {"identifier": "accept", "parameters": "(E value)", "modifiers": "@Override public", "return": "void", "body": "@Override\n  public void accept(E value) {\n    Consumer<E> consumerToInvoke = null;\n\n    // avoid calling the consumer from the synchronized section\n    synchronized (this) {\n      switch (state) {\n        case NO_SUBSCRIBER:\n          queue.add(value);\n          break;\n        case SUBSCRIBED:\n          consumerToInvoke = subscriber;\n          break;\n      }\n    }\n\n    if (consumerToInvoke != null) {\n      consumerToInvoke.accept(value);\n    }\n  }", "signature": "void accept(E value)", "full_signature": "@Override public void accept(E value)", "class_method_signature": "QueueingEventSubject.accept(E value)", "testcase": false, "constructor": false, "invocations": ["add", "accept"]}, "repository": {"repo_id": 118132535, "url": "https://github.com/spotify/mobius", "stars": 663, "created": "1/19/2018 2:07:51 PM +00:00", "updates": "2020-01-27T22:05:43+00:00", "fork": "False", "license": "licensed"}}